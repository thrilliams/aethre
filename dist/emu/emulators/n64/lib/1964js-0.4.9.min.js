/*
 1964js - JavaScript/HTML5 port of 1964 - N64 emulator
  Copyright (C) 2012 Joel Middendorf

  This program is free software; you can redistribute it and/or
  modify it under the terms of the GNU General Public License
  as published by the Free Software Foundation; either version 2
  of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),e=new a([[b,2],[d,3]]);if(2!=e.get(b)||3!=e.get(d))return!1;e.delete(b);e.set(d,4);return!e.has(b)&&4==e.get(d)}catch(n){return!1}}function c(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function d(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;
var e="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var g=0,h=function(a){this.id_=(g+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};h.prototype.set=function(a,b){c(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=b;return this};h.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};h.prototype.has=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};h.prototype.delete=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),c=e.next();if(c.done||c.value[0]!=b||"s"!=c.value[1])return!1;c=e.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!e.next().done?!1:!0}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=new WeakMap,d=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var d=e(this,a);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=b:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return g(this,function(a){return a.key})};d.prototype.values=function(){return g(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var d=this.entries(),e;!(e=d.next()).done;)e=e.value,a.call(b,e[1],e[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++k,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var g=e[a];if(b!==b&&g.key!==g.key||b===g.key)return{id:d,list:e,index:a,entry:g}}return{id:d,list:e,index:-1,entry:void 0}},g=function(a,b){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return d},"es6","es3");
(function(){var a=function(){return function(){this.MEMORY_START_PIF=532676608;this.MEMORY_START_PIF_RAM=532678592;this.MEMORY_SIZE_PIF=65536;this.INDEX=0;this.RANDOM=1;this.ENTRYLO0=2;this.ENTRYLO1=3;this.CONTEXT=4;this.PAGEMASK=5;this.WIRED=6;this.RESERVED0=7;this.BADVADDR=8;this.COUNT=9;this.ENTRYHI=10;this.COMPARE=11;this.STATUS=12;this.CAUSE=13;this.EPC=14;this.PREVID=15;this.CONFIG=16;this.LLADDR=17;this.WATCHLO=18;this.WATCHHI=19;this.XCONTEXT=20;this.RESERVED1=21;this.RESERVED2=22;this.RESERVED3=
23;this.RESERVED4=24;this.RESERVED5=25;this.PERR=26;this.CACHEERR=27;this.TAGLO=28;this.TAGHI=29;this.ERROREPC=30;this.RESERVED6=31;this.SP_DMEM_TASK=4032;this.SP_MEM_ADDR_REG=0;this.SP_DRAM_ADDR_REG=4;this.SP_RD_LEN_REG=8;this.SP_WR_LEN_REG=12;this.SP_STATUS_REG=16;this.SP_DMA_FULL_REG=20;this.SP_DMA_BUSY_REG=24;this.SP_SEMAPHORE_REG=28;this.SP_PC_REG=0;this.SP_IBIST_REG=4;this.VI_STATUS_REG=0;this.VI_ORIGIN_REG=4;this.VI_WIDTH_REG=8;this.VI_INTR_REG=12;this.VI_CURRENT_REG=16;this.VI_BURST_REG=20;
this.VI_V_SYNC_REG=24;this.VI_H_SYNC_REG=28;this.VI_LEAP_REG=32;this.VI_H_START_REG=36;this.VI_V_START_REG=40;this.VI_V_BURST_REG=44;this.VI_X_SCALE_REG=48;this.VI_Y_SCALE_REG=52;this.AI_DRAM_ADDR_REG=0;this.AI_LEN_REG=4;this.AI_CONTROL_REG=8;this.AI_STATUS_REG=12;this.AI_DACRATE_REG=16;this.AI_BITRATE_REG=20;this.PI_DRAM_ADDR_REG=0;this.PI_CART_ADDR_REG=4;this.PI_RD_LEN_REG=8;this.PI_WR_LEN_REG=12;this.PI_STATUS_REG=16;this.PI_BSD_DOM1_LAT_REG=20;this.PI_BSD_DOM1_PWD_REG=24;this.PI_BSD_DOM1_PGS_REG=
28;this.PI_BSD_DOM1_RLS_REG=32;this.PI_BSD_DOM2_LAT_REG=36;this.PI_BSD_DOM2_PWD_REG=40;this.PI_BSD_DOM2_PGS_REG=44;this.PI_BSD_DOM2_RLS_REG=48;this.RI_MODE_REG=0;this.RI_CONFIG_REG=4;this.RI_CURRENT_LOAD_REG=8;this.RI_SELECT_REG=12;this.RI_REFRESH_REG=16;this.RI_LATENCY_REG=20;this.RI_RERROR_REG=24;this.RI_WERROR_REG=28;this.MI_INIT_MODE_REG=0;this.MI_VERSION_REG=4;this.MI_INTR_REG=8;this.MI_INTR_MASK_REG=12;this.SI_DRAM_ADDR_REG=0;this.SI_PIF_ADDR_RD64B_REG=4;this.SI_PIF_ADDR_WR64B_REG=16;this.SI_STATUS_REG=
24;this.SI_STATUS_DMA_BUSY=1;this.SI_STATUS_RD_BUSY=2;this.SI_STATUS_DMA_ERROR=8;this.SI_STATUS_INTERRUPT=4096;this.AI_STATUS_FIFO_FULL=2147483648;this.AI_STATUS_DMA_BUSY=1073741824;this.PI_STATUS_RESET=1;this.PI_STATUS_CLR_INTR=2;this.PI_STATUS_ERROR=4;this.PI_STATUS_IO_BUSY=2;this.MI_INTR_SP=this.PI_STATUS_DMA_BUSY=1;this.MI_INTR_SI=2;this.MI_INTR_AI=4;this.MI_INTR_VI=8;this.MI_INTR_PI=16;this.MI_INTR_DP=32;this.MI_INTR_MASK_SP=1;this.MI_INTR_MASK_SI=2;this.MI_INTR_MASK_AI=4;this.MI_INTR_MASK_VI=
8;this.MI_INTR_MASK_PI=16;this.MI_INTR_MASK_DP=32;this.MI_INTR_MASK_SP_CLR=1;this.MI_INTR_MASK_SP_SET=2;this.MI_INTR_MASK_SI_CLR=4;this.MI_INTR_MASK_SI_SET=8;this.MI_INTR_MASK_AI_CLR=16;this.MI_INTR_MASK_AI_SET=32;this.MI_INTR_MASK_VI_CLR=64;this.MI_INTR_MASK_VI_SET=128;this.MI_INTR_MASK_PI_CLR=256;this.MI_INTR_MASK_PI_SET=512;this.MI_INTR_MASK_DP_CLR=1024;this.MI_INTR_MASK_DP_SET=2048;this.MI_MODE_INIT=128;this.MI_MODE_EBUS=256;this.MI_MODE_RDRAM=512;this.MI_CLR_INIT=128;this.MI_SET_INIT=256;this.MI_CLR_EBUS=
512;this.MI_SET_EBUS=1024;this.MI_CLR_DP_INTR=2048;this.MI_CLR_RDRAM=4096;this.MI_SET_RDRAM=8192;this.DPC_START_REG=0;this.DPC_END_REG=4;this.DPC_CURRENT_REG=8;this.DPC_STATUS_REG=12;this.DPC_CLOCK_REG=16;this.DPC_BUFBUSY_REG=20;this.DPC_PIPEBUSY_REG=24;this.DPC_TMEM_REG=28;this.SP_STATUS_HALT=1;this.SP_STATUS_BROKE=2;this.SP_STATUS_DMA_BUSY=4;this.SP_STATUS_DMA_FULL=8;this.SP_STATUS_IO_FULL=16;this.SP_STATUS_SSTEP=32;this.SP_STATUS_INTR_BREAK=64;this.SP_STATUS_YIELD=128;this.SP_STATUS_YIELDED=256;
this.SP_STATUS_TASKDONE=512;this.SP_STATUS_SIG3=1024;this.SP_STATUS_SIG4=2048;this.SP_STATUS_SIG5=4096;this.SP_STATUS_SIG6=8192;this.SP_STATUS_SIG7=16384;this.DPC_STATUS_XBUS_DMEM_DMA=1;this.DPC_STATUS_FREEZE=2;this.DPC_STATUS_FLUSH=4;this.DPC_STATUS_START_GCLK=8;this.DPC_STATUS_TMEM_BUSY=16;this.DPC_STATUS_PIPE_BUSY=32;this.DPC_STATUS_CMD_BUSY=64;this.DPC_STATUS_CBUF_READY=128;this.DPC_STATUS_DMA_BUSY=256;this.DPC_STATUS_END_VALID=512;this.DPC_STATUS_START_VALID=1024;this.DPC_CLR_XBUS_DMEM_DMA=1;
this.DPC_SET_XBUS_DMEM_DMA=2;this.DPC_CLR_FREEZE=4;this.DPC_SET_FREEZE=8;this.DPC_CLR_FLUSH=16;this.DPC_SET_FLUSH=32;this.DPC_CLR_TMEM_REG=64;this.DPC_CLR_PIPEBUSY_REG=128;this.DPC_CLR_BUFBUSY_REG=256;this.DPC_CLR_CLOCK_REG=512;this.IE=1;this.EXL=2;this.ERL=4;this.BD=2147483648;this.BEV=4194304;this.EXC_INT=0;this.EXC_MOD=4;this.TLBL_Miss=this.EXC_RMISS=8;this.TLBS_Miss=this.EXC_WMISS=12;this.EXC_RADE=16;this.EXC_WADE=20;this.EXC_IBE=24;this.EXC_DBE=28;this.EXC_SYSCALL=32;this.EXC_BREAK=36;this.EXC_II=
40;this.EXC_CPU=44;this.EXC_OV=48;this.EXC_TRAP=52;this.EXC_VCEI=56;this.EXC_FPE=60;this.EXC_WATCH=92;this.EXC_VCED=124;this.CAUSE_IP8=32768;this.CAUSE_IP7=16384;this.CAUSE_IP6=8192;this.CAUSE_IP5=4096;this.CAUSE_IP4=2048;this.CAUSE_IP3=1024;this.CAUSE_SW2=512;this.CAUSE_SW1=256;this.CAUSE_BD=2147483648;this.COP1_CONDITION_BIT=8388608;this.NTLBENTRIES=31;this.TLBHI_VPN2MASK=4294959104;this.TLBHI_VPN2SHIFT=13;this.TLBHI_PIDMASK=255;this.TLBHI_PIDSHIFT=0;this.TLBHI_NPID=255;this.TLBLO_PFNMASK=1073741760;
this.TLBLO_PFNSHIFT=6;this.TLBLO_CACHMASK=56;this.TLBLO_CACHSHIFT=3;this.TLBLO_UNCACHED=16;this.TLBLO_NONCOHRNT=24;this.TLBLO_EXLWR=40;this.TLBLO_D=4;this.TLBLO_V=2;this.TLBLO_G=1;this.TLBINX_PROBE=2147483648;this.TLBINX_INXMASK=63;this.TLBINX_INXSHIFT=0;this.TLBRAND_RANDMASK=63;this.TLBRAND_RANDSHIFT=0;this.TLBWIRED_WIREDMASK=63;this.TLBCTXT_BASEMASK=4286578688;this.TLBCTXT_BASESHIFT=23;this.TLBCTXT_BASEBITS=9;this.TLBCTXT_VPNMASK=8388592;this.TLBCTXT_VPNSHIFT=4;this.TLBPGMASK_4K=0;this.TLBPGMASK_16K=
24576;this.TLBPGMASK_64K=122880;this.BAD_TASK=0;this.GFX_TASK=1;this.SND_TASK=2;this.JPG_TASK=4;this.TASK_TYPE=4032;this.TASK_FLAGS=4036;this.TASK_MICROCODE_BOOT=4040;this.TASK_MICROCODE_BOOT_SIZE=4044;this.TASK_MICROCODE=4048;this.TASK_MICROCODE_SIZE=4052;this.TASK_MICROCODE_DATA=4056;this.TASK_MICROCODE_DATA_SIZE=4060;this.TASK_DRAM_STACK=4064;this.TASK_DRAM_STACK_SIZE=4068;this.TASK_OUTPUT_BUFF=4072;this.TASK_OUTPUT_BUFF_SIZE=4076;this.TASK_DATA_PTR=4080;this.TASK_DATA_SIZE=4084;this.TASK_YIELD_DATA_PTR=
4088;this.TASK_YIELD_DATA_SIZE=4092;this.MAX_DL_STACK_SIZE=32;this.MAX_DL_COUNT=1E6;this.MAX_VERTS=80;this.RSP_SPNOOP=0;this.RSP_MTX=1;this.RSP_RESERVED0=2;this.RSP_MOVEMEM=3;this.RSP_VTX=4;this.RSP_RESERVED1=5;this.RSP_DL=6;this.RSP_RESERVED2=7;this.RSP_RESERVED3=8;this.RSP_SPRITE2D_BASE=this.RSP_SPRITE2D=9;this.RSP_TRI1=this.RSP_1ST=191;this.RSP_CULLDL=this.RSP_1ST-1;this.RSP_POPMTX=this.RSP_1ST-2;this.RSP_MOVEWORD=this.RSP_1ST-3;this.RSP_TEXTURE=this.RSP_1ST-4;this.RSP_SETOTHERMODE_H=this.RSP_1ST-
5;this.RSP_SETOTHERMODE_L=this.RSP_1ST-6;this.RSP_ENDDL=this.RSP_1ST-7;this.RSP_SETGEOMETRYMODE=this.RSP_1ST-8;this.RSP_CLEARGEOMETRYMODE=this.RSP_1ST-9;this.RSP_LINE3D=this.RSP_1ST-10;this.RSP_RDPHALF_1=this.RSP_1ST-11;this.RSP_RDPHALF_2=this.RSP_1ST-12;this.RSP_RDPHALF_CONT=this.RSP_1ST-13;this.RSP_MODIFYVTX=this.RSP_1ST-13;this.RSP_TRI2=this.RSP_1ST-14;this.RSP_BRANCH_Z=this.RSP_1ST-15;this.RSP_LOAD_UCODE=this.RSP_1ST-16;this.RSP_SPRITE2D_SCALEFLIP=this.RSP_1ST-1;this.RSP_SPRITE2D_DRAW=this.RSP_1ST-
2;this.RSP_ZELDAVTX=1;this.RSP_ZELDAMODIFYVTX=2;this.RSP_ZELDACULLDL=3;this.RSP_ZELDABRANCHZ=4;this.RSP_ZELDATRI1=5;this.RSP_ZELDATRI2=6;this.RSP_ZELDALINE3D=7;this.RSP_ZELDARDPHALF_2=241;this.RSP_ZELDASETOTHERMODE_H=227;this.RSP_ZELDASETOTHERMODE_L=226;this.RSP_ZELDARDPHALF_1=225;this.RSP_ZELDASPNOOP=224;this.RSP_ZELDAENDDL=223;this.RSP_ZELDADL=222;this.RSP_ZELDALOAD_UCODE=221;this.RSP_ZELDAMOVEMEM=220;this.RSP_ZELDAMOVEWORD=219;this.RSP_ZELDAMTX=218;this.RSP_ZELDAGEOMETRYMODE=217;this.RSP_ZELDAPOPMTX=
216;this.RSP_ZELDATEXTURE=215;this.RSP_ZELDASUBMODULE=214;this.RSP_DMATRI=5;this.G_DLINMEM=7;this.RDP_NOOP=192;this.RDP_SETCIMG=255;this.RDP_SETZIMG=254;this.RDP_SETTIMG=253;this.RDP_SETCOMBINE=252;this.RDP_SETENVCOLOR=251;this.RDP_SETPRIMCOLOR=250;this.RDP_SETBLENDCOLOR=249;this.RDP_SETFOGCOLOR=248;this.RDP_SETFILLCOLOR=247;this.RDP_FILLRECT=246;this.RDP_SETTILE=245;this.RDP_LOADTILE=244;this.RDP_LOADBLOCK=243;this.RDP_SETTILESIZE=242;this.RDP_LOADTLUT=240;this.RDP_RDPSETOTHERMODE=239;this.RDP_SETPRIMDEPTH=
238;this.RDP_SETSCISSOR=237;this.RDP_SETCONVERT=236;this.RDP_SETKEYR=235;this.RDP_SETKEYGB=234;this.RDP_FULLSYNC=233;this.RDP_TILESYNC=232;this.RDP_PIPESYNC=231;this.RDP_LOADSYNC=230;this.RDP_TEXRECT_FLIP=229;this.RDP_TEXRECT=228;this.RSP_ZELDA_MTX_MODELVIEW=0;this.RSP_ZELDA_MTX_PROJECTION=4;this.RSP_ZELDA_MTX_MUL=0;this.RSP_ZELDA_MTX_LOAD=2;this.RSP_ZELDA_MTX_PUSH=0;this.RSP_ZELDA_MTX_NOPUSH=1;this.RSP_SETOTHERMODE_SHIFT_ALPHACOMPARE=0;this.RSP_SETOTHERMODE_SHIFT_ZSRCSEL=2;this.RSP_SETOTHERMODE_SHIFT_RENDERMODE=
3;this.RSP_SETOTHERMODE_SHIFT_BLENDER=16;this.RSP_SETOTHERMODE_SHIFT_BLENDMASK=0;this.RSP_SETOTHERMODE_SHIFT_ALPHADITHER=4;this.RSP_SETOTHERMODE_SHIFT_RGBDITHER=6;this.RSP_SETOTHERMODE_SHIFT_COMBKEY=8;this.RSP_SETOTHERMODE_SHIFT_TEXTCONV=9;this.RSP_SETOTHERMODE_SHIFT_TEXTFILT=12;this.RSP_SETOTHERMODE_SHIFT_TEXTLUT=14;this.RSP_SETOTHERMODE_SHIFT_TEXTLOD=16;this.RSP_SETOTHERMODE_SHIFT_TEXTDETAIL=17;this.RSP_SETOTHERMODE_SHIFT_TEXTPERSP=19;this.RSP_SETOTHERMODE_SHIFT_CYCLETYPE=20;this.RSP_SETOTHERMODE_SHIFT_COLORDITHER=
22;this.RSP_SETOTHERMODE_SHIFT_PIPELINE=23;this.RSP_PIPELINE_MODE_1PRIMITIVE=1<<this.RSP_SETOTHERMODE_SHIFT_PIPELINE;this.RSP_PIPELINE_MODE_NPRIMITIVE=0<<this.RSP_SETOTHERMODE_SHIFT_PIPELINE;this.CYCLE_TYPE_1=0;this.CYCLE_TYPE_2=1;this.CYCLE_TYPE_COPY=2;this.CYCLE_TYPE_FILL=3;this.TLUT_FMT_NONE=0<<this.RSP_SETOTHERMODE_SHIFT_TEXTLUT;this.TLUT_FMT_UNKNOWN=1<<this.RSP_SETOTHERMODE_SHIFT_TEXTLUT;this.TLUT_FMT_RGBA16=2<<this.RSP_SETOTHERMODE_SHIFT_TEXTLUT;this.TLUT_FMT_IA16=3<<this.RSP_SETOTHERMODE_SHIFT_TEXTLUT;
this.RDP_TFILTER_POINT=0<<this.RSP_SETOTHERMODE_SHIFT_TEXTFILT;this.RDP_TFILTER_AVERAGE=3<<this.RSP_SETOTHERMODE_SHIFT_TEXTFILT;this.RDP_TFILTER_BILERP=2<<this.RSP_SETOTHERMODE_SHIFT_TEXTFILT;this.RDP_ALPHA_COMPARE_NONE=0<<this.RSP_SETOTHERMODE_SHIFT_ALPHACOMPARE;this.RDP_ALPHA_COMPARE_THRESHOLD=1<<this.RSP_SETOTHERMODE_SHIFT_ALPHACOMPARE;this.RDP_ALPHA_COMPARE_DITHER=3<<this.RSP_SETOTHERMODE_SHIFT_ALPHACOMPARE;this.Z_COMPARE=16;this.Z_UPDATE=32;this.ZMODE_DEC=3072;this.G_ZBUFFER=1;this.G_TEXTURE_ENABLE=
2;this.G_SHADE=4;this.G_SHADING_SMOOTH=512;this.G_CULL_FRONT=4096;this.G_CULL_BACK=8192;this.G_CULL_BOTH=12288;this.G_FOG=65536;this.G_LIGHTING=131072;this.G_TEXTURE_GEN=262144;this.G_TEXTURE_GEN_LINEAR=524288;this.G_LOD=1048576;this.TXT_FMT_RGBA=0;this.TXT_FMT_YUV=1;this.TXT_FMT_CI=2;this.TXT_FMT_IA=3;this.TXT_FMT_I=4;this.TXT_SIZE_4b=0;this.TXT_SIZE_8b=1;this.TXT_SIZE_16b=2;this.TXT_SIZE_32b=3;this.RDP_TXT_LOADTILE=7;this.RDP_TXT_WRAP=this.RDP_TXT_NOMIRROR=this.RDP_TXT_RENDERTILE=0;this.RDP_TXT_MIRROR=
1;this.RDP_TXT_CLAMP=2;this.RDP_TXT_NOLOD=this.RDP_TXT_NOMASK=0;this.RSP_GBI1_MV_MEM_VIEWPORT=128;this.RSP_GBI1_MV_MEM_LOOKATY=130;this.RSP_GBI1_MV_MEM_LOOKATX=132;this.RSP_GBI1_MV_MEM_L0=134;this.RSP_GBI1_MV_MEM_L1=136;this.RSP_GBI1_MV_MEM_L2=138;this.RSP_GBI1_MV_MEM_L3=140;this.RSP_GBI1_MV_MEM_L4=142;this.RSP_GBI1_MV_MEM_L5=144;this.RSP_GBI1_MV_MEM_L6=146;this.RSP_GBI1_MV_MEM_L7=148;this.RSP_GBI1_MV_MEM_TXTATT=150;this.RSP_GBI1_MV_MEM_MATRIX_1=158;this.RSP_GBI1_MV_MEM_MATRIX_2=152;this.RSP_GBI1_MV_MEM_MATRIX_3=
154;this.RSP_GBI1_MV_MEM_MATRIX_4=156;this.RSP_GBI2_MV_MEM__VIEWPORT=8;this.RSP_GBI2_MV_MEM__LIGHT=10;this.RSP_GBI2_MV_MEM__POINT=12;this.RSP_GBI2_MV_MEM__MATRIX=14;this.RSP_GBI2_MV_MEM_O_LOOKATX=0;this.RSP_GBI2_MV_MEM_O_LOOKATY=24;this.RSP_GBI2_MV_MEM_O_L0=48;this.RSP_GBI2_MV_MEM_O_L1=72;this.RSP_GBI2_MV_MEM_O_L2=96;this.RSP_GBI2_MV_MEM_O_L3=120;this.RSP_GBI2_MV_MEM_O_L4=144;this.RSP_GBI2_MV_MEM_O_L5=168;this.RSP_GBI2_MV_MEM_O_L6=192;this.RSP_GBI2_MV_MEM_O_L7=216;this.RSP_MOVE_WORD_MATRIX=0;this.RSP_MOVE_WORD_NUMLIGHT=
2;this.RSP_MOVE_WORD_CLIP=4;this.RSP_MOVE_WORD_SEGMENT=6;this.RSP_MOVE_WORD_FOG=8;this.RSP_MOVE_WORD_LIGHTCOL=10;this.RSP_MOVE_WORD_POINTS=12;this.RSP_MOVE_WORD_PERSPNORM=14;this.RSP_MV_WORD_OFFSET_NUMLIGHT=0;this.RSP_MV_WORD_OFFSET_CLIP_RNX=4;this.RSP_MV_WORD_OFFSET_CLIP_RNY=12;this.RSP_MV_WORD_OFFSET_CLIP_RPX=20;this.RSP_MV_WORD_OFFSET_CLIP_RPY=28;this.RSP_MV_WORD_OFFSET_FOG=0;this.RSP_MV_WORD_OFFSET_POINT_RGBA=16;this.RSP_MV_WORD_OFFSET_POINT_ST=20;this.RSP_MV_WORD_OFFSET_POINT_XYSCREEN=24;this.RSP_MV_WORD_OFFSET_POINT_ZSCREEN=
28;this.RSP_DLIST_PUSH=0;this.RSP_DLIST_NOPUSH=1}}.call(this);("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsConstants=a}).call(this);function _BigInt_toString(){return this.toStringBase(10)}
function _BigInt_toStringBase(a){var b=this.len;if(0==b||1==b&&!this.digits[0])return"0";switch(a){default:case 10:var c=Math.floor(3856*b/800)+2;var d=1E4;break;case 16:c=Math.floor(16*b/4)+2;d=65536;break;case 8:c=16*b+2;d=4096;break;case 2:c=16*b+2,d=16}var e=this.clone().digits;for(s="";b&&c;){for(var g=b,h=0;g--;)h=(h<<16)+e[g],0>h&&(h+=4294967296),e[g]=Math.floor(h/d),h%=d;0==e[b-1]&&b--;for(g=4;g--;){var k=h%a;s="0123456789abcdef".charAt(k)+s;--c;h=Math.floor(h/a);if(0==b&&0==h)break}}for(b=
0;b<s.length&&"0"==s.charAt(b);)b++;b&&(s=s.substring(b,s.length));this.sign||(s="-"+s);return s}function _BigInt_clone(){var a;var b=new BigInt(this.len,this.sign);for(a=0;a<this.len;a++)b.digits[a]=this.digits[a];return b}
function BigInt(a,b){this.toString=_BigInt_toString;this.toStringBase=_BigInt_toStringBase;this.clone=_BigInt_clone;0==BigInt.arguments.length?(this.sign=!0,this.len=a=1,this.digits=Array(1),b=!0):1==BigInt.arguments.length?(b=bigint_from_any(BigInt.arguments[0]),b==BigInt.arguments[0]&&(b=b.clone()),this.sign=b.sign,this.len=b.len,this.digits=b.digits,b=!1):(this.sign=b?!0:!1,this.len=a,this.digits=Array(a),b=!0);if(b)for(b=0;b<a;b++)this.digits[b]=0}
function bigint_norm(a){for(var b=a.len,c=a.digits;b--&&!c[b];);a.len=++b;return a}function bigint_from_int(a){0>a&&(a=-a);a&=2147483647;if(65535>=a){var b=new BigInt(1,1);b.digits[0]=a}else b=new BigInt(2,1),b.digits[0]=a&65535,b.digits[1]=a>>16&65535;return b}
function bigint_from_string(a,b){var c=!0,d,e,g=1;a+="@";var h=0;"+"==a.charAt(h)?h++:"-"==a.charAt(h)&&(h++,c=!1);if("@"==a.charAt(h))return null;if(!b)if("0"==a.charAt(h)){var k=a.charAt(h+1);b="x"==k||"X"==k?16:"b"==k||"B"==k?2:8}else b=10;if(8==b){for(;"0"==a.charAt(h);)h++;k=3*(a.length-h)}else{16!=b||"0"!=a.charAt(h)||"x"!=a.charAt(h+1)&&"X"!=a.charAt(h+1)||(h+=2);for(2!=b||"0"!=a.charAt(h)||"b"!=a.charAt(h+1)&&"B"!=a.charAt(h+1)||(h+=2);"0"==a.charAt(h);)h++;"@"==a.charAt(h)&&h--;k=4*(a.length-
h)}c=new BigInt((k>>4)+1,c);for(d=c.digits;;){k=a.charAt(h++);if("@"==k)break;switch(k){case "0":k=0;break;case "1":k=1;break;case "2":k=2;break;case "3":k=3;break;case "4":k=4;break;case "5":k=5;break;case "6":k=6;break;case "7":k=7;break;case "8":k=8;break;case "9":k=9;break;case "a":case "A":k=10;break;case "b":case "B":k=11;break;case "c":case "C":k=12;break;case "d":case "D":k=13;break;case "e":case "E":k=14;break;case "f":case "F":k=15;break;default:k=b}if(k>=b)break;for(e=0;;){for(;e<g;)k+=
d[e]*b,d[e++]=k&65535,k>>>=16;if(k)g++;else break}}return bigint_norm(c)}
function bigint_from_any(a){if("object"==typeof a)return a.constructor==BigInt?a:BigInt(1,1);if("string"==typeof a)return bigint_from_string(a);if("number"==typeof a){if(-2147483647<=a&&2147483647>=a)return bigint_from_int(a);a+="";var b=a.indexOf("e",0);if(-1==b)return bigint_from_string(a);var c=a.substr(0,b);a=a.substr(b+2,a.length-(b+2));b=c.indexOf(".",0);if(-1!=b){var d=c.length-(b+1);c=c.substr(0,b)+c.substr(b+1,d);a=parseInt(a)-d}else a=parseInt(a);for(;0<a--;)c+="0";return bigint_from_string(c)}return BigInt(1,
1)}function bigint_uminus(a){a=a.clone();a.sign=!a.sign;return bigint_norm(a)}
function bigint_add_internal(a,b,c){var d;c=c==b.sign;if(a.sign!=c)return c?bigint_sub_internal(b,a):bigint_sub_internal(a,b);if(a.len>b.len){var e=a.len+1;var g=a;a=b;b=g}else e=b.len+1;g=new BigInt(e,c);e=a.len;for(c=d=0;d<e;d++)c+=a.digits[d]+b.digits[d],g.digits[d]=c&65535,c>>>=16;for(e=b.len;c&&d<e;)c+=b.digits[d],g.digits[d++]=c&65535,c>>>=16;for(;d<e;)g.digits[d]=b.digits[d],d++;g.digits[d]=c&65535;return bigint_norm(g)}
function bigint_sub_internal(a,b){var c=0,d;var e=a.len;if(a.len<b.len)c=a,a=b,b=c;else if(a.len==b.len)for(;0<e;){e--;if(a.digits[e]>b.digits[e])break;if(a.digits[e]<b.digits[e]){c=a;a=b;b=c;break}}c=new BigInt(a.len,0==c?1:0);var g=c.digits;for(d=e=0;e<b.len;e++)d+=a.digits[e]-b.digits[e],g[e]=d&65535,d>>>=16;for(;d&&e<a.len;)d+=a.digits[e],g[e++]=d&65535,d>>>=16;for(;e<a.len;)g[e]=a.digits[e],e++;return bigint_norm(c)}
function bigint_plus(a,b){a=bigint_from_any(a);b=bigint_from_any(b);return bigint_add_internal(a,b,1)}function bigint_minus(a,b){a=bigint_from_any(a);b=bigint_from_any(b);return bigint_add_internal(a,b,0)}
function bigint_mul(a,b){var c,d;a=bigint_from_any(a);b=bigint_from_any(b);var e=a.len+b.len+1;var g=new BigInt(e,a.sign==b.sign);var h=a.digits;var k=b.digits;var l=g.digits;for(d=b.len;e--;)l[e]=0;for(b=0;b<a.len;b++){var m=h[b];if(0!=m){for(e=c=0;e<d;e++){var n=c+m*k[e];c=l[b+e]+n;n&&(l[b+e]=c&65535);c>>>=16}c&&(l[b+e]=c)}}return bigint_norm(g)}
function bigint_divmod(a,b,c){var d=a.len,e=b.len,g,h;var k=b.digits;if(0==e&&0==k[0])return null;if(d<e||d==e&&a.digits[d-1]<b.digits[e-1])return c?bigint_norm(a):BigInt(1,1);var l=a.digits;if(1==e){var m=k[0];var n=a.clone();var p=n.digits;var r=0;for(l=d;l--;)r=65536*r+p[l],p[l]=r/m&65535,r%=m;n.sign=a.sign==b.sign;return c?(a.sign||(r=-r),a.sign!=b.sign&&(r+=k[0]*(b.sign?1:-1)),bigint_from_int(r)):bigint_norm(n)}n=new BigInt(d==e?d+2:d+1,a.sign==b.sign);p=n.digits;for(d==e&&(p[d+1]=0);!k[e-1];)e--;
if(1!=(m=65536/(k[e-1]+1)&65535)){var q=b.clone();r=q.digits;for(g=q=0;q<e;)g+=k[q]*m,r[q++]=g&65535,g>>=16;k=r;for(g=q=0;q<d;)g+=l[q]*m,p[q++]=g&65535,g>>=16;p[q]=g&65535}else for(p[d]=0,q=d;q--;)p[q]=l[q];q=d==e?d+1:d;do{if(h=p[q]==k[e-1]?65535:(65536*p[q]+p[q-1])/k[e-1]&65535){r=g=l=0;do{r+=k[l]*h;var u=g-(r&65535);g=p[q-e+l]+u;u&&(p[q-e+l]=g&65535);g>>=16;r>>>=16}while(++l<e);for(g+=p[q-e+l]-r;g;){g=l=0;h--;do u=g+k[l],g=p[q-e+l]+u,u&&(p[q-e+l]=g&65535),g>>=16;while(++l<e);g--}}p[q]=h}while(--q>=
e);if(c){d=n.clone();if(m)for(p=d.digits,r=0,l=e;l--;)r=65536*r+p[l],p[l]=r/m&65535,r%=m;d.len=e;d.sign=a.sign;return a.sign!=b.sign?bigint_add_internal(d,b,1):bigint_norm(d)}a=n.clone();p=a.digits;q=(d==e?d+2:d+1)-e;for(l=0;l<q;l++)p[l]=p[l+e];a.len=l;return bigint_norm(a)}function bigint_div(a,b){a=bigint_from_any(a);b=bigint_from_any(b);return bigint_divmod(a,b,0)}function bigint_mod(a,b){a=bigint_from_any(a);b=bigint_from_any(b);return bigint_divmod(a,b,1)}
function bigint_cmp(a,b){if(a==b)return 0;a=bigint_from_any(a);b=bigint_from_any(b);var c=a.len;if(a.sign!=b.sign)return a.sign?1:-1;if(c<b.len)return a.sign?-1:1;if(c>b.len)return a.sign?1:-1;for(;c--&&a.digits[c]==b.digits[c];);return-1==c?0:a.digits[c]>b.digits[c]?a.sign?1:-1:a.sign?-1:1}function bigint_number(a){for(var b=0,c=a.len,d=a.digits;c--;)b=d[c]+65536*b;a.sign||(b=-b);return b};var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}};
goog.define=function(a,b){if(!COMPILED){var c=goog.global.CLOSURE_UNCOMPILED_DEFINES,d=goog.global.CLOSURE_DEFINES;c&&void 0===c.nodeType&&Object.prototype.hasOwnProperty.call(c,a)?b=c[a]:d&&void 0===d.nodeType&&Object.prototype.hasOwnProperty.call(d,a)&&(b=d[a])}goog.exportPath_(a,b)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;
goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};
goog.getScriptNonce=function(){null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)||"");return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(a){return(a=a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:null};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");
if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};
goog.module.get=function(a){if(!COMPILED&&a in goog.loadedModules_){if(goog.loadedModules_[a].type!=goog.ModuleType.GOOG)throw Error("Can only goog.module.get for goog.modules.");if(goog.loadedModules_[a].moduleId!=a)throw Error("Cannot goog.module.get by path.");}return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};
goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6};goog.getModulePath_=function(){return goog.moduleLoaderState_&&goog.moduleLoaderState_.path};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c=0;c<a.length;c++)if(b=b[a[c]],!goog.isDefAndNotNull(b))return null;return b};goog.globalize=function(a,b){b=b||goog.global;for(var c in a)b[c]=a[c]};goog.addDependency=function(a,b,c,d){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,b,c,d)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.isPath_=function(a){return 0==a.indexOf("./")||0==a.indexOf("../")};
goog.require=function(a){if(goog.isPath_(a))if(goog.isInGoogModuleLoader_()){if(!goog.getModulePath_())throw Error("Current module has no path information. Was it loaded via goog.loadModule without a path argument?");a=goog.normalizePath_(goog.getModulePath_()+"/../"+a)}else throw Error("Cannot require by path outside of goog.modules.");if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var b=goog.moduleLoaderState_;
goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=b}}return null}};goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";goog.TRANSPILER="transpile.js";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping};
goog.workaroundSafari10EvalBug=function(a){return"(function(){"+a+"\n;})();\n"};
goog.loadModule=function(a,b){var c=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG,path:b};if(goog.isFunction(a))var d=a.call(void 0,{});else if(goog.isString(a))goog.useSafari10Workaround()&&(a=goog.workaroundSafari10EvalBug(a)),d=goog.loadModuleFromSource_.call(void 0,a);else throw Error("Invalid module definition");var e=goog.moduleLoaderState_.moduleName;if(goog.isString(e)&&e){goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(e,d):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof d&&null!=d&&Object.seal(d);var g={exports:d,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};goog.loadedModules_[e]=g;b&&(goog.loadedModules_[b]=g)}else throw Error('Invalid module name "'+e+'"');}finally{goog.moduleLoaderState_=c}};goog.loadModuleFromSource_=function(a){eval(a);return{}};
goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};
goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(e);if(g){(function(){eval(g+"\n//# sourceURL="+e)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile;
c=goog.global.$jscomp;d=c.transpile}}d||(d=c.transpile=function(a,b){goog.logToConsole_(b+" requires transpilation but no transpiler was found.");return a});return d(a,b)};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isFunction=function(a){return"function"==goog.typeOf(a)};
goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;
goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if("function"===typeof a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(d){}if("undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(d){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=
!1;c.appendChild(b.createTextNode(a));b.head.appendChild(c);b.head.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};a=b?a+"-"+d(b):d(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return null!=b&&d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,e,c){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return b.prototype[e].apply(a,d)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if("undefined"!==typeof d.superClass_){for(var e=Array(arguments.length-1),g=1;g<arguments.length;g++)e[g-1]=arguments[g];return d.superClass_.constructor.apply(a,e)}if("string"!=typeof b&&"symbol"!=typeof b)throw Error("method names provided to goog.base must be a string or a symbol");
e=Array(arguments.length-2);for(g=2;g<arguments.length;g++)e[g-2]=arguments[g];g=!1;for(var h=a.constructor;h;h=h.superClass_&&h.superClass_.constructor)if(h.prototype[b]===d)g=!0;else if(g)return h.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};
COMPILED||(goog.global.COMPILED=COMPILED);goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};
goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;goog.defineClass.createSealingConstructor_=function(a,b){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return a;var c=!goog.defineClass.isUnsealable_(b),d=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===d&&c&&Object.seal instanceof Function&&Object.seal(b);return b};return d};goog.defineClass.isUnsealable_=function(a){return a&&a.prototype&&a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};
goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";
!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,b=a.currentScript;
a=b?[b]:a.getElementsByTagName("SCRIPT");for(b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(a,b){d?c[a]=!0:b()?c[a]=!1:d=c[a]=!0}function b(a){try{return!!eval(a)}catch(h){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?
goog.global.navigator.userAgent:"";a("es5",function(){return b("[1,].length==1")});a("es6",function(){var a=e.match(/Edge\/(\d+)(\.\d)*/i);return a&&15>Number(a[1])?!1:b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});a("es6-impl",function(){return!0});a("es7",function(){return b("2 ** 2 == 4")});
a("es8",function(){return b("async () => 1, true")});a("es9",function(){return b("({...rest} = {}), true")});a("es_next",function(){return b("({...rest} = {}), true")});return c},goog.Transpiler.prototype.needsTranspile=function(a,b){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;this.requiresTranspilation_||(this.requiresTranspilation_=this.createRequiresTranspilation_());if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a];throw Error("Unknown language mode: "+
a);},goog.Transpiler.prototype.transpile=function(a,b){return goog.transpile_(a,b)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,
b){function c(){d&&(goog.global.setTimeout(d,0),d=null)}var d=b;if(a.length){b=[];for(var e=0;e<a.length;e++){var g=this.getPathFromDeps_(a[e]);if(!g)throw Error("Unregonized namespace: "+a[e]);b.push(this.dependencies_[g])}g=goog.require;var h=0;for(e=0;e<a.length;e++)g(a[e]),b[e].onLoad(function(){++h==a.length&&c()})}else c()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],
{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,b){(a=this.getPathFromDeps_(a))&&(b||this.areDepsLoaded_(this.dependencies_[a].requires))&&(b=this.deferredCallbacks_[a])&&(delete this.deferredCallbacks_[a],b())},goog.DebugLoader_.prototype.setDependencyFactory=function(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var b=this,c=[],d=function(a){var e=b.getPathFromDeps_(a);if(!e)throw Error("Bad dependency path or symbol: "+
a);if(!b.written_[e]){b.written_[e]=!0;a=b.dependencies_[e];for(e=0;e<a.requires.length;e++)goog.isProvided_(a.requires[e])||d(a.requires[e]);c.push(a)}};d(a);a=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(c);this.paused_||a||this.loadDeps_()}else throw a="goog.require could not find: "+a,goog.logToConsole_(a),Error(a);},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,b=this.paused_;this.depsToLoad_.length&&!b;)(function(){var c=!1,d=a.depsToLoad_.shift(),e=!1;
a.loading_(d);var g={pause:function(){if(c)throw Error("Cannot call pause after the call to load.");b=!0},resume:function(){c?a.resume_():b=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0;a.loaded_(d)},pending:function(){for(var b=[],d=0;d<a.loadingDeps_.length;d++)b.push(a.loadingDeps_[d]);return b},setModuleState:function(a,b){goog.moduleLoaderState_={path:a,type:b,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(a,b){goog.loadedModules_[a]={exports:b,
type:goog.ModuleType.ES6,moduleId:""}},registerGoogModuleExports:function(a,b){goog.loadedModules_[a]={exports:b,type:goog.ModuleType.GOOG,moduleId:a}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(b){if(c)throw Error("Cannot register with defer after the call to load.");a.defer_(d,b)},areDepsLoaded:function(){return a.areDepsLoaded_(d.requires)}};try{d.load(g)}finally{c=!0}})();b&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=
function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var b=0;b<this.loadingDeps_.length;b++)if(this.loadingDeps_[b]==a){this.loadingDeps_.splice(b,1);break}for(b=0;b<this.deferredQueue_.length;b++)if(this.deferredQueue_[b]==a.path){this.deferredQueue_.splice(b,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),
!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var b=0;b<a.length;b++){var c=this.getPathFromDeps_(a[b]);if(!c||!(c in this.deferredCallbacks_||goog.isProvided_(a[b])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,b){this.deferredCallbacks_[a.path]=b;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=
function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,b){},goog.LoadController.prototype.setModuleState=function(a,b){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,b,c,d,e){this.path=
a;this.relativePath=b;this.provides=c;this.requires=d;this.loadFlags=e;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var b=0;b<a.length;b++)a[b]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var b=Math.random().toString(32);goog.Dependency.callbackMap_[b]=
a;return b},goog.Dependency.unregisterCallback_=function(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,b){if(a in goog.Dependency.callbackMap_){for(var c=goog.Dependency.callbackMap_[a],d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);c.apply(void 0,d)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?
a.loaded():a.pause();else if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){a.loaded();return}throw Error('Cannot write "'+this.path+'" after document load');}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var c=goog.Dependency.registerCallback_(function(b){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=b.readyState||(goog.Dependency.unregisterCallback_(c),a.loaded())});
b.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+c+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+">\x3c/script>")}else{var d=b.createElement("script");d.defer=goog.Dependency.defer_;d.async=!1;d.type="text/javascript";var e=goog.getScriptNonce();e&&(d.nonce=e);goog.DebugLoader_.IS_OLD_IE_?(a.pause(),d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)a.loaded(),
a.resume()}):d.onload=function(){d.onload=null;a.loaded()};d.src=this.path;b.head.appendChild(d)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or seting CLOSURE_NO_DEPS to true."),a.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,b,c,d){goog.Dependency.call(this,a,b,[],c,d)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=
function(a){function b(a,b){b?d.write('<script type="module" crossorigin>'+b+"\x3c/script>"):d.write('<script type="module" crossorigin src="'+a+'">\x3c/script>')}function c(a,b){var e=d.createElement("script");e.defer=!0;e.async=!1;e.type="module";e.setAttribute("crossorigin",!0);var c=goog.getScriptNonce();c&&(e.nonce=c);b?e.textContent=b:e.src=a;d.head.appendChild(e)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var d=
goog.global.document,e=this;if(goog.isDocumentLoading_()){var g=b;goog.Dependency.defer_=!0}else g=c;var h=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(h);a.setModuleState(e.path,goog.ModuleType.ES6)});g(void 0,'goog.Dependency.callback_("'+h+'")');g(this.path,void 0);var k=goog.Dependency.registerCallback_(function(b){goog.Dependency.unregisterCallback_(k);a.registerEs6ModuleExports(e.path,b)});g(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+
k+'", m)');var l=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(l);a.clearModuleState();a.loaded()});g(void 0,'goog.Dependency.callback_("'+l+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,b,c,d,e){goog.Dependency.call(this,a,b,c,d,e);this.contents_=null},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){if(!goog.global.CLOSURE_IMPORT_SCRIPT&&
goog.inHtmlDocument_()&&goog.isDocumentLoading_()){var b=goog.global.document,c=this,d=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(d);c.loadImpl_(a)});b.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+d+'");')+"\x3c/script>")}else this.loadImpl_(a)},goog.TransformedDependency.prototype.loadImpl_=function(a){function b(b){if(c.contents_){d&&a.setModuleState(c.path,goog.ModuleType.ES6);try{var e=c.contents_;c.contents_=
null;b?goog.globalEval(e):goog.global.document.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"\x3c/script>")}finally{d&&a.clearModuleState()}d&&goog.global.$jscomp.require.ensure([c.path],function(){a.registerEs6ModuleExports(c.path,goog.global.$jscomp.require(c.path))});a.loaded()}}if(this.contents_=goog.loadFileSync_(this.path))if(this.contents_=this.transform(this.contents_))this.contents_+="\n//# sourceURL="+this.path;if(this.contents_)if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT("",
this.contents_)?(this.contents_=null,a.loaded()):a.pause();else{var c=this,d=this.loadFlags.module==goog.ModuleType.ES6;if(1<a.pending().length&&goog.DebugLoader_.IS_OLD_IE_)a.defer(function(){b(!0)});else if(d&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()){var e=goog.global.document;a.pause();var g=e.onreadystatechange;e.onreadystatechange=function(){if(e.attachEvent?"complete"==e.readyState:"interactive"==e.readyState)e.onreadystatechange=g,b(!0),a.resume();goog.isFunction(g)&&g.apply(void 0,
arguments)}}else b(goog.DebugLoader_.IS_OLD_IE_||!goog.inHtmlDocument_()||!goog.isDocumentLoading_())}else a.pause()},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,b,c,d,e,g){goog.TransformedDependency.call(this,a,b,c,d,e);this.transpiler=g},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,this.path)},goog.GoogModuleDependency=function(a,
b,c,d,e,g,h){goog.TransformedDependency.call(this,a,b,c,d,e);this.needsTranspile_=g;this.transpiler_=h},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(a){this.needsTranspile_&&(a=this.transpiler_.transpile(a,this.path));return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+this.path+"\n")+', "'+this.path+'");':'goog.loadModule(function(exports) {"use strict";'+
a+'\n;return exports}, "'+this.path+'");\n//# sourceURL='+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(a,b,c,d){b=b||[];a=a.replace(/\\/g,"/");var e=goog.normalizePath_(goog.basePath+a);d&&"boolean"!==typeof d||(d=d?{module:goog.ModuleType.GOOG}:{});c=this.factory_.createDependency(e,a,b,c,d,goog.transpiler_.needsTranspile(d.lang||"es3",d.module));this.dependencies_[e]=c;for(c=
0;c<b.length;c++)this.idToPath_[b[c]]=e;this.idToPath_[a]=e},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,b,c,d,e,g){if(e.module==goog.ModuleType.ES6)throw Error("ES6 modules are not currently supported by the debug loader.");return e.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,b,c,d,e,g,this.transpiler):g?new goog.TranspiledDependency(a,b,c,d,e,this.transpiler):e.module==goog.ModuleType.ES6?new goog.Es6ModuleDependency(a,
b,d,e):new goog.Dependency(a,b,c,d,e)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,b){goog.debugLoader_.bootstrap(a,b)});(function(){var a=new C1964jsConstants;var b=void 0;var c=function(b,d){var e;this.runLoop=this.runLoop.bind(this);this.stopEmulatorAndCleanup=this.stopEmulatorAndCleanup.bind(this);var c=void 0;this.settings=b;this.request=void 0;this.debug=!1;this.cp0=new Int32Array(32);this.cp1Buffer=new ArrayBuffer(128);this.cp1_i=new Int32Array(this.cp1Buffer);this.cp1_f=new Float32Array(this.cp1Buffer);this.cp1_f64=new Float64Array(this.cp1Buffer);this.cp1Con=new Int32Array(32);this.LLbit=0;this.terminate=!1;
this.NUM_CHANNELS=1;this.SAMPLE_RATE=this.NUM_SAMPLES=4E4;this.useByteCompatibilityMode=!1;this.interval=this.isBigEndian=this.isLittleEndian=0;this.m=new Int32Array(1);this.m[0]=-625E3;this.forceRepaint=!1;this.kk=this.doOnce=0;this.TV_SYSTEM_NTSC=1;this.currentHack=this.TV_SYSTEM_PAL=0;this.kfi=32E5;this.cnt=0;this.gpr=new ArrayBuffer(160);this.r=new Int32Array(this.gpr);this.r[0]=0;this.r[1]=0;this.r[2]=3513981929;this.r[3]=3513981929;this.r[4]=7145;this.r[5]=4099027429;this.r[6]=2751471372;this.r[7]=
2751471368;this.r[8]=112;this.r[9]=0;this.r[10]=64;this.r[11]=2751463488;this.r[12]=3509783491;this.r[13]=3509783491;this.r[14]=627128870;this.r[15]=782254871;this.r[16]=0;this.r[17]=0;this.r[18]=0;this.r[19]=0;this.r[20]=0;this.r[21]=0;this.r[22]=0;this.r[23]=6;this.r[24]=0;this.r[25]=3611240851;this.r[26]=0;this.r[27]=0;this.r[28]=0;this.r[29]=2751471600;this.r[30]=0;this.r[31]=2751468884;this.r[32]=0;this.r[33]=0;this.r[34]=0;this.gprh=new ArrayBuffer(140);this.h=new Int32Array(this.gprh);this.fnLut=
[];this.fn=void 0;this.log=function(a){return console.log(a)};this.endianTest();!0===this.useByteCompatibilityMode?(this.memory=new C1964jsMemory(this),this.interrupts=new C1964jsInterrupts(this,this.cp0),this.pif=new C1964jsPif(this.memory.pifUint8Array),this.dma=new C1964jsDma(this.memory,this.interrupts,this.pif)):1===this.isLittleEndian?(this.memory=new C1964jsMemoryLE(this),this.interrupts=new C1964jsInterrupts(this,this.cp0),this.pif=new C1964jsPifLE(this.memory.pifUint8Array),this.dma=new C1964jsDmaLE(this.memory,
this.interrupts,this.pif)):(this.memory=new C1964jsMemory(this),this.interrupts=new C1964jsInterrupts(this,this.cp0),this.pif=new C1964jsPif(this.memory.pifUint8Array),this.dma=new C1964jsDma(this.memory,this.interrupts,this.pif));this.memory.initRegions();this.webGL=new C1964jsWebGL(this,b.wireframe);this.helpers=new C1964jsHelpers(this,this.isLittleEndian);this.initTLB();this.initOpcodeMap();cancelAnimFrame(this.request);this.currentHack=0;this.dma.startTime=0;this.kfi=512;this.interval=this.doOnce=
0;this.m[0]=-125E3;this.flushDynaCache();this.showFB=!0;this.webGL.hide3D();this.ctx=document.getElementById("Canvas").getContext("2d");this.ImDat=this.ctx.createImageData(320,240);this.stopCompiling=!1;this.docElement=document.getElementById("screen");this.errorElement=document.getElementById("error");this.p=new Int32Array(1);this.currentRdramSize=this.getRdramSize();this.crc2=this.crc1=0;this.romName=new Uint8Array(20);this.memory.rom=new Uint8Array(d);c=3;for(e=0;240>e;){for(b=0;320>b;)this.ImDat.data[c]=
255,c+=4,b+=1;e+=1}!0===this.useByteCompatibilityMode?this.byteSwap(this.memory.rom):1===this.isLittleEndian?this.byteSwapLE(this.memory.rom):this.byteSwap(this.memory.rom);this.memory.romUint8Array=this.memory.rom;!1===this.useByteCompatibilityMode&&(this.memory.romUint16Array=new Uint16Array(d),this.memory.romUint32Array=new Uint32Array(d));for(c=0;4096>c;)this.memory.spMemUint8Array[c]=this.memory.rom[c],c+=1;this.r[20]=1===this.isLittleEndian&&!1===this.useByteCompatibilityMode?this.getTVSystem(this.memory.romUint8Array[61]):
this.getTVSystem(this.memory.romUint8Array[62]);d=this.getBootCode();this.r[22]=d.cic;this.cp0[a.STATUS]=1883242500;this.cp0[a.RANDOM]=31;this.cp0[a.CONFIG]=451683;this.cp0[a.PREVID]=2816;this.cp1Con[0]=1297;this.p[0]=2751463488;this.memory.setInt32(this.memory.miUint8Array,a.MI_VERSION_REG,16843009,this.memory.miUint32Array);this.memory.setInt32(this.memory.riUint8Array,a.RI_CONFIG_REG,1,this.memory.riUint32Array);this.memory.setInt32(this.memory.viUint8Array,a.VI_INTR_REG,1023,this.memory.viUint32Array);
this.memory.setInt32(this.memory.viUint8Array,a.VI_V_SYNC_REG,209,this.memory.viUint32Array);this.memory.setInt32(this.memory.viUint8Array,a.VI_H_SYNC_REG,860231,this.memory.viUint32Array);if(1===this.isLittleEndian&&!1===this.useByteCompatibilityMode)for(c=b=0;20>b;c=++b)this.romName[c]=this.memory.rom[32+c^3];else for(c=b=0;20>b;c=++b)this.romName[c]=this.memory.rom[32+c];this.crc1=this.memory.getUint32(this.memory.rom,16);this.crc2=this.memory.getUint32(this.memory.rom,20);this.pif.eepromName=
this.pif.binArrayToJson(this.romName)+"-"+dec2hex(this.crc1)+dec2hex(this.crc2)+".eep";console.log("EEPRom name = "+this.pif.eepromName);this.memory.setInt32(this.memory.u8,d.rdramSizeAddress,this.currentRdramSize,this.memory.u32);for(c=0;35>c;)this.h[c]=this.r[c]>>31,c+=1};c.prototype.callBind=function(a,b){return function(){return a.call(b)}};c.prototype.getRdramSize=function(){return 8388608};c.prototype.byteSwap=function(a){console.log("byte swapping...");var b=this.memory.getUint32(a,0);switch(b>>>
0){case 931151890:0!==a.byteLength%2&&alert("help: support odd byte lengths for this swap");for(b=0;b<a.byteLength;){var d=a[b];a[b]=a[b+1];a[b+1]=d;b+=2}break;case 2151092800:break;default:this.log("Unhandled byte order: 0x"+dec2hex(b))}console.log("swap done")};c.prototype.byteSwapLE=function(a){console.log("byte swapping...");var b=this.memory.getUint32(a,0);switch(b>>>0){case 306217015:0!==a.byteLength%2&&alert("help: support odd byte lengths for this swap");0!==a.byteLength%4&&alert("help: support odd byte lengths for this swap");
for(b=0;b<a.byteLength;){var d=a[b];var e=a[b+1];a[b]=a[b+2];a[b+1]=a[b+3];a[b+2]=d;a[b+3]=e;b+=4}break;case 1074935680:for(b=0;b<a.byteLength;)d=a[b+3],a[b+3]=a[b],a[b]=d,d=a[b+1],a[b+1]=a[b+2],a[b+2]=d,b+=4;break;default:this.log("Unhandled byte order: 0x"+dec2hex(b))}console.log("swap done")};c.prototype.endianTest=function(){var a=new ArrayBuffer(2);var b=new Uint8Array(a);a=new Uint16Array(a);b[0]=255;b[1]=17;4607===a[0]?(this.log("You are on a little-endian system"),this.isLittleEndian=1,this.isBigEndian=
0):(this.log("You are on a big-endian system"),this.isLittleEndian=0,this.isBigEndian=1)};c.prototype.repaintLE=function(b,d){var e=0;if(this.showFB){var c=this.memory.getInt32(this.memory.viUint8Array,a.VI_ORIGIN_REG,this.memory.viUint32Array)&16777215;var g=d.data;var m=-76800;for(var n=this.memory.u8;0!==m;)g[e]=n[c+3]&248,g[e+1]=(n[c+3]<<5|n[c+2]>>>3)&248,g[e+2]=n[c+2]<<2&248,g[e+4]=n[c+1]&248,g[e+5]=(n[c+1]<<5|n[c]>>>3)&248,g[e+6]=n[c]<<2&248,c+=4,e+=8,m+=2;b.putImageData(d,0,0)}};c.prototype.repaint=
function(b,d){var e=0;if(this.showFB){var c=this.memory.getInt32(this.memory.viUint8Array,a.VI_ORIGIN_REG)&16777215;var g=d.data;var m=-76800;for(var n=this.memory.u8;0!==m;)g[e]=n[c]&248,g[e+1]=(n[c]<<5|n[c+1]>>>3)&248,g[e+2]=n[c+1]<<2&248,g[e+4]=n[c+2]&248,g[e+5]=(n[c+2]<<5|n[c+3]>>>3)&248,g[e+6]=n[c+3]<<2&248,c+=4,e+=8,m+=2;b.putImageData(d,0,0)}};c.prototype.initTLB=function(){var a;this.tlb=Array(32);for(a=0;32>a;)this.tlb[a]={valid:!1,entryHi:new Int32Array(1),entryLo1:new Int32Array(1),entryLo0:new Int32Array(1),
pageMask:new Int32Array(1),loCompare:new Int32Array(1),myHiMask:new Int32Array(1)},a+=1;this.memory.initts()};c.prototype.runLoop=function(){var b;void 0===this.startTime&&(this.startTime=Date.now());if(!0===this.terminate)clearInterval(this.mySetInterval);else{var d=this.m,c=this.r,k=this.h,l=this.p;var m=this.fn;for(b=1E4;!1===this.terminate&&0!==b;)if(b--,0<=d[0]){this.interval+=1;d[0]=-156250;var n=l[0];this.interrupts.processException(l[0]);if(4===this.interval)this.interval=0,this.repaintWrapper(),
this.cp0[a.COUNT]+=125E4,this.interrupts.triggerCompareInterrupt(0,!1),this.interrupts.triggerVIInterrupt(0,!1);else if(2===this.interval){this.interrupts.checkInterrupts();n!==l[0]&&(n=l[0]>>>2,m=this.fnLut[n]);break}n!==l[0]&&(n=l[0]>>>2,m=this.fnLut[n])}else m=this.run(m,c,k);this.fn=m;return this}};c.prototype.run=function(a,b,d){for(var e=this.m,c=this.memory;0>e[0];)a="function"===typeof a?a(b,d,c,this):this.decompileBlock(this.p[0]);return a};c.prototype.repaintWrapper=function(){1===this.isLittleEndian&&
!1===this.useByteCompatibilityMode?this.repaintLE(this.ctx,this.ImDat):this.repaint(this.ctx,this.ImDat)};c.prototype.asyncFastLoop=function(){var a=this;this.myFastInterval=setInterval(function(){a.runLoop()},0)};c.prototype.startEmulator=function(){self.requestAnimationFrame=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame||f(function(){return setTimeout(f,0)});this.terminate=!1;this.log("startEmulator");this.settings.rateWithDelta=
1E3/60;MainLoop.setUpdate().setDraw(i1964js.runLoop).setEnd().start()};c.prototype.stopEmulatorAndCleanup=function(){this.terminate=!0;clearInterval(this.myFastInterval);this.m[0]=0;this.log("stopEmulatorAndCleanup");MainLoop.stop();this.stopCompiling=!0;this.flushDynaCache()};c.prototype.onSpeedLimitChanged=function(){var a=document.getElementById("speedlimit");clearInterval(this.myFastInterval);null===a||!1===a.checked?(MainLoop.stop(),this.asyncFastLoop()):this.startEmulator()};c.prototype.getFnName=
function(a){return"_"+(a>>>2)};c.prototype.decompileBlock=function(a){var d;this.cnt=b=0;var e="_"+(a>>>2);for(d=e+"=(r,h,m,t)=>{";!this.stopCompiling;){var c=this.memory.lw(a+b);this.cnt+=1;d+=this.CPU_instruction(c);b+=4;if(1E4<b)throw this.terminate=!0,Error("too many instructions! bailing.");}this.stopCompiling=!1;d+="t.m[0]+="+this.cnt;d+=";t.p[0]="+(a+b|0);d+=";return self."+this.getFnName(a+b|0)+"}";c=document.createElement("script");this.s||(this.s=document.getElementsByTagName("script")[0]);
this.kk+=1;this.s.parentNode.insertBefore(c,this.s);c.text=d;return this.fnLut[a>>>2]=self[e]};c.prototype.r4300i_add=function(a){return this.helpers.sLogic(a,"+")};c.prototype.r4300i_addu=function(a){return this.helpers.sLogic(a,"+")};c.prototype.r4300i_sub=function(a){return this.helpers.sLogic(a,"-")};c.prototype.r4300i_subu=function(a){return this.helpers.sLogic(a,"-")};c.prototype.r4300i_or=function(a){return this.helpers.dLogic(a,"|")};c.prototype.r4300i_xor=function(a){return this.helpers.dLogic(a,
"^")};c.prototype.r4300i_nor=function(a){return this.helpers.tRD(a)+"=~("+this.helpers.RS(a)+"|"+this.helpers.RT(a)+");"+this.helpers.tRDH(a)+"=~("+this.helpers.RSH(a)+"|"+this.helpers.RTH(a)+");"};c.prototype.r4300i_and=function(a){return this.helpers.dLogic(a,"&")};c.prototype.r4300i_lui=function(a){var b=(a&65535)<<16;var d=b>>31;return this.helpers.tRT(a)+"="+b+";"+this.helpers.tRTH(a)+"="+d+";"};c.prototype.r4300i_lw=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+
this.helpers.tRT(a)+"=m.LW[r[36]>>>16](r[36]);"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31;"};c.prototype.r4300i_lwu=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+this.helpers.tRT(a)+"=m.LW[r[36]>>>16](r[36]);"+this.helpers.tRTH(a)+"=0;"};c.prototype.r4300i_sw=function(a,d){a=this.helpers.virtualToPhysical(""+this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+"m.SW[r[36]>>>16]("+this.helpers.RT(a)+",r[36]";!0===d?(d=this.p[0]+b+4|0,a+=
","+d+",true);"):(d=this.p[0]+b|0,a+=","+d+");");return a};c.prototype.delaySlot=function(a,d){var e=this.p[0]+b+4+(this.helpers.soffset_imm(a)<<2)|0;var c=this.memory.lw(this.p[0]+b+4|0);var g=this.CPU_instruction(c,!0);0===c&&-1===this.helpers.soffset_imm(a)?e=g+"t.m[0]=0;t.p[0]="+e+";return self."+this.getFnName(e)+"}":(a=this.cnt+1,e=g+"t.m[0]+="+a+";t.p[0]="+e+";return self."+this.getFnName(e)+"}");!1===d&&(e+=g+"t.m[0]++;");b+=4;return e};c.prototype.r4300i_bne=function(a){this.stopCompiling=
!0;return"if("+this.helpers.RS(a)+"-"+this.helpers.RT(a)+"|"+this.helpers.RSH(a)+"-"+this.helpers.RTH(a)+"){"+this.delaySlot(a,!1)};c.prototype.r4300i_bnel=function(a){this.stopCompiling=!0;return"if("+this.helpers.RS(a)+"-"+this.helpers.RT(a)+"|"+this.helpers.RSH(a)+"-"+this.helpers.RTH(a)+"){"+this.delaySlot(a,!0)};c.prototype.r4300i_beq=function(a){this.stopCompiling=!0;return this.helpers.rs(a)===this.helpers.rt(a)?"{"+this.delaySlot(a,!1):"if("+this.helpers.RS(a)+"==="+this.helpers.RT(a)+"&"+
this.helpers.RSH(a)+"==="+this.helpers.RTH(a)+"){"+this.delaySlot(a,!1)};c.prototype.r4300i_beql=function(a){this.stopCompiling=!0;return this.helpers.rs(a)===this.helpers.rt(a)?"{"+this.delaySlot(a,!0):"if("+this.helpers.RS(a)+"==="+this.helpers.RT(a)+"&"+this.helpers.RSH(a)+"==="+this.helpers.RTH(a)+"){"+this.delaySlot(a,!0)};c.prototype.r4300i_blez=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+"<0|!("+this.helpers.RSH(a)+"|"+this.helpers.RS(a)+")){"+this.delaySlot(a,!1)};c.prototype.r4300i_blezl=
function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+"<0|!("+this.helpers.RSH(a)+"|"+this.helpers.RS(a)+")){"+this.delaySlot(a,!0)};c.prototype.r4300i_bgez=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+">=0){"+this.delaySlot(a,!1)};c.prototype.r4300i_bgezl=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+">=0){"+this.delaySlot(a,!0)};c.prototype.r4300i_bgtz=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+">=0&("+this.helpers.RSH(a)+
"|"+this.helpers.RS(a)+")!==0){"+this.delaySlot(a,!1)};c.prototype.r4300i_bgtzl=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+">=0&("+this.helpers.RSH(a)+"|"+this.helpers.RS(a)+")!==0){"+this.delaySlot(a,!0)};c.prototype.r4300i_bltzl=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+"<0){"+this.delaySlot(a,!0)};c.prototype.r4300i_bgezal=function(a){this.stopCompiling=!0;var d=this.p[0]+b+8>>0;return"if("+this.helpers.RSH(a)+">=0){r[31]="+d+";h[31]="+(d>>31)+";"+
this.delaySlot(a,!1)};c.prototype.r4300i_bgezall=function(a){this.stopCompiling=!0;var d=this.p[0]+b+8>>0;return"if("+this.helpers.RSH(a)+">=0){r[31]="+d+";h[31]="+(d>>31)+";"+this.delaySlot(a,!0)};c.prototype.r4300i_bltz=function(a){this.stopCompiling=!0;return"if("+this.helpers.RSH(a)+"<0){"+this.delaySlot(a,!1)};c.prototype.r4300i_COP1_bc1f=function(a){this.stopCompiling=!0;return"if(!(t.cp1Con[31]&0x800000)){"+this.delaySlot(a,!1)};c.prototype.r4300i_COP1_bc1t=function(a){this.stopCompiling=!0;
return"if(t.cp1Con[31]&0x800000){"+this.delaySlot(a,!1)};c.prototype.r4300i_COP1_bc1tl=function(a){this.stopCompiling=!0;return"if(t.cp1Con[31]&0x800000){"+this.delaySlot(a,!0)};c.prototype.r4300i_COP1_bc1fl=function(a){this.stopCompiling=!0;return"if(!(t.cp1Con[31]&0x800000)){"+this.delaySlot(a,!0)};c.prototype.r4300i_j=function(a){this.stopCompiling=!0;a=this.p[0]+b+4&4026531840|(a&67108863)<<2|0;var d=this.memory.lw(this.p[0]+b+4|0);var c=!1;a>>0===this.p[0]+b>>0&&0===d&&(c=!0);d=this.CPU_instruction(d,
!0);d=!0===c?d+"t.m[0]=0":d+("t.m[0]+="+(this.cnt+1));return d+(";t.p[0]="+a+";return self."+this.getFnName(a)+";")};c.prototype.r4300i_jal=function(a){this.stopCompiling=!0;a=this.p[0]+b+4&4026531840|(a&67108863)<<2|0;var d=this.memory.lw(this.p[0]+b+4|0);var c=this.CPU_instruction(d,!0);d=this.p[0]+b+8|0;return c+("t.m[0]+="+(this.cnt+1)+";t.p[0]="+a+";r[31]="+d+";h[31]="+(d>>31)+";return self."+this.getFnName(a)+";")};c.prototype.r4300i_jalr=function(a){this.stopCompiling=!0;var d="r[39]="+this.helpers.RS(a)+
";";var c=this.p[0]+b+8>>0;d+=this.helpers.tRD(a)+"="+c+";"+this.helpers.tRDH(a)+"="+(c>>31)+";";a=this.memory.lw(this.p[0]+b+4|0);a=this.CPU_instruction(a,!0);return d=d+a+("t.m[0]+="+(this.cnt+1)+";t.p[0]=r[39];return t.fnLut[r[39]>>>2];")};c.prototype.r4300i_jr=function(a){this.stopCompiling=!0;a="r[37]="+this.helpers.RS(a)+";";var d=this.memory.lw(this.p[0]+b+4|0);d=this.CPU_instruction(d,!0);return a+d+("t.m[0]+="+(this.cnt+1)+";t.p[0]=r[37];return t.fnLut[r[37]>>>2];")};c.prototype.UNUSED=function(a){this.log("warning: UNUSED");
return""};c.prototype.r4300i_syscall=function(a){this.log("todo: r4300i_syscall");return""};c.prototype.r4300i_COP0_eret=function(b){this.stopCompiling=!0;b="if((t.cp0["+a.STATUS+"]&"+a.ERL+')!==0){alert("error epc");t.p[0]=t.cp0['+a.ERROREPC+"];";b+="t.cp0["+a.STATUS+"]&=~"+a.ERL+"}else{t.p[0]=t.cp0["+a.EPC+"];t.cp0["+a.STATUS+"]&=~"+a.EXL+"}";return b+("t.m[0]+="+(this.cnt+1)+";t.LLbit=0;return t.fnLut[t.p[0]>>>2];")};c.prototype.r4300i_COP0_mtc0=function(a,d){if(!0===d){var c=this.p[0]+b+4|0;d=
"true"}else c=this.p[0]+b|0,d="false";return"t.helpers.inter_mtc0(r,"+this.helpers.fs(a)+","+this.helpers.rt(a)+","+d+","+c+",t.cp0,t.interrupts);"};c.prototype.r4300i_sll=function(a){return 0===(a&2097151)?"":this.helpers.rd(a)===this.helpers.rt(a)?this.helpers.tRD(a)+"<<="+this.helpers.sa(a)+";"+this.helpers.tRDH(a)+"="+this.helpers.RD(a)+">>31;":this.helpers.tRD(a)+"="+this.helpers.RT(a)+"<<"+this.helpers.sa(a)+";"+this.helpers.tRDH(a)+"="+this.helpers.RD(a)+">>31;"};c.prototype.r4300i_srl=function(a){var b=
this.helpers.sa(a);return 0<b?this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>>"+b+";"+this.helpers.tRDH(a)+"=0;":this.helpers.tRDH(a)+"="+this.helpers.RT(a)+">>31;"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+";"};c.prototype.r4300i_ori=function(a){return this.helpers.rt(a)===this.helpers.rs(a)?this.helpers.tRT(a)+"|="+this.helpers.offset_imm(a)+";":this.helpers.tRT(a)+"="+this.helpers.RS(a)+"|"+this.helpers.offset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RSH(a)+";"};c.prototype.r4300i_xori=
function(a){return this.helpers.rt(a)===this.helpers.rs(a)?this.helpers.tRT(a)+"^="+this.helpers.offset_imm(a)+";":this.helpers.tRT(a)+"="+this.helpers.RS(a)+"^"+this.helpers.offset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RSH(a)+";"};c.prototype.r4300i_andi=function(a){return this.helpers.rt(a)===this.helpers.rs(a)?this.helpers.tRT(a)+"&="+this.helpers.offset_imm(a)+";"+this.helpers.tRTH(a)+"=0;":this.helpers.tRT(a)+"="+this.helpers.RS(a)+"&"+this.helpers.offset_imm(a)+";"+this.helpers.tRTH(a)+
"=0;"};c.prototype.r4300i_addi=function(a){return this.helpers.rt(a)===this.helpers.rs(a)?this.helpers.tRT(a)+"+="+this.helpers.soffset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31;":this.helpers.tRT(a)+"="+this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31;"};c.prototype.r4300i_addiu=function(a){return this.helpers.rt(a)===this.helpers.rs(a)?this.helpers.tRT(a)+"+="+this.helpers.soffset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+
">>31;":this.helpers.tRT(a)+"="+this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a)+";"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31;"};c.prototype.r4300i_slt=function(a){return this.helpers.tRD(a)+"=(("+this.helpers.RSH(a)+"<"+this.helpers.RTH(a)+")|(!("+this.helpers.RSH(a)+"-"+this.helpers.RTH(a)+")&("+this.helpers.uRS(a)+"<"+this.helpers.uRT(a)+")));"+this.helpers.tRDH(a)+"=0;"};c.prototype.r4300i_sltu=function(a){return this.helpers.tRD(a)+"=(("+this.helpers.uRSH(a)+"<"+this.helpers.uRTH(a)+
")|(!("+this.helpers.uRSH(a)+"-"+this.helpers.uRTH(a)+")&("+this.helpers.uRS(a)+"<"+this.helpers.uRT(a)+")));"+this.helpers.tRDH(a)+"=0;"};c.prototype.r4300i_slti=function(a){var b=this.helpers.soffset_imm(a)>>31;var d=this.helpers.soffset_imm(a)>>>0;return this.helpers.tRT(a)+"=(("+this.helpers.RSH(a)+"<"+b+")|(!("+this.helpers.RSH(a)+"- "+b+")&("+this.helpers.uRS(a)+"<"+d+")));"+this.helpers.tRTH(a)+"=0;"};c.prototype.r4300i_sltiu=function(a){var b=this.helpers.soffset_imm(a)>>31>>>0;var d=this.helpers.soffset_imm(a)>>>
0;return this.helpers.tRT(a)+"=(("+this.helpers.uRSH(a)+"<"+b+")|(!("+this.helpers.uRSH(a)+"- "+b+")&("+this.helpers.uRS(a)+"<"+d+")));"+this.helpers.tRTH(a)+"=0;"};c.prototype.r4300i_cache=function(a){this.log("todo: r4300i_cache");this.stopCompiling=!0;return""};c.prototype.r4300i_ll=function(a){return this.helpers.setVAddr(a)+this.helpers.tRT(a)+"=m.lw((r[38])|0);t.LLbit=1;"};c.prototype.r4300i_multu=function(a){return"t.helpers.inter_multu(r,h,"+a+");"};c.prototype.r4300i_mult=function(a){return"t.helpers.inter_mult(r,h,"+
a+");"};c.prototype.r4300i_mflo=function(a){return this.helpers.tRD(a)+"=r[32];"+this.helpers.tRDH(a)+"=h[32];"};c.prototype.r4300i_mfhi=function(a){return this.helpers.tRD(a)+"=r[33];"+this.helpers.tRDH(a)+"=h[33];"};c.prototype.r4300i_mtlo=function(a){return"r[32]="+this.helpers.RS(a)+";h[32]="+this.helpers.RSH(a)+";"};c.prototype.r4300i_mthi=function(a){return"r[33]="+this.helpers.RS(a)+";h[33]="+this.helpers.RSH(a)+";"};c.prototype.r4300i_COP0_mfc0=function(b){switch(this.helpers.fs(b)){case a.RANDOM:alert("RANDOM")}return this.helpers.tRT(b)+
"=t.cp0["+this.helpers.fs(b)+"];"+this.helpers.tRTH(b)+"=t.cp0["+this.helpers.fs(b)+"]>>31;"};c.prototype.r4300i_lb=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+this.helpers.tRT(a)+"=m.LB[r[36]>>>16](r[36])<<24>>24;"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>8;"};c.prototype.r4300i_lbu=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+this.helpers.tRT(a)+"=m.LB[r[36]>>>16](r[36]);"+this.helpers.tRTH(a)+
"=0;"};c.prototype.r4300i_lh=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+this.helpers.tRT(a)+"=m.LH[r[36]>>>16](r[36])<<16>>16;"+this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>16;"};c.prototype.r4300i_lhu=function(a){return this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+this.helpers.tRT(a)+"=m.LH[r[36]>>>16](r[36]);"+this.helpers.tRTH(a)+"=0;"};c.prototype.r4300i_sb=function(a,d){a=this.helpers.virtualToPhysical(this.helpers.RS(a)+
"+"+this.helpers.soffset_imm(a))+"m.SB[r[36]>>>16]("+this.helpers.RT(a)+",r[36]";!0===d?(d=this.p[0]+b+4|0,a+=","+d+",true);"):(d=this.p[0]+b|0,a+=","+d+");");return a};c.prototype.r4300i_sh=function(a,d){a=this.helpers.virtualToPhysical(this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a))+"m.SH[r[36]>>>16]("+this.helpers.RT(a)+",r[36]";!0===d?(d=this.p[0]+b+4|0,a+=","+d+",true);"):(d=this.p[0]+b|0,a+=","+d+");");return a};c.prototype.r4300i_srlv=function(a){return this.helpers.tRD(a)+"="+this.helpers.RT(a)+
">>>("+this.helpers.RS(a)+"&0x1f);"+this.helpers.tRDH(a)+"="+this.helpers.RD(a)+">>31;"};c.prototype.r4300i_sllv=function(a){return this.helpers.tRD(a)+"="+this.helpers.RT(a)+"<<("+this.helpers.RS(a)+"&0x1f);"+this.helpers.tRDH(a)+"="+this.helpers.RD(a)+">>31;"};c.prototype.r4300i_srav=function(a){return this.helpers.tRDH(a)+"=("+this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>("+this.helpers.RS(a)+"&0x1f))>>31;"};c.prototype.r4300i_COP1_cfc1=function(a){if(0===this.helpers.fs(a)||31===this.helpers.fs(a))return this.helpers.tRTH(a)+
"=("+this.helpers.tRT(a)+"=t.cp1Con["+this.helpers.fs(a)+"])>>31;"};c.prototype.r4300i_COP1_ctc1=function(a){if(31===this.helpers.fs(a))return"t.cp1Con[31]="+this.helpers.RT(a)+";"};c.prototype.r4300i_ld=function(a){return this.helpers.setVAddr(a)+this.helpers.tRT(a)+"=m.lw((r[38]+4)|0);"+this.helpers.tRTH(a)+"=m.lw(r[38]);"};c.prototype.r4300i_lld=function(a){return this.helpers.setVAddr(a)+this.helpers.tRT(a)+"=m.lw((r[38]+4)|0);"+this.helpers.tRTH(a)+"=m.lw(r[38]);t.LLbit=1;"};c.prototype.r4300i_sd=
function(a,d){var c=this.helpers.setVAddr(a)+"m.sw("+this.helpers.RT(a)+",(r[38]+4)|0";if(!0===d){var e=this.p[0]+b+4|0;c+=","+e+",true);"}else e=this.p[0]+b|0,c+=","+e+");";c+="m.sw("+this.helpers.RTH(a)+",r[38]";!0===d?(e=this.p[0]+b+4|0,c+=","+e+",true);"):(e=this.p[0]+b|0,c+=","+e+");");return c};c.prototype.r4300i_dmultu=function(a){return"t.helpers.inter_dmultu(r,h,"+a+");"};c.prototype.r4300i_dmult=function(a){this.log("todo: r4300i_dmult");return""};c.prototype.r4300i_dsll=function(a){var b=
"{var temp="+this.helpers.RT(a)+">>>"+(32-this.helpers.sa(a))+";";b+=this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+"<<"+this.helpers.sa(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+"<<"+this.helpers.sa(a)+";";return b+(this.helpers.tRDH(a)+"|=temp;}")};c.prototype.r4300i_dsrl=function(a){var b="{var temp="+this.helpers.RTH(a)+"<<"+(32-this.helpers.sa(a))+";";b+=this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+">>>"+this.helpers.sa(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>>"+this.helpers.sa(a)+
";";return b+(this.helpers.tRD(a)+"|=temp;}")};c.prototype.r4300i_dsra=function(a){var b="{var temp="+this.helpers.RTH(a)+"<<"+(32-this.helpers.sa(a))+";";b+=this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+">>"+this.helpers.sa(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>>"+this.helpers.sa(a)+";";return b+(this.helpers.tRD(a)+"|=temp;}")};c.prototype.r4300i_dsllv=function(a){this.log("todo: fix r4300i_dsllv");var b="{var temp="+this.helpers.RT(a)+">>>(64-"+this.helpers.RS(a)+");";b+=this.helpers.tRDH(a)+
"="+this.helpers.RTH(a)+"<<"+this.helpers.RS(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+"<<"+this.helpers.RS(a)+";";return b+(this.helpers.tRDH(a)+"|=temp;}")};c.prototype.r4300i_dsrlv=function(a){this.log("todo: fix r4300i_dsrlv");var b="{var temp="+this.helpers.RTH(a)+"<<(64-"+this.helpers.RS(a)+");";b+=this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+">>>"+this.helpers.RS(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>>"+this.helpers.RS(a)+";";return b+(this.helpers.tRD(a)+"|=temp;}")};
c.prototype.r4300i_dsrav=function(a){this.log("todo: fix r4300i_dsrav");var b="{var temp="+this.helpers.RTH(a)+"<<(64-"+this.helpers.RS(a)+");";b+=this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+">>"+this.helpers.RS(a)+";"+this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>>"+this.helpers.RS(a)+";";return b+(this.helpers.tRD(a)+"|=temp;}")};c.prototype.r4300i_dsll32=function(a){return this.helpers.tRDH(a)+"="+this.helpers.RT(a)+"<<"+this.helpers.sa(a)+";"+this.helpers.tRD(a)+"=0;"};c.prototype.r4300i_dsrl32=
function(a){return this.helpers.tRDH(a)+"=0;"+this.helpers.RD(a)+"="+this.helpers.RT(a)+">>>"+this.helpers.sa(a)+";"};c.prototype.r4300i_dsra32=function(a){return this.helpers.tRD(a)+"="+this.helpers.RTH(a)+">>"+this.helpers.sa(a)+";"+this.helpers.tRDH(a)+"="+this.helpers.RTH(a)+">>31;"};c.prototype.r4300i_ddivu=function(a){return"t.helpers.inter_ddivu(r,h,"+a+");"};c.prototype.r4300i_ddiv=function(a){return"t.helpers.inter_ddiv(r,h,"+a+");"};c.prototype.r4300i_dadd=function(a){this.log("todo: dadd");
return""};c.prototype.r4300i_break=function(a){this.log("todo: break");return""};c.prototype.r4300i_div=function(a){return"t.helpers.inter_div(r,h,"+a+");"};c.prototype.r4300i_divu=function(a){return"t.helpers.inter_divu(r,h,"+a+");"};c.prototype.r4300i_sra=function(a){var b=this.helpers.tRDH(a)+"="+this.helpers.RT(a)+">>31;";return b=this.helpers.rd(a)===this.helpers.rt(a)?b+(this.helpers.tRD(a)+">>="+this.helpers.sa(a)+";"):b+(this.helpers.tRD(a)+"="+this.helpers.RT(a)+">>"+this.helpers.sa(a)+";")};
c.prototype.r4300i_COP0_tlbwi=function(b){return"t.helpers.inter_tlbwi(t.cp0["+a.INDEX+"], t.tlb, t.cp0);"};c.prototype.r4300i_COP0_tlbp=function(a){return"t.helpers.inter_tlbp(t.tlb, t.cp0);"};c.prototype.r4300i_COP0_tlbr=function(a){return"t.helpers.inter_tlbr(t.tlb, t.cp0);"};c.prototype.r4300i_COP0_tlbwr=function(a){this.log("todo: r4300i_COP0_tlbwr");return""};c.prototype.r4300i_COP1_dmfc1=function(a){this.log("todo: r4300i_COP1_dmfc1");return""};c.prototype.r4300i_COP1_dmtc1=function(a){this.log("todo: r4300i_COP1_dmtc1");
return""};c.prototype.r4300i_lwl=function(a){var b="{"+this.helpers.setVAddr(a);b=b+"const vAddrAligned=(r[38]&-4)|0;const value=m.lw(vAddrAligned);const cas=r[38]&3;const mask=-1>>>(24-(cas<<3))>>>8;const shf=(cas<<3);"+(this.helpers.tRT(a)+"&=mask;"+this.helpers.tRT(a)+"|=((value<<shf)>>>0);");return b+(this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31}")};c.prototype.r4300i_lwr=function(a){var b="{"+this.helpers.setVAddr(a);b=b+"const vAddrAligned=(r[38]&-4)|0;const value=m.lw(vAddrAligned);const cas=r[38]&3;const mask=-1<<(cas<<3)<<8;const shf=32-((cas+1)<<3);"+
(this.helpers.tRT(a)+"&=mask;"+this.helpers.tRT(a)+"|=(value>>>shf);");return b+(this.helpers.tRTH(a)+"="+this.helpers.RT(a)+">>31}")};c.prototype.r4300i_swl=function(a){var b="{"+this.helpers.setVAddr(a);b=b+"const vAddrAligned=(r[38]&-4)|0;let value=m.lw(vAddrAligned);"+("switch(r[38]&3){case 0:value="+this.helpers.RT(a)+";break;");b+="case 1:value=((value&0xff000000)|("+this.helpers.RT(a)+">>>8));break;";b+="case 2:value=((value&0xffff0000)|("+this.helpers.RT(a)+">>>16));break;";b+="case 3:value=((value&0xffffff00)|("+
this.helpers.RT(a)+">>>24));break;}";return b+"m.sw(value,vAddrAligned,false)}"};c.prototype.r4300i_swr=function(a){var b="{"+this.helpers.setVAddr(a);b=b+"const vAddrAligned=(r[38]&-4)|0;let value=m.lw(vAddrAligned);"+("switch(r[38]&3){case 3:value="+this.helpers.RT(a)+";break;");b+="case 2:value=((value & 0xFF)|(("+this.helpers.RT(a)+"<<8)>>>0));break;";b+="case 1:value=((value & 0xFFFF)|(("+this.helpers.RT(a)+"<<16)>>>0));break;";b+="case 0:value=((value & 0xFFFFFF)|(("+this.helpers.RT(a)+"<<24)>>>0));break;}";
return b+"m.sw(value,vAddrAligned,false)}"};c.prototype.r4300i_lwc1=function(a){return"t.cp1_i["+this.helpers.FT32ArrayView(a)+"]=m.lw("+this.helpers.RS(a)+"+"+this.helpers.soffset_imm(a)+");"};c.prototype.r4300i_ldc1=function(a){return this.helpers.setVAddr(a)+"t.cp1_i["+this.helpers.FT32ArrayView(a)+"]=m.lw((r[38]+4)|0);"+("t.cp1_i["+this.helpers.FT32HIArrayView(a)+"]=m.lw((r[38])|0);")};c.prototype.r4300i_swc1=function(a,d){a="m.sw(t.cp1_i["+this.helpers.FT32ArrayView(a)+"],"+this.helpers.RS(a)+
"+"+this.helpers.soffset_imm(a);!0===d?(d=this.p[0]+b+4|0,a+=","+d+",true);"):(d=this.p[0]+b|0,a+=","+d+");");return a};c.prototype.r4300i_sdc1=function(a,d){var c=this.helpers.setVAddr(a)+"m.sw(t.cp1_i["+this.helpers.FT32ArrayView(a)+"],(r[38]+4)|0";if(!0===d){var e=this.p[0]+b+4|0;c+=","+e+",true);"}else e=this.p[0]+b|0,c+=","+e+");";c+="m.sw(t.cp1_i["+this.helpers.FT32HIArrayView(a)+"],(r[38])|0";!0===d?(e=this.p[0]+b+4|0,c+=","+e+",true);"):(e=this.p[0]+b|0,c+=","+e+");");return c};c.prototype.r4300i_COP1_mtc1=
function(a){return"t.cp1_i["+this.helpers.FS32ArrayView(a)+"]="+this.helpers.RT(a)+";"};c.prototype.r4300i_COP1_mfc1=function(a){return this.helpers.tRTH(a)+"=("+this.helpers.tRT(a)+"=t.cp1_i["+this.helpers.FS32ArrayView(a)+"])>>31;"};c.prototype.r4300i_COP1_cvts_w=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_i["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_cvts_l=function(a){this.log("todo: r4300i_COP1_cvts_l");return""};c.prototype.r4300i_COP1_cvtd_l=function(a){this.log("todo: r4300i_COP1_cvtd_l");
return""};c.prototype.r4300i_COP1_cvtw_s=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_div_s=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"]/t.cp1_f["+this.helpers.FT32ArrayView(a)+"];"};c.prototype.r4300i_COP1_div_d=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"]/t.cp1_f64["+this.helpers.FT64ArrayView(a)+
"];"};c.prototype.r4300i_COP1_mul_s=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"]*t.cp1_f["+this.helpers.FT32ArrayView(a)+"];"};c.prototype.r4300i_COP1_mul_d=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"]*t.cp1_f64["+this.helpers.FT64ArrayView(a)+"];"};c.prototype.r4300i_COP1_mov_s=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+"]=t.cp1_i["+this.helpers.FS32ArrayView(a)+
"];"};c.prototype.r4300i_COP1_mov_d=function(a){return"t.cp1_f64["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_add_s=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"]+t.cp1_f["+this.helpers.FT32ArrayView(a)+"];"};c.prototype.r4300i_COP1_sub_s=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"]-t.cp1_f["+this.helpers.FT32ArrayView(a)+
"];"};c.prototype.r4300i_COP1_cvtd_s=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_cvtd_w=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_i["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_cvts_d=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"];"};c.prototype.r4300i_COP1_cvtw_d=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+
"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"];"};c.prototype.r4300i_COP1_add_d=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"]+t.cp1_f64["+this.helpers.FT64ArrayView(a)+"];"};c.prototype.r4300i_COP1_sub_d=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"]-t.cp1_f64["+this.helpers.FT64ArrayView(a)+"];"};c.prototype.r4300i_COP1_truncw_d=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+
"]=t.cp1_f64["+this.helpers.FS64ArrayView(a)+"];"};c.prototype.r4300i_COP1_truncw_s=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+"]=t.cp1_f["+this.helpers.FS32ArrayView(a)+"];"};c.prototype.r4300i_COP1_neg_s=function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+"]=t.cp1_i["+this.helpers.FS32ArrayView(a)+"]^0x80000000;"};c.prototype.r4300i_COP1_neg_d=function(a){return"t.cp1_i["+this.helpers.FD32HIArrayView(a)+"]=t.cp1_i["+this.helpers.FS32HIArrayView(a)+"]^0x80000000;"};c.prototype.r4300i_COP1_abs_s=
function(a){return"t.cp1_i["+this.helpers.FD32ArrayView(a)+"]=t.cp1_i["+this.helpers.FS32ArrayView(a)+"]&0x7fffffff;"};c.prototype.r4300i_COP1_abs_d=function(a){return"t.cp1_i["+this.helpers.FD32HIArrayView(a)+"]=t.cp1_i["+this.helpers.FS32HIArrayView(a)+"]&0x7fffffff;"};c.prototype.r4300i_COP1_sqrt_s=function(a){return"t.cp1_f["+this.helpers.FD32ArrayView(a)+"]=Math.sqrt(t.cp1_f["+this.helpers.FS32ArrayView(a)+"]);"};c.prototype.r4300i_COP1_sqrt_d=function(a){return"t.cp1_f64["+this.helpers.FD64ArrayView(a)+
"]=Math.sqrt(t.cp1_f64["+this.helpers.FS64ArrayView(a)+"]);"};c.prototype.r4300i_COP1_cvtl_s=function(a){this.log("todo: r4300i_COP1_cvtl_s");return""};c.prototype.r4300i_COP1_roundl_s=function(a){this.log("todo: r4300i_COP1_roundl_s");return""};c.prototype.r4300i_COP1_truncl_s=function(a){this.log("todo: r4300i_COP1_truncl_s");return""};c.prototype.r4300i_COP1_ceill_s=function(a){this.log("todo: r4300i_COP1_ceill_s");return""};c.prototype.r4300i_COP1_floorl_s=function(a){this.log("todo: r4300i_COP1_floorl_s");
return""};c.prototype.r4300i_COP1_roundw_s=function(a){this.log("todo: r4300i_COP1_floorl_s");return""};c.prototype.r4300i_COP1_ceilw_s=function(a){this.log("todo: r4300i_COP1_floorl_s");return""};c.prototype.r4300i_COP1_floorw_s=function(a){this.log("todo: r4300i_COP1_floorl_s");return""};c.prototype.r4300i_COP1_cvtl_d=function(a){this.log("todo: r4300i_COP1_cvtl_s");return""};c.prototype.r4300i_COP1_roundl_d=function(a){this.log("todo: r4300i_COP1_roundl_d");return""};c.prototype.r4300i_COP1_truncl_d=
function(a){this.log("todo: r4300i_COP1_truncl_d");return""};c.prototype.r4300i_COP1_ceill_d=function(a){this.log("todo: r4300i_COP1_ceill_d");return""};c.prototype.r4300i_COP1_floorl_d=function(a){this.log("todo: r4300i_COP1_floorl_d");return""};c.prototype.r4300i_COP1_roundw_d=function(a){this.log("todo: r4300i_COP1_floorl_d");return""};c.prototype.r4300i_COP1_ceilw_d=function(a){this.log("todo: r4300i_COP1_floorl_d");return""};c.prototype.r4300i_COP1_floorw_d=function(a){this.log("todo: r4300i_COP1_floorl_d");
return""};c.prototype.r4300i_sync=function(a){this.log("todo: sync");return""};c.prototype.r4300i_sdr=function(a){this.log("todo: sdr");return""};c.prototype.r4300i_ldr=function(a){this.log("todo: ldr");return""};c.prototype.r4300i_sdl=function(a){this.log("todo: sdl");return""};c.prototype.r4300i_ldl=function(a){this.log("todo: ldl");return""};c.prototype.r4300i_sc=function(a){this.log("todo: sc");return""};c.prototype.r4300i_scd=function(a){this.log("todo: scd");return""};c.prototype.r4300i_daddi=
function(a){return"t.helpers.inter_daddi(r,h,"+a+");"};c.prototype.r4300i_teq=function(a){this.log("todo: r4300i_teq");return""};c.prototype.r4300i_tgeu=function(a){this.log("todo: r4300i_tgeu");return""};c.prototype.r4300i_tgei=function(a){this.log("todo: r4300i_tgei");return""};c.prototype.r4300i_tgeiu=function(a){this.log("todo: r4300i_tgeiu");return""};c.prototype.r4300i_tlt=function(a){this.log("todo: r4300i_tlt");return""};c.prototype.r4300i_tltu=function(a){this.log("todo: r4300i_tltu");return""};
c.prototype.r4300i_tne=function(a){this.log("todo: r4300i_tne");return""};c.prototype.r4300i_tnei=function(a){this.log("todo: r4300i_tnei");return""};c.prototype.r4300i_tlti=function(a){this.log("todo: r4300i_tlti");return""};c.prototype.r4300i_tltiu=function(a){this.log("todo: r4300i_tltiu");return""};c.prototype.r4300i_teqi=function(a){this.log("todo: r4300i_teqi");return""};c.prototype.r4300i_bltzal=function(a){this.log("todo: r4300i_bltzal (might be unused)");return""};c.prototype.r4300i_bltzall=
function(a){this.log("todo: r4300i_teqi (might be unused)");return""};c.prototype.r4300i_daddiu=function(a){return"t.helpers.inter_daddiu(r,h,"+a+");"};c.prototype.r4300i_daddu=function(a){return"t.helpers.inter_daddu(r,h,"+a+");"};c.prototype.r4300i_dsub=function(a){this.log("todo: r4300i_dsub");return""};c.prototype.r4300i_dsubu=function(a){this.log("todo: r4300i_dsubu");return""};c.prototype.r4300i_tge=function(a){this.log("todo: r4300i_tge");return""};c.prototype.r4300i_C_F_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+
a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_UN_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_EQ_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_UEQ_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_OLT_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_ULT_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+
a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_OLE_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_ULE_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_SF_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_NGLE_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_SEQ_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+
a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_NGL_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_LT_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_NGE_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_LE_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_NGT_S=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_s("+
a+",t.cp1Con,t.cp1_f);"};c.prototype.r4300i_C_F_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_UN_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_EQ_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_UEQ_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_OLT_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+
a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_ULT_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_OLE_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_ULE_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_SF_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_NGLE_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+
a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_SEQ_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_NGL_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_LT_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_NGE_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_LE_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+
a+",t.cp1Con,t.cp1_f64);"};c.prototype.r4300i_C_NGT_D=function(a){return"t.helpers.inter_r4300i_C_cond_fmt_d("+a+",t.cp1Con,t.cp1_f64);"};var d="undefined"!==typeof exports&&null!==exports?exports:self;d.C1964jsEmulator=c;d.consts=a}).call(this);(function(a){function b(a){z=u(b);if(!(a<e+m)){d+=a-e;e=a;v(a,d);a>h+1E3&&(g=900*k/(a-h)+(1-.9)*g,h=a,k=0);k++;for(l=0;d>=c;)if(w(c),d-=c,240<=++l){r=!0;break}x(d/c);A(g,r);r=!1}}var c=1E3/60,d=0,e=0,g=60,h=0,k=0,l=0,m=0,n=!1,p=!1,r=!1,q="object"===typeof window?window:a,u=q.requestAnimationFrame||function(){var a=Date.now(),b,d;return function(e){b=Date.now();d=Math.max(0,c-(b-a));a=b+d;return setTimeout(function(){e(b+d)},d)}}(),t=q.cancelAnimationFrame||clearTimeout,v=q=function(){},w=q,x=q,A=
q,z;a.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(a){c=a;return this},getFPS:function(){return g},getMaxAllowedFPS:function(){return 1E3/m},setMaxAllowedFPS:function(a){"undefined"===typeof a&&(a=Infinity);0===a?this.stop():m=1E3/a;return this},resetFrameDelta:function(){var a=d;d=0;return a},setBegin:function(a){v=a||v;return this},setUpdate:function(a){w=a||w;return this},setDraw:function(a){x=a||x;return this},setEnd:function(a){A=a||A;return this},start:function(){p||
(p=!0,z=u(function(a){x(1);n=!0;h=e=a;k=0;z=u(b)}));return this},stop:function(){p=n=!1;t(z);return this},isRunning:function(){return n}};"function"===typeof define&&define.amd?define(a.MainLoop):"object"===typeof module&&null!==module&&"object"===typeof module.exports&&(module.exports=a.MainLoop)})(this);(function(){var a="undefined"!==typeof exports&&null!==exports?exports:self;a.C1964jsHelpers=function(a,c){this.core=a;this.isLittleEndian=c;this.isBigEndian=!1===c;this.fs=function(a){return a>>11&31};this.ft=function(a){return a>>16&31};this.FS32ArrayView=function(a){return a>>11&31^this.isBigEndian};this.FS32HIArrayView=function(a){return a>>11&31^this.isLittleEndian};this.FT32ArrayView=function(a){return a>>16&31^this.isBigEndian};this.FT32HIArrayView=function(a){return a>>16&31^this.isLittleEndian};
this.FD32ArrayView=function(a){return a>>6&31^this.isBigEndian};this.FD32HIArrayView=function(a){return a>>6&31^this.isLittleEndian};this.FS64ArrayView=function(a){return(a>>11&31)>>1};this.FT64ArrayView=function(a){return(a>>16&31)>>1};this.FD64ArrayView=function(a){return(a>>6&31)>>1};this.rd=function(a){return a>>11&31};this.rs=function(a){return a>>21&31};this.RS=function(a){a=a>>21&31;return 0===a?"~-1":"r["+a+"]"};this.RSH=function(a){a=a>>21&31;return 0===a?"~-1":"h["+a+"]"};this.uRS=function(a){a=
a>>21&31;return 0===a?"~-1":"(r["+a+"]>>>0)"};this.uRSH=function(a){a=a>>21&31;return 0===a?"~-1":"(h["+a+"]>>>0)"};this.tRS=function(a){a=a>>21&31;return 0===a?"r[34]":"r["+a+"]"};this.tRSH=function(a){a=a>>21&31;return 0===a?"h[34]":"h["+a+"]"};this.tRD=function(a){a=a>>11&31;return 0===a?"r[34]":"r["+a+"]"};this.tRDH=function(a){a=a>>11&31;return 0===a?"h[34]":"h["+a+"]"};this.tRT=function(a){a=a>>16&31;return 0===a?"r[34]":"r["+a+"]"};this.tRTH=function(a){a=a>>16&31;return 0===a?"h[34]":"h["+
a+"]"};this.RD=function(a){a=a>>11&31;return 0===a?"~-1":"r["+a+"]"};this.RDH=function(a){a=a>>11&31;return 0===a?"~-1":"h["+a+"]"};this.uRD=function(a){a=a>>11&31;return 0===a?"~-1":"(r["+a+"]>>>0)"};this.uRDH=function(a){a=a>>11&31;return 0===a?"~-1":"(h["+a+"]>>>0)"};this.RT=function(a){a=a>>16&31;return 0===a?"~-1":"r["+a+"]"};this.RTH=function(a){a=a>>16&31;return 0===a?"~-1":"h["+a+"]"};this.uRT=function(a){a=a>>16&31;return 0===a?"~-1":"(r["+a+"]>>>0)"};this.uRTH=function(a){a=a>>16&31;return 0===
a?"~-1":"(h["+a+"]>>>0)"};this.rt=function(a){return a>>16&31};this.offset_imm=function(a){return a&65535};this.soffset_imm=function(a){return a<<16>>16};this.setVAddr=function(a){return"r[38]="+this.RS(a)+"+"+this.soffset_imm(a)+";"};this.fn=function(a){return a&63};this.sa=function(a){return a>>6&31};this.fd=function(a){return a>>6&31};this.sLogic=function(a,b){return this.rd(a)===this.rs(a)?this.tRD(a)+b+"="+this.RT(a)+";"+this.tRDH(a)+"="+this.RD(a)+">>31;":this.tRD(a)+"="+this.RS(a)+b+this.RT(a)+
";"+this.tRDH(a)+"="+this.RD(a)+">>31;"};this.dLogic=function(a,b){return this.rd(a)===this.rs(a)?this.tRD(a)+b+"="+this.RT(a)+";"+this.tRDH(a)+b+"="+this.RTH(a)+";":this.tRD(a)+"="+this.RS(a)+b+this.RT(a)+";"+this.tRDH(a)+"="+this.RSH(a)+b+this.RTH(a)+";"};this.virtualToPhysical=function(a){return"r[35]="+a+";r[36]=(m.t[r[35]>>>12]<<16)|(r[35]&0xffff);"};this.inter_mtc0=function(a,b,c,h,k,l,m){switch(b){case consts.CAUSE:l[b]&=-769;l[b]|=a[c]&768;0!==(l[consts.CAUSE]&l[consts.STATUS]&65280)&&0!==
(a[c]&768)&&m.setException(consts.EXC_INT,0,k,h);break;case consts.COUNT:l[b]=a[c];break;case consts.COMPARE:l[consts.CAUSE]&=~consts.CAUSE_IP8;l[b]=a[c];break;case consts.STATUS:if(0===(a[c]&consts.EXL)&&1===(l[b]&consts.EXL)&&0!==(l[consts.CAUSE]&l[consts.STATUS]&65280)){l[b]=a[c];m.setException(consts.EXC_INT,0,k,h);break}if(1===(a[c]&consts.IE)&&0===(l[b]&consts.IE)&&0!==(l[consts.CAUSE]&l[consts.STATUS]&65280)){l[b]=a[c];m.setException(consts.EXC_INT,0,k,h);break}l[b]=a[c];break;case consts.BADVADDR:case consts.PREVID:case consts.RANDOM:break;
case consts.INDEX:l[b]=a[c]&2147483711;break;case consts.ENTRYLO0:l[b]=a[c]&1073741823;break;case consts.ENTRYLO1:l[b]=a[c]&1073741823;break;case consts.ENTRYHI:l[b]=a[c]&4294959359;break;case consts.PAGEMASK:l[b]=a[c]&33546240;break;case consts.WIRED:l[b]=a[c]&31;l[consts.RANDOM]=31;break;default:l[b]=a[c]}};this.inter_mult=function(a,b,c){var d=a[this.rs(c)];c=a[this.rt(c)];d=goog.math.Long.fromBits(d,d>>31);c=goog.math.Long.fromBits(c,c>>31);d=d.multiply(c);a[32]=d.getLowBits();b[32]=a[32]>>31;
a[33]=d.getHighBits();b[33]=a[33]>>31};this.inter_multu=function(a,b,c){var d=a[this.rs(c)];c=a[this.rt(c)];d=goog.math.Long.fromBits(d,0);c=goog.math.Long.fromBits(c,0);d=d.multiply(c);a[32]=d.getLowBits();b[32]=a[32]>>31;a[33]=d.getHighBits();b[33]=a[33]>>31};this.inter_daddi=function(a,b,c){var d=goog.math.Long.fromBits(a[this.rs(c)],b[this.rs(c)]);var e=goog.math.Long.fromBits(this.soffset_imm(c),this.soffset_imm(c)>>31);e=d.add(e);a[this.rt(c)]=e.getLowBits();b[this.rt(c)]=e.getHighBits()};this.inter_daddiu=
function(a,b,c){var d=goog.math.Long.fromBits(a[this.rs(c)],b[this.rs(c)]);var e=goog.math.Long.fromBits(this.soffset_imm(c),this.soffset_imm(c)>>31);e=d.add(e);a[this.rt(c)]=e.getLowBits();b[this.rt(c)]=e.getHighBits()};this.inter_dadd=function(a,b,c){var d=goog.math.Long.fromBits(a[this.rs(c)],b[this.rs(c)]);var e=goog.math.Long.fromBits(a[this.rt(c)],b[this.rt(c)]);d=d.add(e);a[this.rd(c)]=d.getLowBits();b[this.rd(c)]=d.getHighBits()};this.inter_daddu=function(a,b,c){var d=goog.math.Long.fromBits(a[this.rs(c)],
b[this.rs(c)]);var e=goog.math.Long.fromBits(a[this.rt(c)],b[this.rt(c)]);d=d.add(e);a[this.rd(c)]=d.getLowBits();b[this.rd(c)]=d.getHighBits()};this.inter_div=function(a,b,c){0===a[this.rt(c)]?alert("divide by zero"):(a[32]=a[this.rs(c)]/a[this.rt(c)],b[32]=a[32]>>31,a[33]=a[this.rs(c)]%a[this.rt(c)],b[33]=a[33]>>31)};this.inter_ddiv=function(a,b,c){var d=a[this.rs(c)];var e=a[this.rt(c)];var g=b[this.rs(c)];c=b[this.rt(c)];d=goog.math.Long.fromBits(d,g);g=goog.math.Long.fromBits(e,c);0===g?alert("divide by zero"):
(e=d.div(g),d=d.modulo(g),a[32]=e.getLowBits(),b[32]=e.getHighBits(),a[33]=d.getLowBits(),b[33]=d.getHighBits())};this.inter_divu=function(a,b,c){0===a[this.rt(c)]?alert("divide by zero"):(a[32]=(a[this.rs(c)]>>>0)/(a[this.rt(c)]>>>0),b[32]=a[32]>>31,a[33]=(a[this.rs(c)]>>>0)%(a[this.rt(c)]>>>0),b[33]=a[33]>>31)};this.inter_dmult=function(a,b,c){0>b[this.rs(c)]&&alert("dmult RSh negative:"+b[this.rs(c)]);0>b[this.rt(c)]&&alert("dmult RTh negative:"+b[this.rt(c)]);var d="0x"+String(dec2hex(b[this.rs(c)]))+
String(dec2hex(a[this.rs(c)]));c="0x"+String(dec2hex(b[this.rt(c)]))+String(dec2hex(a[this.rt(c)]));d=new BigInt(d);c=new BigInt(c);c=bigint_mul(d,c).toStringBase(16);"-"===c[0]&&alert("dmult:"+c);24<c.length?(d=c.length-24,b[33]="0x"+c.substr(0,d)>>>0,a[33]="0x"+c.substr(d,8)>>>0,b[32]="0x"+c.substr(d+8,8)>>>0,a[32]="0x"+c.substr(d+16,8)>>>0):16<c.length?(d=c.length-16,b[33]=0,a[33]="0x"+c.substr(0,d)>>>0,b[32]="0x"+c.substr(d,8)>>>0,a[32]="0x"+c.substr(d+8,8)>>>0):8<c.length?(d=c.length-8,b[33]=
0,a[33]=0,b[32]="0x"+c.substr(0,d)>>>0,a[32]="0x"+c.substr(d,8)>>>0):(d=c.length,b[33]=0,a[33]=0,b[32]=0,a[32]="0x"+c.substr(0,d)>>>0)};this.inter_dmultu=function(a,b,c){var d="0x0"+String(dec2hex(b[this.rs(c)]))+String(dec2hex(a[this.rs(c)]));c="0x0"+String(dec2hex(b[this.rt(c)]))+String(dec2hex(a[this.rt(c)]));d=new BigInt(d);c=new BigInt(c);c=bigint_mul(d,c).toStringBase(16);"-"===c[0]&&alert("dmultu:"+c);24<c.length?(d=c.length-24,b[33]="0x"+c.substr(0,d)>>>0,a[33]="0x"+c.substr(d,8)>>>0,b[32]=
"0x"+c.substr(d+8,8)>>>0,a[32]="0x"+c.substr(d+16,8)>>>0):16<c.length?(d=c.length-16,b[33]=0,a[33]="0x"+c.substr(0,d)>>>0,b[32]="0x"+c.substr(d,8)>>>0,a[32]="0x"+c.substr(d+8,8)>>>0):8<c.length?(d=c.length-8,b[33]=0,a[33]=0,b[32]="0x"+c.substr(0,d)>>>0,a[32]="0x"+c.substr(d,8)>>>0):(d=c.length,b[33]=0,a[33]=0,b[32]=0,a[32]="0x"+c.substr(0,d)>>>0)};this.inter_ddivu=function(a,b,c){var d;var e="0x0"+String(dec2hex(b[this.rs(c)]))+String(dec2hex(a[this.rs(c)]));c="0x0"+String(dec2hex(b[this.rt(c)]))+
String(dec2hex(a[this.rt(c)]));e=new BigInt(e);c=new BigInt(c);if(d=bigint_div(e,c)){var g=d.toStringBase(16);"-"===g[0]&&alert("ddivu:"+g);8<g.length?(d=g.length-8,b[32]="0x"+g.substr(0,d)>>>0,a[32]="0x"+g.substr(d,8)>>>0):(d=g.length,b[32]=0,a[32]="0x"+g.substr(0,d)>>>0)}else a[32]=0,b[32]=0;d=bigint_mod(e,c);g=d.toStringBase(16);8<g.length?(d=g.length-8,b[33]="0x"+g.substr(0,d)>>>0,a[33]="0x"+g.substr(d,8)>>>0):(d=g.length,b[33]=0,a[33]="0x"+g.substr(0,d)>>>0)};this.inter_r4300i_C_cond_fmt_s=function(a,
b,c){var d=a&1;var e=a>>1&1;var g=a>>2&1;var m=a>>3&1;var n=c[this.FS32ArrayView(a)];c=c[this.FT32ArrayView(a)];if(isNaN(n)||isNaN(c)){if(n=a=!1,c=!0,0!==m)return}else a=n<c,n=n===c,c=!1;b[31]&=~consts.COP1_CONDITION_BIT;if(d&&c||e&&n||g&&a)b[31]|=consts.COP1_CONDITION_BIT};this.inter_r4300i_C_cond_fmt_d=function(a,b,c){var d=a&1;var e=a>>1&1;var g=a>>2&1;var m=a>>3&1;var n=c[this.FS64ArrayView(a)];c=c[this.FT64ArrayView(a)];if(isNaN(n)||isNaN(c)){if(n=a=!1,c=!0,0!==m)return}else a=n<c,n=n===c,c=
!1;b[31]&=~consts.COP1_CONDITION_BIT;if(d&&c||e&&n||g&&a)b[31]|=consts.COP1_CONDITION_BIT};this.writeTLBEntry=function(a,b){var c=b[consts.ENTRYLO0]&b[consts.ENTRYLO1]&consts.TLBLO_G;a.pageMask=b[consts.PAGEMASK]>>>0;a.entryLo1=(b[consts.ENTRYLO1]|c)>>>0;a.entryLo0=(b[consts.ENTRYLO0]|c)>>>0;a.myHiMask=(~a.pageMask>>>0&consts.TLBHI_VPN2MASK)>>>0;a.entryHi=(b[consts.ENTRYHI]>>>0&~b[consts.PAGEMASK]>>>0)>>>0;switch(a.pageMask){case 0:a.loCompare=4096;break;case 24576:a.loCompare=16384;break;case 122880:a.loCompare=
65536;break;case 516096:a.loCompare=262144;break;case 2088960:a.loCompare=1048576;break;case 8380416:a.loCompare=4194304;break;case 33546240:a.loCompare=16777216;break;default:console.log("ERROR: tlbwi - invalid page size"+a.pageMask)}this.newtlb=!0};this.buildTLBHelper=function(a,b,c,h,k){var d=a>>>12;b>>>=12;if(!0===k)for(;d<b;)this.core.memory.t[d]=(d&131071)>>>4,d++;else for(h=(2147483648|c<<6>>>0&h>>>1)>>>0;d<b;)c=h+(d<<12)-a&536870911,this.core.memory.t[d]=c>>>16,d++};this.buildTLB=function(a,
b){var c=(a.entryHi&4294967040)>>>0;var d=c+a.loCompare>>>0;var e=c+2*a.loCompare>>>0;this.buildTLBHelper(c,d,a.entryLo0,a.myHiMask,b);this.buildTLBHelper(d,e,a.entryLo1,a.myHiMask,b)};this.refreshTLB=function(a,b){1===a.valid&&this.buildTLB(a,!0);this.writeTLBEntry(a,b);a.valid=0;if(b[consts.ENTRYLO1]&consts.TLBLO_V||b[consts.ENTRYLO0]&consts.TLBLO_V)a.valid=1;1===a.valid&&this.buildTLB(a)};this.inter_tlbwi=function(a,b,c){0>a||31<a?console.log("ERROR: tlbwi received an invalid index=%08X",a):this.refreshTLB(b[a],
c)};this.inter_tlbp=function(a,b){var c;b[consts.INDEX]|=2147483648;for(c=0;31>c;){if((a[c].entryHi&a[c].myHiMask)===(b[consts.ENTRYHI]&a[c].myHiMask)&&(a[c].entryLo0&consts.TLBLO_G&a[c].entryLo1||(a[c].entryHi&consts.TLBHI_PIDMASK)===(b[consts.ENTRYHI]&consts.TLBHI_PIDMASK))){b[consts.INDEX]=c;break}c++}};this.inter_tlbr=function(a,b){var c=b[consts.INDEX]&2147483647;0>c||31<c?console.log("ERROR: tlbr received an invalid index=%08X",c):(b[consts.PAGEMASK]=a[c].pageMask,b[consts.ENTRYHI]=a[c].entryHi,
b[consts.ENTRYHI]&=~a[c].pageMask>>>0,b[consts.ENTRYLO1]=a[c].entryLo1,b[consts.ENTRYLO0]=a[c].entryLo0)};return this};a.dec2hex=function(a){var b;for(b="0123456789ABCDEF".substr(a&15,1);a>>=4,a&=268435455,b="0123456789ABCDEF".substr(a&15,1)+b,15<a;);return b}}).call(this);(function(){C1964jsEmulator.prototype.initOpcodeMap=function(){this.CPU_Instruction=[this.instr,this.REGIMM_instr,this.r4300i_j,this.r4300i_jal,this.r4300i_beq,this.r4300i_bne,this.r4300i_blez,this.r4300i_bgtz,this.r4300i_addi,this.r4300i_addiu,this.r4300i_slti,this.r4300i_sltiu,this.r4300i_andi,this.r4300i_ori,this.r4300i_xori,this.r4300i_lui,this.COP0_instr,this.COP1_instr,this.UNUSED,this.UNUSED,this.r4300i_beql,this.r4300i_bnel,this.r4300i_blezl,this.r4300i_bgtzl,this.r4300i_daddi,this.r4300i_daddiu,
this.r4300i_ldl,this.r4300i_ldr,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_lb,this.r4300i_lh,this.r4300i_lwl,this.r4300i_lw,this.r4300i_lbu,this.r4300i_lhu,this.r4300i_lwr,this.r4300i_lwu,this.r4300i_sb,this.r4300i_sh,this.r4300i_swl,this.r4300i_sw,this.r4300i_sdl,this.r4300i_sdr,this.r4300i_swr,this.r4300i_cache,this.r4300i_ll,this.r4300i_lwc1,this.UNUSED,this.UNUSED,this.r4300i_lld,this.r4300i_ldc1,this.UNUSED,this.r4300i_ld,this.r4300i_sc,this.r4300i_swc1,this.UNUSED,this.UNUSED,
this.r4300i_scd,this.r4300i_sdc1,this.UNUSED,this.r4300i_sd];this.r4300i_Instruction=[this.r4300i_sll,this.UNUSED,this.r4300i_srl,this.r4300i_sra,this.r4300i_sllv,this.UNUSED,this.r4300i_srlv,this.r4300i_srav,this.r4300i_jr,this.r4300i_jalr,this.UNUSED,this.UNUSED,this.r4300i_syscall,this.r4300i_break,this.UNUSED,this.r4300i_sync,this.r4300i_mfhi,this.r4300i_mthi,this.r4300i_mflo,this.r4300i_mtlo,this.r4300i_dsllv,this.UNUSED,this.r4300i_dsrlv,this.r4300i_dsrav,this.r4300i_mult,this.r4300i_multu,
this.r4300i_div,this.r4300i_divu,this.r4300i_dmult,this.r4300i_dmultu,this.r4300i_ddiv,this.r4300i_ddivu,this.r4300i_add,this.r4300i_addu,this.r4300i_sub,this.r4300i_subu,this.r4300i_and,this.r4300i_or,this.r4300i_xor,this.r4300i_nor,this.UNUSED,this.UNUSED,this.r4300i_slt,this.r4300i_sltu,this.r4300i_dadd,this.r4300i_daddu,this.r4300i_dsub,this.r4300i_dsubu,this.r4300i_tge,this.r4300i_tgeu,this.r4300i_tlt,this.r4300i_tltu,this.r4300i_teq,this.UNUSED,this.r4300i_tne,this.UNUSED,this.r4300i_dsll,this.UNUSED,
this.r4300i_dsrl,this.r4300i_dsra,this.r4300i_dsll32,this.UNUSED,this.r4300i_dsrl32,this.r4300i_dsra32];this.REGIMM_Instruction=[this.r4300i_bltz,this.r4300i_bgez,this.r4300i_bltzl,this.r4300i_bgezl,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_tgei,this.r4300i_tgeiu,this.r4300i_tlti,this.r4300i_tltiu,this.r4300i_teqi,this.UNUSED,this.r4300i_tnei,this.UNUSED,this.r4300i_bltzal,this.r4300i_bgezal,this.r4300i_bltzall,this.r4300i_bgezall,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED];this.COP0_Instruction=[this.r4300i_COP0_mfc0,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP0_mtc0,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.TLB_instr,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED];this.TLB_Instruction=[this.UNUSED,this.r4300i_COP0_tlbr,this.r4300i_COP0_tlbwi,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP0_tlbwr,this.UNUSED,this.r4300i_COP0_tlbp,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP0_eret,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED];this.COP1_Instruction=[this.r4300i_COP1_mfc1,this.r4300i_COP1_dmfc1,this.r4300i_COP1_cfc1,this.UNUSED,this.r4300i_COP1_mtc1,this.r4300i_COP1_dmtc1,
this.r4300i_COP1_ctc1,this.UNUSED,this.COP1_BC_instr,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.COP1_S_instr,this.COP1_D_instr,this.UNUSED,this.UNUSED,this.COP1_W_instr,this.COP1_L_instr,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED];this.COP1_BC_Instruction=[this.r4300i_COP1_bc1f,this.r4300i_COP1_bc1t,this.r4300i_COP1_bc1fl,this.r4300i_COP1_bc1tl,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED];this.COP1_S_Instruction=[this.r4300i_COP1_add_s,this.r4300i_COP1_sub_s,this.r4300i_COP1_mul_s,this.r4300i_COP1_div_s,this.r4300i_COP1_sqrt_s,this.r4300i_COP1_abs_s,this.r4300i_COP1_mov_s,this.r4300i_COP1_neg_s,
this.r4300i_COP1_roundl_s,this.r4300i_COP1_truncl_s,this.r4300i_COP1_ceill_s,this.r4300i_COP1_floorl_s,this.r4300i_COP1_roundw_s,this.r4300i_COP1_truncw_s,this.r4300i_COP1_ceilw_s,this.r4300i_COP1_floorw_s,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvtd_s,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvtw_s,this.r4300i_COP1_cvtl_s,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_C_F_S,this.r4300i_C_UN_S,this.r4300i_C_EQ_S,this.r4300i_C_UEQ_S,this.r4300i_C_OLT_S,this.r4300i_C_ULT_S,this.r4300i_C_OLE_S,this.r4300i_C_ULE_S,this.r4300i_C_SF_S,this.r4300i_C_NGLE_S,this.r4300i_C_SEQ_S,this.r4300i_C_NGL_S,this.r4300i_C_LT_S,this.r4300i_C_NGE_S,this.r4300i_C_LE_S,this.r4300i_C_NGT_S];this.COP1_D_Instruction=[this.r4300i_COP1_add_d,this.r4300i_COP1_sub_d,
this.r4300i_COP1_mul_d,this.r4300i_COP1_div_d,this.r4300i_COP1_sqrt_d,this.r4300i_COP1_abs_d,this.r4300i_COP1_mov_d,this.r4300i_COP1_neg_d,this.r4300i_COP1_roundl_d,this.r4300i_COP1_truncl_d,this.r4300i_COP1_ceill_d,this.r4300i_COP1_floorl_d,this.r4300i_COP1_roundw_d,this.r4300i_COP1_truncw_d,this.r4300i_COP1_ceilw_d,this.r4300i_COP1_floorw_d,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvts_d,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvtw_d,this.r4300i_COP1_cvtl_d,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_C_F_D,this.r4300i_C_UN_D,this.r4300i_C_EQ_D,this.r4300i_C_UEQ_D,this.r4300i_C_OLT_D,this.r4300i_C_ULT_D,this.r4300i_C_OLE_D,this.r4300i_C_ULE_D,this.r4300i_C_SF_D,this.r4300i_C_NGLE_D,this.r4300i_C_SEQ_D,this.r4300i_C_NGL_D,this.r4300i_C_LT_D,
this.r4300i_C_NGE_D,this.r4300i_C_LE_D,this.r4300i_C_NGT_D];this.COP1_W_Instruction=[this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvts_w,this.r4300i_COP1_cvtd_w,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED];this.COP1_L_Instruction=[this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.r4300i_COP1_cvts_l,this.r4300i_COP1_cvtd_l,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,
this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED,this.UNUSED]};C1964jsEmulator.prototype.CPU_instruction=function(a,b){return this.CPU_Instruction[a>>26&63].call(this,a,b)};C1964jsEmulator.prototype.instr=function(a,b){return this.r4300i_Instruction[this.helpers.fn(a)].call(this,a,b)};C1964jsEmulator.prototype.REGIMM_instr=function(a,b){return this.REGIMM_Instruction[this.helpers.rt(a)].call(this,
a,b)};C1964jsEmulator.prototype.COP0_instr=function(a,b){return this.COP0_Instruction[this.helpers.rs(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_instr=function(a,b){return this.COP1_Instruction[this.helpers.rs(a)].call(this,a,b)};C1964jsEmulator.prototype.TLB_instr=function(a,b){return this.TLB_Instruction[this.helpers.fn(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_BC_instr=function(a,b){return this.COP1_BC_Instruction[this.helpers.rt(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_S_instr=
function(a,b){return this.COP1_S_Instruction[this.helpers.fn(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_D_instr=function(a,b){return this.COP1_D_Instruction[this.helpers.fn(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_W_instr=function(a,b){return this.COP1_W_Instruction[this.helpers.fn(a)].call(this,a,b)};C1964jsEmulator.prototype.COP1_L_instr=function(a,b){return this.COP1_L_Instruction[this.helpers.fn(a)].call(this,a,b)}}).call(this);(function(){C1964jsEmulator.prototype.getTVSystem=function(a){switch(a){case 0:this.log("NTSC 0");a=this.TV_SYSTEM_NTSC;break;case 55:this.log("NTSC 7");a=this.TV_SYSTEM_NTSC;break;case 65:this.log("NTSC 0x41");a=this.TV_SYSTEM_NTSC;break;case 68:this.log("PAL (Germany)");a=this.TV_SYSTEM_PAL;break;case 69:this.log("NTSC (United States)");a=this.TV_SYSTEM_NTSC;break;case 70:this.log("PAL (France)");a=this.TV_SYSTEM_PAL;break;case "I":this.log("PAL (Italy)");a=this.TV_SYSTEM_PAL;break;case 74:this.log("NTSC (Japan)");
a=this.TV_SYSTEM_NTSC;break;case 80:this.log("PAL (Europe)");a=this.TV_SYSTEM_PAL;break;case 83:this.log("PAL (Spain)");a=this.TV_SYSTEM_PAL;break;case 85:this.log("PAL (Australia)");a=this.TV_SYSTEM_PAL;break;case 88:this.log("PAL (X)");a=this.TV_SYSTEM_PAL;break;case 89:this.log("PAL (Y Australia)");a=this.TV_SYSTEM_PAL;break;case 32:case 33:case 56:case 112:this.log("PAL 0x"+dec2hex(a));a=this.TV_SYSTEM_PAL;break;default:this.log("Unknown TV System: "+dec2hex(a)+". Using PAL."),a=this.TV_SYSTEM_PAL}return a};
C1964jsEmulator.prototype.getBootCode=function(){var a,b;var c=a=0;for(b={};4032>c;)a+=this.memory.romUint8Array[64+c],c+=1;switch(a){case 211495:case 213534:this.log("Using CIC-NUS-6101 for starfox\n");b.cic=63;b.rdramSizeAddress=792;break;case 213060:this.log("Using CIC-NUS-6102 for mario\n");b.cic=63;b.rdramSizeAddress=792;break;case 219088:this.log("Using CIC-NUS-6103 for Banjo\n");b.cic=120;b.rdramSizeAddress=792;break;case 293505:this.log("Using CIC-NUS-6105 for Zelda\n");b.cic=145;b.rdramSizeAddress=
1008;break;case 225740:this.log("Using CIC-NUS-6106 for F-Zero/Yoshi Story\n");b.cic=133;b.rdramSizeAddress=792;break;case 213961:this.log("Using Boot Code for F1 World Grand Prix\n");b.cic=133;b.rdramSizeAddress=1008;break;default:this.log("Unknown boot code, using Mario boot code instead"),b.cic=63,b.rdramSizeAddress=792}return b}}).call(this);goog.math={};goog.math.Long=function(a,b){this.low_=a|0;this.high_=b|0};goog.math.Long.IntCache_={};goog.math.Long.fromInt=function(a){if(-128<=a&&128>a){var b=goog.math.Long.IntCache_[a];if(b)return b}b=new goog.math.Long(a|0,0>a?-1:0);-128<=a&&128>a&&(goog.math.Long.IntCache_[a]=b);return b};
goog.math.Long.fromNumber=function(a){return isNaN(a)||!isFinite(a)?goog.math.Long.ZERO:a<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.MIN_VALUE:a+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.MAX_VALUE:0>a?goog.math.Long.fromNumber(-a).negate():new goog.math.Long(a%goog.math.Long.TWO_PWR_32_DBL_|0,a/goog.math.Long.TWO_PWR_32_DBL_|0)};goog.math.Long.fromBits=function(a,b){return new goog.math.Long(a,b)};
goog.math.Long.fromString=function(a,b){if(0==a.length)throw Error("number format error: empty string");b=b||10;if(2>b||36<b)throw Error("radix out of range: "+b);if("-"==a.charAt(0))return goog.math.Long.fromString(a.substring(1),b).negate();if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);for(var c=goog.math.Long.fromNumber(Math.pow(b,8)),d=goog.math.Long.ZERO,e=0;e<a.length;e+=8){var g=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+g),b);8>g?(g=goog.math.Long.fromNumber(Math.pow(b,
g)),d=d.multiply(g).add(goog.math.Long.fromNumber(h))):(d=d.multiply(c),d=d.add(goog.math.Long.fromNumber(h)))}return d};goog.math.Long.TWO_PWR_16_DBL_=65536;goog.math.Long.TWO_PWR_24_DBL_=16777216;goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_;goog.math.Long.TWO_PWR_31_DBL_=goog.math.Long.TWO_PWR_32_DBL_/2;goog.math.Long.TWO_PWR_48_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_16_DBL_;
goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_;goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2;goog.math.Long.ZERO=goog.math.Long.fromInt(0);goog.math.Long.ONE=goog.math.Long.fromInt(1);goog.math.Long.NEG_ONE=goog.math.Long.fromInt(-1);goog.math.Long.MAX_VALUE=goog.math.Long.fromBits(-1,2147483647);goog.math.Long.MIN_VALUE=goog.math.Long.fromBits(0,-2147483648);goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(16777216);
goog.math.Long.prototype.toInt=function(){return this.low_};goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};
goog.math.Long.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.MIN_VALUE)){var b=goog.math.Long.fromNumber(a),c=this.div(b);b=c.multiply(b).subtract(this);return c.toString(a)+b.toInt().toString(a)}return"-"+this.negate().toString(a)}c=goog.math.Long.fromNumber(Math.pow(a,6));b=this;for(var d="";;){var e=b.div(c),g=b.subtract(e.multiply(c)).toInt().toString(a);b=e;if(b.isZero())return g+
d;for(;6>g.length;)g="0"+g;d=""+g+d}};goog.math.Long.prototype.getHighBits=function(){return this.high_};goog.math.Long.prototype.getLowBits=function(){return this.low_};goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_};
goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var a=0!=this.high_?this.high_:this.low_,b=31;0<b&&0==(a&1<<b);b--);return 0!=this.high_?b+33:b+1};goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_};goog.math.Long.prototype.isNegative=function(){return 0>this.high_};goog.math.Long.prototype.isOdd=function(){return 1==(this.low_&1)};
goog.math.Long.prototype.equals=function(a){return this.high_==a.high_&&this.low_==a.low_};goog.math.Long.prototype.notEquals=function(a){return this.high_!=a.high_||this.low_!=a.low_};goog.math.Long.prototype.lessThan=function(a){return 0>this.compare(a)};goog.math.Long.prototype.lessThanOrEqual=function(a){return 0>=this.compare(a)};goog.math.Long.prototype.greaterThan=function(a){return 0<this.compare(a)};goog.math.Long.prototype.greaterThanOrEqual=function(a){return 0<=this.compare(a)};
goog.math.Long.prototype.compare=function(a){if(this.equals(a))return 0;var b=this.isNegative(),c=a.isNegative();return b&&!c?-1:!b&&c?1:this.subtract(a).isNegative()?-1:1};goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.MIN_VALUE)?goog.math.Long.MIN_VALUE:this.not().add(goog.math.Long.ONE)};
goog.math.Long.prototype.add=function(a){var b=this.high_>>>16,c=this.high_&65535,d=this.low_>>>16,e=a.high_>>>16,g=a.high_&65535,h=a.low_>>>16;a=(this.low_&65535)+(a.low_&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+g;b=(d>>>16)+(b+e)&65535;return goog.math.Long.fromBits((h&65535)<<16|a&65535,b<<16|d&65535)};goog.math.Long.prototype.subtract=function(a){return this.add(a.negate())};
goog.math.Long.prototype.multiply=function(a){if(this.isZero()||a.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE))return a.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(a.equals(goog.math.Long.MIN_VALUE))return this.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(this.isNegative())return a.isNegative()?this.negate().multiply(a.negate()):this.negate().multiply(a).negate();if(a.isNegative())return this.multiply(a.negate()).negate();if(this.lessThan(goog.math.Long.TWO_PWR_24_)&&
a.lessThan(goog.math.Long.TWO_PWR_24_))return goog.math.Long.fromNumber(this.toNumber()*a.toNumber());var b=this.high_>>>16,c=this.high_&65535,d=this.low_>>>16,e=this.low_&65535,g=a.high_>>>16,h=a.high_&65535,k=a.low_>>>16;a=a.low_&65535;var l=e*a;var m=(l>>>16)+d*a;var n=m>>>16;m=(m&65535)+e*k;n+=m>>>16;n+=c*a;var p=n>>>16;n=(n&65535)+d*k;p+=n>>>16;n=(n&65535)+e*h;p=p+(n>>>16)+(b*a+c*k+d*h+e*g)&65535;return goog.math.Long.fromBits((m&65535)<<16|l&65535,p<<16|n&65535)};
goog.math.Long.prototype.div=function(a){if(a.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE)){if(a.equals(goog.math.Long.ONE)||a.equals(goog.math.Long.NEG_ONE))return goog.math.Long.MIN_VALUE;if(a.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ONE;var b=this.shiftRight(1).div(a).shiftLeft(1);if(b.equals(goog.math.Long.ZERO))return a.isNegative()?goog.math.Long.ONE:goog.math.Long.NEG_ONE;var c=this.subtract(a.multiply(b));
return b.add(c.div(a))}if(a.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ZERO;if(this.isNegative())return a.isNegative()?this.negate().div(a.negate()):this.negate().div(a).negate();if(a.isNegative())return this.div(a.negate()).negate();var d=goog.math.Long.ZERO;for(c=this;c.greaterThanOrEqual(a);){b=Math.max(1,Math.floor(c.toNumber()/a.toNumber()));var e=Math.ceil(Math.log(b)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var g=goog.math.Long.fromNumber(b),h=g.multiply(a);h.isNegative()||h.greaterThan(c);)b-=
e,g=goog.math.Long.fromNumber(b),h=g.multiply(a);g.isZero()&&(g=goog.math.Long.ONE);d=d.add(g);c=c.subtract(h)}return d};goog.math.Long.prototype.modulo=function(a){return this.subtract(this.div(a).multiply(a))};goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)};goog.math.Long.prototype.and=function(a){return goog.math.Long.fromBits(this.low_&a.low_,this.high_&a.high_)};
goog.math.Long.prototype.or=function(a){return goog.math.Long.fromBits(this.low_|a.low_,this.high_|a.high_)};goog.math.Long.prototype.xor=function(a){return goog.math.Long.fromBits(this.low_^a.low_,this.high_^a.high_)};goog.math.Long.prototype.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.low_;return 32>a?goog.math.Long.fromBits(b<<a,this.high_<<a|b>>>32-a):goog.math.Long.fromBits(0,b<<a-32)};
goog.math.Long.prototype.shiftRight=function(a){a&=63;if(0==a)return this;var b=this.high_;return 32>a?goog.math.Long.fromBits(this.low_>>>a|b<<32-a,b>>a):goog.math.Long.fromBits(b>>a-32,0<=b?0:-1)};goog.math.Long.prototype.shiftRightUnsigned=function(a){a&=63;if(0==a)return this;var b=this.high_;return 32>a?goog.math.Long.fromBits(this.low_>>>a|b<<32-a,b>>>a):32==a?goog.math.Long.fromBits(b,0):goog.math.Long.fromBits(b>>>a-32,0)};(function(){var a=function(a){this.pifUint8Array=a;this.eepromStatusByte=128;this.controlsPresent=Array(4);this.eeprom=new Uint8Array(4096);this.controlsPresent[0]=!0;this.controlsPresent[1]=!1;this.controlsPresent[2]=!1;this.controlsPresent[3]=!1;this.g1964buttons=0;self.onkeydown=this.onKeyDown.bind(this);self.onkeyup=this.onKeyUp.bind(this);this.eepromLoaded=!1;this.eepromName=""};a.prototype.processPif=function(){var a;var c=0;var d=consts.MEMORY_START_PIF_RAM-consts.MEMORY_START_PIF;if(255===
this.pifUint8Array[d]&&255===this.pifUint8Array[d+1]&&255===this.pifUint8Array[d+2]&&255===this.pifUint8Array[d+3])throw Error("todo: decrypt");for(a=0;64>a;){var e=this.pifUint8Array[d+a];if(254===e)break;else if(255!==e&&253!==e&&180!==e&&86!==e&&184!==e)if(0===e)c+=1;else if(4===c){this.processEeprom(d,a);break}else if(4>c){if(!1===this.processController(a,c,d))break;c+=1;a+=e+(this.pifUint8Array[d+a+1]&63)+1}else{log("Device > 4. Device = "+c);break}a+=1}this.pifUint8Array[d+63]=0};a.prototype.processEeprom=
function(a,c){switch(this.pifUint8Array[a+c+2]){case 255:case 0:this.pifUint8Array[a+c+3]=0;this.pifUint8Array[a+c+4]=this.eepromStatusByte;this.pifUint8Array[a+c+5]=0;break;case 4:this.readEeprom(a,c+4,8*this.pifUint8Array[a+c+3]);break;case 5:this.writeEeprom(a,c+4,8*this.pifUint8Array[a+c+3])}return!1};a.prototype.binArrayToJson=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};a.prototype.jsonToArray=function(a){var b,d;var e=new ArrayBuffer(a.length);var g=new Uint8Array(e);
var h=b=0;for(d=a.length;0<=d?b<d:b>d;h=0<=d?++b:--b)g[h]=a.charCodeAt(h);return e};a.prototype.loadEepromFile=function(){var a=localStorage.getItem(this.eepromName);if(null!==a&&!1===this.eepromLoaded)try{if(this.eeprom=new Uint8Array(this.jsonToArray(a)),4096!==this.eeprom.length)throw Error("Failed to load game save");}catch(c){alert("Failed to load game save"),localStorage.removeItem(this.eepromName),this.eeprom=new Uint8Array(4096)}this.eepromLoaded=!0};a.prototype.writeEepromFile=function(){localStorage.setItem(this.eepromName,
this.binArrayToJson(this.eeprom))};a.prototype.readEeprom=function(a,c,d){this.loadEepromFile();this.pifUint8Array[a+c]=this.eeprom[d];this.pifUint8Array[a+c+1]=this.eeprom[d+1];this.pifUint8Array[a+c+2]=this.eeprom[d+2];this.pifUint8Array[a+c+3]=this.eeprom[d+3];this.pifUint8Array[a+c+4]=this.eeprom[d+4];this.pifUint8Array[a+c+5]=this.eeprom[d+5];this.pifUint8Array[a+c+6]=this.eeprom[d+6];this.pifUint8Array[a+c+7]=this.eeprom[d+7]};a.prototype.writeEeprom=function(a,c,d){this.loadEepromFile();this.eeprom[d]=
this.pifUint8Array[a+c];this.eeprom[d+1]=this.pifUint8Array[a+c+1];this.eeprom[d+2]=this.pifUint8Array[a+c+2];this.eeprom[d+3]=this.pifUint8Array[a+c+3];this.eeprom[d+4]=this.pifUint8Array[a+c+4];this.eeprom[d+5]=this.pifUint8Array[a+c+5];this.eeprom[d+6]=this.pifUint8Array[a+c+6];this.eeprom[d+7]=this.pifUint8Array[a+c+7];this.writeEepromFile()};a.prototype.processController=function(a,c,d){if(!1===this.controlsPresent[c])return this.pifUint8Array[d+a+1]|=128,this.pifUint8Array[d+a+3]=0,this.pifUint8Array[d+
a+4]=0,this.pifUint8Array[d+a+5]=0,!0;c=this.pifUint8Array[d+a+2];switch(c){case 255:case 0:this.pifUint8Array[d+a+3]=5;this.pifUint8Array[d+a+4]=0;this.pifUint8Array[d+a+5]=0;break;case 1:c=this.readControllerData();this.pifUint8Array[d+a+3]=c>>24;this.pifUint8Array[d+a+4]=c>>16;this.pifUint8Array[d+a+5]=c>>8;this.pifUint8Array[d+a+6]=c;break;case 2:case 3:return log("todo: read/write controller pak"),!1;default:log("unknown controller command: "+c)}return!0};a.prototype.readControllerData=function(){return this.g1964buttons};
("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsPif=a}).call(this);(function(){var a=function(a){return C1964jsPif.apply(this,arguments)||this};$jscomp.inherits(a,C1964jsPif);a.prototype.processPif=function(){var a;var c=0;var d=consts.MEMORY_START_PIF_RAM-consts.MEMORY_START_PIF;if(255===this.pifUint8Array[d^3]&&255===this.pifUint8Array[d+1^3]&&255===this.pifUint8Array[d+2^3]&&255===this.pifUint8Array[d+3^3])throw Error("todo: decrypt");for(a=0;64>a;){var e=this.pifUint8Array[d+a^3];if(254===e)break;else if(255!==e&&253!==e&&180!==e&&86!==e&&184!==e)if(0===e)c+=
1;else if(4===c){this.processEeprom(d,a);break}else if(4>c){if(!1===this.processController(a,c,d))break;c+=1;a+=e+(this.pifUint8Array[d+a+1^3]&63)+1}else{log("Device > 4. Device = "+c);break}a+=1}this.pifUint8Array[d+63^3]=0};a.prototype.processEeprom=function(a,c){switch(this.pifUint8Array[a+c+2^3]){case 255:case 0:this.pifUint8Array[a+c+3^3]=0;this.pifUint8Array[a+c+4^3]=this.eepromStatusByte;this.pifUint8Array[a+c+5^3]=0;break;case 4:this.readEeprom(a,c+4,8*this.pifUint8Array[a+c+3^3]);break;case 5:this.writeEeprom(a,
c+4,8*this.pifUint8Array[a+c+3^3])}return!1};a.prototype.binArrayToJson=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};a.prototype.jsonToArray=function(a){var b,d;var e=new ArrayBuffer(a.length);var g=new Uint8Array(e);var h=b=0;for(d=a.length;0<=d?b<d:b>d;h=0<=d?++b:--b)g[h]=a.charCodeAt(h);return e};a.prototype.loadEepromFile=function(){var a=localStorage.getItem(this.eepromName);if(null!==a&&!1===this.eepromLoaded)try{if(this.eeprom=new Uint8Array(this.jsonToArray(a)),4096!==
this.eeprom.length)throw Error("Failed to load game save");}catch(c){alert("Failed to load game save"),localStorage.removeItem(this.eepromName),this.eeprom=new Uint8Array(4096)}this.eepromLoaded=!0};a.prototype.writeEepromFile=function(){localStorage.setItem(this.eepromName,this.binArrayToJson(this.eeprom))};a.prototype.readEeprom=function(a,c,d){this.loadEepromFile();this.pifUint8Array[a+c^3]=this.eeprom[d];this.pifUint8Array[a+c+1^3]=this.eeprom[d+1];this.pifUint8Array[a+c+2^3]=this.eeprom[d+2];
this.pifUint8Array[a+c+3^3]=this.eeprom[d+3];this.pifUint8Array[a+c+4^3]=this.eeprom[d+4];this.pifUint8Array[a+c+5^3]=this.eeprom[d+5];this.pifUint8Array[a+c+6^3]=this.eeprom[d+6];this.pifUint8Array[a+c+7^3]=this.eeprom[d+7]};a.prototype.writeEeprom=function(a,c,d){this.loadEepromFile();this.eeprom[d]=this.pifUint8Array[a+c^3];this.eeprom[d+1]=this.pifUint8Array[a+c+1^3];this.eeprom[d+2]=this.pifUint8Array[a+c+2^3];this.eeprom[d+3]=this.pifUint8Array[a+c+3^3];this.eeprom[d+4]=this.pifUint8Array[a+
c+4^3];this.eeprom[d+5]=this.pifUint8Array[a+c+5^3];this.eeprom[d+6]=this.pifUint8Array[a+c+6^3];this.eeprom[d+7]=this.pifUint8Array[a+c+7^3];this.writeEepromFile()};a.prototype.processController=function(a,c,d){if(!1===this.controlsPresent[c])return this.pifUint8Array[d+a+1^3]|=128,this.pifUint8Array[d+a+3^3]=0,this.pifUint8Array[d+a+4^3]=0,this.pifUint8Array[d+a+5^3]=0,!0;c=this.pifUint8Array[d+a+2^3];switch(c){case 255:case 0:this.pifUint8Array[d+a+3^3]=5;this.pifUint8Array[d+a+4^3]=0;this.pifUint8Array[d+
a+5^3]=0;break;case 1:c=this.readControllerData();this.pifUint8Array[d+a+3^3]=c>>24;this.pifUint8Array[d+a+4^3]=c>>16;this.pifUint8Array[d+a+5^3]=c>>8;this.pifUint8Array[d+a+6^3]=c;break;case 2:case 3:return log("todo: read/write controller pak"),!1;default:log("unknown controller command: "+c)}return!0};a.prototype.readControllerData=function(){return this.g1964buttons};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsPifLE=a}).call(this);(function(){C1964jsPif.prototype.onKeyDown=function(a){if(a)switch(a.which){case 40:this.g1964buttons=this.g1964buttons&4294967040|128;break;case 38:this.g1964buttons=this.g1964buttons&4294967040|127;break;case 39:this.g1964buttons=this.g1964buttons&4294902015|32512;break;case 37:this.g1964buttons=this.g1964buttons&4294902015|32768;break;case 13:this.g1964buttons|=268435456;break;case 90:this.g1964buttons|=-2147483648;break;case 83:this.g1964buttons|=262144;break;case 87:this.g1964buttons|=524288;
break;case 68:this.g1964buttons|=65536;break;case 65:this.g1964buttons|=131072;break;case 88:this.g1964buttons|=1073741824;break;case 73:this.g1964buttons|=134217728;break;case 74:this.g1964buttons|=33554432;break;case 75:this.g1964buttons|=67108864;break;case 76:this.g1964buttons|=16777216;break;case 32:this.g1964buttons|=536870912;break;case 49:this.g1964buttons|=8388608;break;case 48:this.g1964buttons|=4194304}};C1964jsPif.prototype.onKeyUp=function(a){if(a)switch(a.which){case 40:this.g1964buttons&=
-129;break;case 38:this.g1964buttons&=-128;break;case 39:this.g1964buttons&=-32513;break;case 37:this.g1964buttons&=-32769;break;case 13:this.g1964buttons&=-268435457;break;case 90:this.g1964buttons&=2147483647;break;case 83:this.g1964buttons&=-262145;break;case 87:this.g1964buttons&=-524289;break;case 68:this.g1964buttons&=-65537;break;case 65:this.g1964buttons&=-131073;break;case 88:this.g1964buttons&=-1073741825;break;case 73:this.g1964buttons&=-134217729;break;case 74:this.g1964buttons&=-33554433;
break;case 75:this.g1964buttons&=-67108865;break;case 76:this.g1964buttons&=-16777217;break;case 32:this.g1964buttons&=-536870913;break;case 49:this.g1964buttons&=-8388609;break;case 48:this.g1964buttons&=-4194305;break;case 27:toggleUi()}}}).call(this);(function(){var a=function(a){var b=this;this.core=a;this.rom=this.romUint8Array=void 0;this.ramArrayBuffer=new ArrayBuffer(8388608);this.u8=new Uint8Array(this.ramArrayBuffer);this.spMemUint8ArrayBuffer=new ArrayBuffer(65536);this.spMemUint8Array=new Uint8Array(this.spMemUint8ArrayBuffer);this.spReg1Uint8ArrayBuffer=new ArrayBuffer(65536);this.spReg1Uint8Array=new Uint8Array(this.spReg1Uint8ArrayBuffer);this.spReg2Uint8ArrayBuffer=new ArrayBuffer(65536);this.spReg2Uint8Array=new Uint8Array(this.spReg2Uint8ArrayBuffer);
this.dpcUint8ArrayBuffer=new ArrayBuffer(65536);this.dpcUint8Array=new Uint8Array(this.dpcUint8ArrayBuffer);this.dpsUint8ArrayBuffer=new ArrayBuffer(65536);this.dpsUint8Array=new Uint8Array(this.dpsUint8ArrayBuffer);this.miUint8ArrayBuffer=new ArrayBuffer(65536);this.miUint8Array=new Uint8Array(this.miUint8ArrayBuffer);this.viUint8ArrayBuffer=new ArrayBuffer(65536);this.viUint8Array=new Uint8Array(this.viUint8ArrayBuffer);this.aiUint8ArrayBuffer=new ArrayBuffer(65536);this.aiUint8Array=new Uint8Array(this.aiUint8ArrayBuffer);
this.piUint8ArrayBuffer=new ArrayBuffer(65536);this.piUint8Array=new Uint8Array(this.piUint8ArrayBuffer);this.siUint8ArrayBuffer=new ArrayBuffer(65536);this.siUint8Array=new Uint8Array(this.siUint8ArrayBuffer);this.c2a1Uint8ArrayBuffer=new ArrayBuffer(65536);this.c2a1Uint8Array=new Uint8Array(this.c2a1Uint8ArrayBuffer);this.c1a1Uint8ArrayBuffer=new ArrayBuffer(65536);this.c1a1Uint8Array=new Uint8Array(this.c1a1Uint8ArrayBuffer);this.c2a2Uint8ArrayBuffer=new ArrayBuffer(65536);this.c2a2Uint8Array=
new Uint8Array(this.c2a2Uint8ArrayBuffer);this.c1a3Uint8ArrayBuffer=new ArrayBuffer(65536);this.c1a3Uint8Array=new Uint8Array(this.c1a3Uint8ArrayBuffer);this.riUint8ArrayBuffer=new ArrayBuffer(65536);this.riUint8Array=new Uint8Array(this.riUint8ArrayBuffer);this.pifUint8ArrayBuffer=new ArrayBuffer(65536);this.pifUint8Array=new Uint8Array(this.pifUint8ArrayBuffer);this.gioUint8ArrayBuffer=new ArrayBuffer(65536);this.gioUint8Array=new Uint8Array(this.gioUint8ArrayBuffer);this.ramRegs0Uint8ArrayBuffer=
new ArrayBuffer(65536);this.ramRegs0Uint8Array=new Uint8Array(this.ramRegs0Uint8ArrayBuffer);this.ramRegs4Uint8ArrayBuffer=new ArrayBuffer(65536);this.ramRegs4Uint8Array=new Uint8Array(this.ramRegs4Uint8ArrayBuffer);this.ramRegs8Uint8ArrayBuffer=new ArrayBuffer(65536);this.ramRegs8Uint8Array=new Uint8Array(this.ramRegs8Uint8ArrayBuffer);this.dummyReadWriteUint8ArrayBuffer=new ArrayBuffer(65536);this.dummyReadWriteUint8Array=new Uint8Array(this.dummyReadWriteUint8ArrayBuffer);this.lengthy=50325;this.LB=
Array.apply(this.readDummy8,Array(this.lengthy));this.LH=Array.apply(this.readDummy16,Array(this.lengthy));this.LW=Array.apply(this.readDummy32,Array(this.lengthy));this.SB=Array.apply(this.writeDummy8,Array(this.lengthy));this.SH=Array.apply(this.writeDummy16,Array(this.lengthy));this.SW=Array.apply(this.writeDummy32,Array(this.lengthy));this.t=void 0;console.log("lengthy0 = "+this.lengthy);this.readDummy8=function(a){return b.dummyReadWriteUint8Array[a&65532]};this.readDummy16=function(a){a&=65532;
return b.dummyReadWriteUint8Array[a]<<8|b.dummyReadWriteUint8Array[a+1]};this.readDummy32=function(a){a&=65532;return b.dummyReadWriteUint8Array[a]<<24|b.dummyReadWriteUint8Array[a+1]<<16|b.dummyReadWriteUint8Array[a+2]<<8|b.dummyReadWriteUint8Array[a+3]};this.readRdram8=function(a){return b.u8[a]};this.readRdram16=function(a){var d=b.u8;return d[a]<<8|d[a+1]};this.readRdram32=function(a){var d=b.u8;return d[a]<<24|d[a+1]<<16|d[a+2]<<8|d[a+3]};this.readRamRegs0_8=function(a){return b.ramRegs0Uint8Array[a-
66060288]};this.readRamRegs0_16=function(a){a-=66060288;return b.ramRegs0Uint8Array[a]<<8|b.ramRegs0Uint8Array[a+1]};this.readRamRegs0_32=function(a){a-=66060288;return b.ramRegs0Uint8Array[a]<<24|b.ramRegs0Uint8Array[a+1]<<16|b.ramRegs0Uint8Array[a+2]<<8|b.ramRegs0Uint8Array[a+3]};this.readRamRegs4_8=function(a){return b.ramRegs4Uint8Array[a-66076672]};this.readRamRegs4_16=function(a){a-=66076672;return b.ramRegs4Uint8Array[a]<<8|b.ramRegs4Uint8Array[a+1]};this.readRamRegs4_32=function(a){a-=66076672;
return b.ramRegs4Uint8Array[a]<<24|b.ramRegs4Uint8Array[a+1]<<16|b.ramRegs4Uint8Array[a+2]<<8|b.ramRegs4Uint8Array[a+3]};this.readRamRegs8_8=function(a){return b.ramRegs8Uint8Array[a-66584576]};this.readRamRegs8_16=function(a){a-=66584576;return b.ramRegs8Uint8Array[a]<<8|b.ramRegs8Uint8Array[a+1]};this.readRamRegs8_32=function(a){a-=66584576;return b.ramRegs8Uint8Array[a]<<24|b.ramRegs8Uint8Array[a+1]<<16|b.ramRegs8Uint8Array[a+2]<<8|b.ramRegs8Uint8Array[a+3]};this.readSpMem8=function(a){return b.spMemUint8Array[a-
67108864]};this.readSpMem16=function(a){a-=67108864;return b.spMemUint8Array[a]<<8|b.spMemUint8Array[a+1]};this.readSpMem32=function(a){a-=67108864;return b.spMemUint8Array[a]<<24|b.spMemUint8Array[a+1]<<16|b.spMemUint8Array[a+2]<<8|b.spMemUint8Array[a+3]};this.readSpReg1_8=function(a){return b.core.interrupts.readSPReg1(a-67371008)};this.readSpReg1_16=function(a){return b.core.interrupts.readSPReg1(a-67371008)};this.readSpReg1_32=function(a){return b.core.interrupts.readSPReg1(a-67371008)};this.readSpReg2_8=
function(a){return b.spReg2Uint8Array[a-67633152]};this.readSpReg2_16=function(a){a-=67633152;return b.spReg2Uint8Array[a]<<8|b.spReg2Uint8Array[a+1]};this.readSpReg2_32=function(a){a-=67633152;return b.spReg2Uint8Array[a]<<24|b.spReg2Uint8Array[a+1]<<16|b.spReg2Uint8Array[a+2]<<8|b.spReg2Uint8Array[a+3]};this.readDpc8=function(a){return b.dpcUint8Array[a-68157440]};this.readDpc16=function(a){a-=68157440;return b.dpcUint8Array[a]<<8|b.dpcUint8Array[a+1]};this.readDpc32=function(a){a-=68157440;return b.dpcUint8Array[a]<<
24|b.dpcUint8Array[a+1]<<16|b.dpcUint8Array[a+2]<<8|b.dpcUint8Array[a+3]};this.readDps8=function(a){return b.dpsUint8Array[a-69206016]};this.readDps16=function(a){a-=69206016;return b.dpsUint8Array[a]<<8|b.dpsUint8Array[a+1]};this.readDps32=function(a){a-=69206016;return b.dpsUint8Array[a]<<24|b.dpsUint8Array[a+1]<<16|b.dpsUint8Array[a+2]<<8|b.dpsUint8Array[a+3]};this.readMi8=function(a){return b.miUint8Array[a-70254592]};this.readMi16=function(a){a-=70254592;return b.miUint8Array[a]<<8|b.miUint8Array[a+
1]};this.readMi32=function(a){a-=70254592;return b.miUint8Array[a]<<24|b.miUint8Array[a+1]<<16|b.miUint8Array[a+2]<<8|b.miUint8Array[a+3]};this.readVi8=function(a){return b.core.interrupts.readVI(a-71303168)};this.readVi16=function(a){return b.core.interrupts.readVI(a-71303168)};this.readVi32=function(a){return b.core.interrupts.readVI(a-71303168)};this.readAi8=function(a){return b.core.interrupts.readAI(a-72351744)};this.readAi16=function(a){return b.core.interrupts.readAI(a-72351744)};this.readAi32=
function(a){return b.core.interrupts.readAI(a-72351744)};this.readPi8=function(a){return b.piUint8Array[a-73400320]};this.readPi16=function(a){a-=73400320;return b.piUint8Array[a]<<8|b.piUint8Array[a+1]};this.readPi32=function(a){a-=73400320;return b.piUint8Array[a]<<24|b.piUint8Array[a+1]<<16|b.piUint8Array[a+2]<<8|b.piUint8Array[a+3]};this.readSi8=function(a){return b.core.interrupts.readSI(a-75497472)};this.readSi16=function(a){return b.core.interrupts.readSI(a-75497472)};this.readSi32=function(a){return b.core.interrupts.readSI(a-
75497472)};this.readC2A1_8=function(a){return b.c2a1Uint8Array[a-83886080]};this.readC2A1_16=function(a){a-=83886080;return b.c2a1Uint8Array[a]<<8|b.c2a1Uint8Array[a+1]};this.readC2A1_32=function(a){a-=83886080;return b.c2a1Uint8Array[a]<<24|b.c2a1Uint8Array[a+1]<<16|b.c2a1Uint8Array[a+2]<<8|b.c2a1Uint8Array[a+3]};this.readC1A1_8=function(a){return b.c1a1Uint8Array[a-100663296]};this.readC1A1_16=function(a){a-=100663296;return b.c1a1Uint8Array[a]<<8|b.c1a1Uint8Array[a+1]};this.readC1A1_32=function(a){a-=
100663296;return b.c1a1Uint8Array[a]<<24|b.c1a1Uint8Array[a+1]<<16|b.c1a1Uint8Array[a+2]<<8|b.c1a1Uint8Array[a+3]};this.readC2A2_8=function(a){return b.c2a2Uint8Array[a-134217728]};this.readC2A2_16=function(a){a-=134217728;return b.c2a2Uint8Array[a]<<8|b.c2a2Uint8Array[a+1]};this.readC2A2_32=function(a){a-=134217728;return b.c2a2Uint8Array[a]<<24|b.c2a2Uint8Array[a+1]<<16|b.c2a2Uint8Array[a+2]<<8|b.c2a2Uint8Array[a+3]};this.readRom8=function(a){return b.romUint8Array[a-268435456]};this.readRom16=
function(a){a-=268435456;return b.romUint8Array[a]<<8|b.romUint8Array[a+1]};this.readRom32=function(a){a-=268435456;return b.romUint8Array[a]<<24|b.romUint8Array[a+1]<<16|b.romUint8Array[a+2]<<8|b.romUint8Array[a+3]};this.readC1A3_8=function(a){return b.c1a3Uint8Array[a-533725184]};this.readC1A3_16=function(a){a-=533725184;return b.c1a3Uint8Array[a]<<8|b.c1a3Uint8Array[a+1]};this.readC1A3_32=function(a){a-=533725184;return b.c1a3Uint8Array[a]<<24|b.c1a3Uint8Array[a+1]<<16|b.c1a3Uint8Array[a+2]<<8|
b.c1a3Uint8Array[a+3]};this.readRi8=function(a){return b.riUint8Array[a-74448896]};this.readRi16=function(a){a-=74448896;return b.riUint8Array[a]<<8|b.riUint8Array[a+1]};this.readRi32=function(a){a-=74448896;return b.riUint8Array[a]<<24|b.riUint8Array[a+1]<<16|b.riUint8Array[a+2]<<8|b.riUint8Array[a+3]};this.readPif8=function(a){return b.pifUint8Array[a-532676608]};this.readPif16=function(a){a-=532676608;return b.pifUint8Array[a]<<8|b.pifUint8Array[a+1]};this.readPif32=function(a){a-=532676608;return b.pifUint8Array[a]<<
24|b.pifUint8Array[a+1]<<16|b.pifUint8Array[a+2]<<8|b.pifUint8Array[a+3]};this.readGio8=function(a){return b.gioUint8Array[a-402653184]};this.readGio16=function(a){a-=402653184;return b.gioUint8Array[a]<<8|b.gioUint8Array[a+1]};this.readGio32=function(a){a-=402653184;return b.gioUint8Array[a]<<24|b.gioUint8Array[a+1]<<16|b.gioUint8Array[a+2]<<8|b.gioUint8Array[a+3]};this.writeRdram8=function(a,c){b.u8[c]=a};this.writeRdram16=function(a,c){var d=b.u8;d[c]=a>>8;d[c+1]=a};this.writeRdram32=function(a,
c){var d=b.u8;d[c]=a>>24;d[c+1]=a>>16;d[c+2]=a>>8;d[c+3]=a};this.writeSpMem8=function(a,c){b.spMemUint8Array[c-67108864]=a};this.writeSpMem16=function(a,c){c-=67108864;b.spMemUint8Array[c]=a>>8;b.spMemUint8Array[c+1]=a};this.writeSpMem32=function(a,c){c-=67108864;var d=b.spMemUint8Array;d[c]=a>>24;d[c+1]=a>>16;d[c+2]=a>>8;d[c+3]=a};this.writeRi8=function(a,c){b.riUint8Array[c-74448896]=a};this.writeRi16=function(a,c){c-=74448896;b.riUint8Array[c]=a>>8;b.riUint8Array[c+1]=a};this.writeRi32=function(a,
c){c-=74448896;b.riUint8Array[c]=a>>24;b.riUint8Array[c+1]=a>>16;b.riUint8Array[c+2]=a>>8;b.riUint8Array[c+3]=a};this.writeMi8=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};this.writeMi16=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};this.writeMi32=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};this.writeRamRegs8_8=function(a,c){b.ramRegs8Uint8Array[c-66584576]=a};this.writeRamRegs8_16=function(a,c){c-=66584576;b.ramRegs8Uint8Array[c]=a>>8;b.ramRegs8Uint8Array[c+
1]=a};this.writeRamRegs8_32=function(a,c){c-=66584576;b.ramRegs8Uint8Array[c]=a>>24;b.ramRegs8Uint8Array[c+1]=a>>16;b.ramRegs8Uint8Array[c+2]=a>>8;b.ramRegs8Uint8Array[c+3]=a};this.writeRamRegs4_8=function(a,c){b.ramRegs4Uint8Array[c-66076672]=a};this.writeRamRegs4_16=function(a,c){c-=66076672;b.ramRegs4Uint8Array[c]=a>>8;b.ramRegs4Uint8Array[c+1]=a};this.writeRamRegs4_32=function(a,c){c-=66076672;b.ramRegs4Uint8Array[c]=a>>24;b.ramRegs4Uint8Array[c+1]=a>>16;b.ramRegs4Uint8Array[c+2]=a>>8;b.ramRegs4Uint8Array[c+
3]=a};this.writeRamRegs0_8=function(a,c){b.ramRegs0Uint8Array[c-66060288]=a};this.writeRamRegs0_16=function(a,c){c-=66060288;b.ramRegs0Uint8Array[c]=a>>8;b.ramRegs0Uint8Array[c+1]=a};this.writeRamRegs0_32=function(a,c){c-=66060288;b.ramRegs0Uint8Array[c]=a>>24;b.ramRegs0Uint8Array[c+1]=a>>16;b.ramRegs0Uint8Array[c+2]=a>>8;b.ramRegs0Uint8Array[c+3]=a};this.writeSpReg1_8=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-67371008,a,g,h)};this.writeSpReg1_16=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-
67371008,a,g,h)};this.writeSpReg1_32=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-67371008,a,g,h)};this.writePi8=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};this.writePi16=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};this.writePi32=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};this.writeSi8=function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};this.writeSi16=function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};this.writeSi32=
function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};this.writeAi8=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};this.writeAi16=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};this.writeAi32=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};this.writeVi8=function(a,c,g,h){b.core.interrupts.writeVI(c-71303168,a,g,h)};this.writeVi16=function(a,c,g,h){b.core.interrupts.writeVI(c-71303168,a,g,h)};this.writeVi32=function(a,c,g,h){b.core.interrupts.writeVI(c-
71303168,a,g,h)};this.writeSpReg2_8=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};this.writeSpReg2_16=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};this.writeSpReg2_32=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};this.writeDpc8=function(a,c,g,h){b.core.interrupts.writeDPC(c-68157440,a,g,h)};this.writeDpc16=function(a,c,g,h){b.core.interrupts.writeDPC(c-68157440,a,g,h)};this.writeDpc32=function(a,c,g,h){b.core.interrupts.writeDPC(c-68157440,
a,g,h)};this.writeDps8=function(a,c){b.dpsUint8Array[c-69206016]=a};this.writeDps16=function(a,c){c-=69206016;b.dpsUint8Array[c]=a>>8;b.dpsUint8Array[c+1]=a};this.writeDps32=function(a,c){c-=69206016;b.dpsUint8Array[c]=a>>24;b.dpsUint8Array[c+1]=a>>16;b.dpsUint8Array[c+2]=a>>8;b.dpsUint8Array[c+3]=a};this.writeC2A1_8=function(a,c){b.c2a1Uint8Array[c-83886080]=a};this.writeC2A1_16=function(a,c){c-=83886080;b.c2a1Uint8Array[c]=a>>8;b.c2a1Uint8Array[c+1]=a};this.writeC2A1_32=function(a,c){c-=83886080;
b.c2a1Uint8Array[c]=a>>24;b.c2a1Uint8Array[c+1]=a>>16;b.c2a1Uint8Array[c+2]=a>>8;b.c2a1Uint8Array[c+3]=a};this.writeC1A1_8=function(a,c){b.c1a1Uint8Array[c-100663296]=a};this.writeC1A1_16=function(a,c){c-=100663296;b.c1a1Uint8Array[c]=a>>8;b.c1a1Uint8Array[c+1]=a};this.writeC1A1_32=function(a,c){c-=100663296;b.c1a1Uint8Array[c]=a>>24;b.c1a1Uint8Array[c+1]=a>>16;b.c1a1Uint8Array[c+2]=a>>8;b.c1a1Uint8Array[c+3]=a};this.writeC2A2_8=function(a,c){b.c2a2Uint8Array[c-134217728]=a};this.writeC2A2_16=function(a,
c){c-=134217728;b.c2a2Uint8Array[c]=a>>8;b.c2a2Uint8Array[c+1]=a};this.writeC2A2_32=function(a,c){c-=134217728;b.c2a2Uint8Array[c]=a>>24;b.c2a2Uint8Array[c+1]=a>>16;b.c2a2Uint8Array[c+2]=a>>8;b.c2a2Uint8Array[c+3]=a};this.writeRom8=function(a,b){alert("attempt to overwrite rom!")};this.writeRom16=function(a,b){alert("attempt to overwrite rom!")};this.writeRom32=function(a,b){alert("attempt to overwrite rom!")};this.writeC1A3_8=function(a,c){b.c1a3Uint8Array[c-533725184]=a};this.writeC1A3_16=function(a,
c){c-=533725184;b.c1a3Uint8Array[c]=a>>8;b.c1a3Uint8Array[c+1]=a};this.writeC1A3_32=function(a,c){c-=533725184;b.c1a3Uint8Array[c]=a>>24;b.c1a3Uint8Array[c+1]=a>>16;b.c1a3Uint8Array[c+2]=a>>8;b.c1a3Uint8Array[c+3]=a};this.writePif8=function(a,c){b.pifUint8Array[c-532676608]=a};this.writePif16=function(a,c){c-=532676608;b.pifUint8Array[c]=a>>8;b.pifUint8Array[c+1]=a};this.writePif32=function(a,c){c-=532676608;b.pifUint8Array[c]=a>>24;b.pifUint8Array[c+1]=a>>16;b.pifUint8Array[c+2]=a>>8;b.pifUint8Array[c+
3]=a};this.writeGio8=function(a,c){b.gioUint8Array[c-402653184]=a};this.writeGio16=function(a,c){c-=402653184;b.gioUint8Array[c]=a>>8;b.gioUint8Array[c+1]=a};this.writeGio32=function(a,c){c-=402653184;b.gioUint8Array[c]=a>>24;b.gioUint8Array[c+1]=a>>16;b.gioUint8Array[c+2]=a>>8;b.gioUint8Array[c+3]=a};this.writeDummy8=function(a,c){b.dummyReadWriteUint8Array[c&65532]=a};this.writeDummy16=function(a,c){c&=65532;b.dummyReadWriteUint8Array[c]=a>>8;b.dummyReadWriteUint8Array[c+1]=a};this.writeDummy32=
function(a,c){c&=65532;b.dummyReadWriteUint8Array[c]=a>>24;b.dummyReadWriteUint8Array[c+1]=a>>16;b.dummyReadWriteUint8Array[c+2]=a>>8;b.dummyReadWriteUint8Array[c+3]=a};this.virtualToPhysical=function(a){return b.t[a>>>12]<<18>>>2|a&65535};this.readTLB8=function(a){a=b.virtualToPhysical(a);var c=b.LB[a>>>16];c===b.readTLB8&&(c=b.readDummy8);return c(a)};this.writeTLB8=function(a,c,g,h){c=b.virtualToPhysical(c);var d=b.SB[c>>>16];d===b.writeTLB8&&(d=b.writeDummy8);d(a,c,g,h)};this.readTLB16=function(a){a=
b.virtualToPhysical(a);var c=b.LH[a>>>16];c===b.readTLB16&&(c=b.readDummy16);return c(a)};this.writeTLB16=function(a,c,g,h){c=b.virtualToPhysical(c);var d=b.SH[c>>>16];d===b.writeTLB16&&(d=b.writeDummy16);d(a,c,g,h)};this.readTLB32=function(a){a=b.virtualToPhysical(a);var c=b.LW[a>>>16];c===b.readTLB32&&(c=b.readDummy32);return c(a)};this.writeTLB32=function(a,c,g,h){c=b.virtualToPhysical(c);var d=b.SW[c>>>16];d===b.writeTLB32&&(d=b.writeDummy32);d(a,c,g,h)}};a.prototype.initRegions=function(){this.initRegion(0,
2147483648,this.readTLB8,this.writeTLB8,this.readTLB16,this.writeTLB16,this.readTLB32,this.writeTLB32);this.initRegion(2147483648,1073741824,this.readDummy8,this.writeDummy8,this.readDummy16,this.writeDummy16,this.readDummy32,this.writeDummy32);this.initRegion(3221225472,1073741824,this.readTLB8,this.writeTLB8,this.readTLB16,this.writeTLB16,this.readTLB32,this.writeTLB32);this.initRegion(0,this.core.getRdramSize(),this.readRdram8,this.writeRdram8,this.readRdram16,this.writeRdram16,this.readRdram32,
this.writeRdram32);this.initRegion(66076672,65536,this.readRamRegs4_8,this.writeRamRegs4_8,this.readRamRegs4_16,this.writeRamRegs4_16,this.readRamRegs4_32,this.writeRamRegs4_32);this.initRegion(67108864,65536,this.readSpMem8,this.writeSpMem8,this.readSpMem16,this.writeSpMem16,this.readSpMem32,this.writeSpMem32);this.initRegion(67371008,65536,this.readSpReg1_8,this.writeSpReg1_8,this.readSpReg1_16,this.writeSpReg1_16,this.readSpReg1_32,this.writeSpReg1_32);this.initRegion(67633152,65536,this.readSpReg2_8,
this.writeSpReg2_8,this.readSpReg2_16,this.writeSpReg2_16,this.readSpReg2_32,this.writeSpReg2_32);this.initRegion(68157440,65536,this.readDpc8,this.writeDpc8,this.readDpc16,this.writeDpc16,this.readDpc32,this.writeDpc32);this.initRegion(69206016,65536,this.readDps8,this.writeDps8,this.readDps16,this.writeDps16,this.readDps32,this.writeDps32);this.initRegion(70254592,65536,this.readMi8,this.writeMi8,this.readMi16,this.writeMi16,this.readMi32,this.writeMi32);this.initRegion(71303168,65536,this.readVi8,
this.writeVi8,this.readVi16,this.writeVi16,this.readVi32,this.writeVi32);this.initRegion(72351744,65536,this.readAi8,this.writeAi8,this.readAi16,this.writeAi16,this.readAi32,this.writeAi32);this.initRegion(73400320,65536,this.readPi8,this.writePi8,this.readPi16,this.writePi16,this.readPi32,this.writePi32);this.initRegion(75497472,65536,this.readSi8,this.writeSi8,this.readSi16,this.writeSi16,this.readSi32,this.writeSi32);this.initRegion(83886080,65536,this.readC2A1_8,this.writeC2A1_8,this.readC2A1_16,
this.writeC2A1_16,this.readC2A1_32,this.writeC2A1_32);this.initRegion(100663296,65536,this.readC1A1_8,this.writeC1A1_8,this.readC1A1_16,this.writeC1A1_16,this.readC1A1_32,this.writeC1A1_32);this.initRegion(134217728,131072,this.readC2A2_8,this.writeC2A2_8,this.readC2A2_16,this.writeC2A2_16,this.readC2A2_32,this.writeC2A2_32);this.initRegion(268435456,67108864,this.readRom8,this.writeRom8,this.readRom16,this.writeRom16,this.readRom32,this.writeRom32);this.initRegion(533725184,65536,this.readC1A3_8,
this.writeC1A3_8,this.readC1A3_16,this.writeC1A3_16,this.readC1A3_32,this.writeC1A3_32);this.initRegion(74448896,65536,this.readRi8,this.writeRi8,this.readRi16,this.writeRi16,this.readRi32,this.writeRi32);this.initRegion(532676608,65536,this.readPif8,this.writePif8,this.readPif16,this.writePif16,this.readPif32,this.writePif32);this.initRegion(402653184,65536,this.readGio8,this.writeGio8,this.readGio16,this.writeGio16,this.readGio32,this.writeGio32);this.initRegion(66060288,65536,this.readRamRegs0_8,
this.writeRamRegs0_8,this.readRamRegs0_16,this.writeRamRegs0_16,this.readRamRegs0_32,this.writeRamRegs0_32);return this.initRegion(66584576,65536,this.readRamRegs8_8,this.writeRamRegs8_8,this.readRamRegs8_16,this.writeRamRegs8_16,this.readRamRegs8_32,this.writeRamRegs8_32)};a.prototype.initRegion=function(a,c,d,e,g,h,k,l){c=a+c>>>16;for(a>>>=16;a<c;)this.LB[a]=d,this.LH[a]=g,this.LW[a]=k,this.SB[a]=e,this.SH[a]=h,this.SW[a]=l,a++};a.prototype.initts=function(){var a;this.t=new Int16Array(1048576);
for(a=0;1048576>a;)this.t[a]=(a&131071)>>>4,a++};a.prototype.getInt32=function(a,c){return a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]};a.prototype.getUint32=function(a,c){return a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]};a.prototype.setInt32=function(a,c,d){a[c]=d>>24;a[c+1]=d>>16;a[c+2]=d>>8;a[c+3]=d};a.prototype.setUint32=function(a,c,d){a[c]=d>>24;a[c+1]=d>>16;a[c+2]=d>>8;a[c+3]=d};a.prototype.lb=function(a){a=this.virtualToPhysical(a);return this.LB[a>>>16](a)};a.prototype.lh=function(a){a=this.virtualToPhysical(a)&
1073741823;return this.LH[a>>>16](a)};a.prototype.lw=function(a){a=this.virtualToPhysical(a);return this.LW[a>>>16](a)};a.prototype.sw=function(a,c,d,e){c=this.virtualToPhysical(c);this.SW[c>>>16](a,c,d,e)};a.prototype.sb=function(a,c,d,e){c=this.virtualToPhysical(c);this.SB[c>>>16](a,c,d,e)};a.prototype.sh=function(a,c,d,e){c=this.virtualToPhysical(c);this.SH[c>>>16](a,c,d,e)};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsMemory=a}).call(this);(function(){var a=function(a){var b=C1964jsMemory.call(this,a)||this;b.romUint16Array=void 0;b.romUint32Array=void 0;b.u16=new Uint16Array(b.ramArrayBuffer);b.u32=new Uint32Array(b.ramArrayBuffer);b.spMemUint16Array=new Uint16Array(b.spMemUint8ArrayBuffer);b.spReg1Uint16Array=new Uint16Array(b.spReg1Uint8ArrayBuffer);b.spReg2Uint16Array=new Uint16Array(b.spReg2Uint8ArrayBuffer);b.dpcUint16Array=new Uint16Array(b.dpcUint8ArrayBuffer);b.dpsUint16Array=new Uint16Array(b.dpsUint8ArrayBuffer);b.miUint16Array=
new Uint16Array(b.miUint8ArrayBuffer);b.viUint16Array=new Uint16Array(b.viUint8ArrayBuffer);b.aiUint16Array=new Uint16Array(b.aiUint8ArrayBuffer);b.piUint16Array=new Uint16Array(b.piUint8ArrayBuffer);b.siUint16Array=new Uint16Array(b.siUint8ArrayBuffer);b.c2a1Uint16Array=new Uint16Array(b.c2a1Uint8ArrayBuffer);b.c1a1Uint16Array=new Uint16Array(b.c1a1Uint8ArrayBuffer);b.c2a2Uint16Array=new Uint16Array(b.c2a2Uint8ArrayBuffer);b.c1a3Uint16Array=new Uint16Array(b.c1a3Uint8ArrayBuffer);b.riUint16Array=
new Uint16Array(b.riUint8ArrayBuffer);b.pifUint16Array=new Uint16Array(b.pifUint8ArrayBuffer);b.gioUint16Array=new Uint16Array(b.gioUint8ArrayBuffer);b.ramRegs0Uint16Array=new Uint16Array(b.ramRegs0Uint8ArrayBuffer);b.ramRegs4Uint16Array=new Uint16Array(b.ramRegs4Uint8ArrayBuffer);b.ramRegs8Uint16Array=new Uint16Array(b.ramRegs8Uint8ArrayBuffer);b.dummyReadWriteUint16Array=new Uint16Array(b.dummyReadWriteUint8ArrayBuffer);b.spMemUint32Array=new Uint32Array(b.spMemUint8ArrayBuffer);b.spReg1Uint32Array=
new Uint32Array(b.spReg1Uint8ArrayBuffer);b.spReg2Uint32Array=new Uint32Array(b.spReg2Uint8ArrayBuffer);b.dpcUint32Array=new Uint32Array(b.dpcUint8ArrayBuffer);b.dpsUint32Array=new Uint32Array(b.dpsUint8ArrayBuffer);b.miUint32Array=new Uint32Array(b.miUint8ArrayBuffer);b.viUint32Array=new Uint32Array(b.viUint8ArrayBuffer);b.aiUint32Array=new Uint32Array(b.aiUint8ArrayBuffer);b.piUint32Array=new Uint32Array(b.piUint8ArrayBuffer);b.siUint32Array=new Uint32Array(b.siUint8ArrayBuffer);b.c2a1Uint32Array=
new Uint32Array(b.c2a1Uint8ArrayBuffer);b.c1a1Uint32Array=new Uint32Array(b.c1a1Uint8ArrayBuffer);b.c2a2Uint32Array=new Uint32Array(b.c2a2Uint8ArrayBuffer);b.c1a3Uint32Array=new Uint32Array(b.c1a3Uint8ArrayBuffer);b.riUint32Array=new Uint32Array(b.riUint8ArrayBuffer);b.pifUint32Array=new Uint32Array(b.pifUint8ArrayBuffer);b.gioUint32Array=new Uint32Array(b.gioUint8ArrayBuffer);b.ramRegs0Uint32Array=new Uint32Array(b.ramRegs0Uint8ArrayBuffer);b.ramRegs4Uint32Array=new Uint32Array(b.ramRegs4Uint8ArrayBuffer);
b.ramRegs8Uint32Array=new Uint32Array(b.ramRegs8Uint8ArrayBuffer);b.dummyReadWriteUint32Array=new Uint32Array(b.dummyReadWriteUint8ArrayBuffer);b.readDummy8=function(a){return b.dummyReadWriteUint8Array[a&65532^3]};b.readDummy16=function(a){return b.dummyReadWriteUint16Array[(a&65532)>>>1^1]};b.readDummy32=function(a){return b.dummyReadWriteUint32Array[(a&65532)>>>2]};b.readRdram8=function(a){return b.u8[a^3]};b.readRdram16=function(a){return b.u16[a>>>1^1]};b.readRdram32=function(a){return b.u32[a>>>
2]};b.readRamRegs0_8=function(a){return b.ramRegs0Uint8Array[a-66060288^3]};b.readRamRegs0_16=function(a){return b.ramRegs0Uint16Array[a-66060288>>>1^1]};b.readRamRegs0_32=function(a){return b.ramRegs0Uint32Array[a-66060288>>>2]};b.readRamRegs4_8=function(a){return b.ramRegs4Uint8Array[a-66076672^3]};b.readRamRegs4_16=function(a){return b.ramRegs4Uint16Array[a-66076672>>>1^1]};b.readRamRegs4_32=function(a){return b.ramRegs4Uint32Array[a-66076672>>>2]};b.readRamRegs8_8=function(a){return b.ramRegs8Uint8Array[a-
66584576^3]};b.readRamRegs8_16=function(a){return b.ramRegs8Uint16Array[a-66584576>>>1^1]};b.readRamRegs8_32=function(a){return b.ramRegs8Uint32Array[a-66584576>>>2]};b.readSpMem8=function(a){return b.spMemUint8Array[a-67108864^3]};b.readSpMem16=function(a){return b.spMemUint16Array[a-67108864>>>1^1]};b.readSpMem32=function(a){return b.spMemUint32Array[a-67108864>>>2]};b.readSpReg1_8=function(a){return b.core.interrupts.readSPReg1(a-67371008)};b.readSpReg1_16=function(a){return b.core.interrupts.readSPReg1(a-
67371008)};b.readSpReg1_32=function(a){return b.core.interrupts.readSPReg1(a-67371008)};b.readSpReg2_8=function(a){return b.spReg2Uint8Array[a-67633152^3]};b.readSpReg2_16=function(a){return b.spReg2Uint16Array[a-67633152>>>1^1]};b.readSpReg2_32=function(a){return b.spReg2Uint32Array[a-67633152>>>2]};b.readDpc8=function(a){return b.dpcUint8Array[a-68157440^3]};b.readDpc16=function(a){return b.dpcUint16Array[a-68157440>>>1^1]};b.readDpc32=function(a){return b.dpcUint32Array[a-68157440>>>2]};b.readDps8=
function(a){return b.dpsUint8Array[a-69206016^3]};b.readDps16=function(a){return b.dpsUint16Array[a-69206016>>>1^1]};b.readDps32=function(a){return b.dpsUint32Array[a-69206016>>>2]};b.readMi8=function(a){return b.miUint8Array[a-70254592^3]};b.readMi16=function(a){return b.miUint16Array[a-70254592>>>1^1]};b.readMi32=function(a){return b.miUint32Array[a-70254592>>>2]};b.readVi8=function(a){return b.core.interrupts.readVI(a-71303168)};b.readVi16=function(a){return b.core.interrupts.readVI(a-71303168)};
b.readVi32=function(a){return b.core.interrupts.readVI(a-71303168)};b.readAi8=function(a){return b.core.interrupts.readAI(a-72351744)};b.readAi16=function(a){return b.core.interrupts.readAI(a-72351744)};b.readAi32=function(a){return b.core.interrupts.readAI(a-72351744)};b.readPi8=function(a){return b.piUint8Array[a-73400320^3]};b.readPi16=function(a){return b.piUint16Array[a-73400320>>>1^1]};b.readPi32=function(a){return b.piUint32Array[a-73400320>>>2]};b.readSi8=function(a){return b.core.interrupts.readSI(a-
75497472)};b.readSi16=function(a){return b.core.interrupts.readSI(a-75497472)};b.readSi32=function(a){return b.core.interrupts.readSI(a-75497472)};b.readC2A1_8=function(a){return b.c2a1Uint8Array[a-83886080^3]};b.readC2A1_16=function(a){return b.c2a1Uint16Array[a-83886080>>>1^1]};b.readC2A1_32=function(a){return b.c2a1Uint32Array[a-83886080>>>2]};b.readC1A1_8=function(a){return b.c1a1Uint8Array[a-100663296^3]};b.readC1A1_16=function(a){return b.c1a1Uint16Array[a-100663296>>>1^1]};b.readC1A1_32=function(a){return b.c1a1Uint32Array[a-
100663296>>>2]};b.readC2A2_8=function(a){return b.c2a2Uint8Array[a-134217728^3]};b.readC2A2_16=function(a){return b.c2a2Uint16Array[a-134217728>>>1^1]};b.readC2A2_32=function(a){return b.c2a2Uint32Array[a-134217728>>>2]};b.readRom8=function(a){return b.romUint8Array[a-268435456^3]};b.readRom16=function(a){return b.romUint16Array[a-268435456>>>1^1]};b.readRom32=function(a){return b.romUint32Array[a-268435456>>>2]};b.readC1A3_8=function(a){return b.c1a3Uint8Array[a-533725184^3]};b.readC1A3_16=function(a){return b.c1a3Uint16Array[a-
533725184>>>1^1]};b.readC1A3_32=function(a){return b.c1a3Uint32Array[a-533725184>>>2]};b.readRi8=function(a){return b.riUint8Array[a-74448896^3]};b.readRi16=function(a){return b.riUint16Array[a-74448896>>>1^1]};b.readRi32=function(a){return b.riUint32Array[a-74448896>>>2]};b.readPif8=function(a){return b.pifUint8Array[a-532676608^3]};b.readPif16=function(a){return b.pifUint16Array[a-532676608>>>1^1]};b.readPif32=function(a){return b.pifUint32Array[a-532676608>>>2]};b.readGio8=function(a){return b.gioUint8Array[a-
402653184^3]};b.readGio16=function(a){return b.gioUint16Array[a-402653184>>>1^1]};b.readGio32=function(a){return b.gioUint32Array[a-402653184>>>2]};b.writeRdram8=function(a,c){b.u8[c^3]=a};b.writeRdram16=function(a,c){b.u16[c>>>1^1]=a};b.writeRdram32=function(a,c){b.u32[c>>>2]=a};b.writeSpMem8=function(a,c){b.spMemUint8Array[c-67108864^3]=a};b.writeSpMem16=function(a,c){b.spMemUint16Array[c-67108864>>>1^1]=a};b.writeSpMem32=function(a,c){b.spMemUint32Array[c-67108864>>>2]=a};b.writeRi8=function(a,
c){b.riUint8Array[c-74448896^3]=a};b.writeRi16=function(a,c){b.riUint16Array[c-74448896>>>1^1]=a};b.writeRi32=function(a,c){b.riUint32Array[c-74448896>>>2]=a};b.writeMi8=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};b.writeMi16=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};b.writeMi32=function(a,c,g,h){b.core.interrupts.writeMI(c-70254592,a,g,h)};b.writeRamRegs8_8=function(a,c){b.ramRegs8Uint8Array[c-66584576^3]=a};b.writeRamRegs8_16=function(a,c){b.ramRegs8Uint16Array[c-
66584576>>>1^1]=a};b.writeRamRegs8_32=function(a,c){b.ramRegs8Uint32Array[c-66584576>>>2]=a};b.writeRamRegs4_8=function(a,c){b.ramRegs4Uint8Array[c-66076672^3]=a};b.writeRamRegs4_16=function(a,c){b.ramRegs4Uint16Array[c-66076672>>>1^1]=a};b.writeRamRegs4_32=function(a,c){b.ramRegs4Uint32Array[c-66076672>>>2]=a};b.writeRamRegs0_8=function(a,c){b.ramRegs0Uint8Array[c-66060288^3]=a};b.writeRamRegs0_16=function(a,c){b.ramRegs0Uint16Array[c-66060288>>>1^1]=a};b.writeRamRegs0_32=function(a,c){b.ramRegs0Uint32Array[c-
66060288>>>2]=a};b.writeSpReg1_8=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-67371008,a,g,h)};b.writeSpReg1_16=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-67371008,a,g,h)};b.writeSpReg1_32=function(a,c,g,h){b.core.interrupts.writeSPReg1(c-67371008,a,g,h)};b.writePi8=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};b.writePi16=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};b.writePi32=function(a,c,g,h){b.core.interrupts.writePI(c-73400320,a,g,h)};b.writeSi8=
function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};b.writeSi16=function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};b.writeSi32=function(a,c,g,h){b.core.interrupts.writeSI(c-75497472,a,g,h)};b.writeAi8=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};b.writeAi16=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};b.writeAi32=function(a,c,g,h){b.core.interrupts.writeAI(c-72351744,a,g,h)};b.writeVi8=function(a,c,g,h){b.core.interrupts.writeVI(c-71303168,
a,g,h)};b.writeVi16=function(a,c,g,h){b.core.interrupts.writeVI(c-71303168,a,g,h)};b.writeVi32=function(a,c,g,h){b.core.interrupts.writeVI(c-71303168,a,g,h)};b.writeSpReg2_8=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};b.writeSpReg2_16=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};b.writeSpReg2_32=function(a,c,g,h){b.core.interrupts.writeSPReg2(c-67633152,a,g,h)};b.writeDpc8=function(a,c,g,h){b.core.interrupts.writeDPC(c-68157440,a,g,h)};b.writeDpc16=function(a,
c,g,h){b.core.interrupts.writeDPC(c-68157440,a,g,h)};b.writeDpc32=function(a,c,g,h){b.core.interrupts.writeDPC(c-68157440,a,g,h)};b.writeDps8=function(a,c){b.dpsUint8Array[c-69206016^3]=a};b.writeDps16=function(a,c){b.dpsUint16Array[c-69206016>>>1^1]=a};b.writeDps32=function(a,c){b.dpsUint32Array[c-69206016>>>2]=a};b.writeC2A1_8=function(a,c){b.c2a1Uint8Array[c-83886080^3]=a};b.writeC2A1_16=function(a,c){b.c2a1Uint16Array[c-83886080>>>1^1]=a};b.writeC2A1_32=function(a,c){b.c2a1Uint32Array[c-83886080>>>
2]=a};b.writeC1A1_8=function(a,c){b.c1a1Uint8Array[c-100663296^3]=a};b.writeC1A1_16=function(a,c){b.c1a1Uint16Array[c-100663296>>>1^1]=a};b.writeC1A1_32=function(a,c){b.c1a1Uint32Array[c-100663296>>>2]=a};b.writeC2A2_8=function(a,c){b.c2a2Uint8Array[c-134217728^3]=a};b.writeC2A2_16=function(a,c){b.c2a2Uint16Array[c-134217728>>>1^1]=a};b.writeC2A2_32=function(a,c){b.c2a2Uint32Array[c-134217728>>>2]=a};b.writeRom8=function(a,b){alert("attempt to overwrite rom!")};b.writeRom16=function(a,b){alert("attempt to overwrite rom!")};
b.writeRom32=function(a,b){alert("attempt to overwrite rom!")};b.writeC1A3_8=function(a,c){b.c1a3Uint8Array[c-533725184^3]=a};b.writeC1A3_16=function(a,c){b.c1a3Uint16Array[c-533725184>>>1^1]=a};b.writeC1A3_32=function(a,c){b.c1a3Uint32Array[c-533725184>>>2]=a};b.writePif8=function(a,c){b.pifUint8Array[c-532676608^3]=a};b.writePif16=function(a,c){b.pifUint16Array[c-532676608>>>1^1]=a};b.writePif32=function(a,c){b.pifUint32Array[c-532676608>>>2]=a};b.writeGio8=function(a,c){b.gioUint8Array[c-402653184^
3]=a};b.writeGio16=function(a,c){b.gioUint16Array[c-402653184>>>1^1]=a};b.writeGio32=function(a,c){b.gioUint32Array[c-402653184>>>2]=a};b.writeDummy8=function(a,c){b.dummyReadWriteUint8Array[c&65532^3]=a};b.writeDummy16=function(a,c){b.dummyReadWriteUint16Array[(c&65532)>>>1^1]=a};b.writeDummy32=function(a,c){b.dummyReadWriteUint32Array[(c&65532)>>>2]=a};return b};$jscomp.inherits(a,C1964jsMemory);a.prototype.getInt32=function(a,c,d){return d[c>>>2]};a.prototype.getUint32=function(a,c){return a[c+
3]<<24|a[c+2]<<16|a[c+1]<<8|a[c]};a.prototype.setInt32=function(a,c,d,e){e[c>>>2]=d};a.prototype.setUint32=function(a,c,d){a[c+3]=d>>24;a[c+2]=d>>16;a[c+1]=d>>8;a[c]=d};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsMemoryLE=a}).call(this);(function(){C1964jsEmulator.prototype.flushDynaCache=function(){for(;this.kk;)--this.kk,this.deleteFunction(this.kk);this.fnLut=new Map;this.s=void 0};C1964jsEmulator.prototype.deleteFunction=function(a){a=document.getElementsByTagName("script")[a];var b=a.text.split("_");b=b[1].split("=");b="_"+b[0];a.parentNode.removeChild(a);eval("if (typeof "+b+" !== 'undefined') delete "+b+";");self[b]=void 0;self[b]&&alert("self[fnName] should have been null.")}}).call(this);(function(){var a=function(){var a=function(){};a.prototype.processAudio=function(a,b,e){};return a}.call(this);("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsAudio=a}).call(this);(function(){var a=function(a,b,e){this.startTime=0;this.memory=a;this.interrupts=b;this.pif=e;this.audio=void 0};a.prototype.copyCartToDram=function(a,b){var c=this.memory.getInt32(this.memory.piUint8Array,consts.PI_WR_LEN_REG);var d=this.memory.getInt32(this.memory.piUint8Array,consts.PI_DRAM_ADDR_REG);var h=this.memory.getInt32(this.memory.piUint8Array,consts.PI_CART_ADDR_REG);log(dec2hex(a)+": pi dma write "+(c+1)+" bytes from "+dec2hex(h)+" to "+dec2hex(d));c&=16777215;d&=16777215;var k=c;if(0!==
(h&268435456)){h&=268435455;h+c+1>this.memory.rom.byteLength&&(k=this.memory.rom.byteLength-h-1);c=this.memory.u8;for(var l=this.memory.romUint8Array;0<=k;)c[d]=l[h],d++,h++,--k}else for(k=this.memory.u8;0<=c--;)k[d]=this.memory.lb(h),h++,d++;this.interrupts.clrFlag(this.memory.piUint8Array,consts.PI_STATUS_REG,consts.PI_STATUS_IO_BUSY|consts.PI_STATUS_DMA_BUSY);this.interrupts.triggerPIInterrupt(a,b)};a.prototype.copyDramToCart=function(a,b){return alert("copyDramToCart")};a.prototype.copySiToDram=
function(a,b){var c=63;var d=this.memory.getInt32(this.memory.siUint8Array,consts.SI_DRAM_ADDR_REG);var h=this.memory.getInt32(this.memory.siUint8Array,consts.SI_PIF_ADDR_RD64B_REG);if(532678592!==h)throw Error("Unhandled: SI_DRAM_ADDR_RD64B_REG = "+h);log("si dma write "+(c+1)+" bytes from "+dec2hex(h)+" to "+dec2hex(d));c&=16777215;d&=268435455;h&=65535;for(this.pif.processPif();0<=c;)this.memory.u8[d]=this.memory.pifUint8Array[h],d++,h++,--c;this.interrupts.setFlag(this.memory.siUint8Array,consts.SI_STATUS_REG,
consts.SI_STATUS_INTERRUPT);this.interrupts.triggerSIInterrupt(a,b)};a.prototype.copyDramToAi=function(a,b){b=this.memory.getInt32(this.memory.aiUint8Array,consts.AI_LEN_REG);a=this.memory.getInt32(this.memory.aiUint8Array,consts.AI_DRAM_ADDR_REG);b&=16777215;a&=268435455;void 0===this.audio&&(this.audio=new C1964jsAudio);!1===this.audio.processAudio(this.memory,a,b)&&this.interrupts.clrFlag(this.memory.aiUint8Array,consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL);this.interrupts.setFlag(this.memory.aiUint8Array,
consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL)};a.prototype.copyDramToSi=function(a,b){var c=63;var d=this.memory.getInt32(this.memory.siUint8Array,consts.SI_PIF_ADDR_WR64B_REG);var h=this.memory.getInt32(this.memory.siUint8Array,consts.SI_DRAM_ADDR_REG);if(532678592!==d)throw Error("Unhandled: SI_DRAM_ADDR_RD64B_REG = "+h);log("si dma read "+(c+1)+" bytes from "+dec2hex(h)+" to "+dec2hex(d));c&=16777215;d&=65535;for(h&=268435455;0<=c;)this.memory.pifUint8Array[d]=this.memory.u8[h],d++,h++,--c;
this.interrupts.setFlag(this.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT);this.interrupts.triggerSIInterrupt(a,b)};a.prototype.copySpToDram=function(a,b){alert("todo: copySpToDram")};a.prototype.copyDramToSp=function(a,b){a=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_RD_LEN_REG);var c=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_MEM_ADDR_REG);b=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_DRAM_ADDR_REG);log("sp dma read "+(a+1)+
" bytes from "+dec2hex(b)+" to "+dec2hex(c));a&=4095;c&=8191;for(b&=16777215;0<=a;)this.memory.spMemUint8Array[c]=this.memory.u8[b],c++,b++,--a;this.memory.setInt32(this.memory.spReg1Uint8Array,consts.SP_DMA_BUSY_REG,0,this.memory.spReg1Uint32Array);this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_STATUS_REG)&(consts.SP_STATUS_DMA_BUSY|consts.SP_STATUS_IO_FULL|consts.SP_STATUS_DMA_FULL)&&alert("hmm..todo: an sp fp status flag is blocking from continuing");this.interrupts.clrFlag(this.memory.spReg1Uint8Array,
consts.SP_STATUS_REG,consts.SP_STATUS_DMA_BUSY);this.interrupts.setFlag(this.memory.spReg1Uint8Array,consts.SP_STATUS_REG,consts.SP_STATUS_HALT)};var b="undefined"!==typeof exports&&null!==exports?exports:self;b.C1964jsDma=a;b.log=function(a){}}).call(this);(function(){var a=function(a,b,e){this.startTime=0;this.memory=a;this.interrupts=b;this.pif=e;this.audio=void 0};a.prototype.copyCartToDram=function(a,b){var c=this.memory.getInt32(this.memory.piUint8Array,consts.PI_WR_LEN_REG,this.memory.piUint32Array);var d=this.memory.getInt32(this.memory.piUint8Array,consts.PI_DRAM_ADDR_REG,this.memory.piUint32Array);var h=this.memory.getInt32(this.memory.piUint8Array,consts.PI_CART_ADDR_REG,this.memory.piUint32Array);log(dec2hex(a)+": pi dma write "+(c+1)+" bytes from "+
dec2hex(h)+" to "+dec2hex(d));c&=16777215;d&=16777215;var k=c;if(0!==(h&268435456)){h&=268435455;h+c+1>this.memory.rom.byteLength&&(k=this.memory.rom.byteLength-h-1);c=this.memory.u8;var l=this.memory.romUint8Array;if(0===(d&3)&&0===(h&3))for(;0<=k;)c[d]=l[h],d++,h++,--k;else for(;0<=k;)c[d^3]=l[h^3],d++,h++,--k}else for(k=this.memory.u8;0<=c--;)k[d^3]=this.memory.lb(h),h++,d++;this.interrupts.clrFlag(this.memory.piUint8Array,consts.PI_STATUS_REG,consts.PI_STATUS_IO_BUSY|consts.PI_STATUS_DMA_BUSY);
this.interrupts.triggerPIInterrupt(a,b)};a.prototype.copyDramToCart=function(a,b){return alert("copyDramToCart")};a.prototype.copySiToDram=function(a,b){var c=63;var d=this.memory.getInt32(this.memory.siUint8Array,consts.SI_DRAM_ADDR_REG,this.memory.siUint32Array);var h=this.memory.getInt32(this.memory.siUint8Array,consts.SI_PIF_ADDR_RD64B_REG,this.memory.siUint32Array);if(532678592!==h)throw Error("Unhandled: SI_DRAM_ADDR_RD64B_REG = "+h);log("si dma write "+(c+1)+" bytes from "+dec2hex(h)+" to "+
dec2hex(d));c&=16777215;d&=268435455;h&=65535;for(this.pif.processPif();0<=c;)this.memory.u8[d^3]=this.memory.pifUint8Array[h^3],d++,h++,--c;this.interrupts.setFlag(this.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT);this.interrupts.triggerSIInterrupt(a,b)};a.prototype.copyDramToAi=function(a,b){b=this.memory.getInt32(this.memory.aiUint8Array,consts.AI_LEN_REG,this.memory.aiUint32Array);a=this.memory.getInt32(this.memory.aiUint8Array,consts.AI_DRAM_ADDR_REG,this.memory.aiUint32Array);
b&=16777215;a&=268435455;void 0===this.audio&&(this.audio=new C1964jsAudio);!1===this.audio.processAudio(this.memory,a,b)?(this.interrupts.clrFlag(this.memory.aiUint8Array,consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL),this.interrupts.triggerAIInterrupt(0,!1)):this.interrupts.setFlag(this.memory.aiUint8Array,consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL)};a.prototype.copyDramToSi=function(a,b){var c=63;var d=this.memory.getInt32(this.memory.siUint8Array,consts.SI_PIF_ADDR_WR64B_REG,this.memory.siUint32Array);
var h=this.memory.getInt32(this.memory.siUint8Array,consts.SI_DRAM_ADDR_REG,this.memory.siUint32Array);if(532678592!==d)throw Error("Unhandled: SI_DRAM_ADDR_RD64B_REG = "+h);log("si dma read "+(c+1)+" bytes from "+dec2hex(h)+" to "+dec2hex(d));c&=16777215;d&=65535;for(h&=268435455;0<=c;)this.memory.pifUint8Array[d^3]=this.memory.u8[h^3],d++,h++,--c;this.interrupts.setFlag(this.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT);this.interrupts.triggerSIInterrupt(a,b)};a.prototype.copySpToDram=
function(a,b){alert("todo: copySpToDram")};a.prototype.copyDramToSp=function(a,b){a=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_RD_LEN_REG,this.memory.spReg1Uint32Array);var c=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_MEM_ADDR_REG,this.memory.spReg1Uint32Array);b=this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_DRAM_ADDR_REG,this.memory.spReg1Uint32Array);log("sp dma read "+(a+1)+" bytes from "+dec2hex(b)+" to "+dec2hex(c));a&=4095;c&=8191;b&=16777215;
if(0===(c&3)&&0===(b&3))for(;0<=a;)this.memory.spMemUint8Array[c]=this.memory.u8[b],c++,b++,--a;else for(;0<=a;)this.memory.spMemUint8Array[c^3]=this.memory.u8[b^3],c++,b++,--a;this.memory.setInt32(this.memory.spReg1Uint8Array,consts.SP_DMA_BUSY_REG,0,this.memory.spReg1Uint32Array);this.memory.getInt32(this.memory.spReg1Uint8Array,consts.SP_STATUS_REG,this.memory.spReg1Uint32Array)&(consts.SP_STATUS_DMA_BUSY|consts.SP_STATUS_IO_FULL|consts.SP_STATUS_DMA_FULL)&&alert("hmm..todo: an sp fp status flag is blocking from continuing");
this.interrupts.clrFlag(this.memory.spReg1Uint8Array,consts.SP_STATUS_REG,consts.SP_STATUS_DMA_BUSY);this.interrupts.setFlag(this.memory.spReg1Uint8Array,consts.SP_STATUS_REG,consts.SP_STATUS_HALT)};var b="undefined"!==typeof exports&&null!==exports?exports:self;b.C1964jsDmaLE=a;b.log=function(a){}}).call(this);(function(){SP_STATUS_HALT=1;SP_STATUS_BROKE=2;SP_STATUS_DMA_BUSY=4;SP_STATUS_DMA_FULL=8;SP_STATUS_IO_FULL=16;SP_STATUS_SSTEP=32;SP_STATUS_INTR_BREAK=64;SP_STATUS_YIELD=128;SP_STATUS_YIELDED=256;SP_STATUS_TASKDONE=512;SP_STATUS_SIG3=1024;SP_STATUS_SIG4=2048;SP_STATUS_SIG5=4096;SP_STATUS_SIG6=8192;SP_STATUS_SIG7=16384;SP_CLR_HALT=1;SP_SET_HALT=2;SP_CLR_BROKE=4;SP_CLR_INTR=8;SP_SET_INTR=16;SP_CLR_SSTEP=32;SP_SET_SSTEP=64;SP_CLR_INTR_BREAK=128;SP_SET_INTR_BREAK=256;SP_CLR_YIELD=512;SP_SET_YIELD=1024;
SP_CLR_YIELDED=2048;SP_SET_YIELDED=4096;SP_CLR_TASKDONE=8192;SP_SET_TASKDONE=16384;SP_CLR_SIG3=32768;SP_SET_SIG3=65536;SP_CLR_SIG4=131072;SP_SET_SIG4=262144;SP_CLR_SIG5=524288;SP_SET_SIG5=1048576;SP_CLR_SIG6=2097152;SP_SET_SIG6=4194304;SP_CLR_SIG7=8388608;SP_SET_SIG7=16777216;var a=0;("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsInterrupts=function(b,c){this.delayNextInterrupt=!1;this.setException=function(a,b,g,h){c[consts.CAUSE]|=a;c[consts.CAUSE]|=b};this.processException=
function(a,e){if(!0===this.delayNextInterrupt)b.m[0]=-156250,this.delayNextInterrupt=!1;else{if(0===(c[consts.STATUS]&consts.IE)||0!==(c[consts.STATUS]&consts.EXL))return!1;c[consts.CAUSE]&=4294967171;c[consts.STATUS]|=consts.EXL;!0===e?(c[consts.CAUSE]|=consts.BD,c[consts.EPC]=a-4):(c[consts.CAUSE]&=~consts.BD,c[consts.EPC]=a);0===b.doOnce&&b.flushDynaCache();b.doOnce=1;b.p[0]=2147484032;return!0}};this.triggerCompareInterrupt=function(a,b){this.setException(consts.EXC_INT,consts.CAUSE_IP8,a,b)};
this.triggerPIInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_PI);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&consts.MI_INTR_MASK_PI)&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerSPInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_SP);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&consts.MI_INTR_MASK_SP)&&
this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerVIInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_VI);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&consts.MI_INTR_MASK_VI)&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerSIInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_SI);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,
b.memory.miUint32Array)&consts.MI_INTR_MASK_SI)&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerAIInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_AI);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&consts.MI_INTR_MASK_AI)&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerDPInterrupt=function(a,c){this.setFlag(b.memory.miUint8Array,consts.MI_INTR_REG,consts.MI_INTR_DP);
0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&consts.MI_INTR_MASK_DP)&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,a,c)};this.triggerRspBreak=function(){this.setFlag(b.memory.spReg1Uint8Array,consts.SP_STATUS_REG,consts.SP_STATUS_TASKDONE|consts.SP_STATUS_BROKE|consts.SP_STATUS_HALT);0!==(b.memory.getInt32(b.memory.spReg1Uint8Array,consts.SP_STATUS_REG,b.memory.spReg1Uint32Array)&consts.SP_STATUS_INTR_BREAK)&&this.triggerSPInterrupt(0,!1)};this.clearMIInterrupt=
function(a){this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_REG,a);0===(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array))&&(c[consts.CAUSE]&=~consts.CAUSE_IP3)};this.readVI=function(c){switch(c){case consts.VI_CURRENT_REG:return 625===(a+=1)&&(a=0),(b.memory.getInt32(b.memory.viUint8Array,c,b.memory.viUint32Array)&4294967294)+a|0;default:return b.memory.getInt32(b.memory.viUint8Array,
c,b.memory.viUint32Array)}};this.writeVI=function(a,c,g,h){switch(a){case consts.VI_ORIGIN_REG:b.memory.setInt32(b.memory.viUint8Array,a,c,b.memory.viUint32Array);break;case consts.VI_CURRENT_REG:this.clearMIInterrupt(consts.MI_INTR_VI);b.memory.setInt32(b.memory.viUint8Array,a,c,b.memory.viUint32Array);break;case consts.VI_INTR_REG:b.memory.setInt32(b.memory.viUint8Array,a,c,b.memory.viUint32Array);break;default:b.memory.setInt32(b.memory.viUint8Array,a,c,b.memory.viUint32Array)}};this.writePI=function(a,
c,g,h){switch(a){case consts.PI_WR_LEN_REG:b.memory.setInt32(b.memory.piUint8Array,a,c,b.memory.piUint32Array);b.dma.copyCartToDram(g,h);break;case consts.PI_RD_LEN_REG:b.memory.setInt32(b.memory.piUint8Array,a,c,b.memory.piUint32Array);b.dma.copyDramToCart(g,h);break;case consts.PI_DRAM_ADDR_REG:b.memory.setInt32(b.memory.piUint8Array,a,c,b.memory.piUint32Array);break;case consts.PI_CART_ADDR_REG:b.memory.setInt32(b.memory.piUint8Array,a,c,b.memory.piUint32Array);break;case consts.PI_STATUS_REG:this.writePIStatusReg(c,
g,h);break;default:b.memory.setInt32(b.memory.piUint8Array,a,c,b.memory.piUint32Array)}};this.writeSI=function(a,c,g,h){switch(a){case consts.SI_DRAM_ADDR_REG:b.memory.setInt32(b.memory.siUint8Array,a,c,b.memory.siUint32Array);break;case consts.SI_STATUS_REG:this.writeSIStatusReg(c,g,h);break;case consts.SI_PIF_ADDR_RD64B_REG:b.memory.setInt32(b.memory.siUint8Array,a,c,b.memory.siUint32Array);b.dma.copySiToDram(g,h);break;case consts.SI_PIF_ADDR_WR64B_REG:b.memory.setInt32(b.memory.siUint8Array,a,
c,b.memory.siUint32Array);b.dma.copyDramToSi(g,h);break;default:b.memory.setInt32(b.memory.siUint8Array,a,c,b.memory.siUint32Array)}};this.readSI=function(a){switch(a){case consts.SI_STATUS_REG:return this.readSIStatusReg(),b.memory.getInt32(b.memory.siUint8Array,a,b.memory.siUint32Array);default:return b.memory.getInt32(b.memory.siUint8Array,a,b.memory.siUint32Array)}};this.readSIStatusReg=function(){0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array)&consts.MI_INTR_SI)?
this.setFlag(b.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT):this.clrFlag(b.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT)};this.readAI=function(a){switch(a){case consts.AI_LEN_REG:return--b.kfi,0===b.kfi?(b.kfi=512,this.clrFlag(b.memory.aiUint8Array,consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL),this.triggerAIInterrupt(0,!1),0):2048;case consts.AI_STATUS_REG:return b.memory.getInt32(b.memory.aiUint8Array,a,b.memory.aiUint32Array);default:return b.memory.getInt32(b.memory.aiUint8Array,
a,b.memory.aiUint32Array)}};this.writeAI=function(a,c,g,h){switch(a){case consts.AI_DRAM_ADDR_REG:b.memory.setInt32(b.memory.aiUint8Array,a,c,b.memory.aiUint32Array);break;case consts.AI_LEN_REG:b.memory.setInt32(b.memory.aiUint8Array,a,c,b.memory.aiUint32Array);b.dma.copyDramToAi(g,h);break;case consts.AI_STATUS_REG:this.clearMIInterrupt(consts.MI_INTR_AI);break;case consts.AI_DACRATE_REG:b.memory.setInt32(b.memory.aiUint8Array,a,c,b.memory.aiUint32Array);break;case consts.AI_CONTROL_REG:b.memory.setInt32(b.memory.aiUint8Array,
a,c&1,b.memory.aiUint32Array);break;default:b.memory.setInt32(b.memory.aiUint8Array,a,c,b.memory.aiUint32Array)}};this.writeMI=function(a,c,g,h){switch(a){case consts.MI_INIT_MODE_REG:this.writeMIModeReg(c);break;case consts.MI_INTR_MASK_REG:this.writeMIIntrMaskReg(c,g,h);break;case consts.MI_VERSION_REG:case consts.MI_INTR_REG:break;default:b.memory.setInt32(b.memory.miUint8Array,a,c,b.memory.miUint32Array)}};this.readSPReg1=function(a){switch(a){case consts.SP_STATUS_REG:return b.memory.getInt32(b.memory.spReg1Uint8Array,
a,b.memory.spReg1Uint32Array);case consts.SP_SEMAPHORE_REG:var c=b.memory.getInt32(b.memory.aiUint8Array,a,b.memory.aiUint32Array);b.memory.setInt32(b.memory.spReg1Uint8Array,a,1,b.memory.spReg1Uint32Array);return c;default:return b.memory.getInt32(b.memory.spReg1Uint8Array,a,b.memory.spReg1Uint32Array)}};this.writeSPReg1=function(a,c,g,h){switch(a){case consts.SP_STATUS_REG:this.writeSPStatusReg(c,g,h);break;case consts.SP_SEMAPHORE_REG:b.memory.setInt32(b.memory.spReg1Uint8Array,a,0,b.memory.spReg1Uint32Array);
break;case consts.SP_WR_LEN_REG:b.memory.setInt32(b.memory.spReg1Uint8Array,a,c,b.memory.spReg1Uint32Array);b.dma.copySpToDram(g,h);break;case consts.SP_RD_LEN_REG:b.memory.setInt32(b.memory.spReg1Uint8Array,a,c,b.memory.spReg1Uint32Array);b.dma.copyDramToSp(g,h);break;default:b.memory.setInt32(b.memory.spReg1Uint8Array,a,c,b.memory.spReg1Uint32Array)}};this.writeSPReg2=function(a,c,g,h){switch(a){case consts.SP_PC_REG:b.memory.setInt32(b.memory.spReg2Uint8Array,a,c&4092,b.memory.spReg2Uint32Array);
break;default:b.memory.setInt32(b.memory.spReg2Uint8Array,a,c,b.memory.spReg2Uint32Array)}};this.setFlag=function(a,c,g){var d=b.memory.getUint32(a,c);b.memory.setUint32(a,c,d|g)};this.clrFlag=function(a,c,g){var d=b.memory.getUint32(a,c);b.memory.setUint32(a,c,d&~g)};this.writeMIModeReg=function(a){a&consts.MI_SET_RDRAM?this.setFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_RDRAM):a&consts.MI_CLR_RDRAM&&this.clrFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_RDRAM);
a&consts.MI_SET_INIT?this.setFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_INIT):a&consts.MI_CLR_INIT&&this.clrFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_INIT);a&consts.MI_SET_EBUS?this.setFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_EBUS):a&consts.MI_CLR_EBUS&&this.clrFlag(b.memory.miUint8Array,consts.MI_INIT_MODE_REG,consts.MI_MODE_EBUS);a&consts.MI_CLR_DP_INTR&&this.clearMIInterrupt(consts.MI_INTR_DP)};this.writeMIIntrMaskReg=function(a,
c,g){a&consts.MI_INTR_MASK_SP_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_SP):a&consts.MI_INTR_MASK_SP_CLR&&this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_SP);a&consts.MI_INTR_MASK_SI_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_SI):a&consts.MI_INTR_MASK_SI_CLR&&this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_SI);a&consts.MI_INTR_MASK_AI_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,
consts.MI_INTR_AI):a&consts.MI_INTR_MASK_AI_CLR&&this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_AI);a&consts.MI_INTR_MASK_VI_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_VI):a&consts.MI_INTR_MASK_VI_CLR&&this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_VI);a&consts.MI_INTR_MASK_PI_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_PI):a&consts.MI_INTR_MASK_PI_CLR&&this.clrFlag(b.memory.miUint8Array,
consts.MI_INTR_MASK_REG,consts.MI_INTR_PI);a&consts.MI_INTR_MASK_DP_SET?this.setFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_DP):a&consts.MI_INTR_MASK_DP_CLR&&this.clrFlag(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,consts.MI_INTR_DP);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_MASK_REG,b.memory.miUint32Array)&63&b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array))&&this.setException(consts.EXC_INT,consts.CAUSE_IP3,c,g)};this.writeSIStatusReg=
function(a,c,g){this.clearMIInterrupt(consts.MI_INTR_SI);this.clrFlag(b.memory.siUint8Array,consts.SI_STATUS_REG,consts.SI_STATUS_INTERRUPT)};this.writeSPStatusReg=function(a,c,g){var d=b.memory.getInt32(b.memory.spReg1Uint8Array,consts.SP_STATUS_REG,b.memory.spReg1Uint32Array);a&SP_CLR_BROKE&&(d&=~consts.SP_STATUS_BROKE);a&SP_SET_INTR&&this.triggerSPInterrupt(c,g);a&SP_SET_SSTEP?d|=SP_STATUS_SSTEP:a&SP_CLR_SSTEP&&(d&=~SP_STATUS_SSTEP);a&SP_SET_INTR_BREAK?d|=SP_STATUS_INTR_BREAK:a&SP_CLR_INTR_BREAK&&
(d&=~SP_STATUS_INTR_BREAK);a&SP_SET_YIELD?d|=SP_STATUS_YIELD:a&SP_CLR_YIELD&&(d&=~SP_STATUS_YIELD);a&SP_SET_YIELDED?d|=SP_STATUS_YIELDED:a&SP_CLR_YIELDED&&(d&=~SP_STATUS_YIELDED);a&SP_SET_TASKDONE?d|=SP_STATUS_TASKDONE:a&SP_CLR_YIELDED&&(d&=~SP_STATUS_YIELDED);a&SP_SET_SIG3?d|=SP_STATUS_SIG3:a&SP_CLR_SIG3&&(d&=~SP_STATUS_SIG3);a&SP_SET_SIG4?d|=SP_STATUS_SIG4:a&SP_CLR_SIG4&&(d&=~SP_STATUS_SIG4);a&SP_SET_SIG5?d|=SP_STATUS_SIG5:a&SP_CLR_SIG5&&(d&=~SP_STATUS_SIG5);a&SP_SET_SIG6?d|=SP_STATUS_SIG6:a&SP_CLR_SIG6&&
(d&=~SP_STATUS_SIG6);a&SP_SET_SIG7?d|=SP_STATUS_SIG7:a&SP_CLR_SIG7&&(d&=~SP_STATUS_SIG7);a&SP_SET_HALT?(d|=SP_STATUS_HALT,b.memory.setInt32(b.memory.spReg1Uint8Array,consts.SP_STATUS_REG,d,b.memory.spReg1Uint32Array)):a&SP_CLR_HALT&&(0===(d&SP_STATUS_BROKE)?(d&=~SP_STATUS_HALT,b.memory.setInt32(b.memory.spReg1Uint8Array,consts.SP_STATUS_REG,d,b.memory.spReg1Uint32Array),a=b.memory.getInt32(b.memory.spMemUint8Array,consts.SP_DMEM_TASK,b.memory.spMemUint32Array),this.runSPTask(a)):b.memory.setInt32(b.memory.spReg1Uint8Array,
consts.SP_STATUS_REG,d,b.memory.spReg1Uint32Array))};this.writeDPCStatusReg=function(a,c,g){a&consts.DPC_CLR_XBUS_DMEM_DMA&&this.clrFlag(b.memory.dpcUint8Array,consts.DPC_STATUS_REG,consts.DPC_STATUS_XBUS_DMEM_DMA);a&consts.DPC_SET_XBUS_DMEM_DMA&&this.setFlag(b.memory.dpcUint8Array,consts.DPC_STATUS_REG,consts.DPC_STATUS_XBUS_DMEM_DMA);a&consts.DPC_CLR_FREEZE&&this.clrFlag(b.memory.dpcUint8Array,consts.DPC_STATUS_REG,consts.DPC_STATUS_FREEZE);a&consts.DPC_SET_FREEZE&&this.setFlag(b.memory.dpcUint8Array,
consts.DPC_STATUS_REG,consts.DPC_STATUS_FREEZE);a&consts.DPC_CLR_FLUSH&&this.clrFlag(b.memory.dpcUint8Array,consts.DPC_STATUS_REG,consts.DPC_STATUS_FLUSH);a&consts.DPC_SET_FLUSH&&this.setFlag(b.memory.dpcUint8Array,consts.DPC_STATUS_REG,consts.DPC_STATUS_FLUSH)};this.writeDPC=function(a,c,g,h){switch(a){case consts.DPC_STATUS_REG:this.writeDPCStatusReg(c,g,h);break;case consts.DPC_START_REG:b.memory.setInt32(b.memory.dpcUint8Array,a,c,b.memory.dpcUint32Array);break;case consts.DPC_END_REG:b.memory.setInt32(b.memory.dpcUint8Array,
a,c,b.memory.dpcUint32Array);this.processRDPList();break;case consts.DPC_CLOCK_REG:case consts.DPC_BUFBUSY_REG:case consts.DPC_PIPEBUSY_REG:case consts.DPC_TMEM_REG:break;default:b.memory.setInt32(b.memory.dpcUint8Array,a,c,b.memory.dpcUint32Array)}};this.writePIStatusReg=function(a,c,g){a&consts.PI_STATUS_CLR_INTR&&this.clearMIInterrupt(consts.MI_INTR_PI);a&consts.PI_STATUS_RESET&&(b.memory.getInt32(b.memory.piUint8Array,consts.PI_STATUS_REG,b.memory.piUint32Array)&(consts.PI_STATUS_IO_BUSY|consts.PI_STATUS_DMA_BUSY)?
(b.memory.setInt32(b.memory.piUint8Array,consts.PI_STATUS_REG,0,b.memory.piUint32Array),this.triggerPIInterrupt(c,g)):b.memory.setInt32(b.memory.piUint8Array,consts.PI_STATUS_REG,0,b.memory.piUint32Array))};this.runSPTask=function(a){var c=this;switch(a){case consts.GFX_TASK:if(null===b.videoHLE||void 0===b.videoHLE)b.videoHLE=1===b.isLittleEndian&&!1===b.useByteCompatibilityMode?new C1964jsVideoHLEle(b,b.webGL.gl):new C1964jsVideoHLE(b,b.webGL.gl);a=document.getElementById("repeatDList");b.settings.repeatDList=
!1;null!==a&&a.checked&&(b.settings.repeatDList=!0);!1===b.terminate&&(b.videoHLE.processDisplayList(),!0===b.settings.repeatDList?(b.stopEmulatorAndCleanup(),this.interval=setInterval(function(){b.videoHLE.processDisplayList();c.triggerRspBreak(0,!1)},1E3)):this.triggerRspBreak(0,!1));break;case consts.SND_TASK:this.processAudioList();this.triggerRspBreak(0,!1);break;case consts.JPG_TASK:this.processJpegTask(),this.triggerRspBreak(0,!1)}this.checkInterrupts()};this.processAudioList=function(){this.clrFlag(b.memory.aiUint8Array,
consts.AI_STATUS_REG,consts.AI_STATUS_FIFO_FULL)};this.processJpegTask=function(){};this.processRDPList=function(){};this.checkInterrupts=function(){0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array)&consts.MI_INTR_DP)&&this.triggerDPInterrupt(0,!1);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array)&consts.MI_INTR_AI)&&this.triggerAIInterrupt(0,!1);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint8Array)&
consts.MI_INTR_SI)&&this.triggerSIInterrupt(0,!1);0!==(b.memory.getInt32(b.memory.miUint8Array,consts.MI_INTR_REG,b.memory.miUint32Array)&consts.MI_INTR_SP)&&this.triggerRspBreak(0,!1);0!==(c[consts.CAUSE]&c[consts.STATUS]&65280)&&this.setException(consts.EXC_INT,0,b.p,!1)};return this}}).call(this);glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;
var vec3={create:function(a){var b=new glMatrixArrayType(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},add:function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,
b,c){if(!c||a==c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1];a=a[2];var e=Math.sqrt(c*c+d*d+a*a);if(e){if(1==e)return b[0]=c,b[1]=d,b[2]=a,b}else return b[0]=0,b[1]=0,b[2]=0,b;e=1/e;b[0]=c*e;b[1]=d*e;b[2]=a*e;return b},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var g=b[0],h=b[1];b=b[2];c[0]=e*b-a*h;c[1]=a*g-d*b;c[2]=d*h-e*g;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*
c+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"}},mat3={create:function(a){var b=new glMatrixArrayType(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],
b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a==b){b=a[1];var c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=d;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];
return b},toMat4:function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},mat4={create:function(a){var b=new glMatrixArrayType(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=
a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a==b){b=a[1];var c=a[2],d=a[3],e=a[6],g=a[7],h=a[11];a[1]=
a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=e;a[11]=a[14];a[12]=d;a[13]=g;a[14]=h;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],n=a[9],p=a[10],r=a[11],q=a[12],u=a[13],t=a[14];a=a[15];return q*n*k*e-m*u*k*e-q*h*p*e+g*u*p*e+m*h*t*e-g*n*t*e-q*n*d*
l+m*u*d*l+q*c*p*l-b*u*p*l-m*c*t*l+b*n*t*l+q*h*d*r-g*u*d*r-q*c*k*r+b*u*k*r+g*c*t*r-b*h*t*r-m*h*d*a+g*n*d*a+m*c*k*a-b*n*k*a-g*c*p*a+b*h*p*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],r=a[10],q=a[11],u=a[12],t=a[13],v=a[14];a=a[15];var w=c*k-d*h,x=c*l-e*h,A=c*m-g*h,z=d*l-e*k,B=d*m-g*k,C=e*m-g*l,D=n*t-p*u,E=n*v-r*u,F=n*a-q*u,G=p*v-r*t,H=p*a-q*t,I=r*a-q*v,y=1/(w*I-x*H+A*G+z*F-B*E+C*D);b[0]=(k*I-l*H+m*G)*y;b[1]=(-d*I+e*H-g*G)*y;b[2]=(t*C-v*
B+a*z)*y;b[3]=(-p*C+r*B-q*z)*y;b[4]=(-h*I+l*F-m*E)*y;b[5]=(c*I-e*F+g*E)*y;b[6]=(-u*C+v*A-a*x)*y;b[7]=(n*C-r*A+q*x)*y;b[8]=(h*H-k*F+m*D)*y;b[9]=(-c*H+d*F-g*D)*y;b[10]=(u*B-t*A+a*w)*y;b[11]=(-n*B+p*A-q*w)*y;b[12]=(-h*G+k*E-l*D)*y;b[13]=(c*G-d*E+e*D)*y;b[14]=(-u*z+t*x-v*w)*y;b[15]=(n*z-p*x+r*w)*y;return b},toRotationMat:function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;
b[15]=1;return b},toMat3:function(a,b){b||(b=mat3.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],g=a[4],h=a[5],k=a[6],l=a[8],m=a[9];a=a[10];var n=a*h-k*m,p=-a*g+k*l,r=m*g-h*l,q=c*n+d*p+e*r;if(!q)return null;q=1/q;b||(b=mat3.create());b[0]=n*q;b[1]=(-a*d+e*m)*q;b[2]=(k*d-e*h)*q;b[3]=p*q;b[4]=(a*c-e*l)*q;b[5]=(-k*c+e*g)*q;b[6]=r*q;b[7]=(-m*c+d*l)*q;b[8]=(h*c-d*g)*q;return b},multiply:function(a,
b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],l=a[5],m=a[6],n=a[7],p=a[8],r=a[9],q=a[10],u=a[11],t=a[12],v=a[13],w=a[14];a=a[15];var x=b[0],A=b[1],z=b[2],B=b[3],C=b[4],D=b[5],E=b[6],F=b[7],G=b[8],H=b[9],I=b[10],y=b[11],J=b[12],K=b[13],L=b[14];b=b[15];c[0]=x*d+A*k+z*p+B*t;c[1]=x*e+A*l+z*r+B*v;c[2]=x*g+A*m+z*q+B*w;c[3]=x*h+A*n+z*u+B*a;c[4]=C*d+D*k+E*p+F*t;c[5]=C*e+D*l+E*r+F*v;c[6]=C*g+D*m+E*q+F*w;c[7]=C*h+D*n+E*u+F*a;c[8]=G*d+H*k+I*p+y*t;c[9]=G*e+H*l+I*r+y*v;c[10]=G*g+H*m+I*q+y*w;c[11]=G*h+H*
n+I*u+y*a;c[12]=J*d+K*k+L*p+b*t;c[13]=J*e+K*l+L*r+b*v;c[14]=J*g+K*m+L*q+b*w;c[15]=J*h+K*n+L*u+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*g+a[15]*b;return c},translate:function(a,
b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;var g=a[0],h=a[1],k=a[2],l=a[3],m=a[4],n=a[5],p=a[6],r=a[7],q=a[8],u=a[9],t=a[10],v=a[11];c[0]=g;c[1]=h;c[2]=k;c[3]=l;c[4]=m;c[5]=n;c[6]=p;c[7]=r;c[8]=q;c[9]=u;c[10]=t;c[11]=v;c[12]=g*d+m*e+q*b+a[12];c[13]=h*d+n*e+u*b+a[13];c[14]=k*d+p*e+t*b+a[14];c[15]=l*d+r*e+v*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=
b[1];b=b[2];if(!c||a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var h=Math.sqrt(e*e+g*g+c*c);if(!h)return null;1!=h&&(h=1/h,e*=h,g*=h,c*=h);var k=Math.sin(b),l=Math.cos(b),m=1-l;
b=a[0];h=a[1];var n=a[2],p=a[3],r=a[4],q=a[5],u=a[6],t=a[7],v=a[8],w=a[9],x=a[10],A=a[11],z=e*e*m+l,B=g*e*m+c*k,C=c*e*m-g*k,D=e*g*m-c*k,E=g*g*m+l,F=c*g*m+e*k,G=e*c*m+g*k;e=g*c*m-e*k;g=c*c*m+l;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*z+r*B+v*C;d[1]=h*z+q*B+w*C;d[2]=n*z+u*B+x*C;d[3]=p*z+t*B+A*C;d[4]=b*D+r*E+v*F;d[5]=h*D+q*E+w*F;d[6]=n*D+u*E+x*F;d[7]=p*D+t*E+A*F;d[8]=b*G+r*e+v*g;d[9]=h*G+q*e+w*g;d[10]=n*G+u*e+x*g;d[11]=p*G+t*e+A*g;return d},rotateX:function(a,b,c){var d=Math.sin(b);
b=Math.cos(b);var e=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+l*d;c[5]=g*b+m*d;c[6]=h*b+n*d;c[7]=k*b+p*d;c[8]=e*-d+l*b;c[9]=g*-d+m*b;c[10]=h*-d+n*b;c[11]=k*-d+p*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],l=a[8],m=a[9],n=a[10],p=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],
c[15]=a[15]):c=a;c[0]=e*b+l*-d;c[1]=g*b+m*-d;c[2]=h*b+n*-d;c[3]=k*b+p*-d;c[8]=e*d+l*b;c[9]=g*d+m*b;c[10]=h*d+n*b;c[11]=k*d+p*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],l=a[4],m=a[5],n=a[6],p=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+l*d;c[1]=g*b+m*d;c[2]=h*b+n*d;c[3]=k*b+p*d;c[4]=e*-d+l*b;c[5]=g*-d+m*b;c[6]=h*-d+n*b;c[7]=k*-d+p*b;return c},frustum:function(a,b,c,d,
e,g,h){h||(h=mat4.create());var k=b-a,l=d-c,m=g-e;h[0]=2*e/k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/l;h[6]=0;h[7]=0;h[8]=(b+a)/k;h[9]=(d+c)/l;h[10]=-(g+e)/m;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(g*e*2)/m;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return mat4.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,h){h||(h=mat4.create());var k=b-a,l=d-c,m=g-e;h[0]=2/k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/l;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/m;h[11]=0;h[12]=-(a+b)/k;h[13]=
-(d+c)/l;h[14]=-(g+e)/m;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=mat4.create());var e=a[0],g=a[1];a=a[2];var h=c[0],k=c[1],l=c[2];c=b[1];var m=b[2];if(e==b[0]&&g==c&&a==m)return mat4.identity(d);c=e-b[0];m=g-b[1];b=a-b[2];var n=1/Math.sqrt(c*c+m*m+b*b);c*=n;m*=n;b*=n;var p=k*b-l*m;l=l*c-h*b;h=h*m-k*c;(n=Math.sqrt(p*p+l*l+h*h))?(n=1/n,p*=n,l*=n,h*=n):h=l=p=0;k=m*h-b*l;var r=b*p-c*h;var q=c*l-m*p;(n=Math.sqrt(k*k+r*r+q*q))?(n=1/n,k*=n,r*=n,q*=n):q=r=k=0;d[0]=p;d[1]=k;d[2]=c;d[3]=0;d[4]=l;d[5]=
r;d[6]=m;d[7]=0;d[8]=h;d[9]=q;d[10]=b;d[11]=0;d[12]=-(p*e+l*g+h*a);d[13]=-(k*e+r*g+q*a);d[14]=-(c*e+m*g+b*a);d[15]=1;return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}};
quat4={create:function(a){var b=new glMatrixArrayType(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},calculateW:function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b},inverse:function(a,b){if(!b||a==b)return a[0]*=1,a[1]*=1,a[2]*=1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},length:function(a){var b=
a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var g=Math.sqrt(c*c+d*d+e*e+a*a);if(0==g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=a*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=b[0],k=b[1],l=b[2];b=b[3];c[0]=d*b+a*h+e*l-g*k;c[1]=e*b+a*k+g*h-d*l;c[2]=g*b+a*l+d*k-e*h;c[3]=a*b-d*h-e*k-g*l;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1],
g=b[2];b=a[0];var h=a[1],k=a[2];a=a[3];var l=a*d+h*g-k*e,m=a*e+k*d-b*g,n=a*g+b*e-h*d;d=-b*d-h*e-k*g;c[0]=l*a+d*-b+m*-k-n*-h;c[1]=m*a+d*-h+n*-b-l*-k;c[2]=n*a+d*-k+l*-h-m*-b;return c},toMat3:function(a,b){b||(b=mat3.create());var c=a[0],d=a[1],e=a[2];a=a[3];var g=c+c,h=d+d,k=e+e,l=c*g,m=c*h;c*=k;var n=d*h;d*=k;e*=k;g*=a;h*=a;a*=k;b[0]=1-(n+e);b[1]=m-a;b[2]=c+h;b[3]=m+a;b[4]=1-(l+e);b[5]=d-g;b[6]=c-h;b[7]=d+g;b[8]=1-(l+n);return b},toMat4:function(a,b){b||(b=mat4.create());var c=a[0],d=a[1],e=a[2];a=
a[3];var g=c+c,h=d+d,k=e+e,l=c*g,m=c*h;c*=k;var n=d*h;d*=k;e*=k;g*=a;h*=a;a*=k;b[0]=1-(n+e);b[1]=m-a;b[2]=c+h;b[3]=0;b[4]=m+a;b[5]=1-(l+e);b[6]=d-g;b[7]=0;b[8]=c-h;b[9]=d+g;b[10]=1-(l+n);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},slerp:function(a,b,c,d){d||(d=a);var e=c;0>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]&&(e=-1*c);d[0]=1-c*a[0]+e*b[0];d[1]=1-c*a[1]+e*b[1];d[2]=1-c*a[2]+e*b[2];d[3]=1-c*a[3]+e*b[3];return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};WebGLUtils=function(){var a=function(a,c){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,g=0;g<b.length;++g){try{e=a.getContext(b[g],c)}catch(h){}if(e)break}return e};return{create3DContext:a,setupWebGL:function(b,c){function d(a){var c=b.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+a+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return d('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),
null;(c=a(b,c))||d('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');return c}}}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(a,1E3/60)}}();
window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout}();(function(){var a=new Uint8Array([0,8,16,24,33,41,49,57,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,198,206,214,222,231,239,247,255]),b=new Uint8Array([0,17,34,51,68,85,102,119,136,153,170,187,204,221,238,255]),c=new Uint8Array([0,36,73,109,146,182,219,255]);new Uint8Array([0,255]);var d=function(a,b,c){this.settings=a;this.gl=b;this.webGL=c;this.canvas=void 0;this.texture=new Uint8Array(4194304);this.texrectVertexPositionBuffer=this.gl.createBuffer();this.texrectVertexTextureCoordBuffer=
this.gl.createBuffer();this.texrectVertexIndexBuffer=this.gl.createBuffer();this.texrectVertexIndices=[0,1,2,0,2,3];this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.texrectVertexIndexBuffer);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.texrectVertexIndices),this.gl.STATIC_DRAW);this.texrectVertexIndexBuffer.itemSize=1;this.texrectVertexIndexBuffer.numItems=6;this.colorsTexture0=this.gl.createTexture();this.textureCache={}};d.prototype.texRect=function(a,b,c,d,l,m,n,p,r,
q,u,t,v){var e=(q.lrs>>2)+1-q.uls|0;var g=(q.lrt>>2)+1-q.ult|0;this.initQuad(.00625*(b-160),-(c-120)/120,.00625*(d-160),-(l-120)/120,m/g,n/e,(m+(d-b)*p)/e,(n+(l-c)*r)/g,t);this.draw(this.gl,a,q,u,t,e,g,e,g,v)};d.prototype.formatTexture=function(a,b,c,d){if(void 0!==a.lrs&&void 0!==a.lrt&&void 0!==a.uls&&void 0!==a.ult){var e=(a.lrs>>2)+1-(a.uls|0);var g=(a.lrt>>2)+1-(a.ult|0);var h=e<<2;if(void 0===e||void 0===g)throw a=Error,a.message="Undefined tile dimensions",a;var k=this.texture;var r=a.line<<
3;var q=a.tmem<<3;if(3!==c.cycleType&&!0!==d)switch(!0===this.useTextureCache&&(this.textureCache[textureId]=k),a.fmt){case consts.TXT_FMT_RGBA:switch(a.siz){case consts.TXT_SIZE_16b:this.convertRGBA16(k,b,e,g,q,0,r,h);break;case consts.TXT_SIZE_32b:this.convertRGBA32(k,b,e,g,q,0,r,h);break;default:console.error("TODO: tile format "+a.fmt+", tile.size:"+a.siz)}break;case consts.TXT_FMT_IA:switch(a.siz){case consts.TXT_SIZE_8b:this.convertIA8(k,b,e,g,q,0,r,h);break;case consts.TXT_SIZE_4b:this.convertIA4(k,
b,e,g,q,0,r,h);break;case consts.TXT_SIZE_16b:this.convertIA16(k,b,e,g,q,0,r,h);break;default:console.error("TODO: tile format "+a.fmt+", tile.size"+a.siz)}break;case consts.TXT_FMT_CI:switch(a.siz){case consts.TXT_SIZE_8b:a.otherModeH&consts.TLUT_FMT_IA16?this.convertCI8_IA16(k,b,2048,c.tlut,e,g,q,0,r,h):this.convertCI8_RGBA16(k,b,2048,c.tlut,e,g,q,0,r,h);break;case consts.TXT_SIZE_16b:console.error("TODO: tile format "+a.fmt+", tile.size"+a.siz);break;case consts.TXT_SIZE_4b:a.otherModeH&consts.TLUT_FMT_IA16?
console.error("TODO: tile format "+a.fmt+", consts.TLUT_FMT_IA16"):this.convertCI4_RGBA16(k,b,2048+(a.pal<<4),c.tlut,e,g,q,0,r,h);break;default:console.error("TODO: tile format "+a.fmt+", tile.size"+a.siz)}break;case consts.TXT_FMT_I:switch(a.siz){case consts.TXT_SIZE_4b:this.convertI4(k,b,e,g,q,0,r,h);break;case consts.TXT_SIZE_8b:this.convertI8(k,b,e,g,q,0,r,h);break;default:console.error("TODO: tile format "+a.fmt+", tile.size"+a.siz)}break;default:console.error("TODO: tile format "+a.fmt+", tile.size"+
a.siz)}return{textureData:k,nextPow2Width:h,nextPow2Height:g}}};d.prototype.initQuad=function(a,b,c,d,l,m,n,p,r){a=[c,d,0,c,b,0,a,b,0,a,d,0];this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texrectVertexPositionBuffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.DYNAMIC_DRAW);this.texrectVertexPositionBuffer.itemSize=3;this.texrectVertexPositionBuffer.numItems=4;l=[n,p,n,m,l,m,l,p];this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texrectVertexTextureCoordBuffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,
new Float32Array(l),this.gl.STATIC_DRAW);this.texrectVertexTextureCoordBuffer.itemSize=2;this.texrectVertexTextureCoordBuffer.numItems=4};d.prototype.convertRGBA16=function(b,c,d,k,l,m,n,p){d|=0;var e;for(e=-(k|0);0>e;){var g=-d;var h=l|0;for(k=m|0;0>g;){var t=c[h]|0;var v=c[h+1]|0;g++;b[k]=a[t>>>3];h+=2;b[k+1]=a[v>>>6|(t&7)<<2];b[k+2]=a[v>>1&31];b[k+3]=v<<31>>31;k+=4}e++;l+=n;m+=p}};d.prototype.convertRGBA32=function(a,b,c,d,l,m,n,p){c|=0;var e,g;for(g=-(d|0);0>g;){var h=-c;var k=l|0;for(e=m|0;0>
h;){var v=b[k]|0;var w=b[k+1]|0;var x=b[k+2]|0;d=b[k+3]|0;h++;a[e]=v;k+=4;a[e+1]=w;a[e+2]=x;a[e+3]=d;e+=4}g++;l+=n<<1;m+=p}};d.prototype.convertIA8=function(a,b,c,d,l,m,n,p){c|=0;var e,g;for(g=-(d|0);0>g;){var h=-c;var k=l;for(e=m;0>h;){var v=b[k]|0;h++;d=v>>>4&15|v&240;k+=1;a[e]=d;a[e+1]=d;a[e+2]=d;a[e+3]=v<<4&240|v&15;e+=4}g++;l+=n;m+=p}};d.prototype.convertI4=function(a,c,d,k,l,m,n,p){d|=0;var e;for(e=-(k|0);0>e;){var g=-d;var h=l;for(k=m;0>g;){var t=c[h]&15;var v=c[h]&15;t=b[t];v=b[v];g++;a[k]=
t;h++;a[k+1]=t;a[k+2]=t;a[k+3]=t;a[k+4]=v;a[k+5]=v;a[k+6]=v;a[k+7]=v;k+=8}e++;l+=n;m+=p}};d.prototype.convertI8=function(a,b,c,d,l,m,n,p){c|=0;var e;for(e=-(d|0);0>e;){var g=-c;var h=l;for(d=m;0>g;){var k=b[h]|0;g++;h+=1;a[d]=k;a[d+1]=k;a[d+2]=k;a[d+3]=k;d+=4}e++;l+=n;m+=p}};d.prototype.convertCI4_RGBA16=function(b,c,d,k,l,m,n,p,r,q){l|=0;var e;for(e=-(m|0);0>e;){var g=-l;var h=n;for(m=p;0>g;){var w=c[h]&15;var x=c[h]&15;w=k[d+w]<<8|k[d+w+1];x=k[d+x]<<8|k[d+x+1];g++;b[m]=a[w>>11&31];h+=1;b[m+1]=a[w>>
6&31];b[m+2]=a[w>>1&31];b[m+3]=w<<31>>31;b[m+4]=a[x>>11&31];b[m+5]=a[x>>6&31];b[m+6]=a[x>>1&31];b[m+7]=x<<31>>31;m+=8}e++;n+=r;p+=q}};d.prototype.convertCI8_RGBA16=function(b,c,d,k,l,m,n,p,r,q){l|=0;var e;for(e=-(m|0);0>e;){var g=-l;var h=n;for(m=p;0>g;){var w=c[h];w=k[d+w]<<8|k[d+w+1];g++;h+=1;b[m]=a[w>>>11&31];b[m+1]=a[w>>>6&31];b[m+2]=a[w>>>1&31];b[m+3]=w<<31>>31;m+=4}e++;n+=r;p+=q}};d.prototype.convertCI8_IA16=function(a,b,c,d,l,m,n,p,r,q){l|=0;var e,g;for(g=-(m|0);0>g;){var h=-l;var k=n;for(e=
p;0>h;){var x=b[k];m=d[c+x];x=d[c+x+1];h++;k+=1;a[e]=m;a[e+1]=m;a[e+2]=m;a[e+3]=x;e+=4}g++;n+=r;p+=q}};d.prototype.convertIA16ToRGBA=function(a){return this.COLOR_RGBA(dwIntensity,dwIntensity,dwIntensity,dwAlpha)};d.prototype.convertIA4=function(a,b,d,k,l,m,n,p){d|=0;var e,g;for(g=-(k|0);0>g;){var h=-d;var t=l;for(e=m;0>h;){var v=b[t]|0;h+=2;k=c[(v&224)>>>5];t+=1;var w=c[(v&14)>>>1];a[e]=k;a[e+1]=k;a[e+2]=k;a[e+3]=v<<27>>31;a[e+4]=w;a[e+5]=w;a[e+6]=w;a[e+7]=v<<31>>31;e+=8}d&1&&(v=b[t]|0,k=c[(v&224)>>>
5],a[e]=k,a[e+1]=k,a[e+2]=k,a[e+3]=v<<27>>31);g++;l+=n;m+=p}};d.prototype.convertIA16=function(a,b,c,d,l,m,n,p){c|=0;var e,g;for(g=-(d|0);0>g;){var h=-c;var k=l;for(e=m;0>h;)d=b[k]|0,h++,a[e]=d,a[e+1]=d,a[e+2]=d,a[e+3]=b[k+1],k+=2,e+=4;g++;l+=n;m+=p}};d.prototype.draw=function(a,b,c,d,l,m,n,p,r,q){l.setBlendFunc();a.enableVertexAttribArray(this.webGL.shaderProgram.vertexPositionAttribute);a.bindBuffer(a.ARRAY_BUFFER,this.texrectVertexPositionBuffer);a.vertexAttribPointer(this.webGL.shaderProgram.vertexPositionAttribute,
this.texrectVertexPositionBuffer.itemSize,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.webGL.shaderProgram.textureCoordAttribute);a.bindBuffer(a.ARRAY_BUFFER,this.texrectVertexTextureCoordBuffer);a.vertexAttribPointer(this.webGL.shaderProgram.textureCoordAttribute,this.texrectVertexTextureCoordBuffer.itemSize,a.FLOAT,!1,0,0);d=this.formatTexture(c,d,l,q);0>=p||0>=r||void 0===d||void 0===d.textureData||(d=d.textureData,a.activeTexture(a.TEXTURE0+b),a.bindTexture(a.TEXTURE_2D,this.colorsTexture0),
a.texImage2D(a.TEXTURE_2D,0,a.RGBA,p,r,0,a.RGBA,a.UNSIGNED_BYTE,d),p=b=a.REPEAT,c.cms===consts.RDP_TXT_CLAMP||0===c.masks?b=a.CLAMP_TO_EDGE:c.cms===consts.RDP_TXT_MIRROR&&(b=a.MIRRORED_REPEAT),c.cmt===consts.RDP_TXT_CLAMP||0===c.maskt?p=a.CLAMP_TO_EDGE:c.cmt===consts.RDP_TXT_MIRROR&&(p=a.MIRRORED_REPEAT),a.texParameterf(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b),a.texParameterf(a.TEXTURE_2D,a.TEXTURE_WRAP_T,p),a.texParameterf(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameterf(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.NEAREST));a.uniform1i(this.webGL.shaderProgram.samplerUniform,this.colorsTexture0);0<l.primColor.length&&a.uniform4fv(this.webGL.shaderProgram.uPrimColor,l.primColor);0<l.fillColor.length&&a.uniform4fv(this.webGL.shaderProgram.uFillColor,l.fillColor);0<l.blendColor.length&&a.uniform4fv(this.webGL.shaderProgram.uBlendColor,l.blendColor);0<l.envColor.length&&a.uniform4fv(this.webGL.shaderProgram.uEnvColor,l.envColor);a.uniform1i(this.webGL.shaderProgram.cycleType,!0===q?3:l.cycleType);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
this.texrectVertexIndexBuffer);this.webGL.setMatrixUniforms(this.webGL.shaderProgram);!0===this.settings.wireframe?a.drawElements(a.LINE_LOOP,this.texrectVertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0):a.drawElements(a.TRIANGLES,this.texrectVertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0);this.texrectVertexTextureCoordBuffer.numItems=0;this.texrectVertexPositionBuffer.numItems=0};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsRenderer=d}).call(this);(function(){var a=new Uint8Array([0,8,16,24,33,41,49,57,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,198,206,214,222,231,239,247,255]);new Uint8Array([0,17,34,51,68,85,102,119,136,153,170,187,204,221,238,255]);var b=new Uint8Array([0,36,73,109,146,182,219,255]);new Uint8Array([0,255]);var c=function(a,b,c){return C1964jsRenderer.call(this,a,b,c)||this};$jscomp.inherits(c,C1964jsRenderer);c.prototype.convertRGBA16=function(b,c,g,h,k,l,m,n){g|=0;var d;for(d=-(h|0);0>d;){var e=-g;var q=
k|0;for(h=l|0;0>e;){var u=c[q^3]|0;var t=c[q+1^3]|0;e++;b[h]=a[u>>>3];q+=2;b[h+1]=a[t>>>6|(u&7)<<2];b[h+2]=a[t>>1&31];b[h+3]=t<<31>>31;h+=4}d++;k+=m;l+=n}};c.prototype.convertRGBA32=function(a,b,c,h,k,l,m,n){c|=0;var d,e;for(e=-(h|0);0>e;){var g=-c;var u=k|0;for(d=l|0;0>g;){var t=b[u+3]|0;var v=b[u+2]|0;var w=b[u+1]|0;h=b[u+0]|0;g++;a[d]=t;u+=4;a[d+1]=v;a[d+2]=w;a[d+3]=h;d+=4}e++;k+=m<<1;l+=n}};c.prototype.convertIA8=function(a,b,c,h,k,l,m,n){c|=0;var d,e;for(e=-(h|0);0>e;){var g=-c;var u=k;for(d=
l;0>g;){var t=b[u^3]|0;g++;h=t>>>4&15|t&240;u+=1;a[d]=h;a[d+1]=h;a[d+2]=h;a[d+3]=t<<4&240|t&15;d+=4}e++;k+=m;l+=n}};c.prototype.convertI4=function(a,b,c,h,k,l,m,n){c|=0;var d;for(d=-(h|0);0>d;){var e=-c;var g=k;for(h=l;0>e;){var u=b[g^3]&240;var t=b[g^3]&15;u|=u>>>4;t|=t<<4;e++;a[h]=u;g++;a[h+1]=u;a[h+2]=u;a[h+3]=u;a[h+4]=t;a[h+5]=t;a[h+6]=t;a[h+7]=t;h+=8}d++;k+=m;l+=n}};c.prototype.convertI8=function(a,b,c,h,k,l,m,n){c|=0;var d;for(d=-(h|0);0>d;){var e=-c;var g=k;for(h=l;0>e;){var u=b[g^3]|0;e++;
g+=1;a[h]=u;a[h+1]=u;a[h+2]=u;a[h+3]=u;h+=4}d++;k+=m;l+=n}};c.prototype.convertCI4_RGBA16=function(b,c,g,h,k,l,m,n,p,r){k|=0;var d;for(d=-(l|0);0>d;){var e=-k;var t=m;for(l=n;0>e;){var v=c[t^3]&15;var w=c[t^3]&15;v=h[g+v^3]<<8|h[g+v+1^3];w=h[g+w^3]<<8|h[g+w+1^3];e++;b[l]=a[v>>11&31];t+=1;b[l+1]=a[v>>6&31];b[l+2]=a[v>>1&31];b[l+3]=v<<31>>31;b[l+4]=a[w>>11&31];b[l+5]=a[w>>6&31];b[l+6]=a[w>>1&31];b[l+7]=w<<31>>31;l+=8}d++;m+=p;n+=r}};c.prototype.convertCI8_RGBA16=function(b,c,g,h,k,l,m,n,p,r){var d=
l|0;k|=0;var e;var t=new Uint16Array(256);for(l=e=0;256>e;l=++e)t[l]=h[g+(l<<1)+0^3]<<8|h[g+(l<<1)+1^3];for(d=-d;0>d;){l=-k;e=m;for(h=n;0>l;)g=t[c[e^3]],l++,e+=1,b[h]=a[g>>11&31],b[h+1]=a[g>>6&31],b[h+2]=a[g>>1&31],b[h+3]=g<<31>>31,h+=4;d++;m+=p;n+=r}};c.prototype.convertCI8_IA16=function(a,b,c,h,k,l,m,n,p,r){k|=0;var d,e;for(e=-(l|0);0>e;){var g=-k;var v=m;for(d=n;0>g;){var w=b[v^3];l=h[c+w^3];w=h[c+w+1^3];g++;v+=1;a[d]=l;a[d+1]=l;a[d+2]=l;a[d+3]=w;d+=4}e++;m+=p;n+=r}};c.prototype.convertIA16ToRGBA=
function(a){return this.COLOR_RGBA(dwIntensity,dwIntensity,dwIntensity,dwAlpha)};c.prototype.convertIA4=function(a,c,g,h,k,l,m,n){g|=0;var d,e;for(e=-(h|0);0>e;){var q=-g;var u=k;for(d=l;0>q;){var t=c[u^3]|0;q+=2;h=b[(t&224)>>>5];u+=1;var v=b[(t&14)>>>1];a[d]=h;a[d+1]=h;a[d+2]=h;a[d+3]=t<<27>>31;a[d+4]=v;a[d+5]=v;a[d+6]=v;a[d+7]=t<<31>>31;d+=8}g&1&&(t=c[u^3]|0,h=b[(t&224)>>>5],a[d]=h,a[d+1]=h,a[d+2]=h,a[d+3]=t<<27>>31);e++;k+=m;l+=n}};c.prototype.convertIA16=function(a,b,c,h,k,l,m,n){c|=0;var d,e;
for(e=-(h|0);0>e;){var g=-c;var u=k;for(d=l;0>g;)h=b[u^3]|0,g++,a[d]=h,a[d+1]=h,a[d+2]=h,a[d+3]=b[u+1^3],u+=2,d+=4;e++;k+=m;l+=n}};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsRendererLE=c}).call(this);(function(){var a=function(a,c){this.ucode=-1;this.processDisplayList=this.callBind(this.processDisplayList,this);this.core=a;this.gl=c;this.fogIsImplemented=!1;this.RICE_MATRIX_STACK=60;this.MAX_TEXTURES=8;this.MAX_VERTICES=80;this.MAX_TILES=8;this.tmem=new Uint8Array(4096);this.tlut=new Uint8Array(4096);this.activeTile=0;this.textureTile=[];this.zDepthImage={fmt:0,siz:0,width:0,addr:0};this.zColorImage={fmt:0,siz:0,width:0,addr:0};this.N64VertexList=[];this.geometryMode=0;this.gRSP={};this.gRSPlights=
[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}];this.gRSPn64lights=[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}];this.gRSPnumLights=0;this.matToLoad=mat4.create();this.lightingMat=mat4.create();this.triangleVertexColorBuffer=this.triangleVertexPositionBuffer=void 0;this.dlistStackPointer=0;this.dlistStack=[];this.renderer=1===a.isLittleEndian&&!1===a.useByteCompatibilityMode?new C1964jsRendererLE(this.core.settings,this.core.webGL.gl,this.core.webGL):new C1964jsRenderer(this.core.settings,this.core.webGL.gl,
this.core.webGL);this.texImg={};this.segments=[];this.gl.useProgram(this.core.webGL.shaderProgram);this.primColor=[0,0,0,0];this.fillColor=[0,0,0,0];this.blendColor=[0,0,0,0];this.envColor=[0,0,0,0];this.triVertices=new Float32Array(16384);this.triColorVertices=new Uint8Array(16384);this.triTextureCoords=new Float32Array(16384);this.tempVec4=new Float32Array(4);this.tempVec3Buffer=new ArrayBuffer(12*this.MAX_VERTICES);this.alphaTestEnabled=this.cycleType=this.otherModeH=this.otherModeL=0;this.bZBufferEnable=
this.bFogEnable=this.bLightingEnable=this.bTextureGen=this.bShade=!1;this.colorsTexture0=this.gl.createTexture();this.colorsTexture1=this.gl.createTexture();this.inverseTransposeCalculated=this.renderStateChanged=!1;this.normalMat=new Float32Array(4);this.modelViewInverse=mat4.create();this.modelViewTransposedInverse=mat4.create();this.n64ViewportWidth=640;this.n64ViewportHeight=480;this.n64ViewportTop=this.n64ViewportLeft=0;this.n64ViewportRight=320;this.n64ViewportBottom=240;for(a=0;a<this.MAX_TILES;)this.textureTile[a]=
[],a+=1;for(a=0;a<this.MAX_VERTICES;)this.N64VertexList[a]={},a+=1;for(a=0;a<consts.MAX_DL_STACK_SIZE;)this.dlistStack[a]={},a+=1;for(a=0;a<this.segments.length;)this.segments[a]=0,a+=1;this.gRSP.projectionMtxs=[];this.gRSP.modelviewMtxs=[];this.gRSP.ambientLightIndex=0;this.gRSP.ambientLightColor=0;this.gRSP.fAmbientLightA=0;this.gRSP.fAmbientLightR=0;this.gRSP.fAmbientLightG=0;this.gRSP.fAmbientLightB=0;this.gl.clearColor(0,0,0,0);this.gl.depthFunc(this.gl.LEQUAL);this.gl.clearDepth(1);this.gl.disable(this.gl.DEPTH_TEST);
for(a=0;a<this.RICE_MATRIX_STACK;)this.gRSP.projectionMtxs[a]=mat4.create(),this.gRSP.modelviewMtxs[a]=mat4.create(),a+=1;this.triangleVertexTextureCoordBuffer=void 0;this.resetMatrices();this.combine=new Uint32Array(16);this.makeUcodeData();this.makeUcodeMap();this.crcTable=this.makeCRCTable();this.vertexMult=0;this.vertexMultVals=[10,2,10,2,5,2,10,2,10,10,2,10,2,2,2,10,5,2,2,2,2]};a.prototype.makeUcodeMap=function(){this.microcodeMap0=[this.RSP_GBI1_SpNoop,this.RSP_GBI0_Mtx,this.RSP_GBI1_Reserved,
this.RSP_GBI1_MoveMem,this.RSP_GBI0_Vtx,this.RSP_GBI1_Reserved,this.RSP_GBI0_DL,this.RSP_GBI1_Reserved,this.RSP_GBI1_Reserved,this.RSP_GBI0_Sprite2DBase,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_GBI0_Tri4,this.RSP_GBI1_RDPHalf_Cont,this.RSP_GBI1_RDPHalf_2,this.RSP_GBI1_RDPHalf_1,this.RSP_GBI1_Line3D,this.RSP_GBI1_ClearGeometryMode,this.RSP_GBI1_SetGeometryMode,this.RSP_GBI1_EndDL,this.RSP_GBI1_SetOtherModeL,this.RSP_GBI1_SetOtherModeH,this.RSP_GBI1_Texture,this.RSP_GBI1_MoveWord,this.RSP_GBI1_PopMtx,this.RSP_GBI1_CullDL,this.RSP_GBI1_Tri1,this.RSP_GBI1_Noop,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RDP_TriFill,this.RDP_TriFillZ,this.RDP_TriTxtr,this.RDP_TriTxtrZ,this.RDP_TriShade,this.RDP_TriShadeZ,this.RDP_TriShadeTxtr,this.RDP_TriShadeTxtrZ,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,
this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.RSP_RDP_Nothing,this.DLParser_TexRect,this.DLParser_TexRectFlip,this.DLParser_RDPLoadSynch,this.DLParser_RDPPipeSynch,this.DLParser_RDPTileSynch,this.DLParser_RDPFullSynch,this.DLParser_SetKeyGB,this.DLParser_SetKeyR,this.DLParser_SetConvert,this.DLParser_SetScissor,this.DLParser_SetPrimDepth,this.DLParser_RDPSetOtherMode,
this.DLParser_LoadTLut,this.RSP_RDP_Nothing,this.DLParser_SetTileSize,this.DLParser_LoadBlock,this.DLParser_LoadTile,this.DLParser_SetTile,this.DLParser_FillRect,this.DLParser_SetFillColor,this.DLParser_SetFogColor,this.DLParser_SetBlendColor,this.DLParser_SetPrimColor,this.DLParser_SetEnvColor,this.DLParser_SetCombine,this.DLParser_SetTImg,this.DLParser_SetZImg,this.DLParser_SetCImg]};a.prototype.makeUcodeData=function(){return this.ucodeData=[[0,353123560,353123560,"RSP SW Version: 2.0D, 04-01-96"],
[4,731129711,731129711,"RSP SW Version: 2.0D, 04-01-96"],[16,2978415700,2978415700,"RSP SW Version: 2.0D, 04-01-96"],[0,1365711588,1365711588,"RSP SW Version: 2.0D, 04-01-96"],[0,1739959381,1739959381,"RSP SW Version: 2.0D, 04-01-96"],[0,1692172548,1692172548,"RSP SW Version: 2.0D, 04-01-96"],[0,815740477,815740477,"RSP SW Version: 2.0D, 04-01-96"],[0,4239752791,4239752791,"RSP SW Version: 2.0D, 04-01-96"],[0,3022058330,3022058330,"RSP SW Version: 2.0D, 04-01-96"],[0,1848033759,2090396098,"RSP SW Version: 2.0D, 04-01-96"],
[2,3224029116,3224029116,"RSP SW Version: 2.0G, 09-30-96"],[0,3858686908,3858686908,"RSP SW Version: 2.0G, 09-30-96"],[8,3837483736,2148702277,"RSP SW Version: 2.0G, 09-30-96"],[0,1913691846,1913691846,"RSP SW Version: 2.0H, 02-12-97"],[0,4064975364,4064975364,"RSP SW Version: 2.0H, 02-12-97"],[15,1879958574,1879958574,"RSP SW Version: 2.0H, 02-12-97"],[15,456149620,456149620,"RSP SW Version: 2.0H, 02-12-97"],[15,3837483736,2813523716,"RSP SW Version: 2.0H, 02-12-97"],[15,3837483736,2283808641,"RSP SW Version: 2.0H, 02-12-97"],
[0,3831936445,3831936445,"Unknown 0xe466b5bd, 0xe466b5bd"],[9,1885643107,1885643107,"Unknown 0x7064a163, 0x7064a163"],[0,1696784233,1908213645,"Unknown 0x6522df69, 0x71bd078d"],[0,1696784233,453780392,"Unknown 0x6522df69, 0x1b0c23a8"],[1,1170879118,1170879118,"RSP Gfx ucode F3DLX 0.95 Yoshitaka Yasumoto Nintendo."],[1,2565060873,2565060873,"RSP Gfx ucode F3DEX 0.95 Yoshitaka Yasumoto Nintendo."],[1,1564762256,1564762256,"RSP Gfx ucode F3DLP.Rej 0.96 Yoshitaka Yasumoto Nintendo.",0,1],[1,609180835,
609180835,"RSP Gfx ucode F3DEX 1.00 Yoshitaka Yasumoto Nintendo."],[1,1778525573,1778525573,"RSP Gfx ucode F3DEX.NoN 1.00 Yoshitaka Yasumoto Nintendo.",1],[1,352782014,352782014,"RSP Gfx ucode F3DLX.NoN 1.00 Yoshitaka Yasumoto Nintendo.",1],[1,1346317395,1346317395,"RSP Gfx ucode F3DEX.NoN 1.21 Yoshitaka Yasumoto Nintendo.",1],[1,3339043708,3339043708,"RSP Gfx ucode F3DLX 1.21 Yoshitaka Yasumoto Nintendo."],[1,2719244405,2719244405,"RSP Gfx ucode F3DLX.NoN 1.21 Yoshitaka Yasumoto Nintendo.",1],[1,
3059393242,3059393242,"RSP Gfx ucode L3DEX 1.21 Yoshitaka Yasumoto Nintendo."],[1,210656969,210656969,"RSP Gfx ucode F3DEX 1.21 Yoshitaka Yasumoto Nintendo."],[1,3808925170,2772300740,"RSP Gfx ucode F3DLP.Rej 1.21 Yoshitaka Yasumoto Nintendo.",0,1],[1,2931743357,2931743357,"RSP Gfx ucode F3DLX.Rej 1.21 Yoshitaka Yasumoto Nintendo.",0,1],[1,210656969,210656969,"RSP Gfx ucode F3DEX 1.23 Yoshitaka Yasumoto Nintendo"],[1,3339043708,3339043708,"RSP Gfx ucode F3DLX 1.23 Yoshitaka Yasumoto Nintendo."],[1,
711013645,711013645,"RSP Gfx ucode F3DLX 1.23 Yoshitaka Yasumoto Nintendo."],[1,210656969,210656969,"RSP Gfx ucode F3DEX 1.23 Yoshitaka Yasumoto Nintendo."],[12,4234488234,4234488234,"RSP Gfx ucode F3DEX 1.23 Yoshitaka Yasumoto Nintendo."],[1,2775382422,2775382422,"RSP Gfx ucode L3DEX 1.23 Yoshitaka Yasumoto Nintendo."],[1,3431183423,3431183423,"RSP Gfx ucode F3DEX.NoN 1.23 Yoshitaka Yasumoto Nintendo.",1],[1,3397986208,3397986208,"RSP Gfx ucode F3DLX.Rej 1.23 Yoshitaka Yasumoto Nintendo.",0,1],[1,
627612789,3192396520,"RSP Gfx ucode F3DLP.Rej 1.23 Yoshitaka Yasumoto Nintendo.",0,1],[1,3537323959,3537323959,"RSP Gfx ucode F3DLX.NoN 1.23 Yoshitaka Yasumoto Nintendo.",1],[1,2823407704,1540565850,"RSP Gfx ucode F3DTEX/A 1.23 Yoshitaka Yasumoto Nintendo."],[7,3973625714,3973625714,"RSP Gfx ucode S2DEX 1.06 Yoshitaka Yasumoto Nintendo."],[7,4119933685,4119933685,"RSP Gfx ucode S2DEX 1.07 Yoshitaka Yasumoto Nintendo."],[7,2518538257,2518538257,"RSP Gfx ucode S2DEX 1.03 Yoshitaka Yasumoto Nintendo."],
[5,1040726778,1915721676,"RSP Gfx ucode F3DEX.NoN fifo 2.03 Yoshitaka Yasumoto 1998 Nintendo.",1],[5,2818902993,2818902993,"RSP Gfx ucode F3DEX fifo 2.03 Yoshitaka Yasumoto 1998 Nintendo."],[5,1317033456,1317033456,"RSP Gfx ucode F3DLX.Rej fifo 2.03 Yoshitaka Yasumoto 1998 Nintendo.",0,1],[5,2884633077,2884633077,"RSP Gfx ucode F3DFLX.Rej fifo 2.03F Yoshitaka Yasumoto 1998 Nintendo.",0,1],[5,2914301574,2914301574,"RSP Gfx ucode F3DEX fifo 2.04 Yoshitaka Yasumoto 1998 Nintendo."],[5,2006854299,2006854299,
"RSP Gfx ucode F3DEX.NoN fifo 2.04 Yoshitaka Yasumoto 1998 Nintendo.",1],[5,2831891977,2831891977,"RSP Gfx ucode L3DEX fifo 2.04 Yoshitaka Yasumoto 1998 Nintendo."],[5,705905110,705905110,"RSP Gfx ucode F3DEX fifo 2.04H Yoshitaka Yasumoto 1998 Nintendo."],[5,1040726778,2309546221,"RSP Gfx ucode F3DEX.NoN fifo 2.05 Yoshitaka Yasumoto 1998 Nintendo.",1],[5,1231337309,1231337309,"RSP Gfx ucode F3DEX.NoN fifo 2.05 Yoshitaka Yasumoto 1998 Nintendo.",1],[5,971237722,971237722,"RSP Gfx ucode F3DEX fifo 2.05 Yoshitaka Yasumoto 1998 Nintendo."],
[5,3532731682,3532731682,"RSP Gfx ucode F3DAM fifo 2.05 Yoshitaka Yasumoto 1998 Nintendo."],[5,1040726778,3382199359,"RSP Gfx ucode F3DEX xbus 2.05 Yoshitaka Yasumoto 1998 Nintendo."],[5,4095232637,4095232637,"RSP Gfx ucode F3DEX fifo 2.06 Yoshitaka Yasumoto 1998 Nintendo."],[5,1499105502,1499105502,"RSP Gfx ucode F3DEX.Rej fifo 2.06 Yoshitaka Yasumoto 1998 Nintendo.",0,1],[5,39450468,39450468,"RSP Gfx ucode F3DLX.Rej fifo 2.06 Yoshitaka Yasumoto 1998 Nintendo.",0,1],[5,3785705338,3785705338,"RSP Gfx ucode F3DEX.NoN xbus 2.06 Yoshitaka Yasumoto 1998 Nintendo.",
1],[5,1291455001,1291455001,"RSP Gfx ucode F3DZEX.NoN fifo 2.06H Yoshitaka Yasumoto 1998 Nintendo.",1],[5,750621972,1598077429,"RSP Gfx ucode F3DZEX.NoN fifo 2.06H Yoshitaka Yasumoto 1998 Nintendo.",1],[5,1040726778,2284224756,"RSP Gfx ucode L3DEX fifo 2.07 Yoshitaka Yasumoto 1998 Nintendo."],[5,3736193728,3736193728,"RSP Gfx ucode F3DEX.NoN fifo 2.07 Yoshitaka Yasumoto 1998 Nintendo.",1],[5,4095232637,4095232637,"RSP Gfx ucode F3DEX fifo 2.07 Yoshitaka Yasumoto 1998 Nintendo."],[5,1258372704,1258372704,
"RSP Gfx ucode F3DEX xbus 2.07 Yoshitaka Yasumoto 1998 Nintendo."],[5,3517331510,3517331510,"RSP Gfx ucode L3DEX fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[5,2535011943,2535011943,"RSP Gfx ucode F3DEX fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[5,2450824104,2450824104,"RSP Gfx ucode F3DEX fifo 2.08 Yoshitaka Yasumoto/Kawasedo 1999."],[5,2920265871,2920265871,"RSP Gfx ucode F3DEX xbus 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[5,3312644968,3312644968,"RSP Gfx ucode F3DLX.Rej xbus 2.08 Yoshitaka Yasumoto 1999 Nintendo."],
[5,1040726778,1948591250,"RSP Gfx ucode F3DEX.NoN xbus 2.08 Yoshitaka Yasumoto 1999 Nintendo.",1],[5,2620316528,3935889216,"RSP Gfx ucode F3DEX.NoN fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo.",1],[5,2044724390,2044724390,"RSP Gfx ucode F3DLX.Rej fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo.",0,1],[5,2859119562,2859119562,"RSP Gfx ucode F3DEX.Rej fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo.",0,1],[5,744062479,744062479,"RSP Gfx ucode F3DEX fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[10,1314864699,
1314864699,"RSP Gfx ucode F3DEXBG.NoN fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo.",1],[5,1643321442,1643321442,"RSP Gfx ucode F3DEX.NoN fifo 2.08H Yoshitaka Yasumoto 1999 Nintendo.",1],[5,6249329,6249329,"RSP Gfx ucode F3DZEX.NoN fifo 2.08I Yoshitaka Yasumoto/Kawasedo 1999.",1],[3,1099144478,1099144478,"RSP Gfx ucode S2DEX fifo 2.05 Yoshitaka Yasumoto 1998 Nintendo."],[3,750621972,3325680569,"RSP Gfx ucode S2DEX xbus 2.06 Yoshitaka Yasumoto 1998 Nintendo."],[3,3968459379,3968459379,"RSP Gfx ucode S2DEX fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo."],
[3,2485762006,2485762006,"RSP Gfx ucode S2DEX xbus 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[3,750621972,3968459379,"RSP Gfx ucode S2DEX fifo 2.08 Yoshitaka Yasumoto 1999 Nintendo."],[6,1794077944,1794077944,"Unknown 0x6aef74f8, 0x6aef74f8"],[6,1280240344,1280240344,"Unknown 0x4c4eead8, 0x4c4eead8"],[1,3980533402,3980533402,"Unknown 0xed421e9a, 0xed421e9a"],[5,930421042,1438711077,"Unknown 0x37751932, 0x55c0fd25"],[11,3188425703,3188425703,"Unknown 0xbe0b83e7, 0xbe0b83e7"],[17,48792271,718369409,
"Unknown 0x02e882cf, 0x2ad17281"],[17,528322840,3669105051,"Unknown 0x1f7d9118, 0xdab2199b"],[17,1951938068,1951938068,"Unknown 0x74583614, 0x74583614"],[17,3816697673,515260376,"Unknown 0xe37e2f49, 0x1eb63fd8"],[17,2363600701,2994081442,"Unknown 0x8ce1af3d, 0xb2760ea2"],[18,2070436210,1471678810,"Unknown 0x7b685972, 0x57b8095a"],[18,3912088475,1471678810,"Unknown 0xe92dbb9b, 0x57b8095a"],[18,3871976641,1710753861,"Unknown 0xe6c9acc1, 0x65f80845"],[18,1696784233,1913358496,"Unknown 0x6522df69, 0x720b88a0"],
[18,1696784233,4058561182,"Unknown 0x6522df69, 0xf1e8ba9e"],[19,2760294099,2760294099,"Unknown 0xa486bed3, 0xa486bed3"],[19,1800508289,4273655768,"Unknown in Toukan Road"],[20,1831469489,1831469489,"RSP Gfx ucode ZSortp 0.33 Yoshitaka Yasumoto Nintendo."]]};a.prototype.makeCRCTable=function(){var a,c,d;var e=[];var g=[0,1,2,4,5,7,8,10,11,12,16,22,23,26];var h=a=c=0;for(d=g.length;0<=d?a<d:a>d;h=0<=d?++a:--a)c|=1<<31-g[h];for(h=g=0;256>g;h=++g){a=h;for(d=0;8>d;++d)a=a&1?(c^a>>>1)>>>0:a>>>1;e[h]=a}return e};
a.prototype.computeCRC32=function(a,c,d){a=(a^4294967295)>>>0;if(!0===this.core.useByteCompatibilityMode||0===this.core.isLittleEndian)for(;0<d;)a=(this.crcTable[(a^this.core.memory.u8[c^3])&255]^a>>>8)>>>0,c++,d--;else for(;0<d;)a=(this.crcTable[(a^this.core.memory.u8[c])&255]^a>>>8)>>>0,c++,d--;return(a^4294967295)>>>0};a.prototype.DLParser_CheckUCode=function(a,c,d,e){var b;d=-1;c&=536870911;var h="";if(c<this.core.currentRdramSize+4096)for(e=b=0;4094>b;e=++b)if(82===this.core.memory.readRdram8(c+
e)&&83===this.core.memory.readRdram8(c+e+1)&&80===this.core.memory.readRdram8(c+e+2)){for(;32<=this.core.memory.readRdram8(c+e);)h+=String.fromCharCode(this.core.memory.readRdram8(c+e)),e++;this.computeCRC32(0,a,8);a=this.computeCRC32(0,a,2048);d=this.DLParser_IdentifyUcode(a);break}-1!==d?console.log("Detected microcode "+d):(console.log("Unknown ucode. Using microcode #5"),d=5);return d};a.prototype.RDP_SetUcodeMap=function(a){switch(a){case 1:this.microcodeMap0[4]=this.RSP_GBI1_Vtx,this.microcodeMap0[9]=
this.RSP_GBI1_Sprite2DBase,this.microcodeMap0[175]=this.RSP_GBI1_LoadUCode,this.microcodeMap0[176]=this.RSP_GBI1_BranchZ,this.microcodeMap0[177]=this.RSP_GBI1_Tri2,this.microcodeMap0[178]=this.RSP_GBI1_ModifyVtx,this.microcodeMap0[193]=this.RSP_S2DEX_SPObjLoadTxtr_Ucode1}};a.prototype.DLParser_IdentifyUcode=function(a){var b,d;var e=b=0;for(d=this.ucodeData.length;0<=d?b<d:b>d;e=0<=d?++b:--b)if(this.ucodeData[e][2]===a)return this.ucodeData[e][0];return-1};a.prototype.callBind=function(a,c){return function(){return a.call(c)}};
a.prototype.processDisplayList=function(){!0===this.core.showFB&&(this.initBuffers(),this.core.webGL.show3D(),this.core.showFB=!1,this.resetState());var a=document.getElementById("wireframe");this.core.settings.wireframe=!1;null!==a&&a.checked&&(this.core.settings.wireframe=!0);this.core.webGL.beginDList();this.dlParserProcess();this.core.interrupts.delayNextInterrupt=!0;this.core.interrupts.triggerDPInterrupt(0,!1)};a.prototype.videoLog=function(a){};a.prototype.checkUcode=function(){if(void 0===
this.currentMicrocodeMap){var a=this.core.memory.getInt32(this.core.memory.spMemUint8Array,consts.TASK_MICROCODE,this.core.memory.spMemUint32Array);var c=this.core.memory.getInt32(this.core.memory.spMemUint8Array,consts.TASK_MICROCODE_DATA,this.core.memory.spMemUint32Array);var d=this.core.memory.getInt32(this.core.memory.spMemUint8Array,consts.TASK_MICROCODE_SIZE,this.core.memory.spMemUint32Array);var e=this.core.memory.getInt32(this.core.memory.spMemUint8Array,consts.TASK_MICROCODE_DATA_SIZE,this.core.memory.spMemUint32Array);
this.ucode=this.DLParser_CheckUCode(a,c,d,e);this.RDP_SetUcodeMap(this.ucode);this.vertexMult=1/this.vertexMultVals[this.ucode];this.currentMicrocodeMap=this.microcodeMap0}};a.prototype.dlParserProcess=function(){var a;this.checkUcode();this.dlistStackPointer=0;this.dlistStack[this.dlistStackPointer].pc=this.core.memory.getInt32(this.core.memory.spMemUint8Array,consts.TASK_DATA_PTR,this.core.memory.spMemUint32Array)>>>0;this.dlistStack[this.dlistStackPointer].countdown=consts.MAX_DL_COUNT;this.renderReset();
for(a=1E4;0<=this.dlistStackPointer&&0<a;){a--;var c=this.dlistStack[this.dlistStackPointer].pc;var d=this.getCommand(c);d=this.currentMicrocodeMap[d];this.dlistStack[this.dlistStackPointer].pc+=8;d.call(this,c);0<=this.dlistStackPointer&&(--this.dlistStack[this.dlistStackPointer].countdown,0>this.dlistStack[this.dlistStackPointer].countdown&&--this.dlistStackPointer)}0>=a&&(alert("Too many dlist calls"),this.core.terminate=!0)};a.prototype.RDP_GFX_PopDL=function(){--this.dlistStackPointer};a.prototype.RSP_RDP_Nothing=
function(a){};a.prototype.RSP_GBI1_MoveMem=function(a){var b=this.getGbi1Type(a);var d=this.getGbi0DlistAddr(a);d=this.getRspSegmentAddr(d);switch(b){case consts.RSP_GBI1_MV_MEM_VIEWPORT:this.RSP_MoveMemViewport(d);break;case consts.RSP_GBI1_MV_MEM_L0:case consts.RSP_GBI1_MV_MEM_L1:case consts.RSP_GBI1_MV_MEM_L2:case consts.RSP_GBI1_MV_MEM_L3:case consts.RSP_GBI1_MV_MEM_L4:case consts.RSP_GBI1_MV_MEM_L5:case consts.RSP_GBI1_MV_MEM_L6:case consts.RSP_GBI1_MV_MEM_L7:b=(b-consts.RSP_GBI1_MV_MEM_L0)/
2;this.RSP_MoveMemLight(b,d,a);break;case consts.RSP_GBI1_MV_MEM_MATRIX1:this.RSP_GFX_Force_Matrix(a)}};a.prototype.RSP_GFX_Force_Matrix=function(a){return this.RSP_GBI0_Mtx(a)};a.prototype.RSP_MoveMemViewport=function(a){this.videoLog("RSP_MoveMemViewport");if(a+16>=this.core.currentRdramSize)console.warn("viewport addresses beyond mem size");else{var b=new Float32Array(4);var d=new Float32Array(4);b[0]=this.getShort(a+0);b[1]=this.getShort(a+2);b[2]=this.getShort(a+4);b[3]=this.getShort(a+6);d[0]=
this.getShort(a+8);d[1]=this.getShort(a+10);d[2]=this.getShort(a+12);d[3]=this.getShort(a+14);a=d[0]/4;d=d[1]/4;this.n64ViewportWidth=b[0]/4;this.n64ViewportHeight=b[1]/4;0>this.n64ViewportWidth&&(this.n64ViewportWidth=-this.n64ViewportWidth);0>this.n64ViewportHeight&&(this.n64ViewportHeight=-this.n64ViewportHeight);this.n64ViewportLeft=a-this.n64ViewportWidth;this.n64ViewportTop=d-this.n64ViewportHeight;this.n64ViewportRight=a+this.n64ViewportWidth;this.n64ViewportBottom=d+this.n64ViewportHeight}};
a.prototype.RSP_GBI1_SpNoop=function(a){};a.prototype.RSP_GBI1_Reserved=function(a){};a.prototype.setProjection=function(a,c,d){if(!0===c){if(this.gRSP.projectionMtxTop>=this.RICE_MATRIX_STACK-1){this.gRSP.bMatrixIsUpdated=!0;this.inverseTransposeCalculated=!1;return}this.gRSP.projectionMtxTop+=1;d?mat4.set(a,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop]):mat4.multiply(this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop-1],a,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop])}else d?mat4.set(a,
this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop]):mat4.multiply(this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop],a,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop]);this.gRSP.bMatrixIsUpdated=!0;this.inverseTransposeCalculated=!1;0<this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop][14]?mat4.ortho(-1024,1024,-1024,1024,-1023,1024,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop]):mat4.ortho(-1,1,-1,1,-1,1,1,1024,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop])};a.prototype.setWorldView=
function(a,c,d){if(!0===c){if(this.gRSP.modelViewMtxTop>=this.RICE_MATRIX_STACK-1){this.gRSP.bMatrixIsUpdated=!0;this.inverseTransposeCalculated=!1;return}this.gRSP.modelViewMtxTop+=1;d?mat4.set(a,this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop]):mat4.multiply(this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop-1],a,this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop])}else d?mat4.set(a,this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop]):mat4.multiply(this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop],
a,this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop]);this.gRSP.bMatrixIsUpdated=!0;this.inverseTransposeCalculated=!1};a.prototype.RSP_GBI0_Mtx=function(a){var b=this.getGbi0DlistAddr(a);b=this.getRspSegmentAddr(b);this.loadMatrix(b);this.gbi0isProjectionMatrix(a)?this.setProjection(this.matToLoad,this.gbi0PushMatrix(a),this.gbi0LoadMatrix(a)):this.setWorldView(this.matToLoad,this.gbi0PushMatrix(a),this.gbi0LoadMatrix(a));this.renderStateChanged=!0};a.prototype.loadMatrix=function(a){var b,d;if(a+
64>this.core.currentRdramSize)console.warn("loading matrix beyond ram size");else{var e=d=0;for(var g=this.core.memory.u8,h=this.matToLoad;4>e;){for(b=0;4>b;)h[d]=1.52587890625E-5*((g[a]<<24|g[a+1]<<16|g[a+32]<<8|g[a+32+1])>>0),d+=1,a+=2,b+=1;e+=1}}};a.prototype.DLParser_SetTImg=function(a){this.texImg.format=this.getTImgFormat(a);this.texImg.size=this.getTImgSize(a);this.texImg.width=this.getTImgWidth(a)+1;this.texImg.addr=this.getTImgAddr(a);this.texImg.bpl=this.texImg.width<<this.texImg.size>>
1;this.texImg.changed=!0};a.prototype.RSP_GBI0_Vtx=function(a){var b=this.getGbi0NumVertices(a)+1;var d=this.getGbi0Vertex0(a);a=this.getGbi0DlistAddr(a);a=this.getRspSegmentAddr(a);d+b>this.MAX_VERTICES&&(b=32-d);a+16*b>this.core.currentRdramSize?console.warn("vertex is beyond ram size"):this.processVertexData(a,d,b)};a.prototype.RSP_GBI1_Vtx=function(a){var b=this.getGbi1NumVertices(a);var d=this.getGbi1Vertex0(a);a=this.getGbi0DlistAddr(a);a=this.getRspSegmentAddr(a);d+b>this.MAX_VERTICES||(a>
this.core.currentRdramSize?console.warn("vertex is beyond ram size"):this.processVertexData(a,d,b))};a.prototype.RSP_GBI1_Sprite2DBase=function(a){this.videoLog("todo: RSP_GBI1_Sprite2DBase")};a.prototype.RSP_GBI1_LoadUCode=function(a){this.videoLog("todo: RSP_GBI1_LoadUCode")};a.prototype.RSP_GBI1_BranchZ=function(a){this.videoLog("todo: RSP_GBI1_BranchZ")};a.prototype.RSP_GBI1_Tri2=function(a){var b=this.vertexMult;var d=this.getGbi0Tri1V0(a)*b;var e=this.getGbi0Tri1V1(a)*b;var g=this.getGbi0Tri1V2(a)*
b;d=this.prepareTriangle(d,e,g);!1!==d&&(d=this.getGbi1Tri2V3(a)*b,e=this.getGbi1Tri2V4(a)*b,a=this.getGbi1Tri2V5(a)*b,d=this.prepareTriangle(d,e,a),!1!==d&&(a=this.dlistStack[this.dlistStackPointer].pc,a=this.getCommand(a),this.currentMicrocodeMap[a]!==this.RSP_GBI1_Tri2&&!0===this.renderStateChanged&&this.drawScene(!1,this.activeTile)))};a.prototype.RSP_GBI1_ModifyVtx=function(a){var b=this.getGbi1Type(a);var d=(this.getWord0(a)&65535)>>>1;a=this.getWord1(a);if(!(80<d))switch(b){case consts.RSP_MV_WORD_OFFSET_POINT_RGBA:case consts.RSP_MV_WORD_OFFSET_POINT_XYSCREEN:case consts.RSP_MV_WORD_OFFSET_POINT_ZSCREEN:case consts.RSP_MV_WORD_OFFSET_POINT_ST:this.modifyVertexInfo(b,
d,a)}};a.prototype.RSP_S2DEX_SPObjLoadTxtr_Ucode1=function(a){this.videoLog("todo: RSP_S2DEX_SPObjLoadTxtr_Ucode1")};a.prototype.processLights=function(a,c,d,e,g){var b=this.normalMat;var k=0;a|=0;for(c|=0;0>c;){var l=this.N64VertexList[a+c];b[0]=this.getVertexNormalX(d);c+=1;b[1]=this.getVertexNormalY(d);b[2]=this.getVertexNormalZ(d);var m=new Float32Array(this.tempVec3Buffer,k);l.u=this.getVertexS(d)*e;l.w=this.getVertexW(d);mat4.multiplyVec3(this.modelViewTransposedInverse,b,m);l.y=this.getVertexY(d);
l.z=this.getVertexZ(d);m=vec3.normalize(m);l.v=this.getVertexT(d)*g;l.x=this.getVertexX(d);this.lightVertex(m,l);d+=16;k+=12}};a.prototype.processShades=function(a,c,d,e,g){for(var b;0>c;)b=this.N64VertexList[a+c],b.w=this.getVertexW(d),b.x=this.getVertexX(d),b.y=this.getVertexY(d),c+=1,b.u=this.getVertexS(d)*e,b.z=this.getVertexZ(d),b.r=this.getVertexColorR(d),b.g=this.getVertexColorG(d),b.b=this.getVertexColorB(d),b.a=this.getVertexAlpha(d),b.v=this.getVertexT(d)*g,d+=16};a.prototype.processPrims=
function(a,c,d,e,g){for(var b;0>c;)b=this.N64VertexList[a+c],b.w=this.getVertexW(d),b.r=this.primColor[0],b.x=this.getVertexX(d),c+=1,b.u=this.getVertexS(d)*e,b.g=this.primColor[1],b.y=this.getVertexY(d),b.b=this.primColor[2],b.z=this.getVertexZ(d),b.a=this.primColor[3],b.v=this.getVertexT(d)*g,d+=16};a.prototype.processVertexData=function(a,c,d){a|=0;var b=-d;c+=d;var g=this.textureTile[this.activeTile];d=1/(((g.lrs>>2)+1-g.uls|0)<<5);g=1/(((g.lrt>>2)+1-g.ult|0)<<5);!0===this.bLightingEnable?(!1===
this.inverseTransposeCalculated&&!0===this.gRSP.bMatrixIsUpdated&&(mat4.inverse(this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop],this.modelViewInverse),mat4.transpose(this.modelViewInverse,this.modelViewTransposedInverse),this.inverseTransposeCalculated=!0),this.processLights(c,b,a,d,g)):!0===this.bShade?this.processShades(c,b,a,d,g):this.processPrims(c,b,a,d,g)};a.prototype.modifyVertexInfo=function(a,c,d){switch(a){case consts.RSP_MV_WORD_OFFSET_POINT_RGBA:alert("RSP_MV_WORD_OFFSET_POINT_RGBA");
break;case consts.RSP_MV_WORD_OFFSET_POINT_XYSCREEN:alert("RSP_MV_WORD_OFFSET_POINT_XYSCREEN");break;case consts.RSP_MV_WORD_OFFSET_POINT_ZSCREEN:alert("RSP_MV_WORD_OFFSET_POINT_XYSCREEN");break;case consts.RSP_MV_WORD_OFFSET_POINT_ST:alert("RSP_MV_WORD_OFFSET_POINT_ST")}};a.prototype.DLParser_SetCImg=function(a){this.zColorImage.fmt=this.getSetTileFmt(a);this.zColorImage.siz=this.getSetTileSiz(a);this.zColorImage.width=this.getTImgWidth(a)+1;a=this.getGbi0DlistAddr(a);this.zColorImage.addr=this.getRspSegmentAddr(a)};
a.prototype.DLParser_SetZImg=function(a){this.zDepthImage.fmt=this.getSetTileFmt(a);this.zDepthImage.siz=this.getSetTileSiz(a);this.zDepthImage.width=this.getTImgWidth(a)+1;a=this.getGbi0DlistAddr(a);this.zDepthImage.addr=this.getRspSegmentAddr(a)};a.prototype.RSP_GBI0_DL=function(a){var b=this.getGbi0DlistAddr(a);b=this.getRspSegmentAddr(b);this.getGbi0DlistParam(a)===consts.RSP_DLIST_PUSH&&(this.dlistStackPointer+=1);this.dlistStack[this.dlistStackPointer].pc=b;this.dlistStack[this.dlistStackPointer].countdown=
consts.MAX_DL_COUNT};a.prototype.DLParser_SetCombine=function(a){var b=this.getCombineLo(a)>>>0;a=this.getCombineHi(a)>>>0;this.combine[0]=b>>20&15;this.combine[2]=a>>28&15;this.combine[4]=b>>15&31;this.combine[6]=a>>15&7;this.combine[1]=b>>12&7;this.combine[3]=a>>12&7;this.combine[5]=b>>9&7;this.combine[7]=a>>9&7;this.combine[8]=b>>5&15;this.combine[10]=a>>24&15;this.combine[12]=b&31;this.combine[14]=a>>6&7;this.combine[9]=a>>21&7;this.combine[11]=a>>3&7;this.combine[13]=a>>18&7;this.combine[15]=
a&7;this.core.webGL.setCombineUniforms(this,this.core.webGL.shaderProgram)};a.prototype.RSP_GBI1_MoveWord=function(a){switch(this.getGbi0MoveWordType(a)){case consts.RSP_MOVE_WORD_MATRIX:this.RSP_RDP_InsertMatrix();break;case consts.RSP_MOVE_WORD_SEGMENT:var b=this.getGbi0MoveWordOffset(a)>>2&15;a=this.getGbi0MoveWordValue(a)&16777215;this.segments[b]=a;break;case consts.RSP_MOVE_WORD_NUMLIGHT:a=(this.getGbi0MoveWordValue(a)<<1>>>6)-1;this.gRSPnumLights=this.gRSP.ambientLightIndex=a;break;case consts.RSP_MOVE_WORD_LIGHTCOL:var d=
this.getGbi0MoveWordOffset(a)>>>5;b=this.getGbi0MoveWordOffset(a)>>>0&7;0===b&&(d===this.gRSP.ambientLightIndex?this.setAmbientLight(this.getGbi0MoveWordValue(a)):this.setLightCol(d,this.getGbi0MoveWordValue(a)));break;case consts.RSP_MOVE_WORD_POINTS:alert("RSP_MOVE_WORD_POINTS")}};a.prototype.setAmbientLight=function(a){this.gRSP.ambientLightColor=a;this.gRSP.fAmbientLightR=a>>>24&255;this.gRSP.fAmbientLightG=a>>>16&255;this.gRSP.fAmbientLightB=a>>>8&255;this.gRSP.fAmbientLightA=a&255};a.prototype.setLightCol=
function(a,c){this.gRSPlights[a].r=c>>>24&255;this.gRSPlights[a].g=c>>>16&255;this.gRSPlights[a].b=c>>>8&255;this.gRSPlights[a].a=c>>>0&255};a.prototype.setLightDirection=function(a,c,d,e){var b=new Float32Array(3);b[0]=c;b[1]=d;b[2]=e;b=vec3.normalize(b);this.gRSPlights[a].x=b[0];this.gRSPlights[a].y=b[1];this.gRSPlights[a].z=b[2]};a.prototype.lightVertex=function(a,c){var b,e;var g=this.gRSP.fAmbientLightR;var h=this.gRSP.fAmbientLightG;var k=this.gRSP.fAmbientLightB;var l=b=0;for(e=this.gRSPnumLights;0<=
e?b<e:b>e;l=0<=e?++b:--b){var m=this.gRSPlights[l];l=a[0]*m.x+a[1]*m.y+a[2]*m.z;0<l&&(g+=m.r*l,h+=m.g*l,k+=m.b*l)}0>g&&(g=0);0>h&&(h=0);0>k&&(k=0);255<g&&(g=255);255<h&&(h=255);255<k&&(k=255);c.r=g;c.g=h;c.b=k;c.a=255};a.prototype.RSP_MoveMemLight=function(a,c,d){16<=a||(this.gRSPn64lights[a].dwRGBA=this.getGbi0MoveWordValue(c),this.gRSPn64lights[a].dwRGBACopy=this.getGbi0MoveWordValue(c+4),this.gRSPn64lights[a].x=this.getVertexLightX(c),this.gRSPn64lights[a].y=this.getVertexLightY(c),this.gRSPn64lights[a].z=
this.getVertexLightZ(c),a===this.gRSP.ambientLightIndex?(a=this.gRSPn64lights[a].dwRGBA,this.setAmbientLight(a)):(this.setLightCol(a,this.gRSPn64lights[a].dwRGBA),0!==this.getGbi0MoveWordValue(c+4)&&this.setLightDirection(a,this.gRSPn64lights[a].x,this.gRSPn64lights[a].y,this.gRSPn64lights[a].z)))};a.prototype.renderReset=function(){this.gRSP.projectionMtxTop=0;this.gRSP.modelViewMtxTop=0;this.gRSP.numVertices=0;this.gRSP.curTile=0;this.gl.clearDepth(1);this.gl.depthMask(!0);this.gl.clear(this.gl.DEPTH_BUFFER_BIT)};
a.prototype.resetMatrices=function(){var a;this.gRSP.projectionMtxTop=0;this.gRSP.modelViewMtxTop=0;mat4.identity(this.gRSP.modelviewMtxs[0]);mat4.identity(this.gRSP.projectionMtxs[0]);for(a=0;a<this.RICE_MATRIX_STACK;)mat4.identity(this.gRSP.projectionMtxs[a]),mat4.identity(this.gRSP.modelviewMtxs[a]),a+=1;this.inverseTransposeCalculated=this.gRSP.bMatrixIsUpdated=!1};a.prototype.RSP_RDP_InsertMatrix=function(){this.videoLog("TODO: Insert Matrix");this.gRSP.bMatrixIsUpdated=!1};a.prototype.DLParser_SetScissor=
function(a){this.videoLog("TODO: DLParser_SetScissor")};a.prototype.RSP_GBI1_SetOtherModeH=function(a){var b=this.getOtherModeH(a);this.otherModeH&=~((1<<(b>>>0&255))-1<<(b>>>8&255));this.otherModeH|=this.getOtherModeH(a+4);this.renderStateChanged=!0};a.prototype.RSP_GBI1_SetOtherModeL=function(a){var b=this.getOtherModeL(a);this.otherModeL&=~((1<<(b>>>0&255))-1<<(b>>>8&255));this.otherModeL|=this.getOtherModeL(a+4);this.DLParser_RDPSetOtherModeL(this.otherModeL);this.renderStateChanged=!0};a.prototype.RSP_GBI0_Sprite2DBase=
function(a){this.videoLog("TODO: RSP_GBI0_Sprite2DBase")};a.prototype.RSP_GBI0_Tri4=function(a){this.videoLog("TODO: RSP_GBI0_Tri4")};a.prototype.RSP_GBI1_RDPHalf_Cont=function(a){};a.prototype.RSP_GBI1_RDPHalf_2=function(a){};a.prototype.RSP_GBI1_RDPHalf_1=function(a){this.videoLog("TODO: RSP_GBI1_RDPHalf_1")};a.prototype.RSP_GBI1_Line3D=function(a){var b=this.vertexMult;var d=this.getGbi1Line3dV0(a)*b;var e=this.getGbi1Line3dV1(a)*b;var g=this.getGbi1Line3dV2(a)*b;a=this.getGbi1Line3dV3(a)*b;e=
this.prepareTriangle(d,e,g);!1!==e&&(e=this.prepareTriangle(g,a,d),!1!==e&&(a=this.dlistStack[this.dlistStackPointer].pc,d=this.getCommand(a),this.currentMicrocodeMap[d]!==this.RSP_GBI1_Line3D&&!0===this.renderStateChanged&&this.drawScene(!1,this.activeTile)))};a.prototype.RSP_GBI1_ClearGeometryMode=function(a){a=this.getClearGeometryMode(a)>>>0;this.geometryMode&=~a;this.initGeometryMode();this.setDepthTest()};a.prototype.RSP_GBI1_SetGeometryMode=function(a){a=this.getSetGeometryMode(a)>>>0;this.geometryMode|=
a;this.initGeometryMode();this.setDepthTest()};a.prototype.initGeometryMode=function(){var a=this.geometryMode&consts.G_CULL_FRONT;var c=this.geometryMode&consts.G_CULL_BACK;0!==c&&0!==a?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT_AND_BACK)):0!==c?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):0!==a?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT)):this.gl.disable(this.gl.CULL_FACE);this.bShade=0!==(this.geometryMode&consts.G_SHADE)?!0:!1;
0!==(this.geometryMode&consts.G_TEXTURE_GEN)?this.bTextureGen=!0:this.bTexueGen=!1;this.bLightingEnable=0!==(this.geometryMode&consts.G_LIGHTING)?!0:!1;this.bFogEnable=0!==(this.geometryMode&consts.G_FOG)?!0:!1;this.bZBufferEnable=0!==(this.geometryMode&consts.G_ZBUFFER)?!0:!1};a.prototype.RSP_GBI1_EndDL=function(a){this.RDP_GFX_PopDL();this.drawScene(!1,this.activeTile)};a.prototype.RSP_GBI1_Texture=function(a){var b;this.activeTile=b=this.getTextureTile(a);this.textureTile[b].on=this.getTextureOn(a);
this.textureTile[b].level=this.getTextureLevel(a);this.textureTile[b].scales=this.getTextureScaleS(a)/32768;this.textureTile[b].scalet=this.getTextureScaleT(a)/32768;this.drawScene(!1,b)};a.prototype.popProjection=function(){0<this.gRSP.projectionMtxTop&&this.gRSP.projectionMtxTop--};a.prototype.popWorldView=function(){0<this.gRSP.modelViewMtxTop&&(this.gRSP.modelViewMtxTop--,this.gRSPmodelViewTop=this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop],this.gRSP.bMatrixIsUpdated=!0,this.inverseTransposeCalculated=
!1)};a.prototype.RSP_GBI1_PopMtx=function(a){this.gbi0PopMtxIsProjection(a)?this.popProjection():this.popWorldView();this.renderStateChanged=!0};a.prototype.RSP_GBI1_CullDL=function(a){this.videoLog("TODO: RSP_GBI1_CullDL")};a.prototype.RSP_GBI1_Tri1=function(a){var b=this.vertexMult;var d=this.getGbi0Tri1V0(a)*b;var e=this.getGbi0Tri1V1(a)*b;b*=this.getGbi0Tri1V2(a);this.getGbi0Tri1Flag(a);!1!==this.prepareTriangle(d,e,b)&&(a=this.dlistStack[this.dlistStackPointer].pc,a=this.getCommand(a),this.currentMicrocodeMap[a]!==
this.RSP_GBI1_Tri1&&!0===this.renderStateChanged&&this.drawScene(!1,this.activeTile))};a.prototype.RSP_GBI1_Noop=function(a){};a.prototype.RDP_TriFill=function(a){this.videoLog("TODO: RDP_TriFill")};a.prototype.RDP_TriFillZ=function(a){this.videoLog("RDP_TriFillZ")};a.prototype.RDP_TriTxtr=function(a){this.videoLog("TODO: RDP_TriTxtr")};a.prototype.RDP_TriTxtrZ=function(a){this.videoLog("TODO: RDP_TriTxtrZ")};a.prototype.RDP_TriShade=function(a){this.videoLog("TODO: RDP_TriShade")};a.prototype.RDP_TriShadeZ=
function(a){this.videoLog("TODO: RDP_TriShadeZ")};a.prototype.RDP_TriShadeTxtr=function(a){this.videoLog("TODO: RDP_TriShadeTxtr")};a.prototype.RDP_TriShadeTxtrZ=function(a){this.videoLog("TODO: RDP_TriShadeTxtrZ")};a.prototype.DLParser_TexRect=function(a,c){this.gl.enable(this.gl.DEPTH_TEST);this.gl.depthFunc(this.gl.LEQUAL);var b=this.getTexRectXh(a)>>>2;var e=this.getTexRectYh(a)>>>2;var g=this.getTexRectTileNo(a);var h=this.getTexRectXl(a)>>>2;var k=this.getTexRectYl(a)>>>2;var l=this.getTexRectS(a)>>>
5;var m=this.getTexRectT(a)>>>5;var n=this.getTexRectDsDx(a)>>>10;a=this.getTexRectDtDy(a)>>>10;this.cycleType===consts.CYCLE_TYPE_COPY&&(n*=.25);if(this.cycleType===consts.CYCLE_TYPE_FILL||this.cycleType===consts.CYCLE_TYPE_COPY)b+=1,e+=1;this.renderer.texRect(g,h,k,b,e,l,m,n,a,this.textureTile[g],this.tmem,this,c);this.hasTexture=!0};a.prototype.DLParser_TexRectFlip=function(a){this.videoLog("TODO: DLParser_TexRectFlip")};a.prototype.DLParser_RDPLoadSynch=function(a){this.renderStateChanged=!0};
a.prototype.DLParser_RDPPipeSynch=function(a){};a.prototype.DLParser_RDPTileSynch=function(a){};a.prototype.DLParser_RDPFullSynch=function(a){};a.prototype.DLParser_SetKeyGB=function(a){this.videoLog("TODO: DLParser_SetKeyGB")};a.prototype.DLParser_SetKeyR=function(a){this.videoLog("TODO: DLParser_SetKeyR")};a.prototype.DLParser_SetConvert=function(a){this.videoLog("TODO: DLParser_SetConvert")};a.prototype.DLParser_SetPrimDepth=function(a){this.videoLog("TODO: DLParser_SetPrimDepth")};a.prototype.DLParser_RDPSetOtherModeL=
function(a){this.alphaTestEnabled=0!==(a&(consts.RDP_ALPHA_COMPARE_THRESHOLD|consts.RDP_ALPHA_COMPARE_DITHER))?1:0};a.prototype.DLParser_LoadTLut=function(a){var b=this.getSetTileSizeTile(a);var d=this.textureTile[b].uls=this.getSetTileSizeUls(a);var e=this.textureTile[b].ult=this.getSetTileSizeUlt(a);var g=this.textureTile[b].lrs=this.getSetTileSizeLrs(a);this.textureTile[b].lrt=this.getSetTileSizeLrt(a);a=this.texImg.addr+(e>>>2)*(this.texImg.width<<consts.TXT_SIZE_16b>>>1)+(d>>>2<<consts.TXT_SIZE_16b>>>
1);var h=this.textureTile[b].tmem<<3;var k=this.tlut,l=this.core.memory.u8;b=e=0;for(g=(g-d>>>2)+1<<1;0<=g?e<g:e>g;b=0<=g?++e:--e)k[h+b]=l[a+b]};a.prototype.DLParser_SetTileSize=function(a){var b=this.getSetTileSizeTile(a);this.textureTile[b].uls=this.getSetTileSizeUls(a);this.textureTile[b].ult=this.getSetTileSizeUlt(a);this.textureTile[b].lrs=this.getSetTileSizeLrs(a);this.textureTile[b].lrt=this.getSetTileSizeLrt(a)};a.prototype.DLParser_LoadBlock=function(a){var b=this.getLoadBlockTile(a);this.getLoadBlockUls(a);
this.getLoadBlockUlt(a);var d=this.getLoadBlockLrs(a);this.getLoadBlockDxt(a);a=(d+1)*this.textureTile[b].siz;4096<a&&console.error("LoadBlock is making too large of a transfer. "+a+" bytes");d=0;b=this.core.memory.u8;for(var e=this.texImg.addr|0,g=this.tmem;d<a;)g[d]=b[e],d++,e++};a.prototype.DLParser_LoadTile=function(a){this.getLoadBlockTile(a);a=0;if("undefined"!==typeof this.texImg.addr)for(var b=this.core.memory.u8,d=this.texImg.addr|0,e=this.tmem;4096>a;)e[a]=b[d],a++,d++};a.prototype.DLParser_SetTile=
function(a){var b=this.getSetTileTile(a);this.textureTile[b].fmt=this.getSetTileFmt(a);this.textureTile[b].siz=this.getSetTileSiz(a);this.textureTile[b].line=this.getSetTileLine(a);this.textureTile[b].tmem=this.getSetTileTmem(a);this.textureTile[b].pal=this.getSetTilePal(a);this.textureTile[b].cmt=this.getSetTileCmt(a);this.textureTile[b].cms=this.getSetTileCms(a);this.textureTile[b].mirrorS=this.getSetTileMirrorS(a);this.textureTile[b].mirrorT=this.getSetTileMirrorT(a);this.textureTile[b].maskt=
this.getSetTileMaskt(a);this.textureTile[b].masks=this.getSetTileMasks(a);this.textureTile[b].shiftt=this.getSetTileShiftt(a);this.textureTile[b].shifts=this.getSetTileShifts(a);this.textureTile[b].otherModeL=this.otherModeL};a.prototype.DLParser_FillRect=function(a){this.DLParser_TexRect(a,!0)};a.prototype.DLParser_SetFillColor=function(a){this.fillColor=[];this.fillColor.push(this.getSetFillColorR(a)/255);this.fillColor.push(this.getSetFillColorG(a)/255);this.fillColor.push(this.getSetFillColorB(a)/
255);this.fillColor.push(this.getSetFillColorA(a)/255);this.gl.uniform4fv(this.core.webGL.shaderProgram.uFillColor,this.fillColor)};a.prototype.DLParser_SetFogColor=function(a){this.videoLog("TODO: DLParser_SetFogColor")};a.prototype.DLParser_SetBlendColor=function(a){this.blendColor=[];this.blendColor.push(this.getSetFillColorR(a)/255);this.blendColor.push(this.getSetFillColorG(a)/255);this.blendColor.push(this.getSetFillColorB(a)/255);this.blendColor.push(this.getSetFillColorA(a)/255);this.gl.uniform4fv(this.core.webGL.shaderProgram.uBlendColor,
this.blendColor)};a.prototype.DLParser_SetPrimColor=function(a){this.primColor=[];this.primColor.push(this.getSetPrimColorR(a)/255);this.primColor.push(this.getSetPrimColorG(a)/255);this.primColor.push(this.getSetPrimColorB(a)/255);this.primColor.push(this.getSetPrimColorA(a)/255);this.gl.uniform4fv(this.core.webGL.shaderProgram.uPrimColor,this.primColor)};a.prototype.DLParser_SetEnvColor=function(a){this.envColor=[];this.envColor.push(this.getSetEnvColorR(a)/255);this.envColor.push(this.getSetEnvColorG(a)/
255);this.envColor.push(this.getSetEnvColorB(a)/255);this.envColor.push(this.getSetEnvColorA(a)/255);this.gl.uniform4fv(this.core.webGL.shaderProgram.uEnvColor,this.envColor)};a.prototype.prepareTriangle=function(a,c,d){(a=this.initVertex(a,this.gRSP.numVertices,!1))&&(a=this.initVertex(c,this.gRSP.numVertices+1,!1));a&&(a=this.initVertex(d,this.gRSP.numVertices+2,!1));a&&(this.gRSP.numVertices+=3);return a};a.prototype.initVertex=function(a,c,d){if(a>=consts.MAX_VERTS)return!1;c=4*this.triangleVertexPositionBuffer.numItems++;
a=this.N64VertexList[a];this.triVertices[c]=a.x;this.triVertices[c+1]=a.y;this.triVertices[c+2]=a.z;this.triVertices[c+3]=a.w*this.vertexMult;0===a.w&&(this.triVertices[c+3]=1);c=this.triangleVertexColorBuffer.numItems++<<2;this.triColorVertices[c]=a.r;this.triColorVertices[c+1]=a.g;this.triColorVertices[c+2]=a.b;this.triColorVertices[c+3]=a.a;c=this.triangleVertexTextureCoordBuffer.numItems++<<1;this.triTextureCoords[c]=a.u;this.triTextureCoords[c+1]=a.v;return!0};a.prototype.setBlendFunc=function(){var a=
this.otherModeL>>>16&52428;var c=this.otherModeL>>>16&13107;this.cycleType=this.otherModeH>>20&3;switch(this.cycleType){case 3:this.gl.disable(this.gl.BLEND);break;case 2:this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.enable(this.gl.BLEND);break;case 1:var d=this.otherModeL>>14&1;var e=this.otherModeL>>4&1;var g=this.otherModeL>>13&1;var h=this.otherModeL>>12&1;if(1===d&&1===e)this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND);
else switch(a+c){case 3850:case 50946:this.gl.blendFunc(this.gl.ONE,this.gl.ZERO);this.gl.enable(this.gl.blendFunc);1===this.cvgXAlpha&&this.gl.blendFunc(this.gl.ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);break;case 3097:1===h&&1===g?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFunc(this.gl.ONE,this.gl.ZERO);this.gl.enable(this.gl.BLEND);break;case 3096:case 51216:case 50192:case 1986:case 80:case 33808:case 336:case 3352:this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);
this.gl.enable(this.gl.BLEND);break;case 1233:this.fogIsImplemented?this.gl.blendFunc(this.gl.ONE,this.gl.ZERO):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.enable(this.gl.BLEND);break;case 50193:case 51217:case 33809:case 51200:case 17:case 52232:case 51970:case 49922:this.fogIsImplemented?this.gl.blendFunc(this.gl.ONE,this.gl.ZERO):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.enable(this.gl.BLEND);break;case 51969:this.gl.blendFunc(this.gl.SRC_ALPHA,
this.gl.ZERO);this.gl.enable(this.gl.BLEND);break;case 7449:this.gl.blendFunc(this.gl.ZERO,this.gl.DEST_ALPHA);this.gl.enable(this.gl.BLEND);break;default:770===c?this.gl.blendFunc(this.gl.ONE,this.g.ZERO):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND)}break;default:if(d=this.otherModeL>>14&1,e=this.otherModeL>>4&1,1===d&&1===e&&51200!==a)this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enable(this.gl.BLEND);else switch(a){case 64:case 32832:case 50240:case 1088:case 35976:case 192:this.gl.blendFunc(this.gl.SRC_ALPHA,
this.gl.ONE_MINUS_SRC_ALPHA);this.gl.enable(this.gl.BLEND);break;case 16452:this.gl.blendFunc(this.gl.ZERO,this.gl.DEST_ALPHA);this.gl.enable(this.gl.BLEND);break;case 3080:g=this.otherModeL>>13&1;this.gl.blendFunc(this.gl.ONE,this.gl.ZERO);0!==g?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND);break;case 68:this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.enable(this.gl.BLEND);break;case 0:case 51200:case 17600:case 33792:this.gl.blendFunc(this.gl.ONE,this.gl.ZERO);
this.gl.enable(this.gl.BLEND);break;case 50176:this.gl.blendFunc(this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ZERO);this.gl.enable(this.gl.BLEND);break;case 3144:case 52296:this.gl.blendFunc(this.gl.ZERO,this.gl.ONE);this.gl.enable(this.gl.BLEND);break;case 19520:this.gl.blendFunc(this.gl.ZERO,this.gl.ONE);this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.enable(this.gl.BLEND);break;default:this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.enable(this.gl.BLEND)}}};
a.prototype.setDepthTest=function(){var a=0!==(this.geometryMode&consts.G_ZBUFFER);var c=0!==(this.otherModeL&consts.Z_COMPARE);var d=0!==(this.otherModeL&consts.Z_UPDATE);a&&c||d?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST);this.gl.depthMask(d)};a.prototype.drawScene=function(a,c){this.setBlendFunc();this.setDepthTest();this.renderStateChanged=!1;0<this.triangleVertexPositionBuffer.numItems&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexPositionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,
this.triVertices.subarray(0,this.triangleVertexPositionBuffer.numItems*this.triangleVertexPositionBuffer.itemSize),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(this.core.webGL.shaderProgram.vertexPositionAttribute),this.gl.vertexAttribPointer(this.core.webGL.shaderProgram.vertexPositionAttribute,this.triangleVertexPositionBuffer.itemSize,this.gl.FLOAT,!1,0,0));0<this.triangleVertexColorBuffer.numItems&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexColorBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,
this.triColorVertices.subarray(0,this.triangleVertexColorBuffer.numItems*this.triangleVertexColorBuffer.itemSize),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(this.core.webGL.shaderProgram.vertexColorAttribute),this.gl.vertexAttribPointer(this.core.webGL.shaderProgram.vertexColorAttribute,this.triangleVertexColorBuffer.itemSize,this.gl.UNSIGNED_BYTE,!0,0,0));if(0<this.triangleVertexTextureCoordBuffer.numItems){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexTextureCoordBuffer);
this.gl.bufferData(this.gl.ARRAY_BUFFER,this.triTextureCoords.subarray(0,this.triangleVertexTextureCoordBuffer.numItems*this.triangleVertexTextureCoordBuffer.itemSize),this.gl.STATIC_DRAW);this.gl.enableVertexAttribArray(this.core.webGL.shaderProgram.textureCoordAttribute);this.gl.vertexAttribPointer(this.core.webGL.shaderProgram.textureCoordAttribute,this.triangleVertexTextureCoordBuffer.itemSize,this.gl.FLOAT,!1,0,0);a=this.textureTile[c];var b=(a.lrs>>2)+1-a.uls;var e=(a.lrt>>2)+1-a.ult;var g=
void 0;0<b&&0<e&&(g=this.renderer.formatTexture(a,this.tmem,this));if(void 0!==g&&void 0!==g.textureData){g=g.textureData;this.gl.activeTexture(this.gl.TEXTURE0+c);this.gl.bindTexture(this.gl.TEXTURE_2D,this.colorsTexture0);var h=c=this.gl.REPEAT;a.cms===consts.RDP_TXT_CLAMP||0===a.masks?c=this.gl.CLAMP_TO_EDGE:a.cms===consts.RDP_TXT_MIRROR&&(c=this.gl.MIRRORED_REPEAT);a.cmt===consts.RDP_TXT_CLAMP||0===a.maskt?h=this.gl.CLAMP_TO_EDGE:a.cmt===consts.RDP_TXT_MIRROR&&(h=this.gl.MIRRORED_REPEAT);this.gl.texParameterf(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,c);this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,h);this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,b,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,g)}this.gl.uniform1i(this.core.webGL.shaderProgram.cycleType,this.cycleType);this.gl.uniform1i(this.core.webGL.shaderProgram.uAlphaTestEnabled,this.alphaTestEnabled);
this.gl.uniformMatrix4fv(this.core.webGL.shaderProgram.pMatrixUniform,!1,this.gRSP.projectionMtxs[this.gRSP.projectionMtxTop]);this.gl.uniformMatrix4fv(this.core.webGL.shaderProgram.mvMatrixUniform,!1,this.gRSP.modelviewMtxs[this.gRSP.modelViewMtxTop]);0<this.triangleVertexPositionBuffer.numItems&&(!0===this.core.settings.wireframe?this.gl.drawArrays(this.gl.LINES,0,this.triangleVertexPositionBuffer.numItems):this.gl.drawArrays(this.gl.TRIANGLES,0,this.triangleVertexPositionBuffer.numItems))}this.triangleVertexPositionBuffer.numItems=
0;this.triangleVertexColorBuffer.numItems=0;this.triangleVertexTextureCoordBuffer.numItems=0;this.gRSP.numVertices=0};a.prototype.resetState=function(){this.geometryMode=0;this.initGeometryMode();this.activeTile=this.alphaTestEnabled=0};a.prototype.initBuffers=function(){this.triangleVertexPositionBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexPositionBuffer);this.triangleVertexPositionBuffer.itemSize=4;this.triangleVertexPositionBuffer.numItems=0;this.triangleVertexColorBuffer=
this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexColorBuffer);this.triangleVertexColorBuffer.itemSize=4;this.triangleVertexColorBuffer.numItems=0;this.triangleVertexTextureCoordBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.triangleVertexTextureCoordBuffer);this.triangleVertexTextureCoordBuffer.itemSize=2;this.triangleVertexTextureCoordBuffer.numItems=0};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsVideoHLE=a}).call(this);(function(){C1964jsVideoHLE.prototype.getGbi0MoveWordOffset=function(a){return this.core.memory.u8[a+1]<<8|this.core.memory.u8[a+2]};C1964jsVideoHLE.prototype.getGbi0MoveWordType=function(a){return this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getGbi0MoveWordValue=function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getGbi0DlistParam=function(a){return this.core.memory.u8[a+1]};C1964jsVideoHLE.prototype.getGbi0DlistAddr=
function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getCommand=function(a){return this.core.memory.u8[a]};C1964jsVideoHLE.prototype.getGbi0Tri1Flag=function(a){return this.core.memory.u8[a+4]};C1964jsVideoHLE.prototype.getGbi0Tri1V0=function(a){return this.core.memory.u8[a+5]};C1964jsVideoHLE.prototype.getGbi0Tri1V1=function(a){return this.core.memory.u8[a+6]};C1964jsVideoHLE.prototype.getGbi0Tri1V2=
function(a){return this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getGbi1Tri2V3=function(a){return this.core.memory.u8[a+1]};C1964jsVideoHLE.prototype.getGbi1Tri2V4=function(a){return this.core.memory.u8[a+2]};C1964jsVideoHLE.prototype.getGbi1Tri2V5=function(a){return this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getGbi1Line3dV0=function(a){return this.core.memory.u8[a+5]};C1964jsVideoHLE.prototype.getGbi1Line3dV1=function(a){return this.core.memory.u8[a+6]};C1964jsVideoHLE.prototype.getGbi1Line3dV2=
function(a){return this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getGbi1Line3dV3=function(a){return this.core.memory.u8[a+4]};C1964jsVideoHLE.prototype.getGbi0NumVertices=function(a){return this.core.memory.u8[a+1]>>4&15};C1964jsVideoHLE.prototype.getGbi0Vertex0=function(a){return this.core.memory.u8[a+1]&15};C1964jsVideoHLE.prototype.getGbi1NumVertices=function(a){return this.core.memory.u8[a+2]>>>2&63};C1964jsVideoHLE.prototype.getGbi1Vertex0=function(a){return this.core.memory.u8[a+1]>>>
1&127};C1964jsVideoHLE.prototype.getFiddledVertexX=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>16};C1964jsVideoHLE.prototype.getFiddledVertexY=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])<<16>>16};C1964jsVideoHLE.prototype.getFiddledVertexZ=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+
6]<<8|this.core.memory.u8[a+7])>>16};C1964jsVideoHLE.prototype.getVertexX=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16)>>16};C1964jsVideoHLE.prototype.getVertexY=function(a){return(this.core.memory.u8[a+2]<<24|this.core.memory.u8[a+3]<<16)>>16};C1964jsVideoHLE.prototype.getVertexZ=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16)>>16};C1964jsVideoHLE.prototype.getVertexW=function(a){return(this.core.memory.u8[a+6]<<24|this.core.memory.u8[a+
7]<<16)>>16};C1964jsVideoHLE.prototype.getVertexS=function(a){return(this.core.memory.u8[a+8]<<8|this.core.memory.u8[a+9])<<16>>16};C1964jsVideoHLE.prototype.getVertexT=function(a){return(this.core.memory.u8[a+10]<<8|this.core.memory.u8[a+11])<<16>>16};C1964jsVideoHLE.prototype.getVertexColorR=function(a){return this.core.memory.u8[a+12]};C1964jsVideoHLE.prototype.getVertexColorG=function(a){return this.core.memory.u8[a+13]};C1964jsVideoHLE.prototype.getVertexColorB=function(a){return this.core.memory.u8[a+
14]};C1964jsVideoHLE.prototype.getVertexAlpha=function(a){return this.core.memory.u8[a+15]};C1964jsVideoHLE.prototype.getVertexNormalX=function(a){return this.core.memory.u8[a+12]<<24>>24};C1964jsVideoHLE.prototype.getVertexNormalY=function(a){return this.core.memory.u8[a+13]<<24>>24};C1964jsVideoHLE.prototype.getVertexNormalZ=function(a){return this.core.memory.u8[a+14]<<24>>24};C1964jsVideoHLE.prototype.getVertexNormalA=function(a){return(this.core.memory.u8[a+12]<<24|this.core.memory.u8[a+13]<<
16|this.core.memory.u8[a+14]<<8|this.core.memory.u8[a+15])<<24>>24};C1964jsVideoHLE.prototype.getVertexLightX=function(a){return this.core.memory.u8[a+8]<<24>>24};C1964jsVideoHLE.prototype.getVertexLightY=function(a){return this.core.memory.u8[a+9]<<24>>24};C1964jsVideoHLE.prototype.getVertexLightZ=function(a){return this.core.memory.u8[a+10]<<24>>24};C1964jsVideoHLE.prototype.getTextureLevel=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+
3])>>11&7};C1964jsVideoHLE.prototype.getTextureTile=function(a){return this.core.memory.u8[a+2]&7};C1964jsVideoHLE.prototype.getTextureOn=function(a){return this.core.memory.u8[a+3]&15};C1964jsVideoHLE.prototype.getTextureScaleS=function(a){return this.core.memory.u8[a+4]<<8|this.core.memory.u8[a+5]};C1964jsVideoHLE.prototype.getTextureScaleT=function(a){return this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getCombineLo=function(a){return this.core.memory.u8[a]<<24|
this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getCombineHi=function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getCombineA0=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>20&15};C1964jsVideoHLE.prototype.getCombineB0=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>28&15};C1964jsVideoHLE.prototype.getCombineC0=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>15&31};C1964jsVideoHLE.prototype.getCombineD0=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>15&7};C1964jsVideoHLE.prototype.getCombineA0a=function(a){return(this.core.memory.u8[a]<<
24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>12&7};C1964jsVideoHLE.prototype.getCombineB0a=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>12&7};C1964jsVideoHLE.prototype.getCombineC0a=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>9&7};C1964jsVideoHLE.prototype.getCombineD0a=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>9&7};C1964jsVideoHLE.prototype.getCombineA1=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>5&15};C1964jsVideoHLE.prototype.getCombineB1=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>24&15};C1964jsVideoHLE.prototype.getCombineC1=function(a){return(this.core.memory.u8[a]<<
24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&31};C1964jsVideoHLE.prototype.getCombineD1=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>6&7};C1964jsVideoHLE.prototype.getCombineA1a=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>21&7};C1964jsVideoHLE.prototype.getCombineB1a=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>3&7};C1964jsVideoHLE.prototype.getCombineC1a=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>18&7};C1964jsVideoHLE.prototype.getCombineD1a=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])&7};C1964jsVideoHLE.prototype.gbi0isProjectionMatrix=function(a){return 0!==
(this.core.memory.u8[a+1]&1)?!0:!1};C1964jsVideoHLE.prototype.gbi0LoadMatrix=function(a){return 0!==(this.core.memory.u8[a+1]&2)?!0:!1};C1964jsVideoHLE.prototype.gbi0PushMatrix=function(a){return 0!==(this.core.memory.u8[a+1]&4)?!0:!1};C1964jsVideoHLE.prototype.gbi0PopMtxIsProjection=function(a){return 0!==(this.core.memory.u8[a+7]&1)?!0:!1};C1964jsVideoHLE.prototype.getTexRectXh=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+
3])>>>12&4095};C1964jsVideoHLE.prototype.getTexRectYh=function(a){return(this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&4095};C1964jsVideoHLE.prototype.getTexRectTileNo=function(a){return this.core.memory.u8[a+4]&7};C1964jsVideoHLE.prototype.getTexRectXl=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>>12&4095};C1964jsVideoHLE.prototype.getTexRectYl=function(a){return(this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+
7])&4095};C1964jsVideoHLE.prototype.getTexRectS=function(a){return this.core.memory.u8[a+12]<<8|this.core.memory.u8[a+13]};C1964jsVideoHLE.prototype.getTexRectT=function(a){return this.core.memory.u8[a+14]<<8|this.core.memory.u8[a+15]};C1964jsVideoHLE.prototype.getTexRectDsDx=function(a){return this.core.memory.getInt32(this.core.memory.u8,a+20)>>>16&65535};C1964jsVideoHLE.prototype.getTexRectDtDy=function(a){return this.core.memory.getInt32(this.core.memory.u8,a+20)&65535};C1964jsVideoHLE.prototype.getGbi1Type=
function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>>16&255};C1964jsVideoHLE.prototype.getRspSegmentAddr=function(a){return(this.segments[a>>24&15]&16777215)+(a&16777215)};C1964jsVideoHLE.prototype.getOtherModeL=function(a){return this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getOtherModeH=function(a){return this.core.memory.u8[a]<<
24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getWord0=function(a){return this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3]};C1964jsVideoHLE.prototype.getWord1=function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getShort=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+
1]<<16)>>16};C1964jsVideoHLE.prototype.getTImgWidth=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&4095};C1964jsVideoHLE.prototype.getTImgSize=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>>19&3};C1964jsVideoHLE.prototype.getTImgFormat=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<
8|this.core.memory.u8[a+3])>>>21&7};C1964jsVideoHLE.prototype.getTImgAddr=function(a){return this.getRspSegmentAddr(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])};C1964jsVideoHLE.prototype.getSetTileFmt=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>21&7};C1964jsVideoHLE.prototype.getSetTileSiz=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+
1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>19&3};C1964jsVideoHLE.prototype.getSetTileLine=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>9&511};C1964jsVideoHLE.prototype.getSetTileTmem=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&511};C1964jsVideoHLE.prototype.getSetTileTile=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>24&7};C1964jsVideoHLE.prototype.getSetTilePal=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>20&15};C1964jsVideoHLE.prototype.getSetTileCmt=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>18&3};C1964jsVideoHLE.prototype.getSetTileMirrorT=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>15&1};C1964jsVideoHLE.prototype.getSetTileMaskt=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>14&15};C1964jsVideoHLE.prototype.getSetTileShiftt=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>10&15};C1964jsVideoHLE.prototype.getSetTileCms=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>8&3};C1964jsVideoHLE.prototype.getSetTileMirrorS=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>5&1};C1964jsVideoHLE.prototype.getSetTileMasks=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>4&15};C1964jsVideoHLE.prototype.getSetTileShifts=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])&15};C1964jsVideoHLE.prototype.getLoadBlockTile=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>24&7};C1964jsVideoHLE.prototype.getLoadBlockUls=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>12&4095};C1964jsVideoHLE.prototype.getLoadBlockUlt=function(a){return(this.core.memory.u8[a]<<
24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&4095};C1964jsVideoHLE.prototype.getLoadBlockLrs=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>12&4095};C1964jsVideoHLE.prototype.getLoadBlockDxt=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])&4095};C1964jsVideoHLE.prototype.getSetTileSizeTile=function(a){return(this.core.memory.u8[a+
4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>24&7};C1964jsVideoHLE.prototype.getSetTileSizeUls=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>12&4095};C1964jsVideoHLE.prototype.getSetTileSizeUlt=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&4095};C1964jsVideoHLE.prototype.getSetTileSizeLrs=
function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>12&4095};C1964jsVideoHLE.prototype.getSetTileSizeLrt=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])&4095};C1964jsVideoHLE.prototype.getSetPrimColorM=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])>>>8&255};
C1964jsVideoHLE.prototype.getSetPrimColorL=function(a){return(this.core.memory.u8[a]<<24|this.core.memory.u8[a+1]<<16|this.core.memory.u8[a+2]<<8|this.core.memory.u8[a+3])&255};C1964jsVideoHLE.prototype.getSetPrimColorR=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>>24};C1964jsVideoHLE.prototype.getSetPrimColorG=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<
8|this.core.memory.u8[a+7])<<8>>>24};C1964jsVideoHLE.prototype.getSetPrimColorB=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<16>>>24};C1964jsVideoHLE.prototype.getSetPrimColorA=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<24>>>24};C1964jsVideoHLE.prototype.getSetGeometryMode=function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+
5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.getClearGeometryMode=function(a){return this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7]};C1964jsVideoHLE.prototype.pow2roundup=function(a){var b;for(b=1;b<a;)b<<=1;return b};C1964jsVideoHLE.prototype.getSetFillColorR=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>>24};
C1964jsVideoHLE.prototype.getSetFillColorG=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<8>>>24};C1964jsVideoHLE.prototype.getSetFillColorB=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<16>>>24};C1964jsVideoHLE.prototype.getSetFillColorA=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+
6]<<8|this.core.memory.u8[a+7])<<24>>>24};C1964jsVideoHLE.prototype.getSetEnvColorR=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])>>>24};C1964jsVideoHLE.prototype.getSetEnvColorG=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<8>>>24};C1964jsVideoHLE.prototype.getSetEnvColorB=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+
5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<16>>>24};C1964jsVideoHLE.prototype.getSetEnvColorA=function(a){return(this.core.memory.u8[a+4]<<24|this.core.memory.u8[a+5]<<16|this.core.memory.u8[a+6]<<8|this.core.memory.u8[a+7])<<24>>>24}}).call(this);(function(){var a=function(a){return C1964jsVideoHLE.apply(this,arguments)||this};$jscomp.inherits(a,C1964jsVideoHLE);a.prototype.loadMatrix=function(a){var b,d;if(a+64>this.core.currentRdramSize)console.warn("loading matrix beyond ram size");else{var e=d=0;for(var g=this.core.memory.u16,h=this.matToLoad;4>e;){for(b=0;4>b;)h[d]=1.52587890625E-5*((g[a>>>1^1]<<16|g[a+32>>>1^1])>>0),h[d+1]=1.52587890625E-5*((g[a>>>1]<<16|g[a+32>>>1])>>0),d+=2,a+=4,b+=2;e+=1}}};a.prototype.getGbi0MoveWordOffset=function(a){return this.core.memory.u32[a>>
2]>>>8&65535};a.prototype.getGbi0MoveWordType=function(a){return this.core.memory.u8[a]};a.prototype.getGbi0MoveWordValue=function(a){return this.core.memory.u32[a+4>>>2]};a.prototype.getGbi0DlistParam=function(a){return this.core.memory.u8[a+2]};a.prototype.getGbi0DlistAddr=function(a){return this.core.memory.u32[a+4>>>2]};a.prototype.getCommand=function(a){return this.core.memory.u8[a+3]};a.prototype.getGbi0Tri1Flag=function(a){return this.core.memory.u8[a+7]};a.prototype.getGbi0Tri1V0=function(a){return this.core.memory.u8[a+
6]};a.prototype.getGbi0Tri1V1=function(a){return this.core.memory.u8[a+5]};a.prototype.getGbi0Tri1V2=function(a){return this.core.memory.u8[a+4]};a.prototype.getGbi1Tri2V3=function(a){return this.core.memory.u8[a+2]};a.prototype.getGbi1Tri2V4=function(a){return this.core.memory.u8[a+1]};a.prototype.getGbi1Tri2V5=function(a){return this.core.memory.u8[a]};a.prototype.getGbi1Line3dV0=function(a){return this.core.memory.u8[a+6]};a.prototype.getGbi1Line3dV1=function(a){return this.core.memory.u8[a+5]};
a.prototype.getGbi1Line3dV2=function(a){return this.core.memory.u8[a+4]};a.prototype.getGbi1Line3dV3=function(a){return this.core.memory.u8[a+7]};a.prototype.getGbi0NumVertices=function(a){return this.core.memory.u8[a+2]>>4&15};a.prototype.getGbi0Vertex0=function(a){return this.core.memory.u8[a+2]&15};a.prototype.getGbi1NumVertices=function(a){return this.core.memory.u8[a+1]>>>2&63};a.prototype.getGbi1Vertex0=function(a){return this.core.memory.u8[a+2]>>>1&127};a.prototype.getFiddledVertexX=function(a){return this.core.memory.u32[a>>>
2]>>16};a.prototype.getFiddledVertexY=function(a){return this.core.memory.u32[a>>>2]<<16>>16};a.prototype.getFiddledVertexZ=function(a){return this.core.memory.u32[a+4>>>2]>>16};a.prototype.getVertexX=function(a){return this.core.memory.u16[a>>>1^1]<<16>>16};a.prototype.getVertexY=function(a){return this.core.memory.u16[a>>>1]<<16>>16};a.prototype.getVertexZ=function(a){return this.core.memory.u16[a+4>>>1^1]<<16>>16};a.prototype.getVertexW=function(a){return this.core.memory.u16[a+4>>>1]<<16>>16};
a.prototype.getVertexS=function(a){return this.core.memory.u16[a+10>>>1]<<16>>16};a.prototype.getVertexT=function(a){return this.core.memory.u16[a+8>>>1]<<16>>16};a.prototype.getVertexColorR=function(a){return this.core.memory.u8[a+15]};a.prototype.getVertexColorG=function(a){return this.core.memory.u8[a+14]};a.prototype.getVertexColorB=function(a){return this.core.memory.u8[a+13]};a.prototype.getVertexAlpha=function(a){return this.core.memory.u8[a+12]};a.prototype.getVertexNormalX=function(a){return this.core.memory.u8[a+
15]<<24>>24};a.prototype.getVertexNormalY=function(a){return this.core.memory.u8[a+14]<<24>>24};a.prototype.getVertexNormalZ=function(a){return this.core.memory.u8[a+13]<<24>>24};a.prototype.getVertexNormalA=function(a){return this.core.memory.u8[a+12]<<24>>24};a.prototype.getVertexLightX=function(a){return this.core.memory.u8[a+11]<<24>>24};a.prototype.getVertexLightY=function(a){return this.core.memory.u8[a+10]<<24>>24};a.prototype.getVertexLightZ=function(a){return this.core.memory.u8[a+9]<<24>>
24};a.prototype.getTextureLevel=function(a){return this.core.memory.u32[a>>>2]>>11&7};a.prototype.getTextureTile=function(a){return this.core.memory.u8[a+1]&7};a.prototype.getTextureOn=function(a){return this.core.memory.u8[a]&15};a.prototype.getTextureScaleS=function(a){return this.core.memory.u16[a+6>>>1]};a.prototype.getTextureScaleT=function(a){return this.core.memory.u16[a+4>>>1]};a.prototype.getCombineLo=function(a){return this.core.memory.u32[a>>>2]};a.prototype.getCombineHi=function(a){return this.core.memory.u32[a+
4>>>2]};a.prototype.getCombineA0=function(a){return this.core.memory.u32[a>>>2]>>20&15};a.prototype.getCombineB0=function(a){return this.core.memory.u32[a+4>>>2]>>28&15};a.prototype.getCombineC0=function(a){return this.core.memory.u32[a>>>2]>>15&31};a.prototype.getCombineD0=function(a){return this.core.memory.u32[a+4>>>2]>>15&7};a.prototype.getCombineA0a=function(a){return this.core.memory.u32[a>>>2]>>12&7};a.prototype.getCombineB0a=function(a){return this.core.memory.u32[a+4>>>2]>>12&7};a.prototype.getCombineC0a=
function(a){return this.core.memory.u32[a>>>2]>>9&7};a.prototype.getCombineD0a=function(a){return this.core.memory.u32[a+4>>>2]>>9&7};a.prototype.getCombineA1=function(a){return this.core.memory.u32[a>>>2]>>5&15};a.prototype.getCombineB1=function(a){return this.core.memory.u32[a+4>>>2]>>24&15};a.prototype.getCombineC1=function(a){return this.core.memory.u32[a>>>2]&31};a.prototype.getCombineD1=function(a){return this.core.memory.u32[a+4>>>2]>>6&7};a.prototype.getCombineA1a=function(a){return this.core.memory.u32[a+
4>>>2]>>21&7};a.prototype.getCombineB1a=function(a){return this.core.memory.u32[a+4>>>2]>>3&7};a.prototype.getCombineC1a=function(a){return this.core.memory.u32[a+4>>>2]>>18&7};a.prototype.getCombineD1a=function(a){return this.core.memory.u32[a+4>>>2]&7};a.prototype.gbi0isProjectionMatrix=function(a){return 0!==(this.core.memory.u8[a+2]&1)?!0:!1};a.prototype.gbi0LoadMatrix=function(a){return 0!==(this.core.memory.u8[a+2]&2)?!0:!1};a.prototype.gbi0PushMatrix=function(a){return 0!==(this.core.memory.u8[a+
2]&4)?!0:!1};a.prototype.gbi0PopMtxIsProjection=function(a){return 0!==(this.core.memory.u8[a+4]&1)?!0:!1};a.prototype.getTexRectXh=function(a){return this.core.memory.u32[a>>>2]>>>12&4095};a.prototype.getTexRectYh=function(a){return this.core.memory.u16[a>>>1]&4095};a.prototype.getTexRectTileNo=function(a){return this.core.memory.u8[a+7]&7};a.prototype.getTexRectXl=function(a){return this.core.memory.u32[a+4>>>2]>>>12&4095};a.prototype.getTexRectYl=function(a){return this.core.memory.u16[a+4>>>1]&
4095};a.prototype.getTexRectS=function(a){return this.core.memory.u16[a+14>>>1]};a.prototype.getTexRectT=function(a){return this.core.memory.u16[a+12>>>1]};a.prototype.getTexRectDsDx=function(a){return this.core.memory.u32[a+20>>>2]>>>16&65535};a.prototype.getTexRectDtDy=function(a){return this.core.memory.u32[a+20>>>2]&65535};a.prototype.getGbi1Type=function(a){return this.core.memory.u32[a>>>2]>>>16&255};a.prototype.getRspSegmentAddr=function(a){return(this.segments[a>>24&15]&16777215)+(a&16777215)};
a.prototype.getOtherModeL=function(a){return this.core.memory.u32[a>>>2]};a.prototype.getOtherModeH=function(a){return this.core.memory.u32[a>>>2]};a.prototype.getWord0=function(a){return this.core.memory.u32[a>>>2]};a.prototype.getWord1=function(a){return this.core.memory.u32[a+4>>>2]};a.prototype.getShort=function(a){return(this.core.memory.u8[a^3]<<24|this.core.memory.u8[a+1^3]<<16)>>16};a.prototype.getTImgWidth=function(a){return this.core.memory.u32[a>>>2]&4095};a.prototype.getTImgSize=function(a){return this.core.memory.u32[a>>>
2]>>>19&3};a.prototype.getTImgFormat=function(a){return this.core.memory.u32[a>>>2]>>>21&7};a.prototype.getTImgAddr=function(a){return this.getRspSegmentAddr(this.core.memory.u32[a+4>>>2])};a.prototype.getSetTileFmt=function(a){return this.core.memory.u32[a>>>2]>>21&7};a.prototype.getSetTileSiz=function(a){return this.core.memory.u32[a>>>2]>>19&3};a.prototype.getSetTileLine=function(a){return this.core.memory.u32[a>>>2]>>9&511};a.prototype.getSetTileTmem=function(a){return this.core.memory.u32[a>>>
2]&511};a.prototype.getSetTileTile=function(a){return this.core.memory.u8[a+4^3]&7};a.prototype.getSetTilePal=function(a){return this.core.memory.u32[a+4>>>2]>>20&15};a.prototype.getSetTileCmt=function(a){return this.core.memory.u32[a+4>>>2]>>18&3};a.prototype.getSetTileMirrorT=function(a){return this.core.memory.u32[a+4>>>2]>>15&1};a.prototype.getSetTileMaskt=function(a){return this.core.memory.u32[a+4>>>2]>>14&15};a.prototype.getSetTileShiftt=function(a){return this.core.memory.u32[a+4>>>2]>>10&
15};a.prototype.getSetTileCms=function(a){return this.core.memory.u32[a+4>>>2]>>8&3};a.prototype.getSetTileMirrorS=function(a){return this.core.memory.u32[a+4>>>2]>>5&1};a.prototype.getSetTileMasks=function(a){return this.core.memory.u32[a+4>>>2]>>4&15};a.prototype.getSetTileShifts=function(a){return this.core.memory.u32[a+4>>>2]&15};a.prototype.getLoadBlockTile=function(a){return this.core.memory.u8[a+4^3]&7};a.prototype.getLoadBlockUls=function(a){return this.core.memory.u32[a>>>2]>>12&4095};a.prototype.getLoadBlockUlt=
function(a){return this.core.memory.u32[a>>>2]&4095};a.prototype.getLoadBlockLrs=function(a){return this.core.memory.u32[a+4>>>2]>>12&4095};a.prototype.getLoadBlockDxt=function(a){return this.core.memory.u32[a+4>>>2]&4095};a.prototype.getSetTileSizeTile=function(a){return this.core.memory.u8[a+4^3]&7};a.prototype.getSetTileSizeUls=function(a){return this.core.memory.u32[a>>>2]>>12&4095};a.prototype.getSetTileSizeUlt=function(a){return this.core.memory.u32[a>>>2]&4095};a.prototype.getSetTileSizeLrs=
function(a){return this.core.memory.u32[a+4>>>2]>>12&4095};a.prototype.getSetTileSizeLrt=function(a){return this.core.memory.u32[a+4>>>2]&4095};a.prototype.getSetPrimColorM=function(a){return this.core.memory.u32[a>>>2]>>>8&255};a.prototype.getSetPrimColorL=function(a){return this.core.memory.u32[a>>>2]&255};a.prototype.getSetPrimColorR=function(a){return this.core.memory.u8[a+7]};a.prototype.getSetPrimColorG=function(a){return this.core.memory.u8[a+6]};a.prototype.getSetPrimColorB=function(a){return this.core.memory.u8[a+
5]};a.prototype.getSetPrimColorA=function(a){return this.core.memory.u8[a+4]};a.prototype.getSetGeometryMode=function(a){return this.core.memory.u32[a+4>>>2]};a.prototype.getClearGeometryMode=function(a){return this.core.memory.u32[a+4>>>2]};a.prototype.pow2roundup=function(a){var b;for(b=1;b<a;)b<<=1;return b};a.prototype.getSetFillColorR=function(a){return this.core.memory.u8[a+7]};a.prototype.getSetFillColorG=function(a){return this.core.memory.u8[a+6]};a.prototype.getSetFillColorB=function(a){return this.core.memory.u8[a+
5]};a.prototype.getSetFillColorA=function(a){return this.core.memory.u8[a+4]};a.prototype.getSetEnvColorR=function(a){return this.core.memory.u8[a+7]};a.prototype.getSetEnvColorG=function(a){return this.core.memory.u8[a+6]};a.prototype.getSetEnvColorB=function(a){return this.core.memory.u8[a+5]};a.prototype.getSetEnvColorA=function(a){return this.core.memory.u8[a+4]};("undefined"!==typeof exports&&null!==exports?exports:self).C1964jsVideoHLEle=a}).call(this);(function(){var a=function(a,c){this.gl=void 0;this.core=a;this.webGLStart(c);return this};(function(){var b=void 0;var c=mat4.create();b=mat4.create();a.prototype.initGL=function(a){try{log("canvas = "+a),log("canvas.getContext = "+a.getContext),this.gl=a.getContext("webgl")||a.getContext("moz-webgl")||a.getContext("webkit-3d")||a.getContext("experimental-webgl"),log("gl = "+this.gl),this.gl.viewportWidth=a.width,log("this.gl.viewportWidth = "+this.gl.viewportWidth),this.gl.viewportHeight=a.height,
log("this.gl.viewportHeight = "+this.gl.viewportHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}catch(e){}this.gl||log("Could not initialize WebGL. Your browser may not support it.")};a.prototype.createShader=function(a,b){a=this.gl.createShader(a);this.gl.shaderSource(a,b);this.gl.compileShader(a);if(this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS))return a;console.log(this.gl.getShaderInfoLog(a));this.gl.deleteShader(a)};a.prototype.initShaders=function(a,b){a=document.getElementById("vertex-shader").text;
b=document.getElementById("fragment-shader").text;a=this.createShader(this.gl.VERTEX_SHADER,a);b=this.createShader(this.gl.FRAGMENT_SHADER,b);var c=this.gl.createProgram();this.gl.attachShader(c,a);this.gl.attachShader(c,b);this.gl.linkProgram(c);this.gl.getProgramParameter(c,this.gl.LINK_STATUS)||alert("Could not initialize shaders");this.gl.useProgram(c);c.vertexPositionAttribute=this.gl.getAttribLocation(c,"aVertexPosition");c.vertexColorAttribute=this.gl.getAttribLocation(c,"aVertexColor");c.pMatrixUniform=
this.gl.getUniformLocation(c,"uPMatrix");c.mvMatrixUniform=this.gl.getUniformLocation(c,"uMVMatrix");c.textureCoordAttribute=this.gl.getAttribLocation(c,"aTextureCoord");c.samplerUniform=this.gl.getUniformLocation(c,"uSampler");c.wireframeUniform=this.gl.getUniformLocation(c,"uWireframe");c.uCombineA0=this.gl.getUniformLocation(c,"uCombineA0");c.uCombineB0=this.gl.getUniformLocation(c,"uCombineB0");c.uCombineC0=this.gl.getUniformLocation(c,"uCombineC0");c.uCombineD0=this.gl.getUniformLocation(c,"uCombineD0");
c.uCombineA0a=this.gl.getUniformLocation(c,"uCombineA0a");c.uCombineB0a=this.gl.getUniformLocation(c,"uCombineB0a");c.uCombineC0a=this.gl.getUniformLocation(c,"uCombineC0a");c.uCombineD0a=this.gl.getUniformLocation(c,"uCombineD0a");c.uCombineA1=this.gl.getUniformLocation(c,"uCombineA1");c.uCombineB1=this.gl.getUniformLocation(c,"uCombineB1");c.uCombineC1=this.gl.getUniformLocation(c,"uCombineC1");c.uCombineD1=this.gl.getUniformLocation(c,"uCombineD1");c.uCombineA1a=this.gl.getUniformLocation(c,"uCombineA1a");
c.uCombineB1a=this.gl.getUniformLocation(c,"uCombineB1a");c.uCombineC1a=this.gl.getUniformLocation(c,"uCombineC1a");c.uCombineD1a=this.gl.getUniformLocation(c,"uCombineD1a");c.uPrimColor=this.gl.getUniformLocation(c,"uPrimColor");c.uFillColor=this.gl.getUniformLocation(c,"uFillColor");c.uEnvColor=this.gl.getUniformLocation(c,"uEnvColor");c.uBlendColor=this.gl.getUniformLocation(c,"uBlendColor");c.cycleType=this.gl.getUniformLocation(c,"cycleType");c.uAlphaTestEnabled=this.gl.getUniformLocation(c,
"uAlphaTestEnabled");return c};a.prototype.setCombineUniforms=function(a,b){this.gl.uniform1i(b.uCombineA0,a.combine[0]);this.gl.uniform1i(b.uCombineB0,a.combine[2]);this.gl.uniform1i(b.uCombineC0,a.combine[4]);this.gl.uniform1i(b.uCombineD0,a.combine[6]);this.gl.uniform1i(b.uCombineA0a,a.combine[1]);this.gl.uniform1i(b.uCombineB0a,a.combine[3]);this.gl.uniform1i(b.uCombineC0a,a.combine[5]);this.gl.uniform1i(b.uCombineD0a,a.combine[7]);this.gl.uniform1i(b.uCombineA1,a.combine[8]);this.gl.uniform1i(b.uCombineB1,
a.combine[10]);this.gl.uniform1i(b.uCombineC1,a.combine[12]);this.gl.uniform1i(b.uCombineD1,a.combine[14]);this.gl.uniform1i(b.uCombineA1a,a.combine[9]);this.gl.uniform1i(b.uCombineB1a,a.combine[11]);this.gl.uniform1i(b.uCombineC1a,a.combine[13]);this.gl.uniform1i(b.uCombineD1a,a.combine[15])};a.prototype.setMatrixUniforms=function(a){this.gl.uniformMatrix4fv(a.pMatrixUniform,!1,b);this.gl.uniformMatrix4fv(a.mvMatrixUniform,!1,c)};a.prototype.beginDList=function(){var a;var e=self.innerWidth/self.innerHeight;
var g=this.gl.viewportWidth;var h=this.gl.viewportHeight;var k=a=0;var l=document.getElementById("stretch").checked;var m=this.core.videoHLE.n64ViewportWidth/this.core.videoHLE.n64ViewportHeight;l||(e>=m?(g=this.gl.viewportWidth/e*m,a=(this.gl.viewportWidth-g)/2):(h=this.gl.viewportHeight*e/m,k=(this.gl.viewportHeight-h)/2));this.gl.viewport(a,k,g,h);mat4.identity(c);mat4.identity(b);mat4.translate(c,[0,0,-(this.gl.viewportWidth/this.gl.viewportHeight)])};a.prototype.webGLStart=function(a){a=document.getElementById("Canvas3D");
this.initGL(a);this.shaderProgram=this.initShaders("fragment-shader","vertex-shader");this.gl&&this.gl.clearColor(0,0,0,1);a.style.visibility="hidden"};a.prototype.show3D=function(){document.getElementById("Canvas3D").style.visibility="visible";document.getElementById("Canvas").style.visibility="hidden"};return a.prototype.hide3D=function(){document.getElementById("Canvas3D").style.visibility="hidden";document.getElementById("Canvas").style.visibility="visible"}})();("undefined"!==typeof exports&&
null!==exports?exports:self).C1964jsWebGL=a}).call(this);var bitjs=bitjs||{};bitjs.io=bitjs.io||{};
(function(){bitjs.BIT=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768];var a=[0,1,3,7,15,31,63,127,255];bitjs.io.BitStream=function(a,c,d,e){if(!a||!a.toString||"[object ArrayBuffer]"!==a.toString())throw"Error! BitArray constructed with an invalid ArrayBuffer object";this.bytes=new Uint8Array(a,d||0,e||a.byteLength);this.bitPtr=this.bytePtr=0;this.peekBits=c?this.peekBits_rtl:this.peekBits_ltr};bitjs.io.BitStream.prototype.peekBits_ltr=function(b,c){if(0>=b||"number"!=typeof b)return 0;
for(var d=this.bytePtr,e=this.bitPtr,g=0,h=0,k=this.bytes;0<b;){if(d>=k.length)throw"Error!  Overflowed the bit stream! n="+b+", bytePtr="+d+", bytes.length="+k.length+", bitPtr="+e;var l=8-e;if(b>=l){var m=a[l]<<e;g|=(k[d]&m)>>e<<h;d++;e=0;h+=l;b-=l}else m=a[b]<<e,g|=(k[d]&m)>>e<<h,e+=b,h+=b,b=0}c&&(this.bitPtr=e,this.bytePtr=d);return g};bitjs.io.BitStream.prototype.peekBits_rtl=function(b,c){if(0>=b||"number"!=typeof b)return 0;for(var d=this.bytePtr,e=this.bitPtr,g=0,h=this.bytes;0<b;){if(d>=
h.length)throw"Error!  Overflowed the bit stream! n="+b+", bytePtr="+d+", bytes.length="+h.length+", bitPtr="+e;var k=8-e;b>=k?(g<<=k,g|=a[k]&h[d],d++,e=0,b-=k):(g<<=b,g|=(h[d]&a[b]<<8-b-e)>>8-b-e,e+=b,b=0)}c&&(this.bitPtr=e,this.bytePtr=d);return g};bitjs.io.BitStream.prototype.getBits=function(){return((this.bytes[this.bytePtr]&255)<<16)+((this.bytes[this.bytePtr+1]&255)<<8)+(this.bytes[this.bytePtr+2]&255)>>>8-this.bitPtr&65535};bitjs.io.BitStream.prototype.readBits=function(a){return this.peekBits(a,
!0)};bitjs.io.BitStream.prototype.peekBytes=function(a,c){if(0>=a||"number"!=typeof a)return 0;for(;0!=this.bitPtr;)this.readBits(1);c=c||!1;var b=this.bytePtr;b=this.bytes.subarray(b,b+a);c&&(this.bytePtr+=a);return b};bitjs.io.BitStream.prototype.readBytes=function(a){return this.peekBytes(a,!0)};bitjs.io.ByteStream=function(a,c,d){this.bytes=new Uint8Array(a,c||0,d||a.byteLength);this.ptr=0};bitjs.io.ByteStream.prototype.peekNumber=function(a){if(0>=a||"number"!=typeof a)return-1;var b=0;for(a=
this.ptr+a-1;a>=this.ptr;)b<<=8,b|=this.bytes[a],--a;return b};bitjs.io.ByteStream.prototype.readNumber=function(a){var b=this.peekNumber(a);this.ptr+=a;return b};bitjs.io.ByteStream.prototype.peekBytes=function(a,c){if(0>=a||"number"!=typeof a)return 0;var b=this.bytes.subarray(this.ptr,this.ptr+a);c&&(this.ptr+=a);return b};bitjs.io.ByteStream.prototype.readBytes=function(a){return this.peekBytes(a,!0)};bitjs.io.ByteStream.prototype.peekString=function(a){if(0>=a||"number"!=typeof a)return 0;var b=
"",d=this.ptr;for(a=this.ptr+a;d<a;++d)b+=String.fromCharCode(this.bytes[d]);return b};bitjs.io.ByteStream.prototype.readString=function(a){var b=this.peekString(a);this.ptr+=a;return b};bitjs.io.ByteBuffer=function(a){if("number"!=typeof a||0>=a)throw"Error! ByteBuffer initialized with '"+a+"'";this.data=new Uint8Array(a);this.ptr=0};bitjs.io.ByteBuffer.prototype.insertByte=function(a){this.data[this.ptr++]=a};bitjs.io.ByteBuffer.prototype.insertBytes=function(a){this.data.set(a,this.ptr);this.ptr+=
a.length}})();bitjs=bitjs||{};bitjs.archive=bitjs.archive||{};bitjs.archive.UnarchiveEvent=function(a){this.type=a};bitjs.archive.UnarchiveEvent.Type={START:"start",PROGRESS:"progress",EXTRACT:"extract",FINISH:"finish",INFO:"info",ERROR:"error"};bitjs.archive.UnarchiveInfoEvent=function(a){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.INFO);this.msg=a};$jscomp.inherits(bitjs.archive.UnarchiveInfoEvent,bitjs.archive.UnarchiveEvent);bitjs.archive.UnarchiveInfoEvent.Type=bitjs.archive.UnarchiveEvent.Type;
bitjs.archive.UnarchiveErrorEvent=function(a){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.ERROR);this.msg=a};$jscomp.inherits(bitjs.archive.UnarchiveErrorEvent,bitjs.archive.UnarchiveEvent);bitjs.archive.UnarchiveErrorEvent.Type=bitjs.archive.UnarchiveEvent.Type;bitjs.archive.UnarchiveStartEvent=function(){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.START)};$jscomp.inherits(bitjs.archive.UnarchiveStartEvent,bitjs.archive.UnarchiveEvent);
bitjs.archive.UnarchiveStartEvent.Type=bitjs.archive.UnarchiveEvent.Type;bitjs.archive.UnarchiveFinishEvent=function(){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.FINISH)};$jscomp.inherits(bitjs.archive.UnarchiveFinishEvent,bitjs.archive.UnarchiveEvent);bitjs.archive.UnarchiveFinishEvent.Type=bitjs.archive.UnarchiveEvent.Type;
bitjs.archive.UnarchiveProgressEvent=function(a,b,c,d,e,g,h){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.PROGRESS);this.currentFilename=a;this.currentFileNumber=b;this.currentBytesUnarchivedInFile=c;this.totalFilesInArchive=g;this.currentBytesUnarchived=d;this.totalUncompressedBytesInArchive=e;this.totalCompressedBytesRead=h};$jscomp.inherits(bitjs.archive.UnarchiveProgressEvent,bitjs.archive.UnarchiveEvent);bitjs.archive.UnarchiveProgressEvent.Type=bitjs.archive.UnarchiveEvent.Type;
bitjs.archive.UnarchiveExtractEvent=function(a){bitjs.archive.UnarchiveEvent.call(this,bitjs.archive.UnarchiveEvent.Type.EXTRACT);this.unarchivedFile=a};$jscomp.inherits(bitjs.archive.UnarchiveExtractEvent,bitjs.archive.UnarchiveEvent);bitjs.archive.UnarchiveExtractEvent.Type=bitjs.archive.UnarchiveEvent.Type;
bitjs.archive.Unarchiver=function(a,b){this.ab=a;this.pathToBitJS_=b||"/";this.listeners_={};for(var c in bitjs.archive.UnarchiveEvent.Type)this.listeners_[bitjs.archive.UnarchiveEvent.Type[c]]=[];this.worker_=null};bitjs.archive.Unarchiver.prototype.getScriptFileName=function(){throw"Subclasses of AbstractUnarchiver must overload getScriptFileName()";};bitjs.archive.Unarchiver.prototype.addEventListener=function(a,b){a in this.listeners_&&-1==this.listeners_[a].indexOf(b)&&this.listeners_[a].push(b)};
bitjs.archive.Unarchiver.prototype.removeEventListener=function(a,b){a in this.listeners_&&(b=this.listeners_[a].indexOf(b),-1!=b&&this.listeners_[a].splice(b,1))};bitjs.archive.Unarchiver.prototype.handleWorkerEvent_=function(a){(a instanceof bitjs.archive.UnarchiveEvent||a.type)&&this.listeners_[a.type]instanceof Array?(this.listeners_[a.type].forEach(function(b){b(a)}),a.type==bitjs.archive.UnarchiveEvent.Type.FINISH&&this.worker_.terminate()):console.log(a)};
bitjs.archive.Unarchiver.prototype.start=function(){var a=this,b=this.pathToBitJS_+this.getScriptFileName();b&&(this.worker_=new Worker(b),this.worker_.onerror=function(a){console.log("Worker error: message = "+a.message);throw a;},this.worker_.onmessage=function(b){"string"==typeof b.data?console.log(b.data):a.handleWorkerEvent_(b.data)},this.worker_.postMessage({file:this.ab,logToConsole:!1}),this.ab=null)};bitjs.archive.Unarchiver.prototype.update=function(a){this.worker_&&this.worker_.postMessage({bytes:a})};
bitjs.archive.Unarchiver.prototype.stop=function(){this.worker_&&this.worker_.terminate()};bitjs.archive.Unzipper=function(a,b){bitjs.archive.Unarchiver.call(this,a,b)};$jscomp.inherits(bitjs.archive.Unzipper,bitjs.archive.Unarchiver);bitjs.archive.Unzipper.prototype.getScriptFileName=function(){return"unzip.min.js"};bitjs.archive.Unrarrer=function(a,b){bitjs.archive.Unarchiver.call(this,a,b)};$jscomp.inherits(bitjs.archive.Unrarrer,bitjs.archive.Unarchiver);
bitjs.archive.Unrarrer.prototype.getScriptFileName=function(){return"archive/unrar.js"};bitjs.archive.Untarrer=function(a,b){bitjs.archive.Unarchiver.call(this,a,b)};$jscomp.inherits(bitjs.archive.Untarrer,bitjs.archive.Unarchiver);bitjs.archive.Untarrer.prototype.getScriptFileName=function(){return"archive/untar.js"};
bitjs.archive.GetUnarchiver=function(a,b){b=b||"";var c=new Uint8Array(a,0,10);return 82==c[0]&&97==c[1]&&114==c[2]&&33==c[3]?new bitjs.archive.Unrarrer(a,b):80==c[0]&&75==c[1]?new bitjs.archive.Unzipper(a,b):new bitjs.archive.Untarrer(a,b)};(function(){var a;var b=a=void 0;this.progress=document.querySelector(".percent");var c="";self.File?self.FileReader?self.FileList?self.Blob||(alertMessge+=" self.Blob"):c+=" self.FileList":c+=" self.FileReader":c+=" self.File";0<c.length&&log("Unsupported in this browser: "+c);this.i1964js=void 0;var d=function(){var a;var b=[];var c=self.location.href.slice(self.location.href.indexOf("?")+1).split("&");for(a=0;a<c.length;){var d=c[a].split("=");b.push(d[0]);b[d[0]]=unescape(d[1]);a++}return b};
var e=function(b){try{void 0!==this.i1964js&&null!=this.i1964js&&this.i1964js.stopEmulatorAndCleanup(),this.i1964js=new C1964jsEmulator(a,b),this.i1964js.startEmulator()}catch(r){throw b=r,void 0!==this.i1964js&&null!=this.i1964js&&(this.i1964js.terminate=!0),b;}};var g=function(a,b){if("zip"!==a.split(".").pop().toLowerCase()){var c=b;e(c)}else a=new bitjs.archive.Unzipper(b,"lib/bitjs/"),a.addEventListener(bitjs.archive.UnarchiveEvent.Type.EXTRACT,function(a){if(a.unarchivedFile)return console.log("extracted: "+
a.unarchivedFile.filename),c=a.unarchivedFile.fileData.buffer,e(c)}),a.addEventListener(bitjs.archive.UnarchiveEvent.Type.INFO,function(a){return console.log("zip info: "+a.msg)}),a.addEventListener(bitjs.archive.UnarchiveEvent.Type.PROGRESS,function(a){}),a.addEventListener(bitjs.archive.UnarchiveEvent.Type.FINISH,function(a){return console.log("finish: "+a.msg)}),a.addEventListener(bitjs.archive.UnarchiveEvent.Type.ERROR,function(a){return console.log("ERROR: "+a.msg)}),a.start()};this.start1964=
function(b){a=b;var c=d();var e=void 0;for(b=0;b<c.length;)"rom"===c[b]&&(e=c[c[b]]),b++;void 0!==e&&null!=e?(b=new XMLHttpRequest,b.open("GET",e,!0),b.responseType="arraybuffer",b.send(),b.onload=function(a){n();return g(e,a.target.response)}):m()};var h=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case a.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case a.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}};
var k=function(a){a.lengthComputable&&(a=Math.round(a.loaded/a.total*100),100>a&&void 0!==this.progress&&(this.progress.style.width=a+"%",this.progress.textContent=a+"%"))};var l=function(a){if(void 0!==a.target.files&&void 0!==a.target.files[0]){var c=a.target.files[0].name;this.progressBar=document.getElementById("progress_bar");void 0!==this.progress&&(this.progress.style.width="0%",this.progress.textContent="0%");b=new FileReader;b.onerror=h;b.onprogress=k;b.onabort=function(a){alert("File read cancelled")};
document.getElementById("files").removeEventListener("change",l,!1);document.getElementById("files").addEventListener("change",l,!1);b.onloadstart=function(a){void 0!==this.progressBar&&(document.getElementById("progress_bar").className="loading")};b.onload=function(a){void 0!==this.progress&&(this.progress.style.width="100%",this.progress.textContent="100%");setTimeout("document.getElementById('user_panel').disabled = true;document.getElementById('user_panel').className='';",1E3);g(c,b.result)};
b.readAsArrayBuffer(a.target.files[0])}};document.getElementById("user_panel").ontouchend=function(a){return m()};var m=function(){document.getElementById("user_panel").className="show";document.getElementById("user_panel").disabled=!1;return self.startGradientBackground()};var n=function(){document.getElementById("user_panel").className="";return self.stopGradientBackground()};document.onmouseup=function(a){if("dropbtn"===a.target.className||"file"===a.target.className)a.cancelBubble=!0,a.stopPropagation&&
a.stopPropagation();else{if(""===document.getElementById("user_panel").className)return m();if("show"===document.getElementById("user_panel").className)return n()}};document.ontouchend=function(a){if("dropbtn"===a.target.className||"file"===a.target.className)a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();else{if(""===document.getElementById("user_panel").className)return m();if("show"===document.getElementById("user_panel").className)return n()}};document.getElementById("files").addEventListener("change",
l,!1)}).call(this);
