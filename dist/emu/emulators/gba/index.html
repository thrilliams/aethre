<!doctypehtml><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta content="width=device-width,initial-scale=1.2"name=viewport><meta content="gba.ninja - Gameboy Advance emulator in the browser"name=title><meta content="Run Gameboy Advance games in a web browser. Based on the VisualBoyAdvance-M emulator."name=description><title>gba.ninja</title><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag("js",new Date);gtag("config","UA-45495852-6");</script><script>navigator.serviceWorker&&(navigator.serviceWorker.register("./sw.js",{scope:"./"}),navigator.serviceWorker.addEventListener("message",function(a){var b=a.data.msg;console.log("unknown sw message",a);gtag("event","unknown_sw_message_1",{name:b.name})}));</script><style>body,html{width:100%;height:100%;margin:0;font-family:sans-serif;background-color:#f3ddff}canvas{right:0;left:0;bottom:0;top:0;position:absolute;width:100%;height:100%}</style><script id=2d-vertex-shader type=x-shader/x-vertex>attribute vec2 a_position;varying highp vec2 v_textureCoord;void main() {gl_Position=vec4((a_position.x * 2.0 * 1.0666) - 1.0, (a_position.y * 2.0 * 1.6) * -1.0 + 1.0, 0, 1);v_textureCoord=vec2(a_position.x,a_position.y);}</script><script id=2d-fragment-shader type=x-shader/x-fragment>varying highp vec2 v_textureCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor=texture2D(u_sampler, vec2(v_textureCoord.s, v_textureCoord.t));}</script><script>window.onerror=function(e,o,t,c,n){try{var r="";if(r+="object"==typeof e?"Event: "+e.type+" "+e.message+" ;":e+"; ",o&&(r+=" Source: "+o+"; "),void 0!==t&&(r+=" Line: "+t+"; "),void 0!==c&&(r+=" Col: "+c+"; "),n){r+=" Message: "+n.message+"; ";try{r+=" StackTop: "+n.stack.split(/\n/g)[1].trim()+"; "}catch(e){}}console.log("Remote logged: ",r),gtag("event","exception",{description:r})}catch(e){console.error(e)}}</script><script>try{void new Image("/logo.png")}catch(a){}var qs={};location.search&&location.search.substr(1).split(/&/g).map(function(a){a=a.split(/=/g);1===a.length&&a.push("1");qs[a[0]]=a[1]});function escapeHtml(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return a.replace(/[&<>"']/g,function(a){return b[a]||a})}function unescapeHtml(a){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'"};return a.replace(/&.+?;/g,function(a){return b[a]||a})}
var backspaceHandler=function(a){8===a.which&&(!/INPUT|SELECT|TEXTAREA/i.test(a.target.tagName)||a.target.disabled||a.target.readOnly)&&a.preventDefault()}.bind(this);document.addEventListener("keydown",backspaceHandler);document.addEventListener("keypress",backspaceHandler);window.performance=window.performance||{};performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}();
window.localStorage||(window.localStorage={});try{localStorage._=1}catch(a){window.isShittyLocalstorage=!0}var readyHandlers={},onReady=function(a,b){null===readyHandlers[a]?setTimeout(function(){b()}):(void 0===readyHandlers[a]&&(readyHandlers[a]=[]),readyHandlers[a].push(b))},triggerReady=function(a){readyHandlers[a]&&readyHandlers[a].forEach(function(a){a()});readyHandlers[a]=null};function isPowerOf2(a){return 0!=a&&0==(a&a-1)}var modalEls,modalRefcount=0;
function modal(a,b){function d(){modalRefcount--;0>=modalRefcount&&(modalRefcount=0,document.body.style.overflow="");modalEls.modal.style.display="none";f()}modalRefcount++;modalEls=modalEls||{modal:document.querySelector(".modal"),modalTitle:document.querySelector(".modal-title"),modalTitleText:document.querySelector(".modal-title").childNodes[0],modalText:document.querySelector(".modal-text"),modalTextText:document.querySelector(".modal-text").childNodes[0],modalLeftButton:document.querySelector(".modal-button-left"),
modalLeftButtonText:document.querySelector(".modal-button-left").childNodes[0],modalRightButton:document.querySelector(".modal-button-right"),modalRightButtonText:document.querySelector(".modal-button-right").childNodes[0],modalProgress:document.querySelector(".modal-progress"),modalInput:document.querySelector(".modal-input")};b=b||{};b={title:b.title||null,text:a,leftButtonText:b.leftButtonText||"OK",leftButtonFn:b.hasOwnProperty("leftButtonFn")?b.leftButtonFn:function(){},rightButtonText:b.rightButtonText||
"OK",rightButtonFn:b.rightButtonFn||null,input:"string"===typeof b.input?b.input:null};modalEls.modal.style.display="block";document.body.style.overflow="hidden";window.scrollTo(0,0);b.title?(modalEls.modalTitle.style.display="block",modalEls.modalTitleText.textContent=b.title):modalEls.modalTitle.style.display="none";modalEls.modalTextText.textContent=b.text;modalEls.modalLeftButtonText.textContent=b.leftButtonText;modalEls.modalRightButtonText.textContent=b.rightButtonText;modalEls.modalLeftButton.style.display=
b.leftButtonFn?"":"none";modalEls.modalRightButton.style.display=b.rightButtonFn?"":"none";modalEls.modalProgress.style.display="none";modalEls.modalInput.value="";modalEls.modalInput.style.display="string"===typeof b.input?"":"none";var c=function(){b.leftButtonFn&&!1===b.leftButtonFn()||d()};modalEls.modalLeftButton.addEventListener("click",c);var e=function(){b.rightButtonFn&&!1===b.rightButtonFn()||d()};modalEls.modalRightButton.addEventListener("click",e);var f=function(){modalEls.modalLeftButton.removeEventListener("click",
c);modalEls.modalRightButton.removeEventListener("click",e)};return{hideModal:d,setProgress:function(a){modalEls.modalProgress.style.display="block";modalEls.modalProgress.style.width=a+"%"},getInputValue:function(){return modalEls.modalInput.value}}}function stringToCharCodes(a){return a.split("").map(function(a){return a.charCodeAt(0)})}function hasEmuModule(){return!!window.gbaninja.HEAP8}var romBuffer8=null;
window.loadRomFromBuffer=function(a,b){function d(){if(hasEmuModule())romBuffer8=a,triggerReady("cartridge");else{var b=function(){if(-1===window.emuScriptProgress)return c.hideModal(),modal("There was an error while loading the emulator module. You'll need to refresh the page.",{title:"Error",leftButtonText:"Ok",leftButtonFn:function(){clearInterval(e)}});c.setProgress(window.emuScriptProgress)};gtag("event","emu_file_missing_at_load_rom_1",{});var c=modal("The emulator module isn't loaded yet. Give it a moment.",
{title:"Waiting For Emulator Module",leftButtonText:"Back",leftButtonFn:function(){clearInterval(e)}});b();var e=setInterval(function(){b();100<=window.emuScriptProgress&&(clearInterval(e),c.hideModal(),romBuffer8=a,triggerReady("cartridge"))},100)}}var c={title:"Error"};if(512>a.length)return gtag("event","load_tiny_rom_1",{event_label:b}),modal("That file isn't a GBA ROM. (It's too small to be a ROM.)",c);var e=String.fromCharCode(a[172],a[173],a[174],a[175]),f=[a[260],a[261],a[262],a[263],a[264],
a[265],a[266],a[267]].map(function(a){return a.toString(16)}).join();if(-1!==b.search(/\.zip$/i))return gtag("event","load_zip_rom_1",{event_label:b}),modal("You need to extract the rom file from the zip.",c);if("PK"===String.fromCharCode(a[0],a[1]))return gtag("event","load_zip_rom_1",{event_label:b+" (non-dot-zip-file)"}),modal("You need to extract the rom file.",c);if(-1!==b.search(/\.sav$/i))return gtag("event","load_sav_rom_1",{event_label:b}),modal("That's not a ROM, it's a savegame file. GBA ROM files usually end in '.gba'.",
c);if(-1!==b.search(/\.smc$/i)||-1!==b.search(/\.sfc$/i))return gtag("event","load_smc_rom_1",{event_label:b}),modal("That's a SNES ROM, this emulator runs Gameboy Advance ROMs.",c);if("ce,ed,66,66,cc,d,0,b"===f)return gtag("event","load_gb_rom_1",{event_label:b}),e="",-1!==b.search(/\.gbc$/i)&&(e="Color "),modal("That's a Gameboy "+e+"ROM, this emulator only runs Gameboy Advance ROMs.",c);isPowerOf2(a.length)||gtag("event","non_pot_rom_1",{event_label:stringToCharCodes(e)+" "+b+" "+a.length});if(e.search(/^[A-Z0-9]{4}$/)&&
!qs.ignoreInvalidRomCode)return gtag("event","invalid_rom_code_1",{event_label:stringToCharCodes(e)+" "+b}),modal("That file doesn't look like a GBA ROM. (Couldn't find a rom code in the file.)",{title:"Error",rightButtonText:"Run it anyway",rightButtonFn:d});d()};
window.loadRomFromFile=function(a){var b=a.currentTarget.files[0],d=b.name;a.currentTarget.form.reset();if(b){var c=modal(d,{title:"Loading File",leftButtonFn:null}),e=new FileReader;e.readAsArrayBuffer(b);e.onload=function(){c.hideModal();var a=new Uint8Array(e.result);loadRomFromBuffer(a,b.name)}}};
window.loadRomFromNetwork=function(a){var b=new XMLHttpRequest,d={title:"Loading",leftButtonText:"Cancel",leftButtonFn:function(){b.abort()}};qs.exclusive&&(d.leftButtonFn=null);var c=modal("Loading "+a,d);c.setProgress(0);b.onload=function(e){c.hideModal();window.loadRomFromBuffer(new Uint8Array(b.response),a)};b.onprogress=function(a){c.setProgress(a.loaded/a.total*100)};b.onerror=function(a){c.hideModal();a={title:"Error",leftButtonText:"Ok"};qs.exclusive&&(a.leftButtonFn=function(){location.reload()},
a.leftButtonText="Reload Page");modal("There was an error loading the ROM.",a)};b.open("GET",a);b.responseType="arraybuffer";b.send()};window.gbaninja={onRuntimeInitialized:function(){triggerReady("emu")}};document.addEventListener("DOMContentLoaded",function(){triggerReady("document")});onReady("document",function(){window.init?window.init():document.querySelector(".pixels").innerHTML="<p style='margin: 20px;'>A required file failed to load.</p>";qs.autorun&&loadRomFromNetwork(qs.autorun)});
onReady("emu",function(){onReady("document",function(){onReady("cartridge",function(){window.start()})})});
var VBAInterface={VBA_get_emulating:function(){return gbaninja.ccall("VBA_get_emulating","int",[],[])},VBA_start:function(){return gbaninja.ccall("VBA_start","int",[],[])},VBA_do_cycles:function(a){return gbaninja.ccall("VBA_do_cycles","int",["int"],[a])},VBA_stop:function(){return gbaninja.ccall("VBA_stop","int",[],[])},VBA_get_bios:function(){return gbaninja.ccall("VBA_get_bios","int",[],[])},VBA_get_rom:function(){return gbaninja.ccall("VBA_get_rom","int",[],[])},VBA_get_internalRAM:function(){return gbaninja.ccall("VBA_get_internalRAM",
"int",[],[])},VBA_get_workRAM:function(){return gbaninja.ccall("VBA_get_workRAM","int",[],[])},VBA_get_paletteRAM:function(){return gbaninja.ccall("VBA_get_paletteRAM","int",[],[])},VBA_get_vram:function(){return gbaninja.ccall("VBA_get_vram","int",[],[])},VBA_get_pix:function(){return gbaninja.ccall("VBA_get_pix","int",[],[])},VBA_get_oam:function(){return gbaninja.ccall("VBA_get_oam","int",[],[])},VBA_get_ioMem:function(){return gbaninja.ccall("VBA_get_ioMem","int",[],[])},VBA_get_systemColorMap16:function(){return gbaninja.ccall("VBA_get_systemColorMap16",
"int",[],[])},VBA_get_systemColorMap32:function(){return gbaninja.ccall("VBA_get_systemColorMap32","int",[],[])},VBA_get_systemFrameSkip:function(){return gbaninja.ccall("VBA_get_systemFrameSkip","int",[],[])},VBA_set_systemFrameSkip:function(a){return gbaninja.ccall("VBA_set_systemFrameSkip","int",["int"],[a])},VBA_get_systemSaveUpdateCounter:function(){return gbaninja.ccall("VBA_get_systemSaveUpdateCounter","int",[],[])},VBA_reset_systemSaveUpdateCounter:function(){return gbaninja.ccall("VBA_reset_systemSaveUpdateCounter",
"int",[],[])},VBA_emuWriteBattery:function(){return gbaninja.ccall("VBA_emuWriteBattery","int",[],[])},VBA_agbPrintFlush:function(){return gbaninja.ccall("VBA_agbPrintFlush","int",[],[])},NYI:function(a){console.log("Feature is NYI: ",a)},getAudioSampleRate:function(){return window.vbaSound.getSampleRate()},getRomSize:function(a){return romBuffer8.byteLength},copyRomToMemory:function(a){for(var b=gbaninja.HEAP8,d=romBuffer8.byteLength,c=0;c<d;c++)b[a+c]=romBuffer8[c]},renderFrame:function(a){window.vbaGraphics.drawGBAFrame(a)},
initSound:function(){},pauseSound:function(){},resetSound:function(){window.vbaSound.resetSound()},resumeSound:function(){},writeSound:function(a,b){return window.vbaSound.writeSound(a,b)},setThrottleSound:function(a,b){},getSaveSize:function(){return vbaSaves.getSaveSize()}};VBAInterface.commitFlash=VBAInterface.commitEeprom=function(a,b){return vbaSaves.softCommit(a,b)};VBAInterface.restoreSaveMemory=function(a,b){return vbaSaves.restoreSaveMemory(a,b)};VBAInterface.getJoypad=function(a){return vbaInput.getJoypad(a)};
VBAInterface.dbgOutput=function(a,b){return console.log("dbgOutput",a,b)};function ajaxScript(a,b){var d=new XMLHttpRequest;d.onload=function(a){a=document.createElement("script");a.text=d.responseText;document.head.appendChild(a)};d.onprogress=function(a){b(a.loaded/a.total*100)};d.onerror=function(){b(-1);gtag("event","emu_load_error",{})};d.open("GET",a);d.responseType="text";d.send()}window.emuScriptProgress=0;ajaxScript("./emu.js",function(a,b){window.emuScriptProgress=a});
</script><script src=app.js></script><body><style>.ui{color:#4d2990}.ui-border-1{float:left;border:transparent 20px solid}.ui-border-2{padding:20px;border:13px solid #aa17fe;background-color:#fff;float:left;border-left-width:5px;border-right-width:5px;position:relative}section{margin:23px 0}h2{margin:0;font-size:14px;font-style:italic;text-decoration:underline}table{margin:0}label,p{margin:0;font-size:14px}.gap{margin-top:10px}input[type=file]{position:absolute;left:-1000000px}#load-rom-from-url{height:23px;border-radius:3px;border:solid 2px #000;margin-left:16px;padding:3px 13px}.btn{display:inline-block;border:1px #9b69b7 solid;border-width:4px 2px;padding:5px 13px;background-color:#3a3a3a;color:#ece6ff;font-weight:600;font-size:13px;min-width:60px;text-align:center}.btn:hover{cursor:pointer;border-color:#b09cbb;background-color:#7a7994}.empty-table{font-size:11px}table{border-collapse:collapse;font-size:11px}td{padding:3px 11px;border:2px solid #aa17fe;border-top:none;border-bottom:none}a{color:#a89be8}.report-bug-button{font-size:11px}.modal{display:none}.modal-background{position:absolute;top:0;bottom:0;left:0;right:0;opacity:.8;background-color:#000}.modal-body{width:400px;margin:0 auto;position:absolute;border:10px solid #aa17fe;background-color:#fff;border-left-width:3px;border-right-width:3px;left:50%;margin-left:-218px;margin-top:60px;padding:15px}.modal-title{font-size:16px}.modal-buttons{text-align:center}.modal-button-left,.modal-button-right{margin:6px 4px 3px 4px}.modal-progress{height:4px;margin-bottom:10px;background-color:#9b69b7}.modal-input{width:100%;padding:6px;box-sizing:border-box;margin:10px 0;border:2px solid #9b69b7;border-radius:5px;font-size:15px;color:#4d2990}.perf{position:fixed;bottom:0;color:#fff;padding:4px;margin:4px;background-color:rgba(0,0,0,.5)}.perf-left{display:inline-block;width:200px}</style><div class=pixels style=position:fixed;top:0;left:0;right:0;bottom:0></div><div class=ui style=display:none><div class=ui-border-1><div class=ui-border-2><img src=logo.png style=height:50px;padding-bottom:6px;padding-right:90px><section class=load-rom-section><h2>Load a Gameboy Advance ROM</h2><div class=gap></div><label class=btn for=load-rom-from-file>From File</label><div class=gap></div><form><input id=load-rom-from-file onchange=window.loadRomFromFile(event) type=file></form></section><section class=paused-section style=display:none><h2>Paused</h2><p style=padding-top:8px>Press <span class=unpause-key-prompt></span> to resume.</section><section class=savegames-section><h2>Saves</h2><div class=gap></div><div class=saves-list></div><div class=gap></div><label class=btn for=import-save-file>Import Save File</label><form><input id=import-save-file onchange=vbaSaves.onFileImportInputChanged(event,window.vbaUI.reset.bind(vbaUI)) type=file></form></section><section><h2>Keyboard Bindings</h2><div class=gap></div><div class=keyboard-bindings></div><div class=gap></div><button class="btn reset-bindings-button"onclick=window.vbaUI.resetBindings()>Reset Bindings</button></section><div style=position:absolute;right:10px;bottom:10px><a class=report-bug-button href=https://github.com/simon-paris/gba.ninja/blob/master/embed.md target=_blank>embed gba.ninja</a> Â  <a class=report-bug-button href=https://github.com/simon-paris/gba.ninja/issues target=_blank>report a bug</a></div></div></div></div><div class=modal><div class=modal-background></div><div class=modal-body><h2 class=modal-title>Title</h2><div class=gap></div><p class=modal-text>Text<div class=gap></div><div class=modal-progress></div><input class=modal-input><div class=modal-buttons><div class="btn modal-button-left">Left</div><div class="btn modal-button-right">Right</div></div></div></div><div class=toast></div><div class=perf style=display:none><span class=perf-left>Game</span><span class="perf-right perf-game">-</span><br><span class=perf-left>Speed</span><span class="perf-right perf-percentage">-</span><br><span class=perf-left>On-Time Renders</span><span class="perf-right perf-render-deadlines">-</span><br><span class=perf-left>On-Time Audio Events</span><span class="perf-right perf-audio-deadlines">-</span><br><span class=perf-left>Timesteps/Second</span><span class="perf-right perf-timesteps">-</span><br><span class=perf-left>Audio Lag</span><span class="perf-right perf-audio-lag">-</span><br></div>