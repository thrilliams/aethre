'use strict';function e(a){throw a;}var g=void 0,h=!0,q=null,y=!1;function aa(){return function(a){return a}}function J(){return function(){}}function L(a){return function(b){this[a]=b}}function M(a){return function(){return this[a]}}function N(a){return function(){return a}}function ca(a,b,c){return(((c.x-a.x)*(b.x-a.x)+(c.y-a.y)*(b.y-a.y))/S.RMb(a,b)).Rb(0,1)}function da(a){this.message=a}
function ea(a){for(var b=0;b<a.length;b++){var c=a[b].Kt,d=a[b].ep;ig.oAa=a[b].N0||a[b].yq;if(c){if(-1!=c.indexOf(a[b].Lt))return a[b].yq}else if(d)return a[b].yq}}function fa(a){var b=a.indexOf(ig.oAa);if(-1!=b)return parseFloat(a.substring(b+ig.oAa.length+1))}Number.prototype.map=function(a,b,c,d){return b==a?d:c+(d-c)*((this-a)/(b-a))};Number.prototype.Rb=function(a,b){return Math.min(b,Math.max(a,this))};Number.prototype.round=function(a){a=Math.pow(10,a||0);return Math.round(this*a)/a};
Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.Tcb=function(){return this|0};Array.prototype.ye=function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this};Array.prototype.last=function(){return this[this.length-1]};Array.prototype.AN=function(a){for(var b=this.length;b--;)if(-1!=a.indexOf(this[b]))return h;return y};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};
String.prototype.vm=function(a,b){return a+this.replace(/[.]/g,"/")+b};String.prototype.MNb=function(){return this.substring(0,this.length-0).replace(/\//g,".")};String.prototype.np=function(){return this.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})};String.prototype.QU=function(a){return this.slice(0,a.length)==a};
Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;return function(){var c=Array.prototype.slice.call(arguments);return b.apply(a||q,c)}});var S={};window.Qpb=S;S.create=function(a){var b={};b.x=a&&a.x||0;b.y=a&&a.y||0;return b};S.vc=function(a,b){var c={};c.x=a||0;c.y=b||0;return c};S.assign=function(a,b){a.x=b.x||0;a.y=b.y||0;return a};S.Oa=function(a,b,c){a.x=b||0;a.y=c||0;return a};S.add=function(a,b,c){c=c||a;c.x=(a.x||0)+(b.x||0);c.y=(a.y||0)+(b.y||0);return c};
S.Tm=function(a,b,c,d){d=d||a;d.x=(a.x||0)+(b.x||0)*c;d.y=(a.y||0)+(b.y||0)*c;return d};S.JQ=function(a,b,c,d){d=d||a;d.x=(a.x||0)+(b||0);d.y=(a.y||0)+((c===g||c===q?b:c)||0);return d};S.sub=function(a,b,c){c=c||a;c.x=(a.x||0)-(b.x||0);c.y=(a.y||0)-(b.y||0);return c};S.o0=function(a,b,c,d){d=d||a;d.x=(a.x||0)-(b||0);d.y=(a.y||0)-((c===g||c===q?b:c)||0);return d};S.FZ=function(a,b,c){c=c||a;c.x=(a.x||0)*(b.x||0);c.y=(a.y||0)*(b.y||0);return c};
S.UN=function(a,b,c,d){d=d||a;d.x=(a.x||0)*(b||0);d.y=(a.y||0)*((c===g||c===q?b:c)||0);return d};S.Bk=function(a,b,c){c=c||a;c.x=(a.x||0)*(b||0);c.y=(a.y||0)*(b||0);return c};S.tca=function(a,b,c){c=c||a;c.x=(a.x||0)/(b.x||0);c.y=(a.y||0)/(b.y||0);return c};S.hxb=function(a,b,c,d){d=d||a;d.x=(a.x||0)/(b||0);d.y=(a.y||0)/((c===g||c===q?b:c)||0);return d};S.ug=function(a,b){return(a.x||0)*(b.x||0)+(a.y||0)*(b.y||0)};S.W_a=function(a,b){return-(a.y||0)*(b.x||0)+(a.x||0)*(b.y||0)};
S.length=function(a,b,c){var d=Math.sqrt((a.x||0)*(a.x||0)+(a.y||0)*(a.y||0));return b!==g?S.UN(a,d?b/d:1,q,c):d};S.Rb=function(a,b,c,d){var f=S.length(a);return f>c?S.UN(a,c/f,q,d):f<b?S.UN(a,b/f,q,d):d?S.assign(d,a):a};S.normalize=function(a,b){return S.length(a,1,b)};S.Wm=function(a){var b=Math.acos(-(a.y||0)/S.length(a));a.x<0&&(b=2*Math.PI-b);return b||0};S.Qb=function(a,b){return Math.acos((S.ug(a,b)/(S.length(a)*S.length(b))).Rb(-1,1))||0};var ga=S.create();S.create();
S.URb=function(a,b,c){b=S.sub(b,a,ga);a=S.sub(c,a,ga);return S.Qb(b,a)};S.BYa=function(a,b){return a.y*b.x-a.x*b.y<=0};S.lDb=function(a,b,c,d){var f=Math.PI*2,c=(c%f+f)%f,d=(d%f+f)%f,i=S.Qb(b,a);S.BYa(b,a)||(i=f-i);return c<d?c<=i&&i<=d:i<=d||i>=c};S.rotate=function(a,b,c){var c=c||a,d=a.x||0;c.x=Math.cos(b)*d+Math.sin(b)*(a.y||0);c.y=Math.sin(-b)*d+Math.cos(b)*(a.y||0);return c};S.hz=function(a){var b=a.x||0;a.x=a.y||0;a.y=-b};S.w_=function(a,b){var c=b||a,d=a.x||0;c.x=-(a.y||0);c.y=d;return c};
S.Lc=function(a,b){var c=b||a;c.x=-a.x;c.y=-a.y;return c};S.GB=function(a,b,c){if(S.Ig(b))return h;var d=S.W_a(a,b);if(d==0&&S.ug(a,b)>0)return h;S.rotate(a,d>0?-c:c);c=S.W_a(a,b);if(d!=0&&d*c<=0){S.assign(a,b);return h}return y};S.u4=function(a,b){return a.x==b.x&&a.y==b.y};S.YSb=function(a,b,c){return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>c?y:h};S.eb=function(a,b){var c=a.x-b.x||0,d=a.y-b.y||0;return Math.sqrt(c*c+d*d)};S.BVb=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};
S.HR=function(a,b,c,d){a=a-c||0;b=b-d||0;return Math.sqrt(a*a+b*b)};S.RMb=function(a,b){var c=a.x-b.x||0,d=a.y-b.y||0;return c*c+d*d};S.an=function(a,b,c,d){d=d||a;d.x=(a.x||0)*(1-c)+(b.x||0)*c;d.y=(a.y||0)*(1-c)+(b.y||0)*c;return d};S.Ig=function(a){return a.x==0&&a.y==0};S.min=function(a,b,c){c=c||a;c.x=Math.min(a.x,b.x);c.y=Math.min(a.y,b.y);return c};S.UEb=function(a,b,c){a.x=Math.min(a.x,b);a.y=Math.min(a.y,c)};S.max=function(a,b,c){c=c||a;c.x=Math.max(a.x,b.x);c.y=Math.max(a.y,b.y);return c};
S.PEb=function(a,b,c){a.x=Math.max(a.x,b);a.y=Math.max(a.y,c)};S.print=function(a,b){return"Vec2[x: "+(a||0)+", y: "+(b||0)+"]"};S.round=function(a,b){var c=S.length(a),d=a.x>=0?1:-1,f=a.y>=0?1:-1;ga.x=d;ga.y=0;if(S.Qb(a,ga)<b){a.y=0;S.length(a,c);return a}ga.x=0;ga.y=f;if(S.Qb(a,ga)<b){a.x=0;S.length(a,c);return a}ga.x=d;ga.y=f;if(S.Qb(a,ga)<b){S.assign(a,ga);S.length(a,c)}return a};var Y={};window.Rpb=Y;Y.create=function(a){var b={};b.x=a&&a.x||0;b.y=a&&a.y||0;b.z=a&&a.z||0;return b};
Y.vc=function(a,b,c){var d={};d.x=a||0;d.y=b||0;d.z=c||0;return d};Y.assign=function(a,b){a.x=b.x||0;a.y=b.y||0;a.z=b.z||0;return a};Y.Oa=function(a,b,c,d){a.x=b||0;a.y=c||0;a.z=d||0;return a};Y.add=function(a,b,c){c=c||a;c.x=(a.x||0)+(b.x||0);c.y=(a.y||0)+(b.y||0);c.z=(a.z||0)+(b.z||0);return c};Y.Tm=function(a,b,c,d){d=d||a;d.x=(a.x||0)+(b.x||0)*c;d.y=(a.y||0)+(b.y||0)*c;d.z=(a.z||0)+(b.z||0)*c;return d};
Y.JQ=function(a,b,c,d,f){f=f||a;c=c===g||c===q?b:c;f.x=(a.x||0)+(b||0);f.y=(a.y||0)+(c||0);f.z=(a.z||0)+((d===g||d===q?c:d)||0);return f};Y.sub=function(a,b,c){c=c||a;c.x=(a.x||0)-(b.x||0);c.y=(a.y||0)-(b.y||0);c.z=(a.z||0)-(b.z||0);return c};Y.o0=function(a,b,c,d,f){f=f||a;c=c===g||c===q?b:c;f.x=(a.x||0)-(b||0);f.y=(a.y||0)-(c||0);f.z=(a.z||0)-((d===g||d===q?c:d)||0);return f};Y.FZ=function(a,b,c){c=c||a;c.x=(a.x||0)*(b.x||0);c.y=(a.y||0)*(b.y||0);c.z=(a.z||0)*(b.z||0);return c};
Y.UN=function(a,b,c,d,f){f=f||a;c=c===g||c===q?b:c;f.x=(a.x||0)*(b||0);f.y=(a.y||0)*(c||0);f.z=(a.z||0)*((d===g||d===q?c:d)||0);return f};Y.Bk=function(a,b,c){c=c||a;c.x=(a.x||0)*(b||0);c.y=(a.y||0)*(b||0);c.z=(a.z||0)*(b||0);return c};Y.tca=function(a,b,c){c=c||a;c.x=(a.x||0)/(b.x||0);c.y=(a.y||0)/(b.y||0);c.y=(a.z||0)/(b.z||0);return c};Y.hxb=function(a,b,c,d,f){f=f||a;c=c===g||c===q?b:c;f.x=(a.x||0)/(b||0);f.y=(a.y||0)/(c||0);f.z=(a.z||0)/((d===g||d===q?c:d)||0);return f};
Y.ug=function(a,b){return(a.x||0)*(b.x||0)+(a.y||0)*(b.y||0)+(a.z||0)*(b.z||0)};Y.length=function(a,b,c){var d=Math.sqrt((a.x||0)*(a.x||0)+(a.y||0)*(a.y||0)+(a.z||0)*(a.z||0));return b!==g?Y.UN(a,d?b/d:1,q,c):d};Y.normalize=function(a,b){return Y.length(a,1,b)};Y.Lc=function(a,b){var c=b||a;c.x=-a.x;c.y=-a.y;c.z=-a.z;return c};Y.u4=function(a,b){return a.x==b.x&&a.y==b.y&&a.z==b.z};Y.eb=function(a,b){var c=a.x-b.x||0,d=a.y-b.y||0,f=a.z-b.z||0;return Math.sqrt(c*c+d*d+f*f)};
Y.an=function(a,b,c,d){d=d||a;d.x=(a.x||0)*(1-c)+(b.x||0)*c;d.y=(a.y||0)*(1-c)+(b.y||0)*c;d.z=(a.z||0)*(1-c)+(b.z||0)*c;return d};Y.Wm=function(a){var b=Math.acos(-((a.y||0)-(a.z||0))/S.length(a));a.x<0&&(b=2*Math.PI-b);return b||0};Y.print=function(a,b,c){return"Vec3[x: "+(a||0)+", y: "+(b||0)+", z:"+(c||0)+"]"};Y.Ig=function(a){return a.x==0&&a.y==0&&a.z==0};var ia={};window.vjb=ia;var ma=S.create();
ia.Qna=function(a,b,c){var d=ca(a,b,c);ma.x=a.x+d*(b.x-a.x);ma.y=a.y+d*(b.y-a.y);return S.eb(ma,c)};ia.gxb=function(a,b,c,d){var f=ia.Qna(a,b,c),f=Math.min(f,ia.Qna(a,b,d)),f=Math.min(f,ia.Qna(c,d,a));return f=Math.min(f,ia.Qna(c,d,b))};ia.vSb=function(a,b,c,d){d=ca(b,c,d);a.x=b.x+d*(c.x-b.x);a.y=b.y+d*(c.y-b.y);return a};var na=0,oa=0;
ia.AN=function(a,b,c,d,f){oa=na=NaN;var i=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);if(!i)return y;d=na=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/i;c=oa=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/i;if(d<0||d>1||c<0||c>1)return y;if(f){c=na;f.x=a.x+c*(b.x-a.x);f.y=a.y+c*(b.y-a.y)}return h};ia.B4a=function(a,b,c,d,f,i,j){if(!ia.AN(a,b,c,d,i))return y;a=f*0.5/S.eb(a,b);b=na;return b<a&&(!j||j[0])||b>1-a&&(!j||j[1])?y:h};ia.Vpa=function(a,b){return a.y==b.y};ia.gC=function(a,b){return a.x==b.x};
var pa=S.create(),qa=S.create();ia.Pma=function(a,b,c,d,f,i,j,k,l,m){S.assign(pa,b);S.Bk(pa,f);pa.y=pa.y+d;S.assign(qa,c);S.Bk(qa,f);qa.y=qa.y+d;b=S.eb(pa,qa);c=l;l*2>b&&(c=b/2);if(c<k)return y;l=g;ia.AN(pa,qa,i,j);i=na;isNaN(i)||oa<0?i=ca(pa,qa,j):i>=0&&i<=1&&(l=0);c=c/b;if(m){m.Byb=i;m.dwb=i<k/b||i>1-k/b}i=i.Rb(c,1-c);a.x=pa.x+i*(qa.x-pa.x);a.y=pa.y+i*(qa.y-pa.y);l===g&&(l=S.eb(a,j));return l};
window.AI=function(a,b,c,d){this.get=function(f){if(!(a==b&&c==d)){for(var i=f,j=0;j<4;++j){var k=3*(1-3*c+3*a)*i*i+2*(3*c-6*a)*i+3*a;if(k==0)break;i=i-((((1-3*c+3*a)*i+(3*c-6*a))*i+3*a)*i-f)/k}f=(((1-3*d+3*b)*i+(3*d-6*b))*i+3*b)*i}return f}};
window.Xib={EASE_IN_OUT:new window.AI(0.42,0,0.58,1),EASE_OUT:new window.AI(0,0,0.58,1),EASE_IN:new window.AI(0.42,0,1,1),EASE:new window.AI(0.25,0.1,0.25,1),EASE_SOUND:new window.AI(0.5,0,0,1),LINEAR:new window.AI(0,0,1,1),JUMPY:new window.AI(0.31,1.51,0.53,0.94),EASE_OUT_STRONG:new window.AI(0,0.5,0.58,1),EASE_IN_STRONG:new window.AI(0.5,0,0.95,0.56)};da.prototype.toString=function(){return"AssertException: "+this.message};window.assert=function(a,b){a||e(new da(b))};
window.Iub=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];assert(a[c]!=g,"Value of '"+c+"' is undefined")}};var ra=[];
window.Ov={r:q,debug:q,version:"1.18a",dh:"en_US",global:window,YG:{},hn:[],ready:y,Wv:y,J:y,WIa:"",Yu:{},root:window.IG_ROOT||"",sEb:window.IG_ROOT||"",YL:q,yQ:[],Iaa:0,R8:function(a){return a.charAt(0)=="#"?document.getElementById(a.substr(1)):document.getElementsByTagName(a)},Yr:function(a){return document.createElement(a)},u4:function(a,b){if(a==b)return h;if(a instanceof ig.Ca||b instanceof ig.Ca)return y;try{return JSON.stringify(a)==JSON.stringify(b)}catch(c){return y}},copy:function(a){if(!a||
typeof a!="object"||a instanceof HTMLElement||a instanceof ig.Ca)return a;if(a instanceof Array)for(var b=[],c=0,d=a.length;c<d;c++)b[c]=ig.copy(a[c]);else{b={};for(c in a)b[c]=ig.copy(a[c])}return b},merge:function(a,b,c){for(var d in b){var f=b[d];if(!f||typeof f!="object"||f instanceof HTMLElement||f instanceof ig.Ca||c&&f instanceof Array)a[d]=f;else{if(!a[d]||typeof a[d]!="object")a[d]=f instanceof Array?[]:{};ig.merge(a[d],f)}}return a},yVb:function(a){if(!a||typeof a!="object")return[];var b=
[],c=[],d;for(d in a)b.push(d);b.sort();for(d=0;d<b.length;d++)c.push(a[b[d]]);return c},N:function(a){ig.YL&&e("Module '"+ig.YL.name+"' defines nothing");ig.YG[a]&&ig.YG[a].body&&e("Module '"+a+"' is already defined");ig.YL={name:a,O:[],loaded:y,body:q};ig.YG[a]=ig.YL;ig.yQ.push(ig.YL);ig.Rrb();return ig},O:function(){ig.YL.O=Array.prototype.slice.call(arguments);return ig},K:function(a){name=ig.YL.name;ig.YL.body=a;ig.YL=q;ig.ela()},Raa:function(a){ig.hn.push(a)},Kn:function(){return ig.WIa?ig.WIa:
""},Vf:function(a){ra.push(a)},TCb:function(){for(var a=[],b=0;b<ra.length;++b)a.push(ra[b]());return a},show:J(),OVb:J(),gsb:function(a,b){ig.YG[a]={name:a,O:[],loaded:y,body:q};ig.Iaa++;var c=ig.sEb+a.replace(/\./g,"/")+".js"+ig.Kn(),d=ig.Yr("script");d.type="text/javascript";d.src=c;d.onload=function(){ig.Iaa--;ig.ela()};d.onerror=function(){e("Failed to load module "+a+" at "+c+" required from "+b)};ig.R8("head")[0].appendChild(d)},ela:function(){for(var a=y,b=0;b<ig.yQ.length;b++){for(var c=
ig.yQ[b],d=h,f=0;f<c.O.length;f++){var i=c.O[f];if(ig.YG[i])ig.YG[i].loaded||(d=y);else{d=y;ig.gsb(i,c.name)}}if(d&&c.body){ig.yQ.splice(b,1);c.loaded=h;c.body();a=h;b--}}if(a)ig.ela();else if(!ig.J&&ig.Iaa==0&&ig.yQ.length!=0){a=[];for(b=0;b<ig.yQ.length;b++){d=[];i=ig.yQ[b].O;for(f=0;f<i.length;f++){c=ig.YG[i[f]];(!c||!c.loaded)&&d.push(i[f])}a.push(ig.yQ[b].name+" (requires: "+d.join(", ")+")")}e("Unresolved (circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules:\n"+
a.join("\n"))}},Vka:function(){if(!ig.YG["dom.ready"].loaded){if(!document.body)return setTimeout(ig.Vka,13);ig.YG["dom.ready"].loaded=h;ig.Iaa--;ig.ela()}return 0},yqb:function(){ig.WIa=window.IG_GAME_CACHE;ig.Yu.pKa=window.devicePixelRatio||1;ig.Yu.viewport={width:window.innerWidth,height:window.innerHeight};ig.Yu.screen={width:window.screen.availWidth*ig.Yu.pKa,height:window.screen.availHeight*ig.Yu.pKa};ig.Yu.T3a=/iPhone/i.test(navigator.userAgent);ig.Yu.IUb=ig.Yu.T3a&&ig.Yu.pKa==2;ig.Yu.HCb=
/iPad/i.test(navigator.userAgent);ig.Yu.zub=/android/i.test(navigator.userAgent);ig.Yu.GCb=ig.Yu.T3a||ig.Yu.HCb;ig.Yu.WVb=ig.Yu.GCb||ig.Yu.zub},Rrb:function(){if(!ig.YG["dom.ready"]){ig.yqb();ig.YG["dom.ready"]={O:[],loaded:y,body:q};ig.Iaa++;if(document.readyState==="complete")ig.Vka();else{document.addEventListener("DOMContentLoaded",ig.Vka,y);window.addEventListener("load",ig.Vka,y)}}}};window.ig=window.Ov;ig.wa={};var sa=y,ta=/xyz/.test(aa())?/\bparent\b/:/.*/,ua=0;window.Ov.Ca=J();
function wa(a){var b=this.prototype,c={},d;for(d in a)if(typeof a[d]=="function"&&typeof b[d]=="function"&&ta.test(a[d])){c[d]=b[d];b[d]=function(a,b){return function(){var d=this.parent;this.parent=c[a];var k=b.apply(this,arguments);this.parent=d;return k}}(d,a[d])}else b[d]=a[d]}
window.Ov.Ca.extend=function(a){function b(){if(!sa){if(this.Yha){var a=this.Yha.apply(this,arguments);if(a)return a}for(var b in this)typeof this[b]=="object"?this[b]=ig.copy(this[b]):typeof this[b]!="function"&&(this[b]=this[b]);this.f&&this.f.apply(this,arguments)}return this}var c=this.prototype;sa=h;var d=new this;sa=y;for(var f in a)d[f]=typeof a[f]=="function"&&typeof c[f]=="function"&&ta.test(a[f])?function(a,b){return function(){var d=this.parent;this.parent=c[a];var f=b.apply(this,arguments);
this.parent=d;return f}}(f,a[f]):a[f];b.prototype=d;b.prototype.constructor=b;b.extend=window.Ov.Ca.extend;b.s4a=wa;b.yba=d.yba=++ua;return b};window.Ov.M5=[];window.Ov.log=J();window.Ov.fSb=N("Getting key from Server...: Thehe!");window.Ov.debug=J();window.Ov.warn=J();window.Ov.info=J();window.Ov.YE={};window.Ov.Xf={update:h,sr:h,nb:h,xxb:h,Yp:h,QMb:h,PMb:h,dNa:h,Vab:y,fMb:y};window.Ov.profile={nx:0,Uq:0,tOb:0};window.console&&(window.console.error&&window.console.error.bind)&&(ig.error=window.console.error.bind(window.console));
ig.u=ig.Ca.extend({pVa:q,f:function(a){for(var b in a)this[b]=a[b];this.pVa=a},copy:function(){return new ig.u(this.pVa)}});ig.Mk={UNKNOWN:0,DESKTOP:1,BROWSER:2,MOBILE:3,WIIU:4};ig.isPlatform=function(a){return ig.platform==ig.Mk[a]};
ig.Rwb=[{Kt:navigator.userAgent,Lt:"Nintendo WiiU",yq:"WiiU"},{Kt:navigator.userAgent,Lt:"Chrome",yq:"Chrome"},{Kt:navigator.userAgent,Lt:"OmniWeb",N0:"OmniWeb/",yq:"OmniWeb"},{Kt:navigator.vendor,Lt:"Apple",yq:"Safari",N0:"Version"},{ep:window.opera,yq:"Opera",N0:"Version"},{Kt:navigator.vendor,Lt:"iCab",yq:"iCab"},{Kt:navigator.vendor,Lt:"KDE",yq:"Konqueror"},{Kt:navigator.userAgent,Lt:"Firefox",yq:"Firefox"},{Kt:navigator.vendor,Lt:"Camino",yq:"Camino"},{Kt:navigator.userAgent,Lt:"Netscape",yq:"Netscape"},
{Kt:navigator.userAgent,Lt:"MSIE",yq:"Explorer",N0:"MSIE"},{Kt:navigator.userAgent,Lt:"Trident",yq:"Explorer",N0:"rv"},{Kt:navigator.userAgent,Lt:"Gecko",yq:"Mozilla",N0:"rv"},{Kt:navigator.userAgent,Lt:"Mozilla",yq:"Netscape",N0:"Mozilla"}];
ig.SCa=[{Kt:navigator.platform,Lt:"Win",yq:"Windows"},{Kt:navigator.platform,Lt:"Mac",yq:"Mac"},{Kt:navigator.userAgent,Lt:"iPhone",yq:"iOS"},{Kt:navigator.userAgent&&navigator.userAgent.toLowerCase(),Lt:"android",yq:"Android"},{Kt:navigator.platform,Lt:"Linux",yq:"Linux"}];ig.browser="Netscape";ig.GBa="1.0-6458b";ig.hSa="WinME";ig.platform="C64";ig.oAa="";
ig.WAb=function(){switch(ig.platform){case ig.Mk.UNKNOWN:return"Unknown";case ig.Mk.DESKTOP:return"Desktop";case ig.Mk.BROWSER:return"Browser";case ig.Mk.MOBILE:return"Mobile";case ig.Mk.WIIU:return"WiiU"}return"Say Wat?"};ig.browser=ea(ig.Rwb)||"Unknown";ig.GBa=fa(navigator.userAgent)||fa(navigator.appVersion)||"Unknown";ig.hSa=ea(ig.SCa)||"Unknown";
ig.platform=window.require&&"object"==typeof window.process?ig.Mk.DESKTOP:window.nwf?ig.Mk.WIIU:"Android"==ig.SCa||"iOS"==ig.SCa?ig.Mk.MOBILE:"Unknown"!=ig.browser?ig.Mk.BROWSER:ig.Mk.UNKNOWN;ig.YN=q;ig.i7a=y;if(ig.platform==ig.Mk.DESKTOP){var xa=ig,ya=window.process.versions["node-webkit"].match(/(\d+)\.(\d+)\.(\d+)/);xa.YN=[ya[0],1E4*ya[1]+100*ya[2]+1*ya[3],1*ya[1],1*ya[2],1*ya[3]];ig.i7a="x64"==window.process.arch}ig.Nxb=0.5;ig.WSb="Cubic Impact ("+ig.Nxb+")";ig.J=h;
ig.N("impact.base.worker").K(function(){ig.aqb=ig.Ca.extend({N5a:0,aha:{},O0:q,key:q,f:function(a,b){this.key=b;if(window.Worker){this.O0=new window.Worker(ig.root+a);this.O0.onmessage=this.zsb.bind(this)}else{var c=ig.Yr("script");c.type="text/javascript";c.src=ig.root+a;ig.R8("head")[0].appendChild(c)}},U_a:function(a,b,c){if(this.O0){b._id=this.N5a;b._type=a;this.N5a++;this.aha[b._id]={hint:b.hint,callback:c};this.O0.postMessage(b)}else{a=WORKER[this.key][a](b);a.hint=b.hint;c(a)}},zsb:function(a){var b=
a.data._id;delete a.data._id;if(this.aha[b]){a.data.hint=this.aha[b].hint;this.aha[b].callback(a.data);delete this.aha[b]}}})});ig.J=h;
ig.N("impact.base.loader").K(function(){function a(d,c,j){if(!d||typeof d!="object")return d;if(d.jsonINSTANCE)return b(d,c,j);if(d instanceof Array)for(var k=d.length;k--;){var l=a(d[k],c,j);if(d[k]!=l&&l instanceof Array&&d[k].jsonList){l.splice(0,0,k,1);d.splice.apply(d,l)}else d[k]=l}else for(k in d)d[k]=a(d[k],c,j);return d}function b(a,b,d){var k=a.jsonINSTANCE,l=d[k]||b[k];l||e(Error("Could not find template '"+k+"'"));return c(l,a,b,d)}function c(d,i,j,k){if(!d||typeof d!="object")return d;
if(d.jsonINSTANCE){d=ig.copy(d);return b(d,j,k)}if(d.jsonPARAM){j=i[d.jsonPARAM];j==g&&(d["default"]!==g?j=d["default"]:e(Error("Could not find template parameters '"+d.jsonPARAM+"' ")));return a(j)}var l;if(d instanceof Array){l=[];for(var m=0;m<d.length;++m){var n=d[m];if(n.jsonIF){if(i[n.jsonIF]===g)continue;if(n.jsonTHEN)n=n.jsonTHEN;else{n=ig.copy(n);delete n.jsonIF}}n=c(n,i,j,k);n instanceof Array&&d[m].jsonList?l.push.apply(l,n):l.push(n)}}else{l={};for(m in d){n=d[m];if(n.jsonIF){if(i[n.jsonIF]===
g)continue;if(n.jsonTHEN)n=n.jsonTHEN;else{n=ig.copy(n);delete n.jsonIF}}l[m]=c(n,i,j,k)}}return l}ig.KBa={};var d=y;ig.w3=function(){d=h;for(var a in ig.KBa){var b=ig.KBa[a],c;for(c in b){var k=b[c];if(k&&k.Lga==0){k.CDa++;if(k.CDa>5){k.Wo&&k.Wo();b[c]=q}}}}d=y};ig.fEa={};ig.dpa=function(a){return ig.fEa[a]?ig.fEa[a]:a};ig.qP=ig.Ca.extend({Wi:q,kr:q,Lga:0,CDa:0,Yha:function(){if(!this.constructor.vM){this.constructor.vM={};var a=this.constructor.prototype.Wi;a||e(Error("ig.Cacheable without CacheType!"));
ig.KBa[a]=this.constructor.vM}if(a=this.kr=this.NJ.apply(this,arguments))if(a=this.constructor.vM[a]){a.G7a&&a.G7a();a.yGa();return a}return q},f:function(){this.kr&&(this.constructor.vM[this.kr]=this);this.yGa()},yGa:function(){this.Lga++;if(this.kr)this.CDa=0},Tc:function(){this.Lga--;this.Lga<0&&e(Error("Call to decreaseRef() results in negative count! Key: '"+this.kr+"'"));if(this.Lga==0&&(!this.kr||d)){this.Wo&&this.Wo();this.kr&&(this.constructor.vM[this.kr]=q)}},NJ:q,Wo:q});ig.LV=ig.qP.extend({loaded:y,
dEa:y,path:"",SNb:y,Tea:[],Uy:[],f:function(a){this.parent();if(typeof a=="string"){this.path=a;ig.lYa(this);ig.ready?this.load():ig.Raa(this)}else{this.path="[INLINE DATA]";this.loaded=h}},G7a:function(){this.loaded||ig.lYa(this)},NJ:function(a){return typeof a=="string"?a:q},load:function(a){if(this.loaded)a&&a(this.Wi,this.path,h);else{this.X5=a||q;this.wu(this.path)}},Xl:function(a){a?this.loaded=h:this.dEa=h;if(this.Tea.length>0)for(var b=this.Tea.length;b--;)this.Tea[b].Eq(this.loaded,this);
this.Tea.length=0;ig.vLb(this);if(this.X5){this.X5(this.Wi,this.path,a);this.X5=q}},Yt:function(a){this.loaded?a.Eq(h,this):this.Tea.push(a)}});ig.XE=ig.LV.extend({f:function(a){this.parent(a);if(typeof a=="object")this.onload(a)},wu:function(){$.ajax({dataType:"json",url:ig.dpa(this.oG()),context:this,success:this.yGb.bind(this),error:this.xGb.bind(this)})},yGb:function(a){(a=ig.yqa.Tga(a))||e(Error("Json file of path '"+this.path+"' is null. Maybe the original JSON had a syntax error and was compressed incorrectly?"));
ig.Gtb(this);this.onload(a);ig.UIb(this);this.Xl(h)},xGb:function(){this.onerror&&this.onerror();this.Xl(y)}});ig.UL=ig.Ca.extend({loaded:y,dEa:y,path:"NO_PATCH",Yha:function(){return this.constructor.cDb||q},f:function(){this.constructor.cDb=this;ig.ready?this.load():ig.Raa(this)},load:function(a){if(this.loaded)a&&a(this.Wi,this.path,h);else{this.X5=a||q;this.wu()}},Xl:function(a){a?this.loaded=h:this.dEa=h;this.X5&&this.X5(this.Wi,this.path,a)}});ig.F9=ig.Ca.extend({hn:[],status:0,Xb:y,Eqa:"",
HEa:y,Faa:[],nQ:0,oWa:0,Yza:q,Zza:0,uRb:q,f:function(a){this.l1a=a||q;this.hn=ig.hn;this.Yza=this.pF.bind(this)},load:function(){ig.ready=y;ig.Wv=h;this.Xb=y;this.status=0;if(this.hn.length){for(var a=0;a<this.hn.length;a++)this.Faa.push(this.hn[a].Wi+this.hn[a].path);this.Zza=this.hn.length;for(a=0;a<this.hn.length;a++)this.c6a(this.hn[a]);this.oWa=setInterval(this.nb.bind(this),16)}else this.end()},c6a:function(a){a.load(this.Yza)},end:function(){if(!this.Xb){this.Xb=h;this.Zy()}},Zy:function(){this.A4()},
A4:function(){ig.hn.length=0;clearInterval(this.oWa);if(this.l1a){if(!this.HEa){this.HEa=h;ig.i.VKb(this.l1a)}if(ig.hn.length>0){this.load();return}ig.ready=h;ig.i.LKb(ig.r)}else{ig.ready=h;ig.r.d6a()}this.Yza=q;ig.Wv=y},nb:function(){this.nQ=this.nQ+(this.status-this.nQ)/5;var a=ig.i.scale,b=ig.i.width*0.6,d=ig.i.height*0.1,c=ig.i.width*0.5-b/2,l=ig.i.height*0.5-d/2;ig.i.context.fillStyle="#000";ig.i.context.fillRect(0,0,ig.i.TC,ig.i.RC);ig.i.context.fillStyle="#fff";ig.i.context.fillRect(c*a,l*
a,b*a,d*a);ig.i.context.fillStyle="#000";ig.i.context.fillRect(c*a+a,l*a+a,b*a-a-a,d*a-a-a);ig.i.context.fillStyle="#fff";ig.i.context.fillRect(c*a,l*a,b*a*this.nQ,d*a)},pF:function(a,b,d){this.Faa.ye(a+b);a=this.Zza;this.Zza=this.hn.length;for(var c=a;c<this.hn.length;c++)this.Faa.push(this.hn[c].Wi+this.hn[c].path);for(c=a;c<this.hn.length;c++)this.c6a(this.hn[c]);!d&&!this.SNb&&ig.i.error(Error("Failed to load resource: "+b));this.Eqa=b;this.status=1-this.Faa.length/this.hn.length;this.Faa.length==
0&&this.end()}});ig.xjb=ig.Ca.extend({$5a:q,hn:[],f:function(a){this.$5a=a;ig.Uy.push(this)},Cyb:function(){ig.Uy.ye(this);this.hn.length==0&&this.Xb()},Raa:function(a){if(this.hn.indexOf(a)==-1){this.hn.push(a);a.Uy.push(this)}},uLb:function(a){this.hn.ye(a);this.hn.length==0&&this.Xb()},Xb:function(){this.$5a.Eq(h,this)}});ig.Uy=[];ig.lYa=function(a){for(var b=ig.Uy.length;b--;)ig.Uy[b].Raa(a)};ig.vLb=function(a){for(var b=a.Uy,d=b.length;d--;)b[d].uLb(a);a.Uy.length=0};ig.Gtb=function(a){for(var b=
a.Uy.length;b--;)ig.Uy.push(a.Uy[b])};ig.UIb=function(a){for(var b=a.Uy.length;b--;)ig.Uy.ye(a.Uy[b])};ig.Vib=ig.Ca.extend({Gcb:[],f:J(),Lg:function(a,b){this.Gcb[a]=b},Tga:function(b){var d=[];if(b&&b.jsonTEMPLATES){var c=b.jsonTEMPLATES,k;for(k in c)d[k]=c[k];delete b.jsonTEMPLATES}return a(b,this.Gcb,d)}});ig.yqa=new ig.Vib});ig.J=h;
ig.N("impact.base.image").O("impact.base.worker","impact.base.loader").K(function(){ig.ia=ig.LV.extend({Wi:"Image",data:q,jY:{},width:0,height:0,B0:{},eBa:[],f:function(a){this.parent(a)},wu:function(){this.data=new Image;this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.dpa(ig.root+this.path+ig.Kn())},Wo:function(){this.data=q},I2:function(a){this.eBa.push(a)},Ttb:function(a,b,c){!this.jY[a]&&!this.B0[a]&&(this.loaded?this.hVa(a,b,c):this.B0[a]={BHb:b,
fd:c})},wUb:function(a){return this.jY[a]!=g},hVa:function(a,b,c){var d=ig.Yr("canvas");d.width=this.data.width;d.height=this.data.height;this.data.getContext||this.resize(1);var f=d.getContext("2d").getImageData(0,0,this.data.width,this.data.height),i=this.data.getContext("2d").getImageData(0,0,this.data.width,this.data.height);c.src=i;c.dest=f;c.hint=a;this.jY[a]=d;ig.ia.O0.U_a(b,c,this.f8a.bind(this))},reload:function(){this.loaded=y;this.data=new Image;this.data.onload=this.onload.bind(this);
this.data.src=ig.root+this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;ig.i.scale!=1?this.resize(ig.i.scale):this.h8a()},h8a:function(a){a&&this.data.getContext("2d").putImageData(a.result,0,0);var a=y,b;for(b in this.B0){a=h;this.hVa(b,this.B0[b].BHb,this.B0[b].fd)}a||this.f8a()},f8a:function(a){if(a){var b=a.hint;this.jY[b].getContext("2d").putImageData(a.result,0,0);delete this.B0[b]}var a=h,c;for(c in this.B0){a=y;break}if(a){this.Xl(h);for(c=
this.eBa.length;c--;)this.eBa[c]()}},onerror:function(){this.Xl(y)},Ly:function(a,b,c,d,f,i,j){f=f||0;a.x=f+Math.floor(b*c)%(j?j*c:this.width-f);a.y=(i||0)+Math.floor(b*c/(j?j*c:this.width-f))*(d||c);return a},resize:function(a){var b=this.width*a,c=this.height*a,d=ig.Yr("canvas");d.width=this.width;d.height=this.height;d=ig.i.ys(d);d.drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height);var d=d.getImageData(0,0,this.width,this.height),f=ig.Yr("canvas");f.width=b;f.height=c;b=
f.getContext("2d").getImageData(0,0,b,c);this.data=f;ig.ia.O0.U_a("SCALE",{src:d,dest:b,scale:a},this.h8a.bind(this))},nb:function(a,b,c,d,f,i,j,k,l,m,n,o){f=f!==g?f:this.width;i=i!==g?i:this.height;m=m||0;l=l||q;if(this.loaded&&!(f>this.width||i>this.height)){var t=ig.i.scale,c=c?c*t:0,d=d?d*t:0,f=f*t,i=i*t;if(!(f<=0||i<=0)){var t=j?-1:1,p=k?-1:1,n=this.jY[n]?this.jY[n]:this.data;if(j||k){ig.i.context.save();ig.i.context.scale(t,p)}if(o){a=a*ig.i.scale;b=b*ig.i.scale}else{a=ig.i.qf(a);b=ig.i.qf(b)}a=
a*t-(j?f:0);b=b*p-(k?i:0);if(m<1){ig.i.context.drawImage(n,c,d,f,i,a,b,f,i);ig.ia.aG++}if(l){ig.i.context.globalAlpha=ig.i.context.globalAlpha*m;l.nb(a,b,i);ig.i.context.globalAlpha=ig.i.context.globalAlpha/m}(j||k)&&ig.i.context.restore()}}},PSb:function(a,b,c,d,f,i,j,k,l,m,n){a>ig.i.width||(b>ig.i.height||a+f<0||b+i<0)||this.nb(a,b,c,d,f,i,j,k,l,m,n)},SSb:function(a,b,c,d,f,i,j,k,l,m,n,o){if(!(a>ig.i.width||b>ig.i.height||a+d<0||b+f<0)){f=f?f:d;this.nb(a,b,Math.floor(c*d)%this.width,Math.floor(c*
d/this.width)*f,d,f,i,j,k,l,m,n,o)}},XX:function(a,b,c,d,f,i,j,k,l,m,n){var f=f?f:d,o=Math.floor(c*d/this.width)*f;if(o>this.height&&window.Ed){a=ig.i.qf(a);b=ig.i.qf(b);ig.i.context.fillStyle="magenta";ig.i.context.fillRect(a,b,d*ig.i.scale,d*ig.i.scale)}this.nb(a,b,Math.floor(c*d)%this.width,o,d,f,i,j,k,l,m,n)},createPattern:function(a,b,c,d,f){return new ig.nf(this,a,b,c,d,f)},mUb:function(a,b,c,d){c=c?c:b;return new ig.Zq(this,Math.floor(a*b)%this.width,Math.floor(a*b/this.width)*c,b,c,d)},FAb:function(a,
b){return this.width/a*(this.height/(b||a))}});ig.Pwa=ig.Ca.extend({data:q,width:0,height:0,loaded:h,jY:{},f:function(a){this.data=a;this.width=a.width/ig.i.scale;this.height=a.height/ig.i.scale},nb:ig.ia.prototype.nb});ig.ia.aG=0;ig.ia.LIb=function(){if(ig.ia.vM)for(var a in ig.ia.vM)ig.ia.vM[a]&&ig.ia.vM[a].reload()};ig.nf=ig.Ca.extend({o5:q,p5:q,pattern:q,a8:q,cO:0,MH:0,NH:0,width:0,height:0,cdb:0,adb:0,UOb:y,f:function(a,b,c,d,f,i){a=a instanceof ig.ia?a:new ig.ia(a);this.MH=b;this.NH=c;this.width=
d;this.height=f;this.cO=i||0;this.a8=a;a.loaded?this.i4a():a.I2(this.i4a.bind(this))},i4a:function(){var a=ig.i.scale;this.MH=this.MH?this.MH*a:0;this.NH=this.NH?this.NH*a:0;this.width=(this.width?this.width:this.a8.width)*a;this.height=(this.height?this.height:this.a8.height)*a;var a=ig.nf.Eg,b=Math.ceil((this.cO==a.NONE||this.cO==a.OL?1:256)/this.width),c=Math.ceil((this.cO==a.NONE||this.cO==a.Yn?1:256)/this.height),d=b*this.width,f=c*this.height;if(this.UOb){var i=ig.Yr("canvas");i.width=this.width;
i.height=this.height;var j=ig.i.ys(i);j.drawImage(this.a8.data,this.MH,this.NH,this.width,this.height,0,0,this.width,this.height);this.pattern=ig.i.context.createPattern(i,"repeat")}else{i=ig.Yr("canvas");i.width=d;i.height=this.cO==a.h$?this.height:f;for(var j=ig.i.ys(i),k=0;k<(this.cO==a.h$?1:c);++k)for(var l=0;l<b;++l){j.drawImage(this.a8.data,this.MH,this.NH,this.width,this.height,l*this.width,k*this.height,this.width,this.height);ig.ia.aG++}this.o5=i;if(this.cO==a.h$){i=ig.Yr("canvas");i.width=
this.width;i.height=f;j=ig.i.ys(i);for(k=0;k<c;++k){j.drawImage(this.a8.data,this.MH,this.NH,this.width,this.height,0,k*this.height,this.width,this.height);ig.ia.aG++}this.p5=i}this.cdb=d;this.adb=f}},Ka:function(){if(this.o5){this.o5.width=this.o5.height=0;this.o5=q}if(this.p5){this.p5.width=this.p5.height=0;this.p5=q}},nb:function(a,b,c,d,f,i,j){j=j||ig.i.scale;c=c<0?c%this.width+this.width:c%this.width;d=d<0?d%this.height+this.height:d%this.height;c=ig.i.qf(c||0);d=ig.i.qf(d||0);f=f*j;i=i*j;a=
ig.i.qf(a);b=ig.i.qf(b);if(this.pattern){ig.i.context.fillStyle=this.pattern;var j=a%this.width,k=b%this.height;ig.i.context.translate(j-c,k-d);ig.i.context.fillRect(a-j+c,b-k+d,f,i);ig.i.context.translate(-j+c,-k+d);ig.ia.aG++}else{var j=this.o5,k=this.cdb,l=this.adb;if(this.cO==ig.nf.Eg.h$)if(f<=this.width){j=this.p5;k=this.width}else l=this.height;for(var a=a-c,b=b-d,i=i+d,f=f+c,m=0;m<i;m=m+l)for(var n=0;n<f;n=n+k){var o=n?0:c,t=m?0:d,p=Math.min(k,f-n)-o,r=Math.min(l,i-m)-t;if(p&&r){ig.i.context.drawImage(j,
o,t,p,r,a+n+o,b+m+t,p,r);ig.ia.aG++}}}}});ig.Knb=ig.Ca.extend({color:q,f:L("color"),nb:function(a,b,c,d){a=ig.i.qf(a);b=ig.i.qf(b);c=c*ig.i.scale;d=d*ig.i.scale;ig.i.context.fillStyle=this.color;ig.i.context.fillRect(a,b,c,d)}});ig.fQa=ig.Ca.extend({color:q,bCa:q,target:{x:0,y:0},Se:10,f:function(a,b,c,d,f){this.color=a;this.bCa=b;this.Se=f||10;this.target.x=c;this.target.y=d},nb:function(a,b,c,d){var a=ig.i.qf(a),b=ig.i.qf(b),c=c*ig.i.scale,d=d*ig.i.scale,f=ig.i.context;f.fillStyle=this.color;f.fillRect(a,
b,c,d);if(ig.r.Nza!=g&&!ig.r.Nza){f.fillStyle=this.bCa;f.beginPath();f.arc(a,b,this.Se,0,2*Math.PI);f.fill();f.strokeStyle=this.color;f.stroke()}f.strokeStyle=this.color;f.beginPath();f.moveTo(a+c/2,b+d/2);f.lineTo(this.target.x-ig.r.screen.x,this.target.y-ig.r.screen.y);f.stroke()}});ig.Jnb=ig.Ca.extend({color:q,borderColor:q,Se:20,f:function(a,b,c){this.color=a;this.borderColor=b||"black";this.Se=c||20},nb:function(a,b,c,d){var a=ig.i.qf(a),b=ig.i.qf(b),c=c*ig.i.scale,d=d*ig.i.scale,f=ig.i.context;
f.fillStyle=this.borderColor;f.fillRect(a-Math.floor(c/2),b-Math.floor(d/2),c,d);if(ig.r.Nza!=g&&!ig.r.Nza){f.fillStyle=this.color;f.beginPath();f.arc(a,b,this.Se,0,2*Math.PI);f.fill();f.strokeStyle=this.borderColor;f.stroke()}}});ig.Oka=ig.Ca.extend({TZa:q,UZa:q,sCa:0,f:function(a,b,c){this.TZa=a;this.UZa=b||b;this.sCa=c||0},VLa:L("sCa"),nb:function(a,b,c,d){a=ig.i.qf(a);b=ig.i.qf(b);c=c*ig.i.scale;d=d*ig.i.scale;ig.i.context.fillStyle=this.TZa;ig.i.context.fillRect(a,b,c,d);var f=ig.i.context.globalAlpha;
ig.i.context.globalAlpha=ig.i.context.globalAlpha*this.sCa;ig.i.context.fillStyle=this.UZa;ig.i.context.fillRect(a,b,c,d);ig.i.context.globalAlpha=f}});ig.pwa=ig.Ca.extend({vX:q,wX:q,f:function(a,b){this.vX=a;this.wX=b||a}});ig.nf.Eg={NONE:0,Yn:1,OL:2,h$:3,eF:4};ig.Xz=ig.qP.extend({Wi:"ImagePatternSheet",wd:q,N6:0,hKa:0,oi:0,bi:0,vh:0,Deb:0,m8a:ig.nf.Eg.NONE,Hu:[],f:function(a,b,c,d,f,i,j,k){this.parent();this.N6=c;this.hKa=d||c;this.oi=f||0;this.bi=i||0;this.vh=j||0;this.Deb=k||0;this.m8a=b||ig.nf.Eg.NONE;
this.wd=new ig.ia(a);this.wd.loaded?this.D7a():this.wd.I2(this.D7a.bind(this))},NJ:function(a,b,c,d,f,i,j,k){return a+"|"+c+"|"+(d||c)+"|"+(f||0)+"|"+(i||0)+"|"+(j||0)+"|"+(k||0)+"|"+b},Wo:function(){this.wd.Tc();for(var a=this.Hu.length;a--;)this.Hu[a]&&this.Hu[a].Ka();this.Hu.length=0},D7a:function(){for(var a=this.vh||Math.floor((this.wd.width-this.oi)/this.N6),b=this.Deb||Math.floor((this.wd.height-this.bi)/this.N6),c=0;c<b;++c)for(var d=0;d<a;++d)this.Hu[c*a+d]=this.wd.createPattern(this.oi+
d*this.N6,this.bi+c*this.hKa,this.N6,this.hKa,this.m8a)},Iy:function(a){return this.Hu[a]}});ig.Zq=ig.Ca.extend({wd:0,MH:0,NH:0,width:0,height:0,Sga:-1,G9a:-1,f:function(a,b,c,d,f,i){this.wd=a;this.MH=b*ig.i.scale;this.NH=c*ig.i.scale;this.width=d*ig.i.scale;this.height=f*ig.i.scale;this.color=i;ig.Zq.list.push(this)},yK:function(a,b){if(this.wd&&this.height&&this.width){var c=ig.i.ys(ig.Zq.buffer);c.globalCompositeOperation="source-over";c.globalAlpha=1;if(this.wd instanceof ig.nf){var d=ig.i.context;
ig.i.context=c;this.wd.nb(a,b,this.MH,this.NH,this.width,this.height,1);ig.i.context=d}else if(this.wd.data){c.drawImage(this.wd.data,this.MH,this.NH,this.width,this.height,a,b,this.width,this.height);ig.ia.aG++}c.globalCompositeOperation="source-atop";c.fillStyle=this.color;c.fillRect(a,b,this.width,this.height);this.Sga=a;this.G9a=b}},nb:function(a,b,c,d,f,i,j,k){if(this.Sga!=-1){this.Sga==-2&&e(Error("Error: Tried to draw ImageModFragment twice"));var l=ig.i.scale,f=f*l,i=i*l,m=j?-1:1,n=k?-1:1;
if(j||k){ig.i.context.save();ig.i.context.scale(m,n)}a=ig.i.qf(a)*m-(j?f:0);b=ig.i.qf(b)*n-(k?i:0);ig.i.context.drawImage(ig.Zq.buffer,this.Sga+c*l,this.G9a+d*l,f,i,a,b,f,i);ig.ia.aG++;(j||k)&&ig.i.context.restore()}}});ig.Zq.aja=1024;ig.Zq.Yva=1024;ig.Zq.buffer=ig.Yr("canvas");ig.Zq.buffer.width=ig.Zq.aja;ig.Zq.buffer.height=ig.Zq.Yva;ig.Zq.list=[];ig.Zq.fJa=[];ig.Zq.zKa=y;ig.Zq.yK=function(){if(!(this.zKa||this.list.length==0)){ig.i.ys(this.buffer).clearRect(0,0,this.aja,this.Yva);for(var a=0,b=
0,c=0,d=0;d<this.list.length;d++){var f=this.list[d];if(!(f.width>this.aja)){if(a+f.width>this.aja){a=0;b=c}if(!(b+f.height>this.Yva)){f.yK(a,b);c=Math.max(c,b+f.height);a=a+f.width}}}this.zKa=h}};ig.Zq.clear=function(){for(var a=0;a<this.fJa.length;++a)this.fJa[a].Sga=-2;this.fJa=this.list;this.list=[];this.zKa=y};ig.nib=ig.Ca.extend({Qg:[],hca:y,Wg:[],scale:1,f:J(),mD:function(a,b,c){if(ig.Xf.Vab!=this.hca){this.hca=ig.Xf.Vab;for(var d=this.Qg.length;d--;)this.hca?document.body.appendChild(this.Qg[d]):
document.body.removeChild(this.Qg[d])}a=a*ig.i.scale*this.scale;b=b*ig.i.scale*this.scale;return this.Crb(a,b,c)},yyb:function(){for(var a=0;a<this.Wg.length;++a)for(var b=this.Wg[a].xb,c=0;c<b.length;++c)b[c].pu&&!b[c].pu.filled&&b[c].pu.qrb()},axb:function(a){var b=0,c=0;if(a=a||window.Ri)for(var d=0;d<this.Qg.length;++d)this.Qg[d].getContext("2d").clearRect(0,0,ig.i.TC,ig.i.RC);for(d=0;d<this.Wg.length;){var f=this.Wg[d];if(b+f.height>this.Qg[c].height){b=0;c=c+1}f.bi=b;f.buffer=this.Qg[c];for(var i=
f.xb,j=0,k,l=0;l<i.length;)if(k=i[l].pu){i[l].oi=j;if(a||k.oi!=j||k.bi!=b||k.buffer!=f.buffer){k.oi=j;k.bi=b;k.buffer=f.buffer;k.WS=d;i[l].pu.filled=y}j=j+i[l].width;++l}else if(l!=i.length-1)i.splice(l,1);else{i[l].oi=j;j=j+i[l].width;++l}if(j<f.buffer.width)i[i.length-1].pu?i.push({oi:j,width:f.buffer.width-j,pu:q}):i[i.length-1].width=i[i.length-1].width+(f.buffer.width-j);if(f.xb.length==1&&!f.xb[0].pu)this.Wg.splice(d,1);else{b=b+f.height;++d}}for(;c+1<this.Qg.length;){a=this.Qg.pop();this.hca&&
document.body.removeChild(a)}},BK:function(a){for(var b=this.Wg[a.WS].xb,c=0;c<b.length;++c)if(b[c].pu==a){b[c].pu=q;if(c+1<b.length&&!b[c+1].pu){b[c].width=b[c].width+b[c+1].width;b.splice(c+1,1)}if(c>0&&!b[c-1].pu){b[c].width=b[c].width+b[c-1].width;b[c].oi=b[c-1].oi;b.splice(c-1,1)}return}for(var d;this.Wg.length>0&&(d=this.Wg[this.Wg-1])&&d.xb.length==1&&d.xb[0].pu;)this.Wg.pop()},Crb:function(a,b,c){for(var d,f,i,j=0;!i&&j<this.Wg.length;++j)if(this.Wg[j].height>=b&&b/this.Wg[j].height>0.5)for(var k=
this.Wg[j].xb,l=0;!i&&l<k.length;++l)if(!k[l].pu&&k[l].width>=a){i=this.zXa(k,l,a);f=this.Wg[j];d=j}if(!i){f=this.jza(b);d=this.Wg.length-1;i=this.zXa(f.xb,0,a)}i.pu=new ig.sRa(f.buffer,i.oi,f.bi,a,b,d,c);return i.pu},jza:function(a){var b=q,c=0;if(this.Wg.length>0){var d=this.Wg[this.Wg.length-1];if(d.buffer.height-d.bi-d.height<a)b=this.dVa();else{b=d.buffer;c=d.bi+d.height}}else b=this.Qg.length>0?this.Qg[0]:this.dVa();a={bi:c,height:a,buffer:b,xb:[{oi:0,width:b.width,pu:q}]};this.Wg.push(a);return a},
dVa:function(){var a=ig.Yr("canvas");a.width=ig.i.TC*this.scale;a.height=ig.i.RC*this.scale;this.Qg.push(a);this.hca&&document.body.appendChild(a);return a},zXa:function(a,b,c){var d=a[b];if(c==d.width)return d;var f={oi:d.oi+c,width:d.width-c,pu:q};d.width=c;a.splice(b+1,0,f);return d}});ig.Mp=new ig.nib;ig.sRa=ig.Ca.extend({buffer:q,oi:0,bi:0,width:0,height:0,L0a:q,filled:y,WS:0,f:function(a,b,c,d,f,i,j){this.buffer=a;this.oi=b;this.bi=c;this.width=d/ig.i.scale/ig.Mp.scale;this.height=f/ig.i.scale/
ig.Mp.scale;this.WS=i;this.L0a=j},gDb:function(){this.filled=y},BK:function(){ig.Mp.BK(this)},nb:function(a,b,c,d,f,i,j,k){var l=ig.i.scale,f=(f||this.width)*l,i=(i||this.height)*l,d=d*l,l=j?-1:1,m=k?-1:1;if(j||k){ig.i.context.save();ig.i.context.scale(l,m)}a=ig.i.qf(a)*l-(j?f:0);b=ig.i.qf(b)*m-(k?i:0);l=ig.Mp.scale;ig.i.context.drawImage(this.buffer,this.oi+c*l,this.bi+d*l,f*l,i*l,a,b,f,i);ig.ia.aG++;(j||k)&&ig.i.context.restore()},qrb:function(){this.filled=h;var a=ig.i.context,b=ig.i.scale*ig.Mp.scale,
c=ig.i.scale,d=ig.i.context=ig.i.ys(this.buffer);d.clearRect(this.oi,this.bi,this.width*b,this.height*b);d.save();d.translate(this.oi,this.bi);d.beginPath();d.scale(ig.Mp.scale,ig.Mp.scale);d.rect(0,0,this.width*c,this.height*c);d.clip();this.L0a();d.restore();ig.i.context=a}});ig.ia.O0=new ig.aqb("impact/webworker/image-tasks.js","IMAGE");ig.GI={Hpa:[],nY:[],fO:0,VZ:0,width:0,height:0,Ddb:function(){var a=ig.Co.DEFAULT_TILE_SIZE,b=ig.i.width/ig.i.zoom,c=ig.i.height/ig.i.zoom,b=Math.min(1024,b),c=
Math.min(1024,c);this.fO=Math.ceil(Math.max(b-ig.i.width,0)/2/a)+2;this.VZ=Math.ceil(Math.max(c-ig.i.height,0)/2/a)+2;this.width=(Math.ceil(ig.i.width/a)+this.fO*2)*a;this.height=(Math.ceil(ig.i.height/a)+this.VZ*2)*a},get:function(){if(this.nY.length)return this.nY.pop();this.width||this.Ddb();var a=ig.Yr("canvas");a.width=this.width*ig.i.scale;a.height=this.height*ig.i.scale;return a},Vtb:function(a){this.Hpa.push(a)},XIb:function(a){this.Hpa.ye(a)},YR:function(a){a&&this.nY.push(a)},qSb:function(){for(var a=
this.Hpa.length;a--;)this.Hpa[a].lJb();this.k9a(0);this.Ddb()},k9a:function(a){for(var b=this.nY.length;b-- >a;)this.nY[b].width=0;this.nY.length=Math.min(this.nY.length,a)}};ig.snb=ig.Ca.extend({width:0,height:0,buffer:q,scroll:{x:0,y:0},off:{x:0,y:0},shift:{x:0,y:0,DEa:y},Kga:y,KT:q,f:function(a){this.KT=a;this.Kga=h;this.J0a();ig.GI.Vtb(this)},Ka:function(){if(this.buffer){ig.GI.YR(this.buffer);ig.GI.XIb(this);this.KT=this.buffer=q}},lJb:function(){ig.GI.YR(this.buffer);this.buffer=q;this.Kga=
h},J0a:function(){this.buffer=ig.GI.get();this.width=ig.GI.width;this.height=ig.GI.height},update:function(a){if(a.ita()){this.buffer||this.J0a();var b=ig.Co.DEFAULT_TILE_SIZE;if(a==this.KT){var c=Math.round(a.scroll.x)-ig.GI.fO*b,d=Math.round(a.scroll.y)-ig.GI.VZ*b,f=c-this.scroll.x,i=d-this.scroll.y;this.shift.x=0;this.shift.y=0;this.shift.DEa=y;if(Math.abs(f)>b){this.shift.x=(f>0?Math.floor(f/b):Math.ceil(f/b))*b;this.scroll.x=this.scroll.x+this.shift.x;this.off.x=this.off.x+this.shift.x;this.off.x=
(this.off.x+this.width)%this.width}if(Math.abs(i)>b){this.shift.y=(i>0?Math.floor(i/b):Math.ceil(i/b))*b;this.scroll.y=this.scroll.y+this.shift.y;this.off.y=this.off.y+this.shift.y;this.off.y=(this.off.y+this.height)%this.height}if(this.Kga||Math.abs(this.shift.x)>=this.width||Math.abs(this.shift.y)>=this.height){this.scroll.x=Math.round(c/b)*b;this.scroll.y=Math.round(d/b)*b;this.off.x=0;this.off.y=0;this.shift.DEa=h;this.Kga=y;b=this.buffer;ig.i.ys(b).clearRect(0,0,b.width,b.height)}}this.shift.DEa?
this.Msb(a):this.Nsb(a)}},nb:function(a,b,c,d,f,i){if(c<this.scroll.x){a=a+(this.scroll.x-c);f=f-(this.scroll.x-c);c=this.scroll.x}if(d<this.scroll.y){b=b+(this.scroll.y-d);f=f-(this.scroll.y-d);d=this.scroll.y}c=c-this.scroll.x+this.off.x;d=d-this.scroll.y+this.off.y;if(f>this.width)f=this.width;if(i>this.height)i=this.height;c>=this.width&&(c=c-this.width);d>=this.height&&(d=d-this.height);var j=this.buffer,k,l;if(c+f>this.width){k=c+f-this.width;f=f-k}if(d+i>this.height){l=d+i-this.height;i=i-
l}f&&i&&ig.i.context.drawImage(j,c,d,f,i,a,b,f,i);k&&i&&ig.i.context.drawImage(j,0,d,k,i,a+f,b,k,i);f&&l&&ig.i.context.drawImage(j,c,0,f,l,a,b+i,f,l);k&&l&&ig.i.context.drawImage(j,0,0,k,l,a+f,b+i,k,l)},yO:function(a,b,c,d){var f=ig.Co.DEFAULT_TILE_SIZE,a=a*f-this.scroll.x,b=b*f-this.scroll.y;if(!(a<0||a>=this.width||b<0||b>=this.height)){var a=(a+this.off.x)%this.width,b=(b+this.off.y)%this.height,i=ig.i.context;ig.i.context=ig.i.ys(this.buffer);ig.i.context.clearRect(a,b,f,f);c&&d.Qt&&d.Qt.XX(a,
b,c-1,f);ig.i.context=i}},Msb:function(a){var b=this.scroll.x,c=this.scroll.y,d=this.width,f=this.height,i=ig.i.ys(this.buffer);a.b7(i,0,0,b,c,d,f)},Nsb:function(a){if(this.shift.y){var b=this.shift.y>0?this.off.y-this.shift.y:this.off.y,c=this.off.x,d=Math.abs(this.shift.y),f=this.width,i=this.scroll.y+(this.shift.y>0?this.height-this.shift.y:0),j=this.scroll.x;if(this.shift.x){f=f-Math.abs(this.shift.x);if(this.shift.x<0){c=c-this.shift.x;j=j-this.shift.x}}this.yXa(a,c,b,j,i,f,d)}if(this.shift.x){c=
this.shift.x>0?this.off.x-this.shift.x:this.off.x;b=this.off.y;f=Math.abs(this.shift.x);d=this.height;j=this.scroll.x+(this.shift.x>0?this.width-this.shift.x:0);i=this.scroll.y;this.yXa(a,c,b,j,i,f,d)}},yXa:function(a,b,c,d,f,i,j){b<0&&(b=b+this.width);c<0&&(c=c+this.height);var k=ig.i.ys(this.buffer),l,m;if(b+i>this.width){l=b+i-this.width;i=i-l}if(c+j>this.height){m=c+j-this.height;j=j-m}if(i&&j){a==this.KT&&k.clearRect(b,c,i,j);a.b7(k,b,c,d,f,i,j)}if(i&&m){a==this.KT&&k.clearRect(b,0,i,m);a.b7(k,
b,0,d,f+j,i,m)}if(l&&j){a==this.KT&&k.clearRect(0,c,l,j);a.b7(k,0,c,d+i,f,l,j)}if(l&&m){a==this.KT&&k.clearRect(0,0,l,m);a.b7(k,0,0,d+i,f+j,l,m)}}})});ig.J=h;
ig.N("impact.base.font").O("impact.base.image").K(function(){function a(a){for(var b=0;b<a.length;++b)a[b].sGb()}var b={},c=ig.Yr("canvas").getContext("2d");ig.ejb=591;ig.kW={Lg:function(a,d,c){b[a]&&e(Error("Text command for key '"+a+"' is already assigned"));b[a]={Fub:d,apply:c}}};ig.kW.Lg(".",y,function(a,b){b.push({index:a,E3:{EBa:0.2}})});ig.kW.Lg("!",y,function(a,b){b.push({index:a,E3:{EBa:0.4}})});ig.kW.Lg("\\",y,N("\\"));ig.kW.Lg("c",h,function(a,b,d){d.push({index:b,E3:{color:a}})});ig.kW.Lg("s",
h,function(a,b,c){d[a]===g&&e(Error("Unsupported \\s argument: '"+a+"'. Only support values from 0-7"));c.push({index:b,E3:{speed:d[a]}})});ig.kW.Lg("v",h,function(a){return ig.ma.get(a)});ig.kW.Lg("i",h,function(a,b,d,c){a=c.dqa.indexOf(a);if(a!=-1)return String.fromCharCode(ig.$q.Vz+a)});ig.$g=ig.ia.extend({bV:[],eea:[],eqa:[],xoa:32,ky:0,XMa:0,color:q,f:function(a,b,d,c,l){this.xoa=d==g?32:d;this.ky=b;this.XMa=c;this.color=l||"white";this.parent(a)},onload:function(a){this.esb(this.data);this.parent(a)},
iYb:function(a){for(var b=0,d=0;d<a.length;d++)b=b+(this.bV[a.charCodeAt(d)-this.xoa]+1||0);return b},nb:function(){e("LOL NOPE!")},L2a:function(a){return ig.mya.size[this.XMa]*ig.i.UNa+(a||0)+"px "+ig.$g.aL},tVa:function(a,b,d,c){if(!this.loaded||a<0||a>=this.eea.length)return 0;var l=ig.i.scale,m=(this.bV[a]+1)*l,n=this.ky*l;ig.i.context.drawImage(c!=g?c:this.data,this.eea[a]*l,this.eqa[a]*l,m,n,ig.i.qf(b),ig.i.qf(d),m,n);return this.bV[a]+1},frb:function(a,b,d,c){var l=ig.i.context,a=String.fromCharCode(a);
if(a=="\n"||a=="\r")return 0;l.font=this.L2a();l.fillStyle="black";l[ig.i.XY]=y;var m=ig.i.UNa,n=1/m,o=ig.mya.MYa[this.XMa];l.save();l.translate(ig.i.qf(b),ig.i.qf(d)+o);m!=1&&l.scale(n,n);l.fillText(a,0,m);l.fillText(a,m,0);l.fillStyle=c;l.fillText(a,0,0);l.restore();return this.K2a(a)},K2a:function(a){c.font=this.L2a();a=c.measureText(a);return Math.ceil(a.width/ig.i.UNa)},esb:function(a){if(!this.ky)this.ky=a.height-1;this.bV=[];this.eea=[];this.eqa=[];var b=ig.Yr("canvas");b.width=a.width;b.height=
a.height;b=b.getContext("2d");b.drawImage(a,0,0);for(var d=0,c=0;d+this.ky<a.height;){for(var l=0,m=b.getImageData(0,d+this.ky,a.width,1),n=0;n<a.width;n++){var o=n*4+3;if(m.data[o]!=0)l++;else if(m.data[o]==0&&l){this.bV.push(l);this.eea.push(n-l);this.eqa.push(d);c++;l=0}}if(l){this.bV.push(l);this.eea.push(a.width-l);this.eqa.push(d)}d=d+(this.ky+1)}}});ig.$g.zl={CL:0,Pxa:1,at:2};ig.$g.aL=y;ig.$q=ig.$g.extend({Kyb:[],m5:[],hK:{},dqa:[],SY:[],Sma:[],f:function(a,b,d,c){this.parent(a,b,g,d,c);this.Kyb=
[]},cU:function(b){this.m5.push(b);a(this.SY)},eXb:function(b,d){this.m5[d]=b;a(this.SY)},Xtb:function(a){this.SY.indexOf(a)==-1&&this.SY.push(a)},ZIb:function(a){this.SY.ye(a)},aZa:function(){a(this.SY)},Pu:function(b){for(var d in b){this.hK[d]=b[d];this.dqa.indexOf(d)==-1&&this.dqa.push(d)}a(this.SY)},CB:function(a,b,d){b&&!(a&&a<0)&&(this.Sma[a]={b4a:b,color:d})},FVa:function(a){return a=this.hK[this.dqa[a]]},mpa:function(a,b,d){for(var c=0,l=0;l+1<b.WS.length&&b.WS[l+1]<=d;)l++;for(b=b.WS[l];b<
d;b++)c=c+this.OEa(a.charCodeAt(b));return c},N2a:function(a,b){for(var d=0,c=0,b=b!=g?b:1,l=this.ky+b,m=[],n=[0],o=0;o<a.length;o++)if(a.charAt(o)=="\n"){d=Math.max(d,c);m.push(c);n.push(o+1);c=0;l=l+(this.ky+b)}else c=c+this.OEa(a.charCodeAt(o));b<0&&(l=l+-b);n.push(a.length);m.push(c);d=Math.max(d,c);return{x:d,y:l,Wg:m,WS:n}},aPb:function(a,b,d,c,l){for(var m=q,n=-1,o=c?8:1,t=[],p=b*0.75/(o-1),r=ig.Xn[ig.dh]||{};o--;){for(var u=a,w=[],z=[],v=[],x=0,A=0,F=0,B=-1,C=y,K=0,I=y,G=0;G<u.length;G++){var D=
u.charAt(G),E=u.charCodeAt(G),H=this.OEa(E),x=x+H;if(G>0&&r.U6a&&r.U6a.indexOf(D)!=-1)I=h;else if(G>0&&E>ig.ejb&&r.KIa&&(!r.LIa||r.LIa.indexOf(D)==-1)){B=G;K=x-H;C=h;I=y}else if(D.match(/\s/g)){B=G;K=x-H;I=C=y}else if(I){I=y;B=G;K=x-H;C=h}if((D=u.charAt(G)=="\n")||x>b&&B!=-1){G=D?G:B;w.push(u.substr(0,G));x=D?x:K;A=Math.max(A,x);D&&(C=y);z.push(x);F=F+G;if(C){v.push(F);F=F+1}u=u.substr(G+(C?0:1));G=-1;x=0;B=-1;I=C=y;K=0}}w.push(u);z.push(x);A=Math.max(A,x);if(c){F=u=0;G=c*(w.length*this.ky+(w.length-
1)*d);u=Math.abs(G-A)/G*50;G*0.5>A?u=u+(1E3+G/A*200):G*1.5<A&&(u=u+(1E3+A/G*200));for(G=w.length;G--;){C=z[G]/A;C<0.7&&(F=F+(G<w.length-1?200:100)*(1-C*C))}z=F+u;b=b-p;if(n==-1||n>z){n=z;m=w.join("\n");t=v}}else{m=w.join("\n");t=v}}a=l.length-1;for(G=t.length;G--;){b=t[G];for(d=G+1;a>=0&&l[a].index>=b;){l[a].index=l[a].index+d;a--}}return m},Z_a:function(a,b,d,c,l,m){var n=this.data,o=this.color,m=m!=g?m:1;typeof a!="string"&&(a=a.toString());var t=q;if(c==ig.$g.zl.Pxa||c==ig.$g.zl.at)t=this.N2a(a);
for(var p=0,r=c==ig.$g.zl.CL?b:b-(c==ig.$g.zl.at?Math.floor(t.Wg[p]/2):t.Wg[p]),u=0,w=0;w<a.length;w++){var z=a.charCodeAt(w);if(z==10){p++;r=c==ig.$g.zl.CL?b:b-(c==ig.$g.zl.at?Math.floor(t.Wg[p]/2):t.Wg[p]);d=d+(this.ky+m)}for(;u<l.length&&l[u].index==w;++u)if(l[u].E3.color!=g){var v=l[u].E3.color;if(v>=0)if(v==0||!this.Sma[v]){n=this.data;o=this.color}else{n=this.Sma[v].b4a.data;o=this.Sma[v].color}}if(z>=ig.$q.Vz&&z<ig.$q.jRa&&this.m5.length>0){z=this.FVa(z-ig.$q.Vz);r=r+this.m5[z[0]].tVa(z[1],
r,d)}else r=ig.$g.aL?r+this.frb(z,r,d,o):r+this.tVa(z-this.xoa,r,d,n)}ig.ia.aG=ig.ia.aG+a.length},OEa:function(a){if(a>=ig.$q.Vz&&a<ig.$q.jRa&&this.m5.length>0){a=this.FVa(a-ig.$q.Vz);return this.m5[a[0]].bV[a[1]]+1||0}return ig.$g.aL?this.K2a(String.fromCharCode(a)):this.bV[a-this.xoa]+1||0}});ig.$q.Vz=2E3;ig.$q.jRa=3E3;ig.Rd=ig.Ca.extend({font:q,maxWidth:0,mH:"",mR:[],speed:0,padding:0,align:ig.$g.zl.CL,size:{x:0,y:0,Wg:[]},ZC:0,nl:0,CX:0,Hn:0,n:0,dH:q,aE:y,pDa:q,f:function(a,b,d){this.font=a;this.speed=
d.speed||0;this.align=d.textAlign||ig.$g.zl.CL;this.maxWidth=d.maxWidth;this.QYa=d.bestRatio;if(ig.Xn[ig.dh]&&ig.Xn[ig.dh].Boa)this.QYa=0;this.SG=d.linePadding!=g?d.linePadding:1;this.ga(b);this.reset()},ga:function(a){this.iR();a=a||"";typeof a=="object"&&(a=a.toString());a=a.trim();this.mR.length=0;this.mH=ig.Hya.parse(a||"",this.mR,this.font);if(this.maxWidth)this.mH=this.font.aPb(this.mH,this.maxWidth,this.SG,this.QYa,this.mR);this.size=this.font.N2a(this.mH,this.SG);this.reset()},Ou:function(a){this.pDa=
a;if(this.aE){this.iR();this.Qsa()}},Qsa:function(){if(!this.aE){this.aE=h;this.buffer=ig.Mp.mD(this.size.x,this.size.y,function(){this.font.Z_a(this.mH,this.align==ig.$g.zl.CL?0:this.align==ig.$g.zl.at?Math.floor(this.size.x/2):this.size.x,0,this.align,this.mR,this.SG);this.pDa&&this.pDa(this.size.x,this.size.y)}.bind(this));this.font.Xtb(this)}},iR:function(){if(this.aE){this.buffer.BK();this.buffer=q;this.aE=y;this.font.ZIb(this)}},reset:function(){if(this.speed){this.ZC=this.nl=this.CX=this.n=
0;this.Hn=this.speed;this.PXa()}else{this.ZC=this.size.Wg.length;this.nl=this.mH.length;this.n=1}},vFa:function(){return[this.ZC,this.nl,this.CX,this.Hn]},HH:function(a){this.ZC=a[0];this.nl=a[1];this.CX=a[2];this.Hn=a[3]},DLb:function(a){this.Hn=this.speed=a},finish:function(){this.nl=this.mH.length;this.n=this.Hn+0.001;this.ZC=this.size.Wg.length;this.dH&&this.dH()},On:function(){return this.nl==this.mH.length&&this.n>this.Hn},PXa:function(){for(;this.CX<this.mR.length&&this.mR[this.CX].index==
this.nl;++this.CX){var a=this.mR[this.CX].E3;if(a.EBa)this.n=this.n-a.EBa;if(a.speed!==g)this.Hn=a.speed}},update:function(){if(!this.On()){for(this.n=this.n+ig.i.Sa;this.n>this.Hn&&this.nl<this.mH.length;){this.nl++;this.size.WS[this.ZC+1]==this.nl&&this.ZC++;this.PXa();this.n=this.n-this.Hn}this.dH&&this.On()&&this.dH()}},nb:function(a,b){a=a||0;b=b||0;if(this.size.x)if(this.aE){var d=this.ZC*(this.font.ky+this.SG);this.SG<0&&(d=d+-this.SG);this.ZC&&this.buffer.nb(a,b,0,0,this.size.x,d);if(this.ZC<
this.size.Wg.length){var c=this.font.mpa(this.mH,this.size,this.nl);this.align==ig.$g.zl.at?c=c+(this.size.x-this.size.Wg[this.ZC])/2:this.align==ig.$g.zl.Pxa&&(c=c+(this.size.x-this.size.Wg[this.ZC]));if(c){var l=Math.max(this.font.ky,this.font.ky+this.SG);this.buffer.nb(a,b+d,0,d,c,l)}}}else{a=this.align==ig.$g.zl.CL?a:this.align==ig.$g.zl.at?a+this.size.x/2:a+this.size.x;this.font.Z_a(this.mH.substr(0,this.nl),a,b,this.align,this.mR,this.SG)}},sGb:function(){this.buffer&&this.buffer.gDb()}});ig.Hya=
{ema:function(a){return this.parse(a,q,q,h)},parse:function(a,d,c,k){for(var l="",m=0,n=-1;(n=a.indexOf("\\",m))!=-1;){var l=l+a.substring(m,n),m=n+1,o=a.indexOf("[",n),t=a.indexOf("]",n),p=q,r=q;if(o!=-1){p=a.substring(n+1,o);r=b[p]}if(!r){p=a.charAt(n+1);r=b[p]}k&&r!=b.v&&(r=q);if(r)if(r.Ad){l=l+r.Ad;m=m+p[1]}else{if(r.Fub){if(o!=n+p.length+1||t==-1){l=l+a.charAt(n);ig.warn("Invalid Text command argument format for commant '"+p+"'");continue}n=a.substring(o+1,t);m=t+1;t=r.apply(n,l.length,d,c)}else{m=
m+p.length;t=r.apply(l.length,d,c)}t!==g&&t!==q&&(l=l+this.parse(""+t,d,c,k))}else l=l+a.charAt(n)}return l=l+a.substring(m)}};ig.Rd.se={Qmb:0.1,Pmb:0.05,n$:0.03,mj:0.02,Bwa:0.015,Dhb:0.01,FASTEST:0.0075,zg:0};var d=[ig.Rd.se.zg,ig.Rd.se.FASTEST,ig.Rd.se.Dhb,ig.Rd.se.Bwa,ig.Rd.se.mj,ig.Rd.se.n$,ig.Rd.se.Pmb,ig.Rd.se.Qmb]});ig.J=h;
ig.N("impact.base.system.web-audio").O("impact.base.loader").K(function(){ig.Uka=ig.Ca.extend({context:q,$ua:0,f:function(){this.context=this.Iqb()},Jzb:function(){return this.context.destination},uda:function(){return this.context.sampleRate},Twb:function(a,c,d){this.context.decodeAudioData(a,c,d)},lD:function(){return this.context.currentTime+this.$ua},L1a:function(){return this.context.currentTime},gna:function(){if(this.context.createGainNode)return this.context.createGainNode();if(this.context.createGain)return this.context.createGain()},
uwb:function(){return!this.context.createDynamicsCompressor?q:this.context.createDynamicsCompressor()},Ewb:function(){if(this.context.createPanner)return this.context.createPanner()},Uba:function(a,c,d){return new ig.sUa(this.context,a,c,d)},Iqb:function(){return new (window.AudioContext||window.webkitAudioContext)}});ig.Uka.isSupported=function(){return!!window.AudioContext||!!window.webkitAudioContext};ig.sUa=function(a,c,d,f){this.context=a;this.l3=this.context.createBufferSource();this.l3.buffer=
c;this.l3.playbackRate.value=f||1;this.Noa=this.context.createGain();d!==g&&this.Qu(d);this.l3.connect(this.Noa)};var a=ig.sUa.prototype;a.connect=function(a){this.Noa.connect(a)};a.disconnect=function(a){this.Noa.disconnect(a)};a.dLb=function(a){this.l3.loop=a};a.Qu=function(a){this.Noa.gain.value=a};a.play=function(a,c){var d=this.l3;if(!d.playbackState){c<0&&(c=0);d.start?d.start(a||0,c||0):d.noteOn(a||0,c||0)}};a.stop=function(a){var c=this.l3;c.playbackState&&(c.stop?c.stop(a):c.noteOff(a))}});
ig.J=h;
ig.N("impact.base.sound").O("impact.base.loader","impact.base.system.web-audio").K(function(){function a(a){a=ig.root+a.match(/^(.*)\.[^\.]+$/)[1]+"."+ig.ke.wEa.Ica+ig.Kn();return ig.dpa(a)}var b=0,c=2/60,d=S.create(),f=Y.create(),i={};ig.AV={set:function(a,b){var d=ig.root+a.match(/^(.*)\.[^\.]+$/)[1];i[d]=b},get:function(a){a=ig.root+a.match(/^(.*)\.[^\.]+$/)[1];return i[a]!==g?i[a]:1}};ig.JQb={};ig.nQb={};ig.fya=y;ig.EI={CIRULAR:1,HORIZONTAL:2,VERTICAL:3};ig.dob=ig.Ca.extend({uX:{},volume:1,wEa:q,
context:q,Qg:{},iL:{master:q,music:q,sound:q},ufa:{},LO:[],MO:[[]],zbb:{},Rga:[],tia:[],Qpa:y,f:function(){if(!ig.ka.enabled||!window.Audio)ig.ka.enabled=y;else{if(window.IG_SOUND_VOLUME!=g)this.volume=window.IG_SOUND_VOLUME;for(var a=new window.Audio,b=0;b<ig.ka.keb.length;b++){var d=ig.ka.keb[b];if(a.canPlayType(d.mfa)){this.wEa=d;break}}if(!this.wEa)ig.ka.enabled=y;if(ig.ka.enabled&&ig.Uka.isSupported()){this.Yqb();window.IG_WEB_AUDIO_BGM?ig.debug("WebAudio detected. Using full WebAudio Implementation."):
window.IG_WEB_AUDIO_BGM||ig.debug("WebAudio (No BGM) detected. Using sound-only WebAudio Implementation.")}else ig.debug("No WebAudio. Using default Audio Implementation");setInterval(this.Btb.bind(this),16)}},reset:function(){for(var a=this.LO.length;a--;)this.LO[a].stop();this.MO.length=1;this.MO[0].length=0},update:function(){this.context&&this.context.context.state=="suspended"&&this.context.context.resume();for(var a=this.Rga.length;a--;)this.etb(this.Rga[a])&&this.Rga.splice(a,1);for(var a=
this.LO.length,b=q;a--;)(b=this.LO[a])&&b.update()&&this.LO.splice(a,1)},D8a:function(a,b){a.group=b;b.$o.push(a);a.stack=this.MO.last();a.stack.push(a);ig.ke.LO.push(a);a.play()},Hua:function(a){this.MO.last().ye(a);if(a.group){a.group.$o.ye(a);a.group=q}if(a.stack){a.stack.ye(a);a.stack=q}},Fga:function(a){for(var b=this.MO.last(),d=b.length;d--;){var c=b[d];c.pause(a);c.group&&c.group.$o.ye(c);a&&this.LO.ye(c)}this.MO.push([])},pga:function(){if(this.MO.length!=1){for(var a=this.MO.pop(),b=this.MO.last(),
d=b.length;d--;){var c=b[d];c.play();c.group&&c.group.$o.push(c);this.LO.indexOf(c)==-1&&this.LO.push(c)}for(d=a.length;d--;){c=a[d];c.stack=b;b.push(c)}a.length=0}},Drb:function(a){var b=this.zbb[a];b||(this.zbb[a]=b={F9a:[],$o:[]});return b},etb:function(a){if(a.$o.length>0&&a.$o[a.$o.length-1].z2a()<c)return y;for(var b=a.F9a,f=b.length;f--;)if(b[f].YGa()){this.D8a(b[f],a);b.splice(f,1)}for(var i,f=b.length,j=-1;f--;){var k;k=b[f];if(k.g){S.assign(d,k.g.Gq);S.sub(d,ig.r.Nha);k=S.length(d)}else k=
0;if(j==-1||k<j){j=k;i=b[f]}}for(f=a.$o.length;f--;)a.$o[f].YGa()||a.$o[f].stop();i&&this.D8a(i,a);b.length=0;return h},E9a:function(a,b){var d=this.Drb(a);d.F9a.push(b);this.Rga.indexOf(d)==-1&&this.Rga.push(d)},uda:function(){return this.context&&this.context.uda()||0},Yqb:function(){this.Qpa=h;this.context=new ig.Uka;var a=this.context.gna(),b=this.context.gna(),d=this.context.gna(),c=a,f=this.context.uwb();if(f){f.threshold.value=-6;f.knee.value=0;f.ratio.value=20;f.attack.value=0;f.release.value=
0.2;c=this.context.gna();c.gain.value=0.8;c.connect(a);f.connect(c);c=f}b.connect(a);d.connect(c);a.connect(this.context.Jzb());this.iL.$b=d;this.iL.At=b;this.iL.b6=a},$Za:function(a){a&&a.connect(this.iL.$b)},K_a:function(a){a&&a.disconnect(this.iL.$b)},Yma:function(a){a&&a.connect(this.iL.At)},FR:function(a){a&&a.disconnect(this.iL.At)},CLb:function(a){a&&this.Qpa&&(this.iL.$b.gain.value=a)},jLb:function(a){a&&this.Qpa&&(this.iL.At.gain.value=a)},fLb:function(a){a&&this.Qpa&&(this.iL.b6.gain.value=
a)},VJa:function(){this.Fga(h)},UJa:function(){this.pga()},gYa:function(a,b){this.ufa[a]||(this.ufa[a]=[]);this.ufa[a].push(b)},MAb:function(a){return this.ufa[a]},fcb:function(a){var b=this.MAb(a);if(b){for(var d=b.length;d--;)b[d].stop();delete this.ufa[a]}},ozb:function(a){return this.Qg[a]},zEb:function(d,c){var f=a(d);ig.fya&&ig.log("%cREQUEST%c: "+f,"color:#FF0080","");if(this.Qg[d]){c&&c(d,h);return this.Qg[d]}var i=new XMLHttpRequest;i.open("GET",f,h);i.responseType="arraybuffer";i.onload=
function(){ig.fya&&ig.log("%cLOADED%c:  "+f,"color:#C60063","");ig.ke.context.Twb(i.response,function(a){ig.fya&&ig.log("%cDECODED%c: "+f,"color:#800080","");if(a){b++;ig.ke.Qg[d]=a;c&&c(d,h)}else ig.i.error(Error("Web Audio Load Error: Decoded but NULL "+d))},function(){ig.i.error(Error("Web Audio Load Error: Could not DECODE: "+d))})};i.onerror=function(){ig.i.error(Error("Web Audio Load Error: Could not LOAD: "+d))};i.send()},IIb:function(a){a&&this.tia.indexOf(a)==-1&&this.tia.push(a)},FOa:function(a){a&&
this.tia.ye(a)},Btb:function(){for(var a=this.tia.length;a--;)this.tia[a].Avb()},load:function(d,c,f){var i=a(d);if(this.uX[d]){this.cWa(d,i,c,y);f&&f(d,c,h)}else{var j,k=y;b++;if(ig.i.Z5a&&b>25){j=new Audio;k=h;f&&f(d,c,h)}else j=new window.Audio(i);if(f){var l=function(a){this.removeEventListener("canplaythrough",l,y);f(d,c,h,a)};j.addEventListener("canplaythrough",l,y);j.addEventListener("error",function(a){f(d,c,h,a)},y)}j.load();this.uX[d]=[j];this.cWa(d,i,c,k)}},cWa:function(a,b,d,c){for(var f=
this.uX[a];f.length<d;){var i=c?new Audio:new Audio(b);i.load();this.uX[a].push(i)}},get:function(a){for(var a=this.uX[a],b=0,d;d=a[b++];)if(d.paused||d.ended){if(d.ended)d.currentTime=0;return d}if(!isNaN(a[0].duration)){a[0].pause();a[0].currentTime=0;return a[0]}},dda:function(a,b){return this.uX[a][b]},Uyb:function(a){delete this.uX[a]},Vyb:function(a){delete this.Qg[a]}});ig.hxa=ig.LV.extend({Wi:"MultiAudio",pZa:0,f:function(a,b){this.pZa=b;this.parent(a,b)},get:function(){return ig.ke.get(this.path)},
dda:function(a){return ig.ke.dda(this.path,a)},Wo:function(){ig.ke.Uyb(this.path)},wu:function(){ig.ke.load(this.path,this.pZa,this.onload.bind(this))},onload:function(a,b,d){this.Xl(d)}});ig.Sya=ig.LV.extend({Wi:"WebAudioBuffer",f:function(a){this.parent(a)},get:function(){return ig.ke.ozb(this.path)},Wo:function(){ig.ke.Vyb(this.path)},wu:function(){ig.ke.zEb(this.path,this.onload.bind(this))},onload:function(a,b){this.Xl(b)}});ig.tkb=ig.Ca.extend({Cs:q,ol:q,Vq:[],paused:y,zn:1,nla:0,Le:q,wW:0,
v2:y,Kw:0,f:function(){if(window.IG_MUSIC_VOLUME!=g)this.zn=window.IG_MUSIC_VOLUME;if(Object.defineProperty)Object.defineProperty(this,"volume",{get:this.zpa.bind(this),set:this.Qu.bind(this)});else if(this.__defineGetter__){this.__defineGetter__("volume",this.zpa.bind(this));this.__defineSetter__("volume",this.Qu.bind(this))}},play:function(a,b,d,c,f){if(this.Vq.length==0)this.push(a,b,d,c,f);else{this.Vq.pop();this.UWa(a,f,c);a=this.dza();c=this.paused;this.paused=y;if(!a){this.wW=d||0;this.v2=
h;this.zaa(b,c)}}},push:function(a,b,d,c,f){this.UWa(a,f,c);a=this.dza();c=this.paused;this.paused=y;if(!a){this.wW=d||0;this.v2=h;this.zaa(b,c)}},pop:function(a,b){if(this.Vq.length!=0){this.Vq.pop();var d=this.dza(),c=this.paused;this.paused=y;if(!d){this.wW=b||0;this.v2=y;this.zaa(a,c)}}},dea:function(a,b,d,c){if(this.Cs&&this.Cs.lb){this.Cs.lb.pause();this.Cs.lb.VA=q}this.Cs={lb:a,woa:d};this.wW=d;this.v2=y;a.loop=y;a.Qu(this.zn*(c||1));a.reset();a.play();a.VA=this.rtb.bind(this);this.zaa(b)},
pause:function(a){this.paused=h;this.zaa(a)},sO:function(a){this.v2=this.paused=y;this.wW=a;this.saa()},hUb:function(){return this.Vq.length},p5a:function(a,b){var d=this.Kza();return!this.paused&&d&&d.lb==a&&(b===g||d.volume==b)},zpa:M("zn"),Qu:function(a){this.zn=a.Rb(0,1);this.Kw==0&&this.ol&&this.ol.lb&&this.ol.lb.Qu(this.zn*this.ol.volume);this.Cs&&this.Cs.lb&&this.Cs.lb.Qu(this.zn*this.ol.volume)},dza:function(){var a=this.Kza();if(!this.paused&&a&&a.lb&&this.ol&&this.ol.lb==a.lb){if(this.Kw==
0){a.lb.Qu(this.zn*a.volume);this.dla()}else if(this.Kw==1)this.Le.set(0.5,h);else if(this.Kw==2){this.Le.set(0.5,h);this.Le.W9a();this.ol.lb.play();this.Kw=1}this.ol=a;return h}return y},Kza:function(){return this.Vq.length?this.Vq[this.Vq.length-1]:q},UWa:function(a,b,d){this.Vq.push({lb:a,uNb:b||y,OXb:0,volume:d||1})},zaa:function(a,b){if(b)this.Kw==2?this.Le.set(a,h):this.saa();else if(a&&this.ol&&this.ol.lb)if(this.Kw==2)this.Le.set(a,h);else if(this.Kw==1){this.Le.set(a,h);this.Le.W9a();this.Kw=
2}else{this.Kw=2;this.Le=new ig.jl(a);this.DXa()}else this.saa()},DXa:function(){if(!this.nla)this.nla=setInterval(this.Xrb.bind(this),16)},Xrb:function(){if(!ig.i.cPa){var a=!this.Le?1:this.Le.wj().map(-this.Le.target,0,0,1).Rb(0,1),b=this.ol;if(b&&b.lb){var d=this.Kw==1?a:a.map(1,0,0,1);b.lb.Qu(d*this.zn*b.volume)}a>=1&&(this.Kw==1?this.dla():this.Kw==2&&this.saa())}},saa:function(){this.ol&&this.ol.lb&&this.ol.lb.pause();if(this.Cs||this.paused)this.dla();else if((this.ol=this.Kza())&&this.ol.lb){this.Kw=
1;this.ol.lb.loop=!this.ol.uNb;this.wW?this.ol.lb.Qu(0):this.ol.lb.Qu(this.zn*this.ol.volume);this.v2&&this.ol.lb.reset();this.ol.lb.play();this.Le=new ig.jl(this.wW);this.DXa()}else this.dla()},dla:function(){clearInterval(this.nla);this.nla=q;this.Kw=0},rtb:function(){if(this.Cs){this.Cs=this.Cs.lb.VA=q;this.saa()}},VJa:function(){this.Cs&&this.Cs.lb&&this.Cs.lb.pause();this.ol&&this.ol.lb&&this.ol.lb.pause()},UJa:function(){this.Cs&&this.Cs.lb&&this.Cs.lb.play();!this.Cs&&(this.ol&&this.ol.lb&&
!this.paused)&&this.ol.lb.play()}});ig.dUa=ig.qP.extend({Wi:"TrackDefault",lK:q,oea:q,xd:0,Ug:0,VA:q,iba:1,$b:q,p0:q,FG:q,w5:y,loop:h,f:function(a,b,d,c,f){this.parent();this.lK=new ig.hxa(a,2);this.oea=d?new ig.hxa(d,1):q;this.xd=b;this.Ug=c||0;this.w5=this.Ug==0;if(f!=g)this.iba=f},NJ:function(a,b,d,c){return Array.prototype.join.call(arguments,"|")},Wo:function(){this.lK.Tc();this.oea&&this.oea.Tc()},Qu:function(a){this.daa();a=a*a*this.iba;this.$b.volume=a;this.p0.volume=a;this.FG&&(this.FG.volume=
a)},zpa:function(){this.daa();return this.$b.volume},reset:function(){this.daa();try{this.w5=this.Ug==0;this.$b.currentTime=0;this.p0.currentTime=0;this.p0.pause();this.$b.pause();this.FG&&(this.FG.currentTime=0)}catch(a){}},play:function(){this.daa();this.w5?this.$b.play():this.FG.play()},pause:function(){this.daa();this.w5?this.$b.pause():this.FG.pause()},daa:function(){if(!this.$b){this.$b=this.lK.dda(0);this.Oza(this.$b);this.p0=this.lK.dda(1);this.Oza(this.p0);if(this.oea){this.FG=this.oea.dda(0);
this.Oza(this.FG)}}},Oza:function(a){a.loop=y;a.addEventListener("timeupdate",this.ptb.bind(this),y);a.addEventListener("ended",this.irb.bind(this),y)},irb:function(a){a.target==this.$b?this.JWa():a.target==this.FG&&this.zVa()},ptb:function(a){a.target==this.$b&&this.$b.currentTime>=this.xd-0.2?this.JWa():a.target==this.FG&&this.FG.currentTime>=this.Ug-0.2&&this.zVa()},JWa:function(){if(this.loop){var a=this.$b;this.$b=this.p0;this.p0=a;this.$b.currentTime=0;this.$b.play()}else this.VA&&this.VA(this)},
zVa:function(){if(!this.w5){this.$b.currentTime=0;this.$b.play();this.w5=h}}});ig.npb=ig.qP.extend({Wi:"TrackWebAudio",uM:q,bZ:q,xd:0,Ug:0,VA:q,iba:1,loop:h,$o:y,V_:q,lqa:q,nr:q,Ks:q,tu:q,bh:q,zn:1,cr:0,vla:-1,s2:0,cAa:0,ola:0,f:function(a,b,d,c,f){this.parent();this.uM=new ig.Sya(a);this.bZ=d?new ig.Sya(d):q;this.xd=b;this.Ug=c||0;if(f!=g)this.iba=f},NJ:function(a,b,d,c){return Array.prototype.join.call(arguments,"|")},Wo:function(){this.uM.Tc();this.bZ&&this.bZ.Tc();this.lqa=this.V_=this.bZ=this.uM=
q},dWa:function(){if(!this.V_){this.bh=ig.ke.context;this.V_=this.uM.get();if(this.bZ){this.lqa=this.bZ.get();this.ola=this.lqa.duration}this.cAa=Math.max(0,this.V_.duration-this.xd)}},Avb:function(){if(this.uM){this.dWa();this.bh.lD()>this.cr+this.Ug+(this.s2+1)*this.xd&&this.VA&&this.VA(this);if(this.bh.lD()>this.cr+this.Ug+(this.s2+1)*this.xd+this.cAa){if(!this.loop){this.hza();ig.ke.FOa(this);return}var a=this.bh.Uba(this.V_,this.zn);this.nr.stop(0);ig.ke.FR(this.nr);delete this.nr;this.nr=this.Ks;
this.Ks=a;this.s2++;a=this.cr+this.Ug+(this.s2+1)*this.xd;ig.ke.Yma(this.Ks);this.Ks.play(a)}if(this.tu&&this.bh.lD()>this.cr+this.ola){this.tu.stop(0);ig.ke.FR(this.tu);delete this.tu}}},Qu:function(a){this.zn=a*a*this.iba;this.nr&&this.nr.Qu(this.zn);this.Ks&&this.Ks.Qu(this.zn);this.tu&&this.tu.Qu(this.zn)},zpa:M("zn"),reset:function(){this.hza();this.$o=y;this.cr=0;this.vla=-1;this.s2=0;ig.ke.FOa(this)},Lsb:function(){if(this.uM){this.dWa();this.nr&&ig.ke.FR(this.nr);this.tu&&ig.ke.FR(this.tu);
this.Ks&&ig.ke.FR(this.Ks);this.Ks=this.tu=this.nr=q;if(this.bZ)this.tu=this.bh.Uba(this.lqa,this.zn);this.nr=this.bh.Uba(this.V_,this.zn);if(this.loop)this.Ks=this.bh.Uba(this.V_,this.zn);ig.ke.Yma(this.tu);ig.ke.Yma(this.nr);ig.ke.Yma(this.Ks)}},hza:function(){if(this.tu){this.tu.stop(0);ig.ke.FR(this.tu);delete this.tu}if(this.nr){this.nr.stop(0);ig.ke.FR(this.nr);delete this.nr}if(this.Ks){this.Ks.stop(0);ig.ke.FR(this.Ks);delete this.Ks}},play:function(){if(this.uM&&!this.$o&&this.uM.loaded){this.$o=
h;this.Lsb();if(this.vla<0){this.cr=this.bh.lD();if(this.ola){this.tu.play(0);this.nr.play(this.cr+this.Ug);this.loop&&this.Ks.play(this.cr+this.xd+this.Ug)}else{this.nr.play(0);this.loop&&this.Ks.play(this.cr+this.xd)}}else{this.cr=this.cr+(this.bh.lD()-this.vla);var a=Math.max(this.bh.lD()-this.cr,0);if(a<this.ola){this.tu.play(0,a);a<this.Ug?this.nr.play(this.cr+this.Ug):this.nr.play(0,a-this.Ug);this.loop&&this.Ks.play(this.cr+this.xd+this.Ug)}else{for(a=a-this.Ug;a>this.xd+this.cAa;)a=a-this.xd;
this.nr.play(0,a);this.loop&&this.Ks.play(this.cr+this.xd*(this.s2+1)+this.Ug)}}ig.ke.IIb(this)}},pause:function(){if(this.uM&&this.$o){this.hza();this.vla=this.bh.lD();this.$o=y;ig.ke.FOa(this)}}});ig.JTa=ig.Ca.extend({group:q,lK:q,volume:1,JCa:q,ZVb:h,f:function(a,b,d,c){this.lK=new ig.hxa(a,ig.ka.rvb);this.volume=b||1;this.group=c||a},clone:function(){return new ig.JTa(this.lK.path,this.volume,0,this.group)},Ka:function(){this.lK.Tc()},play:function(a){if(!ig.ka.enabled)return q;this.JCa=this.lK.get();
if(!isNaN(this.JCa.duration)){var b=ig.ke.volume*this.volume*ig.AV.get(this.lK.path),a=new ig.w$(this.JCa,0,0,a,b);ig.ke.E9a(this.group,a);return a}return q},stop:function(){ig.warn("Called stop on Default Sound.")}});ig.LTa=ig.Ca.extend({group:q,Sia:q,volume:1,yl:0,f:function(a,b,d,c){this.Sia=new ig.Sya(a);this.volume=b||1;this.yl=d||0;this.group=c||a},clone:function(){return new ig.LTa(this.Sia.path,this.volume,this.yl,this.group)},Ka:function(){this.Sia.Tc()},play:function(a,b){var d=0,c=0,f=
1,i=0;if(b){d=b.offset||0;c=b.startTime||0;f=b.speed||1;i=b.fadeDuration}this.yl&&(f=f*(1+(Math.random()-0.5)*2*this.yl));if(!ig.ka.enabled)return q;var j=this.Sia.get();if(!isNaN(j.duration)){var k=ig.ke.volume*this.volume*ig.AV.get(this.Sia.path),d=new ig.w$(j,d,c,a,k,f,i);ig.ke.E9a(this.group,d);return d}return q},stop:function(){ig.warn("Called stop on WebAudio Sound.")}});ig.KTa=ig.Ca.extend({g:q,Qta:function(a,b,d){this.g={Gq:S.vc(a.x,a.y-(a.z||0)),Q:q,align:q,offset:q,ri:b||1600,l_:d||ig.EI.CIRCULAR}},
J$a:function(a,b,d,c,f){this.g={Gq:S.vc(0,0),Q:a,align:b,offset:d,ri:c||1600,l_:f||ig.EI.CIRCULAR};this.QXa(h)},QXa:function(a){if(this.g&&this.g.Q)if(a||!this.g.Q.Ve){a=this.g.Q.lc(this.g.align,f);this.offset&&Y.add(a,this.offset);this.g.Gq.x=a.x;this.g.Gq.y=a.y-a.z}else this.g.Q=q}});ig.bob=ig.KTa.extend({group:q,position:q,gt:0,nk:0,tla:0,cr:0,QI:q,f:function(a,b,d,c,f){this.tla=b||0;this.cr=d||0;this.nk=a.duration;a.volume=(f*f).Rb(0,1);a.loop=c||y;this.QI=a},update:function(){if(this.QI.loop)return y;
this.gt=this.gt+ig.i.Sa;if(this.gt>=this.nk){ig.ke.Hua(this);return h}return y},F:J(),play:function(){this.QI.play()},stop:function(){ig.ke.Hua(this);try{this.QI.volume=0;this.QI.loop=y;if(this.nk-this.QI.currentTime>0.8)this.QI.currentTime=this.nk}catch(a){}this.gt=this.nk},YGa:function(){return this.QI.loop},z2a:function(){return this.QI.currentTime},pause:function(){this.QI.pause()},Zl:function(){this.stop()},dw:function(){this.stop()}});var j=S.vc(0,0);ig.cob=ig.KTa.extend({group:q,M$:q,zn:0,
yAa:0,gt:0,nk:0,tla:0,cr:0,qA:q,ay:q,haa:y,lv:0,lla:0,xla:y,ym:0,vW:y,V$:0,j2:0,i2:-1,f:function(a,b,d,c,f,i,j){this.tla=b||0;this.cr=d||0;this.nk=a.duration/i;this.haa=c||y;this.M$=a;this.zn=f;this.yAa=i;this.V$=j||0.1;this.arb=this.nk>=1||this.haa},update:function(){this.arb&&this.nXa();if(!this.haa&&this.i2==-1&&ig.ke.context.lD()-this.j2>=this.nk){ig.ke.Hua(this);this.M$=q;this.qza();return h}if(this.ym){this.ym=this.ym-ig.i.gz;if(this.ym<=0){this.ym=0;if(!this.vW){this.qza();return h}}if(this.qA){var a=
this.ym/this.V$;this.vW&&(a=1-a);this.qA.Qu(this.zn*this.zn*a*a)}}return y},YGa:M("haa"),F:function(a,b){this.lv=a||0;this.lla=b||0},play:function(){if(!this.xla&&this.M$){var a=ig.ke.context;if(this.g&&!this.ay){this.ay=a.Ewb();this.ay.panningModel="equalpower";this.ay.distanceModel="linear";this.ay.refDistance=0.1*this.g.ri;this.ay.maxDistance=this.g.ri;this.nXa()}if(this.qA){this.ym=this.V$-this.ym;this.vW=h}else{var b=0;if(this.i2==-1){this.j2=a.lD();this.vW=y}else{b=(this.i2-this.j2)*this.yAa%
this.nk;this.j2=this.j2+(a.lD()-this.i2);this.i2=-1;this.vW=h;this.ym=this.V$}this.qA=a.Uba(this.M$,this.vW?0:this.zn*this.zn,this.yAa);this.qA.dLb(this.haa);if(this.ay){this.qA.connect(this.ay);ig.ke.$Za(this.ay)}else ig.ke.$Za(this.qA);this.qA.play(a.L1a()+this.cr,this.tla+b)}this.xla=h}},stop:function(){this.pause();this.M$=q;ig.ke.Hua(this)},qza:function(){if(this.qA){this.qA.stop(0);if(this.ay){this.qA.disconnect(this.ay);ig.ke.K_a(this.ay)}else ig.ke.K_a(this.qA);this.qA=q}},z2a:function(){return ig.ke.context.lD()-
this.j2},pause:function(a){if(this.xla){this.i2=ig.ke.context.lD();this.xla=y;if(a){this.qza();this.ym=0}else this.ym=this.V$;this.vW=y}},nXa:function(){if(this.g){this.QXa();if(this.ay){var a=this.g.ri*0.1,b=this.g.ri*0.9;j.x=this.g.Gq.x-ig.r.Nha.x;j.y=this.g.Gq.y-ig.r.Nha.y;if(ig.EI[this.g.l_]==ig.EI.HORIZONTAL)j.x=0;else if(ig.EI[this.g.l_]==ig.EI.VERTICAL)j.y=0;var d=S.length(j),d=d<a?0:KEY_SPLINES.EASE_SOUND.get(((d-a)/b).Rb(0,1))*this.g.ri;S.length(j,d);this.ay.setPosition(j.x,j.y,-0.1*this.g.ri)}}},
Zl:function(){this.stop()},dw:function(){this.stop()}});var k=S.create();ig.ah={gh:function(a,b,d,c,f,i){if(a){var j=b.b;S.Oa(k,j.g.x+j.size.x/2,j.g.y+j.size.y/2-(j.g.z+j.size.z/2));(a=a.play(d,c))&&a.J$a(b,ig.Pa.CENTER,q,f,i);return a}}};var l=localStorage.getItem("options.useWebAudio")!="false",l=ig.Uka.isSupported()&&!window.IG_FORCE_HTML5_AUDIO&&l;ig.YN&&ig.YN[1]>=3E3&&(l=h);if(l){ig.ka=ig.LTa;ig.w$=ig.cob;ig.zeb=h;ig.cUa=(ig.platform==ig.Mk.BROWSER||window.IG_GAME_DEBUG)&&!window.IG_WEB_AUDIO_BGM?
ig.dUa:ig.npb}else{ig.zeb=y;ig.ka=ig.JTa;ig.w$=ig.bob;ig.cUa=ig.dUa;ig.log("SET DEFAULT TRACK!")}ig.ka.UQa={Jjb:{Ica:"mp3",mfa:"audio/mpeg"},kQb:{Ica:"m4a",mfa:"audio/mp4; codecs=mp4a"},Qkb:{Ica:"ogg",mfa:"audio/ogg; codecs=vorbis"},dRb:{Ica:"webm",mfa:"audio/webm; codecs=vorbis"},uPb:{Ica:"caf",mfa:"audio/x-caf"}};ig.ka.keb=[ig.ka.UQa.Qkb,ig.ka.UQa.Jjb];ig.ka.rvb=4;ig.ka.enabled=h});ig.J=h;
ig.N("impact.base.timer").K(function(){ig.jl=ig.Ca.extend({target:0,Sb:0,last:0,bl:y,f:function(a){this.last=this.Sb=ig.jl.time;this.target=a||0},set:function(a,b){if(b&&this.target>0){var c=1+Math.min(0,this.wj()/this.target);this.Sb=ig.jl.time-a*c}else this.Sb=ig.jl.time;this.target=a||0},W9a:function(){var a=Math.min(1,-this.wj()/this.target);this.Sb=ig.jl.time-this.target*a},stop:function(){if(!this.bl){this.bl=h;this.last=ig.jl.time}},sO:function(){if(this.bl){this.bl=y;this.Sb=ig.jl.time-(this.last-
this.Sb);this.last=ig.jl.time}},reset:function(){this.Sb=ig.jl.time;this.bl=y},ja:function(){if(this.bl)return 0;var a=ig.jl.time-this.last;this.last=ig.jl.time;return a},di:function(){return Math.max(0,(this.target-((this.bl?this.last:ig.jl.time)-this.Sb))/this.target)},wj:function(){return(this.bl?this.last:ig.jl.time)-this.Sb-this.target}});ig.jl.xWa=0;ig.jl.time=0;ig.jl.B8=1;ig.jl.y6a=1/30;ig.jl.step=function(){var a=Date.now();ig.jl.time=ig.jl.time+Math.min((a-ig.jl.xWa)/1E3,ig.jl.y6a)*ig.jl.B8;
ig.jl.xWa=a};ig.Ol={br:0,REPEAT:1,Uva:2,bTa:3,Zxa:4};ig.Vt=ig.Ca.extend({duration:0,n:0,Sa:y,mode:ig.Ol.br,o7:0,eXa:y,f:function(a,b,c){this.Sa=a||y;this.set(b,c)},set:function(a,b){this.duration=a;this.mode=b||ig.Ol.br;this.o7=this.n=0;if(this.mode==ig.Ol.Zxa)this.eXa=Math.random()>=0.5},iS:function(){return this.duration-this.n},rab:function(a){this.n=this.duration-a;if(this.n<0)this.n=0},ja:function(){if(this.duration){this.n=this.n+(this.Sa?ig.i.Sa:ig.i.ja);if(this.n>=this.duration){this.n=this.mode?
this.n%this.duration:this.duration;this.mode?this.o7++:this.o7=1}}},Xb:function(){return!this.duration||!this.mode&&this.n>=this.duration},nUb:M("n"),get:function(){if(this.duration){var a=this.n/this.duration;this.mode==ig.Ol.Uva&&(a=(a<0.5?a:1-a)*2);this.mode==ig.Ol.bTa&&(a=Math.sin(Math.PI*2*a));this.mode==ig.Ol.Zxa&&(a=Math.sin(Math.PI*2*a)*(this.eXa?-1:1));return a}return 1},pUb:function(){return this.n/this.duration},DUb:function(){return this.mode&&this.o7},eUb:M("o7"),zFb:function(){return this.n/
this.duration>=0.5}})});ig.J=h;
ig.N("impact.base.vars").K(function(){var a={},b=/(\][^.\][])/,c=["map","maps","tmp","call","session"];ig.nUa={path:q,index:0,Tga:function(a){if(!a)return q;this.path=a.trim();this.index=0;return this.WWa(h)},WWa:function(a){var d=this.path.indexOf("[",this.index);if(d==-1&&!this.index)return this.path;if(this.path.match(b)){ig.warn("Invalid bracket use in condition '"+this.path+"'.\nAfter a closing bracket ']' has to be '.', ']' or '['");return q}for(var c=this.path.indexOf("]",this.index),f="";d!=
-1&&d<c;){f=f+this.path.substring(this.index,d);f.length>0&&(f=f+".");this.index=d+1;d=this.WWa(y);(d=d.match(i)?d:ig.ma.EVa(d))||(d="null");f=f+d;c=this.path.indexOf("]",this.index);d=this.path.indexOf("[",this.index)}if(d!=-1&&c==-1||c==-1!=a){ig.warn("Invalid bracket combination in var accessor '"+this.path+"'");return q}if(c!=-1){c>this.index&&(f=f+this.path.substring(this.index,c));this.index=c+1}else f=f+this.path.substring(this.index);return f}};ig.oUa=ig.Ca.extend({ona:q,Cva:[],MDa:[],zd:{map:{},
maps:{},tmp:{},call:{},session:{map:{},maps:{}}},f:J(),get:function(a){a=ig.nUa.Tga(a);return this.EVa(a)},EVa:function(a){if(!a)return q;var b=this.DBb(a);if(b)return b.bm(a,a.split("."));a=this.ZVa(a,y);return!a?q:a.Pn[a.key]==g?q:a.Pn[a.key]},oF:function(a){a=ig.nUa.Tga(a);if(!a)return q;var b=this.ZVa(a,h);if(b.Pn==this.zd&&c.indexOf(b.key)!=-1){ig.warn("Tried to access key that is not supported: "+a);return q}return b},set:function(a,b){var d=this.oF(a);if(!d)return q;if(d.Pn[d.key]!=b){d.Pn[d.key]=
b;ig.r.Yj()}},JB:function(a,b){this.get(a)==q&&this.set(a,b)},add:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=(d.Pn[d.key]||0)+b;ig.r.Yj()},sub:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=(d.Pn[d.key]||0)-b;ig.r.Yj()},FZ:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=(d.Pn[d.key]||0)*b;ig.r.Yj()},tca:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=Math.floor((d.Pn[d.key]||0)/b);ig.r.Yj()},XEb:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=
(d.Pn[d.key]||0)%b;ig.r.Yj()},yub:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=d.Pn[d.key]&&b;ig.r.Yj()},DHb:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=d.Pn[d.key]||b;ig.r.Yj()},ePb:function(a,b){var d=this.oF(a);if(!d)return q;var c=d.Pn[d.key];d.Pn[d.key]=(c||b)&&!(c&&b);ig.r.Yj()},append:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=(d.Pn[d.key]||"")+b;ig.r.Yj()},prepend:function(a,b){var d=this.oF(a);if(!d)return q;d.Pn[d.key]=b+(d.Pn[d.key]||"");ig.r.Yj()},
dua:function(a){this.zd.call=a},clear:function(){this.zd={map:{},maps:{},tmp:{},call:{},session:{map:{},maps:{}}}},DBb:function(a){var b=this.MDa.last();if(b&&a.indexOf("entity.")==0)return b;for(b=this.Cva.length;b--;)if(a.indexOf(this.Cva[b].domain)==0)return this.Cva[b].Dtb;return q},xEa:function(a,b,d){if(!a)return q;if(b.length<=d)return a;if(a.bm){for(var c="entity",f=["entity"];d<b.length;++d){c=c+("."+b[d]);f.push(b[d])}return a.bm(c,f)}return q},s_:function(a,b,d){for(;a&&d<b.length;){var c=
b[d],a=a[c]!==g?a[c]:q;d++}return a},Up:function(a,b,d){this.Cva.push({domain:a+".",Dtb:b,ss:d||q})},Ega:function(a){a.bm&&this.MDa.push(a)},Z6:function(a){if(a.bm){var b=this.MDa.pop();a!=b&&e(Error("Removed unmatching accessor! Something went wrong"))}},ZVa:function(b,d){for(var c=b.split("."),f=this.zd,i=0;i<c.length-1;i++){c[i]||e(Error("VarPath '"+b+"' contains empty token."));if(!f[c[i]]||typeof f[c[i]]!="object")if(d)f[c[i]]={};else return q;f=f[c[i]]}a.Pn=f;a.key=c[i];return a},L7a:function(a){this.ona=
a=a.np();this.zd.maps[a]||(this.zd.maps[a]={});this.zd.map=this.zd.maps[a];this.zd.session.maps[a]||(this.zd.session.maps[a]={});this.zd.tmp={};this.zd.session.map=this.zd.session.maps[a]},kpa:function(){var a=ig.copy(this.zd);delete a.map;delete a.session;return{levelName:this.ona,storage:a}},$vb:function(){this.zd.tmp={};ig.r.Yj()},KJb:function(a){this.ona=a.levelName;this.zd=ig.copy(a.storage);this.zd.map=this.zd.maps[this.ona];this.zd.session={map:{},maps:{}}}});var d=ig.oUa.prototype;d.get=d.get;
d.set=d.set;d.add=d.add;d.sub=d.sub;d.mul=d.FZ;d.div=d.tca;d.mod=d.XEb;d.and=d.yub;d.or=d.DHb;d.xor=d.ePb;d.append=d.append;var f=/^(!=|==|<=|>=|<|>|=|\+|-|%|\/|\*|AND|OR|&&|\|\|)/,i=/^-?\d+([.][\d]+)?/,j=/^(true|false|null)/,k=/^(\"(\\.|[^"])*\"|\'(\\.|[^'])*\')/,l=/^([\w/.-]|\[|\])+/,m={source:q,ma:q,index:0,o$a:0,Us:0,Jx:q,parse:function(a,b){this.source=a;this.ma=b;this.index=0;return this.gAa()},gAa:function(){var a=this.PWa();this.fza();if(this.Us==0||this.Us==2)return a;if(this.Us==8){this.AAa();
return a+" "+this.Jx+" "+this.gAa()}e(Error("Unexpected token '"+this.Jx+"' when parsing expression"))},PWa:function(){this.fza(h);this.AAa();if(this.Us==1){var a=this.gAa();this.fza();this.Us!=2&&e(Error("Didn't close an open paranthesis! Bad!!"));this.AAa();return"("+a+")"}if(this.Us==7)return"!"+this.PWa();if(this.Us==4||this.Us==6||this.Us==5)return this.Jx;if(this.Us==3){this.ma.push(this.Jx);return"ig.vars.get('"+this.Jx+"')"}e(Error("Unsupported Token: '"+this.Jx+"' during terminal expression parsing"))},
fza:function(a){for(var b=this.index,d=this.source;d[b]==" ";)b++;if(b>=d.length){this.Us=0;this.Jx=q}else if(d[b]=="("){this.Us=1;this.Jx="(";b++}else if(d[b]==")"){this.Us=2;this.Jx=")";b++}else if(d[b]=="!"&&d[b+1]!="="){this.Us=7;this.Jx="!";b++}else{var d=d.substr(b),c;if(!a&&(c=d.match(f))){c=c[0];b=b+c.length;this.Us=8;c=="AND"?c="&&":c=="OR"?c="||":c=="="&&(c="==");this.Jx=c}else if(c=d.match(i)){c=c[0];this.Us=4;this.Jx=c;b=b+c.length}else if(c=d.match(k)){c=c[0];this.Us=6;this.Jx=c;b=b+
c.length}else if(c=d.match(j)){c=c[0];this.Us=5;this.Jx=c;b=b+c.length}else if(c=d.match(l)){c=c[0];this.Us=3;this.Jx=c;b=b+c.length}else e(Error("Could not parse next token of '"+d+"'"))}this.o$a=b},AAa:function(){this.index=this.o$a}};ig.de=ig.Ca.extend({fb:q,code:"",Ssa:"",ma:[],f:function(a){this.lz(a)},lz:function(a){if(!a||a.trim().length==0)this.code=this.Ssa="true";else try{this.Ssa=a=a.replace(/(?:\r\n|\r|\n)/g,"");this.code=m.parse(a,this.ma)}catch(b){ig.log("CONDITION PARSING ERROR: "+
b);this.Ssa="ERROR: "+b;this.code="false";this.ma=[]}this.fb=new Function(" return "+this.code)},evaluate:function(){try{return!!this.fb.call()}catch(a){ig.log("Condition evaluation failed: "+this.fb);return y}},toString:M("Ssa")})});ig.J=h;
ig.N("impact.base.system").O("impact.base.timer","impact.base.image","impact.base.vars").K(function(){function a(){b=b+1;if(b%ig.i.Tyb==0){ig.jl.step();ig.i.gz=ig.i.Sa=Math.min(ig.jl.y6a,ig.i.QZa.ja())*ig.i.bdb;if(ig.i.Mda())ig.i.Sa=0;ig.i.ja=ig.i.Sa*ig.i.fm;var a=ig.ke.context.L1a();ig.ke.context.$ua=a==c?ig.ke.context.$ua+ig.i.gz:0;c=a;if(ig.i.Un){ig.i.ja=ig.i.ja*8;ig.i.Sa=ig.i.Sa*8}ig.i.delegate.ya();if(ig.i.yra){ig.i.Q$a(ig.i.yra);ig.i.yra=q}}ig.i.Joa>=60&&window.requestAnimationFrame&&window.requestAnimationFrame(ig.i.ya.bind(ig.i),
ig.i.canvas)}var b=0;ig.Rob=ig.Ca.extend({Joa:60,Tyb:1,width:320,height:240,TC:320,RC:240,qO:320,pO:240,Hta:320,KLa:240,qp:{x:0,y:0},zoom:1,scale:1,SC:1,UNa:2,ai:y,Doa:[],cPa:y,XY:q,bqa:y,ena:y,vna:q,Un:y,fm:1,bdb:1,gz:0,ja:0,Sa:0,Ir:0,C4a:0,yra:q,Ps:y,delegate:q,QZa:q,$Y:q,canvas:q,context:q,Y7:h,f:function(a,b,c,j,k,l){this.Joa=c;this.QZa=new ig.jl;this.canvas=ig.R8(a);this.context=this.canvas.getContext("2d");if(this.context.imageSmoothingEnabled)this.XY="imageSmoothingEnabled";else if(this.context.webkitImageSmoothingEnabled)this.XY=
"webkitImageSmoothingEnabled";else if(this.context.mozImageSmoothingEnabled)this.XY="mozImageSmoothingEnabled";this.bqa=!!this.XY;this.$Y=b?ig.R8(b):document;this.resize(j,k,l);this.Z5a=ig.browser=="Chrome"&&ig.GBa*1<=25;ig.ma&&ig.ma.Up("system",this,"SystemVarEditor")},bm:function(a,b){if(b[1]=="debug")return!!window.Ri;if(b[1]=="lang")return ig.dh},resize:function(a,b,c){c=c||1;this.width=a;this.height=b;if(this.bqa){this.scale=1;this.SC=c||1}else{this.scale=c;this.SC=1}this.TC=this.width*this.scale;
this.RC=this.height*this.scale;this.qO=this.width*c;this.pO=this.height*c;this.canvas.width=this.width*c;this.canvas.height=this.height*c;this.qp.x=window.Ed&&wm.bIa&&wm.bIa.settingsWidth?(a-wm.bIa.settingsWidth)/2:a/2;this.qp.y=b/2;this.Hta=this.canvas.style.width.replace("px","")*1||this.canvas.width;this.KLa=this.canvas.style.height.replace("px","")*1||this.canvas.height;this.bqa&&(this.context[this.XY]=y);this.SC!=1&&this.context.scale(this.SC,this.SC);this.KOa()},VKb:function(a){this.Ps?this.yra=
a:this.Q$a(a)},Q$a:function(a){ig.r=new a},LKb:function(a){if(typeof a.ya=="function"){this.delegate=a;this.kNb()}else ig.i.error(Error("System.setDelegate: No run() function in object"))},iw:L("zoom"),Jab:function(a,b){this.qp.x=Math.round(a.Rb(0,this.width));this.qp.y=Math.round(b.Rb(0,this.height))},vNb:function(){clearInterval(this.C4a);this.Ps=y},kNb:function(){this.vNb();window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.msRequestAnimationFrame;this.Joa>=60&&window.requestAnimationFrame?window.requestAnimationFrame(this.ya.bind(this),this.canvas):this.C4a=setInterval(this.ya.bind(this),1E3/this.Joa);this.Ps=h},FFa:function(a){if(this.zoom==1)a.x=a.y=0;else{a.x=(this.width-this.width/this.zoom)*(this.qp.x/this.width);a.y=(this.height-this.height/this.zoom)*(this.qp.y/this.height)}return a},Jy:function(a,b,c){a.x=(b-ig.r.screen.x-this.qp.x)*this.zoom+this.qp.x;a.y=(c-ig.r.screen.y-this.qp.y)*this.zoom+this.qp.y;
return a},npa:function(a,b,c){a.x=(b-this.qp.x)/this.zoom+this.qp.x+ig.r.screen.x;a.y=(c-this.qp.y)/this.zoom+this.qp.y+ig.r.screen.y;return a},VTb:function(a,b,c,j){a.x=(b-this.qp.x)/this.zoom+this.qp.x+j.x;a.y=(c-this.qp.y)/this.zoom+this.qp.y+j.y;return a},clear:function(a){this.context.fillStyle=a;this.context.fillRect(0,0,this.TC,this.RC)},pNb:function(){if(this.zoom!=1){this.context.save();this.context.translate(this.qp.x,this.qp.y);this.context.scale(this.zoom,this.zoom);this.context.translate(-this.qp.x,
-this.qp.y);this.Y7=y}},Lxb:function(){if(this.zoom!=1){this.context.restore();this.Y7=h}},OLb:function(a){this.fm=a;this.Ir=this.ja=this.Sa*this.fm},ya:function(){if(window.Ri)a();else try{a()}catch(b){ig.i.error(b)}},ys:function(a){a=a.getContext("2d");this.bqa&&(a[this.XY]=y);return a},error:function(a){this.ena=h;var b={};if(ig.r){b.map=ig.r.uZ||"NO MAP";b.version=ig.r.T2a()}else{b.map="GAME INIT";b.version="---"}b.platform=ig.WAb();b.OS=ig.hSa;b.browser=ig.browser;b.browserVersion=ig.GBa;b.nwjsVersion=
ig.YN&&ig.YN[0];b["64bit"]=ig.i7a;b.webAudio=ig.zeb;b.sampleRate=ig.ke.uda();var c={};ig.r&&ig.r.X1a(c);window.GAME_ERROR_CALLBACK&&window.GAME_ERROR_CALLBACK(a,b,c);e(a)},Mda:function(){return this.ai||this.cPa},qf:function(a){return this.Y7?Math.round(a*this.scale*this.SC)/this.SC:Math.round(a)*this.scale},CSb:function(a,b,c){var j=ig.Yr("canvas");j.width=a*ig.i.scale;j.height=b*ig.i.scale;a=this.context;this.context=this.ys(j);c();this.context=a;return j},Iab:function(a){this.cPa=a;if(ig.At)if(a){ig.At.VJa();
ig.ke.VJa()}else{ig.At.UJa();ig.ke.UJa()}},Zub:function(){for(var a=0;a<this.Doa.length;++a)this.Doa[a](this.ai)},I_:function(a){if(a!=this.vna){this.vna=a;this.KOa()}},KOa:function(){var a="cursorSize"+Math.round(this.Hta/this.width).Rb(1,5);this.vna&&(a=a+(" "+this.vna));this.$Y.className=a},setCanvasSize:function(a,b,c){this.canvas.style.width=a+"px";this.canvas.style.height=b+"px";this.canvas.className=c?"borderHidden":"";this.Hta=a;this.KLa=b;this.KOa()},setFocusLost:function(){this.ai=h},regainFocus:function(){this.ai=
y;this.Zub()},addFocusListener:function(a){this.Doa.push(a)},removeFocusListener:function(a){this.Doa.ye(a)},setMasterVolume:function(a){ig.ke.fLb(a)},setSoundVolume:function(a){ig.ke.volume=a;ig.ke.CLb(a)},setMusicVolume:function(a){ig.At.volume=a;ig.ke.jLb(a)}});var c=0});ig.J=h;
ig.N("impact.base.input").K(function(){ig.ub={exa:-1,Zja:-3,QRa:-4,PRa:-5,wPa:8,TTa:9,AQa:13,C1:19,pfb:20,EQa:27,lTa:32,elb:33,dlb:34,Dgb:35,Zhb:36,yRa:37,lUa:38,PSa:39,mQa:40,jib:45,kgb:46,uUa:48,vUa:49,wUa:50,xUa:51,yUa:52,zUa:53,hqb:54,AUa:55,BUa:56,iqb:57,kPa:65,vPa:66,MPa:67,gQa:68,E:69,uhb:70,YQa:71,dRa:72,iRa:73,Pib:74,Wib:75,Twa:76,Vja:77,XRa:78,Okb:79,clb:80,GSa:81,MSa:82,oka:83,STa:84,Opb:85,mUa:86,pUa:87,I$:88,e2:89,gqb:90,xkb:96,ykb:97,zkb:98,Akb:99,Bkb:100,Ckb:101,Dkb:102,Ekb:103,Fkb:104,
Gkb:105,Kjb:106,nPa:107,dnb:109,jgb:110,mgb:111,vhb:112,xhb:113,yhb:114,zhb:115,Ahb:116,Bhb:117,MQa:118,NQa:119,Chb:120,KQa:121,LQa:122,whb:123,VSa:16,bQa:17,oPa:18,EQUAL:187,yQb:187,wfb:188,Ijb:189,hlb:190,Kmb:186,WQb:186,$Qa:192,sQb:192,Omb:191,XPb:191,Xeb:219,NQb:219,Veb:220,Web:221,Nmb:222,lPb:222};ig.Yb={xm:1,Wc:2};ig.Swa=ig.Ca.extend({GF:{},Pg:{},vga:{},Eea:{},VHa:{},MX:[],qb:q,s5a:y,r5a:y,YDb:y,Ak:{x:0,y:0},er:{x:0,y:0,z:0},Id:h,O5a:{x:0,y:0},aqa:y,f:J(),WCb:function(){if(!this.s5a){this.s5a=
h;window.addEventListener("DOMMouseScroll",this.L6a.bind(this),y);window.addEventListener("mousewheel",this.L6a.bind(this),y);ig.i.$Y.addEventListener("contextmenu",this.mwb.bind(this),y);ig.i.$Y.addEventListener("mousedown",this.keydown.bind(this),y);window.addEventListener("mouseup",this.keyup.bind(this),y);document.addEventListener("mousemove",this.mousemove.bind(this),y);window.addEventListener("blur",this.blur.bind(this),y);window.addEventListener("focus",this.focus.bind(this),y);document.addEventListener("drop",
function(a){a.preventDefault();return y},y);document.addEventListener("dragover",function(a){a.preventDefault();return y},y);ig.i.$Y.addEventListener("touchstart",this.keydown.bind(this),y);ig.i.$Y.addEventListener("touchend",this.keyup.bind(this),y);ig.i.$Y.addEventListener("touchmove",this.mousemove.bind(this),y);ig.ma.set("mouse.active",h)}},VCb:function(){if(!this.r5a){this.r5a=h;window.addEventListener("keydown",this.keydown.bind(this),y);window.addEventListener("keyup",this.keyup.bind(this),
y)}},RUb:function(){this.YDb||window.addEventListener("devicemotion",this.cxb.bind(this),y)},L6a:function(a){if(!ig.i.ena&&!ig.i.ai){var b=this.GF[(a.wheelDelta?a.wheelDelta/60:-a.detail/2)>0?ig.ub.QRa:ig.ub.PRa];if(b){this.Pg[b]=h;this.vga[b]=h;this.Eea[b]=h;if(this.Q4a()){a.stopPropagation();a.preventDefault()}this.MX.push(b)}this.qb=ig.Yb.xm}},mousemove:function(a){ig.Swa.JAb(this.Ak,a);this.Ak.x=this.Ak.x*(ig.i.width/ig.i.Hta);this.Ak.y=this.Ak.y*(ig.i.height/ig.i.KLa);if(!this.Id&&!S.u4(this.O5a,
this.Ak)){this.Id=h;S.assign(this.O5a,this.Ak)}},mwb:function(a){if(this.GF[ig.ub.Zja]){a.stopPropagation();a.preventDefault()}},Q4a:function(){return window.parent!=window},R4a:function(){return this.Q4a()&&!document.hasFocus()},keydown:function(a){if(!ig.i.ena&&!this.R4a()&&!(this.aqa&&a.type!="mousedown"))if(ig.i.Mda())a.type=="mousedown"&&ig.i.regainFocus();else{if(a.type=="mousedown")this.Id=h;this.qb=ig.Yb.xm;if(a.target.type!="text"){var b=a.type=="keydown"?a.keyCode:a.button==2?ig.ub.Zja:
ig.ub.exa;(a.type=="touchstart"||a.type=="mousedown")&&this.mousemove(a);if(b=this.GF[b]){this.Pg[b]=h;if(!this.VHa[b]){this.vga[b]=h;this.VHa[b]=h}a.stopPropagation();a.preventDefault()}}}},keyup:function(a){if(!ig.i.ena&&!this.R4a()&&!(this.aqa&&a.type!="mouseup")&&a.target.type!="text"&&!(ig.i.Mda()&&a.type=="mouseup")){this.qb=ig.Yb.xm;var b=this.GF[a.type=="keyup"?a.keyCode:a.button==2?ig.ub.Zja:ig.ub.exa];if(b){this.Eea[b]=h;this.MX.push(b);a.stopPropagation();a.preventDefault()}}},blur:function(a){window.IG_KEEP_WINDOW_FOCUS||
ig.i.Iab(h);for(var b in this.Pg)if(this.Pg[b]==h){this.Eea[b]=h;this.MX.push(b);a.stopPropagation();a.preventDefault()}},focus:function(){window.IG_KEEP_WINDOW_FOCUS||ig.i.Iab(y)},cxb:function(a){this.er=a.IRb},bind:function(a,b){a<0?this.WCb():a>0&&this.VCb();this.GF[a]=b},cSb:function(a,b){var c=ig.R8(a),d=this;c.addEventListener("touchstart",function(a){d.VNb(a,b)},y);c.addEventListener("touchend",function(a){d.UNb(a,b)},y)},unbind:function(a){this.GF[a]=q},VXb:function(){this.GF=[]},state:function(a){return this.Pg[a]},
Yc:function(a){return ig.r.mu?this.vga[a]:y},F5a:function(a){return ig.r.mu?this.Eea[a]:y},Wvb:function(){for(var a=0;a<this.MX.length;a++){var b=this.MX[a];this.Pg[b]=y;this.VHa[b]=y}this.MX=[];this.vga={};this.Eea={}},VNb:function(a,b){this.Pg[b]=h;this.vga[b]=h;a.stopPropagation();a.preventDefault();return y},UNb:function(a,b){this.MX.push(b);a.stopPropagation();a.preventDefault();return y}});ig.Swa.JAb=function(a,b){for(var c=ig.i.canvas,d=0,f=0;c!=q;){d=d+c.offsetLeft;f=f+c.offsetTop;c=c.offsetParent}var c=
b.pageX,i=b.pageY;if(b.touches){c=b.touches[0].clientX;i=b.touches[0].clientY}a.x=c-d;a.y=i-f}});ig.J=h;
ig.N("impact.base.lang").O("impact.base.loader").K(function(){function a(b){if(!b)return b;if(b instanceof Array){for(var d=[],c=b.length;c--;)d[c]=a(b[c]);return d}if(typeof b=="object"&&!b.indexOf){d={};for(c in b)d[c]=a(b[c]);return d}d=b.indexOf("<<C<<");if(d!=-1)return b.substr(0,d);d=b.indexOf("<<A<<");return d!=-1?b.substr(0,d):b}ig.kjb=ig.UL.extend({Wi:"Lang",labels:{},lAa:0,f:function(){this.parent()},get:function(b){for(var b=b.split("."),d=this.labels,c=0;c<b.length;++c){d=d[b[c]];if(d===
g)return"UNKNOWN LABEL"}return d=a(d)},wu:function(){for(var a=0;a<ig.M5.length;++a){var b=ig.root+ig.M5[a].vm("data/lang/","."+ig.dh+".json");$.ajax({dataType:"json",url:b+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})}this.rza()},onerror:function(){this.lAa++;ig.i.error(Error("Loading of a language file failed."));this.rza()},onload:function(a){this.lAa++;this.rza();if(a.DOCTYPE!="STATIC-LANG-FILE")ig.i.error(Error("Language File has wrong format."));else{for(var b=
a.feature.split("."),d=this.labels,c=0;c<b.length;++c){var l=b[c];d[l]||(d[l]={});d=d[l]}for(var m in d){ig.warn("Language File adds labels to already existing name space: "+a.feature);break}for(c in a.labels)d[c]=a.labels[c]}},d3a:function(a,b,d){var b=b.toString(),d=d||b,k;c[ig.dh]&&(k=c[ig.dh](a,b,d));k||(k=a.replace(/\[!\]/,d));return k},rza:function(){this.lAa==ig.M5.length&&this.Xl(h)}});var b=[50,52,53,57],c={ko_KR:function(a,d,c){var d=d.charCodeAt(d.length-1),k=/\[!\]\[(.+)\/(.+)\]/.exec(a);
return k?a.substr(0,k.index)+c+((d-44032)%28==0||b.indexOf(d)!=-1?k[2]:k[1])+a.substr(k.index+(k[2].length+k[1].length+6)):q}};ig.Ra=ig.Ca.extend({value:q,data:q,K5a:q,n8a:q,f:function(a){this.data=a;this.K5a=a.langUid||1;this.value=ig.Ra.ic(this.data);this.n8a=d||q},oD:M("data"),toString:M("value")});var d=q;ig.Ra.fab=function(a){d=a};ig.Ra.aUb=function(){return d};ig.Ra.ic=function(b,d){if(b&&typeof b=="object"){var c=a(b[ig.dh]);if((d?c!=g:c)&&c!=ig.dh)return c;c=a(b.en_US);return(d?c!=g:c)&&c!=
"en_US"?c:"MISSING LABEL"}return a(b)||"MISSING LABEL"};ig.Ra.ema=function(b){if(typeof b=="string")return ig.Hya.ema(b);if(b instanceof ig.Ra){var b=b.data,d={},c;for(c in b)c!="langUid"&&(d[c]=ig.Hya.ema(a(b[c])));return new ig.Ra(d)}return b}});ig.J=h;
ig.N("impact.base.impact").O("dom.ready","impact.base.image","impact.base.font","impact.base.sound","impact.base.loader","impact.base.system","impact.base.input","impact.base.sound","impact.base.vars","impact.base.lang").K(function(){ig.JEb=q;ig.bfa=function(a,b,c,d,f,i,j,k){if(ig.TQa){ig.dh=ig.TQa;ig.log("%cFORCE LANG: "+ig.dh,"color:#CC0000")}else if(window.IG_LANG){ig.dh=window.IG_LANG;ig.log("%cWINDOW LANG: "+ig.dh,"color:#CC0000")}else{var l=localStorage.getItem("IG_LANG");if(l){ig.dh=l;ig.log("%cSTORED LANG: "+
ig.dh,"color:#CC0000")}else{var l="en_US",m;for(m in ig.Xn)ig.Xn[m].Kia&&navigator.language.QU(ig.Xn[m].Kia)&&(l=m);ig.dh=l;localStorage.setItem("IG_LANG",ig.dh);ig.log("%cAUTO LANG: "+ig.dh,"color:#CC0000")}}if(!ig.Xn[ig.dh]){ig.dh="en_US";localStorage.setItem("IG_LANG",ig.dh);ig.log("%cFALLBACK LANG: "+ig.dh,"color:#CC0000")}if((m=ig.Xn[ig.dh])&&m.aL){ig.$g.aL=m.aL;ig.Mp.scale=2;$("#game").css("font-family",m.aL+", sans-serif")}if(m&&m.OD)ig.mya=m.OD;ig.ma=ig.vars=new ig.oUa;ig.i=ig.system=new ig.Rob(a,
b,d,f,i,j||1);ig.lang=new ig.kjb;ig.input=new ig.Swa;ig.ke=new ig.dob;ig.At=new ig.tkb;ig.ready=h;a=new (k||ig.F9)(c);a.load();ig.JEb=a}});window.Vec2=window.Qpb;window.Vec3=window.Rpb;window.Line2=window.vjb;window.KeySpline=window.AI;window.KEY_SPLINES=window.Xib;window.assert=window.assert;window.assertContent=window.Iub;window.eha||(window.eha={},window.sc=window.eha);ig.J=h;
ig.N("impact.base.sprite-fx").O("impact.base.image").K(function(){ig.iob=ig.Ca.extend({delay:0,duration:0,f:function(a){this.delay=a.delay||0;this.duration=a.duration||0},$H:function(a,b,c){b<this.delay||this.apply(a,(b-this.delay)/(this.duration||c))},apply:J()});ig.nTa={};ig.nTa.SLIDE=ig.iob.extend({dir:q,start:0,end:0,Vg:q,f:function(a){this.parent(a);this.dir=ig.Jc.Lk[a.dir];if(this.dir==g)this.dir=ig.Jc.Lk.EAST;this.start=a.start||0;this.end=a.end||0;this.Vg=KEY_SPLINES[a.keySpline]||KEY_SPLINES.EASE_IN_OUT},
apply:function(a,b){var b=Math.min(b,1),b=this.Vg.get(b),c=(1-b)*this.start+b*this.end;if(this.dir==ig.Jc.Lk.EAST){c=Math.round(a.size.x*c);a.size.x=a.size.x-c;a.g.x=a.g.x+c}else if(this.dir==ig.Jc.Lk.WEST){c=Math.round(a.size.x*c);a.size.x=a.size.x-c;a.src.x=a.src.x+c}else if(this.dir==ig.Jc.Lk.SOUTH){c=Math.round((a.size.y+a.size.z)*c);if(a.size.y>=c){a.size.y=a.size.y-c;a.g.y=a.g.y+c}else{c=c-a.size.y;a.g.y=a.g.y-a.size.y;a.size.y=0;a.size.z=a.size.z-c}}else if(this.dir==ig.Jc.Lk.NORTH){c=Math.round((a.size.y+
a.size.z)*c);a.src.y=a.src.y+c;if(a.size.y>=c)a.size.y=a.size.y-c;else{c=c-a.size.y;a.size.y=0;a.size.z=a.size.z-c;a.g.z=a.g.z+c}}}})});ig.J=h;
ig.N("impact.base.animation").O("impact.base.loader","impact.base.timer","impact.base.image","impact.base.sprite-fx").K(function(){function a(a,b,d){d=d*(1-a.Em);a.Em=a.Em+d;a.color.nc(b,d/a.Em)}function b(a,b){if(b.namedSheets)for(var d in b.namedSheets){var c=b.namedSheets[d];if(!(c instanceof ig.Vh)){c=ig.Vh.AX(b.namedSheets[d]);a.jna.push(c)}a.EIa[d]=c}}function c(a,b,d,f){var f=f||{},i=b.sheet,f=ig.merge({},f,h);ig.merge(f,b,h);if(f.sheet&&typeof f.sheet=="object"&&!(f.sheet instanceof ig.Vh)){i=
ig.Vh.AX(f.sheet);a.jna.push(i);f.sheet=i}if(b.name)if(i=a.UVa(f.sheet)){i=d(a.UVa(f.sheet),f);a.YXa(b.name,i)}if(b.SUB){b=b.SUB;for(i=0;i<b.length;++i)c(a,b[i],d,f)}}function d(a,b){return new ig.DTa(new ig.Rva(a,b))}function f(a,b){var d=new ig.pkb(b);if(b.frames)d.oKb(a,b);else if(b.dirFrames)for(var c=0;c<b.dirFrames.length;c++){var f=ig.merge({},b,h);f.frames=b.dirFrames[c];f.flipX=b.flipX&&b.flipX[c]||y;d.Itb(new ig.Rva(a,f))}return d}ig.Vh=ig.Ca.extend({width:8,height:8,oi:0,bi:0,vh:0,wd:q,
f:function(a,b,d,c,f,i){this.width=b;this.height=d;this.oi=c||0;this.bi=f||0;this.vh=i||0;this.wd=new ig.ia(a)},pTb:function(){this.wd.Ttb("damage","MONOCHROME",{eTb:1,dTb:1.2,cTb:2,xSb:64})},Ly:function(a,b){return this.wd.Ly(a,b,this.width,this.height,this.oi,this.bi,this.vh)},Ka:function(){this.wd.Tc()}});ig.Vh.AX=function(a){return new ig.Vh(a.src,a.width,a.height,a.offX,a.offY,a.xCount)};ig.IE={NO_EXPAND:1,Y_EXPAND:2,Z_EXPAND:3,YZ_EXPAND:4,Y_FLAT:5,Z_FLAT:6};var i=Vec3.create();ig.Rva=ig.Ca.extend({sheet:q,
IMa:ig.IE.NO_EXPAND,Mo:0,stop:y,Lc:{x:y,y:y},Db:{x:0,y:0},Bma:y,Hh:0,zC:0,kE:[],t$a:q,Loa:q,Wca:q,yEa:q,zEa:q,Qb:0,offset:q,qm:q,size:q,qg:q,SJ:y,X2a:y,fx:q,f:function(a,b){!a instanceof ig.Vh&&e(Error("Tried to initiale Animation without ig.TileSheet object"));this.sheet=a;if(b.shapeType)this.IMa=ig.IE[b.shapeType];this.Db=b.pivot?{x:b.pivot.x,y:b.pivot.y}:{x:this.sheet.width/2,y:this.sheet.height/2};this.Lc.x=b.flipX||y;this.Lc.y=b.flipY||y;this.offset=b.offset||q;this.Qb=b.angle||0;this.size=b.size||
q;this.qm=b.gfxOffset||q;this.Bma=b.centerPivot||y;this.SJ=b.guiSprites||y;this.Hh=b.wallY||0;if(b.aboveZ)this.zC=b.aboveZ;this.qg=b.renderMode||q;this.X2a=b.globalTiming||y;this.pyb=b.faceRotate||y;this.Mo=b.time||0.1;this.kE=ig.copy(b.frames);if(b.tileOffset)for(var d=0;d<this.kE.length;d++)this.kE[d]=this.kE[d]==-1?-1:this.kE[d]+b.tileOffset;if(b.fx){var c=b.fx;this.fx=[];for(d=0;d<c.length;++d){var f=c[d];this.fx.push(new ig.nTa[f.type](f))}}this.t$a=b.framesSpriteOffset||q;this.Loa=b.framesGfxOffset||
q;this.Wca=b.framesAlpha||q;this.yEa=b.framesAngle||q;this.zEa=b.framesFlipX||q;this.stop=!b.repeat},Gi:function(){return this.Mo*this.kE.length},fpa:function(){return this.kE.length},oJa:q,am:q,$H:function(a,b,d,c){var f=this.X2a?ig.r.Z2:d.n,j=this.kE.length;if(j){var k=Math.floor(f/this.Mo),j=this.stop?Math.min(k,j-1):k%j,k=this.sheet,m=this.sheet.wd,n;this.size?b.F(this.size.x,this.size.y,this.size.z,this.size.y*(this.Hh||0)):b.yab(a,k.width,k.height,this.IMa,this.Hh);Vec3.Oa(i,0,0,0);this.offset&&
Vec3.add(i,this.offset);var o;if(o=this.t$a){n=j*3;Vec3.JQ(i,(d.Pd?-1:1)*o[n],o[n+1],o[n+2])}b.Wta(a,i,this.IMa,this.Hh);o=this.kE[j];if(o==-1)b.FH();else{for(n=d.aX.length;n--;){var B=d.aX[n];B.RK==c&&(o=o+B.ow)}n=k.Ly(l,o);b.V$a(a,k.width,k.height,m,n.x,n.y);c==0?b.zMa(a):b.Yta(0,0,0,0);k=c=0;if(this.qm){c=(d.Pd?-1:1)*this.qm.x;k=this.qm.y}if(this.Loa){n=j*2;c=c+(d.Pd?-1:1)*(this.Loa[n]||0);k=k+(this.Loa[n+1]||0)}m=d.alpha;this.Wca&&(m=m*this.Wca[j]);n=d.Qb+this.Qb*Math.PI*2/360;this.pyb&&a.face&&
(n=n+Vec2.Wm(a.face));this.yEa&&(n=n+(d.Pd?-1:1)*this.yEa[j]*Math.PI*2/360);o=d.Pd?!this.Lc.x:this.Lc.x;this.zEa&&this.zEa[j]&&(o=!o);b.ge(m);b.setTransform(d.Xa,d.Va,n);b.zC=this.zC;b.dMa(c,k);b.AU(o,this.Lc.y);b.Eb(this.Db.x,this.Db.y);this.Bma&&b.Bma(a);b.qg=this.qg;if(this.fx){a=this.Mo*this.kE.length;for(n=0;n<this.fx.length;++n)this.fx[n].$H(b,f,a)}}}else b.FH()}});ig.qkb=ig.Ca.extend({name:q,group:q,P6:q,Jj:0,$m:0,padding:Vec2.create(),size:{x:0,y:0,z:0},g:{x:0,y:0,z:0},mb:q,scb:y,f:function(a,
b,d){this.name=a;this.group=d.group;this.P6=d.persistAnim;this.Jj=ig.ca[d.collType||"BLOCK"];this.$m=ig.rp[d.heightShape||"NONE"];Vec3.assign(this.size,d.size);d.padding&&Vec2.assign(this.padding,d.padding);Vec3.assign(this.g,d.pos);a=d.anims;a.namedSheets=b;this.mb=new ig.Al(a)},Iwb:function(a,b){var d=a.tb(j);d.z=a.b.g.z;d.x=d.x-b.x/2;d.y=d.y-b.y/2;Vec3.add(d,this.g);return ig.r.Pe(a.r1a?a.r1a():ig.uPa,d.x,d.y,d.z,{owner:a,size:this.size,padding:this.padding,partName:this.name,group:this.group,
persistAnim:this.P6,animSheet:this.mb,collType:this.Jj,heightShape:this.$m})}});var j=Vec3.create(),k=Vec3.create();ig.x1={NONE:0,LEFT:1,RIGHT:2};ig.ixa=ig.Ca.extend({QT:q,UQ:Vec3.create(),anchor:q,Mo:0,Koa:0,stop:y,kY:y,eKa:{},f:function(a,b,d){Vec3.assign(this.UQ,a);this.QT=b;this.Mo=d.time;this.Koa=d.frameCount;this.stop=!d.repeat;this.anchor=d.anchor||q;this.kY=ig.x1[d.flipDir]||ig.x1.NONE;var a=d.partAnims,c;for(c in a)this.eKa[c]={bb:a[c].anim,THb:a[c].posFrames,reset:a[c].reset,Jj:ig.ca[a[c].collType]||
q}},L4:function(a){if(!this.anchor)return q;var b=Vec3.create(this.anchor);if(this.kY&&(this.kY==ig.x1.LEFT&&a<0||this.kY==ig.x1.RIGHT&&a>=0))b.x=-b.x;return b},Gi:function(){return this.Mo*this.Koa},fpa:M("Koa"),oJa:function(a){var b=a.b;b.qn.length==0&&ig.ixa.p4a(a,this.QT,this.UQ);a.Ya.zLa();for(var a=b.qn,d=a.length,a=b.qn,d=a.length;d--;){var b=a[d].Q,c=this.eKa[b.Ck];if(c){if(b.Og){b.show(h);b.iZ=h}b.b.vl(c.Jj||b.Ywb);if(!b.P6||window.Ed){b.Ma(c.bb,c.reset);c.reset&&b.Ya.zLa();b.scb=c.reset;
b.zia()}}else b.Og||b.hide()}},am:function(a,b){var d=a.b;d.qn.length==0&&this.p4a(a);var c=d.tb(j);c.z=d.g.z;c.x=c.x-this.UQ.x/2;c.y=c.y-this.UQ.y/2;var f=y;if(this.kY&&a.face&&(this.kY==ig.x1.LEFT&&a.face.x<0||this.kY==ig.x1.RIGHT&&a.face.x>=0))f=h;for(var i=this.Koa,l=Math.floor(b.n/this.Mo),i=(this.stop?Math.min(l,i-1):l%i)*3,d=d.qn,l=d.length;l--;){var m=d[l],n=m.Q,o=this.eKa[n.Ck],B=this.QT[n.Ck];if(o){var C=n.Ya;if(n.scb)C.n=b.n-ig.i.ja;C.Pd=f;C.alpha=b.alpha;C.Xa=b.Xa;C.Va=b.Va;o=o.THb;B=
Vec3.assign(k,B.g);Vec3.JQ(B,o[i],o[i+1],o[i+2]);if(f)B.x=this.UQ.x-B.x-m.size.x;Vec3.add(B,c);m.l(B.x,B.y,B.z,!n.iZ);n.iZ=y}}},$H:function(a,b,d){b.Bj(q);b.F(this.UQ.x,this.UQ.y,0);b.Wta(a);b.zMa(a);b.ge(d.alpha)}});ig.ixa.p4a=function(a,b,d){var c=a.b;c.F(d.x,d.y,d.z);c.type=ig.ca.IGNORE;c.F(d.x,d.y,d.z);for(var f in b){var i=b[f].Iwb(a,d);c.lub(i.b);i.Bd()}};var l={};ig.Peb=ig.Ca.extend({Wh:q,qt:q,n:0,Xv:0,alpha:1,Qb:0,Xa:1,Va:1,Pd:y,Gba:[],aX:[],f:function(){this.n=0},reset:function(){this.n=
0;var a=this.constructor.prototype;this.Wh=a.Wh;this.qt=a.qt;this.Xv=a.Xv;this.alpha=a.alpha;this.Qb=a.Qb;this.Xa=a.Xa;this.Va=a.Va;this.Gba.length=0},MK:function(){var a=this.Wh[0];if(a)this.n=a.Gi()*Math.random()},RFa:function(){return!!this.Wh},kha:function(a,b){if(b&&this.Wh!=b){this.Wh=b;for(var d=this.Wh.length;d--;){var c=b[d];window.Ed||c.oJa&&c.oJa(a)}}},Otb:function(a){this.Gba.push(a)},Z1a:function(){if(!this.Wh)return 0;var a=this.Wh[0];if(!a)return 0;var b=a.fpa(),d=Math.floor(this.n/
a.Mo);return a.stop?Math.min(d,b-1):d%b},RDb:function(){if(!this.Wh)return h;for(var a=this.Wh.length;a--;)if(this.Wh[a].fpa()>1)return y;return h},kVb:function(){return!this.Wh?y:!this.Wh[0].stop},pCb:function(){if(!this.Wh)return y;var a=this.Wh[0],b=Math.floor(this.n/a.Mo);return a.stop&&b>=a.fpa()},zLa:function(){this.Xv=this.n=0;return this},update:function(a,b){this.n=this.n+ig.i.ja*b;var d=this.Wh.length;for(this.Xv=-1;d--;){var c=this.Wh[d],f=Math.floor(this.n/c.Gi());this.Xv=this.Xv==-1?
f:Math.min(this.Xv,f);c.am&&c.am(a,this,b)}},$H:function(a){if(this.Wh){a.ul(this.Wh.length,this.Wh.length>0&&this.Wh[0].SJ);for(var b=this.Wh.length;b--;){var d=this.Wh[b],c=a.Ua[b];!d||d.sheet&&!d.sheet.wd.loaded?c.FH():d.$H(a,c,this,b)}this.L0(a)}else a.ul(0)},L0:function(b){var d=m,c=n;d.color=q;d.Em=0;c.color=q;c.Em=0;for(var f=this.Gba.length,i=q;f--;){var j=this.Gba[f],k=j.Pj?c:d;if(j.color){if(j.Yp!==q){i||(i=[]);i[j.Yp]||(i[j.Yp]={Jm:{color:q,Em:0},Pj:{color:q,Em:0}});k=j.Pj?i[j.Yp].Pj:i[j.Yp].Jm}if(k.color)a(k,
j.color,j.alpha);else{k.color=new ig.xp(j.color);k.Em=j.alpha}}else this.Gba.splice(f,1)}for(f=b.Ua.length;f--;){if((j=i&&i[f])&&j.Jm.color){d.color&&a(j.Jm,d.color,d.Em);b.Ua[f].tMa(j.Jm.color.D0(),j.Jm.Em)}else b.Ua[f].tMa(d.color?d.color.D0():q,d.Em);if(j&&j.Pj.color){c.color&&a(j.Pj,c.color,c.Em);b.Ua[f].Sta(j.Pj.color.D0(),j.Pj.Em)}else b.Ua[f].Sta(c.color?c.color.D0():q,c.Em)}}});ig.Yia=ig.Ca.extend({Q:q,name:q,RK:0,ow:0,f:function(a,b,d){this.Q=a;this.RK=b;(this.name=d)&&ig.Yia.z9a(a,d);a.Ya.aX.push(this)},
remove:function(){this.Q.Ya.aX.ye(this)},Zl:function(){this.remove()}});ig.Yia.z9a=function(a,b){for(var d=a.Ya.aX.length;d--;)(!b||a.Ya.aX[d].name==b)&&a.Ya.aX[d].remove()};var m={},n={};ig.gwa=ig.Ca.extend({color:q,alpha:q,Yp:q,Pj:y,f:function(a,b,d,c){this.color=new ig.xp(a);this.alpha=b;if(d!==g)this.Yp=d;this.Pj=c},clear:function(){this.color=q}});ig.DTa=ig.Ca.extend({Wh:[],f:function(a){this.Wh.push(a)},bda:M("Wh"),L4:function(a,b){var d=this.Wh[0];return d&&d.L4?d.L4(a,b):q},Gi:function(){for(var a=
0,b=this.Wh.length;b--;)a=Math.max(this.Wh[b].Gi(),a);return a},merge:function(a){this.Wh.push.apply(this.Wh,a.Wh)}});ig.pkb=ig.Ca.extend({aH:0,Wh:[],R2:q,S2:q,T2:q,f:function(a){this.aH=a.dirs*1;this.R2=a.anchorOffsetX;this.S2=a.anchorOffsetY;this.T2=a.anchorOffsetZ},oKb:function(a,b){var d=b.tileOffsets,c=b.flipX,f=b.offset,i=b.dirOffsets,j=b.dirAngles,k=b.allDirFlipX||y;b.angle=0;this.aH=b.tileOffsets.length;this.Wh=[];for(var l=0;l<this.aH;l++){var m=k?(this.aH-l)%this.aH:l;b.tileOffset=d[m];
b.flipX=c&&c[m]||0;k&&(b.flipX=!b.flipX);if(i){var n=Vec3.create();f&&Vec3.add(n,f);n.x=n.x+(i[m]&&i[m][0]||0)*(k?-1:1);n.y=n.y+(i[m]&&i[m][1]||0);n.z=n.z+(i[m]&&i[m][2]||0);b.offset=n}j&&(b.angle=j[m]);this.Wh[l]=[new ig.Rva(a,b)]}},Itb:function(a){this.Wh.push([a])},merge:function(a){this.aH!=a.aH&&e(Error("Tried to merge Multi Dir Anims with different number of directions. Not supported."));for(var b=0;b<this.aH;++b){var d=this.Wh[b];d.push.apply(d,a.Wh[b])}},L4:function(a,b){if(!this.R2&&!this.S2&&
!this.T2)return q;var d=ig.Zoa(a,b,this.aH);return{x:this.R2&&(this.R2.length?this.R2[d]:this.R2)||0,y:this.S2&&(this.S2.length?this.S2[d]:this.S2)||0,z:this.T2&&(this.T2.length?this.T2[d]:this.T2)||0}},bda:function(a){return this.Wh[ig.Zoa(a.face.x,a.face.y,this.aH)]},Gi:function(){for(var a=0,b=this.Wh[0],d=b.length;d--;)a=Math.max(b[d].Gi(),a);return a}});ig.Zoa=function(a,b,d){switch(d){case 1:return 0;case 2:return a>=0?0:1;case 4:return Math.abs(b)>Math.abs(a)?b<0?0:2:a>0?1:3;case 6:return a>=
0?b<=0?0+(57*a>-100*b):1+(57*a<100*b):b<=0?4+(-57*a<-100*b):3+(-57*a>100*b);case 8:return Math.abs(b)>2.414*Math.abs(a)?b<0?0:4:Math.abs(a)>2.414*Math.abs(b)?a>0?2:6:a>0?b<0?1:3:b>0?5:7;case 16:var d=Math.abs(a),c=Math.abs(b);return c>5.0273*d?b<0?0:8:c<0.1989*d?a>0?4:12:c>1.4966*d?a>0?b<0?1:7:b>0?9:15:c>0.6682*d?a>0?b<0?2:6:b>0?10:14:a>0?b<0?3:5:b>0?11:13}};ig.R1a=function(a,b,d){d=d||Vec2.create();switch(b){case 1:Vec2.Oa(d,0,1);break;case 2:switch(a){case 0:Vec2.Oa(d,1,0);break;case 1:Vec2.Oa(d,
-1,0)}break;case 4:switch(a){case 0:Vec2.Oa(d,0,-1);break;case 1:Vec2.Oa(d,1,0);break;case 2:Vec2.Oa(d,0,1);break;case 3:Vec2.Oa(d,-1,0)}break;case 6:switch(a){case 0:Vec2.Oa(d,0.5,-0.866);break;case 1:Vec2.Oa(d,1,0);break;case 2:Vec2.Oa(d,0.5,0.866);break;case 3:Vec2.Oa(d,-0.5,0.866);break;case 4:Vec2.Oa(d,-1,0);break;case 5:Vec2.Oa(d,-0.5,-0.866)}break;case 8:switch(a){case 0:Vec2.Oa(d,0,-1);break;case 1:Vec2.Oa(d,1,-1);break;case 2:Vec2.Oa(d,1,0);break;case 3:Vec2.Oa(d,1,1);break;case 4:Vec2.Oa(d,
0,1);break;case 5:Vec2.Oa(d,-1,1);break;case 6:Vec2.Oa(d,-1,0);break;case 7:Vec2.Oa(d,-1,-1)}break;case 16:switch(a){case 0:Vec2.Oa(d,0,-1);break;case 1:Vec2.Oa(d,0.38268,-0.92387);break;case 2:Vec2.Oa(d,1,-1);break;case 3:Vec2.Oa(d,0.92387,-0.38268);break;case 4:Vec2.Oa(d,1,0);break;case 5:Vec2.Oa(d,0.92387,0.38268);break;case 6:Vec2.Oa(d,1,1);break;case 7:Vec2.Oa(d,0.38268,0.92387);break;case 8:Vec2.Oa(d,0,1);break;case 9:Vec2.Oa(d,-0.38268,0.92387);break;case 10:Vec2.Oa(d,-1,1);break;case 11:Vec2.Oa(d,
-0.92387,0.38268);break;case 12:Vec2.Oa(d,-1,0);break;case 13:Vec2.Oa(d,-0.92387,-0.38268);break;case 14:Vec2.Oa(d,-1,-1);break;case 15:Vec2.Oa(d,-0.38268,-0.92387)}break;default:e(Error("Does not support Direction Vel for numDirs: "+b))}return d};ig.S4=function(a,b,d,c){return ig.R1a(ig.Zoa(a,b,d),d,c)};var o=Vec2.create();ig.K4a=function(a,b){return ig.S4(a.face.x,a.face.y,b,o).x<0};ig.Al=ig.XE.extend({Wi:"AnimationSheet",EIa:{},jna:[],Ba:{},WLb:q,pLa:function(a,b){this.Ba[a]=b},s9a:function(a){delete this.Ba[a]},
Kda:function(a){return!!this.Ba[a]},YXa:function(a,b){this.Ba[a]?this.Ba[a].merge(b):this.Ba[a]=b},Ka:function(){for(var a=0;a<this.jna.length;++a)this.jna[a].Ka()},oG:function(){return ig.root+this.path.vm("data/animations/",".json")+ig.Kn()},onload:function(a){if(a)if(a.DOCTYPE=="MULTI_DIR_ANIMATION"){b(this,a);c(this,a,f)}else if(a.DOCTYPE=="MULTI_ENTITY_ANIMATION"){b(this,a);var i={},j;for(j in a.parts)i[j]=new ig.qkb(j,this.EIa,a.parts[j]);var k=a.baseSize;this.WLb={UQ:k,QT:i};for(j in a.anims){var l=
new ig.ixa(k,i,a.anims[j]);this.YXa(j,new ig.DTa(l))}}else{b(this,a);c(this,a,d)}},UVa:function(a){var b;(b=typeof a=="string"?this.EIa[a]:a)||ig.warn("Sheet '"+a+"' not found in AnimationSheet: "+this.path);return b}})});ig.J=h;
ig.N("impact.base.coll-entry").K(function(){ig.jk={gv:0,uxa:1,RE:2};ig.rp={NONE:0,NORTH_UP:1,EAST_UP:2,WEST_UP:3,SOUTH_UP:4};ig.nL={DEFAULT:0,STATIC_SIZE:1,RECTANGULAR:2};ig.hI={LOOSE:0,FIXED:1,IN_EARTH:2,STRONG_FLIGHT:3};var a={};ig.Nfb=ig.Ca.extend({Q:q,NI:y,xC:y,Ve:y,type:0,qw:ig.jk.RE,shape:1,$m:ig.rp.NONE,size:{x:0,y:0,z:0},YI:y,padding:{x:0,y:0},rm:y,rt:ig.hI.LOOSE,Dda:y,aN:y,di:-1,Ze:{vg:1,Am:1,Pb:1,xN:y},ht:1,Ch:100,jf:1,Vm:0,kj:0.2,lra:40,Fd:0,yd:{height:0,yl:1,Mh:300,er:1},time:{yh:1,Tqa:1,
S6a:1,Im:y,uA:y,parent:q,dKa:y},g:Vec3.create(),aa:0,pc:0,Cd:{type:ig.nL.DEFAULT,size:0,Va:1,offset:Vec2.create()},V:Vec3.create(),Ku:Vec2.create(),wb:Vec2.create(),xi:q,NT:q,qn:[],Vs:0,Zo:0,bI:0,Nc:q,mA:[],S$:[],f:function(a){this.Q=a;this.reset()},j4a:function(){if(this.Nc)return y;this.Nc={KA:y,Vk:Vec3.create(),Cm:Vec2.create(),bNa:y,Nva:h,Via:y,V7:y,ou:y,$sa:q,Mj:q,zs:Vec2.create(),jH:q,mX:q,aKa:1,Cra:y,Mn:{eT:0,cIa:Vec2.create(),EJ:Vec2.create(),eY:0,t4:0,RDa:y}};return h},reset:function(){var a=
this.constructor.prototype;this.NI=a.Aa;this.xC=a.xC;this.Ve=a.Ve;this.time.Im=a.time.Im;this.time.uA=a.time.uA;this.time.yh=a.time.yh;this.time.Tqa=a.time.Tqa;this.type=a.type;this.qw=a.qw;this.shape=a.shape;this.$m=a.$m;Vec3.assign(this.size,a.size);Vec2.assign(this.padding,a.padding);this.rm=a.rm;this.rt=a.rt;this.Dda=a.Dda;this.di=a.di;this.Ze.vg=a.Ze.vg;this.Ze.Pb=a.Ze.Pb;this.Ze.Am=a.Ze.Am;this.Ze.xN=a.Ze.xN;this.ht=a.ht;this.Ch=a.Ch;this.Cra=a.Cra;this.jf=a.jf;this.Vm=a.Vm;this.kj=a.kj;this.lra=
a.lra;this.Fd=a.Fd;this.yd.height=a.yd.height;this.yd.yl=a.yd.yl;this.yd.Mh=a.yd.Mh;this.yd.er=a.yd.er;Vec3.assign(this.g,a.g);this.aa=a.aa;this.pc=a.pc;this.Cd.size=a.Cd.size;this.Cd.Va=a.Cd.Va;this.Cd.type=a.Cd.type;this.Cd.offset.x=a.Cd.offset.x;this.Cd.offset.y=a.Cd.offset.y;Vec3.assign(this.V,a.V);Vec2.assign(this.Ku,a.Ku);Vec3.assign(this.wb,a.wb);this.xi=a.xi;this.NT=a.NT;this.qn.length=0;this.Vs=a.Vs;this.Zo=a.Zo;this.bI=a.bI;this.Nc=a.Nc;this.mA.length=0;this.S$.length=0;this.YI=a.YI;this.aN=
a.aN},l:function(a,b,c,j){var k=0,l=0,m=0,n=!isNaN(a)||!isNaN(b);if(n&&j&&this.Nc){this.Nc.Vk.x=a-this.g.x;this.Nc.Vk.y=b-this.g.y;this.Nc.Vk.z=c-this.g.z;this.Nc.ou=h}else{(j=n&&this.xC)&&ig.r.Ie.n7(this);if(!isNaN(a)){k=a-this.g.x;this.g.x=a}if(!isNaN(b)){l=b-this.g.y;this.g.y=b}j&&ig.r.Ie.RW(this);if(!isNaN(c)){m=c-this.g.z;this.g.z=c;this.aa=ig.r.Hy(this.g.z);this.pc=Math.min(this.pc,this.g.z);this.Nc&&(this.Nc.Nva=h)}if(this.Nc){if(!this.Nc.V7){this.Nc.V7=h;this.Nc.Vk.x=this.Nc.Vk.y=this.Nc.Vk.z=
0}this.Nc.Vk.x=this.Nc.Vk.x+k;this.Nc.Vk.y=this.Nc.Vk.y+l;this.Nc.Vk.z=m;if(this.Nc.Mj){this.Nc.zs.x=this.Nc.zs.x+k;this.Nc.zs.y=this.Nc.zs.y+l}}(isNaN(this.g.x)||isNaN(this.g.y)||isNaN(this.g.z))&&e(Error("Position update leads to NaN coordinate!"))}},vl:function(a){var b=a!=ig.ca.PASSIVE&&a!=ig.ca.NONE;this.type=a;ig.r.Ie&&!this.Q.Og&&(this.xC&&!b?ig.r.Ie.n7(this):!this.xC&&b&&ig.r.Ie.RW(this))},kn:function(a){if(this.qw!=a){var b=this.qw;this.qw=a;this.NI&&b==ig.jk.gv&&ig.r.Ie.nYa(this)}},F:function(b,
c,i,j,k){if(!(b==this.size.x&&c==this.size.y&&i==this.size.z)){var l=this.xC;l&&ig.r.Ie.n7(this);if(j){var j=(b-this.size.x)/2,m=(c-this.size.y)/2;if(k){var n=k=0,o=q;if(j>0){o=ig.r.Ie.Il(a);ig.r.Uq(o,this.Q,j,0,0,0,0)&&(k=-Math.ceil((1-o.Ne)*j));o=ig.r.Ie.Il(a);ig.r.Uq(o,this.Q,-j,0,0,0,0)&&(k=k?0:Math.ceil((1-o.Ne)*j))}if(m>0){o=ig.r.Ie.Il(a);ig.r.Uq(o,this.Q,0,m,0,0,0)&&(n=-Math.ceil((1-o.Ne)*m));o=ig.r.Ie.Il(a);ig.r.Uq(o,this.Q,0,-m,0,0,0)&&(n=n?0:Math.ceil((1-o.Ne)*m))}j=j-k;m=m-n}this.g.x=this.g.x-
j;this.g.y=this.g.y-m;if(this.Nc&&this.Nc.Mj){this.Nc.zs.x=this.Nc.zs.x-j;this.Nc.zs.y=this.Nc.zs.y-m}}this.size.x=b;this.size.y=c;this.size.z=i;l&&ig.r.Ie.RW(this)}},K7:function(a,b){var c=this.xC;c&&ig.r.Ie.n7(this);this.padding.x=a;this.padding.y=b;c&&ig.r.Ie.RW(this)},tb:function(a){a=a||Vec2.create();Vec2.Oa(a,this.g.x+this.size.x/2,this.g.y+this.size.y/2);return a},lub:function(a){this.qn.push(a);a.xi=this},qD:function(a,b){if(this.time.parent)return this.time.parent.qD(this.time.dKa||a,b);
var c=this.time.Im;!c&&(a&&this.time.uA)&&(c=h);c=c?ig.i.Sa:ig.i.Ir;c=c*this.time.yh;b||(c=c*this.time.Tqa);return c},update:function(){var a=this.Ze.xN?1:this.Ze.Pb,f=this.g.z>this.pc||this.V.z>0?this.Ze.Am:this.Ze.vg*a;if(Math.abs(this.V.x)<2&&this.wb.x==0)this.V.x=0;if(Math.abs(this.V.y)<2&&this.wb.y==0)this.V.y=0;var a=this.Ch*this.jf*this.time.S6a,i=Vec2.Bk(this.V,f*12*ig.i.ja,c);if(this.wb.x||this.wb.y){Vec2.normalize(this.wb);var j=Vec2.length(this.V);if(j<=a+ig.lf.Zj){var j=a,k=Vec2.ug(this.wb,
i);k>=0&&Vec2.sub(i,Vec2.Bk(this.wb,k,b))}f=Vec2.Bk(this.wb,a*10*f*this.ht,b);this.V.x=this.V.x+f.x*ig.i.ja;this.V.y=this.V.y+f.y*ig.i.ja;Vec2.Rb(this.V,0,Math.max(j,a))}this.V.x=this.V.x-i.x;this.V.y=this.V.y-i.y},contains:function(a,b,c){return!(this.g.x>a||this.g.x+this.size.x<a||this.g.y-this.g.z-(c?this.size.z:0)>b||this.g.y-this.g.z+this.size.y<b)},FS:function(a,b,c,j,k,l,m,n,o){if((m=(m||!this.rm)&&!(this.g.x-this.padding.x>=a+j||this.g.x+this.padding.x+this.size.x<=a||this.g.y-this.padding.y>=
b+k||this.g.y+this.padding.y+this.size.y<=b||this.g.z>c+l||c>this.g.z+this.size.z))&&o&&(this.g.z>=c+l||c>=this.g.z+this.size.z))return y;if(m&&n&&n!=ig.Tf.RECTANGLE){var t,a=a+j/2,b=b+k/2;switch(n){case ig.Tf.SLOPE_NE:t=this.g.x-a-(this.g.y+this.size.y-b);break;case ig.Tf.SLOPE_SE:t=this.g.x-a+(this.g.y-b);break;case ig.Tf.SLOPE_SW:t=-(this.g.x+this.size.x-a)+(this.g.y-b);break;case ig.Tf.SLOPE_NW:t=-(this.g.x+this.size.x-a)-(this.g.y+this.size.y-b)}t>=-ig.lf.Zj&&(m=y)}return m},trace:function(a,
c,i,j,k,l,m,n,o,t){if(this.rm)return y;var p=c+(k<0?k:0)>=this.g.x+this.size.x,r=c+m+(k>0?k:0)<=this.g.x,u=i+(l<0?l:0)>=this.g.y+this.size.y,w=i+n+(l>0?l:0)<=this.g.y,o=j+o<=this.g.z,j=this.g.z+this.v2a(c,i,m,n,h)<=j+(t?ig.lf.Rt:0);if(p||r||u||w||o||j)return y;if(this.$m&&!(c>=this.g.x+this.size.x||c+m<=this.g.x||i>=this.g.y+this.size.y||i+n<=this.g.y)){Vec2.Oa(b,0,0);switch(this.$m){case ig.rp.NORTH_UP:b.y=-1;break;case ig.rp.EAST_UP:b.x=1;break;case ig.rp.SOUTH_UP:b.y=1;break;case ig.rp.WEST_UP:b.x=
-1}if(b.x*k+b.y*l>0){a.Ne=0;a.dir.x=b.x;a.dir.y=b.y;return h}}if(k!=0&&l!=0){p=c+k+(k<0?m:0)-(this.g.x+(k>0?this.size.x:0));r=i+l+(l>0?n:0)-(this.g.y+(l<0?this.size.y:0));if(p*k>=0&&r*l>=0&&Math.abs(p)<Math.abs(k)&&Math.abs(r)<Math.abs(l)&&Math.abs(p/r)>Math.abs(k/l))return y;r=i+l+(l<0?n:0)-(this.g.y+(l>0?this.size.y:0));p=c+k+(k>0?m:0)-(this.g.x+(k<0?this.size.x:0));if(p*k>=0&&r*l>=0&&Math.abs(p)<Math.abs(k)&&Math.abs(r)<Math.abs(l)&&Math.abs(r/p)>Math.abs(l/k))return y}return this.shape==ig.Tf.RECTANGLE?
ig.$j.Collision.sua(a,c,i,k,l,m,n,this.g.x,this.g.y,this.size.x,this.size.y):ig.$j.Collision.sua(a,c,i,k,l,m,n,this.g.x,this.g.y,this.size.x,this.size.y,this.shape-2)},zY:function(a,b){var c=b||{};c.x=(Math.max(this.g.x,a.g.x)+Math.min(this.g.x+this.size.x,a.g.x+a.size.x))/2;c.y=(Math.max(this.g.y,a.g.y)+Math.min(this.g.y+this.size.y,a.g.y+a.size.y))/2;c.z=(Math.max(this.g.z,a.g.z)+Math.min(this.g.z+this.size.z,a.g.z+a.size.z))/2;c.x=c.x.Rb(this.g.x,this.g.x+this.size.x);c.y=c.y.Rb(this.g.y,this.g.y+
this.size.y);return c},sha:function(a){if(this.Nc){var b=a!=this.Nc.Mj;b&&(this.Nc.Mj&&this.Nc.Mj.Q.z7a)&&this.Nc.Mj.Q.z7a(this.Q);if(this.Nc.Mj=a){this.Nc.zs.x=this.g.x-a.g.x;this.Nc.zs.y=this.g.y-a.g.y;b&&a.Q.Ifa&&a.Q.Ifa(this.Q)}}},v2a:function(a,b,c,j,k){switch(this.$m){case ig.rp.NONE:return this.size.z;case ig.rp.NORTH_UP:return k&&this.size.z/this.size.y>4?this.size.z:(-(b-this.g.y-this.size.y)/this.size.y).Rb(0,1)*this.size.z;case ig.rp.EAST_UP:return k&&this.size.z/this.size.x>4?this.size.z:
((a+c-this.g.x)/this.size.x).Rb(0,1)*this.size.z;case ig.rp.SOUTH_UP:return k&&this.size.z/this.size.y>4?this.size.z:((b+j-this.g.y)/this.size.y).Rb(0,1)*this.size.z;case ig.rp.WEST_UP:return k&&this.size.z/this.size.x>4?this.size.z:(-(a-this.g.x-this.size.x)/this.size.x).Rb(0,1)*this.size.z}},oS:function(a){if(a.KA)if(this.Vm>0&&Math.abs(this.V.y)+Math.abs(this.V.x)>this.lra){var b=this.V.x*a.Cm.x+this.V.y*a.Cm.y;this.V.x=this.V.x-2*b*a.Cm.x;this.V.y=this.V.y-2*b*a.Cm.y;this.V.x=this.V.x*this.Vm;
this.V.y=this.V.y*this.Vm}else if(!a.bNa){if(a.Vk.x==0&&a.Cm.x*this.V.x>=0)this.V.x=0;if(a.Vk.y==0&&a.Cm.y*this.V.y>=0)this.V.y=0}}});ig.qd={NAb:function(a,b){for(var c=a.qn,j=c.length;j--;)if(c[j].Q.Ck==b)return c[j].Q},ut:function(a,b,c){b===g&&(b=0);c===g&&(c=b);return a.g.x+a.size.x+b<ig.r.screen.x||a.g.x-b>ig.r.screen.x+ig.i.width||a.g.y-a.g.z+a.size.y+c<ig.r.screen.y||a.g.y-a.g.z-a.size.z-c>ig.r.screen.y+ig.i.height?y:h},Wk:function(a,b,c){c.x=b.g.x+b.size.x/2-(a.g.x+a.size.x/2);c.y=b.g.y+b.size.y/
2-(a.g.y+a.size.y/2);return c},$Ea:function(a,b,c){c.x=b.g.x+b.size.x/2-(a.g.x+a.size.x/2);c.y=b.g.y+b.size.y/2-(a.g.y+a.size.y/2);c.z=b.g.z-a.g.z;return c},Fy:function(a,b){var c=a.g.x+a.size.x/2-(b.g.x+b.size.x/2),j=a.g.y+a.size.y/2-(b.g.y+b.size.y/2);return Math.sqrt(c*c+j*j)},lBb:function(a,b){var c=a.g.x+a.size.x/2-(b.g.x+b.size.x/2),j=a.g.y-a.g.z+a.size.y/2-a.size.z/2-(b.g.y-b.g.z+b.size.y/2- -b.size.z/2);return Math.sqrt(c*c+j*j)},sTb:function(a,b){return Math.atan2(b.g.y+b.size.y/2-(a.g.y+
a.size.y/2),b.g.x+b.size.x/2-(a.g.x+a.size.x/2))},oqa:function(a){a=a.Nc;return!a?y:a.Mn.eT!=0||a.Mj&&!a.Mj.Q.HJb||a.jH},AN:function(a,b,c){return!c&&a.g.z>=b.g.z+b.size.z||b.g.z>=a.g.z+a.size.z||a.g.x>=b.g.x+b.size.x||b.g.x>=a.g.x+a.size.x||a.g.y>=b.g.y+b.size.y||b.g.y>=a.g.y+a.size.y?y:h},Toa:function(a,b,c,j){var k=c.g,l=b.size,c=c.size;Vec3.Oa(a,k.x+c.x/2-l.x/2+(j&&j.x||0),k.y+c.y/2-l.y/2+(j&&j.y||0),b.g.z+(j&&j.z||0));return a},PAb:function(a,b,c,j,k){return(Math.max(a.g.x,b)-Math.min(a.g.x+
a.size.x,b+j))*(Math.max(a.g.y,c)-Math.min(a.g.y+a.size.y,c+k))},HDb:function(a,b,c,j){return a.g.x+a.size.x-b.g.x<c||b.g.x+b.size.x-a.g.x<c||a.g.y+a.size.y-b.g.y<j||b.g.y+b.size.y-a.g.y<j?y:h},EN:function(a,c){var i=Vec2.assign(b,a.wb);Vec2.length(i,Math.max(ig.i.ja*3*Vec2.length(a.V),a.size.x*0.75));return ig.r.YJ(a.g.x+i.x,a.g.y+i.y,a.g.z,a.size.x,a.size.y,c,h)},k2a:function(a,b,c){var j=a.V.z,k=a.Fd*-ig.r.gB,a=a.g.z;c!==g&&(j=c);if(k==0)return(b-a)/j;b=j*j-2*k*(a-b);if(b<0)return-1;b=Math.sqrt(b);
return Math.max((-j-b)/k,(-j+b)/k)},pAb:function(a,b,c){var j=a.Fd*-ig.r.gB;return j==0?1:(b-a.g.z)/c-j*c/2},qAb:function(a){return-a.V.z/(a.Fd*-ig.r.gB)},l2a:function(a,b){return a.g.z<b?Math.sqrt((a.g.z-b)*2*a.Fd*-ig.r.gB):0},DAb:function(a,f,i){var f=this.Wk(f,a,b),j=Vec2.assign(c,a.wb);Vec2.length(j,a.Ch*a.jf*ig.i.ja);a=Vec2.ug(j,j);j=Vec2.ug(f,j);i=Vec2.ug(f,f)-i*i;i=j*j-a*i;if(i<0)return-1;i=Math.sqrt(i);return(-j+i)/a},Pda:function(a,b){return!(a.Vs>0||a.Zo>0)?y:!b?h:Vec2.Qb(a.V,a.Nc.Cm)<Math.PI*
2*b}};var b=Vec2.create(),c=Vec2.create()});ig.J=h;
ig.N("impact.base.entity").O("impact.base.animation","impact.base.coll-entry","impact.base.impact").K(function(){function a(b,c){if(!b.Ya)return y;b.Ya.Otb(c);for(var i=b.b,j=i.qn.length;j--;)a(i.qn[j].Q,c);return h}function b(a,c,i){if(!c.Og){for(var j=c.Ua,k=j.length;k--;){var l=a,m=j[k];if(m.size.x&&(m.size.y||m.size.z)&&m.wd){var n=m.g.x+m.size.x,o=m.g.y-m.g.z-m.size.z,t=m.g.y-m.g.z+m.size.y,p=i.b,r=p.g.x,p=p.g.y-p.g.z;l.left=Math.max(l.left,r-m.g.x);l.right=Math.max(l.right,n-r);l.top=Math.max(l.top,
p-o);l.bottom=Math.max(l.bottom,t-p)}}c=c.b.qn;if(c.length>0)for(k=c.length;k--;)b(a,c[k].Q,i)}}ig.OPb={FLAT:1,CUBE:2};ig.Pa={BOTTOM:1,CENTER:2,TOP:3,FACE:4,BASE:5,WALL_HIT:6,FACE_BASE:7};var c=Vec2.create();ig.twa=y;ig.Kc=ig.Ca.extend({id:0,uid:0,zu:0,yf:{},name:q,b:q,Ua:[],XA:[],Og:h,mla:h,Ve:y,t:new ig.u({}),f:function(a,b,c,j){this.uid=++ig.Kc.BWa;this.b=new ig.Nfb(this);this.b.l(a,b,c);if(j.size)ig.merge(this.b.size,j.size);else if(window.Ed){if(this.t.Kq)this.b.size.x=32;if(this.t.Lq)this.b.size.y=
32}if(j.mapId)this.zu=j.mapId;this.name=j.name||this.name},reset:function(a,b,c,j){this.uid=++ig.Kc.BWa;this.b.reset();this.b.l(a,b,c);this.Ve=y;this.Og=h;if(j.size)ig.merge(this.b.size,j.size);else if(window.Ed){if(this.t.Kq)this.b.size.x=32;if(this.t.Lq)this.b.size.y=32}if(j.mapId)this.zu=j.mapId;this.name=j.name||this.name},Np:J(),l:function(a,b,c,j){this.b.l(a,b,c,j)},IH:function(a){this.l(g,g,a)},F:function(a,b,c){this.b.F(a,b,c)},tb:function(a){return this.b.tb(a)},lc:function(a,b){var b=b||
Vec3.create(),c=this.tb(b);c.z=this.b.g.z;switch(a){case ig.Pa.TOP:c.z=c.z+this.b.size.z;break;case ig.Pa.CENTER:c.z=c.z+this.b.size.z/2;break;case ig.Pa.FACE:case ig.Pa.FACE_BASE:var j;if(this.Y1a&&(j=this.Y1a())){c.y=c.y+this.b.size.y/2;c.x=c.x+(j&&j.x||0);c.y=c.y+(j&&j.y||0);c.z=c.z+(j&&j.z||0)}if(a==ig.Pa.FACE_BASE)c.z=this.b.pc;break;case ig.Pa.BASE:c.z=this.b.pc;break;case ig.Pa.WALL_HIT:if(j=this.b.Nc&&this.b.Nc.Cm){if(j.x>0)c.x=c.x+this.b.size.x/2;else if(j.x<0)c.x=c.x-this.b.size.x/2;if(j.y>
0)c.y=c.y+this.b.size.y/2;else if(j.y<0)c.y=c.y-this.b.size.y/2}}return c},zY:function(a,b){return this.b.zY(a.b,b)},ipa:function(a,b){b=b||Vec2.create();a.tb(b);Vec2.sub(b,this.tb(c));return b},eda:function(a){Vec2.assign(c,this.b.V);Vec2.sub(c,a.b.V);Vec2.Bk(c,ig.i.ja);var b=-1,i=-1;c.x&&(b=c.x>0?(this.b.g.x+this.b.size.x-a.b.g.x)/c.x:(a.b.g.x+a.b.size.x-this.b.g.x)/-c.x);c.y&&(i=c.y>0?(this.b.g.y+this.b.size.y-a.b.g.y)/c.y:(a.b.g.y+a.b.size.y-this.b.g.y)/-c.y);return b<0||b>1?ig.Jc.Lk[c.y>0?"NORTH":
"SOUTH"]:i<0||i>1?ig.Jc.Lk[c.x>0?"WEST":"EAST"]:b<i?ig.Jc.Lk[c.x>0?"WEST":"EAST"]:ig.Jc.Lk[c.y>0?"NORTH":"SOUTH"]},update:function(){this.b.update()},oS:function(a){this.b.oS(a)},ul:function(a,b){var c=this.Ua.length-a;if(c<0)for(;c++;)this.Ua.push(ig.oNa.get(b||y));else if(c>0)for(;c--;)this.Ua.pop().ze()},Gh:J(),it:function(a){a&&a.dw&&this.XA.push(a)},rO:function(a){this.XA.ye(a)},GA:function(a){for(var b=this.XA.length;b--;)if(!a||a(this.XA[b])){this.XA[b].dw();this.XA.splice(b,1)}},show:function(){ig.r.dMb(this)},
hide:function(){ig.r.xCb(this)},po:q,ze:function(a){if(!this.Ve){ig.twa++;this.Ge(a);this.Ve||e(Error("Killed Entity actually not killed",this));this.GA();for(var b=0;b<this.Ua.length;++b)this.Ua[b].ze();this.Ua=[];ig.r.VIb(this);for(var c=this.b.qn,b=c.length;b--;)c[b].Q.ze(a)}},Ge:function(){ig.twa||e(Error("Called Entity .onKill() outside of ig.game.kill()"));ig.twa--;this.Ve=h;this.b.Ve=h},ye:J(),RAb:function(a){return ig.r.Br(this.b.g.x,this.b.g.y,this.b.g.z,this.b.size.x,this.b.size.y,this.b.size.z,
this,q,a)},ALb:function(a){this.b.rm=a},h4:function(a){return ig.qd.Fy(this.b,a.b)},bm:function(a,b){if(b[1]=="name")return this.name;if(b[1]=="id")return this.id;if(b[1]=="vel")return ig.ma.s_(this.b.V,b,2);if(b[1]=="collWall"){var c=this.b.Nc&&this.b.Nc.Cm;if(c)return ig.ma.s_(c,b,2)}return q},Nb:J(),oq:J(),PQ:J(),ZN:q,hH:q});ig.kA={NORTH:1,SOUTH:3};ig.gl={spa:function(a,c){c&&c.Gh();a.left=a.right=a.top=a.bottom=-1E4;b(a,c,c)},yUb:function(a){a=a.b;return a.Nc&&a.Nc.Mj},rY:function(a){a=a.b;if(!a.Nc)return q;
return(a=a.Nc.Mj)&&a.Q},ut:function(a,b,c){return ig.qd.ut(a.b,b,c)},VAa:function(b,c){if(a(b,c)){var i=b.b;if(i.xi&&i.NT)for(var j=i.xi.qn,k=j.length;k--;){var l=j[k];l!=i&&l.NT==i.NT&&a(l.Q,c)}}},Lma:function(a,b){for(var c=a.Ua,j=c.length;j--;){var k=c[j],l=0,m=0;if(b){if(b!=ig.kA.NORTH)l=k.vk.top;if(b!=ig.kA.SOUTH)m=k.vk.bottom}k.gp(l,m)}c=a.b.qn;if(c.length>0)for(j=c.length;j--;)this.Lma(c[j].Q,b)},EZa:function(a){for(var b=a.Ua,c=b.length;c--;)Vec3.Oa(b[c].Wj,0,0,0);a=a.b.qn;if(a.length>0)for(c=
a.length;c--;)this.EZa(a[c].Q)}};ig.Kc.BWa=0;ig.ca={NONE:0,IGNORE:1,PROJECTILE:2,VIRTUAL:3,PBLOCK:4,NPBLOCK:5,BLOCK:6,TRIGGER:7,PASSIVE:8,SEMI_IGNORE:9,FENCE:10,NPFENCE:11};ig.Kc.rf={};ig.Kc.rf[ig.ca.NONE]={};ig.Kc.rf[ig.ca.IGNORE]={};ig.Kc.rf[ig.ca.IGNORE][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.IGNORE][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.IGNORE][ig.ca.NPBLOCK]=h;ig.Kc.rf[ig.ca.IGNORE][ig.ca.NPFENCE]=h;ig.Kc.rf[ig.ca.PROJECTILE]={};ig.Kc.rf[ig.ca.PROJECTILE][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.PROJECTILE][ig.ca.FENCE]=
h;ig.Kc.rf[ig.ca.PROJECTILE][ig.ca.PBLOCK]=h;ig.Kc.rf[ig.ca.VIRTUAL]={};ig.Kc.rf[ig.ca.VIRTUAL][ig.ca.VIRTUAL]=h;ig.Kc.rf[ig.ca.VIRTUAL][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.VIRTUAL][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.VIRTUAL][ig.ca.NPBLOCK]=h;ig.Kc.rf[ig.ca.VIRTUAL][ig.ca.NPFENCE]=h;ig.Kc.rf[ig.ca.PBLOCK]={};ig.Kc.rf[ig.ca.PBLOCK][ig.ca.PROJECTILE]=h;ig.Kc.rf[ig.ca.PBLOCK][ig.ca.PBLOCK]=h;ig.Kc.rf[ig.ca.PBLOCK][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.PBLOCK][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.NPBLOCK]={};ig.Kc.rf[ig.ca.NPBLOCK][ig.ca.IGNORE]=
h;ig.Kc.rf[ig.ca.NPBLOCK][ig.ca.VIRTUAL]=h;ig.Kc.rf[ig.ca.NPBLOCK][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.NPBLOCK][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.NPBLOCK][ig.ca.NPFENCE]=h;ig.Kc.rf[ig.ca.BLOCK]={};ig.Kc.rf[ig.ca.BLOCK][ig.ca.IGNORE]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.PROJECTILE]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.VIRTUAL]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.PBLOCK]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.NPBLOCK]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.SEMI_IGNORE]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.BLOCK][ig.ca.NPFENCE]=
h;ig.Kc.rf[ig.ca.FENCE]={};ig.Kc.rf[ig.ca.FENCE][ig.ca.FENCE]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.IGNORE]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.PROJECTILE]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.VIRTUAL]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.PBLOCK]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.NPBLOCK]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.SEMI_IGNORE]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.FENCE][ig.ca.NPFENCE]=h;ig.Kc.rf[ig.ca.SEMI_IGNORE]={};ig.Kc.rf[ig.ca.SEMI_IGNORE][ig.ca.BLOCK]=h;ig.Kc.rf[ig.ca.SEMI_IGNORE][ig.ca.FENCE]=
h;ig.Kc.rf[ig.ca.SEMI_IGNORE][ig.ca.NPBLOCK]=h;ig.Kc.rf[ig.ca.SEMI_IGNORE][ig.ca.NPFENCE]=h;ig.Kc.rf[ig.ca.TRIGGER]={};ig.Kc.rf[ig.ca.PASSIVE]={};ig.Kc.rf[ig.ca.PASSIVE][ig.ca.BLOCK]=h;ig.Tf={RECTANGLE:1,SLOPE_NE:2,SLOPE_SE:3,SLOPE_SW:4,SLOPE_NW:5};ig.Wd=ig.Kc.extend({mb:q,Ya:q,iBa:1,rk:q,dB:q,xma:y,nza:y,f:function(a,b,c,j){this.parent(a,b,c,j);this.Ya=new ig.Peb},reset:function(a,b,c,j){this.parent(a,b,c,j);this.Ya.reset();this.iBa=1;this.dB=this.rk=q;this.nza=this.xma=y},Ge:function(a){this.parent(a);
this.nza&&this.mb.Ka()},Np:function(){this.ul(0)},Bd:function(a){if(a)if(a instanceof ig.Al)this.mb=a;else{this.nza=h;this.mb=new ig.Al(a)}if(!this.Ya.RFa()){for(var b in this.mb.Ba)break;if(b){this.Ma(b);this.Ya.kha(this,this.mb.Ba[b].bda(this))}}},VEa:function(){return!this.mb.Ba[this.rk]?1:this.mb.Ba[this.rk].aH||1},ALa:function(){this.Ya.zLa();for(var a=this.b.qn,b=a.length;b--;){var c=a[b].Q;c.P6||c.ALa()}},Ma:function(a,b,c,j,k){c=c||q;if(j||(c||a)!=(this.dB||this.rk)){this.xma=k;this.rk=a;
(b||y)&&this.ALa();this.dB=c;this.zia()}},zia:function(){if(this.mb){if(this.Ya.Xv>0&&this.xma){this.xma=y;this.PQ(this.rk)}if(this.dB&&this.Ya.Xv>0){this.ALa();this.rk=this.dB;this.dB=q}var a=this.rk;typeof a=="string"&&(a=this.mb.Ba[this.rk]);a&&this.Ya.kha(this,a.bda(this))}},update:function(){this.zia();this.parent()},Gh:function(){this.mb&&this.Ya.$H(this,this.iBa)}});ig.uPa=ig.Wd.extend({Ck:q,XD:q,P6:q,f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=j.collType;this.b.di=-1;this.b.$m=j.heightShape;
this.b.NT=j.group;this.b.YI=h;this.XD=j.owner;this.Ck=j.partName;this.mb=j.animSheet;this.P6=j.persistAnim;this.Ywb=j.collType;(a=j.padding)&&this.b.K7(a.x,a.y)}})});ig.J=h;
ig.N("impact.base.steps").K(function(){function a(b,c,d,f){for(var i=q,j=[],k=0;k<b.length;k++){var l=b[k].type,m=c[l];if(m){m=new m(b[k]);if(l=="LABEL"){d[m.name]&&!window.Ed&&e(Error("Step Collection includes label '"+m.name+"' twice"));d[m.name]=m}for(l=0;l<j.length;++l)j[l].Ok=m;var j=[],n=m.eB&&m.eB();if(n){if(!m.uf)m.uf={};for(l=0;l<n.length;++l){var o=n[l],t=b[k][o];t||(t=[]);t=a(t,c,d,j);m.uf[o]=t}}j.push(m);i||(i=m)}}for(l=0;l<j.length;++l)f.push(j[l]);return i}ig.Ika={c_a:function(b,c,d){return a(b,
c,d,[])},Nma:function(a){if(a&&!a.NUa){a.Ka&&a.Ka();a.NUa=h;a.Ok&&this.Nma(a.Ok);if(a.uf)for(var c in a.uf)a.uf[c]&&this.Nma(a.uf[c])}}};ig.RTa=ig.Ca.extend({Ok:q,NUa:y,uf:g,f:J(),start:J(),ya:N(h),Lv:M("Ok"),wY:q})});ig.J=h;
ig.N("impact.base.event").O("impact.base.steps").K(function(){ig.Qm={INTERRUPTABLE:0,PARALLEL:1,BLOCKING:2};ig.nhb=ig.Ca.extend({uU:[],YQ:q,mba:[],f:J(),Dp:function(a,b,c,d,f,i,j){a=new ig.lhb(a,f,b,c,d,i,j);if(!this.YQ||b!=ig.Qm.BLOCKING)this.CXa(a);else{a.Vi=h;this.mba.push(a)}return a},uTb:M("YQ"),JS:function(){for(var a=this.uU.length;a--;)if(this.uU[a].y_!=ig.Qm.INTERRUPTABLE)return y;return h},update:function(){for(var a=0;a<this.uU.length;){var b=this.uU[a];if(ig.r.paused&&!b.hga)++a;else if(b.update()){this.uU.splice(a,
1);this.hrb(b)}else++a}},clearQueue:function(){this.mba.length=0},clear:function(){for(var a=this.uU.length;a--;)this.uU.splice(a,1);this.YQ=q;this.mba=[]},CXa:function(a){a.Vi=y;this.uU.push(a);if(a.y_==ig.Qm.BLOCKING)this.YQ=a;a.y6&&a.y6(a)},hrb:function(a){a.MKb();if(a.y_==ig.Qm.BLOCKING)this.mba.length?this.CXa(this.mba.shift()):this.YQ=q}});ig.lhb=ig.Ca.extend({y_:0,Xb:y,Vi:y,stack:[],fY:[],hga:y,y6:q,Zy:q,wma:q,data:q,f:function(a,b,c,d,f,i,j){this.y_=c||0;this.y6=d||q;this.Zy=f||q;this.wma=
i;this.data=j||q;a&&this.bZa(a,b)},bZa:function(a,b){var c=a.VLb(b);this.stack.push({event:a,Bv:q,$a:{},ma:c});return this.stack[this.stack.length-1]},J2:function(a){this.fY.push(a)},MKb:function(){this.Xb=h;for(var a=0;a<this.fY.length;++a)this.fY[a].v7a(this);this.fY=[];this.Zy&&this.Zy(this)},zh:M("Vi"),ko:function(){return!this.Xb},lKa:function(a){do{if(!a.Bv)a.Bv=a.event.qU;var b=a.Bv;if(!b)break;b.start&&b.start(a.$a,this);if(b.h2a){a=this.bZa(b.h2a(),b.UDa);ig.ma.dua(a.ma)}}while(!a.Bv);return a},
update:function(){var a=this.stack[this.stack.length-1];ig.ma.dua(a.ma);for(a.Bv||(a=this.lKa(a));a.Bv&&a.Bv.ya(a.$a);){var b=q;if(a.Bv.wY){var c=a.Bv.wY(a.$a);if(c)(b=a.event.Gea[c])||e(Error("Label '"+c+"' not found."))}b||(b=a.Bv.Lv(a.$a));a.Bv=b;if(a.Bv)a=this.lKa(a);else{this.stack.pop();if(c=this.stack[this.stack.length-1]){a=c;ig.ma.dua(a.ma);a.Bv=a.Bv.Lv(a.$a);a.Bv&&(a=this.lKa(a))}}}ig.ma.dua(q);return!a||!a.Bv}});ig.qa=ig.RTa;ig.oa={};ig.Ja=ig.Ca.extend({name:q,qU:q,Gea:{},f:function(a){this.name=
a.name||"[UNNAMED]";this.HGa=a.input||{};this.qU=ig.Ika.c_a(a.steps,ig.oa,this.Gea)},Ka:function(){ig.Ika.Nma(this.qU)},VLb:function(a){var b={},c;for(c in this.HGa)switch(this.HGa[c]._type){case "StringExpression":case "String":case "BooleanExpression":case "Boolean":case "NumberExpression":case "Number":b[c]=ig.Ja.eh(a[c]);break;case "Vec2":b[c]=ig.Ja.vG(a[c],Vec2.create());break;case "Vec3":b[c]=ig.Ja.vq(a[c],Vec3.create());break;case "VarName":b[c]=ig.Ja.Fr(a[c]);break;case "Entity":b[c]=a[c];
break;case "LangLabel":b[c]=ig.Ra.ic(a[c]);break;default:e(Error("Event: could not initialize input of type '"+this.HGa[c].c+"'"))}return b}});ig.Ja.yY=function(a){return a&&a.base?a.base+(Math.random()-0.5)*2*(a.vary||0):a};ig.Ja.rd=function(a,b){if(!a)return q;if(a instanceof ig.Kc)return a;if(a.player)return ig.r.cb;if(a.self)return b&&b.wma||q;if(a.name)return ig.r.W1a(a.name);for(var c=ig.swa.length;c--;){var d=ig.swa[c];if(a[d])return ig.BQa[d].wyb(a[d])}return q};ig.BQa={};ig.swa=[];ig.Ja.p9a=
function(a,b,c){ig.BQa[a]={wyb:b,ss:c};ig.swa.push(a)};ig.Ja.p9a("varName",function(a){a=ig.Ja.Fr(a);a=ig.ma.get(a);return ig.r.Is[a]},{c:"VarName",d:"Variable from which to fetch entity name"});ig.Ja.vG=function(a,b){var c=ig.Ja.eh(a);return Vec2.assign(b,c)};ig.Ja.vq=function(a,b){var c=ig.Ja.eh(a);return Vec3.Oa(b,c.x,c.y,c.lvl?ig.r.g2a(c.lvl):c.z||0)};ig.Ja.Fr=function(a){a&&a.indirect&&(a=ig.ma.get(a.indirect));return typeof a=="string"?a:q};ig.Ja.eh=function(a){if(a&&a.indirect){a=ig.ma.get(a.indirect);
return ig.ma.get(a)}return a&&a.varName?ig.ma.get(a.varName):a}});ig.J=h;
ig.N("impact.base.sprite").O("impact.base.image").K(function(){ig.egb=ig.Ca.extend({g:{x:0,y:0,z:0},size:{x:0,y:0,z:0},Cd:{x:0,y:0,z:0,UM:0,Va:1},qm:{x:0,y:0},vk:{top:0,bottom:0,left:0,right:0},Wj:{x:0,y:0,z:0},Hh:0,wd:q,src:{x:0,y:0},alpha:1,Lc:{x:y,y:y},scale:{x:1,y:1},rotate:0,Db:{x:0,y:0},Ud:{color:q,alpha:0},HD:{color:q,alpha:0},zC:0,jT:y,xx:{},X:y,qg:q,YI:y,RIa:y,f:L("X"),clear:function(a){this.X=a;this.wd=q;this.Cd.x=this.Cd.y=this.Cd.z=this.Cd.UM=0;this.Cd.type=ig.nL.DEFAULT;this.qm.x=this.qm.y=
0;this.Hh=this.Wj.x=this.Wj.y=this.Wj.z=0;this.src.x=this.src.y=0;this.alpha=1;this.Lc.x=this.Lc.y=y;this.scale.x=this.scale.y=1;this.rotate=0;this.Db.x=this.Db.y=0;this.Ud.color=q;this.Ud.alpha=0;this.HD.color=q;this.HD.alpha=0;this.qg=q;this.jT=y;this.vk.top=this.vk.bottom=0;this.vk.left=this.vk.right=0;this.RIa=this.YI=y},ze:function(){this.xx={};ig.oNa.Ua.push(this)},l:function(a,b,c){this.g.x=a;this.g.y=b;this.g.z=c},dMa:function(a,b){this.qm.x=a;this.qm.y=b},gp:function(a,b,c,d){this.vk.top=
a||0;this.vk.bottom=b||0;this.vk.left=c||0;this.vk.right=d||0},Yta:function(a,b,c,d,f,i){this.Cd.x=a;this.Cd.y=b;this.Cd.z=c;this.Cd.Va=i||1;this.Cd.UM=d;this.Cd.type=f||ig.nL.DEFAULT},F:function(a,b,c,d){this.size.x=a;this.size.y=b;this.size.z=c;this.Hh=d||0},Bj:function(a,b,c){this.wd=a;this.src.x=b||0;this.src.y=c||0},AU:function(a,b){this.Lc.x=a||y;this.Lc.y=b||y},Eb:function(a,b){this.Db.x=a;this.Db.y=b},setTransform:function(a,b,c){this.scale.x=a;this.scale.y=b;this.rotate=c},ge:L("alpha"),
tMa:function(a,b){this.Ud.color=a;this.Ud.alpha=b},Sta:function(a,b){this.HD.color=a;this.HD.alpha=b},FH:function(){this.wd=q;this.Yta(0,0,0,0)},yab:function(a,b,c,d,f){var i=a.b,a=i.size.y,i=i.size.z;this.jT=y;if(d==ig.IE.Y_FLAT){c<i&&(i=c);a=c-i;this.jT=h}else if(d==ig.IE.Z_FLAT){a=c;i=0}else{c=c-a-i;if(c>0)switch(d){case ig.IE.Z_EXPAND:i=i+c;break;case ig.IE.Y_EXPAND:a=a+c;break;case ig.IE.YZ_EXPAND:a=a+Math.floor(c/2);i=i+Math.ceil(c/2)}else if(c<0)if(a+c>=0)a=a+c;else{i=i+(c+a);a=0}}this.F(b,
a,i,Math.round((f||0)*a))},V$a:function(a,b,c,d,f,i){this.size.y+this.size.z<c&&(i=i+(c-this.size.y-this.size.z));this.Bj(d,f,i)},zMa:function(a){a=a.b;this.Yta(a.g.x+a.size.x/2,a.g.y+a.size.y/2,a.pc,a.Cd.size,a.Cd.type,a.Cd.Va)},Wta:function(a,b,c,d){var a=a.b,c=a.g.x-(this.size.x-a.size.x)/2,f=a.g.y,i=a.g.z;this.size.y<a.size.y?f=f+(a.size.y-this.size.y):this.size.y>a.size.y&&(f=f-(1-(d||0))*(this.size.y-a.size.y));if(b){c=c+b.x;f=f+b.y;i=i+b.z}this.l(c,f,i)},Bma:function(a){var b=this.g.y-this.size.z+
this.Db.y-a.b.g.y;this.qm.x=this.qm.x-(this.g.x+this.Db.x-a.b.g.x);this.qm.y=this.qm.y-b},HK:function(a,b,c,d,f,i,j,k,l){d=d||ig.IE.NO_EXPAND;this.yab(a,b,c,d,f);this.V$a(a,b,c,j,k,l);this.zMa(a);this.Wta(a,i,d,f)},assign:function(a){Vec3.assign(this.g,a.g);Vec3.assign(this.size,a.size);this.wd=a.wd;Vec3.assign(this.Cd,a.Cd);this.Cd.UM=a.Cd.UM;this.Cd.pp=a.Cd.pp;Vec2.assign(this.qm,a.qm);Vec3.assign(this.Wj,a.Wj);this.Hh=a.Hh;Vec2.assign(this.src,a.src);this.alpha=a.alpha;Vec2.assign(this.Lc,a.Lc);
Vec2.assign(this.scale,a.scale);this.rotate=a.rotate;Vec2.assign(this.Db,a.Db);this.Ud.color=a.Ud.color;this.Ud.alpha=a.Ud.alpha;this.HD.color=a.HD.color;this.HD.alpha=a.HD.alpha;this.qg=a.qg;this.vk.top=a.vk.top;this.vk.bottom=a.vk.bottom;this.vk.left=a.vk.left;this.vk.right=a.vk.right;this.jT=a.jT}});ig.job=ig.Ca.extend({Ua:[],get:function(a){if(this.Ua.length){var b=this.Ua.pop();b.clear(a);return b}return new ig.egb(a)}});ig.oNa=new ig.job});ig.J=h;
ig.N("impact.base.renderer").O("impact.base.image","impact.base.sprite").K(function(){function a(a,b){for(var d=0;d<a.rb[b].Df.length;d++){var c=a.rb[b].Df[d];if(c.enabled){c.oDa&&c.oDa();c.nb()}}}function b(a,b,d){if(ig.Xf.QMb&&a.a0a){var c=ig.r,a=a.Xba;if(c.eua&&a.Cd.UM&&a.Cd.z>=b&&a.Cd.z<d){if(ig.i.context.globalCompositeOperation!="source-over")ig.i.context.globalCompositeOperation="source-over";b=a.g.z+a.Wj.z-a.Cd.z;a.Cd.type==ig.nL.STATIC_SIZE&&(b=0);var f=a.Cd.UM-b/8,d=Math.round(a.Cd.x)-ig.r.screen.x,
i=Math.round(a.Cd.y-a.Cd.z)-ig.r.screen.y;if(f>0&&d-f/2<=ig.i.width||i-f/2<=ig.i.height||d+f/2>=0||i+f/2>=0){b=ig.i.context.globalAlpha;ig.i.context.globalAlpha=ig.i.context.globalAlpha*0.5*a.alpha;if(f<=32){a=(8-Math.floor(f/4)).Rb(0,7);c.eua.XX(d-16,i-16,a,32,32,0,0)}else{ig.i.context.save();ig.i.context.translate(ig.i.qf(d),ig.i.qf(i));d=Math.floor(f/4)*4/224;ig.i.context.scale(d,d*(a.Cd.Va||1));c.eua.nb(-112,-112,0,32,224,224);ig.i.context.restore()}ig.i.context.globalAlpha=b}}}}function c(a,
b,d,c,f){b?a.xx[d]?a.xx[d].RK=f:a.xx[d]=new ig.Sxa.hob(a,c,f):a.xx[d]&&(a.xx[d]=q)}var d={};ig.Sxa=ig.Ca.extend({SK:[],nS:[],f:J(),Q8a:function(a,b){ig.Zq.clear();var d=ig.i.FFa(f);i=d.x+ig.r.screen.x;j=d.y+ig.r.screen.y;k=i+ig.i.width/ig.i.zoom;l=j+ig.i.height/ig.i.zoom;if(b||!ig.r.dra){d=0;this.SK.length=0;for(var t=this.nS.length=0;t<a.length;t++){var p=a[t];if(p&&(p.b.YI||!(p.b.g.x+p.b.size.x+48<i||p.b.g.x-48>k||p.b.g.y-p.b.pc+p.b.size.y+32<j||p.b.g.y-p.b.g.z-p.b.size.z-32>l))){p.Gh();for(var r=
0;r<p.Ua.length;r++){d++;var u=p.Ua[r],w=d,z=u.X?this.nS:this.SK;c(u,u.jT||u.size.z>0||u.Hh>0,"wall",y,w);c(u,!u.jT&&u.size.y>0&&u.Hh<u.size.y,"ground",h,w);var w=u.xx.wall,v=u.xx.ground,x=w&&!v;w&&w.update(x);v&&v.update(!x);if(!ig.Xf.Yp||(!u.wd&&!u.Cd.UM?0:u.YI||(u.scale.x>1||u.scale.y>1||u.rotate)||!(u.g.x+u.Wj.x+u.qm.x+u.size.x<i||u.g.x+u.Wj.x+u.qm.x>k||u.g.y+u.Wj.y+u.qm.y-(u.g.z+u.Wj.z)-u.size.z>l||u.g.y+u.Wj.y+u.qm.y+u.size.y-(u.Cd.UM?u.Cd.z:u.g.z+u.Wj.z)<j))){w&&z.push(w);v&&z.push(v);u.xx.fragment=
u.Ud.color?new ig.Zq(u.wd,u.src.x,u.src.y,u.size.x,u.size.y+u.size.z,u.Ud.color):q;u.xx.lighterFragment=u.HD.color?new ig.Zq(u.wd,u.src.x,u.src.y,u.size.x,u.size.y+u.size.z,u.HD.color):q}}}}}ig.Zq.yK();if(b||!ig.r.dra){this.SK.sort(function(a,b){return a.eV-b.eV||a.RK-b.RK});this.nS.sort(function(a,b){return a.eV-b.eV})}ig.Mp.yyb()},Y_a:function(b,d){var c=ig.r;if(!d){ig.i.context.fillStyle="black";c.clearColor&&ig.i.clear(c.clearColor)}if((b||!ig.r.dra)&&!ig.Wv&&c.Jl>0){a(c,"first");for(var f=-1;f<
c.Jl;++f){f>=0&&a(c,f);this.txb(f)}a(c,"last")}},rDa:function(){var b=ig.r;!ig.Wv&&b.Jl>0&&a(b,"light")},$_a:function(){var b=ig.r;if(!(ig.Wv||b.Jl<=0)){a(b,"postlight");for(var d=0;d<this.nS.length;++d)this.nS[d].nb();if(this.nS.length>0)ig.i.context.globalCompositeOperation="source-over";if(window.Ri)for(var c in b.rb)for(var f in b.rb[c]){d=b.rb[c][f];d instanceof ig.Q9&&(d.z_a&&d.nb)&&d.nb(b.rb[c].height)}}},txb:function(a){if(ig.Xf.xxb){for(var d=ig.r,c=a==-1?-9999999:d.rb[a].height,a=a+1<d.Jl?
d.rb[a+1].height:99999999,d=0;d<this.SK.length;++d){var f=this.SK[d];if(f.vg&&f.Pz==c){b(f,c,a);f.nb(c,a);f.Qza=h}else f.Qza=y}for(var i=[],d=0;d<this.SK.length+1;++d)if(d==this.SK.length)for(;i.length>0;){var j=i.length-1,k=i[j];k.Ibb.nb(c,a);i.splice(j,1);if(k.zq!=-1){d=k.zq-1;break}}else{var f=this.SK[d],l=f.Xba;if(!f.Qza){var z=f.Pz>=a||f.Oz<=c;if(!z||l.Cd.UM&&!(l.Cd.z>=a||l.Cd.z<c)){for(var v=y,j=i.length;j--;){var k=i[j],x=l.g.x+l.Wj.x+l.size.x<=k.mP||l.g.x+l.Wj.x>=k.lP;if(f.eV>k.dI){k.Ibb.nb(c,
a);i.splice(j,1);if(k.zq!=-1){d=k.zq-1;v=h;break}}else if(!x&&l.g.z+l.Wj.z+l.size.z*l.zC>=k.Oz){v=h;k.zq=k.zq==-1?d:Math.min(d,k.zq)}else if(!x&&f.vg)k.dI=Math.max(k.dI,l.g.y+l.Wj.y+l.size.y-ig.lf.Zj)}if(!v){f.Qza=h;if(f.vg){b(f,c,a);z||(!ig.Xf.PMb||l.RIa||l.size.y<l.size.z?f.nb(c,a):i.push({mP:l.g.x+l.Wj.x+ig.lf.Zj,lP:l.g.x+l.Wj.x+l.size.x-ig.lf.Zj,dI:l.g.y+l.Wj.y+l.size.y-l.Hh-ig.lf.Zj,Oz:l.g.z+l.Wj.z+l.size.z-ig.lf.Zj,zq:-1,Ibb:f}))}else{b(f,c,a);f.Pz>=a||f.Oz<=c||f.nb(c,a)}}}}}ig.i.context.globalCompositeOperation=
"source-over"}},rxb:function(a,b,c,f,i,j,k,l){var z=a.kE.length,f=Math.floor(f/a.Mo),v=a.stop?Math.min(f,z-1):f%z,z=a.sheet,f=a.sheet.wd,x=z.Ly(d,a.kE[v]),A=ig.i.context;a.Wca&&(i=i*a.Wca[v]);k==g&&(k=1);l==g&&(l=1);if(v=j||k!=1||l!=1){ig.i.context.save();ig.i.context.translate(ig.i.qf(b+a.Db.x),ig.i.qf(c+a.Db.y));ig.i.context.rotate(j);(k!=1||l!=1)&&ig.i.context.scale(k,l);b=-a.Db.x;c=-a.Db.y}j=a.qg||"source-over";if(j!=A.globalCompositeOperation)A.globalCompositeOperation=j;var F;if(i!=1){F=A.globalAlpha;
A.globalAlpha=A.globalAlpha*i}f.nb(b,c,x.x,x.y,z.width,z.height,a.Lc.x,a.Lc.y);if(i!=1)A.globalAlpha=F;v&&ig.i.context.restore()},aIa:function(){this.SK=[];this.nS=[]}});var f=Vec2.create(),i=0,j=0,k=0,l=0;ig.Sxa.hob=ig.Ca.extend({Xba:q,vg:y,eV:0,Pz:0,Oz:0,RK:0,a0a:y,f:function(a,b,d){this.Xba=a;this.vg=b;this.RK=d},update:function(a){this.a0a=a;a=this.Xba;if(a.X)this.eV=a.g.z+a.Wj.z;else if(this.vg){this.eV=a.g.y+a.Wj.y+ig.lf.Zj;this.Oz=this.Pz=a.g.z+a.Wj.z+a.size.z}else{this.eV=a.g.y+a.Wj.y+a.size.y-
a.Hh;this.Oz=a.g.z+a.Wj.z+(a.size.z||1);this.Pz=a.g.z+a.Wj.z}},nb:function(a,b){var d=this.Xba;if(d.qg)ig.i.context.globalCompositeOperation=d.qg;else if(ig.i.context.globalCompositeOperation!="source-over")ig.i.context.globalCompositeOperation="source-over";if(d.wd){var c=d.g.x+d.Wj.x+d.qm.x,f=d.g.y+d.Wj.y-(d.g.z+d.Wj.z)-d.size.z+d.qm.y,i=0,j=0,k=0,l=d.size.x,v=d.size.y+d.size.z,j=0,x=d.src.x,A=d.src.y;d.Hh<d.size.y&&!this.vg?i=i+(d.size.y-d.Hh):d.Hh<d.size.y&&this.vg&&(j=v-(d.size.y-d.Hh));if(!this.vg&&
a!==g){if(d.g.z+d.Wj.z+d.size.z>b){k=Math.round(d.g.z+d.Wj.z+d.size.z-b);d.rotate&&(k=k-1);i=i+k}else d.jT&&(i=0);d.g.z+d.Wj.z<a&&(j=j+(v-Math.round(v-(a-(d.g.z+d.Wj.z)+d.Hh))))}d.vk.top&&(i=Math.max(d.vk.top,i));d.vk.bottom&&(j=Math.max(j,d.vk.bottom));v=v-(j+i);if(d.Lc.x){j=d.vk.left;k=d.vk.right}else j=k=d.vk.left;l=l-(d.vk.left+d.vk.right);if(!(l<=0||v<=0||d.scale.x==0||d.scale.y==0||d.alpha<=0)){var c=Math.round(c)-ig.r.screen.x,f=Math.round(f)-ig.r.screen.y,F=ig.i.context.globalAlpha,B=F*d.alpha,
C=y;if(d.alpha!=1){C=h;ig.i.context.globalAlpha=B}var K=d.rotate!=0||d.scale.x!=1||d.scale.y!=1;if(K){ig.i.context.save();ig.i.context.translate(ig.i.qf(c+d.Db.x),ig.i.qf(f+d.Db.y));ig.i.context.rotate(d.rotate);ig.i.context.scale(d.scale.x,d.scale.y);c=-d.Db.x;f=-d.Db.y}if(!(d.xx.fragment&&d.Ud.alpha==1))if(d.wd instanceof ig.ia||d.wd instanceof ig.Pwa)d.wd.nb(c+j,f+i,x+k,A+i,l,v,d.Lc.x,d.Lc.y);else if(d.wd instanceof ig.nf)d.wd.nb(c+j,f+i,x+k,A+i,l,v);else if(d.wd instanceof ig.Knb||d.wd instanceof
ig.Jnb||d.wd instanceof ig.fQa||d.wd instanceof ig.Oka||d.wd instanceof ig.pwa){x=d.wd;x instanceof ig.pwa&&(x=this.vg?x.vX:x.wX);x.nb(c+j,f+i,l,v)}if(d.xx.fragment){if(d.Ud.alpha!=1){ig.i.context.globalAlpha=B*d.Ud.alpha;C=h}d.xx.fragment.nb(c+j,f+i,k,i,l,v,d.Lc.x,d.Lc.y)}if(d.xx.lighterFragment){x=ig.i.context.globalCompositeOperation;ig.i.context.globalCompositeOperation="lighter";if(d.HD.alpha!=1){ig.i.context.globalAlpha=B*d.HD.alpha;C=h}d.xx.lighterFragment.nb(c+j,f+i,k,i,l,v,d.Lc.x,d.Lc.y);
ig.i.context.globalCompositeOperation=x}K&&ig.i.context.restore();if(C)ig.i.context.globalAlpha=F}}}})});ig.J=h;
ig.N("impact.base.physics").O("impact.base.entity","impact.base.coll-entry").K(function(){function a(a,b){a.g.z=b;a.aa=ig.r.Hy(a.g.z)}var b=Vec2.create(),c=Vec2.create(),d=Vec2.create(),f={},i={},j=[],k=[];Vec2.create();var l=Vec2.create();ig.xlb=ig.Ca.extend({Io:64,PC:[],A3:[],Tl:[],Gaa:0,B2:y,aIa:function(){this.Tl.length=0;this.PC.length=0},q6a:function(){var a=ig.r.size.y;this.Tl.width=Math.ceil(ig.r.size.x/this.Io);this.Tl.height=Math.ceil(a/this.Io)+16;for(a=0;a<this.Tl.width;++a){this.Tl[a]=
[];for(var b=0;b<this.Tl.height;++b)this.Tl[a][b]=[]}this.PC.length=0},update:function(){this.Gaa=this.Gaa%100;this.Gaa++;for(var a=[],b=this.A3.length;b--;){var d=this.A3[b];if(d.qw==ig.jk.gv)this.A3.splice(b,1);else if(d.qw==ig.jk.RE||d.qw==ig.jk.uxa&&ig.qd.ut(d,16)){this.A3.splice(b,1);this.PC.push(d)}}for(b=this.PC.length;b--;){d=this.PC[b];this.uva(d,a);if(d.qw==ig.jk.gv)this.PC.splice(b,1);else if(d.qw==ig.jk.uxa&&!ig.qd.ut(d,16)){this.PC.splice(b,1);this.A3.push(d)}}for(b=a.length;b--;){for(var d=
a[b],c=d.mA.length;c--;){var f=d.mA[c],i=d.S$[c];if(!d.Ve&&!f.Ve){if(d.di>=0&&i&&i.ug){var j=f.di==-1||d.di==0?1:Math.min(1,f.di/d.di*0.5);d.Ku.x=i.x*i.ug/ig.i.Sa*j;d.Ku.y=i.y*i.ug/ig.i.Sa*j;f.Nc.$sa=d}d.Q.oq(f.Q,i||q)}}d.mA.length=0;d.S$.length=0}ig.i.Ir=ig.i.ja;a=this.PC;for(b=0;b<a.length;b++){c=a[b];if(d=c.Q)if(c=c.Nc){ig.i.ja=d.b.qD(y);d.oS(c)}}ig.i.ja=ig.i.Ir},uva:function(a,b){if(a.NI&&a.bI!=this.Gaa){a.bI=this.Gaa;ig.profile.tOb++;if(!a.Ve){ig.ma.Ega(a.Q);a.xi&&this.uva(a.xi,b);a.Nc&&a.Nc.Mj&&
this.uva(a.Nc.Mj,b);if(a.Nc&&a.Nc.$sa){this.uva(a.Nc.$sa,b);a.Nc.$sa=q}ig.i.Ir=ig.i.ja;var d=a.qD(y),c=a.qD(y,h),f=a.Q,i=0;f.Ya&&f.Ya.RFa()&&(i=a.qD(h));if(d||c||i){ig.i.ja=d;f.update();ig.i.ja=c;this.nx(a,b)}if(i){ig.i.ja=i;f.Ya.update(f,f.iBa)}ig.i.ja=ig.i.Ir;ig.ma.Z6(a.Q)}}},Br:function(a,b,d,c,f,i,j,k,l){var v=Math.floor(a/this.Io).Rb(0,this.Tl.width),x=Math.floor(b/this.Io).Rb(0,this.Tl.height),A=(Math.floor((a+c)/this.Io)+1).Rb(0,this.Tl.width),F=(Math.floor((b+f)/this.Io)+1).Rb(0,this.Tl.height),
B=[];if(!this.Tl.length)return B;for(;v<A;v++)for(var C=x;C<F;C++)for(var K=this.Tl[v][C],I=K.length;I--;){var G=K[I],D=G.Q;if(!(G.qn.length>0)){var E=G.xi&&G.xi.Q;D&&(!j||D!=j)&&(!k||k.indexOf(D)==-1)&&(!E||(!E||E!=j)&&(!k||k.indexOf(E)==-1))&&B.indexOf(D)==-1&&G.FS(a,b,d,c,f,i,y,q,l)&&B.push(D)}}return B},lN:function(a,b,c,i,j,k,l,w,z,v,x){Vec2.assign(d,a);for(var w=this.Br(a.x-b,a.y-c*b,a.z,b*2,c*b*2,i,w,z),z=[],A=a.z,i=a.z+i,F=w.length;F--;){var B=w[F],C=B.b;if(!(C.g.z>=i||C.g.z+C.size.z<=A)){Vec2.assign(d,
C.g);d.x=d.x-C.padding.x<=a.x&&d.x+C.padding.x+C.size.x>=a.x?a.x:d.x+C.padding.x+C.size.x<a.x?d.x+(C.size.x+C.padding.x):d.x-C.padding.x;if(d.y-C.padding.y<=a.y&&d.y+C.padding.y+C.size.y>=a.y)d.y=a.y;else if(d.y+C.padding.y+C.size.y<a.y)d.y=d.y+(C.padding.y+C.size.y);Vec2.sub(d,a);d.y=d.y/c;var K=Vec2.length(d);if(v||!(K>b)){d.y=d.y*c;if(!j||Vec2.lDb(d,j,k,l)){if(x){var I=ig.r.Ie.Il(f);if(C.padding.x||C.padding.y){if(d.x)d.x=d.x+(d.x>0?1:-1)*C.padding.x;if(d.y)d.y=d.y+(d.y>0?1:-1)*C.padding.y;K=Vec2.length(d)}this.trace(I,
a.x-1,a.y-1,Math.max(a.z,C.g.z),d.x,d.y,2,2,2,ig.ca.IGNORE,C);if(K*(1-I.Ne)>8)continue}z.push(B)}}}}return z},Il:function(a){if(!a.dir)a.dir=Vec2.create();Vec2.Oa(a.dir,0,0);a.Ne=1;a.Oea=y;a.mY=q;a.Goa=q;return a},trace:function(a,b,d,c,f,i,j,k,l,v,x,A,F){for(var B=ig.r,C=B.Jl-1;C&&B.rb[C].height>c;)--C;for(var K=C+1<B.Jl&&c+l>B.rb[C+1].height,I=x&&x.Nc&&x.Nc.ou,G=Math.max(1,Math.ceil(Math.max(Math.abs(f),Math.abs(i))/16)),D=x&&x.type==ig.ca.TRIGGER,E=G,f=f/G,i=i/G,H=y,Q=F&&K&&B.rb[C+1].height-c<=
ig.lf.Rt,E=0;E<G;E++){var P=-1;if(!I&&!D){if(!a.Oea)if((H=B.rb[C].collision.trace(a,b,d-B.rb[C].height,f,i,j,k,h))&&Q){H=y;P=a.Ne;a.Ne=1}K&&(H=B.rb[C+1].collision.trace(a,b,d-B.rb[C+1].height,f,i,j,k,h,P==-1)||H)}H=this.WNb(a,b,d,c,f,i,j,k,l,v,x,A,F)||H;if(P!=-1)a.Oea=a.Oea||a.Ne>P;if(H){a.Ne=(E+a.Ne)/G;return h}a.Ne=1;b=b+f;d=d+i}a.Ne=1;return y},Mtb:function(a){a.NI=h;this.nYa(a);this.RW(a)},SIb:function(a){a.NI=y;this.WIb(a);this.n7(a)},nYa:function(a){this.PC.push(a)},WIb:function(a){this.PC.ye(a)},
RW:function(a){if(!a.xC&&!(a.type==ig.ca.NONE||a.type==ig.ca.PASSIVE)){a.xC=h;for(var b=Math.max(0,Math.floor((a.g.x-a.padding.x*2)/this.Io)),d=Math.max(0,Math.floor((a.g.y-a.padding.y*2)/this.Io)),c=Math.min(this.Tl.width,Math.floor((a.g.x+a.size.x+a.padding.x*2)/this.Io)+1),f=Math.min(this.Tl.height,Math.floor((a.g.y+a.size.y+a.padding.y*2)/this.Io)+1);c-- >b;)for(var i=f;i-- >d;)this.Tl[c][i].indexOf(a)==-1&&this.Tl[c][i].push(a)}},n7:function(a){if(a.xC){a.xC=y;for(var b=Math.max(0,Math.floor((a.g.x-
a.padding.x*2)/this.Io)),d=Math.max(0,Math.floor((a.g.y-a.padding.y*2)/this.Io)),c=Math.min(this.Tl.width,Math.floor((a.g.x+a.size.x+a.padding.x*2)/this.Io)+1),f=Math.min(this.Tl.height,Math.floor((a.g.y+a.size.y+a.padding.y*2)/this.Io)+1);c-- >b;)for(var i=f;i-- >d;){var j=this.Tl[c][i].indexOf(a);j!=-1&&this.Tl[c][i].splice(j,1)}}},nx:function(d,i){var o=!d.type&&!d.Cd&&!d.Fd;ig.profile.nx++;var t=d.j4a(),p=d.Nc;p.KA=y;p.bNa=y;if(p.V7){p.V7=y;Vec2.Oa(l,0,0);t=Math.abs(d.g.z-d.pc)<ig.lf.Zj;this.NOa(d,
l,t,0,y);p.ou=y}else{if(ig.r.mu)p.Via=y;if(!p.ou){p.Vk.x=0;p.Vk.y=0;p.Vk.z=0}var r=d.g.x,u=d.g.y,w;w=p.ou?Vec2.assign(l,p.Vk):Vec2.Bk(Vec2.add(d.V,d.Ku,l),ig.i.ja);var z=w.x!=0||w.y!=0;(isNaN(w.x)||isNaN(w.y))&&e(Error("NaN!"));if(!t&&!p.ou&&w.x==0&&w.y==0&&d.V.z==0&&d.Fd==0&&d.Cd==0)p.ou=y;else{d.Ku.x=0;d.Ku.y=0;if(p.Mj){var v=p.Mj;if(v.$m&&v.g.z+v.size.z>=d.g.z&&d.V.z<=0)if(v.$m==ig.rp.EAST_UP||v.$m==ig.rp.WEST_UP){w.x=w.x/(1+v.size.z/v.size.x/2);if(v.size.z/v.size.x>4)d.Ku.x=d.Ku.x+200*(v.$m==
ig.rp.EAST_UP?-1:1)}else if(v.$m==ig.rp.NORTH_UP||v.$m==ig.rp.SOUTH_UP){w.y=w.y/(1+v.size.z/v.size.y/2);if(v.size.z/v.size.y>4)d.Ku.y=d.Ku.y+200*(v.$m==ig.rp.SOUTH_UP?-1:1)}if(!d.Dda&&!d.yd.height){if(!z){p.zs.x=Math.round(p.zs.x);p.zs.y=Math.round(p.zs.y)}w.x=w.x+(v.g.x+p.zs.x-r);w.y=w.y+(v.g.y+p.zs.y-u)}if(v.Nc){d.pc=d.pc+v.Nc.Vk.z;r=d.g.z+v.Nc.Vk.z;if(v.Nc.Vk.z<0&&p.Mn.eT!=2&&d.aa>=0){u=ig.r.rb[d.aa].height;if(r<u){r=u;d.pc=u}}p.Vk.z=r-d.g.z;a(d,r);p.Mn.eY=p.Mn.eY+v.Nc.Vk.z}}if((v=p.jH)&&(d.di!=
-1&&!v.rm)&&v.g.z+v.size.z>d.g.z){if(v.xi)v=v.xi;r=ig.qd.Wk(v,d,c);u=q;if(!Vec2.Ig(v.wb)&&Vec2.Ig(d.wb)){u=Vec2.assign(b,v.wb);Vec2.hz(u);Vec2.ug(r,u)<0&&Vec2.Lc(u)}if((r.x>0?v.g.x+v.size.x-d.g.x:d.g.x+d.size.x-v.g.x)>(r.y>0?v.g.y+v.size.y-d.g.y:d.g.y+d.size.y-v.g.y)){r.x=0;if(!r.y)r.y=1}else{r.y=0;if(!r.x)r.x=1}if(v.type==ig.ca.BLOCK)w.x=w.y=0;var x=Vec2.length(r)-v.size.y/2,x=x<=0?1:Math.max(0.1,1-0.9*x/d.size.y),x=x*p.aKa;u&&(r=u);Vec2.length(r,ig.i.ja*128*x);if(!Vec2.Ig(v.wb)||Vec2.ug(d.wb,r)>=
0||v.type==ig.ca.BLOCK){z=h;Vec2.add(w,r)}}if(!p.tbb&&!p.ou&&!t&&w.x==0&&w.y==0&&!d.V.z&&(o||d.g.z==d.pc&&!p.Nva&&!p.Mj&&!p.Mn.eT&&!d.yd.height&&!p.jH)){d.Vs=0;d.Zo=0}else{v=d.V.z;t=Math.abs(d.g.z-d.pc)<ig.lf.Zj;z=this.aFb(d,w,t)||z;o=this.Il(f);o.mY=j;o.mY.length=0;o.Goa=k;o.Goa.length=0;p.tbb?p.tbb=y:this.O6a(o,d,w,i);this.NOa(d,w,t,v,z);this.RW(d);if(o.mY.length>0)for(w=o.mY.length;w--;)this.Pyb(o.mY[w],d,o.Goa[w]);p.ou=y}}}},O6a:function(b,d,f,i,j){var k=d.Nc;if(f.x==0&&f.y==0){d.Vs=0;d.Zo=0;
if(!j){k.Vk.x=0;k.Vk.y=0}return y}var l=d.g.x,w=d.g.y,z=Math.sqrt(f.x*f.x+f.y*f.y);this.n7(d);var v=d.g.z-d.pc<ig.lf.Zj;if(d.type){var x=y,A=d.Vm?1:3,F=h;do{A--;if(!d.rm&&(!d.xi||!d.xi.rm)){this.B2=h;x=this.trace(b,l,w,d.g.z,f.x,f.y,d.size.x,d.size.y,d.size.z,d.type,d,i,v);this.B2=y;if(!x&&F){d.Vs=0;d.Zo=0}F=y}else{d.Vs=0;d.Zo=0}if(b.Ne>0&&Math.abs(d.wb.x*b.dir.x+d.wb.y*b.dir.y)<0.8)d.Vs=0;if(b.Oea){a(d,ig.r.rb[d.aa+1].height);b.Oea=y}if(x&&A){if(!j)k.KA=k.KA||x;var B=b.dir.y*f.x-b.dir.x*f.y,l=l+
b.Ne*f.x,w=w+b.Ne*f.y,z=z*(1-b.Ne);f.x=(1-b.Ne)*b.dir.y*B;f.y=(1-b.Ne)*-b.dir.x*B;b.Ne=1;if(b.uz||b.vz){B=Vec2.Oa(c,b.uz,b.vz);if(Vec2.Ig(d.wb)||Vec2.Qb(d.wb,B)<=Math.PI*0.6){Vec2.length(B,z-Math.sqrt(f.x*f.x+f.y*f.y));f.x=f.x+B.x;f.y=f.y+B.y;B=1;b.uz>0&&f.x>b.uz?B=Math.min(B,b.uz/f.x):b.uz<0&&f.x<b.uz&&(B=Math.min(B,b.uz/f.x));b.vz>0&&f.y>b.vz?B=Math.min(B,b.vz/f.y):b.vz<0&&f.y<b.vz&&(B=Math.min(B,b.vz/f.y));if(B<1){f.x=f.x*B;f.y=f.y*B}if(!j)k.bNa=h}}delete b.uz;delete b.vz}}while(x&&A&&(f.x!=0||
f.y!=0));if(!j){k.KA=k.KA||x;k.Cm.x=b.dir.x;k.Cm.y=b.dir.y}}else{d.Vs=0;d.Zo=0}if(d.Zo<0)d.Zo=0;window.Ivb();l=l+b.Ne*f.x;w=w+b.Ne*f.y;l=Math.round(l*100)/100;w=Math.round(w*100)/100;if(!j){k.Vk.x=l-d.g.x;k.Vk.y=w-d.g.y}(isNaN(l)||isNaN(w))&&e(Error("NaN!"));d.g.x=l;d.g.y=w;return x},M4a:function(a){return this.LFa?this.LFa(a):y},yDb:function(a){return this.MFa?this.MFa(a):y},LFa:q,MFa:q,aFb:function(c,f,i){var j=y,k=c.g.x,l=c.g.y,u=c.Nc,w=ig.r.rb[c.aa]||ig.r.rb[0];if(i&&(c.Fd>0&&!c.Cra&&!u.ou)&&
(u.Mn.eT==1||u.Mj)){var i=Vec2.Oa(b,0,0),z=k+c.size.x*0.9/2,v=l+c.size.y*0.9/2,x=c.size.x*0.1,A=c.size.y*0.1,F=c.g.z-w.height,B=1E3;u.Mn.eT==2&&(F=F+16);this.M4a(c)&&(F=F+16);if(u.Mn.eT==1&&w.collision.YJ(z,v-w.height,x,A)){w=Vec2.assign(d,u.Mn.cIa);c.aN&&Vec2.Lc(w);Vec2.ug(c.wb,w)>=0&&Vec2.add(i,w);if(u.Mj||!this.hpa(z,v,x,A,c.size.z,c.g.z,c.g.z-ig.lf.Rt,c))F=F+16}if(u.Mj){var w=u.Mj.$m?u.Mj.g.z:c.g.z,C=u.Mj.g.x+u.zs.x-k,K=u.Mj.g.y+u.zs.y-l;if(!u.Mj.$m&&!this.hpa(z+C,v+K,x,A,c.size.z,c.g.z,w-ig.lf.Rt,
c)){w=Vec2.assign(d,u.Mn.EJ);c.aN&&Vec2.Lc(w);Vec2.ug(c.wb,w)>=0&&Vec2.add(i,w);B=Math.min(B,u.Mn.t4)}else F=0}if((i.x!=0||i.y!=0)&&!u.jH&&F>ig.lf.Rt&&Vec2.ug(c.wb,i)>=0){c.ZN&&c.ZN(i);if(c.V.z<=0){Vec2.length(i,Math.min(B,32*ig.i.ja));j=h;f.x=f.x+i.x;f.y=f.y+i.y;if(Math.sqrt(f.x*f.x+f.y*f.y)>B&&c.wb.x==0&&c.wb.y==0){f.x=i.x;f.y=i.y}}}}z=-ig.r.gB*c.Fd;f=1E3;i=-1E3;if(c.yd.height){v=ig.r.gB/5*c.yd.er;x=ig.r.gB*4*c.yd.er;f=Math.max(c.V.z,c.yd.Mh);i=Math.min(c.V.z,-c.yd.Mh);F=c.yd.yl;A=c.yd.height+c.pc-
c.g.z;Math.abs(A)<=F*2&&(v=v/6);B=c.V.z*c.V.z;if(F==0&&Math.abs(A)<1&&Math.abs(c.V.z)<50){z=0;c.V.z=0}else if(!(A-F<0&&c.V.z<0)&&(A>=0||A+F>0&&c.V.z>0)){z=0.5*B/(A+F);z=c.V.z>0&&(z>=v||A<=0)?-z.Rb(v/4,x):v}else if(A<0||A-F<0&&c.V.z<0){z=0.5*B/(-A+F);z=c.V.z<0&&(z>=v||A>=0)?z.Rb(v/4,x):-v}}if(!u.Nva&&(u.ou||c.g.z>c.pc||c.V.z!=0||z>0)){v=u.ou?c.g.z+u.Vk.z:c.g.z+c.V.z*ig.i.ja+z*ig.i.ja*ig.i.ja*0.5;if(!u.ou&&c.V.z>0&&!c.rm){if(c.aa+1<ig.r.Jl&&v+c.size.z>ig.r.rb[c.aa+1].height-1&&!ig.r.rb[c.aa+1].collision.YJ(k,
l-ig.r.rb[c.aa+1].height,c.size.x,c.size.y)){v=ig.r.rb[c.aa+1].height-1-c.size.z;c.V.z=0}if(u.mX&&v+c.size.z>u.mX.g.z){v=u.mX.g.z-c.size.z;c.V.z=0}}if(!u.ou&&v<=c.pc){c.V.z=c.g.z>c.pc&&-c.V.z>c.lra?c.V.z*-c.kj:0;v=c.pc}if(!u.ou)u.Vk.z=u.Vk.z+(v-c.g.z);a(c,v);c.V.z=c.V.z+z*ig.i.ja;if(c.V.z>f)c.V.z=f;if(c.V.z<i)c.V.z=i}if(c.wb.x||c.wb.y){c.Vs=c.Vs+ig.i.ja;c.Zo=c.Zo+ig.i.ja}else{c.Vs=0;c.Zo=0}return j},Pyb:function(a,b,d,c){var f=Vec2.Oa(l,0,0);if(d.x>0)f.x=Math.max(0,b.g.x+b.size.x-a.g.x);else if(d.x<
0)f.x=Math.min(0,b.g.x-a.g.x-a.size.x);if(d.y>0)f.y=Math.max(0,b.g.y+b.size.y-a.g.y);else if(d.y<0)f.y=Math.min(0,b.g.y-a.g.y-a.size.y);if(!(f.x==0&&f.y==0)){a.j4a();if(!a.Nc.Mj||!(a.Nc.Mj.xi&&a.Nc.Mj.xi==b.xi)){var j=this.Il(i),d=a.Vs,k=a.Zo,c=this.O6a(j,a,f,c,h);a.Vs=d;a.Zo=k;this.NOa(a,f,Math.abs(a.g.z-a.pc)<ig.lf.Zj,a.V.z,h);this.RW(a);c&&a.Q.Q7a&&a.Q.Q7a(b.Q)}}},NOa:function(b,d,c,f,i){var j=b.Nc,k=b.pc,l=!c&&b.g.z==b.pc,z=this.nOb(b,b.g.x,b.g.y,j);if(b.Fd&&b.g.z<b.pc){j.Vk.z=j.Vk.z+(b.pc-b.g.z);
a(b,b.pc);j.Via=h}var v=z||j.Mj,d=v&&v.$m?Math.max(Math.abs(d.x),Math.abs(d.y))+2:ig.lf.Rt;if(!j.ou&&b.Fd){v=b.g.z-b.pc<ig.lf.Zj;if(!v&&l&&b.g.z-b.pc<d){v=h;a(b,b.pc)}if(c&&b.V.z<=0)if(v)j.Mn.RDa&&b.Q.ZN&&b.Q.ZN();else if(b.g.z-b.pc>d||this.M4a(b))b.Q.ZN&&b.Q.ZN();else{a(b,b.pc);j.Via=h}else b.yd.height&&k-b.pc>ig.lf.Rt&&b.g.z-k<b.yd.height+b.yd.yl?b.Q.ZN&&b.Q.ZN():!c&&v&&b.Q.hH&&b.Q.hH(f)}else z=q;(j.Mj!=z||i||j.KA)&&b.sha(z)},nOb:function(a,b,d,c){var f=ig.r.rb[a.aa]||ig.r.rb[0];a.pc=a.aa>=0?f.height:
-1E3;Vec2.Oa(c.Mn.cIa,0,0);c.Mn.eT=f.collision.YJ(b,d-f.height,a.size.x,a.size.y,c.Mn.cIa);f=a.aa;if(f>=0&&c.Mn.eT==2)for(--f;f>=0&&ig.r.rb[f].collision.YJ(b,d-ig.r.rb[f].height,a.size.x,a.size.y);)--f;a.pc=f>=0?ig.r.rb[f].height:-1E3;c.Nva=y;Vec2.Oa(c.Mn.EJ,0,0);c.Mn.eY=0;c.Mn.t4=1E4;c.jH=q;c.mX=q;c.Mn.RDa=y;if(b=this.hpa(b,d,a.size.x,a.size.y,a.size.z,a.g.z,a.pc,a,c)){d=b.$m?32:ig.lf.Rt;f=this.yDb(b);if(a.pc==a.g.z&&a.pc==c.Mn.eY&&f)b=q;else{if(a.pc<c.Mn.eY)a.pc=c.Mn.eY;a.Fd&&a.g.z-a.pc<=d?c.Mn.RDa=
f:a.yd.height||(b=q)}}return b},x1a:function(a,b,d,c,f){for(var i=ig.r.Hy(d);i>=0&&ig.r.rb[i].collision.YJ(a,b-ig.r.rb[i].height,c,f);)--i;i=i>=0?ig.r.rb[i].height:-1E3;return(a=this.hpa(a,b,c,f,8,d,i))?a.g.z+a.size.z:i},WNb:function(a,b,d,c,f,i,j,k,l,v,x,A,F){for(var B=[],C=[],K=y,I=Math.max(0,Math.floor((b+(f<0?f:0))/this.Io)),G=Math.max(0,Math.floor((d+(i<0?i:0))/this.Io)),D=Math.min(this.Tl.width,Math.floor((b+(f>0?f:0)+j)/this.Io)+1),E=Math.min(this.Tl.height,Math.floor((d+(i>0?i:0)+k)/this.Io)+
1),H=[],Q=[],P=1,K=y,U=x&&x.Nc&&x.Nc.ou,T=U||x&&(v==ig.ca.BLOCK||v==ig.ca.FENCE)&&x.di==-1,V=x&&x.xi?x.xi:x,R=x&&x.shape!=ig.Tf.RECTANGLE,W=I;W<D;W++)for(var X=G;X<E;X++)for(var Z=this.Tl[W][X],I=Z.length;I--;){var O=Z[I];if(O.xC){if(B.indexOf(O)==-1&&O!=V&&(!O.xi||O.xi!=V)){B.push(O);if(O.rm||O.xi&&O.xi.rm||!ig.Kc.rf[v][O.type])C.push(O);else{var ba=a.Ne,ja;if(R)(ja=x.trace(a,O.g.x,O.g.y,O.g.z,-f,-i,O.size.x,O.size.y,O.size.z,F))&&Vec2.Lc(a.dir);else ja=O.trace(a,b,d,c,f,i,j,k,l,F);if(ja){if(a.mY&&
T&&O.type!=ig.ca.BLOCK&&(O.di!=-1||O.type==ig.ca.PROJECTILE)){a.Ne=ba;a.mY.push(O);a.Goa.push(ig.copy(a.dir))}else if(U)a.Ne=ba;else{if(P>a.Ne){P=a.Ne;H=[];Q=[]}K=h}H.push(O);Q.push({x:a.dir.x,y:a.dir.y})}else if(O.FS(b,d,c,j,k,l)){H.push(O);Q.push({x:0,y:0})}}}}else Z.splice(I,1)}if(A){a=y;for(I=H.length;I--;){O=H[I];v=Q[I];A.indexOf(O)==-1&&A.push(O);if(x&&this.B2){a=h;B=O.mA.indexOf(x);if(B==-1){B=O.mA.length;O.mA.push(x)}if(!O.S$[B]){v.ug=v.x*f+v.y*i;O.S$[B]=v}x.mA.indexOf(O)==-1&&x.mA.push(O)}}if(this.B2){H=
{Ne:1,dir:{x:0,y:0}};for(I=C.length;I--;){O=C[I];H.Ne=P;if(O.trace(H,b,d,c,f,i,j,k,l,F)||O.FS(b,d,c,j,k,l)){A.indexOf(O)==-1&&A.push(O);if(x){a=h;O.mA.indexOf(x)==-1&&O.mA.push(x);x.mA.indexOf(O)==-1&&x.mA.push(O)}}}x&&(a&&A.indexOf(x)==-1)&&A.push(x)}}return K},hpa:function(a,b,d,c,f,i,j,k,l){for(var v=l&&l.Mn,x=y,A=0,F=Math.max(0,Math.floor(a/this.Io)),B=Math.max(0,Math.floor(b/this.Io)),C=Math.min(this.Tl.width,Math.floor((a+d)/this.Io)+1),K=Math.min(this.Tl.height,Math.floor((b+c)/this.Io)+1),
I=k&&k.type==ig.ca.SEMI_IGNORE;F<C;F++)for(var G=B;G<K;G++)for(var D=this.Tl[F][G].length;D--;){var E=this.Tl[F][G][D],H=E.xi||E;if(E!=k&&!H.rm&&(!k||E.xi!=k)&&(E.type==ig.ca.NPBLOCK||E.type==ig.ca.BLOCK||E.type==ig.ca.FENCE||E.type==ig.ca.NPFENCE||!I&&E.type==ig.ca.VIRTUAL||I&&E.type==ig.ca.SEMI_IGNORE)){var H=E.g.x+E.size.x-a,Q=a+d-E.g.x,P=E.g.y+E.size.y-b,U=b+c-E.g.y,T=Math.min(Math.min(H,Q),Math.min(U,P)),V=1;if(T>0){var R=E.g.z+E.v2a(a,b,d,c);if(i+f-ig.lf.Zj>E.g.z&&R>=j){if(I&&E.type==ig.ca.SEMI_IGNORE)if(T<
k.size.x/4)continue;else V=0.2;if(!E.$m&&R-ig.lf.Zj>i+ig.lf.Rt){if((E.shape==ig.Tf.RECTANGLE||ig.sP.wqa(E.g.x+E.size.x/2,E.g.y+E.size.y/2,E.shape,a,b,d,c))&&v&&k&&!k.$m&&k.shape==ig.Tf.RECTANGLE&&!k.rm&&!E.rm&&(k.type==ig.ca.BLOCK||k.type==ig.ca.NPBLOCK||k.type==ig.ca.VIRTUAL||I)){H=E.Nc;if(!(H&&H.Mj==k)){if(!l.jH||l.jH.size.x<E.size.x){l.aKa=V;l.jH=E}if(H&&(!H.jH||H.jH.size.x<k.size.x)){H.jH=k;H.aKa=V}}}}else if(E.type==ig.ca.BLOCK||E.type==ig.ca.NPBLOCK){var W=0,X=V=0,Z=T;if(E.shape!=ig.Tf.RECTANGLE){var O=
E.g.x+E.size.x/2,ba=E.g.y+E.size.y/2;switch(E.shape){case ig.Tf.SLOPE_NE:W=a-O-(b+c-ba);V=1;X=-1;break;case ig.Tf.SLOPE_SE:W=a-O+(b-ba);X=V=1;break;case ig.Tf.SLOPE_SW:W=-(a+d-O)+(b-ba);V=-1;X=1;break;case ig.Tf.SLOPE_NW:W=-(a+d-O)-(b+c-ba);X=V=-1}if(W>=-ig.lf.Zj)continue;W=W*-Math.SQRT1_2;Z=Math.min(Z,W)}if(v){W=ig.qd.PAb(E,a,b,d,c);if(R>j){j=R;v.EJ.x=0;v.EJ.y=0;v.t4=1E5}else if(x&&W<A)continue;A=W;if(T==Z)if(T==P){V=0;X=1}else if(T==U){V=0;X=-1}else if(T==H){V=1;X=0}else if(T==Q){V=-1;X=0}if(Z<
v.t4)if(v.EJ.x*V+v.EJ.y*X<0){v.EJ.x=0;v.EJ.y=0;v.t4=0}else{v.EJ.x=V;v.EJ.y=X;v.t4=Z}v.eY=R;x=E}else return E}}else if(i+f<=E.g.z&&(E.type==ig.ca.BLOCK||E.type==ig.ca.NPBLOCK))if(l&&(!l.mX||l.mX.g.z<E.g.z))l.mX=E}}}return x}})});ig.J=h;
ig.N("impact.base.game-state").K(function(){ig.x9=ig.Ca.extend({r:{screen:{x:0,y:0},size:{x:0,y:0},paused:y,entities:[],bra:[],ln:[],H4:[],Is:{},kQ:[],H3:[],Df:[],rb:{},Jl:0,Xy:0,yt:0},i:{qp:{x:0,y:0},zoom:1},Ie:{PC:[],A3:[],Tl:[]},oKa:y,to:{SK:[],nS:[]},f:J(),clear:function(){ig.r.pushState(this);for(var a=this.r.entities,b=a.length;b--;){a[b]&&a[b].ze(h);a[b]&&!a[b].Ve&&e(Error("Entity of id "+this.entities[b].id+" was not properly killed"))}ig.r.WCa();ig.r.b_()},BGa:function(a,b){this.r.size.x=
a;this.r.size.y=b;this.r.Jl=1;this.r.yt=0;this.r.rb.first={Df:[]};this.r.rb.last={Df:[]};this.r.rb.light={Df:[]};this.r.rb.postlight={Df:[]};this.r.rb.object1={Df:[]};this.r.rb.object2={Df:[]};this.r.rb.object3={Df:[]};this.r.rb["0"]={height:0,collision:ig.$j.Collision.acb,Df:[]}},SCb:function(a){this.Zy(a);this.oKa=h},XR:function(){ig.i.Ir=ig.i.ja;ig.i.ja=ig.i.Sa;var a=ig.r;ig.r.pushState(this);a.Ie.update();a.WCa();ig.r.b_();ig.i.ja=ig.i.Ir},Nyb:function(a,b){var c=ig.r;this.r.screen.x=this.r.screen.x-
a;this.r.screen.y=this.r.screen.y-b;ig.r.pushState(this);c.to.Q8a(c.ln,h);c.to.Y_a(h,h);c.to.$_a(h);ig.r.b_();this.r.screen.x=this.r.screen.x+a;this.r.screen.y=this.r.screen.y+b},Zy:function(a){for(var b in this.r)this.r[b]=a[b];for(b in this.i)this.i[b]=ig.i[b];for(b in this.Ie)this.Ie[b]=a.Ie[b];for(b in this.to)this.to[b]=a.to[b]},y6:function(a){for(var b in this.r)a[b]=this.r[b];for(b in this.i)ig.i[b]=this.i[b];for(b in this.Ie)a.Ie[b]=this.Ie[b];for(b in this.to)a.to[b]=this.to[b];if(!this.oKa){a.Ie.q6a();
this.oKa=h}}})});ig.J=h;
ig.N("impact.base.map").K(function(){var a=Vec2.create();ig.Q9=ig.Ca.extend({Bb:8,width:1,height:1,data:[[]],kf:0,jPa:0,nT:{x:0,y:0},f:function(a,c){this.Bb=a.tilesize;var d=a.data;this.height=(this.data=d)&&d.length;this.width=d&&d[0].length;this.repeat=a.repeat;this.eb=a.distance;this.Mva=a.yDistance||0;this.kf=c;this.jPa=this.kf/this.Bb;this.nT=a&&a.moveSpeed||this.nT},copy:function(a){this.Bb=a.Bb;this.data=[];for(var c=0;c<a.data.length;++c)this.data.push(a.data[c].slice());this.height=a.height;
this.width=a.width;this.repeat=a.repeat;this.eb=a.eb;this.Mva=a.Mva||0;this.kf=a.kf;this.jPa=a.jPa},clear:function(){this.data.length=0},xda:function(a,c){var d=Math.floor(a/this.Bb),f=Math.floor(c/this.Bb);return d>=0&&d<this.width&&f>=0&&f<this.height?this.data[f][d]:0},dS:function(a,c){return this.data[c]&&this.data[c][a]||0},mXb:function(a,c,d){return this.yO(Math.floor(a/this.Bb),Math.floor(c/this.Bb),d)},yO:function(a,c,d){if(a>=0&&a<this.width&&c>=0&&c<this.height){if(this.data[c][a]==d)return y;
this.data[c][a]=d;return h}return y}});ig.cQa=ig.Q9.extend({scroll:{x:0,y:0},eb:1,Mva:0,repeat:y,enabled:h,Ksa:h,j$a:y,kz:y,bp:q,NC:512,OC:512,z_a:y,H6a:y,f:function(a,c){this.parent(a,c)},clear:function(){this.parent();if(this.kz){this.kz.Ka();this.kz=q}this.Vvb()},Vvb:function(){if(this.bp){for(var a=0;a<this.bp.length;++a){for(var c=0;c<this.bp[a].length;++c){var d=this.bp[a][c];d.width=0;d.height=0}this.bp[a].length=0}this.bp.length=0;this.bp=q}},uab:function(b,c){var d=0,f=0,i=this.Mva||this.eb;
if(this.eb){f=ig.i.npa(a,ig.i.width/2,ig.i.height/2);d=ig.r.screen.x+ig.i.width/2-f.x;f=ig.r.screen.y+ig.i.height/2-f.y}this.scroll.x=(b-d)/this.eb+d;this.scroll.y=(c-f)/i+f;if(this.eb&&this.eb<1)this.scroll.x=this.scroll.x+16;if(i&&i<1)this.scroll.y=this.scroll.y+16;this.kz&&this.kz.update(this)},yO:function(a,c,d){var f=this.parent(a,c,d);f&&this.bp&&this.j9a(this.bp[Math.floor(this.Bb*c*ig.i.scale/this.OC)][Math.floor(this.Bb*a*ig.i.scale/this.NC)],this.Bb*a*ig.i.scale%this.NC,this.Bb*c*ig.i.scale%
this.OC,d);f&&this.kz&&this.kz.yO(a,c,d,this)},N8a:function(a){var c=this.width*this.Bb*ig.i.scale,d=this.height*this.Bb*ig.i.scale,f=Math.ceil(c/this.NC),i=Math.ceil(d/this.OC);this.bp=[];for(var j=0;j<i;j++){this.bp[j]=[];for(var k=0;k<f;k++){var l=k==f-1?c-k*this.NC:this.NC,m=j==i-1?d-j*this.OC:this.OC,n=q;if(a){n=a[j][k];this.Lsa(k,j,l,m,n,h)}else{n=ig.Yr("canvas");n.width=l;n.height=m;this.bp[j][k]=n;this.Lsa(k,j,l,m,n,y)}}}if(a)this.H6a=h;return a||this.bp},ita:N(y),Lsa:N(q),b7:J(),j9a:J(),
U$:function(b,c,d,f){if(!this.H6a&&!(this.kz&&this.kz.KT!=this)){var i=ig.i.FFa(a),b=b==g?this.scroll.x+i.x-1:b,c=c==g?this.scroll.y+i.y-1:c,d=d==g?Math.ceil(ig.i.width/ig.i.zoom)+2:d,f=f==g?Math.ceil(ig.i.height/ig.i.zoom)+2:f;this.enabled&&(this.kz?this.uxb(b,c,d,f):this.Ksa?this.wxb(b,c,d,f):this.$na(b,c,d,f))}},nb:function(a,c,d,f){this.U$(a,c,d,f)},oDa:q,uxb:function(a,c,d,f){if(this.kz.Kga){if(!this.ita())return;this.kz.update()}var a=ig.i.qf(a),c=ig.i.qf(c),i=a-this.scroll.x*ig.i.scale,j=c-
this.scroll.y*ig.i.scale;if(!ig.Xf.dNa||!this.eb||this.eb==1){i=Math.round(i*ig.i.scale)/ig.i.scale;j=Math.round(j*ig.i.scale)/ig.i.scale}d=d*ig.i.scale;f=f*ig.i.scale;this.kz.nb(i,j,a,c,d,f)},wxb:function(a,c,d,f){if(!this.bp){if(!this.ita())return;this.N8a()}var a=ig.i.qf(a),i=ig.i.qf(c),c=a-this.scroll.x*ig.i.scale,j=i-this.scroll.y*ig.i.scale;if(!ig.Xf.dNa||!this.eb||this.eb==1){c=Math.round(c*ig.i.scale)/ig.i.scale;j=Math.round(j*ig.i.scale)/ig.i.scale}var d=d*ig.i.scale,f=f*ig.i.scale,k=this.width*
this.Bb*ig.i.scale,l=this.height*this.Bb*ig.i.scale;if(this.repeat){a=(a%k+k)%k;i=(i%l+l)%l}else{a+d>k&&(d=k-a);i+f>l&&(f=l-i)}for(var k=Math.max(Math.floor(a/this.NC),0),m=Math.max(Math.floor(i/this.OC),0),l=this.bp[0].length,n=this.bp.length,i=i-m*this.OC,o=0,t,p;o<f;){for(var r=0,u=a-k*this.NC,w=k;r<d;){var z=this.bp[m][w],v=c+r,x=j+o;t=Math.min(z.width-u,d-r);p=Math.min(z.height-i,f-o);if(t&&p){ig.i.context.drawImage(z,u,i,t,p,v,x,t,p);ig.ia.aG++}if(this.z_a){ig.i.context.strokeStyle="#f0f";ig.i.context.strokeRect(v,
x,t,p)}u=0;r=r+t;w=(w+1)%l}i=0;o=o+p;m=(m+1)%n}},$na:J()});ig.$j={}});ig.J=h;
ig.N("game.config").K(function(){ig.LQb=["en_US","de_DE","fr_FR","zh_CN","ja_JP","ko_KR"];ig.FQb=["en_US","de_DE","zh_CN"];ig.ZQb=["en_US"];ig.Xn={en_US:{},de_DE:{Kia:"de",Jba:h},zh_CN:{aL:"CrossCode",KIa:h,LIa:["\u3001","\u3002","\uff0c","\uff1f","\uff01"],Kia:"zh"},ja_JP:{aL:"CrossCodeJP",OD:{size:[10,7,6],MYa:[12,10,6]},Boa:h,KIa:h,LIa:["\u3001","\u3002","\u2026","\uff01","\uff1f"],Kia:"ja"},ko_KR:{aL:"CrossCodeKR",KIa:y,U6a:["\u3001","\u3002","\u2026","\uff01","\uff1f"],Kia:"ko"}};ig.mya={size:[12,
10,7],MYa:[13,10,6]};ig.TQa=q;ig.Co={DEFAULT_TILE_SIZE:16,DISABLE_LAYER_SIZE:h,DISABLE_LAYER_DISTANCE:y,DISABLE_LAYER_REPEAT:h,COLLISION_TILESET:"media/map/collisiontiles-16x16.png"};ig.EV=y;ig.Tob="data/tile-infos.json";ig.hd={NORMAL:1,METAL:2,CARDBOARD:3,EARTH:4,GRASS:5,WATER:6,WOOD:7,STONE:8,METALSOLID:9,SNOW:10,ICE:11,NOTHING:12,QUICKSAND:13,SHALLOW_WATER:14,SAND:15,COAL:16,HOLE:17,LASER:18,METAL_HOLLOW:19,SPIDERWEB:20,HIGHWAY:21};ig.xya="data/terrain.json";ig.VL=ig.hd.NORMAL;ig.GPb={ACHIEVEMENTS:1};
ig.igb="data/database.json";ig.rQb="data/npc-names.json";ig.oRa="data/item-database.json";ig.gTa="data/skilltree.json";ig.NPa="data/changelog.json";ig.iPb="data/achievements.json"});ig.J=h;
ig.N("impact.base.collision-map").O("impact.base.map","game.config").K(function(){function a(a){return a<4?a%3:a-12>>2}function b(a){return a<4?a==3?0:1:2+a%4}ig.$j.Collision=ig.Q9.extend({t:new ig.u({faa:"Collision",W$:ig.Co.DISABLE_LAYER_SIZE,maa:h,laa:h,kaa:ig.Co.DISABLE_LAYER_DISTANCE,X$:ig.Co.DEFAULT_TILE_SIZE,yza:ig.Co.COLLISION_TILESET,vRb:h,aaa:"weltmeister/lib/map/img/layer-collision-icon.png",Xya:0.6,Zya:0,Yya:0}),f:function(a,b){this.parent(a,b)},yK:function(a,b){for(var f=0;f<this.height;f++)for(var i=
0;i<this.width;i++){var j;a&&(j=a.data[f+b]?a.data[f+b][i]%32:2);this.data[f][i]=ig.sP.yKa(i,f,this.data[f][i],j,b)}},o5a:function(a,b){return ig.sP.WDb(this.xda(a,b))},m5a:function(a,d,f,i){for(var j=Math.floor(a/this.Bb),k=Math.floor(Math.ceil(a+f-1)/this.Bb),l=Math.floor(d/this.Bb),m=Math.floor(Math.ceil(d+i-1)/this.Bb),l=Math.max(l,0),m=Math.min(m,this.height-1),j=Math.max(j,0),k=Math.min(k,this.width-1),m=m+1;m-- >l;)for(var n=k+1;n-- >j;){var o=this.dS(n,m);if(ig.sP.n5a(o)){o=b(o);if(o==1||
o>=2&&ig.sP.wqa((n+0.5)*this.Bb,(m+0.5)*this.Bb,o,a,d,f,i))return h}}return y},L4a:function(c,d){var f=this.dS(c,d),i=a(f),f=b(f);return i==3||i==1&&f==1},YJ:function(c,d,f,i,j){for(var k=Math.floor(c/this.Bb),l=Math.floor(Math.ceil(c+f-1)/this.Bb),m=Math.floor(d/this.Bb),n=Math.floor(Math.ceil(d+i-1)/this.Bb),m=Math.max(m,0),n=Math.min(n,this.height-1),k=Math.max(k,0),l=Math.min(l,this.width-1),o=0,t=0,p=n+1;p-- >m;)for(var r=l+1;r-- >k;){++t;var u=this.data[p]&&this.data[p][r],u=u%32,w=b(u),z=a(u),
u=0;if(z==3)u=1;else if(z==1)if(w==1)u=1;else if(w>1){var z=(r+0.5)*this.Bb,v=(p+0.5)*this.Bb;w==2&&r==l&&p==m?c+f-z-(d-v)<=0.01&&(u=1):w==2&&r==k&&p==n?-(c-z)+(d+i-v)>0.01&&(u=0.5):w==3&&r==l&&p==n?c+f-z+(d+i-v)<=0.01&&(u=1):w==3&&r==k&&p==m?-(c-z)-(d-v)>0.01&&(u=0.5):w==4&&r==k&&p==n?-(c-z)+(d+i-v)<=0.01&&(u=1):w==4&&r==l&&p==m?c+f-z-(d-v)>0.01&&(u=0.5):w==5&&r==k&&p==m?-(c-z)-(d-v)<=0.01&&(u=1):w==5&&r==l&&p==n?c+f-z+(d+i-v)>0.01&&(u=0.5):u=0.5}if(u!=1&&!j)return 0;if(u!=0&&j){j.x=j.x+(r==k?-1:
r==l?1:0);j.y=j.y+(p==m?-1:p==n?1:0)}o=o+u}return o==t?2:o>0?1:0},trace:function(c,d,f,i,j,k,l,m,n){var o=Math.floor((d+(i<0?i:0))/this.Bb),t=Math.floor(Math.ceil(d+k-1+(i>0?i:0))/this.Bb),p=Math.floor((f+(j<0?j:0))/this.Bb),r=Math.floor(Math.ceil(f+l-1+(j>0?j:0))/this.Bb),u,w,z,v;if(i!=0&&j!=0){var x;x=d+i+(i<0?k:0)-(i<0?t:o+1)*this.Bb;var A=f+j+(j>0?l:0)-(j>0?r:p+1)*this.Bb;if(A&&A*j>=0&&x*i>=0&&Math.abs(x)<Math.abs(i)&&Math.abs(A)<Math.abs(j)&&Math.abs(i/j)<Math.abs(x/A)){u=i<0?t:o;w=j>0?r:p}A=
f+j+(j<0?l:0)-(j<0?r:p+1)*this.Bb;if((x=d+i+(i>0?k:0)-(i>0?t:o+1)*this.Bb)&&A*j>=0&&x*i>=0&&Math.abs(x)<Math.abs(i)&&Math.abs(A)<Math.abs(j)&&Math.abs(j/i)<Math.abs(A/x)){z=i>0?t:o;v=j<0?r:p}}x=y;p=Math.max(p,0);r=Math.min(r,this.height-1);o=Math.max(o,0);t=Math.min(t,this.width-1);for(r=r+1;r-- >p;)for(A=t+1;A-- >o;)if((A!=u||r!=w)&&(A!=z||r!=v)){var F=this.data[r]&&this.data[r][A],F=F%32,B=b(F),F=a(F);if(n)F==1?B=B>1?B%4+2:B?0:1:F!=3&&(B=1);else{if(m&&F==1)continue;!m&&F==3&&(B=1)}B>1?x=ig.$j.Collision.sua(c,
d,f,i,j,k,l,A*this.Bb,r*this.Bb,this.Bb,this.Bb,(B-2)%4)||x:B&&(x=ig.$j.Collision.sua(c,d,f,i,j,k,l,A*this.Bb,r*this.Bb,this.Bb,this.Bb)||x)}return x}});ig.$j.Collision.Hqa="collision";ig.sP={n5a:function(b){b=a(b);return b==2||b==3},WDb:function(c){var d=a(c),c=b(c);return d!=1&&d!=3&&c==0},uVb:function(c){var d=a(c),c=b(c);return d==3||d==2||d==1&&c==1?y:h},dUb:function(a,b,f,i,j,k){var l=f>k?1:-1,m=j[f].height,n=m-j[k].height,o;for(o=i[k]?this.yKa(a,b,i[k].xda(a,b+n)):3;k!=f;){k=k+l;n=m-j[k].height;
o=i[k]?this.yKa(a,b,i[k].xda(a,b+n),o,l):3}return o},yKa:function(c,d,f,i,j){d=c=f;c=c%32;d=d-c;if(c>0&&c<4||c>=16)return f;if(i===g)d=c==0||c>=12?d+3:d+(c+12);else{var f=b(i),k=a(i);if(j>0)if(c==0)d=k==2||k==3?d+(f==1?3:f%4+16):d+1;else{i=2+c%4;d=f!=i&&(k==2||k==3)?d+(c>=12?3:c+12):d+(c>=12?i%4+16:c>=8?c+16:1)}else if(c==0)d=k==1?d+(f==1?3:f%4+20):k==3?d+(i-4):d+2;else{i=2+c%4;k==3&&(f=2+f%4);d=f!=i&&(k==1||k==3)?d+(c>=12?3:c+12):d+(c>=12?i%4+20:c>=8?2:i%4+24)}}return d},wqa:function(a,b,f,i,j,k,
l){var m,n;if(f==2){m=1;n=-1}else if(f==3)n=m=1;else if(f==4){m=-1;n=1}else if(f==5)n=m=-1;return m*((m>0?i:i+k)-a)+n*((n>0?j:j+l)-b)<0}};ig.$j.Collision.acb={YJ:N(0),o5a:N(y),m5a:N(y),trace:N(y),yK:J()};ig.lf={};ig.lf.Zj=1E-5;ig.lf.xka=8;ig.lf.Rt=4;ig.$j.Collision.sua=function(a,b,f,i,j,k,l,m,n,o,t,p){var r=y;if(p!=g){var u=0,w=0,z=m+o/2,v=n+t/2;switch(p){case 0:u=-z+v-(-b+f+l);w=-i+j;break;case 1:u=-z-v-(-b-f);w=-i-j;break;case 2:u=z-v-(b+k-f);w=i-j;break;case 3:u=z+v-(b+k+f+l);w=i+j}if((r=u+0.1>=
0)&&w>0){u=Math.max(0,u/w-ig.lf.Zj);if(u-ig.lf.Zj<a.Ne){r=0;switch(p){case 0:r=b+u*i-z+(f+u*j+l-v);break;case 1:r=b+u*i-z-(f+u*j-v);break;case 2:r=b+u*i+k-z+(f+u*j-v);break;case 3:r=b+u*i+k-z-(f+u*j+l-v)}if(Math.abs(r)>o+0.1)r=y;else{j=i=0;a.Ne=u;a.dir.x=(p<2?-1:1)*Math.SQRT1_2;a.dir.y=(p==0||p==3?1:-1)*Math.SQRT1_2;return h}}}}if(!r){p=i==0?-1:(m+(i>0?-k:o)-b)/i;z=j==0?-1:(n+(j>0?-l:t)-f)/j;v=Math.min(p,z);u=Math.max(p,z);if(v+ig.lf.Zj>=0&&u<1){if(u<a.Ne){if(a.uz!=g)a.uz=a.dir.x?i>0?1E3:-1E3:0;if(a.vz!=
g)a.vz=a.dir.y?j>0?1E3:-1E3:0;a.Ne=u;a.dir.x=u==p?i>0?1:-1:0;a.dir.y=u==z?j>0?1:-1:0;if(u==p&&u==z){a.dir.x=a.dir.x*Math.SQRT1_2;a.dir.y=a.dir.y*Math.SQRT1_2}return h}}else{if(p+ig.lf.Zj>=0&&p-ig.lf.Zj<=a.Ne){j=f+l-ig.lf.xka<n||f+ig.lf.xka>n+t?n-f>f+l-n-t?n-f-l:n+t-f:0;a.vz=a.vz!=g&&p+ig.lf.Zj>=a.Ne?a.vz*j<=0?0:a.vz:j;a.Ne=Math.max(0,p-ig.lf.Zj);a.dir.x=i>0?1:-1;a.dir.y=0;return h}if(z+ig.lf.Zj>=0&&z-ig.lf.Zj<=a.Ne){i=b+k-ig.lf.xka<m||b+ig.lf.xka>m+o?m-b>b+k-m-o?m-b-k:m+o-b:0;a.uz=a.uz!=g&&z+ig.lf.Zj>=
a.Ne?a.uz*i<=0?0:a.uz:i;a.Ne=Math.max(0,z-ig.lf.Zj);a.dir.x=0;a.dir.y=j>0?1:-1;return h}}}return y}});ig.J=h;
ig.N("impact.base.tile-info").K(function(){ig.Zob=ig.UL.extend({Wua:q,f:function(){this.parent()},wu:function(){$.ajax({dataType:"json",url:ig.root+ig.Tob+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(){this.Wua={};this.Xl(h)},onload:function(a){this.Wua=a;this.Xl(h)}});ig.Mcb=new ig.Zob;ig.Yob=ig.Ca.extend({yYa:{},f:function(a){if(ig.Mcb.Wua[a])for(var a=ig.Mcb.Wua[a],b=a.animations.length;b--;)for(var c=a.animations[b],d=c.length;d--;)this.yYa[c[d]]=
c},LEa:function(a){return this.yYa[a]||q}})});ig.J=h;
ig.N("impact.base.background-map").O("impact.base.map","impact.base.image","impact.base.tile-info","game.config").K(function(){var a=Vec2.create();ig.$j.Background=ig.cQa.extend({Qt:q,w0:"",Vua:q,QFa:y,j$a:h,t:new ig.u({faa:"Background",W$:ig.Co.DISABLE_LAYER_SIZE,maa:h,kaa:ig.Co.DISABLE_LAYER_DISTANCE,X$:ig.Co.DEFAULT_TILE_SIZE,laa:h,rsb:h,aaa:"weltmeister/lib/map/img/layer-background-icon.png"}),f:function(a,c){this.parent(a,c);this.NLb(a.tilesetName);this.uvb()},Ka:function(){this.Qt&&this.Qt.Tc()},
ita:function(){return this.Qt.loaded},uvb:function(){this.QFa=y;for(var a=0;a<this.width;a++)for(var c=0;c<this.height;c++)if(this.Vua.LEa(this.data[c][a])){this.QFa=h;return}},NLb:function(a){this.w0=a instanceof ig.ia?a.path:a;this.Vua=new ig.Yob(this.w0);this.Qt=new ig.ia(this.w0);this.bp=q},Lsa:function(a,c,d,f,i){var d=d/this.Bb/ig.i.scale+1,f=f/this.Bb/ig.i.scale+1,j=a*this.NC/ig.i.scale%this.Bb,k=c*this.OC/ig.i.scale%this.Bb,a=Math.floor(a*this.NC/this.Bb/ig.i.scale),c=Math.floor(c*this.OC/
this.Bb/ig.i.scale),l=ig.i.context;ig.i.context=ig.i.ys(i);for(var m=0;m<d;m++)for(var n=0;n<f;n++)if(m+a<this.width&&n+c<this.height){var o=this.data[n+c][m+a];o&&this.Qt.XX(m*this.Bb-j,n*this.Bb-k,o-1,this.Bb)}ig.i.context=l;return i},b7:function(a,c,d,f,i,j,k){var l=this.Bb,m=ig.i.context;ig.i.context=a;a=f/l;i=i/l;j=j/l;k=k/l;for(f=0;f<j;++f)for(var n=0;n<k;++n){var o=a+f,t=i+n;if(t>=this.height||t<0){if(!this.repeat)continue;t=t>0?t%this.height:(t+1)%this.height+this.height-1}if(o>=this.width||
o<0){if(!this.repeat)continue;o=o>0?o%this.width:(o+1)%this.width+this.width-1}if(o=this.data[t][o]){t=this.Vua.LEa(o);(window.Ed||!t)&&this.Qt.XX(f*l+c,n*l+d,o-1,l)}}ig.i.context=m},oDa:function(b,c,d,f){if(this.QFa)for(var i=ig.i.FFa(a),b=b==g?this.scroll.x+i.x:b,c=c==g?this.scroll.y+i.y:c,d=d==g?ig.i.width/ig.i.zoom:d,f=f==g?ig.i.height/ig.i.zoom:f,i=Math.floor(ig.r.Z2/0.2)%4,j=Math.floor(b/this.Bb),b=Math.ceil((b+d)/this.Bb),f=Math.ceil((c+f)/this.Bb),d=ig.Xf.dNa&&this.eb&&this.eb!=1,c=Math.floor(c/
this.Bb);c<f;++c)for(var k=j;k<b;++k){var l=this.Vua.LEa(this.dS(k,c));l&&this.Qt.XX(k*this.Bb-this.scroll.x,c*this.Bb-this.scroll.y,l[i]-1,this.Bb,this.Bb,y,y,q,q,q,d)}},j9a:function(a,c,d,f){var i=ig.i.context;ig.i.context=ig.i.ys(a);a=ig.i.scale;ig.i.context.clearRect(c,d,this.Bb*a,this.Bb*a);f&&this.Qt.XX(c/a,d/a,f-1,this.Bb);ig.i.context=i},$na:function(a,c,d,f){for(var i=0,j=(a/this.Bb).Tcb(),k=(c/this.Bb).Tcb(),a=a%this.Bb,i=c%this.Bb,c=-a-this.Bb,d=d+this.Bb-a,f=f+this.Bb-i,a=this.Qt.FAb(this.Bb),
l=-1,m=-i-this.Bb;m<f;l++,m=m+this.Bb){var n=l+k;if(n>=this.height||n<0){if(!this.repeat)continue;n=n>0?n%this.height:(n+1)%this.height+this.height-1}for(var o=-1,t=c;t<d;o++,t=t+this.Bb){i=o+j;if(i>=this.width||i<0){if(!this.repeat)continue;i=i>0?i%this.width:(i+1)%this.width+this.width-1}if(i=this.data[n][i])if(i-1<a)this.Qt.XX(t,m,i-1,this.Bb);else{ig.i.context.fillStyle="pink";ig.i.context.fillRect(ig.i.qf(t),ig.i.qf(m),ig.i.scale*this.Bb,ig.i.scale*this.Bb)}}}}});ig.$j.MovingParallax=ig.$j.Background.extend({t:new ig.u({faa:"MovingParallax",
W$:y,maa:h,laa:y,kaa:y,X$:ig.Co.DEFAULT_TILE_SIZE,rsb:y,aaa:"weltmeister/lib/map/img/layer-background-icon.png"}),dn:0,bl:y,f:function(a,c){this.parent(a,c);this.repeat=h},ILb:L("bl"),update:function(){if(!this.bl)this.dn=this.dn+ig.i.ja},uab:function(a,c){a=a-this.dn*this.nT.x;c=c-this.dn*this.nT.y;this.parent(a,c)}})});ig.J=h;
ig.N("impact.base.global-settings").O("impact.base.loader").K(function(){Vec2.create();ig.Qhb=ig.UL.extend({Wi:"GlobalSettings",data:{},YEb:y,f:function(){this.parent()},b2a:function(a,b){var c=this.data[a];return!c?q:c[b]||q},a2a:function(a,b,c){a=this.b2a(a,b);return!a?q:a[c]||q},yXb:function(a,b,c,d){this.data[a]||(this.data[a]={});this.data[a][b]||(this.data[a][b]={});this.data[a][b][c]=d;this.YEb=h},CJb:function(a,b){if(!b.__GLOBAL__)return b;var c={};ig.merge(c,this.a2a("ENTITY",a,b.__GLOBAL__));
c.name=b.name;c.mapId=b.mapId;c._globalSettingKey=b.__GLOBAL__;return c},wu:function(){$.ajax({dataType:"json",url:ig.root+"data/global-settings.json"+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(){this.data={};this.Xl(h)},onload:function(a){this.data=a;this.Xl(h)}});ig.HFa=new ig.Qhb});ig.J=h;
ig.N("impact.base.extension").K(function(){ig.thb=ig.Ca.extend({enabled:{},list:q,Op:{},f:J(),addListener:function(a,c){this.Op[c]=a},load:function(){this.list=new ig.shb},vUb:function(a){if(!this.enabled[a])return y;if(this.list.get(a))return h},aXb:function(a,c){this.enabled[a]=c},BJa:function(a){var c=a.path;this.enabled[c]||(this.enabled[c]=window.Ri?y:h);window.Ri&&a.zvb();if(this.enabled[c]){window.Ri||a.aYa();for(var c=a.xb,d=0;d<c.length;++d){var f=c[d],i=f.type;this.Op[i]&&this.Op[i].BJa(f.data,
a)}}else window.Ri&&a.aYa(h)}});ig.x4=new ig.thb;ig.shb=ig.UL.extend({x4:{},get:function(a){return this.x4[a]},wu:function(){ig.platform==ig.Mk.DESKTOP?this.vEb():this.wEb()},wEb:function(){$.ajax({dataType:"json",url:ig.root+"page/api/get-extension-list.php",context:this,success:this.AJa.bind(this),error:this.AJa.bind(this)})},LVa:function(){return ig.root+(!window.Ri?"assets/":"")+"extension/"},vEb:function(){window.require("fs").readdir(this.LVa(),this.XFb.bind(this))},XFb:function(a,c){var d=
this.LVa(),f=window.require("fs"),i=[];if(!a)for(var j=0;j<c.length;++j){var k=c[j];k[0]!=="."&&(f.lstatSync(d+k).isDirectory()&&f.existsSync(d+k+"/"+k+".json"))&&i.push(k)}this.AJa(i)},AJa:function(a){for(var c=0;c<a.length;++c){var d=a[c];d[0]!="-"&&(this.x4[d]=new ig.rhb(d))}this.Xl(h)}});var a={};ig.rhb=ig.XE.extend({Wi:"Extension",files:q,xb:q,oG:function(){return ig.root+"extension/"+this.path+"/"+this.path+".json"},onload:function(a){this.files=a.files||[];this.xb=a.entries||[];ig.x4.BJa(this)},
zvb:function(){for(var b=this.files.length;b--;){var c=ig.root+this.files[b];a[c]&&e(Error("DOUBLE REFERENCE '"+c+"' referred by extensions '"+a[c]+'" & "'+this.path+"'"));a[c]=this.path;$.ajax({url:c,type:"HEAD",context:{path:c,extension:this.path},success:J(),error:function(){e(Error("WRONG REFERENCE '"+this.path+"' of extension '"+this.$Sb+"'"))}})}},aYa:function(a){for(var c=this.files.length;c--;){var d=this.files[c],f=ig.root+d,i=ig.root+"extension/"+this.path+"/"+d;a&&(i=ig.root+"missing-extension/"+
d);ig.fEa[f]=i}}})});ig.J=h;
ig.N("impact.base.utils").K(function(){var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",
green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",OUb:"cd5c5c",PUb:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",
teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},b=[{WKa:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,x0a:["rgb(123, 234, 45)","rgb(255,234,245)"],EKa:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{WKa:/^(\w{2})(\w{2})(\w{2})$/,x0a:["#00ff00","336699"],EKa:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{WKa:/^(\w{1})(\w{1})(\w{1})$/,
x0a:["#fb0","f0f"],EKa:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];ig.xp=function(c){this.Mra=y;if(c)if(c instanceof ig.xp){this.Fk=c.Fk;this.tk=c.tk;this.qk=c.qk;this.Mra=h}else{c.charAt(0)=="#"&&(c=c.substr(1,6));var c=c.replace(/ /g,""),c=c.toLowerCase(),d;for(d in a)c==d&&(c=a[d]);for(d=0;d<b.length;d++){var f=b[d].EKa,i=b[d].WKa.exec(c);if(i){f=f(i);this.Fk=f[0];this.tk=f[1];this.qk=f[2];this.Mra=h}}this.Fk=this.Fk<0||isNaN(this.Fk)?0:this.Fk>255?
255:this.Fk;this.tk=this.tk<0||isNaN(this.tk)?0:this.tk>255?255:this.tk;this.qk=this.qk<0||isNaN(this.qk)?0:this.qk>255?255:this.qk}else{this.Fk=this.tk=this.qk=0;this.Mra=h}};ig.xp.prototype.D0=function(){return"rgb("+this.Fk+", "+this.tk+", "+this.qk+")"};ig.xp.prototype.assign=function(a){this.Fk=a.Fk;this.tk=a.tk;this.qk=a.qk;this.Mra=h};ig.xp.prototype.nc=function(a,b){this.Fk=Math.round(Math.min(255,this.Fk*(1-b)+a.Fk*b));this.tk=Math.round(Math.min(255,this.tk*(1-b)+a.tk*b));this.qk=Math.round(Math.min(255,
this.qk*(1-b)+a.qk*b))};ig.xp.z4a=function(a,b,f,i){i.Fk=Math.round(Math.min(255,a.Fk*(1-f)+b.Fk*f));i.tk=Math.round(Math.min(255,a.tk*(1-f)+b.tk*f));i.qk=Math.round(Math.min(255,a.qk*(1-f)+b.qk*f))};ig.Lya=ig.Ca.extend({lastIndex:0,Dc:[],f:function(a,b){for(var f=b?a-1:a,i=0;i<a;++i)this.Dc.push(i/f);this.Dc.sort(function(){return Math.random()-0.5})},get:function(){var a=this.Dc.length,b=this.Dc[this.lastIndex],f=this.lastIndex-Math.floor(Math.random()*a*0.2);f<0&&(f=f+a);this.Dc[this.lastIndex]=
this.Dc[f];this.Dc[f]=b;this.lastIndex=(this.lastIndex+1)%a;return b}})});ig.J=h;
ig.N("impact.base.game").O("impact.base.impact","impact.base.entity","impact.base.event","impact.base.renderer","impact.base.physics","impact.base.game-state","impact.base.collision-map","impact.base.background-map","impact.base.global-settings","impact.base.extension","impact.base.utils").K(function(){Vec2.create();Vec2.create();Vec2.create();window.$Pb=y;ig.aRa=ig.Ca.extend({clearColor:"#000008",gB:0,screen:{x:0,y:0},Nha:{x:0,y:0},size:{x:0,y:0},paused:y,dra:y,eua:q,T8a:q,uZ:q,tR:"",entities:[],
bra:[],ln:[],H4:[],Is:{},H3:[],Df:[],rb:{},Jl:0,Xy:0,yt:0,IYa:{},Z2:0,Io:64,vi:new ig.nhb,to:new ig.Sxa,Ie:new ig.xlb,kQ:[],qRb:q,cb:q,If:"",rga:q,kia:y,Ix:0,cOa:q,tf:{all:[],Iqa:[],Jqa:[],Mf:[],Nsa:[],Esa:[],sr:[],Gsa:[],kra:[],Csa:[],ag:[],reset:[]},kp:[],Yha:function(){ig.r=this;return q},f:function(){this.tf.all=ig.TCb();for(var a=0;a<this.tf.all.length;++a){var b=this.tf.all[a];b.Ms&&this.tf.Iqa.push(b);b.qx&&this.tf.Jqa.push(b);b.RJa&&this.tf.Mf.push(b);b.fH&&this.tf.Nsa.push(b);b.az&&this.tf.Esa.push(b);
b.Eu&&this.tf.sr.push(b);b.asa&&this.tf.Gsa.push(b);b.Mfa&&this.tf.kra.push(b);b.Zra&&this.tf.Csa.push(b);b.TZ&&this.tf.ag.push(b);b.fj&&this.tf.reset.push(b)}this.tf.Iqa.sort(function(a,b){return a.PG-b.PG});this.tf.Jqa.sort(function(a,b){return a.dK-b.dK});this.tf.Mf.sort(function(a,b){return a.Ecb-b.Ecb});this.tf.Nsa.sort(function(a,b){return a.aU-b.aU});this.tf.Esa.sort(function(a,b){return a.xK-b.xK});this.tf.sr.sort(function(a,b){return a.QM-b.QM});this.tf.Gsa.sort(function(a,b){return a.Hsa-
b.Hsa});this.tf.kra.sort(function(a,b){return a.lfa-b.lfa});this.tf.Csa.sort(function(a,b){return a.Dsa-b.Dsa});this.tf.ag.sort(function(a,b){return a.Dva-b.Dva});this.tf.reset.sort(function(a,b){return a.sLa-b.sLa});a=new ig.x9;a.SCb(this);this.kp.push(a);ig.x4.load()},pushState:function(a){this.kp.last().Zy(this);this.kp.push(a);a.y6(this)},b_:function(){if(!(this.kp.length<=1)){this.kp.pop().Zy(this);this.kp.last().y6(this)}},bIb:function(){console.Eda("GameAddons: ");for(var a in this.tf)if(this.tf[a]&&
this.tf[a]!=this.tf.all){console.Eda(a.charAt(0).toUpperCase()+a.substring(1)+"Order: ");this.cIb(this.tf[a],a+"Order");console.groupEnd()}console.groupEnd()},cIb:function(a,b){for(var c=0;c<a.length;c++)console.log(a[c].name+": %c"+a[c].__proto__[b],"color:#0000FF")},Hy:function(a){for(var b=ig.r.Jl;b--&&ig.r.rb[b].height>a;);b<0&&(b=-1);return b},lpa:function(a){return a==-1?this.rb[0].height-1:this.rb[a].height},g2a:function(a){return this.lpa(a.offset?a.level:a)+(a.offset||0)},W1a:function(a){return this.Is[a]},
Wzb:function(a){return this.bra[a]},mcb:function(a,b){var c=a.name,d=b.name;b.name=c;a.name=d;c&&(this.Is[c]=b);d&&(this.Is[d]=a)},JTb:function(){return this.ln.length-this.H4.length-1},rda:function(a){return[this.rb[a].Df[0]]},GDb:function(a,b){for(var c=ig.r.Jl;c--;)for(var d=this.rb[c].Df,f=d.length;f--;){var i=d[f];if(i instanceof ig.$j.Background){var j=i.xda(a,b);if(j)return ig.Pb.vBb(i,j)==ig.hd.NOTHING}}return h},Br:function(a,b,c,d,f,i,j,k){return this.Ie.Br(a,b,c,d,f,i,j,k)},QAb:function(a){var b=
a.b;return this.Ie.Br(b.g.x,b.g.y,b.g.z,b.size.x,b.size.y,b.size.z,a)},lN:function(a,b,c,d,f,i,j,k,l,m,n){return this.Ie.lN(a,b,c,d,f,i,j,k,l,m,n)},kda:function(a){for(var a=typeof a==="string"?ig.wa[a]:a,b=[],c=0;c<this.ln.length;c++){var d=this.ln[c];d instanceof a&&!d.Ve&&b.push(d)}return b},nG:function(a){for(var b=[],c=0;c<this.ln.length;++c){var d=this.ln[c];d&&(d.b.Nc&&d.b.Nc.Mj==a.b)&&b.push(d)}return b},JS:function(){return this.vi.JS()&&this.RGa()},RGa:N(h),bHa:function(a,b,c){if(b!=this.cb||
this.vi.YQ||!c)return y;a=b.b;return Math.abs(c.x)>Math.abs(c.y)?c.x>0&&a.wb.x>0||c.x<0&&a.wb.x<0:c.y>0&&a.wb.y>0||c.y<0&&a.wb.y<0},CD:function(){var a=this.vi.YQ;return this.kia||(a?a.y_==ig.Qm.BLOCKING:y)},X1a:J(),iWb:function(a,b){for(var b=b&&JSON.parse(b),c=this.entities.length;c--;){var d=this.entities[c];d&&d.w7a&&d.w7a(a,b)}},jKb:function(a,b){b=JSON.stringify(b);window.parent&&window.parent.Fgb&&window.parent.Fgb(a,b)},J_:function(a){if(this.paused!=a)(this.paused=a)?ig.ke.Fga():ig.ke.pga()},
Pe:function(a,b,c,d,f,i){var j;if(typeof a==="string"){j=ig.wa[a];f=ig.HFa.CJb(a,f)}else j=a;j||e(Error("Can't spawn entity of type "+a));j=new j(b,c,d,f||{});if(j.Ve)return q;j.Np();j.name&&(this.Is[j.name]=j);this.entities.push(j);j.zu&&(this.bra[j.zu]=j);if(f&&f.spawnCondition){var k=new ig.de(f.spawnCondition);this.H3.push({fb:k,type:a,x:b,y:c,z:d,yf:f,Q:j});if(!k.evaluate())return q}j.show(!i);return j},dMb:function(a){a.mla=y;if(a.Og){var b=this.kQ.indexOf(a);if(b!=-1)this.kQ.splice(b,1);else{b=
0;if(this.H4.length>0){b=this.H4.pop();this.ln[b]&&e(Error("Overriding Entity that is already set!"));this.ln[b]=a}else{b=this.ln.length;this.ln.push(a)}a.id=b}a.Og=y;this.Ie.Mtb(a.b)}},xCb:function(a){a.Og=h;this.G_a(a)},D9a:function(a){a.mla=h;a.po?a.po():a.hide()},VIb:function(a){a.name&&delete this.Is[a.name];a.Ve=a.b.Ve=h;this.G_a(a)},G_a:function(a){!a.Ve&&!a.Og&&e(Error("Tried to remove entity that is not hidden or killed"));(a.Ve||a.id!=0)&&this.kQ.push(a)},reset:function(){this.iCa();ig.ma.clear();
ig.ke.reset();for(var a=0;a<this.tf.reset.length;++a)this.tf.reset[a].fj()},Mf:function(a,b,c){this.T8a=this.uZ;this.uZ=a;this.If=b?b.If:q;this.cOa=b;this.kia=h;this.Ix=this.b8a(a,b,c);this.vi.clearQueue();for(var d=0;d<this.tf.Mf.length;++d)this.tf.Mf[d].RJa(a,b,c);this.XHb(a)},tVb:M("kia"),b8a:N(0),a8a:J(),m_a:J(),T2a:N("???"),XHb:function(a){this.rla=q;this.tR="LOADING MAP: "+a;window.kib=Math.random()<1E-4;var b=a.vm(ig.root+"data/maps/",".json")+ig.Kn();$.ajax({dataType:"json",url:ig.dpa(b),
context:this,success:L("rla"),error:function(a,d,f){ig.i.error(Error("Loading of Map '"+b+"' failed: "+console.log(a)+" / "+d+" / "+f))}})},iCa:function(){this.screen={x:0,y:0};for(var a=this.entities.length;a--;){this.entities[a]&&this.entities[a].ze(h);this.entities[a]&&!this.entities[a].Ve&&e(Error("Entity of id "+this.entities[a].id+" was not properly killed"))}for(a=0;a<this.Df.length;++a){this.Df[a].clear();this.Df[a].Ka&&this.Df[a].Ka()}this.Df.length=0;this.rb={};this.Xy=this.Jl=0;this.vi.clear();this.entities.length=
0;this.bra.length=0;this.ln=[q];this.kQ.length=0;this.H4.length=0;this.H3.length=0;this.to.aIa();this.Ie.aIa();this.Is={};if(window.nwf){window.nwf.system.Memory.forceGC();ig.log("Force GC!")}},QHa:function(a){this.tR="CREATING MAP:  "+a.name;this.iCa();ig.Mp.axb();ig.ready=y;ig.ma.L7a(a.name);for(var b=0;b<this.tf.Iqa.length;++b)this.tf.Iqa[b].Ms(a);this.rb={};this.Xy=1E5;this.Jl=a.levels.length;this.rb.first={Df:[]};for(b=0;b<a.levels.length;b++){this.Xy=Math.min(this.Xy,a.levels[b].height);this.rb[""+
b]={height:a.levels[b].height,collision:ig.$j.Collision.acb,Df:[]};var c=a.levels}this.rb.last={Df:[]};this.rb.light={Df:[]};this.rb.postlight={Df:[]};this.rb.object1={Df:[]};this.rb.object2={Df:[]};this.rb.object3={Df:[]};this.yt=a.masterLevel?a.masterLevel.Rb(0,this.Jl-1):0;for(var d=0,f=0,b=0;b<a.layer.length;b++){var i=a.layer[b],c=i.level||0;if(!i.distance||i.distance==1){d=Math.max(d,i.tilesize*i.width);f=Math.max(f,i.tilesize*i.height)}var j=new ig.$j[i.type](i,this.rb[c].height);this.Df.push(j);
ig.$j[i.type].Hqa?this.rb[c][ig.$j[i.type].Hqa]=j:this.rb[c].Df.push(j)}this.size.x=d;this.size.y=f;this.Ie.q6a();for(b=0;b<a.entities.length;b++){c=a.entities[b];this.Pe(c.type,c.x,c.y,this.g2a(c.level),c.settings)}this.m_a();b=this.cOa;d=a=q;if(this.cb)if(!b||b.If){if(ig.wa.Marker){for(b=0;b<this.ln.length;++b)if((c=this.ln[b])&&c.BF){if(c.name==this.If){a=c;break}d||(d=c)}a||(a=d)}if(a&&this.cb){this.If=a.name;a.BF(this.cb)}}else{this.If=q;this.cb.b.aa=b.aa;this.cb.b.pc=b.pc;this.cb.b.g.z=b.g.z;
this.cb.face.x=b.face.x;this.cb.face.y=b.face.y;this.cb.l(b.g.x+b.size.x/2-this.cb.b.size.x/2,b.g.y+b.size.y/2-this.cb.b.size.y/2)}ig.ready=h;b=new (this.r6a||ig.F9);b.load();this.tR=b},d6a:function(){this.kia=y;this.cb&&this.cb.R7a&&this.cb.R7a();if(this.rga){this.rga.T7a(this.cb);this.rga=q}this.VHb();var a=q;if(this.rb[this.yt].collision){this.rb[this.yt].collision.yK(q);a=this.rb[this.yt].collision}for(var b=this.yt+1;b<this.Jl;++b){var c=this.rb[b];if(c.collision.yK){c.collision.yK(a,a?(c.height-
this.rb[b-1].height)/16:0);a=c.collision}else a=q}a=this.rb[this.yt].collision?this.rb[this.yt].collision:q;for(b=this.yt-1;b>=0;--b){c=this.rb[b];if(c.collision.yK){c.collision.yK(a,a?(c.height-this.rb[b+1].height)/16:0);a=c.collision}else a=q}for(a=0;a<this.tf.Jqa.length;++a)this.tf.Jqa[a].qx(this);ig.w3();if(window.nwf){window.nwf.system.Memory.requestGC();window.nwf.system.Memory.forceGC();window.nwf.system.Memory.clearCaches();ig.log("Image Buffer Count: "+window.nwf.system.Stats.imageBufferCount);
window.nwf.system.Stats.getMemoryStats(h)}},iCb:function(){return this.rb.light&&this.rb.light.Df.length>0},VHb:function(){for(var a=0;a<this.Jl;++a)this.ZT(a);this.ZT("first");this.ZT("last");this.ZT("light");this.ZT("postlight");this.ZT("object1",h);this.ZT("object2",h);this.ZT("object3",h)},ZT:function(a,b){for(var c=q,d=q,f=this.rb[a],i=0;i<f.Df.length;++i){var j=f.Df[i];if(j.Ksa){if(!f.Df[i-1]||j.PIa||j.width!=f.Df[i-1].width||j.height!=f.Df[i-1].height)d=c=q;if(j.j$a&&!b){d||(d=new ig.snb(j));
j.kz=d}else c=j.N8a(c);if(j.PIa)d=c=q}else d=c=q}ig.GI.k9a(1)},ya:function(){if(ig.i.Mda()&&this.i1a)ig.ke.update();else{this.i1a=y;var a=ig.i.context;ig.i.context=q;if(ig.Xf.update){var b=ig.i.Sa,c=b;for(this.mu=h;c>0;){ig.i.Sa=Math.min(0.05,c);ig.i.ja=ig.i.Sa*ig.i.fm;this.update();this.mu=y;c=c-ig.i.Sa}ig.i.Sa=b;ig.i.ja=ig.i.Sa*ig.i.fm}this.mu=h;ig.Xf.sr&&this.sr();ig.input.Wvb();ig.ke.update();ig.i.context=a;if(ig.Xf.nb){this.nb();this.Ayb()}}},update:function(){for(var a=0;a<this.tf.Nsa.length;++a)this.tf.Nsa[a].fH();
if(!this.paused&&!ig.Wv){if(this.Ix>0){this.Ix=this.Ix-ig.i.Sa;this.Ix<=0&&this.a8a()}if(this.Ix<=0&&this.rla){this.QHa(this.rla);this.rla=q;this.hRb=y;if(ig.Wv)return}}if(this.sVa){this.ag();this.sVa=y}if(!this.paused&&!ig.Wv){this.Ie.update();this.Z2=this.Z2+ig.i.ja;for(var b in this.IYa){var a=this.IYa[b],c;for(c in a)a[c].update()}}ig.Wv||this.vi.update();for(a=0;a<this.tf.Esa.length;++a)this.tf.Esa[a].az()},sr:function(){this.WCa();for(var a=0;a<this.tf.sr.length;++a)this.tf.sr[a].Eu()},WCa:function(){ig.i.Ir=
ig.i.ja;if(!this.paused&&!ig.Wv){for(var a=this.Ie.PC,b=0;b<a.length;b++){var c=a[b].Q;if(c&&!c.Ve){ig.i.ja=c.b.qD(y);if(c.sr){ig.ma.Ega(c);c.sr();ig.ma.Z6(c)}ig.i.ja=ig.i.Ir}}for(var d in this.rb)for(b=0;b<this.rb[d].Df.length;b++){c=this.rb[d].Df[b];c.update&&c.update()}}for(b=0;b<this.kQ.length;b++)if(c=this.kQ[b]){!c.Og&&!c.Ve&&e(Error("Detaching an Entity that is neither killed nor hidden!"));if(c.id){this.Ie.SIb(c.b);this.ln[c.id]=q;this.H4.push(c.id);c.id=0}if(c.Ve){d=this.entities.indexOf(c);
if(d!=-1){this.entities.splice(d,1);c.ye()}}}this.kQ.length=0},nb:function(){for(var a in this.rb)for(var b=0;b<this.rb[a].Df.length;b++)this.rb[a].Df[b].uab(this.screen.x,this.screen.y);for(a=0;a<this.tf.Gsa.length;++a)this.tf.Gsa[a].asa();ig.i.pNb();this.to.Q8a(this.ln);this.to.Y_a();for(a=0;a<this.tf.kra.length;++a)this.tf.kra[a].Mfa();this.to.$_a();ig.i.Lxb();for(a=0;a<this.tf.Csa.length;++a)this.tf.Csa[a].Zra()},Ayb:function(){if(ig.i.Mda()){ig.i.clear("rgba(0,0,0,0.6)");this.i1a=h}},ag:function(){for(var a=
this.H3.length;a--;){var b=this.H3[a];if(b.Ve)this.H3.splice(a,1);else{var c=b.fb.evaluate();b.Q.mla&&c?b.Q.show():!b.Q.mla&&!c&&ig.r.D9a(b.Q)}}for(a=0;a<this.entities.length;a++)this.entities[a]&&this.entities[a].ag&&this.entities[a].ag();for(a=0;a<this.tf.ag.length;++a)this.tf.ag[a].TZ()},Yj:function(){this.sVa=h},sea:function(a,b,c,d,f,i,j){var k=ig.r.rb[ig.r.Hy(c)];if(!k||!k.collision)return y;if(k.collision.m5a(a,b-k.height,d,f))return h;if(j){c=this.Ie.Br(a,b,c,d,f,i,g,g,h);for(i=c.length;i--;){j=
c[i].b;if(j.type==ig.ca.BLOCK||j.type==ig.ca.FENCE)if(j.shape==ig.Tf.RECTANGLE||ig.sP.wqa(j.g.x+j.size.x/2,j.g.y+j.size.y/2,j.shape,a,b,d,f))return h}}return y},YJ:function(a,b,c,d,f,i,j){var k=ig.r.rb[ig.r.Hy(c)];if(!k||!k.collision||(!j||c-k.height<=ig.lf.Rt)&&!k.collision.YJ(a,b-k.height,d,f))return y;if(i){i=this.Ie.Br(a,b,c-4,d,f,4);for(j=i.length;j--;){k=i[j].b;if((k.type==ig.ca.BLOCK||k.type==ig.ca.FENCE)&&!(k.g.z+k.size.z>c+ig.lf.Rt))if(k.shape==ig.Tf.RECTANGLE||ig.sP.wqa(k.g.x+k.size.x/2,
k.g.y+k.size.y/2,k.shape,a,b,d,f))return y}}return h},Uq:function(a,b,c,d,f,i,j,k,l,m,n){m===g&&(m=b);return this.trace(a,b.b.g.x+(f||0),b.b.g.y+(i||0),b.b.g.z+(j||0),c,d,b.b.size.x,b.b.size.y,b.b.size.z-(n||0),k||b.b.type,m,l||q)},trace:function(a,b,c,d,f,i,j,k,l,m,n,o,t){return this.Ie.trace(a,b,c,d,f,i,j,k,l,m,n&&n.b,o,t)}});ig.Uf=ig.Ca.extend({PG:0,dK:0,Ecb:0,aU:0,xK:0,QM:0,Hsa:0,lfa:0,Dsa:0,sLa:0,Dva:0,name:"game_addon",Ms:q,qx:q,RJa:q,fH:q,az:q,Eu:q,asa:q,Mfa:q,Zra:q,fj:q,TZ:q,f:function(a){this.name=
a!=g?a:"game_addon"}});ig.tC=ig.Ca.extend({g:q,face:q,If:q,aa:0,pc:0,size:{x:0,y:0},f:function(a){this.If=a||q},P$a:function(a,b,c,d,f,i){this.If=a||q;this.g=b||q;this.face=c||q;this.aa=d||0;this.pc=f||0;this.size=i},UKb:function(a){this.P$a(a.marker,a.pos,a.face,a.level,a.baseZPos,a.size)},kpa:function(){return{marker:this.If,pos:ig.copy(this.g),face:this.face,level:this.aa,baseZPos:this.pc,size:ig.copy(this.size)}}});ig.tC.AX=function(a){if(!a||!a.marker&&(!a.pos||!a.size||!a.face))return q;var b=
new ig.tC;b.UKb(a);return b}});window.eha||(window.eha={},window.sc=window.eha);ig.J=h;
ig.N("game.loader").O("impact.base.timer","impact.base.loader").K(function(){sc.mob=ig.F9.extend({n:new ig.jl,eD:0,nb:function(){this.nQ=this.nQ+(this.status-this.nQ)/5;var a=ig.i.scale,b=ig.i.width*0.6,c=ig.i.width*0.5-b/2,d=ig.i.height*0.5-4;ig.i.context.fillStyle="#000";ig.i.context.fillRect(0,0,ig.i.TC,ig.i.RC);ig.i.context.fillStyle="#56607b";ig.i.context.fillRect(c*a,d*a,b*a,8*a);ig.i.context.fillStyle="#000";ig.i.context.fillRect(c*a+a,d*a+a,b*a-a-a,8*a-a-a);ig.i.context.fillStyle="#fff";ig.i.context.fillRect((c+
2)*a,(d+2)*a,(b-4)*a*this.nQ,4*a);window.Ri&&ig.i.context.fillText(this.Eqa,ig.i.width/2-ig.i.context.measureText(this.Eqa).width/2,d+20);ig.jl.step();a=this.n.ja();if(this.eD>0){this.eD=this.eD-a;ig.i.context.fillStyle="#000";ig.i.context.globalAlpha=Math.min(1,1-this.eD/0.3);ig.i.context.fillRect(0,0,ig.i.TC,ig.i.RC);ig.i.context.globalAlpha=1;this.eD<=0&&this.A4()}},Zy:function(){this.HEa?this.eD=0.3:this.A4()}})});ig.J=h;
ig.N("game.constants").K(function(){window.EPb=window.Constants={gI:12,kC:8,xPa:8}});ig.J=h;
ig.N("impact.feature.database.database").O("impact.base.loader","game.config").K(function(){ig.ogb=ig.UL.extend({Wi:"Database",data:q,xb:{},f:function(){if(!ig.hd)return ig.warn("No DATABASE specified. Please create ig.DATABASE in game.config");if(!ig.xya)return ig.warn("Can't initialize database because no ig.DATABASE_FILE was provided");this.parent()},Lg:function(a,b,c,d){this.xb[a]={ss:b,Zi:c||a};if(d)this.xb[a].external={path:d.path||q,data:d.data}},get:function(a){return this.data[a]},wu:function(){$.ajax({dataType:"json",
url:ig.root+ig.igb+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(a){this.data={error:a};this.Xl(h)},onload:function(a){this.data=a;this.Xl(h);ig.EV&&ig.log("%cLOADABLE: %cLoaded Database: \n%O","color:blue","",a)}});ig.Yh=new ig.ogb});ig.J=h;ig.N("impact.feature.database.plug-in").O("impact.feature.database.database").K(J());ig.J=h;
ig.N("impact.feature.gamepad.gamepad").O("impact.base.game","impact.base.vars").K(function(){ig.UPb={ZRa:"nwf",cRb:"webkit",YXb:"nope"};ig.VPb={ZRa:"nwf",tUa:"xbox",XQb:"nope"};ig.od={r9:0,xja:1,yja:2,zja:3,GV:4,YV:5,HV:6,ZV:7,Vxa:8,im:9,Vwa:10,nka:11,rV:12,oV:13,pV:14,qV:15};ig.Nd={wn:0,xn:1,bA:2,Dw:3};ig.Gja=ig.Uf.extend({JEa:{},cy:[],Jda:[],f:function(){this.parent("Gamepads");for(var b=0;b<a.length;++b){var c=a[b]();c&&this.Jda.push(c)}},aU:0,fH:function(){if(!this.isSupported()||!this.Jda.length)return y;
this.cy=[];for(var a=this.Jda.length;a--;)this.Jda[a].update(this.JEa);for(var c in this.JEa)this.cy.push(this.JEa[c]);if(this.tqa()||this.ED()){ig.input.Id=y;ig.input.qb=ig.Yb.Wc}ig.ma.set("gamepad.active",ig.input.qb==ig.Yb.Wc)},QM:9001,Eu:J(),Nj:function(a){if(!ig.r.mu)return y;for(var c=this.cy.length;c--;)if(this.cy[c].AKa[a])return h;return y},WUb:function(a){if(!ig.r.mu)return y;for(var c=this.cy.length;c--;)if(this.cy[c].eLa[a])return h;return y},uu:function(a){for(var c=this.cy.length;c--;){var d=
this.cy[c];if(d.vma[a]>(d.m3[a]||0.5))return h}return y},vTb:function(a){for(var c=this.cy.length;c--;){var d=this.cy[c].vma[a];if(d)return d}return 0},Cf:function(a,c){for(var d=this.cy.length,f=0;d--;){var i=this.cy[d],j=i.pBa[a];if(j&&!(c&&Math.abs(j)<=(i.bJ[a]||0.1)))Math.abs(f)<Math.abs(j)&&(f=j)}return f},nqa:function(a){for(var c=this.cy.length;c--;){var d=this.cy[c];if(Math.abs(d.pBa[a])>(d.bJ[a]||0.1))return h}return y},tqa:function(){return this.nqa(ig.Nd.wn)||this.nqa(ig.Nd.xn)},ED:function(){return this.nqa(ig.Nd.bA)||
this.nqa(ig.Nd.Dw)},isSupported:function(){return this.Jda.length>0}});var a=[];ig.Gja.cYa=function(b){a.push(b)};ig.bRa=ig.Ca.extend({m3:[],bJ:[],vma:[],pBa:[],AKa:[],eLa:[],f:J(),HOa:function(a,c){var d=this.m3[a]||0.5,f=this.vma[a]>d,d=c>d;this.AKa[a]=this.eLa[a]=y;!f&&d?this.AKa[a]=h:f&&!d&&(this.eLa[a]=h);this.vma[a]=c;if(d){ig.input.Id=y;ig.input.qb=ig.Yb.Wc}},Cia:function(a,c){this.pBa[a]=c}});ig.Vf(function(){return ig.Xc=new ig.Gja})});ig.J=h;
ig.N("impact.feature.gamepad.html5-gamepad").O("impact.feature.gamepad.gamepad").K(function(){ig.gib=ig.Ca.extend({f:J(),update:function(c){var d=navigator.getGamepads&&navigator.getGamepads()||navigator.webkitGetGamepads&&navigator.webkitGetGamepads()||navigator.webkitGamepads;if(d)for(var f=0;f<d.length;f++){var i;d[f]&&(i=d[f]);var j="html5Pad"+f;if(i){if(!c[j]){var k=c,l=j,m=new ig.bRa;m.m3[ig.od.HV]=30/255;m.m3[ig.od.ZV]=30/255;m.bJ[ig.Nd.wn]=7849/32767;m.bJ[ig.Nd.xn]=7849/32767;m.bJ[ig.Nd.bA]=
8689/32767;m.bJ[ig.Nd.Dw]=8689/32767;k[l]=m}j=c[j];k=i;m=g;for(m in a){l=k.buttons[a[m]];l instanceof Object?j.HOa(m,l.value):j.HOa(m,l)}m=g;for(m in b){l=k.axes[b[m]];j.Cia(m,l)}}else delete c[j]}}});var a={},b={};a[ig.od.r9]=0;a[ig.od.xja]=1;a[ig.od.yja]=2;a[ig.od.zja]=3;a[ig.od.GV]=4;a[ig.od.YV]=5;a[ig.od.HV]=6;a[ig.od.ZV]=7;a[ig.od.Vxa]=8;a[ig.od.im]=9;a[ig.od.Vwa]=10;a[ig.od.nka]=11;a[ig.od.rV]=12;a[ig.od.oV]=13;a[ig.od.pV]=14;a[ig.od.qV]=15;b[ig.Nd.wn]=0;b[ig.Nd.xn]=1;b[ig.Nd.bA]=2;b[ig.Nd.Dw]=
3;ig.Gja.cYa(function(){if(typeof navigator.webkitGamepads!="undefined"||typeof navigator.webkitGetGamepads!="undefined"||typeof navigator.getGamepads!="undefined")return new ig.gib})});ig.J=h;
ig.N("impact.feature.gamepad.nwf-gamepad").O("impact.feature.gamepad.gamepad").K(function(){ig.Ikb=ig.Ca.extend({i6a:q,f:function(){this.i6a=window.nwf.input.WiiUGamePad.getController();var b=window.nwf.input.ControllerButton;a[ig.od.r9]=b.GAMEPAD_B;a[ig.od.xja]=b.GAMEPAD_A;a[ig.od.yja]=b.GAMEPAD_Y;a[ig.od.zja]=b.GAMEPAD_X;a[ig.od.GV]=b.GAMEPAD_L;a[ig.od.YV]=b.GAMEPAD_R;a[ig.od.HV]=b.GAMEPAD_ZL;a[ig.od.ZV]=b.GAMEPAD_ZR;a[ig.od.Vxa]=b.GAMEPAD_MINUS;a[ig.od.im]=b.GAMEPAD_PLUS;a[ig.od.Vwa]=b.GAMEPAD_L_STICK;
a[ig.od.nka]=b.GAMEPAD_R_STICK;a[ig.od.rV]=b.GAMEPAD_UP;a[ig.od.oV]=b.GAMEPAD_DOWN;a[ig.od.pV]=b.GAMEPAD_LEFT;a[ig.od.qV]=b.GAMEPAD_RIGHT},update:function(b){if(!b.wiiUMain){var c=new ig.bRa;c.m3[ig.od.HV]=30/255;c.m3[ig.od.ZV]=30/255;c.bJ[ig.Nd.wn]=7849/32767;c.bJ[ig.Nd.xn]=7849/32767;c.bJ[ig.Nd.bA]=8689/32767;c.bJ[ig.Nd.Dw]=8689/32767;b.wiiUMain=c}var b=b.wiiUMain,c=this.i6a,d=c.buttons,f;for(f in a)b.HOa(f,d.Nj(a[f]));f=c.leftStick;b.Cia(ig.Nd.wn,f.movementX);b.Cia(ig.Nd.xn,f.movementY);f=c.rightStick;
b.Cia(ig.Nd.bA,f.movementX);b.Cia(ig.Nd.Dw,f.movementY)}});var a={};ig.Gja.cYa(function(){if(window.nwf)return new ig.Ikb})});ig.J=h;ig.N("impact.feature.gamepad.plug-in").O("impact.feature.gamepad.gamepad","impact.feature.gamepad.html5-gamepad","impact.feature.gamepad.nwf-gamepad").K(J());ig.J=h;
ig.N("impact.base.action").O("impact.base.steps").K(function(){ig.la={};ig.ta=ig.RTa;ig.Xe=ig.Ca.extend({name:"",qU:q,Gea:{},sq:y,nsa:y,oLa:y,hint:q,f:function(a,b,c,d){this.name=a;this.nsa=c||y;this.oLa=d||y;this.qU=ig.Ika.c_a(b,ig.la,this.Gea)},Ka:function(){ig.Ika.Nma(this.qU)},$Cb:function(a,b){if(a.ib>0)a.ib=0;var c=a.ed;b.start(a);if(c==a.ed)a.Tw=b},ya:function(a){this.nsa||Vec2.Oa(a.b.wb,0,0);var b=a.Tw;if(!b){b=this.qU;if(!b)return h;if(a.ib>0)a.ib=0;var c=a.ed;b.start(a);if(c!=a.ed)return y;
a.Tw=b}for(c=a.ed;b&&b.ya(a);){if(a.ib>0)a.ib=0;if(!a.ed){b=q;break}if(c!=a.ed||b!=a.Tw)return y;var d=q;if(b.wY){var f=b.wY(a);if(f)(d=this.Gea[f])||e(Error("Label '"+f+"' not found."))}d||(d=b.Lv(a));b=d;(a.Tw=b)&&b.start(a);if(c!=a.ed||b!=a.Tw)return y}a.Tw=b;a.ib=a.ib<0?0:a.ib-a.b.qD(h);(b=!b&&!this.oLa)&&!this.nsa&&Vec2.Oa(a.b.wb,0,0);return b}});ig.Xe.Fr=function(a,b){return a&&a.actorAttrib?b.izb(a.actorAttrib):ig.Ja.Fr(a)};ig.Xe.vG=function(a,b,c){return a&&a.actorAttrib?Vec2.assign(c,b.u1a(a.actorAttrib)):
ig.Ja.vG(a,c)};ig.Xe.vq=function(a,b,c){return a&&a.actorAttrib?Vec3.assign(c,b.MEa(a.actorAttrib)):ig.Ja.vq(a,c)};ig.Xe.bFa=function(a,b,c){return a&&a.actorAttrib?Vec2.assign(c,b.u1a(a.actorAttrib)):ig.Jc.uq(ig.Jc.un[a]||0,c)}});ig.J=h;
ig.N("impact.base.actor-entity").O("impact.base.entity","impact.base.action").K(function(){var a=ig.Ieb=0.75;ig.bv=ig.Ca.extend({empty:h,data:{},D6:q,f:function(a,b){a&&this.YS(a,b||q)},get:function(a){return this.data[a]},kH:function(a,b){if(!this.D6){this.D6=this.data;this.data=ig.copy(this.D6)}this.data[a]=b},lCa:function(){if(this.D6){this.data=this.D6;this.D6=q}},GVb:function(a){this.empty=y;for(var b in ig.Zr)for(var c in ig.Zr[b].FV)this.data[c]=a.data[c]},YS:function(a,b){this.empty=y;for(var c in ig.Zr)for(var j in ig.Zr[c].FV)this.data[j]=
a[j]!=g?a[j]:b&&b.data[j]!=g?b.data[j]:ig.Zr[c].FV[j];for(c in ig.Zr)ig.Zr[c].J4&&ig.Zr[c].J4.call(this.data)},HVb:function(a){this.empty=y;for(var b in ig.Zr)a instanceof ig.Zr[b].v3&&ig.Zr[b].load.call(this.data,a)},apply:function(a){if(!this.empty)for(var b in ig.Zr)a instanceof ig.Zr[b].v3&&ig.Zr[b].apply.call(this.data,a)}});ig.Zr={};var b=Vec2.create(),c={};ig.Jc=ig.Wd.extend({mb:{Ba:{}},face:Vec2.vc(0,1),rk:q,dB:q,lu:y,sEa:y,eo:y,Cy:0,Gg:{height:0,minHeight:0,DHa:0,Dea:y,Vi:y},Gva:q,ad:{idle:q,
preMove:q,move:q,moveRev:q,moveLeft:q,run:q,runRev:q,runLeft:q,brake:q,preIdle:q,jump:q,fall:q,hover:q,preHoverMove:q,hoverMove:q,hoverMoveRev:q,land:q},$ha:{none:{}},ed:q,Tw:q,ib:0,JNa:0,$a:{},E5a:y,XJ:[],Uu:{action:q,step:0,n:0,data:q},Vw:new ig.bv,nB:h,Jg:y,E4:0,fz:{Ch:0,ht:0,Fd:0},kl:[],attributes:{},Hm:{Aa:y,offset:0,speed:2},f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1;this.Bd()},Ge:function(a){this.rX();this.Tw=this.ed=q;this.parent(a)},Bd:function(a){if(a||
!this.Ya.RFa()){a="";if(this.ad&&this.ad.idle)a=this.ad.idle;else for(a in this.mb.Ba)break;this.rk=a;(a=this.mb.Ba[this.rk])&&this.Ya.kha(this,a.bda(this))}},PFa:function(){return this.ed!=q},Mq:function(a){this.Vw=a;this.Jg&&this.nAa();this.ed||this.Vw&&this.Vw.apply(this);if(this.Jg){this.IWa();this.fz.ht=this.Vw.get("accelSpeed");this.fz.Ch=this.Vw.get("maxVel");this.fz.Fd=this.Vw.get("zGravityFactor");this.fz.Coa=this.Vw.get("floatHeight")}},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},
u1a:function(a){return!this.attributes[a]||this.attributes[a].x===g?q:this.attributes[a]},MEa:function(a){return!this.attributes[a]||this.attributes[a].x===g?q:this.attributes[a]},izb:function(a){return!this.attributes[a]||typeof this.attributes[a]!="string"?q:this.attributes[a]},hzb:function(a){return!this.attributes[a]||!this.attributes[a]instanceof ig.de?q:this.attributes[a]},M$a:function(a){ig.Jc.uq(a,this.face)},Qd:M("target"),Y1a:function(){var a=typeof this.rk=="string"?this.mb.Ba[this.rk]:
this.rk;return a&&a.L4?a.L4(this.face.x,this.face.y):q},Zf:function(a,b,c){this.zM();this.Ei(c);this.ed=a;this.E5a=b||y;this.Tw=q},rEa:function(){if(this.ed){ig.ma.Ega(this);var a;do{a=this.ed;if(this.ed.ya(this))this.XJ.length?this.H8a():this.ed=q}while(this.ed&&a!=this.ed);ig.ma.Z6(this)}},Ei:function(a){if(this.ed){this.zM();if(!a){this.rX();this.E5a||this.Vw.apply(this)}this.XJ.length=0;this.Tw=this.ed=q}},IKa:function(a,b,c){var j=this.Tw||this.ed.qU,k=j;b||(k=j&&j.Lv(this));k&&this.XJ.push({action:this.ed,
step:k,reset:c});this.ed=a;this.Tw=q},H8a:function(){var a=this.XJ.pop();if(a){this.ed=a.action;this.ed.$Cb(this,a.step);if(a.reset){this.rX();this.Vw.apply(this)}}},Cua:function(a){if(this.ed){this.Uu.action=this.ed;this.Uu.step=this.Tw;this.Uu.n=this.ib;this.Uu.data=ig.copy(this.$a);if(this.XJ.length>0)this.Uu.FGa=ig.copy(this.XJ);this.Ei(a)}},G3a:function(){return!!this.Uu.action},Zvb:function(){this.Uu.action=q;this.Uu.FGa=q},Vga:function(a){if(this.Uu.action){this.Zf(this.Uu.action,y,a);this.Tw=
this.Uu.step;this.ib=this.Uu.n;this.$a=this.Uu.data;this.Uu.action=q;this.XJ.length=0;this.Uu.FGa&&this.XJ.push.apply(this.XJ,this.Uu.FGa)}},zM:function(){if(this.Jg||this.E4){if(this.E4)this.E4=0;this.IWa();this.b.Vs=0;this.Jg=y}},Hj:function(a){a&&this.kl.push(a)},dE:function(a){a=this.kl.indexOf(a);if(a!=-1){this.kl.splice(a,1);return h}return y},rX:function(a,b){for(var c=this.kl.length;c--;)if(!a||a(this.kl[c],b)){this.kl[c].Zl(this);a&&this.kl.splice(c,1)}if(!a)this.kl=[]},JK:function(a){if(typeof a==
"string"){if(this.$ha[a]){this.Gva=a;this.ad=this.$ha[a]}}else{this.Gva=q;this.ad=a}},WO:function(a,b){this.$ha[a]=b},update:function(){var b=this.Qd();if(this.Hm.Aa&&b){this.sEa=h;var c=Vec2.sub(b.tb(),this.tb());Vec2.Ig(c)&&Vec2.Oa(c,0,1);this.Hm.offset&&Vec2.rotate(c,this.Hm.offset*2*Math.PI);Vec2.GB(this.face,c,this.Hm.speed*Math.PI*2*ig.i.ja)}else this.sEa=y;c=this.b;if(this.E4){this.Jg=this.Jg-ig.i.ja;c.V.z=this.E4;this.Jg<0&&this.zM()}if(this.nB&&c.Vs>0.05&&(c.wb.x||c.wb.y)&&(c.g.z==this.b.pc||
c.yd.height)&&!this.Jg){var i=ig.gl.rY(this);if(i&&i.d8a)i.d8a(this);else if(this.Bqb())this.MLa?c.yd.height?this.vca(80,0.3,100):this.WM(185,16,100):this.MLa=h;else{this.MLa=y;c.Vs=0}}else this.MLa=y;var i=y,b=0,j=!!this.ed;do{b++;if(this.ed){var k;do{k=this.ed;if(this.ed.ya(this))if(this.XJ.length)this.H8a();else{this.Ei();i=h}}while(this.ed&&k!=this.ed)}if(this.XT){this.XT();i=i||!j&&this.ed}}while(i&&this.ed&&b==1);i=c.g.z>this.b.pc+ig.lf.Zj;this.Jg&&(c.V.z<=0&&!i)&&this.hH(0);if(this.Gg.height&&
!this.Gg.Vi){b=this.Qd();j=c.pc;k=this.Gg.DHa;if(!this.Gg.Dea&&b&&!b.Jg)k=b.b.g.z;this.Gg.minHeight&&(k=Math.max(k,this.Gg.minHeight));c.yd.height=Math.max(8,k-j+this.Gg.height);this.Gg.DHa=j+c.yd.height-this.Gg.height}if(this.Gg.Vi>0){this.Gg.Vi=this.Gg.Vi-ig.i.ja;if(this.Gg.Vi<=0)this.Gg.Vi=0}if(this.ad.idle&&(!this.rk||this.rk!=this.ad.land)){b=!c.yd.height&&(this.Jg||c.V.z>0||c.g.z>c.pc+ig.lf.Rt);j=Vec2.length(c.V);if(b)this.eo||(c.V.z>=0?this.Ma(this.ad.jump||this.ad.hover||this.ad.idle,h):this.Ma(this.ad.fall||
this.ad.jump||this.ad.hover||this.ad.idle,h));else if(c.wb.x==0&&c.wb.y==0){if(!this.Gg.height&&this.Cy)c.yd.height=Math.max(0,c.yd.height-this.Cy*4*ig.i.ja);this.eo||(this.ad.hover&&i?this.Ma(this.ad.hover):!this.ad.brake||j<8||c.Ze.Pb<0.8&&j<c.Ch/2||this.rk==this.ad.move||this.rk==this.ad.moveLeft||this.rk==this.ad.moveRev?this.ad.preIdle&&this.ad.brake&&this.rk==this.ad.brake?this.Ma(this.ad.preIdle,h,this.ad.idle):this.Ma(this.ad.idle):this.rk!=this.ad.idle&&this.Ma(this.ad.brake,h))}else{if(!this.Gg.height&&
this.Cy)c.yd.height=this.Cy;if(!this.lu&&!this.sEa){this.face.x=c.wb.x;this.face.y=c.wb.y}if(!this.eo){i=c.yd.height&&this.ad.preHoverMove?this.ad.preHoverMove:this.ad.preMove;if(c.yd.height&&this.ad.hoverMove){c=this.ad.hoverMoveRev&&Vec2.ug(c.wb,this.face)<0?h:y;i?this.Ma(i,h,c?this.ad.hoverMoveRev:this.ad.hoverMove):this.Ma(c?this.ad.hoverMoveRev:this.ad.hoverMove,h)}else{k=a;if(this.rk==this.ad.run||this.rk==this.ad.runRev)k=k-0.2;b=c.jf<k?this.ad.move:this.ad.run||this.ad.move;j=c.jf<k?this.ad.moveRev:
this.ad.runRev||this.ad.moveRev;k=c.jf<k?this.ad.moveLeft:this.ad.runLeft||this.ad.moveLeft;j&&Vec2.ug(c.wb,this.face);b=j&&Vec2.ug(c.wb,this.face)<0?j:c.wb.x<0?k||b:b;i&&c.jf>=a?this.Ma(i,h,b||this.ad.idle):this.Ma(b||this.ad.idle,h)}}}}this.parent()},Bqb:function(){var a=this.b,a=ig.R1a(ig.Zoa(a.wb.x,a.wb.y,8),8,b),f=ig.r.Ie.Il(c);if(!ig.r.Uq(f,this,a.x,a.y,0,0,0,ig.ca.IGNORE))return y;f=ig.r.Ie.Il(c);return ig.r.Uq(f,this,a.x,a.y,0,0,19)?y:h},hH:function(){this.zM();if(this.ad.land&&!this.eo){this.Ma(this.ad.land,
h,this.ad.idle,h);this.zia()}},nAa:function(){this.fz.Ch=this.b.Ch;this.fz.ht=this.b.ht;this.fz.Fd=this.b.Fd;this.fz.Coa=this.b.yd.height;this.fz.WW=this.b.Ze.Am},IWa:function(){this.b.Ch=this.fz.Ch;this.b.ht=this.fz.ht;this.b.Fd=this.fz.Fd;this.b.yd.height=this.fz.Coa;this.b.Ze.Am=this.fz.WW},WM:function(a,b,c,j,k){this.zM();this.nAa();this.b.V.z=a;this.Jg=h;if(c)this.b.Ch=c;if(j!==g&&j!==q)this.b.ht=j;this.EJa(b,k)},vca:function(a,b,c){if(!this.Gg.height){this.zM();this.nAa();this.E4=a||10;this.b.yd.height=
0;this.b.Fd=0;this.Jg=b;if(c)this.b.Ch=c}},ZN:function(a){var b=this.b;if(this.nB&&(b.wb.x||b.wb.y)&&Vec2.length(b.V)/b.Ch>0.5&&(!a||Vec2.ug(a,b.wb)/Vec2.length(a)/Vec2.length(b.wb)>0.5)){var a=y,c=ig.gl.rY(this);c&&c.e8a&&(a=c.e8a(this));a||(b.yd.height?this.vca(10,0.3):this.WM(155,0,q,this.Ah?0.1:1))}},bm:function(a,b){return b[1]=="attrib"?ig.ma.s_(this.attributes,b,2):b[1]=="face"?ig.ma.s_(this.face,b,2):this.parent(a,b)},EJa:J()});ig.Jc.Lk={NORTH:0,EAST:1,SOUTH:2,WEST:3};ig.Jc.un={NORTH:0,EAST:1,
SOUTH:2,WEST:3,NORTH_EAST:4,SOUTH_EAST:5,SOUTH_WEST:6,NORTH_WEST:7};ig.Jc.uq=function(a,b){var c=b||Vec2.create();switch(a){case 0:Vec2.Oa(c,0,-1);break;case 1:Vec2.Oa(c,1,0);break;case 2:Vec2.Oa(c,0,1);break;case 3:Vec2.Oa(c,-1,0);break;case 4:Vec2.Oa(c,1,-1);break;case 5:Vec2.Oa(c,1,1);break;case 6:Vec2.Oa(c,-1,1);break;case 7:Vec2.Oa(c,-1,-1)}return c};ig.jC={};ig.Zr.kPb={v3:ig.Jc,FV:{walkAnims:q,currentAnim:q,followUpAnim:q,accelSpeed:1,ignoreCollision:y,groundConnect:"LOOSE",staticTime:y,friction:1,
airFriction:0.7,terrainFrictionIgnore:y,weight:50,maxVel:100,zGravityFactor:1,relativeVel:1,faceDirFixed:y,jumpingEnabled:y,collType:ig.ca.VIRTUAL,collShape:ig.Tf.RECTANGLE,animationFixed:y,bounciness:0,zBounciness:0,floatHeight:0,shadow:0,shadowScaleY:1,shadowType:ig.nL.DEFAULT,floatVariance:3,floatAccel:1,floatMaxSpeed:300,floatHeightOnMove:0,flyHeight:0,flyKeepHeight:y,faceToTarget:y,faceToTargetOffset:0,faceToTargetSpeed:2},J4:function(){typeof this.collType=="string"&&(this.collType=ig.ca[this.collType]);
typeof this.collShape=="string"&&(this.collShape=ig.Tf[this.collShape]);typeof this.shadowType=="string"&&(this.shadowType=ig.nL[this.shadowType]);typeof this.groundConnect=="string"&&(this.groundConnect=ig.hI[this.groundConnect])},apply:function(a){a.JK(this.walkAnims);if(this.currentAnim)a.rk=this.currentAnim;if(this.followUpAnim)a.dB=this.followUpAnim;a.b.ht=this.accelSpeed;a.b.rm=this.ignoreCollision;a.b.rt=this.groundConnect;a.b.Ze.vg=this.friction;a.b.Ze.Am=this.airFriction;a.b.Ze.xN=this.terrainFrictionIgnore;
a.b.di=this.weight;a.b.Ch=this.maxVel;a.b.jf=this.relativeVel;a.b.Cd.size=this.shadow;a.b.Cd.type=this.shadowType;a.b.Cd.Va=this.shadowScaleY||1;a.lu=this.faceDirFixed;a.nB=this.jumpingEnabled;a.b.vl(this.collType);a.b.shape=this.collShape;a.eo=this.animationFixed;a.b.Vm=this.bounciness;a.b.kj=this.zBounciness;a.b.Fd=this.zGravityFactor;a.b.time.uA=this.staticTime;a.Cy=0;a.Gg.height=0;this.flyHeight?a.Gg.height=this.flyHeight:this.floatHeightOnMove?a.Cy=this.floatHeightOnMove:a.b.yd.height=this.floatHeight;
a.Gg.Dea=this.flyKeepHeight;a.b.yd.yl=this.floatVariance;a.b.yd.er=this.floatAccel;a.b.yd.Mh=this.floatMaxSpeed;a.Hm.Aa=this.faceToTarget;a.Hm.offset=this.faceToTargetOffset;a.Hm.speed=this.faceToTargetSpeed},load:function(a){this.walkAnims=a.Gva;this.currentAnim=a.rk;this.followUpAnim=a.dB;this.accelSpeed=a.b.ht;this.ignoreCollision=a.b.rm;this.groundConnect=a.b.rt;this.friction=a.b.Ze.vg;this.airFriction=a.b.Ze.Am;this.terrainFrictionIgnore=a.b.Ze.xN;this.weight=a.b.di;this.maxVel=a.b.Ch;this.relativeVel=
a.b.jf;this.faceDirFixed=a.lu;this.jumpingEnabled=a.nB;this.shadow=a.b.Cd.size;this.shadowScaleY=a.b.Cd.Va;this.shadowType=a.b.Cd.type;this.collType=a.b.type;this.collShape=a.b.shape;this.animationFixed=a.eo;this.bounciness=a.b.Vm;this.zBounciness=a.b.kj;this.zGravityFactor=a.b.Fd;this.staticTime=a.b.time.uA;this.flyHeight=this.floatHeightOnMove=0;a.Gg.height?this.flyHeight=a.Gg.height:a.Cy?this.floatHeightOnMove=a.Cy:this.floatHeight=a.b.yd.height;this.flyKeepHeight=a.Gg.Dea;this.floatVariance=a.b.yd.yl;
this.floatAccel=a.b.yd.er;this.floatMaxSpeed=a.b.yd.Mh;this.faceToTarget=a.Hm.Aa;this.faceToTargetOffset=a.Hm.offset;this.faceToTargetSpeed=a.Hm.speed}}});ig.J=h;
ig.N("impact.feature.base.action-steps").O("impact.base.action","impact.base.actor-entity").K(function(){function a(a){return a instanceof ig.w$}var b=Vec2.create(),c=Vec2.create(),d=Vec2.create();ig.la.LABEL=ig.ta.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of the label"}},label:function(){return"<b>LABEL</b> <i>"+this.name+"</i>"}}),f:function(a){assertContent(a,"name");this.name=a.name}});ig.la.GOTO_LABEL=ig.ta.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Label to move to."}},
label:function(){return"<b>GOTO_LABEL</b> <i>"+this.name+"</i>"}}),f:function(a){assertContent(a,"name");this.name=a.name},wY:M("name")});var f=/^(\d+)_(\d+)$/;ig.la.SELECT_RANDOM=ig.ta.extend({options:[],uf:{},t:new ig.u({attributes:{options:{c:"RandomDistribution",d:"RandomDistribution",w2:h}},NF:function(a){if(a=="_end")return"END_SELECT_RANDOM";var b=f.exec(a);if(b){var a=b[1],b=b[2],d="";this.options[a].lq&&(d=d+("("+this.options[a].lq+")"));return"Entry "+a+" #"+b+" "+d+" weight "+this.options[a].di}return"???"}}),
f:function(a){for(var a=a.options||[],b=0;b<a.length;++b){var d={count:a[b].count,di:a[b].weight,lq:new ig.de(a[b].activeCondition)};d.dp=d.count*d.di;this.options[b]=d}},eB:function(){for(var a=[],b=0;b<this.options.length;++b)for(var d=this.options[b],c=0;c<d.count;++c)a.push(b+"_"+c);return a},Lv:function(){for(var a=0,b=this.options.length;b--;)this.options[b].lq.evaluate()&&(a=a+this.options[b].dp);a=Math.random()*a;for(b=this.options.length;b--;)if(this.options[b].lq.evaluate())if(a>=this.options[b].dp)a=
a-this.options[b].dp;else break;a=this.options[b];if(!a)return this.Ok;a=Math.floor(a.count*Math.random());return this.uf[b+"_"+a]||this.Ok}});ig.la.RESET_ACTOR=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Vw.apply(a)}});ig.la.WAIT=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"NumberExpression",d:"Time to wait. -1 = Wait forever (use WISELY)"}}}),f:function(a){assertContent(a,"time");this.time=a.time},start:function(a){a.$a.time=ig.Ja.eh(this.time);a.ib=a.ib+(a.$a.time||
0)},ya:function(a){return a.$a.time>=0&&a.ib<=0}});ig.la.WAIT_UNTIL=ig.ta.extend({fb:q,t:new ig.u({attributes:{fb:{c:"VarCondition",d:"Condition that must be true before continued"},Fa:{c:"NumberExpression",d:"If defined: maximal wait this time",I:h}}}),f:function(a){this.fb=new ig.de(a.condition);this.Fa=a.maxTime},start:function(a){if(this.Fa)a.ib=a.ib+ig.Ja.eh(this.Fa)},ya:function(a){return this.Fa&&a.ib<=0?h:this.fb.evaluate()}});ig.la.WAIT_RANDOM=ig.ta.extend({Fa:0,Ro:0,t:new ig.u({attributes:{Ro:{c:"Number",
d:"Minimum time to wait"},Fa:{c:"Number",d:"Maximum time to wait"}}}),f:function(a){assertContent(a,"minTime","maxTime");this.Ro=a.minTime;this.Fa=a.maxTime},start:function(a){a.ib=a.ib+(this.Ro+Math.random()*(this.Fa-this.Ro))},ya:function(a){return a.ib<=0}});ig.la.IF=ig.ta.extend({fb:q,Mx:y,uf:{},t:new ig.u({attributes:{fb:{c:"VarCondition",d:"Condition for IF statement"},Mx:{c:"Boolean",d:"With else case.",w2:h}},NF:function(a){switch(a){case "thenStep":return q;case "elseStep":return"else";case "_end":return"endif"}return"???"}}),
f:function(a){this.fb=new ig.de(a.condition);this.Mx=a.withElse},eB:function(){return this.Mx?["thenStep","elseStep"]:["thenStep"]},Lv:function(){return this.fb.evaluate()?this.uf.thenStep?this.uf.thenStep:this.Ok:this.uf.elseStep?this.uf.elseStep:this.Ok}});ig.la.WAIT_UNTIL_ON_GROUND=ig.ta.extend({t:new ig.u({attributes:{Fa:{c:"Number",d:"If defined: maximal wait this time",I:h},wYa:{c:"Boolean",d:"If true also cancel if below target",I:h}}}),f:function(a){this.Fa=a.maxTime||0;this.wYa=a.alsoBelowTarget||
y},start:function(a){a.ib=a.ib+this.Fa},ya:function(a){if(this.Fa&&a.ib<=0||a.b.V.z>=0&&!a.b.Fd)return h;if(this.wYa){var b=a.Qd();if(b&&b.b.g.z>a.b.g.z)return h}return a.b.g.z==a.b.pc}});ig.la.WAIT_UNTIL_PLAYER_ON_TOP=ig.ta.extend({t:new ig.u({attributes:{not:{c:"Boolean",d:"If true, wait until player is NOT on top anymore"},Fa:{c:"Number",d:"If defined: maximal wait this time",I:h}}}),f:function(a){this.Fa=a.maxTime||0;this.not=a.not||y},start:function(a){a.ib=a.ib+this.Fa},ya:function(a){if(this.Fa&&
a.ib<=0)return h;for(var a=ig.r.nG(a),b=a.length;b--;)if(a[b].Ah)return!this.not;return this.not}});ig.la.MOVE_FORWARD=ig.ta.extend({target:Vec2.create(),t:new ig.u({attributes:{time:{c:"Number",d:"Time to move forward"},JA:{c:"Number",d:"If defined: if angle to collided wall is lower than this value, cancel step",I:h},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"},jL:{c:"VarCondition",d:"If defined: continue moving forward until condition evaluates to true. Duration is minimum wait",
I:h},ifa:{c:"Number",d:"If defined, make sure to not move further than this distance to target",I:h}}}),f:function(a){assertContent(a,"time");this.time=a.time;this.JA=a.collideCancel;this.lp=a.stopBeforeEdge;if(a.waitUntil)this.jL=new ig.de(a.waitUntil);this.ifa=a.maxTargetDistance||0},start:function(a){a.ib=a.ib+this.time;if(this.ifa)a.$a.wz=a.b.jf},ya:function(a){Vec2.assign(a.b.wb,a.face);if(this.JA&&ig.qd.Pda(a.b,this.JA))a.ib=0;if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,
0);if(this.JA)a.ib=0}if(this.ifa){var b=a.Qd(),b=ig.qd.DAb(a.b,b.b,this.ifa);if(b<=0){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}else if(b<1){a.b.jf=a.b.jf*b;Vec2.length(a.b.V,a.b.Ch*a.b.jf*b)}}if((!this.jL||this.jL.evaluate())&&a.ib<=0){if(this.ifa)a.b.jf=a.$a.wz;return h}return y}});ig.la.SLIDE_OUT=ig.ta.extend({target:Vec2.create(),t:new ig.u({attributes:{time:{c:"Number",d:"Maximum Time to slide out"},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"}}}),
f:function(a){this.time=a.time;this.lp=a.stopBeforeEdge},start:function(a){a.ib=a.ib+this.time},ya:function(a){Vec2.assign(a.b.wb,0,0);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return a.ib<=0}});ig.la.MOVE_BACKWARD=ig.ta.extend({target:Vec2.create(),t:new ig.u({attributes:{time:{c:"Number",d:"Time to move backward"},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving backward"}}}),f:function(a){assertContent(a,"time");this.time=a.time;this.lp=
a.stopBeforeEdge},start:function(a){a.ib=+this.time;a.$a.aIb=a.lu;a.lu=h},ya:function(a){Vec2.assign(a.b.wb,a.face);Vec2.Lc(a.b.wb);if(a.ib<=0){Vec2.Oa(a.b.wb,0,0);a.lu=a.$a.aIb;return h}if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return y}});var i=Vec2.create(),j=Vec2.create();ig.la.MOVE_TO_ENTITY_DISTANCE=ig.ta.extend({Q:0,min:0,max:0,Fa:0,PNa:y,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to move to"},min:{c:"Number",d:"Minimum distance"},max:{c:"Number",d:"Maximum distance"},
Fa:{c:"Number",d:"Maximum time to move"},PNa:{c:"Boolean",d:"If true, substract radius of entity bounds from distance to be evaluated."}}}),f:function(a){this.Q=a.entity;this.min=a.min;this.max=a.max;this.Fa=a.maxTime;this.PNa=a.subRadius},start:function(a){a.ib=a.ib+this.Fa},ya:function(a){var b=ig.Ja.rd(this.Q);if(!b)return h;var d=Vec2.sub(b.tb(i),a.tb(j)),c=Vec2.length(d);this.PNa&&(c=c-(a.b.size.x/2+b.b.size.x/2));c<this.min&&Vec2.UN(d,-1);Vec2.assign(a.b.wb,d);(b=this.min<=c&&c<=this.max)&&
Vec2.Oa(a.b.wb,0,0);return a.ib<=0||b}});ig.la.MOVE_TO_POINT=ig.ta.extend({target:Vec3.create(),Ph:y,t:new ig.u({attributes:{target:{c:"Vec3",d:"Point to go to",wC:h,dr:h,kq:h},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"},Fa:{c:"Number",d:"If defined: move at most this amount of seconds towards point",I:h},zr:{c:"Boolean",d:"If true: wait at point until maxTime has been reached"}}}),f:function(a){assertContent(a,"target");this.target=a.target;this.Ph=a.precise||y;this.Fa=
a.maxTime||0;this.zr=a.forceTime||y},start:function(a){if(this.Ph)a.$a.wz=a.b.jf;a.ib=a.ib+this.Fa},ya:function(a){var b=ig.Xe.vq(this.target,a,c);if(b){b=Vec2.sub(b,a.tb());Vec2.assign(a.b.wb,b);b=Vec2.length(b);if(this.Ph&&a.b.Ch*a.b.jf>b*10)a.b.jf=b/a.b.Ch*10;var d=y;if(b<(this.Ph?2:8))this.zr&&this.Fa?Vec2.Oa(a.b.wb,0,0):d=h;this.Fa&&a.ib<=0&&(d=h);if(d&&this.Ph)a.b.jf=a.$a.wz;return d}return h}});ig.la.SYNC_ACTION_WITH_ENTITY=ig.ta.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Other entity to sync action with"}}}),
f:function(a){this.Q=a.entity},start:function(a){a.JNa++},ya:function(a){var b=ig.Ja.rd(this.Q);return!b?q:b.JNa>=a.JNa}});ig.la.SET_Z_VEL=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"New Z Vel value. Positive for up movement"}}}),f:function(a){this.value=a.value},ya:function(a){a.b.V.z=this.value;return h}});ig.la.SET_FLOAT_HEIGHT=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"New float height"}}}),f:function(a){this.value=a.value},ya:function(a){a.b.yd.height=
this.value;return h}});ig.la.SET_FLOAT_PARAMS=ig.ta.extend({speed:q,er:q,yl:q,t:new ig.u({attributes:{yl:{c:"Number",d:"New float variance (specifies how muchy entitie moves up and down during floating)",ab:4,I:h},er:{c:"Number",d:"New float acceleration",ab:1,I:h},speed:{c:"Number",d:"New float speed",ab:300,I:h}}}),f:function(a){if(a.speed!==g)this.speed=a.speed;if(a.accel!==g)this.er=a.accel;if(a.variance!==g)this.yl=a.variance},ya:function(a){if(this.speed!==q)a.b.yd.Mh=this.speed;if(this.er!==
q)a.b.yd.er=this.er;if(this.yl!==q)a.b.yd.yl=this.yl;return h}});ig.la.SET_FLY_HEIGHT=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"New float height"}}}),f:function(a){this.value=a.value},ya:function(a){a.Gg.height=this.value;if(this.value==0)a.b.yd.height=0;return h}});ig.la.SET_FLY_KEEP_HEIGHT=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Boolean",d:"If true: Entity will keep flight height and not adjust with target"}}}),f:function(a){this.value=a.value},ya:function(a){a.Gg.Dea=
this.value;return h}});ig.la.FORCE_FLY_HEIGHT=ig.ta.extend({value:q,t:new ig.u({attributes:{}}),f:J(),ya:function(a){var b=a.Qd();if(b){var d=0,d=a.Gg.Dea?a.Gg.DHa+a.Gg.height:b.b.g.z+a.Gg.height;a.IH(d)}return h}});ig.la.WAIT_UNTIL_Z_DISTANCE=ig.ta.extend({eb:0,t:new ig.u({attributes:{eb:{c:"Number",d:"Wait until z distance to target is below this value"},S0a:{c:"Boolean",d:"If true, make entity stay fixed at the destination height, no zVel or gravity"}}}),f:function(a){this.eb=a.distance||0;this.S0a=
a.fixEntityZ||y},start:function(a){var b=a.Qd();if(b)a.$a.Uia=a.b.g.z-b.b.g.z},ya:function(a){var b=a.Qd();if(!b||a.b.g.z==a.b.pc)return h;var d=a.b.g.z-b.b.g.z;if(a.$a.Uia>0?d<=this.eb:d>=this.eb){if(this.S0a){a.b.g.z=b.b.g.z+this.eb;a.b.V.z=0;a.b.Fd=0}return h}return y}});ig.la.WAIT_UNTIL_Z_ZENITH=ig.ta.extend({AZ:0,t:new ig.u({attributes:{AZ:{c:"Number",d:"Minimum Time to wait"}}}),f:function(a){this.AZ=a.minWait||0},start:function(a){a.ib=a.ib+this.AZ},ya:function(a){return a.b.V.z<=0?a.ib<=0:
y}});ig.la.STOP_Z_ZENITH=ig.ta.extend({AZ:0,t:new ig.u({attributes:{AZ:{c:"Number",d:"Minimum Time to wait"}}}),f:function(a){this.AZ=a.minWait||0},start:function(a){a.ib=a.ib+this.AZ},ya:function(a){if(a.b.V.z<=0){a.b.V.z=0;a.b.Fd=0;return a.ib<=0}return y}});ig.la.FLY_TO_POINT=ig.ta.extend({target:Vec2.create(),Ph:y,jIa:0,mEa:0,uHa:y,t:new ig.u({attributes:{target:{c:"Vec3",d:"Point to go to",wC:h,dr:h,kq:h},jIa:{c:"Number",d:"Max flight speed"},mEa:{c:"Number",d:"How much the entity will vary around flight height."},
Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"},uHa:{c:"Boolean",d:"Keep floating in the air after step is over"}}}),f:function(a){assertContent(a,"target");this.target=a.target;this.Ph=a.precise||y;this.jIa=a.maxFlySpeed||0;this.mEa=a.flyVariance||0;this.uHa=a.keepFloating||y},start:function(a){a.$a.Coa=a.b.yd.height;a.$a.Gyb=a.b.yd.yl;a.$a.jTb=a.b.yd.Mh;a.$a.Cy=a.Cy;a.$a.xVb=a.nB;a.$a.xga=-1;if(this.Ph)a.$a.wz=a.b.jf;a.nB=y;a.Cy=y},ya:function(a){var b=ig.Xe.vq(this.target,
a,c);if(b){var d=a.b,f=Vec2.sub(b,a.tb()),i=Vec2.length(f);if(this.Ph&&i<2){Vec2.assign(d.wb,0,0);Vec2.assign(d.V,0,0)}else{if(this.Ph&&d.Ch*d.jf>i*10)d.jf=i/d.Ch*10;i>=(this.Ph?2:8)&&Vec2.assign(d.wb,f)}if(a.$a.xga)a.$a.xga=a.$a.xga!=-1&&i>a.$a.xga?0:i;if(!a.$a.xga){i=0;Vec2.assign(d.wb,0,0);Vec2.assign(d.V,0,0)}a.b.yd.height=b.z-d.pc;a.b.yd.yl=this.mEa;a.b.yd.Mh=this.jIa;if(i<(this.Ph?2:8)&&Math.abs(b.z-d.g.z)<8){if(!this.uHa){a.b.yd.height=a.$a.Coa;a.b.yd.yl=a.$a.Gyb;a.b.yd.Mh=a.$a.Mh;a.Cy=a.$a.Cy}a.nB=
a.$a.nB;if(this.Ph)d.jf=a.$a.wz;return h}return y}return h}});ig.la.MOVE_TO_DIR=ig.ta.extend({dir:Vec2.create(),time:0,t:new ig.u({attributes:{dir:{c:"Vec2",d:"Direction to go to",wC:h},time:{c:"Number",d:"Amount of time to move along this point"},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"}}}),f:function(a){assertContent(a,"dir","time");this.dir=a.dir;this.time=a.time;this.lp=a.stopBeforeEdge},start:function(a){a.ib=a.ib+this.time},ya:function(a){var d=
ig.Xe.vG(this.dir,a,b);d&&Vec2.assign(a.b.wb,d);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return a.ib<=0}});ig.la.MOVE_TO_LINE=ig.ta.extend({XNa:Vec2.create(),Pi:Vec2.create(),t:new ig.u({attributes:{XNa:{c:"Vec2",d:"First Point of line",dr:h,kq:h},Pi:{c:"Vec2",d:"Second Point of line",dr:h,kq:h}}}),f:function(a){assertContent(a,"target1","target2");this.XNa=a.target1;this.Pi=a.target2},start:function(a){var b=ig.Xe.vG(this.XNa,a,c),f=ig.Xe.vG(this.Pi,a,d);if(b&&f){var i=
Math.random();a.$a.aDa=Vec2.an(b,f,i,Vec2.create())}else a.$a.aDa=q},ya:function(a){if(a.$a.aDa){var d=Vec2.sub(a.$a.aDa,a.tb(),b);Vec2.assign(a.JRb,d);return Vec2.length(d)<4}return h}});ig.la.MOVE_RANDOM=ig.ta.extend({Ro:0,Fa:10,dDa:1,t:new ig.u({attributes:{Ro:{c:"Number",d:"Minimum time to move"},Fa:{c:"Number",d:"Maximum time to move"},dDa:{c:"Number",d:"How often to change direction while moving. Minimum is 1"},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"}}}),
f:function(a){assertContent(a,"minTime","maxTime");this.Ro=a.minTime;this.Fa=a.maxTime;this.dDa=a.dirChanges||1;this.lp=a.stopBeforeEdge},start:function(a){a.$a.Fa=this.Ro+Math.random()*(this.Fa-this.Ro);a.ib=a.ib+a.$a.Fa;a.$a.pca=0},ya:function(a){if(a.ib<=0)return h;if(a.b.Zo>0.2||a.$a.pca<=0){a.b.Zo=0;a.$a.pca=a.$a.pca+a.$a.Fa/this.dDa;var b=0;do b=Vec2.normalize(Vec2.vc(Math.random()-0.5,Math.random()-0.5));while(a.$a.dir&&Vec2.ug(a.$a.dir,b)>0.5);a.$a.dir=b}a.$a.pca=a.$a.pca-ig.i.ja;Vec2.assign(a.b.wb,
a.$a.dir);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return y}});ig.la.SET_WALK_ANIMS=ig.ta.extend({fd:q,t:new ig.u({attributes:{fd:{c:"WalkAnimConfig",d:"Name of walk anim config"}}}),f:function(a){assertContent(a,"config");this.fd=a.config},ya:function(a){a.JK(this.fd);return h}});var k={S:100,M:150,L:180,XL:220,XXL:270};ig.la.STOP_XY=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){Vec2.Oa(a.b.V,0,0);Vec2.Oa(a.b.wb,0,0);return h}});ig.la.JUMP=ig.ta.extend({HN:q,
Ec:y,LUb:y,t:new ig.u({attributes:{eEb:{c:"String",d:"Height of jump",U:k},Ec:{c:"Boolean",d:"Wait until entity landed on ground"},bea:{c:"Boolean",d:"If true, don't play any sound when jumping up"}}}),f:function(a){assertContent(a,"jumpHeight");this.HN=k[a.jumpHeight];this.Ec=a.wait||y;this.bea=a.ignoreSounds||y},start:function(a){if(!a.b.rt){a.WM(this.HN,q,q,q,this.bea);if(!this.Ec)a.Jg=y}},ya:function(a){return a.b.rt?h:this.Ec?a.b.V.z<=0&&a.b.g.z-a.b.pc<=ig.lf.Zj:h}});ig.la.JUMP_TO_POINT=ig.ta.extend({Saa:0,
offset:q,t:new ig.u({attributes:{target:{c:"Vec3",d:"Point to jump to",wC:h,dr:h,kq:h},pEa:{c:"Number",d:"If defined: force a specific jump duration, setting speed and velocity accordingly. Otherwise, jump height will adapted so point will be reached with current velocity",I:h},tEa:{c:"Number",d:"If defined: force a minimum height for jump",I:h},bea:{c:"Boolean",d:"If true, don't play any sound when jumping up"}}}),f:function(a){this.target=a.target;this.pEa=a.forceDuration||0;this.tEa=a.forceHeight||
0;this.bea=a.ignoreSounds||y},start:function(a){var f=ig.Xe.vq(this.target,a,c),i=a.lc(ig.Pa.BOTTOM,d),i=Vec2.sub(f,i,b),j=Vec2.length(i),k=a.b.Ch*a.b.jf,l,m;if(this.tEa){m=ig.qd.l2a(a.b,a.b.g.z+this.tEa);l=ig.qd.k2a(a.b,f.z,m);k=j/l}else{if(this.pEa){l=this.pEa;k=j/l}else l=j/k;m=ig.qd.pAb(a.b,f.z,l)}a.WM(m,q,q,q,this.bea);a.b.Ze.Am=0;Vec2.assign(a.b.V,i);Vec2.length(a.b.V,k);a.$a.HN=k;a.lu||Vec2.assign(a.face,i)},ya:function(a){var d=ig.Xe.vq(this.target,a,c);if(d){var d=Vec2.sub(d,a.tb(b)),f=Vec2.length(d),
i=a.$a.HN;a.$a.HN*ig.i.ja>f&&(i=f*ig.i.ja);if(f<2)Vec2.assign(a.b.V,0,0);else{Vec2.length(d,i);Vec2.assign(a.b.V,d)}}else return h;if(a.b.V.z<=0&&a.b.g.z==a.b.pc){Vec2.Oa(a.b.V,0,0);return h}return y}});ig.la.SET_GROUND_CONNECTED=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"String",d:"Type of Ground connected",U:ig.hI}}}),f:function(a){assertContent(a,"value");this.value=ig.hI[a.value]},ya:function(a){a.b.rt=this.value;return h}});ig.la.SET_JUMPING=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Boolean",
d:"true iff jumping is enabled"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.nB=this.value;return h}});ig.la.SET_Z_GRAVITY_FACTOR=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"The new z gravity factor"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.Fd=this.value;return h}});ig.la.SET_SIZE=ig.ta.extend({value:0,t:new ig.u({attributes:{size:{c:"Offset",d:"Set new size of entity, keeping XY center alignment. WARNING: MIGHT RESULT IN PHYSICS ISSUES! ONLY USE WHEN NO OVERLAPPING WITH SURROUNDING IS GUARANTEED!"},
Lab:{c:"Boolean",d:"If true: shift entity when colliding with walls on expansion. NOTE: MIGHT NOT ALWAYS WORK"}}}),f:function(a){this.size=a.size;this.Lab=a.shiftOnCollision||y},ya:function(a){a.b.F(this.size.x,this.size.y,this.size.z,h,this.Lab);return h}});ig.la.SET_SPEED=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"New speed value"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.Ch=this.value;return h}});ig.la.SET_RELATIVE_SPEED=ig.ta.extend({value:0,
t:new ig.u({attributes:{value:{c:"Number",d:"Relative Speed value between 0 and 1"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.jf=this.value;return h}});ig.la.SET_ACCEL_SPEED=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"New accel speed value. Something between 1 = fast acceleration. 0 = basically no acceleration"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.ht=this.value;return h}});ig.la.SET_STATIC_TIME=
ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Boolean",d:"Value of static time"}}}),f:function(a){this.value=a.value},ya:function(a){a.b.time.uA=this.value;return h}});ig.la.DETACH_TIME_PARENT=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a.b.time.parent=q;return h}});ig.la.SET_WEIGHT=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"New weight value"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.di=this.value;return h}});
ig.la.SET_FRICTION=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Friction. Value between 0 (slide) and 1 (brake fast)"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.Ze.vg=this.value;return h}});ig.la.SET_AIR_FRICTION=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Air Friction. Value between 0 (slide) and 1 (brake fast)"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.Ze.Am=this.value;return h}});
ig.la.SET_TERRAIN_FRICTION_IGNORE=ig.ta.extend({t:new ig.u({attributes:{value:{c:"Boolean",d:"If true: ignore terrain friction."}}}),f:function(a){this.value=a.value},ya:function(a){a.b.Ze.xN=this.value;return h}});ig.la.SET_SHADOW=ig.ta.extend({size:0,t:new ig.u({attributes:{size:{c:"Number",d:"Size of shadow (in pixel diameter)"},GMa:{c:"String",d:"Set size of shadow",U:ig.nL,I:h}}}),f:function(a){this.size=a.size;this.GMa=a.shadowType},ya:function(a){a.b.Cd.size=this.size;if(this.GMa)this.b.Cd.type=
ig.nL[this.GMa];return h}});ig.la.SET_Z_BOUNCINESS=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Z Bounciness. Value between 0 (none) and 1 (full Speed up again)"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.b.kj=this.value;return h}});ig.la.SET_BOUNCINESS=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Bounciness. Value between 0 (none) and 1 (full Speed up again)"}}}),f:function(a){this.value=a.value},ya:function(a){a.b.Vm=
this.value;return h}});ig.la.SET_FACE_FIX=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Boolean",d:"Wether face direction is fixed or not"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.lu=this.value;return h}});ig.la.SET_FACE=ig.ta.extend({face:q,rotate:y,gj:3,t:new ig.u({attributes:{face:{c:"Face",d:"Direction to face",wC:h},rotate:{c:"Boolean",d:"Rotate entity toward direction",ab:h},gj:{c:"Number",d:"Speed of rotation. Full circles per second",ab:3}}}),
f:function(a){assertContent(a,"face");this.face=a.face;this.rotate=a.rotate||y;this.gj=a.rotateSpeed||3},start:J(),ya:function(a){Vec2.Oa(a.b.wb,0,0);var d=ig.Xe.bFa(this.face,a,b);if(this.rotate)return Vec2.GB(a.face,d,Math.PI*2*ig.i.ja*this.gj);Vec2.assign(a.face,d);return h}});var l={OWN_FACE:function(a){return a.face},ENEMY_DIR:function(a){var b=a.Qd();return!b?q:ig.qd.Wk(a.b,b.b,c)}};ig.la.SET_CLOSEST_FACE=ig.ta.extend({face:q,rotate:y,gj:3,t:new ig.u({attributes:{iE:{c:"String",d:"How to determine best face direction",
U:l},voa:{c:"Array",d:"Face direction options",Xt:{c:"Face",U:ig.Jc.un}},rotate:{c:"Boolean",d:"Rotate entity toward direction",ab:h},gj:{c:"Number",d:"Speed of rotation. Full circles per second",ab:3}}}),f:function(a){this.voa=a.faces;this.rotate=a.rotate||y;this.gj=a.rotateSpeed||3;this.iE=l[a.searchType]||l.OWN_FACE},start:function(a){var d=q,c=-1;a.Qd();var f=this.iE(a);if(f)for(var i=this.voa.length;i--;){var j=ig.Xe.bFa(this.voa[i],a,b),j=Vec2.Qb(j,f);if(c==-1||j<c){c=j;d=this.voa[i]}}a.$a.PYa=
d},ya:function(a){Vec2.Oa(a.b.wb,0,0);if(!a.$a.PYa)return h;var d=ig.Xe.bFa(a.$a.PYa,a,b);if(this.rotate)return Vec2.GB(a.face,d,Math.PI*2*ig.i.ja*this.gj);Vec2.assign(a.face,d);return h}});ig.la.SET_FACE_TO_VEL=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){Vec2.assign(a.face,a.b.V)}});ig.la.ROTATE_FACE=ig.ta.extend({time:0,fP:0,t:new ig.u({attributes:{time:{c:"Number",d:"Amount of time to rotate Face"},fP:{c:"Number",d:"The amount to rotate the face clockwise. 1.0 = full rotation"},
random:{c:"Number",d:"If defined, rotate face randomly. 1=100% random. 0.5= at least 50%, rest random"}}}),f:function(a){this.time=a.time;this.fP=a.turn;this.random=a.random||0},start:function(a){a.ib=this.time;a.$a.fP=this.fP*(1-Math.random()*this.random)},ya:function(a){if(a.$a.fP){Vec2.Oa(a.b.wb,0,0);var b=ig.i.ja;if(b>a.ib)b=a.ib;b<0&&(b=0);Vec2.rotate(a.face,(this.time?a.$a.fP*b/this.time:a.$a.fP)*Math.PI*2)}return a.ib<=0}});ig.la.SET_FACE_TO_DIR=ig.ta.extend({dir:Vec2.create(),t:new ig.u({attributes:{dir:{c:"Vec2",
d:"Direction to go to",wC:h}}}),f:function(a){this.dir=a.dir},start:function(a){Vec2.Oa(a.b.wb,0,0);var d=ig.Xe.vG(this.dir,a,b);d&&Vec2.assign(a.face,d)}});ig.la.SET_FACE_TO_ENTITY=ig.ta.extend({Q:q,rotate:y,gj:3,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to look at"},rotate:{c:"Boolean",d:"Rotate entity toward direction",ab:h},gj:{c:"Number",d:"Speed of rotation. Full circles per second",ab:3}}}),f:function(a){assertContent(a,"entity");this.Q=a.entity;this.rotate=a.rotate||y;this.gj=a.rotateSpeed||
3},ya:function(a){Vec2.Oa(a.b.wb,0,0);var b=ig.Ja.rd(this.Q);if(!b)return h;b=Vec2.sub(b.tb(),a.tb());if(this.rotate)return Vec2.GB(a.face,b,Math.PI*2*ig.i.ja*this.gj);Vec2.assign(a.face,b);return h}});ig.la.SET_COLL_TYPE=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"String",d:"New collision type of entity",U:ig.ca}}}),f:function(a){assertContent(a,"value");assert(ig.ca[a.value]!=g,"Coll Type '"+a.value+"' unknown!");this.value=ig.ca[a.value]},ya:function(a){a.b.vl(this.value);return h}});
ig.la.SET_COLL_SHAPE=ig.ta.extend({value:0,t:new ig.u({attributes:{value:{c:"String",d:"New collision shape of entity",U:ig.Tf}}}),f:function(a){this.value=ig.Tf[a.value]},ya:function(a){a.b.shape=this.value;return h}});ig.la.SET_SLIP_THROUGH=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Boolean",d:"true iff slip through is active (ignoring any kind of collision)"}}}),f:function(a){assertContent(a,"value");this.value=a.value},ya:function(a){a.ALb(this.value);return h}});ig.la.SHOW_ANIMATION=
ig.ta.extend({bb:q,qt:q,Ec:q,ZOa:y,t:new ig.u({attributes:{bb:{c:"EntityAnim",d:"Animation to play"},qt:{c:"EntityAnim",d:"Animation to play after this animation",I:h},Ec:{c:"Boolean",d:"Wait for animation to be finished"},ZOa:{c:"Boolean",d:"if true, fetch the animations via the entities walk config"}}}),f:function(a){assertContent(a,"anim");this.bb=a.anim;this.qt=a.followUp||q;this.Ec=a.wait||y;this.ZOa=a.viaWalkConfig||y},start:function(a){this.ZOa?a.Ma(a.ad[this.bb],h,this.qt?a.ad[this.qt]:q,
h):a.Ma(this.bb,h,this.qt,h);a.eo=h},ya:function(a){if(!this.Ec)return h;if(a.Ya.Xv>=1){a.eo=y;return h}return y}});ig.la.WAIT_UNTIL_ANIM_LOOP_END=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:J(),ya:function(a){return a.Ya.Z1a()==0||a.Ya.pCb()}});ig.la.SHOW_PART_ANIMATION=ig.ta.extend({bb:q,qt:q,Ec:q,t:new ig.u({attributes:{Ck:{c:"String",d:"Name of part to change animation from"},bb:{c:"String",d:"Animation to play"},qt:{c:"String",d:"Animation to play after this animation",I:h}}}),f:function(a){assertContent(a,
"anim");this.Ck=a.partName;this.bb=a.anim;this.qt=a.followUp||q},start:function(a){for(var b=q,a=a.b.qn,d=a.length;d--;)if(a[d].Q.Ck==this.Ck){b=a[d].Q;break}if(b){b.Ma(this.bb,h,this.qt,h);b.eo=h}}});ig.la.SHOW_RANDOM_ANIMATION=ig.ta.extend({eta:q,t:new ig.u({attributes:{eta:{c:"EntityAnimArray",d:"A list of animations. One of them will be shown randomly"}}}),f:function(a){this.eta=a.randAnims},start:function(a){var b=this.eta[Math.floor(Math.random()*this.eta.length)];a.Ma(b,h,q,h);a.eo=h}});ig.la.SHOW_EXTERN_ANIM=
ig.ta.extend({mb:q,$aa:q,hG:q,Tca:q,Ec:q,t:new ig.u({attributes:{bb:{c:"Animation",d:"Animation to play"},qt:{c:"Animation",d:"Animation to play after this animation",I:h},Ec:{c:"Boolean",d:"Wait for animation to be finished"}}}),f:function(a){assertContent(a,"anim");this.mb=new ig.Al(a.anim.sheet);this.$aa=a.anim.name;if(a.followUp){this.hG=new ig.Al(a.followUp.sheet);this.Tca=a.followUp.name}this.Ec=a.wait||y},Ka:function(){this.mb.Tc();this.hG&&this.hG.Tc()},start:function(a){a.Ma(this.mb.Ba[this.$aa],
h,this.hG&&this.hG.Ba[this.Tca],h);a.eo=h},ya:function(a){if(!this.Ec)return h;if(a.Ya.Xv>=1){a.eo=y;return h}return y}});ig.la.CLEAR_ANIMATION=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a.eo=y;return h}});ig.la.SET_COLL_SIZE=ig.ta.extend({t:new ig.u({attributes:{size:{c:"Offset",d:"New size of coll entry"}}}),f:function(a){this.size=a.size},start:function(a){a.b.F(this.size.x,this.size.y,this.size.z,h)}});ig.la.CHANGE_VAR_NUMBER=ig.ta.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",
d:"Variable to change",C2:h},je:{c:"String",d:"Type of modification",U:{set:1,add:1,sub:1,mul:1,div:1,mod:1}},value:{c:"NumberExpression",d:"Value to modify with"}},label:function(){return wm.DKa(this,"CHANGE_VAR_NUMBER","NumberExpression")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value},ya:function(a){var a=ig.Xe.Fr(this.Hd,a),b=ig.Ja.eh(this.value);if(a){b=b*1;if(isNaN(b))ig.log("CHANGE_VAR_NUMBER: (Actor) Invalid value!");
else{if(ig.ma[this.je]){ig.ma[this.je](a,b);return h}ig.log("CHANGE_VAR_NUMBER: (Actor) Invalid change type")}}else ig.log("CHANGE_VAR_NUMBER: (Actor) Variable Name is not a String!")}});ig.la.SET_RANDOM_VAR_NUMBER=ig.ta.extend({Hd:q,min:0,max:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change",C2:h},min:{c:"Integer",d:"Start value"},max:{c:"Integer",d:"End value"}},label:function(){return"<b>RANDOM_NUMBER</b> <code>"+wmPrint("VarName",this.Hd)+" ["+wmPrint("Integer",this.min)+", "+wmPrint("Integer",
this.max)+"]</code>"}}),f:function(a){assertContent(a,"varName","min","max");this.Hd=a.varName;this.min=a.min;this.max=a.max},ya:function(){var a=ig.Ja.Fr(this.Hd);if(a){ig.ma.set(a,~~(Math.random()*this.max)+this.min);return h}ig.log("CHANGE_VAR_NUMBER: (Actor) Variable Name is not a String!")}});ig.la.CHANGE_VAR_BOOL=ig.ta.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change",C2:h},je:{c:"String",d:"Type of modification",U:{set:1,and:1,or:1,xor:1}},value:{c:"BooleanExpression",
d:"Value to modify with"}},label:function(){return wm.DKa(this,"CHANGE_VAR_BOOL","BooleanExpression")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value},ya:function(a){var a=ig.Xe.Fr(this.Hd,a),b=ig.Ja.eh(this.value);if(a){b=!!b;if(ig.ma[this.je]){ig.ma[this.je](a,b);return h}ig.log("CHANGE_VAR_BOOL: Invalid change type")}else ig.log("CHANGE_VAR_BOOL: Variable Name is not a String!")}});ig.la.CHANGE_VAR_STRING=ig.ta.extend({Hd:q,
je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change",C2:h},je:{c:"String",d:"Type of modification",U:{set:1,append:1,prepend:2}},value:{c:"StringExpression",d:"Value to modify with"}},label:function(){return wm.DKa(this,"CHANGE_VAR_STRING","StringExpression")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value},ya:function(a){var a=ig.Xe.Fr(this.Hd,a),b=ig.Ja.eh(this.value);if(a){b=""+b;if(ig.ma[this.je]){ig.ma[this.je](a,
b);return h}ig.log("CHANGE_VAR_STRING: Invalid change type")}else ig.log("CHANGE_VAR_STRING: Variable Name is not a String!")}});ig.la.CHANGE_VAR_LANG=ig.ta.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change",C2:h},je:{c:"String",d:"Type of modification",U:{set:1,append:1,prepend:2}},value:{c:"LangLabel",d:"Value to modify with"}},label:function(){return wm.DKa(this,"CHANGE_VAR_LANG","LangLabel")}}),f:function(a){assertContent(a,"varName","changeType","value");
this.Hd=a.varName;this.je=a.changeType;this.value=new ig.Ra(a.value)},ya:function(a){var a=ig.Xe.Fr(this.Hd,a),b=this.value.toString();if(a){b=""+b;if(ig.ma[this.je]){ig.ma[this.je](a,b);return h}ig.log("CHANGE_VAR_LANG: Invalid change type")}else ig.log("CHANGE_VAR_LANG: Variable Name is not a String!")}});ig.la.SET_ATTRIB_VEC2=ig.ta.extend({name:q,value:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},value:{c:"Vec2Expression",d:"Vec2 value to be set",dr:h,kq:h},yv:{c:"String",
d:"Change attribute to an entity connected to this one",U:ig.jC,I:h}}}),f:function(a){assertContent(a,"name","value");this.name=a.name;this.value=a.value;if(a.changeConnected)this.yv=ig.jC[a.changeConnected]},ya:function(a){var a=this.yv&&this.yv(a)||a,b=ig.Ja.eh(this.value);a.setAttribute(this.name,b);return h}});ig.la.SET_ATTRIB_BOOL=ig.ta.extend({name:q,value:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},value:{c:"BooleanExpression",d:"Bool value to be set"},yv:{c:"String",
d:"Change attribute to an entity connected to this one",U:ig.jC,I:h}}}),f:ig.la.SET_ATTRIB_VEC2.prototype.f,ya:ig.la.SET_ATTRIB_VEC2.prototype.ya});var m={set:function(a,b){return b},append:function(a,b){return a+b},prepend:function(a,b){return b+a}};ig.la.SET_ATTRIB_STRING=ig.ta.extend({name:q,value:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},value:{c:"StringExpression",d:"String value to be set"},je:{c:"String",d:"Type of modification",U:m,I:h},yv:{c:"String",
d:"Change attribute to an entity connected to this one",U:ig.jC,I:h}}}),f:function(a){this.name=a.name;this.value=a.value;this.je=m[a.changeType]||m.set;if(a.changeConnected)this.yv=ig.jC[a.changeConnected]},ya:function(a){var a=this.yv&&this.yv(a)||a,b=ig.Ja.eh(this.value),d=a.getAttribute(this.name)||"",b=this.je(d,b);a.setAttribute(this.name,b);return h}});var n={set:function(a,b){return b},add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,
b){return a/b},mod:function(a,b){return a%b}};ig.la.SET_ATTRIB_NUMBER=ig.ta.extend({Nw:q,nX:q,value:0,t:new ig.u({attributes:{Nw:{c:"String",d:"Name of Var"},je:{c:"String",d:"Type of modification",U:n},value:{c:"NumberExpression",d:"Value to modify with"},yv:{c:"String",d:"Change attribute to an entity connected to this one",U:ig.jC,I:h}}}),f:function(a){this.Nw=a.attribName;this.nX=n[a.changeType]||n.set;this.value=a.value||0;if(a.changeConnected)this.yv=ig.jC[a.changeConnected]},ya:function(a){var a=
this.yv&&this.yv(a)||a,b=a.getAttribute(this.Nw)||0,d=ig.Ja.eh(this.value),b=this.nX(b,d*1);a.setAttribute(this.Nw,b);return h}});ig.la.SET_ATTRIB_NUMBER_RANDOM=ig.ta.extend({Nw:q,t:new ig.u({attributes:{Nw:{c:"String",d:"Name of Var"},je:{c:"String",d:"Type of modification",U:n},sB:{c:"NumberExpression",d:"Value to modify with"},fh:{c:"NumberExpression",d:"Value to modify with"},yv:{c:"String",d:"Change attribute to an entity connected to this one",U:ig.jC,I:h}}}),f:function(a){this.Nw=a.attribName;
this.nX=n[a.changeType]||n.set;this.sB=a.minValue||0;this.fh=a.maxValue||0;if(a.changeConnected)this.yv=ig.jC[a.changeConnected]},ya:function(a){var a=this.yv&&this.yv(a)||a,b=a.getAttribute(this.Nw)||0,d=ig.Ja.eh(this.sB),c=ig.Ja.eh(this.fh),d=d*1,c=c*1,d=d+Math.floor(Math.random()*(c-d+1)),b=this.nX(b,d);a.setAttribute(this.Nw,b);return h}});var o={TARGET:function(a){return a.Qd()},SELF:aa()};ig.la.SET_ATTRIB_FACE=ig.ta.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},
target:{c:"String",d:"From what kind of entity to select",U:o}}}),f:function(a){this.name=a.name;this.target=o[a.target]||o.TARGET},start:function(a){var b=this.target(a);b&&a.setAttribute(this.name,Vec2.create(b.face))},ya:N(h)});ig.la.SET_ATTRIB_POS=ig.ta.extend({name:q,value:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},target:{c:"String",d:"From what kind of entity to select",U:o},align:{c:"String",d:"Alignment on how to set pos from target",U:ig.Pa},offset:{c:"Offset",
d:"Offset to position",I:h},ZDa:{c:"Number",d:"Distance applied along face direction of target"},aEa:{c:"Integer",d:"If defined: round face direction to fixed number of directions",I:h}}}),f:function(a){this.name=a.name;this.target=o[a.target]||o.TARGET;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.offset=a.offset;this.ZDa=a.faceDistance||0;this.aEa=a.faceRound||0},start:function(a){var b=this.target(a);if(b){var d=b.lc(this.align,Vec3.create());this.offset&&Vec3.add(d,this.offset);if(this.ZDa){b=
Vec2.assign(i,b.face);this.aEa&&ig.S4(b.x,b.y,this.aEa,b);Vec2.length(b,this.ZDa);Vec2.add(d,b)}a.setAttribute(this.name,d)}},ya:function(){ig.Ja.eh(this.value);return h}});ig.la.PLAY_SOUND=ig.ta.extend({$b:q,global:y,loop:y,yf:q,t:new ig.u({attributes:{$b:{c:"SoundT",d:"URL of sound."},volume:{c:"Number",d:"The volume. Value between 0 and 1.",ab:1},yl:{c:"Number",d:"Variance of sound source",I:h},global:{c:"Boolean",d:"Play sound globally without 3D sound."},loop:{c:"Boolean",d:"Loop sound if true"},
speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h},bEa:{c:"Number",d:"Fade duration of sound when canceled. Increase in case of sound artifacts",I:h},Se:{c:"Number",d:"Radius up to which you can hear the sound",I:h},nNa:{c:"VarName",d:"Variable which value with increase the speed",I:h},Hbb:{c:"Number",d:"Factor multiplied with variable before being added to speed",I:h}}}),f:function(a){assertContent(a,"sound");this.$b=new ig.ka(a.sound,a.volume||1,a.variance||0);this.global=
a.global||y;this.loop=a.loop||y;this.Se=a.radius||0;this.nNa=a.speedVar;this.Hbb=a.speedVarFactor||1;this.yf={speed:a.speed||1,fadeDuration:a.fadeDuration||0}},Ka:function(){this.$b.Ka()},ya:function(a){var b=this.yf;if(this.nNa){var b=ig.copy(this.yf),d=(ig.ma.get(this.nNa)||0)*this.Hbb;b.speed=b.speed+d}b=this.global?this.$b.play(this.loop,b):ig.ah.gh(this.$b,a,this.loop,b,this.Se);this.loop&&a.Hj(b);return h}});ig.la.STOP_SOUNDS=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(b){b.rX(a);
return h}});ig.la.PLAY_RANDOM_SOUND=ig.ta.extend({Na:[],global:y,loop:y,yf:q,t:new ig.u({attributes:{Na:{c:"Array",d:"Sound to be played random",Xt:{c:"SoundConfig"}},global:{c:"Boolean",d:"Play sound globally without 3D sound."},loop:{c:"Boolean",d:"Loop sound if true"},speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h}}}),f:function(a){for(var b=0;b<a.sounds.length;++b){var d=a.sounds[b];this.Na.push(new ig.ka(d.sound,d.volume||1,d.variance||0))}this.global=a.global||y;
this.loop=a.loop||y;this.yf={speed:a.speed||1}},Ka:function(){for(var a=this.Na.length;a--;)this.Na[a].Ka()},ya:function(a){var b;b=this.Na.random();b=this.global?b.play(this.loop,this.yf):ig.ah.gh(b,a,this.loop,this.yf);this.loop&&a.Hj(b);return h}});ig.la.HIDE=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a.hide();return h}});ig.la.HIDE_OTHER=ig.ta.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Other entity to hide"}}}),f:function(a){this.Q=a.entity},ya:function(){var a=ig.Ja.rd(this.Q);
a&&a.hide();return h}});ig.la.SET_POS=ig.ta.extend({WN:q,t:new ig.u({attributes:{WN:{c:"Vec3",d:"Position to move to.",kq:h,dr:h,wC:h}}}),f:function(a){this.WN=a.newPos},start:function(a){var b=ig.Ja.vq(this.WN,t),d=a.b;a.l(b.x-d.size.x/2,b.y-d.size.y/2,b.z)}});ig.la.ROUND_POSITION=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){var b=a.b;a.l(Math.round(b.g.x),Math.round(b.g.y),b.g.z)}});ig.la.ADD_Z_POS_DELTA=ig.ta.extend({Uia:q,t:new ig.u({attributes:{Uia:{c:"NumberVary",d:"Delta to add to z pos instantly"}}}),
f:function(a){this.Uia=a.zDelta},start:function(a){var b=ig.Ja.yY(this.Uia);a.l(g,g,a.b.g.z+b)}});ig.la.TELEPORT_TO_ATTRIB_POS=ig.ta.extend({WN:q,t:new ig.u({attributes:{ir:{c:"String",d:"Name of attribute containing position to teleport to"}}}),f:function(a){this.ir=a.attrib},start:function(a){var b=a.MEa(this.ir);if(b){b=Vec3.assign(t,b);b.x=b.x-a.b.size.x/2;b.y=b.y-a.b.size.y/2;a.l(b.x,b.y,b.z)}}});var t=Vec3.vc(0,0,0);ig.la.INTERPOLATE_POSITION=ig.ta.extend({WN:q,duration:0,Vg:q,iOa:y,t:new ig.u({attributes:{WN:{c:"Vec3",
d:"Position to move to.",kq:h,dr:h,wC:h},duration:{c:"Number",d:"Time the movement should take."},Vg:{c:"String",d:"The KEYSPLINE to use.",U:KEY_SPLINES},iOa:{c:"Boolean",d:"If true, then time is for movement over one tile, scaled by total distance",ab:y}}}),f:function(a){this.WN=a.newPos;this.duration=a.duration||0;this.Vg=KEY_SPLINES[a.keySpline||"LINEAR"];this.iOa=a.timePerTile||y},start:function(a){a.$a.Sf=a.lc(ig.Pa.BOTTOM);if(this.iOa){var b=ig.Xe.vq(this.WN,a,c);Vec3.sub(b,a.$a.Sf);b=Vec3.length(b);
a.$a.duration=b/16*this.duration}else a.$a.duration=this.duration;a.ib=a.$a.duration},ya:function(a){var b=1-(a.ib/a.$a.duration).Rb(0,1),b=this.Vg.get(b),d=ig.Xe.vq(this.WN,a,c);Vec3.an(a.$a.Sf,d,b,t);a.l(t.x-a.b.size.x/2,t.y-a.b.size.y/2,t.z,h);return b>=1}});ig.la.Z_INTERPOLATE=ig.ta.extend({JIa:0,duration:0,Vg:q,t:new ig.u({attributes:{JIa:{c:"Number",d:"New z post to move to."},duration:{c:"Number",d:"Time the movement should take."},Vg:{c:"String",d:"The KEYSPLINE to use.",U:KEY_SPLINES}}}),
f:function(a){this.JIa=a.newZPos||0;this.duration=a.duration||0;this.Vg=KEY_SPLINES[a.keySpline||"LINEAR"]},start:function(a){a.ib=this.duration;a.$a.gPb=a.b.g.z},ya:function(a){var b=1-(a.ib/this.duration).Rb(0,1),b=this.Vg.get(b);a.IH(a.$a.gPb*(1-b)+this.JIa*b);return b>=1}});ig.la.DO_ATTRIB_ACTION=ig.ta.extend({t:new ig.u({attributes:{ir:{c:"String",d:"Name of attribute that stores action"},Du:{c:"Boolean",d:"If true, do not reset state before switching to action. Also keeps actionAttached!"},
U9a:{c:"Boolean",d:"If true, resume stashed action if available"}}}),f:function(a){this.ir=a.attrib;this.Du=a.noStateReset||y;this.U9a=a.resumeStashed||y},start:function(a){var b=a.getAttribute(this.ir);this.U9a&&a.Uu.action==b?a.Vga(this.Du):a.Zf(b,y,this.Du)}});ig.la.ADD_ANIM_MOD=ig.ta.extend({t:new ig.u({attributes:{name:{c:"String",d:"Name under which to access anim mod. Anim mods of same name will be removed."},RK:{c:"Integer",d:"Sprite filter for animation modification"},ow:{c:"NumberExpression",
d:"The KEYSPLINE to use.",I:h}}}),f:function(a){this.name=a.name;this.RK=a.spriteIdx||0;this.ow=a.tileOffset||0},start:function(a){(new ig.Yia(a,this.RK,this.name)).ow=ig.Ja.eh(this.ow)}});ig.la.REMOVE_ANIM_MOD=ig.ta.extend({t:new ig.u({attributes:{name:{c:"String",d:"If defined, only remove mod with given name",I:h}}}),f:function(a){this.name=a.name},start:function(a){ig.Yia.z9a(a,this.name)}})});ig.J=h;
ig.N("impact.feature.base.event-steps").O("impact.base.utils","impact.base.event","impact.base.action").K(function(){function a(a){switch(a){case "set":return"=";case "add":return"+=";case "sub":return"-=";case "mul":return"*=";case "div":return"/=";case "mod":return"%=";case "and":return"&=";case "or":return"|=";case "xor":return"XOR";case "append":return"+=";case "prepend":return"+="}return"???"}var b=/^(\d+)_(\d+)$/;ig.oa.SELECT_RANDOM=ig.qa.extend({options:[],uf:{},t:new ig.u({attributes:{options:{c:"RandomDistribution",
d:"RandomDistribution",w2:h}},NF:function(a){if(a=="_end")return"END_SELECT_RANDOM";var c=b.exec(a);if(c){var a=c[1],c=c[2],i="";this.options[a].lq&&(i=i+("("+this.options[a].lq+")"));return"Entry "+a+" #"+c+" "+i+" weight "+this.options[a].di}return"???"}}),f:function(a){for(var a=a.options||[],b=0;b<a.length;++b){var c={count:a[b].count,di:a[b].weight,lq:new ig.de(a[b].activeCondition)};c.dp=c.count*c.di;this.options[b]=c}},eB:function(){for(var a=[],b=0;b<this.options.length;++b)for(var c=this.options[b],
j=0;j<c.count;++j)a.push(b+"_"+j);return a},Lv:function(){for(var a=0,b=this.options.length;b--;)this.options[b].lq.evaluate()&&(a=a+this.options[b].dp);a=Math.random()*a;for(b=this.options.length;b--;)if(this.options[b].lq.evaluate())if(a>=this.options[b].dp)a=a-this.options[b].dp;else break;a=this.options[b];if(!a)return this.Ok;a=Math.floor(a.count*Math.random());return this.uf[b+"_"+a]||this.Ok}});ig.oa.LABEL=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of the label"}},
label:function(){return"<b>LABEL</b> <i>"+this.name+"</i>"}}),f:function(a){assertContent(a,"name");this.name=a.name}});ig.oa.GOTO_LABEL=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Label to move to."}},label:function(){return"<b>GOTO_LABEL</b> <i>"+this.name+"</i>"}}),f:function(a){assertContent(a,"name");this.name=a.name},wY:M("name")});ig.oa.GOTO_LABEL_WHILE=ig.qa.extend({name:q,fb:q,t:new ig.u({attributes:{name:{c:"String",d:"Label to move to."},fb:{c:"VarCondition",d:"Condition to jump to the label"}},
label:function(){return"<b>GOTO_LABEL</b> <i>"+this.name+"</i> <b>WHILE</b> <i>"+this.fb+"</i>"}}),f:function(a){assertContent(a,"name");this.name=a.name;this.fb=new ig.de(a.condition)},wY:function(){return this.fb.evaluate()?this.name:q}});ig.oa.WAIT=ig.qa.extend({time:0,Le:0,aea:y,t:new ig.u({attributes:{time:{c:"NumberExpression",d:"Time to wait in seconds"},aea:{c:"Boolean",d:"Ignore slow down rate on wait"}}}),f:function(a){assertContent(a,"time");this.time=a.time;this.aea=a.ignoreSlowDown||
y},start:function(a){a.Le=ig.Ja.eh(this.time)},ya:function(a){a.Le=a.Le-(this.aea?ig.i.Sa:ig.i.ja);return a.Le<=0}});ig.oa.WAIT_UNTIL_TRUE=ig.qa.extend({fb:q,Le:0,aea:y,t:new ig.u({attributes:{fb:{c:"VarCondition",d:"Condition to evaluate to true to continue"},Fa:{c:"NumberExpression",d:"If defined: maximal wait this time",I:h}}}),f:function(a){assertContent(a,"condition");this.fb=new ig.de(a.condition);this.Fa=a.maxTime},start:function(a){var b=ig.Ja.eh(this.Fa);a.Le=b},ya:function(a){if(a.Le){a.Le=
a.Le-ig.i.ja;if(a.Le<=0)return h}return this.fb.evaluate()}});ig.oa.WAIT_UNTIL_ACTION_DONE=ig.qa.extend({Q:0,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to move",dr:h,bh:"Entity"}}}),f:function(a){assertContent(a,"entity");this.Q=a.entity},start:function(a,b){var c=ig.Ja.rd(this.Q,b);if(c){a.MI=c;a.mVa=c.ed}},ya:function(a){return!a.MI?h:a.mVa&&a.MI.ed==a.mVa||a.MI.af&&a.MI.af.n?y:h}});ig.oa.STOP_SKIP_MODE=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){ig.i.Un=y}});ig.oa.SET_ENTITY_STATIC_TIME=
ig.qa.extend({Q:q,value:h,global:y,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"},value:{c:"Boolean",d:"true: Entity ignores world speed slow down. false: entity is slowed down."},global:{c:"Boolean",d:"If true, set static time globally"}}}),f:function(a){assertContent(a,"entity","value");this.Q=a.entity;this.value=a.value;this.global=a.global},start:function(a,b){var c=ig.Ja.rd(this.Q,b);this.global?c.b.time.Im=this.value:c.b.time.uA=this.value}});ig.oa.SET_ENTITY_POS=ig.qa.extend({Q:q,
position:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"},position:{c:"Vec3",d:"New position of entity",_pointSelect:h}}}),f:function(a){assertContent(a,"entity","position");this.Q=a.entity;this.position=a.position},start:function(a,b){var i=ig.Ja.rd(this.Q,b);if(i){var j=ig.Ja.vq(this.position,c),k=i.b;i.l(j.x-k.size.x/2,j.y-k.size.y/2,j.z)}}});ig.oa.SET_ENTITY_POS_TO_ENTITY=ig.qa.extend({Q:q,position:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be placed"},m9a:{c:"Entity",
d:"Entity used to determine position"},offset:{c:"Offset",d:"Offset to entity position"}}}),f:function(a){this.Q=a.entity;this.m9a=a.refEntity;this.offset=a.offset},start:function(a,b){var i=ig.Ja.rd(this.Q,b),j=ig.Ja.rd(this.m9a,b);if(i&&j){j=j.lc(ig.Pa.BOTTOM,c);this.offset&&Vec3.add(j,this.offset);var k=i.b;i.l(j.x-k.size.x/2,j.y-k.size.y/2,j.z)}}});ig.oa.SET_ENTITY_ON_TOP_OTHER=ig.qa.extend({Q:q,GY:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"},GY:{c:"Entity",d:"Entity the first entity should stand on"}}}),
f:function(a){assertContent(a,"entity","groundEntity");this.Q=a.entity;this.GY=a.groundEntity},start:function(a,b){var c=ig.Ja.rd(this.Q,b),j=ig.Ja.rd(this.GY,b);c.IH(j.b.g.z+j.b.size.z);c.b.sha(j.b);c.b.V.z=0}});var c=Vec3.create();ig.oa.ADJUST_ENTITY_POS=ig.qa.extend({Q:q,offset:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"},offset:{c:"Vec3",d:"Offset applied to entity position ",xRb:h}}}),f:function(a){assertContent(a,"entity","offset");this.Q=a.entity;this.offset=a.offset},
start:function(a,b){var i=ig.Ja.rd(this.Q,b),j=ig.Ja.vq(this.offset,c);i.l(i.b.g.x+j.x,i.b.g.y+j.y,i.b.g.z+j.z)}});ig.oa.HIDE_ENTITY=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be hidden"},Lha:{c:"Boolean",d:"If true: Skip effects when showing entity"}}}),f:function(a){assertContent(a,"entity");this.Q=a.entity;this.Lha=a.skipEffects},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&!c.Og&&(this.Lha?c.hide():ig.r.D9a(c))}});ig.oa.SHOW_ENTITY=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",
d:"Entity to be shown"},Lha:{c:"Boolean",d:"If true: Skip effects when showing entity"}}}),f:function(a){assertContent(a,"entity");this.Q=a.entity;this.Lha=a.skipEffects},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c.Og&&c.show(this.Lha)}});ig.oa.SHOW_ANIMATION=ig.qa.extend({Q:q,bb:q,reset:y,qt:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed",bh:"Entity"},bb:{c:"EntityAnim",d:"Name of the new animation"},reset:{c:"Boolean",d:"Reset current animation state"},qt:{c:"EntityAnim",
d:"Aninmation that follows the set animation",I:h}}}),f:function(a){assertContent(a,"entity","anim");this.Q=a.entity;this.bb=a.anim;this.reset=a.reset||y;this.qt=a.followUp||q},start:function(a,b){ig.Ja.rd(this.Q,b).Ma(this.bb,this.reset,this.qt,h)}});ig.oa.SHOW_EXTERN_ANIM=ig.qa.extend({Q:q,mb:q,$aa:q,hG:q,Tca:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"},bb:{c:"Animation",d:"Animation to play"},qt:{c:"Animation",d:"Animation to play after this animation",I:h}}}),f:function(a){assertContent(a,
"entity","anim");this.Q=a.entity;this.mb=new ig.Al(a.anim.sheet);this.$aa=a.anim.name;if(a.followUp){this.hG=new ig.Al(a.followUp.sheet);this.Tca=a.followUp.name}},Ka:function(){this.mb.Tc();this.hG&&this.hG.Tc()},start:function(a,b){var c=ig.Ja.rd(this.Q,b);if(c){c.Ma(this.mb.Ba[this.$aa],h,this.hG&&this.hG.Ba[this.Tca],h);c.eo=h}}});ig.oa.CLEAR_ANIMATION=ig.qa.extend({t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to be changed"}}}),f:function(a){this.Q=a.entity},start:function(a,b){var c=ig.Ja.rd(this.Q,
b);if(c)c.eo=y}});ig.oa.DO_ACTION=ig.qa.extend({Q:0,action:q,Ec:y,wHa:y,MI:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to move",dr:h,bh:"Entity"},action:{c:"Action",d:"The action to perform",yRb:ig.la},oLa:{c:"Boolean",d:"Repeat Action"},Ec:{c:"Boolean",d:"Wait until action is finished"},wHa:{c:"Boolean",d:"Don't reset entity state after action"},Bs:{c:"Boolean",d:"If true: execute action immediately not interrupting currently running action. Will only execute steps without wait duration."}},
width:500}),f:function(a){assertContent(a,"entity","action");this.Q=a.entity;this.action=new ig.Xe("[GENERIC]",a.action,y,a.repeating);this.action.sq=h;this.Ec=a.wait||y;this.wHa=a.keepState||y;this.Bs=a.immediately||y},Ka:function(){this.action&&this.action.Ka()},start:function(a,b){var c=ig.Ja.rd(this.Q,b);a.MI=c;if(this.Bs){c.Cua(h);c.Zf(this.action);c.rEa();c.Vga(h)}else c&&c.Zf(this.action,this.wHa)},ya:function(a){return this.Bs||!a.MI||!this.Ec?h:a.MI.ed==this.action||a.MI.af&&a.MI.af.n?y:
h}});ig.oa.TELEPORT=ig.qa.extend({map:"",If:"",t:new ig.u({attributes:{map:{c:"Maps",d:"Map to be teleported to",bh:"Map"},If:{c:"Marker",d:"Marker on Map to be teleported to"}}}),f:function(a){assertContent(a,"map");this.map=a.map;this.If=a.marker},start:function(){ig.r.Mf(this.map,this.If?new ig.tC(this.If):q)}});ig.oa.IF=ig.qa.extend({fb:q,Mx:y,uf:{},t:new ig.u({attributes:{fb:{c:"VarCondition",d:"Condition for IF statement"},Mx:{c:"Boolean",d:"With else case.",w2:h}},NF:function(a){switch(a){case "thenStep":return q;
case "elseStep":return"else";case "_end":return"endif"}return"???"}}),f:function(a){this.fb=new ig.de(a.condition);this.Mx=a.withElse},eB:function(){return this.Mx?["thenStep","elseStep"]:["thenStep"]},Lv:function(){return this.fb.evaluate()?this.uf.thenStep?this.uf.thenStep:this.Ok:this.uf.elseStep?this.uf.elseStep:this.Ok}});ig.oa.FORK_CONDITION=ig.oa.IF;ig.oa.CHANGE_VAR_NUMBER=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",
U:{set:1,add:1,sub:1,mul:1,div:1,mod:1}},value:{c:"NumberExpression",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){return"<b>VAR_NUMBER</b> <code>"+wmPrint("VarName",this.Hd)+" "+a(this.je)+" "+wmPrint("NumberExpression",this.value)+"</code>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value;this.map=a.map},
start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=ig.Ja.eh(this.value);if(a){b=b*1;if(isNaN(b))ig.log("CHANGE_VAR_NUMBER: Invalid value!");else if(ig.ma[this.je])ig.ma[this.je](a,b);else ig.log("CHANGE_VAR_NUMBER: Invalid change type")}else ig.log("CHANGE_VAR_NUMBER: Variable Name is not a String!")}});ig.oa.SET_RANDOM_VAR_NUMBER=ig.qa.extend({Hd:q,min:0,max:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change",
C2:h},min:{c:"Integer",d:"Start value"},max:{c:"Integer",d:"End value"}},label:function(){return"<b>RANDOM_NUMBER</b> <code>"+wmPrint("VarName",this.Hd)+" ["+wmPrint("Integer",this.min)+", "+wmPrint("Integer",this.max)+"]</code>"}}),f:function(a){assertContent(a,"varName","min","max");this.Hd=a.varName;this.min=a.min;this.max=a.max},start:function(){var a=ig.Ja.Fr(this.Hd);a?ig.ma.set(a,~~(Math.random()*this.max)+this.min):ig.log("CHANGE_VAR_NUMBER: (Actor) Variable Name is not a String!")}});ig.oa.ROUND_VAR_NUMBER=
ig.qa.extend({Hd:q,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to round",C2:h}},label:function(){return"<b>ROUND_NUMBER</b> <code>"+wmPrint("VarName",this.Hd)+"</code>"}}),f:function(a){assertContent(a,"varName");this.Hd=a.varName},start:function(){var a=ig.Ja.Fr(this.Hd);a?ig.ma.set(a,Math.round(ig.ma.get(a))):ig.log("CHANGE_VAR_NUMBER: (Actor) Variable Name is not a String!")}});ig.oa.SET_VAR_TIME=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to store current timestamp in milliseconds"}}}),
f:function(a){this.Hd=a.varName},start:function(){var a=ig.Ja.Fr(this.Hd);a?ig.ma.set(a,Date.now()):ig.log("SET_VAR_TIME: Variable Name is not a String!")}});ig.oa.CHANGE_VAR_VEC2=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",U:{set:1,add:1,sub:1,mul:1,div:1}},value:{c:"Vec2Expression",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){return"<b>VAR_VEC2</b> <i>"+
wmPrint("VarName",this.Hd)+" "+a(this.je)+" "+wmPrint("Vec2Expression",this.value)+"</i>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value;this.map=a.map},start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=ig.Ja.eh(this.value);if(a)if(!b||b.y===g)ig.log("CHANGE_VAR_VEC2: value is not a Vec2!");else if(this.je=="set")ig.ma.set(a,
b);else{var c=ig.ma.get(a);if(c||c.y===g)ig.log("CHANGE_VAR_VEC2: dest is not a Vec2!");else{switch(this.je){case "add":Vec2.add(c,b);break;case "sub":Vec2.sub(c,b);break;case "mul":Vec2.FZ(c,b);break;case "div":Vec2.tca(c,b)}ig.ma.set(a,c)}}else ig.log("CHANGE_VAR_VEC2: Variable Name is not a String!")}});ig.oa.CHANGE_VAR_VEC3=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",U:{set:1,add:1,sub:1,mul:1,div:1}},
value:{c:"Vec3Expression",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){return"<b>VAR_VEC3</b> <i>"+wmPrint("VarName",this.Hd)+" "+a(this.je)+" "+wmPrint("Vec3Expression",this.value)+"</i>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value;this.map=a.map},start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&
(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=ig.Ja.eh(this.value);if(a)if(!b||b.z===g)ig.log("CHANGE_VAR_VEC3: value is not a Vec3!");else if(this.je=="set")ig.ma.set(a,b);else{var c=ig.ma.get(a);if(c||c.z===g)ig.log("CHANGE_VAR_VEC3: dest is not a Vec3!");else{switch(this.je){case "add":Vec3.add(c,b);break;case "sub":Vec3.sub(c,b);break;case "mul":Vec3.FZ(c,b);break;case "div":Vec3.tca(c,b)}ig.ma.set(a,c)}}else ig.log("CHANGE_VAR_VEC3: Variable Name is not a String!")}});ig.oa.CHANGE_VAR_BOOL=
ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",U:{set:1,and:1,or:1,xor:1}},value:{c:"BooleanExpression",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){return"<b>VAR_BOOL</b> <code>"+wmPrint("VarName",this.Hd)+" "+a(this.je)+" "+wmPrint("BooleanExpression",this.value)+"</code>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,
"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value;this.map=a.map},start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=ig.Ja.eh(this.value);if(a){b=!!b;if(ig.ma[this.je])ig.ma[this.je](a,b);else ig.log("CHANGE_VAR_BOOL: Invalid change type")}else ig.log("CHANGE_VAR_BOOL: Variable Name is not a String!")}});ig.oa.CLEAR_TEMP_STORAGE=ig.qa.extend({t:new ig.u({attributes:{},label:N("<b>VAR CLEAR TEMP</b>")}),
f:J(),start:function(){ig.ma.$vb()}});ig.oa.CHANGE_VAR_STRING=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",U:{set:1,append:1,prepend:2}},value:{c:"StringExpression",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){var b,c;if(this.je=="prepend"){b=wmPrint("StringExpression",this.value);c=wmPrint("VarName",this.Hd)}else{b=wmPrint("VarName",
this.Hd);c=wmPrint("StringExpression",this.value)}return"<b>VAR_STRING</b> <i>"+b+" "+a(this.je)+" "+c+"</i>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=a.value;this.map=a.map},start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=ig.Ja.eh(this.value);if(a){b=""+b;if(ig.ma[this.je])ig.ma[this.je](a,b);else ig.log("CHANGE_VAR_STRING: Invalid change type")}else ig.log("CHANGE_VAR_STRING: Variable Name is not a String!")}});
ig.oa.CHANGE_VAR_LANG=ig.qa.extend({Hd:q,je:q,value:0,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to change"},je:{c:"String",d:"Type of modification",U:{set:1,append:1}},value:{c:"LangLabel",d:"Value to modify with"},map:{c:"Maps",d:"Change Var from within this map. Will replace map. prefix",bh:"Map",I:h}},label:function(){return"<b>VAR_LANG</b> <i>"+wmPrint("VarName",this.Hd)+" "+a(this.je)+" "+wmPrint("LangLabel",this.value)+"</i>"+(this.map?" ("+this.map+")":"")}}),f:function(a){assertContent(a,
"varName","changeType","value");this.Hd=a.varName;this.je=a.changeType;this.value=new ig.Ra(a.value);this.map=a.map},start:function(){var a=ig.Ja.Fr(this.Hd);if(this.map){a.QU("map.")&&(a=a.substr(4));a="maps."+this.map.vm("","").np()+"."+a}var b=this.value.toString();if(a){b=""+b;if(ig.ma[this.je])ig.ma[this.je](a,b);else ig.log("CHANGE_VAR_STRING: Invalid change type")}else ig.log("CHANGE_VAR_STRING: Variable Name is not a String!")}});ig.oa.SET_ATTRIB_VEC2=ig.qa.extend({LW:0,name:q,value:q,t:new ig.u({attributes:{LW:{c:"Actor",
d:"Actor to change"},name:{c:"String",d:"Name of enemy attribute to set"},value:{c:"Vec2Expression",d:"Vec2 value to be set",kq:h}}}),f:function(a){assertContent(a,"actor","name","value");this.LW=a.actor;this.name=a.name;this.value=a.value},start:function(a,b){var c=ig.Ja.rd(this.LW,b);if(c){var j=ig.Ja.eh(this.value);c.setAttribute(this.name,j)}}});ig.oa.SET_ATTRIB_VEC3=ig.qa.extend({LW:0,name:q,value:q,t:new ig.u({attributes:{LW:{c:"Actor",d:"Actor to change"},name:{c:"String",d:"Name of actor attribute to set"},
value:{c:"Vec3Expression",d:"Vec3 value to be set",kq:h}}}),f:ig.oa.SET_ATTRIB_VEC2.prototype.f,start:ig.oa.SET_ATTRIB_VEC2.prototype.start});ig.oa.SET_ATTRIB_STRING=ig.qa.extend({LW:0,name:q,value:q,t:new ig.u({attributes:{LW:{c:"Actor",d:"Actor to change"},name:{c:"String",d:"Name of enemy attribute to set"},value:{c:"StringExpression",d:"String value to be set"}}}),f:ig.oa.SET_ATTRIB_VEC2.prototype.f,start:ig.oa.SET_ATTRIB_VEC2.prototype.start});ig.oa.PLAY_SOUND=ig.qa.extend({$b:q,position:{x:0,
y:0},loop:y,yf:q,name:q,speed:q,t:new ig.u({attributes:{$b:{c:"SoundT",d:"URL of sound."},volume:{c:"Number",d:"The volume. Value between 0 and 1.",ab:1},position:{c:"Vec2",d:"The position to play the sound at.",kq:h,I:h},name:{c:"String",d:"A name for the sound, is only valid if loop is true."},loop:{c:"Boolean",d:"True if the sound should loop. <i>EXPERIMENTAL!</i>"},offset:{c:"Number",d:"Offset to start the sound at. <i>EXPERIMENTAL!</i>"},startTime:{c:"Number",d:"Time to wait before playing the sound. <i>EXPERIMENTAL!</i>"},
speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h}}}),f:function(a){assertContent(a,"sound");this.$b=new ig.ka(a.sound,a.volume||1,a.variance||0);this.position=a.position||q;this.yf={offset:a.offset||0,startTime:a.startTime||0,speed:a.speed||1};this.loop=a.loop||y;this.name=a.name||q},Ka:function(){this.$b.Ka()},start:function(){var a;if(this.name&&this.loop){a=this.$b.play(this.loop,this.yf);ig.ke.gYa(this.name,a)}else a=this.$b.play(y,this.yf);a&&this.position&&a.Qta(this.position,
q)}});ig.oa.STOP_SOUND=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"The of the sound to stop"}}}),f:function(a){this.name=a.name||q},start:function(){this.name&&ig.ke.fcb(this.name)}});ig.oa.SET_MOVING_LAYER_STOP=ig.qa.extend({t:new ig.u({attributes:{bl:{c:"Boolean",d:"If true: stop moving layers"}}}),f:function(a){this.bl=a.stopped||y},start:function(){for(var a=ig.r.Df,b=a.length;b--;)a[b]instanceof ig.$j.MovingParallax&&a[b].ILb(this.bl)}});ig.pja={LOG:function(a){ig.log(a)},
WARN:function(a){ig.warn(a)},DEBUG:function(a){ig.debug(a)}};ig.oa.CONSOLE_LOG=ig.qa.extend({text:q,yCa:ig.pja.Uja,t:new ig.u({attributes:{text:{c:"String",d:"The text to display on the console. "},yCa:{c:"String",d:"The type of the console log.",U:ig.pja}}}),f:function(a){this.text=a.text||q;this.yCa=a.consoleType||ig.pja.Uja},start:function(){if(this.text)ig.pja[this.yCa](this.text)}})});ig.J=h;
ig.N("impact.feature.base.entities.marker").O("impact.base.actor-entity").K(function(){ig.wa.Marker=ig.Kc.extend({name:"",dir:q,face:Vec2.create(),t:new ig.u({Dd:h,attributes:{name:{c:"String",d:"Name of Marker. This will be referred in teleport commands."},dir:{c:"String",d:"Direction player is facing when teleported to this spot.",U:ig.Jc.Lk},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h,I:h}},label:function(){return"(face: "+this.dir+")"},Uk:h,Sl:"rgba(255,255,0, 0.5)"}),f:function(a,
b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(32,32,0);this.dir=d.dir;ig.Jc.uq(ig.Jc.un[d.dir]||0,this.face)},update:J(),BF:function(a){a.b.aa=this.b.aa;a.b.pc=this.b.pc;a.b.g.z=this.b.g.z;a.face.x=this.face.x;a.face.y=this.face.y;a.l(this.b.g.x+this.b.size.x/2-a.b.size.x/2,this.b.g.y+this.b.size.y/2-a.b.size.y/2)}})});ig.J=h;
ig.N("impact.feature.base.entities.object-layer-view").O("impact.base.actor-entity").K(function(){var a=Vec2.create(),b=Vec2.create();ig.MP={tpa:function(a,b,f,i){for(var a=a.b,f=f||a.g,i=i||a.size,j=a=0;j<b.length;++j){var k=b[j],l=k.NC/ig.i.scale,k=k.OC/ig.i.scale,m=1;Math.floor(f.x/l)!=Math.floor((f.x+i.x)/l)&&(m=m*2);Math.floor((f.y-f.z-i.z)/k)!=Math.floor((f.y-f.z+i.y)/k)&&(m=m*2);a=a+m}return a},Gh:function(c,d,f,i,j,k){if(!d.length)return h;for(var l=d.length;l--;)if(!d[l].bp)return y;var l=
c.b,j=j||l.g,k=k||l.size,m=Vec2.Oa(a,j.x,j.y-j.z-k.z),n=Vec2.Oa(b,j.x+k.x,j.y-j.z+k.y);if(i){Vec2.o0(m,i.x,i.y-i.z||0);Vec2.o0(n,i.x,i.y-i.z||0);m.x=Math.round(m.x);m.y=Math.round(m.y);n.x=Math.round(n.x);n.y=Math.round(n.y)}for(l=i=0;l<d.length;++l){for(var o=d[l],t=o.NC/ig.i.scale,p=o.OC/ig.i.scale,r=Math.floor(m.x/t),u=Math.floor(n.x/t),w=Math.floor(m.y/p),z=Math.floor(n.y/p),v=m.x%t,x=m.y%p;v<0;)v=v+t;for(;x<0;)x=x+p;for(var t=t-v,p=p-x,A=Math.round(k.y*f),A=k.y-A,F=w;F<=z;++F)for(var B=r;B<=
u;++B){var C=j.x,K=j.y,I=j.z,G=k.x,D=k.y,E=k.z,H=o.bp[F]&&o.bp[F][B],Q=Math.round(f*D);if(H){if(B<u)G=t;else if(B>r){G=G-t;C=C+t}if(F<z)if(p>=A){Q=A+E-p;if(Q>=0){E=E-Q;I=I+Q;D=A;Q=0}else{D=A-Q;Q=-Q}}else{I=I+E;D=p;Q=E=0}else if(F>w)if(p>=A){Q=A+E-p;if(Q>=0){K=K+A;E=E-(p-A);Q=D=D-A}else{E=0;K=K+(A-Q);D=D-(A-Q);Q=0}}else{K=K+p;D=D-p}var P=B>r?0:v,U=F>w?0:x;if(c.Ua[i]){c.Ua[i].l(C,K,I);c.Ua[i].F(G,D,E,Q);c.Ua[i].zC=1;c.Ua[i].Bj(new ig.Pwa(H),P,U)}i++}}}return h}};ig.r1=ig.Ca.extend({rS:q,Nv:0,hidden:y,
m4:y,f:function(a){this.rS=new ig.de(a)},update:function(a){this.m4||this.ag(a);this.Nv=Math.max(0,this.Nv-ig.i.Sa);var b=this.Nv/0.2,b=this.hidden?b:1-b,b=0.1*(1-b)+1*b;if(a.Ya)a.Ya.alpha=b;else for(var f=a.Ua.length;f--;)a.Ua[f].ge(b);this.m4&&!this.Nv&&a.b.kn(ig.jk.gv)},VUb:M("Nv"),ag:function(a){var b=this.rS.evaluate();if(b!=this.hidden){this.Nv=0.2-this.Nv;this.hidden=b;this.m4&&a.b.kn(ig.jk.RE)}}});ig.wa.ObjectLayerView=ig.Wd.extend({Df:q,LU:y,bj:q,Hh:0,fx:{show:q,hide:q,handle:q,VGa:y},t:new ig.u({Dd:h,
Kq:h,Lq:h,B_:4,attributes:{FHa:{c:"String",d:"Object Layer from which to display graphic.",U:{object1:1,object2:1,object3:1}},Jj:{c:"String",d:"CollisionType",U:ig.ca},kf:{c:"Number",d:"Z height of displayed object"},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},rS:{c:"VarCondition",d:"Condition for entity to become transparent",xc:h},Hh:{c:"Number",d:"Wall Y Value"},Pb:{c:"String",d:"Terrain of prop",U:ig.hd,ok:h},$m:{c:"String",d:"Height shape (for stairs or other slopes)",U:ig.rp},
shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf,I:h},zA:{c:"Boolean",CUa:"If true, block path map and update when destroyed"},OMa:{c:"Effect",d:"Effect to show when showing entity",I:h},wCb:{c:"Effect",d:"Effect to show when hiding entity",I:h},SJ:{c:"Boolean",d:"If true: display as gui sprites",I:h}},Uk:y,Sl:"rgba(120,255,120, 0.5)",kD:"rgba(80,244,80, 0.5)",Yaa:h}),f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca[i.collType||"BLOCK"];this.b.size.z=i.zHeight||0;this.b.$m=ig.rp[i.heightShape]||
ig.rp.NONE;this.b.shape=ig.Tf[i.shape||"RECTANGLE"];this.Df=ig.r.rda(i.layer);this.Hh=(i.wallY||0).Rb(0,1);this.Pb=ig.hd[i.terrain]||q;this.fx.show=i.showEffect?new ig.Bi(i.showEffect):q;this.fx.hide=i.hideEffect?new ig.Bi(i.hideEffect):q;this.zA=i.blockNavMap;this.SJ=i.guiSprites||y;i.hideCondition?this.bj=new ig.r1(i.hideCondition):this.b.kn(ig.jk.gv)},Ge:function(a){this.parent(a);this.fx.show&&this.fx.show.Ka();this.fx.hide&&this.fx.hide.Ka()},show:function(a){this.parent(a);this.fx.handle&&this.fx.handle.stop();
if(!a&&this.fx.show){this.Ya.alpha=0;this.fx.VGa=y;this.fx.handle=this.fx.show.va(this,{callback:this})}if(this.zA)this.Kg=ig.navigation.eS(this)},po:function(){this.Kg&&this.Kg.remove();this.Kg=q;if(this.fx.hide){this.fx.VGa=h;this.fx.handle=this.fx.hide.va(this,{callback:this})}else this.hide()},Aj:function(){if(this.fx.handle&&this.fx.handle.ek()){this.fx.handle=q;this.fx.VGa&&this.hide()}},Np:function(){this.ul(ig.MP.tpa(this,this.Df),this.SJ)},update:function(){this.bj&&this.bj.update(this)},
Gh:function(){if(!this.LU&&ig.MP.Gh(this,this.Df,this.Hh))this.LU=h;for(var a=this.Ua.length;a--;)this.Ua[a].ge(this.Ya.alpha);this.Ya.L0(this)}});ig.wa.ObjectLayerView.$bb=h});ig.J=h;
ig.N("impact.feature.base.entities.touch-trigger").O("impact.base.actor-entity").K(function(){ig.XTa={SET_TRUE:{},SET_FALSE:{N$a:h},WHILE_TOUCH_TRUE:{I5:h},WHILE_TOUCH_ADD_1:{I5:h,add:h}};ig.wa.TouchTrigger=ig.Kc.extend({name:"",face:Vec2.create(),WH:0,RXb:0,wE:q,qc:y,t:new ig.u({Dd:h,attributes:{wE:{c:"VarCondition",d:"Condition for the touch trigger to react",xc:h},uc:{c:"VarName",d:"Variable to be changed"},type:{c:"String",d:"Type of change",U:ig.XTa,ab:"SET_TRUE"},kf:{c:"Integer",d:"Height of trigger",
ab:64},shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf,I:h},i9a:{c:"Boolean",d:"If true: also react to party members"}},Kq:h,Lq:h,label:function(){return"["+this.uc+"]"},Uk:h,Sl:"rgba(255,0,255, 0.25)",kD:"rgba(120,0,120, 0.25)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.uc=d.variable;this.WH=ig.XTa[d.type||"SET_TRUE"];this.shape=ig.Tf[d.shape]||ig.Tf.RECTANGLE;this.b.size.z=d.zHeight*1;this.wE=new ig.de(d.startCondition||"true");this.i9a=d.reactToParty||y;this.qc=
y;this.WH.I5&&(this.WH.add?ig.ma.add(this.uc,0):ig.ma.set(this.uc,y))},update:function(){if(this.wE.evaluate()){var a=this.b,b=ig.r.cb;if(b){b=b.b.FS(a.g.x,a.g.y,a.g.z,a.size.x,a.size.y,a.size.z,h,this.shape);if(this.i9a)for(var c=sc.sa.He.length;!b&&c--;){var d=sc.sa.Xk(c);d&&(b=d.b.FS(a.g.x,a.g.y,a.g.z,a.size.x,a.size.y,a.size.z,h,this.shape))}b?this.J7():this.WH.I5&&this.zO()}}else this.WH.I5&&this.zO()},J7:function(){if(!this.WH.I5||!this.qc){this.WH.N$a?ig.ma.set(this.uc,y):this.WH.add?ig.ma.add(this.uc,
1):ig.ma.set(this.uc,h);this.qc=h}},zO:function(){if(!this.WH.I5||this.qc){this.WH.N$a?ig.ma.set(this.uc,h):this.WH.add?ig.ma.sub(this.uc,1):ig.ma.set(this.uc,y);this.qc=y}}})});ig.J=h;
ig.N("impact.feature.base.entities.sound-entities").O("impact.base.entity","impact.base.actor-entity").K(function(){ig.wa.SoundSource=ig.Kc.extend({$b:q,em:q,Se:20,l_:ig.EI.CIRCULAR,t:new ig.u({Dd:h,attributes:{$b:{c:"SoundT",d:"URL of sound."},volume:{c:"Number",d:"The volume. Value between 0 and 1.",ab:1},speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h},bEa:{c:"Number",d:"Duration in seconds the sound is faded out with",I:h},Se:{c:"Number",d:"The radius of the sound range. In Pixels.",
ab:800},l_:{c:"Number",U:ig.EI,d:"Determines in which direction the sound range goes",ab:ig.EI.CIRCULAR},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h}},label:N("Sound Source"),sxb:function(a){return(a.radius||0)/3},Sl:"rgba(200,200,200, 0.5)",borderColor:"rgba(10, 10, 223, 0.5)",bCa:"rgba(200, 200, 200, 1)"}),f:function(a,b,c,d){this.parent(a,b,c,d);if(d.sound)this.$b=new ig.ka(d.sound,d.volume||1);this.b.type=ig.ca.NONE;this.b.F(16,16,0);this.Se=d.radius||0;this.l_=d.rangeType||ig.EI.CIRCULAR;
this.yf={speed:d.speed||1,fadeDuration:d.fadeDuration||0}},show:function(a){this.parent(a)},stop:function(){if(this.em){this.em.stop();this.em=q}},update:function(){if(!this.em&&!this.Og){this.em=this.$b.play(h,this.yf);this.em.J$a(this,ig.Pa.center,q,this.Se,this.l_)}this.parent()},hide:function(){this.parent();this.stop()},Ge:function(a){this.parent(a);this.stop();this.$b&&this.$b.Ka()}})});ig.J=h;
ig.N("impact.feature.base.plug-in").O("impact.feature.base.action-steps","impact.feature.base.event-steps","impact.feature.base.entities.marker","impact.feature.base.entities.object-layer-view","impact.feature.base.entities.touch-trigger","impact.feature.base.entities.sound-entities").K(function(){if(window.Ed){wm.Um(/ACTION/,"green");wm.Um(/ANIM/,"green");wm.Um(/WAIT/,"gray");wm.Um(/VAR/,"violet");wm.Um(/LABEL/,"extremeRed")}window.Ed&&wm.Ek.push("impact.feature.base.editors.base-editor")});
ig.J=h;
ig.N("impact.feature.storage.storage").O("impact.base.game").K(function(){ig.Uxa={ENABLED:1,DISABLED:0};ig.T1=ig.Ca.extend({src:q,data:q,f:function(a){if(ig.$P.OGa(a)){this.src=a;this.data=ig.$P.Wwb(this.src)}else{this.data=a;this.src=ig.$P.i0a(this.data)}},getData:M("data"),gUb:M("src"),SEb:function(a){ig.merge(this.data,a);this.src=ig.$P.i0a(this.data)}});var a={},b={rename:h,f1a:".backup",Scb:".backup2"},c={rename:h,f1a:"",Scb:".backup"},d={save:h};ig.Mob=ig.Ca.extend({loaded:y,data:q,A_:[],path:q,
Wi:"STORAGE",BD:q,Nqa:q,f:function(a){this.path=a;window.Ed||ig.Raa(this)},load:function(b){this.pF=b;if(ig.platform==ig.Mk.DESKTOP){this.BD=a;this.Nqa=this.Iza();this.HWa()}else this.$za(localStorage.getItem(this.path))},HWa:function(){var a=this.Nqa.shift();window.require("fs").readFile(a,this.fsb.bind(this))},fsb:function(a,b){window.require("fs");if(a||!this.$za(b)){ig.debug("FAILED TO LOAD FILE");this.Nqa.length>0?this.HWa():this.$za(localStorage.getItem(this.path))}},save:function(a){if(ig.platform==
ig.Mk.DESKTOP){this.A_.push(a);this.BD||this.gXa()}else localStorage.setItem(this.path,a)},gXa:function(){this.sza(b)},sza:function(a){this.BD=a;if(this.BD.rename){var a=window.require("fs"),b=this.Iza()[0];a.rename(b+this.BD.f1a,b+this.BD.Scb,this.waa.bind(this))}else if(this.BD.save){a=window.require("fs");b=this.Iza()[0];this.BD=d;a.writeFile(b,this.A_[0],this.waa.bind(this))}},waa:function(a){if(this.BD.rename)this.BD==b?this.sza(c):this.sza(d);else{a&&localStorage.setItem(this.path,this.A_[0]);
this.Qsb()}},Qsb:function(){if(this.A_.length>1){for(;this.A_.length>1;)this.A_.shift();this.gXa()}else{this.BD=q;this.A_.length=0}},Iza:function(){var a=[],b=window.require("nw.gui").App.dataPath,c=b.indexOf("\\User Data\\Default");if(c!=-1){c=b.substr(0,c);a.push(c+"/"+this.path);a.push(c+"/"+this.path+".backup");a.push(c+"/"+this.path+".backup2")}a.push(b+"/"+this.path);a.push(b+"/"+this.path+".backup");a.push(b+"/"+this.path+".backup2");return a},$za:function(a){if(a){var b;try{ig.$P.OGa(a)&&
(a=ig.$P.UCa(a));b=JSON.parse(a)}catch(c){return y}this.data=b}this.pF(this.Wi,this.path,h);this.loaded=h;this.BD=this.Nqa=q;return h},getData:M("data")});ig.Lob=ig.Uf.extend({MEb:h,uta:y,jh:0,kg:[],kt:q,cK:-2,Op:[],UWb:{},GFa:{},TF:{},data:new ig.Mob(window.Ri?"cc.save.dev":"cc.save"),sR:q,$Ba:q,oBa:q,b6a:q,f:function(){this.parent("Storage");var a=this.data.getData();if(a){if(a.lastSlot!==g)this.cK=a.lastSlot;for(var b=a.slots,c=0;c<b.length;++c)try{this.kg.push(new ig.T1(b[c]))}catch(d){console.log("Error Loading Slot "+
c)}if(a.autoSlot)try{this.kt=new ig.T1(a.autoSlot)}catch(l){console.log("Error Loading Autoslot")}a=a.globals;if(ig.$P.OGa(a)){a=ig.$P.UCa(a);a=JSON.parse(a)}this.GFa=a}},sKb:L("oBa"),xKb:L("$Ba"),Lg:function(a){a&&this.Op.push(a)},e$a:function(a,b,c){this.TF={};this.fXa(this.TF,a,b&&b.kpa());(!this.oBa||this.oBa(c))&&this.TJb(this.TF)},n2a:function(a){return this.G2a(this.cK==-2?0:this.cK,a)},jzb:function(a){return this.G2a(-1,a)},nCb:function(){return this.kg.length>0||this.kt},G2a:function(a,b){var c;
if(a==-1)c=ig.copy(this.kt.getData());else{if(!this.kg[a])return"";c=ig.copy(this.kg[a].getData())}b&&ig.merge(c,b);return this.xVa(JSON.stringify(c))},iIb:function(a){this.kg.push(new ig.T1(a));this.xaa()},TJb:function(a){this.kt=new ig.T1(a);this.cK=-1;this.xaa()},save:function(a){var a=a||0,b={};this.fXa(b,q,ig.copy(this.TF.position));this.TF=b;var c=new ig.T1(b);this.kg[a]&&this.kg.splice(a,1);this.kg.unshift(c);this.cK=0;this.xaa();ig.debug("Saved Game: %O",b)},xaa:function(){for(var a={},b=
0;b<this.Op.length;b++)this.Op[b].OJa&&this.Op[b].OJa(a);for(var c={},d=[],b=0;b<this.kg.length;++b)d[b]=this.kg[b].src;c.slots=d;c.autoSlot=this.kt&&this.kt.src;c.globals=this.xVa(JSON.stringify(a));c.lastSlot=this.cK;this.data.save(JSON.stringify(c));return c},fXa:function(a,b,c){for(var d=0;d<ig.r.entities.length;d++){var l=ig.r.entities[d];l&&l.LJa&&l.LJa()}a.map=b||ig.r.uZ;a.vars=ig.ma.kpa();a.position=c?c:this.Jqb(ig.r.cb);for(d=0;d<this.Op.length;d++)this.Op[d].Fu&&this.Op[d].Fu(a)},Gta:function(){var a=
this.xaa();ig.debug("Saved Globals: %O",a)},RHa:function(a,b){var a=a||0,b=b==g?h:b,c;if(typeof a=="number"){c=this.vda(a);this.cK=a}else c=a;if((c=c.getData())&&c.vars){this.sR=ig.copy(c);this.TF=ig.copy(c);this.uta=y;var d=ig.tC.AX(c.position);b&&ig.r.Mf(c.map,d,"LOAD");ig.debug("Load Game: %O",c)}else ig.debug("Loading Game failed, Slot "+a+" does not have a save file")},c4:function(a){if(!(a==g||a<0||a>=this.kg.length||!this.kg[a])){this.kg.splice(a,1);this.cK=Math.min(a,this.kg.length-1);this.xaa()}},
a6a:function(){this.uta=h;this.sR=ig.copy(this.TF);var a=ig.tC.AX(this.TF.position);ig.r.Mf(this.TF.map,a)},pRb:function(a){return typeof a=="string"&&a.indexOf("[-!_0_!-]")==0},xVa:function(a,b){var c;if(b=75*b+"0")b=":_."+b;c=window.CryptoJS.AES.encrypt(a,b).toString();return"[-!_0_!-]"+c},kRb:function(a,b){if(b=75*b+"0")b=":_."+b;var c=window.CryptoJS,a=a.substr(9,a.length);return c.AES.decrypt(a,b).toString(c.enc.Utf8)},Jqb:function(a){if(!a)return q;var b=new ig.tC;b.P$a(q,ig.copy(a.b.g),a.face,
a.b.aa,a.b.pc,a.b.size);return b.kpa()},Ms:function(a){if(this.sR){ig.ma.KJb(this.sR.vars);ig.ma.L7a(a.name,h);for(var b=0;b<this.Op.length;b++)this.Op[b].Bt&&this.Op[b].Bt(this.sR)}if(a.attributes)this.MEb=ig.Uxa[a.attributes.saveMode]==ig.Uxa.ENABLED?h:y},dK:-100,qx:function(){if(this.sR){for(var a=0;a<this.Op.length;a++)this.Op[a].PJa&&this.Op[a].PJa(this.sR);this.sR=q}else if(!this.$Ba||this.$Ba()){this.e$a(ig.r.uZ,ig.r.cOa,this.b6a);if(ig.r.If&&this.TF.position)this.TF.position.marker=ig.r.If}},
RJa:function(a,b,c){this.b6a=c},vda:function(a){return a==-1?this.kt:this.kg[a]},EUb:function(a){return this.kg[a||0]?h:y},GUb:function(){return this.kg.length>0}});ig.$P={OGa:function(a){return typeof a=="string"&&a.indexOf("[-!_0_!-]")==0},Gxb:function(a,b){var c;if(b=75*b+"0")b=":_."+b;c=window.CryptoJS.AES.encrypt(a,b).toString();return"[-!_0_!-]"+c},UCa:function(a,b){if(b=75*b+"0")b=":_."+b;var c=window.CryptoJS,a=a.substr(9,a.length);return c.AES.decrypt(a,b).toString(c.enc.Utf8)},Wwb:function(a){return JSON.parse(this.UCa(a))},
i0a:function(a){return this.Gxb(JSON.stringify(a))}};ig.Vf(function(){return ig.zd=new ig.Lob})});ig.J=h;
ig.N("impact.feature.bgm.bgm").O("impact.base.event","impact.base.game","impact.base.sound","impact.feature.storage.storage").K(function(){ig.KE={IMMEDIATELY:{fadeOut:0,fadeIn:0},FAST_OUT:{fadeOut:0.5,fadeIn:0},MEDIUM_OUT:{fadeOut:1,fadeIn:0},SLOW_OUT:{fadeOut:2,fadeIn:0},VERY_SLOW_OUT:{fadeOut:5,fadeIn:0},FAST:{fadeOut:0.5,fadeIn:0.5},MEDIUM:{fadeOut:1,fadeIn:1},SLOW:{fadeOut:2,fadeIn:2},VERY_SLOW:{fadeOut:5,fadeIn:5}};ig.X8={};ig.Zia={};ig.bwa=ig.Ca.extend({name:q,lb:q,f:function(a){this.name=a;
if(a=ig.X8[a])this.lb=new ig.cUa(a.path,a.xd,a.sm,a.Ug,a.volume)},get:M("lb"),Ka:function(){this.lb&&this.lb.Tc()},copy:function(){return new ig.bwa(this.name)}});ig.GPa=ig.Ca.extend({name:q,xb:q,f:function(a){var c={},d=ig.Zia[a],f;for(f in d)c[f]={lb:ig.mh.sZ(d[f].lb),volume:d[f].volume};this.name=a;this.xb=c},get:function(a){return this.xb[a]},Ka:function(){for(var a in this.xb)this.xb[a].lb.Ka()},copy:function(){return new ig.GPa(this.name)}});var a=[];ig.c1=ig.Uf.extend({QA:q,$C:["field"],Vq:[],
WD:y,Zwb:"SLOW_OUT",ara:q,Gna:0,iKa:y,t_:q,f:function(){this.parent("BGM");ig.zd.Lg(this)},sZ:function(a){if(ig.At)return new ig.bwa(a)},SHa:function(a){return new ig.GPa(a)},JB:function(a,c,d){this.sX();this.QA&&this.QA.Ka();this.QA=a.copy();!d&&!this.WD&&this.s7(c)},cHa:function(){return!this.WD},FTb:function(){return this.$C.length},fCb:function(a){return!(!this.QA||!this.QA.get(a))},Z8a:function(a,c){this.sX();this.$C.push(a);this.WD||this.s7(c)},G8a:function(a){this.sX();this.$C.pop();this.WD||
this.s7(a)},wLb:L("t_"),sX:function(){this.t_&&this.s7(this.t_)},s7:function(a){this.t_=q;for(var c=this.$C.length;this.Vq.length>c;)this.pop(a);var d=this.JVa();if(d){this.Vq.length<c&&this.push(d.lb,d.volume,a);ig.At.p5a(d.lb.lb,d.volume)||this.play(d.lb,d.volume,a)}this.WD=y},play:function(a,c,d){this.sX();this.WD=h;d=this.o2(d);ig.At.play(a.get(),d.fadeOut,d.fadeIn,c);(d=this.Vq.pop())&&d.lb.Ka();this.Vq.push({lb:a.copy(),volume:c})},push:function(a,c,d){this.sX();this.WD=h;d=this.o2(d);ig.At.push(a.get(),
d.fadeOut,d.fadeIn,c);this.Vq.push({lb:a.copy(),volume:c})},pop:function(a){this.sX();a=this.o2(a);ig.At.pop(a.fadeOut,a.fadeIn);(a=this.Vq.pop())&&a.lb.Ka();a=this.JVa();if(this.Vq.length==this.$C.length&&a&&ig.At.p5a(a.lb.get(),a.volume))this.WD=y},clear:function(a){for(this.t_=q;this.$C.length>1;)this.G8a(a);for(this.WD=y;this.Vq.length>0;)this.pop(a);this.QA&&this.QA.Ka();this.QA=q},dea:function(a,c,d){d=this.o2(d);ig.At.dea(a.get(),d.fadeIn,d.fadeOut,c)},pause:function(a){ig.At.pause(this.o2(a).fadeOut);
this.iKa=h},sO:function(a){ig.At.sO(this.o2(a).fadeIn)},Fu:function(a){for(var c=[],d=0;d<this.Vq.length;++d)c.push({track:this.Vq[d].lb.name,volume:this.Vq[d].volume});a.bgm={defaultTrackSet:this.QA?this.QA.name:q,defaultTrackTypeStack:this.$C,trackStack:c,overloadDefault:this.WD,paused:ig.At.paused,resumeOnChange:this.t_}},Bt:function(b){b=b.bgm;this.clear();if(b){this.QA=this.SHa(b.defaultTrackSet);for(var b=b.trackStack,c=0;c<b.length;++c)a.push(this.sZ(b[c].track))}},PJa:function(b){if(b=b.bgm){this.$C=
b.defaultTrackTypeStack;for(var c=b.trackStack,d=0;d<c.length;++d){var f=a[d];this.push(f,c[d].volume,"IMMEDIATELY");f.Ka()}this.WD=b.overloadDefault;this.t_=b.resumeOnChange||q;a.length=0;b.paused&&this.pause("IMMEDIATELY")}},PG:100,Ms:function(a){this.sX();if(a.attributes&&a.attributes.bgm){this.ara&&this.ara.Ka();this.ara=this.SHa(a.attributes.bgm);this.JB(this.ara,q,h)}},dK:100,qx:function(){this.Gna=2;this.iKa=y},fj:function(){this.clear("MEDIUM")},Eu:function(){if(this.Gna){this.Gna--;this.Gna==
0&&!this.WD&&!this.iKa&&this.s7()}},o2:function(a){return ig.KE[a]||ig.KE[this.Zwb]},JVa:function(){var a=this.$C[this.$C.length-1];return this.QA&&this.QA.get(a)}});ig.Vf(function(){return ig.mh=new ig.c1});ig.c1.Ybb=q;ig.c1.YHb=function(){ig.c1.Ybb=new ig.bwa("title")}});ig.J=h;
ig.N("impact.feature.bgm.bgm-steps").O("impact.base.action","impact.base.event","impact.feature.bgm.bgm").K(function(){ig.oa.PLAY_BGM=ig.qa.extend({lb:q,volume:q,mode:q,t:new ig.u({attributes:{mh:{c:"String",d:"Background Music to play",U:ig.X8},volume:{c:"Number",d:"Volume of music (0 = silent, 1 = max volume)"},mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.lb=ig.mh.sZ(a.bgm);this.volume=a.volume||1;this.mode=a.mode||0},Ka:function(){this.lb.Ka()},ya:function(){ig.mh.play(this.lb,
this.volume,this.mode);return h}});ig.oa.PAUSE_BGM=ig.qa.extend({mode:q,t:new ig.u({attributes:{mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.mode=a.mode||0},ya:function(){ig.mh.pause(this.mode);return h}});ig.oa.RESUME_BGM=ig.qa.extend({mode:q,t:new ig.u({attributes:{mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.mode=a.mode||0},ya:function(){ig.mh.sO(this.mode);return h}});ig.oa.PUSH_BGM=ig.qa.extend({lb:q,volume:q,mode:q,t:new ig.u({attributes:{mh:{c:"String",
d:"Background Music to play",U:ig.X8},volume:{c:"Number",d:"Volume of music (0 = silent, 1 = max volume)"},mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.lb=ig.mh.sZ(a.bgm);this.volume=a.volume||1;this.mode=a.mode||0},Ka:function(){this.lb.Ka()},ya:function(){ig.mh.push(this.lb,this.volume,this.mode);return h}});ig.oa.POP_BGM=ig.qa.extend({t:new ig.u({attributes:{mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.mode=a.mode||0},ya:function(){ig.mh.pop(this.mode);
return h}});ig.oa.PLAY_IN_BETWEEN_BGM=ig.qa.extend({lb:q,volume:q,mode:q,t:new ig.u({attributes:{mh:{c:"String",d:"Background Music to play only once",U:ig.X8},volume:{c:"Number",d:"Volume of music (0 = silent, 1 = max volume)"},mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.lb=ig.mh.sZ(a.bgm);this.volume=a.volume||1;this.mode=a.mode||0},Ka:function(){this.lb.Ka()},ya:function(){ig.mh.dea(this.lb,this.volume,this.mode);return h}});ig.oa.SET_DEFAULT_BGM=ig.qa.extend({sOa:q,
mode:q,t:new ig.u({attributes:{ESb:{c:"String",d:"Default BGM",U:ig.Zia},mode:{c:"String",d:"Mode of transition",U:ig.KE}}}),f:function(a){this.sOa=ig.mh.SHa(a.defaultBgm);this.mode=a.mode||0},Ka:function(){this.sOa.Ka()},ya:function(){ig.mh.JB(this.sOa,this.mode);return h}});ig.oa.RESUME_DEFAULT_BGM=ig.qa.extend({t:new ig.u({attributes:{mode:{c:"String",d:"Mode of transition",U:ig.KE},lca:{c:"Boolean",d:"Resume default BGM later when changing map or after anything changes about the music"}}}),f:function(a){this.mode=
a.mode||0;this.lca=a.delayed||y},ya:function(){this.lca?ig.mh.wLb(this.mode):ig.mh.s7(this.mode);return h}})});ig.J=h;ig.N("impact.feature.bgm.plug-in").O("impact.feature.bgm.bgm","impact.feature.bgm.bgm-steps").K(function(){window.Ed&&wm.yu&&(wm.yu.bgm={c:"String",U:ig.Zia,d:"Music set to be played on this map.",ok:h})});ig.J=h;
ig.N("impact.feature.event-sheet.event-sheet").O("impact.base.event").K(function(){ig.ohb=ig.XE.extend({Wi:"EventSheet",vi:{},Wo:function(){for(var a in this.vi)this.vi[a].Ka()},oG:function(){return ig.root+this.path.vm("data/events/",".json")+ig.Kn()},onload:function(a){for(var b in a.events){var c=a.events[b];this.vi[b]=new ig.Ja({name:b,input:c.input,steps:c.steps})}},Yzb:function(a){return this.vi[a]||q}})});ig.J=h;
ig.N("impact.feature.event-sheet.event-sheet-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.CALL_EVENT_FROM_SHEET=ig.qa.extend({VDa:q,w0a:q,UDa:q,t:new ig.u({attributes:{yy:{c:"EventSheetCall",d:"The event to be called",xc:h}},width:600}),f:function(a){assertContent(a,"eventCall");a=a.eventCall;this.VDa=new ig.ohb(a.path);this.w0a=a.name;this.UDa=a.input},Ka:function(){this.VDa.Tc()},h2a:function(){return this.VDa.Yzb(this.w0a)},NTb:M("UDa")})});ig.J=h;
ig.N("impact.feature.event-sheet.plug-in").O("impact.feature.event-sheet.event-sheet","impact.feature.event-sheet.event-sheet-steps").K(function(){window.Ed&&wm.Ek.push("impact.feature.event-sheet.editors.event-sheet-editor")});ig.J=h;
ig.N("impact.feature.camera.camera").O("impact.base.event","impact.base.game").K(function(){function a(a,b,c){if(a.Jaa||b){a.Jaa=h;b=c-a.nF;if(Math.abs(b)<=1){a.Jaa=y;a.nF=c}else a.nF=a.nF+b*ig.i.Sa*7}else a.nF=c}var b=Vec2.create(),c=Vec2.create(),d=Vec2.create();ig.sf=ig.Uf.extend({Ts:[],rT:{},oW:Vec2.create(),nF:0,pW:1,qW:Vec2.create(),Jaa:y,xQ:Vec2.create(),Wza:1,EWa:Vec2.create(),nk:0,gt:0,Mla:q,bza:y,f:function(){this.parent("Camera")},xK:100,az:function(){if(!ig.Wv&&!ig.r.paused){for(var a=
this.Ts.length;a--;)this.Ts[a].update();this.gt=this.gt+ig.i.Sa;var i;if(this.gt<this.nk){i=this.gt/this.nk;i=this.Mla.get(i)}this.pW=this.QVa();if(this.gt<this.nk)this.pW=this.Wza+(this.pW-this.Wza)*i;ig.i.iw(this.pW);a=this.Gza(b,c,d);if(this.gt>=this.nk){Vec2.assign(this.oW,a);Vec2.assign(this.qW,d)}else{Vec2.an(this.xQ,a,i,this.oW);Vec2.an(this.xQ,c,i,c);Vec2.an(this.EWa,d,i,this.qW);this.bza&&this.bsb(this.oW,this.qW,h)}ig.r.screen.x=this.oW.x-ig.i.width/2;ig.r.screen.y=this.oW.y-ig.i.height/
2;ig.r.Nha.x=c.x;ig.r.Nha.y=c.y;ig.i.Jab(this.qW.x-ig.r.screen.x,this.qW.y-ig.r.screen.y)}},PG:100,Ms:function(a){this.bza=a.attributes&&a.attributes.cameraInBounds;for(var b in this.rT)this.Os(this.rT[b],0);this.rT={}},wx:function(a,b,c,d){if(d){this.rT[d]&&this.Os(this.rT[d],"IMMEDIATELY");this.rT[d]=a}this.mAa();this.Ts.push(a);a.target.start();this.nk=this.Bza(b);this.Mla=c||KEY_SPLINES.EASE_IN_OUT;this.gt=0;this.nk||this.LUa()},cJb:function(a,b,c){var d=this.rT[a];if(d){delete this.rT[a];this.Os(d,
b,c)}},Os:function(a,b,c){a=this.Ts.indexOf(a);a!=-1&&(a==this.Ts.length-1?this.vKa(b,c):this.Ts.splice(a,1))},vKa:function(a,b){this.mAa();this.Ts.pop();this.nk=this.Bza(a);this.Mla=b||KEY_SPLINES.EASE_IN_OUT;this.gt=0;this.nk||this.LUa()},p7:function(a,b,c,d){a=this.Ts.indexOf(a);if(a==-1)return this.wx(b,c,d);this.Ts.splice(a,1,b);this.F4a(b)&&this.V9a(c,d)},jUb:function(){return this.Ts.length},sVb:function(){return this.gt>=this.nk},V9a:function(a,b){this.mAa();this.nk=this.Bza(a);this.Mla=b||
KEY_SPLINES.EASE_IN_OUT;this.gt=0},F4a:function(a){return this.Ts[this.Ts.length-1]==a},AY:function(){return this.gt>=this.nk?0:this.nk-this.gt},bsb:function(a,b,c){var d=ig.i.width,l=ig.i.height,m=a.x.Rb(ig.i.width/2,ig.r.size.x-ig.i.width/2),n=a.y.Rb(ig.i.height/2,ig.r.size.y-ig.i.height/2);if(c){var c=(b.x-(m-d/2))/d,o=(b.y-(n-l/2))/l,d=d-d/ig.i.zoom,l=l-l/ig.i.zoom,t=0,p=0;if(m>a.x)var r=m-a.x-d*(0.5-c),t=-Math.min(d*c,r);else if(m<a.x){r=a.x-m-d*(c-0.5);t=Math.min(d*(1-c),r)}if(n>a.y){r=n-a.y-
l*(0.5-o);p=-Math.min(l*o,r)}else if(n<a.y){r=a.y-n-l*(o-0.5);p=Math.min(l*(1-o),r)}a.y=n+p;a.x=m+t;b.x=b.x+t;b.y=b.y+p}else{a.x=m;a.y=n}},LUa:function(){this.pW=this.QVa();ig.i.iw(this.pW);var a=this.Gza(b,q,d);Vec2.assign(this.oW,a);Vec2.assign(this.qW,d)},mAa:function(){this.Wza=this.pW;Vec2.assign(this.xQ,this.oW);Vec2.assign(this.EWa,this.qW);this.zRb=h},QVa:function(){return this.Ts.length>0?this.Ts[this.Ts.length-1].V2a():1},Gza:function(a,b,c){var d=y;if(this.Ts.length>0){d=this.Ts[this.Ts.length-
1];d.target.rFa(a);if(c){c.x=a.x+Math.round(d.$L.x);c.y=a.y+Math.round(d.$L.y)}a.x=a.x+Math.round(d.ZL.x);a.y=a.y+Math.round(d.ZL.y);d=d.xHa||y}if(b){b.x=a.x;b.y=a.y}if(this.bza){b=d?1:ig.i.zoom;a.x=a.x.Rb(ig.i.width/2/b,ig.r.size.x-ig.i.width/2/b);a.y=a.y.Rb(ig.i.height/2/b,ig.r.size.y-ig.i.height/2/b)}!d&&c&&Vec2.assign(c,a);return a},Bza:function(a){if(typeof a=="string"){var i=Vec2.length(Vec2.sub(this.Gza(b,c,d),this.xQ))+32,i=Math.sqrt(i);ig.sf.fA[a]?i=i*ig.sf.fA[a]:e(Error("Unknown Camera Speed Type: "+
a));return i}return a||0}});ig.Vf(function(){return ig.le=new ig.sf});ig.sf.fA={NORMAL:0.1,FAST:0.05,FASTER:0.0375,FASTEST:0.025,FASTESTEST:0.0175,SLOW:0.15,SLOWER:0.2,SLOWEST:0.3,SLOWESTEST:0.5,SLOWEST_DREAM:1,IMMEDIATELY:1E-6};ig.sf.Exa=ig.Ca.extend({g:q,f:L("g"),start:J(),rFa:function(a){Vec2.assign(a,this.g)}});ig.sf.xV=ig.Ca.extend({Q:q,Jaa:y,nF:0,f:L("Q"),start:function(){this.nF=this.Q.b.g.z},rFa:function(b){a(this,this.Q&&(this.Q.Jg||this.Q.b.Nc&&this.Q.b.Nc.Via),this.Q.b.g.z+(this.Q.PF||
0));b.x=Math.round(this.Q.b.g.x)+this.Q.b.size.x/2;b.y=Math.round(this.Q.b.g.y-this.nF)+this.Q.b.size.y/2-Constants.gI}});ig.sf.PV=ig.Ca.extend({entities:q,Jaa:y,hAa:y,nF:0,B5a:y,f:function(a,b){this.entities=a;this.B5a=b||y},start:function(){this.nF=this.KVa()},KVa:function(){return this.entities[0].b.g.z+(this.entities[0].PF||0)},rFa:function(b){for(var c=this.entities,d=c.length,k=y,l=0,m=0,n=this.KVa(),o=0;d--;){var t=c[d],p=t.b,k=k||t&&(t.Jg||t.b.Nc&&t.b.Nc.Via),l=l+(p.g.x+p.size.x/2),m=m+(p.g.y+
p.size.y/2);if(p.yd.height){k=h;o=o+(p.g.z-n);this.hAa=h}}if(!k&&this.hAa){k=h;this.hAa=y}o=o/c.length;l=l/c.length;m=m/c.length;a(this,k,n+o);if(this.B5a){d=c[0].b;c=d.g.x+d.size.x/2;d=d.g.y+d.size.y/2;l<c-200?l=c-200:l>c+200&&(l=c+200);m<d-100?m=d-100:m>d+100&&(m=d+100)}m=m-this.nF;b.x=Math.round(l);b.y=Math.round(m)-Constants.gI}});ig.sf.gq=ig.Ca.extend({target:q,offset:q,lL:q,xHa:y,ula:0,naa:0,ZL:Vec2.create(),$L:Vec2.create(),Uza:Vec2.create(),Xza:Vec2.create(),Qva:q,lJa:1,Acb:1,yHa:q,f:function(a,
b,c){this.target=a;this.offset=Vec2.vc(b,c);this.lL=Vec2.vc(b,c);this.Qva=new ig.Vt(h);Vec2.assign(this.ZL,this.offset);Vec2.assign(this.Uza,this.offset);Vec2.assign(this.$L,this.lL);Vec2.assign(this.Xza,this.lL)},LB:function(a,b,c,d,l,m){this.offset.x=a;this.offset.y=b;this.lL.x=d===g?a:d;this.lL.y=l===g?b:l;this.ula=c||0;this.naa=0;if(this.ula){Vec2.assign(this.Uza,this.ZL);Vec2.assign(this.Xza,this.$L)}if(m){Vec2.assign(this.ZL,this.offset);Vec2.assign(this.$L,this.lL)}},Jab:J(),iw:function(a,
b,c){this.lJa=this.V2a();this.Acb=a;this.yHa=c||q;this.Qva.set(b,ig.Ol.br)},update:function(){this.Qva.ja();this.naa=this.naa+ig.i.Sa;if(ig.r.mu)if(this.naa>=this.ula){Vec2.Bk(this.ZL,23);Vec2.add(this.ZL,this.offset);Vec2.Bk(this.ZL,1/24);Vec2.Bk(this.$L,23);Vec2.add(this.$L,this.lL);Vec2.Bk(this.$L,1/24)}else{var a=Math.min(1,this.naa/this.ula),a=KEY_SPLINES.EASE_IN_OUT.get(a);Vec2.an(this.Uza,this.offset,a,this.ZL);Vec2.an(this.Xza,this.lL,a,this.$L)}},V2a:function(){var a=this.Qva.get();this.yHa&&
a<1&&(a=this.yHa.get(a));return this.lJa+(this.Acb-this.lJa)*a},v7a:function(){ig.le.Os(this,"FAST")},Zl:function(){ig.le.Os(this,"FAST")}})});ig.J=h;
ig.N("impact.feature.camera.camera-steps").O("impact.base.action","impact.base.event","impact.feature.camera.camera").K(function(){ig.oa.SET_CAMERA_TARGET=ig.qa.extend({Q:q,offsetX:0,offsetY:0,speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,zoom:1,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to focus camera on"},offsetX:{c:"Number",d:"x offset to target entity"},offsetY:{c:"Number",d:"y offset to target entity"},speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,
d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."},zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",ab:1},name:{c:"String",d:"If set, camera target will remain even after event is done and can only be removed explictly via its name.",I:h}}}),f:function(a){assertContent(a,"entity");this.Q=a.entity;this.offsetX=a.offsetX||0;this.offsetY=a.offsetY||0;this.speed=a.speed||0;this.Ec=
a.wait||y;this.jj=a.waitSkip||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition;this.zoom=a.zoom||1;this.name=a.name||q},start:function(a,b){var f=ig.Ja.rd(this.Q,b),f=new ig.sf.gq(new ig.sf.xV(f),this.offsetX,this.offsetY);f.iw(this.zoom);ig.le.wx(f,this.speed,this.Ai,this.name);this.name||b.J2(f)},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.oa.SET_CAMERA_POS=ig.qa.extend({g:q,speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,zoom:1,t:new ig.u({attributes:{g:{c:"Vec2",
d:"Position to focus camera on",dr:h,kq:h},speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."},zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",ab:1},name:{c:"String",d:"If set, camera target will remain even after event is done and can only be removed explictly via its name.",I:h}}}),f:function(a){assertContent(a,
"pos");this.g=a.pos;this.speed=a.speed||0;this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition;this.zoom=a.zoom||1;this.name=a.name||q},start:function(a,b){var f=new ig.sf.gq(new ig.sf.Exa(ig.Ja.vG(this.g,Vec2.create())),0,0);f.iw(this.zoom);ig.le.wx(f,this.speed,this.Ai,this.name);this.name||b.J2(f)},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});Vec3.create();ig.oa.SET_CAMERA_BETWEEN=ig.qa.extend({KDa:q,LDa:q,speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,
Ec:y,jj:0,zoom:1,t:new ig.u({attributes:{KDa:{c:"Entity",d:"First entity"},LDa:{c:"Entity",d:"Second entity"},speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."},zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",ab:1},name:{c:"String",d:"If set, camera target will remain even after event is done and can only be removed explictly via its name.",
I:h}}}),f:function(a){this.KDa=a.entity1;this.LDa=a.entity2;this.speed=a.speed||0;this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition;this.zoom=a.zoom||1;this.name=a.name||q},start:function(a,b){var f=ig.Ja.rd(this.KDa,b),i=ig.Ja.rd(this.LDa,b),f=new ig.sf.gq(new ig.sf.PV([f,i]),0,0);f.iw(this.zoom);ig.le.wx(f,this.speed,this.Ai,this.name);this.name||b.J2(f)},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.oa.RESET_CAMERA=ig.qa.extend({speed:0,
Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,name:q,t:new ig.u({attributes:{speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."},name:{c:"String",d:"If defined: only remove camera target of given name",I:h}}}),f:function(a){this.speed=a.speed||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition;
this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.name=a.name||q},start:function(a,b){if(this.name)ig.le.cJb(this.name,this.speed,this.Ai);else for(var f=b.fY,i=f.length;i--;)if(f[i]instanceof ig.sf.gq){ig.le.Os(f[i],this.speed,this.Ai);f.splice(i,1)}},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.oa.UNDO_CAMERA=ig.qa.extend({speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,t:new ig.u({attributes:{speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},
Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."}}}),f:function(a){this.speed=a.speed||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition;this.Ec=a.wait||y;this.jj=a.waitSkip||0},start:function(a,b){for(var f=b.fY,i=f.length;i--;)if(f[i]instanceof ig.sf.gq){ig.le.Os(f[i],this.speed,this.Ai);f.splice(i,1);break}},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.oa.SET_CAMERA_ZOOM=
ig.qa.extend({duration:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,t:new ig.u({attributes:{zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",ab:1},duration:{c:"Number",d:"Duration of zoom transition"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"}}}),f:function(a){this.zoom=a.zoom||1;this.duration=a.duration||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition},start:function(a,b){for(var f=b.fY,i=f.length;i--;)if(f[i]instanceof ig.sf.gq){f[i].iw(this.zoom,this.duration,
this.Ai);break}},ya:N(h)});var a={SELF:aa(),TARGET:function(a){return a.Qd(h)}},b={SELF:0,BETWEEN_TARGET:1,KEEP_TARGET_IN_SCREEN:2};ig.la.FOCUS_CAMERA=ig.qa.extend({offsetX:0,offsetY:0,speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,zoom:1,t:new ig.u({attributes:{offsetX:{c:"Number",d:"x offset to target entity"},offsetY:{c:"Number",d:"y offset to target entity"},speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},
jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."},zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",ab:1},target:{c:"String",d:"Which target to focus with the camera",U:a,I:h},oEa:{c:"String",d:"How camera is focused exactly",U:b},G5:{c:"Number",d:"If defined: Keep offset of Player Camera multiplied with given weight. ",I:h}}}),f:function(c){this.offsetX=c.offsetX||0;this.offsetY=c.offsetY||0;this.speed=c.speed||0;this.Ec=c.wait||y;this.jj=c.waitSkip||
0;this.Ai=typeof c.transition=="string"?KEY_SPLINES[c.transition]:c.transition;this.zoom=c.zoom||1;this.target=a[c.target]||a.SELF;this.oEa=b[c.focusType]||b.SELF;this.G5=c.keepPlayerOffset||0},start:function(a){var d;if(this.oEa&&a.Qd(h)){d=a.Qd(h);if(a.sa==sc.pd.ENEMY&&d instanceof sc.F1)d=ig.r.cb;d=this.oEa==b.BETWEEN_TARGET?new ig.sf.PV([a,d]):new ig.sf.PV([d,a],h);d=new ig.sf.gq(d,this.offsetX,this.offsetY)}else{d=this.target(a)||a;d=new ig.sf.gq(new ig.sf.xV(d),this.offsetX,this.offsetY)}d.iw(this.zoom);
if(this.G5&&a.Ah){var f=a.vf;d.LB(f.offset.x*this.G5,f.offset.y*this.G5,0,f.lL.x*this.G5,f.lL.y*this.G5,h);d.xHa=h}ig.le.wx(d,this.speed,this.Ai);a.Hj(d)},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.la.RESET_CAMERA=ig.qa.extend({speed:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,t:new ig.u({attributes:{speed:{c:"String",U:ig.sf.fA,d:"Speed of camera movement"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"},Ec:{c:"Boolean",d:"Wait until camera movement is done"},jj:{c:"Number",d:"The amount of seconds to skip waiting before target is reached."}}}),
f:function(a){this.speed=a.speed||0;this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition},start:function(a){for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof ig.sf.gq){ig.le.Os(a[b],this.speed,this.Ai);a.splice(b,1)}},ya:function(){return this.Ec?ig.le.AY()<=this.jj:h}});ig.la.SET_CAMERA_ZOOM=ig.qa.extend({duration:0,Ai:KEY_SPLINES.EASE_IN_OUT,Ec:y,jj:0,t:new ig.u({attributes:{zoom:{c:"Number",d:"Zoom Value. 1=default, 2=twice pixel size",
ab:1},duration:{c:"Number",d:"Duration of zoom transition"},Ai:{c:"String",U:KEY_SPLINES,d:"Transition type"}}}),f:function(a){this.zoom=a.zoom||1;this.duration=a.duration||0;this.Ai=typeof a.transition=="string"?KEY_SPLINES[a.transition]:a.transition},start:function(a){for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof ig.sf.gq){a[b].iw(this.zoom,this.duration,this.Ai);break}},ya:N(h)})});ig.J=h;
ig.N("impact.feature.camera.plug-in").O("impact.feature.camera.camera","impact.feature.camera.camera-steps").K(function(){if(window.Ed){wm.Um(/CAMERA/,"yellow");wm.yu&&(wm.yu.cameraInBounds={c:"Boolean",d:"Set true to not move camera outside of map bounds"})}});ig.J=h;
ig.N("impact.feature.rumble.rumble").O("impact.base.event","impact.base.game").K(function(){ig.Fo=ig.Uf.extend({x_:[],tfa:{},offset:Vec2.vc(0,0),f:function(){this.parent("Rumble")},xK:110,az:function(){if(!ig.r.paused){var a=q;this.offset.x=0;for(var b=this.offset.y=0,c=this.x_.length;c--;)if(a=this.x_[c]){a.update();if(a.ek()){a.name&&delete this.tfa[a.name];this.x_.splice(c,1)}else{this.offset.x=this.offset.x+a.offset.x;this.offset.y=this.offset.y+a.offset.y;b=Math.max(b,a.Hq)}}Vec2.length(this.offset,
Math.min(Vec2.length(this.offset),b));ig.r.screen.x=ig.r.screen.x+this.offset.x;ig.r.screen.y=ig.r.screen.y+this.offset.y}},fj:function(){this.x_.length=0;this.tfa={}},OW:function(a){if(this.x_.indexOf(a)==-1){a.name&&(this.tfa[a.name]=a);this.x_.push(a)}},NWb:function(a){a.name&&delete this.tfa[a.name];this.x_.ye(a)},tda:function(a){return this.tfa[a]}});ig.Vf(function(){return ig.gE=new ig.Fo});ig.$V={RANDOM:0,HORIZONTAL:1,VERTICAL:2};ig.Fo.fF=ig.Ca.extend({type:0,name:q,Hq:0,HMa:0,time:0,Wl:y,
offset:q,uF:q,Caa:q,otb:q,Le:0,nk:0,x2:0,aea:y,f:function(a,b,c,d,f,i){this.type=ig.$V[a]||ig.$V.RANDOM;this.name=i||q;this.offset=Vec2.vc(0,0);this.Caa=Vec2.vc(0,0);this.uF=Vec2.vc(0,0);this.otb=Vec2.vc(0,0);this.set(b,c,d,f)},dw:function(){this.nk==-1&&this.stop()},update:function(){if(this.Le<=this.nk||this.nk==-1){var a=0,a=this.Wl&&this.nk!=-1?this.Hq*((this.nk-this.Le)/this.nk):this.Hq;this.xtb(a);this.Le=this.Le+ig.i.Sa}else this.stop()},xtb:function(a){this.x2=this.x2+ig.i.Sa;var b=Math.min(1,
this.x2/this.HMa),b=KEY_SPLINES.EASE_IN_OUT.get(b);this.offset.x=this.GWa(this.uF.x,this.Caa.x,b);this.offset.y=this.GWa(this.uF.y,this.Caa.y,b);if(this.x2>=this.HMa){this.x2=0;Vec2.assign(this.Caa,this.uF);this.type==ig.$V.RANDOM?Vec2.rotate(this.uF,Math.PI/2+Math.random()*Math.PI):Vec2.Lc(this.uF);Vec2.length(this.uF,a)}},GWa:function(a,b,c){return a*c+(1-c)*b},stop:function(){this.time=this.nk;this.offset.x=0;this.offset.y=0},ek:function(){return this.time==this.nk},set:function(a,b,c,d){this.Hq=
ig.Fo.ska[a];this.HMa=ig.Fo.rka[b];this.nk=c;this.Wl=d;this.Le=0;this.offset.x=0;this.offset.y=0;Vec2.assign(this.Caa,this.offset);this.uF.x=this.uF.y=0;this.type==ig.$V.HORIZONTAL?this.uF.x=this.Hq:this.uF.y=this.Hq;this.x2=0}});ig.Fo.ska={WEAKESTEST:0.5,WEAKEST:1,WEAKER:2,WEAK:3,MEDIUM:4,STRONG:5,STRONGER:7,STRONGEST:10,MEGA:15};ig.Fo.rka={SLOWEST:2,SLOWER:1,SLOW:0.5,NORMAL:0.2,FAST:0.075,FASTER:0.04,FASTEST:0.02}});ig.J=h;
ig.N("impact.base.entity-pool").O("impact.base.game").K(function(){ig.xw={Y6:{},WEb:{Yha:function(a,b,c,d){return ig.xw.eAb(this.constructor.yba,a,b,c,d)},ye:function(){ig.xw.jIb(this)}},cD:function(a){a.s4a(this.WEb)},eAb:function(a,b,c,d,f){a=this.Y6[a];if(!a||!a.length)return q;a=a.pop();a.reset(b,c,d,f);return a},jIb:function(a){this.Y6[a.yba]?this.Y6[a.yba].push(a):this.Y6[a.yba]=[a]},OSb:function(a){delete this.Y6[a]},qxb:function(){this.Y6={}}};ig.aRa.s4a({QHa:function(a){ig.xw.qxb();this.parent(a)}})});
ig.J=h;
ig.N("impact.feature.effect.entities.effect").O("impact.base.entity","impact.base.entity-pool").K(function(){var a=Vec3.create(),b=Vec2.create();ig.ev={Vx:0,fka:1,mC:2};ig.wa.Effect=ig.Kc.extend({offset:{x:0,y:0,z:0},Tr:q,Qb:0,Pd:y,duration:0,state:ig.ev.Vx,ne:q,target:q,Yp:q,cP:0,n:0,$Ha:y,gc:[],uO:[],align:ig.Pa.BOTTOM,Pi:{Gq:q,Q:q,align:q,offset:Vec3.create()},dba:q,Gb:q,rU:0,us:y,f:function(a,b,f,i){this.parent(a,b,f,i);this.hWa(i)},reset:function(a,b,f,i){this.parent(a,b,f,i);this.hWa(i)},hWa:function(a){this.b.type=
ig.ca.NONE;this.b.F(0,0,0);this.state=ig.ev.Vx;this.ne=a.effect;this.target=a.target||q;this.Pi.Gq=a.target2Point||q;this.Pi.Q=a.target2||q;this.Pi.align=a.target2Align||q;a.target2Offset?Vec3.assign(this.Pi.offset,a.target2Offset):Vec3.Oa(this.Pi.offset,0,0,0);this.Yp=a.spriteFilter===g?q:a.spriteFilter;this.Qb=a.angle||0;this.Pd=a.flipX||y;this.duration=a.duration||this.ne.oB;a.offset?Vec3.assign(this.offset,a.offset):Vec3.Oa(this.offset,0,0,0);Vec3.add(this.b.g,this.offset);if(this.Tr=a.rotOffset||
q){var d=Vec2.rotate(this.Tr,-this.Qb,b);Vec2.add(this.b.g,d)}this.rU=a.rotateFace;this.us=a.flipLeftFace;this.dba=a.group||q;this.align=(typeof a.align=="string"?ig.Pa[a.align]:a.align)||0;this.n=this.cP=0;this.$Ha=y;this.gc.length=0;this.uO.length=0;this.Gb=a.callback;this.b.time.parent=q;this.b.time.dKa=y;if(this.target){this.target.it(this);this.target.b.xi&&this.target.b.xi.Q.it(this);this.b.time.parent=this.target.b;this.b.time.dKa=h}if(this.Pi&&this.Pi.Q&&this.Pi.Q!=this.target){this.Pi.Q.it(this);
this.Pi.Q.b.xi&&this.Pi.Q.b.xi.Q.it(this)}this.GQ=q},Jub:function(a){this.GQ=a;a.Hj(this);this.GQ!=this.target&&this.GQ!=this.Pi&&a.it(this)},aua:function(a){this.b.time.parent=a&&a.b||q},IK:function(){this.b.time.parent=q;this.b.time.Im=h},M2a:function(a){this.Pi.Gq?Vec3.assign(a,this.Pi.Gq):this.Pi.Q&&this.Pi.Q.lc(this.Pi.align,a);this.Pi.offset&&Vec3.add(a,this.Pi.offset);return a},stop:function(){this.duration=0},ek:function(){return this.state==ig.ev.mC},iS:function(){return this.ne.iS(this)},
F7:L("Gb"),Zl:function(){this.stop()},dw:function(){this.stop()},Xp:function(a,b,f,i){this.Ve&&e(Error("Spawned Particle after effects has been killed!"));var j=i&&this.target?this.target.b:this.b,i=j.g.x+(b&&b.x||0),k=j.g.y+(b&&b.y||0),b=j.g.z+(b&&b.z||0);f.ownerEffect=this;a=ig.r.Pe(a,i,k,b,f);a.b.time.parent=this.b;if(a.face&&this.target.face){Vec2.assign(a.face,this.target.face);a.zia()}a.handle||e(Error("Particle has no handle!"));this.gc.push(a.handle)},update:J(),sr:function(){var c=this.b;
if(this.target&&this.target.face&&this.rU){var d;d=this.rU>0?ig.S4(this.target.face.x,this.target.face.y,this.rU,b):this.target.face;this.Qb=Vec2.Wm(d);if(this.us&&this.Qb>Math.PI)this.Pd=h}var f=d=0,i=0;if(this.target&&this.align){i=this.target.lc(this.align,a);Vec3.add(i,this.offset);if(this.Tr){d=Vec2.rotate(this.Tr,-this.Qb,b);Vec2.add(i,d)}d=i.x-c.g.x;f=i.y-c.g.y;i=i.z-c.g.z;c.g.x=c.g.x+d;c.g.y=c.g.y+f;c.g.z=c.g.z+i}for(var j=this.ne.vDb(this),k=this.gc.length;k--;){var l=this.gc[k],m=l.Q.b,
n=l.oT&&(l.Fa<0||l.oT>=l.n/l.Fa);if(j&&(l.Fa<0||n&&l.cancelable)){l.cancelable=y;l.cancel()}if(l.Fa>=0&&l.n>=l.Fa){l.Q.ze();this.gc.splice(k,1)}else if(this.target){if(n){m.g.x=m.g.x+d;m.g.y=m.g.y+f;m.g.z=m.g.z+i}else if(c.time.parent&&c.time.parent.time.yh<1)m.time.parent=q;this.target.face&&l.rcb&&Vec2.assign(l.Q.face,this.target.face)}}this.ne.update(this);this.ne.ek(this)&&(this.gc.length==0&&this.uO.length==0)&&this.ze()},HOb:function(){for(var a=this.uO.length;a--;)this.uO[a].update(this)&&
this.uO.splice(a,1)},hZa:function(a){for(var b=this.uO.length;b--;)this.uO[b].cancel(this,a)&&this.uO.splice(b,1)},Ge:function(a){if(this.target){this.target.rO(this);this.target.dE&&this.target.dE(this);if(this.target.b.xi){var b=this.target.b.xi.Q;b.rO(this);b.dE&&b.dE(this)}}if(this.Pi.Q&&this.Pi.Q!=this.target){this.Pi.Q.rO(this);if(this.Pi.Q.b.xi){b=this.Pi.Q.b.xi.Q;b.rO(this)}}if(this.GQ){this.GQ.dE(this);this.GQ!=this.target&&this.GQ!=this.Pi&&this.GQ.rO(this)}this.parent(a)}});ig.xw.cD(ig.wa.Effect);
ig.bt={};ig.bt.Pw=function(a,b){a.GA(function(a){return a instanceof ig.wa.Effect&&(!b||b==a.dba)})};ig.bt.aAb=function(a){for(var a=a.XA,b=a.length;b--;){var f=a[b];if(f instanceof ig.wa.Effect&&"modeAura"==f.dba)return f}return q}});ig.J=h;
ig.N("impact.feature.effect.entities.effect-particle").O("impact.base.entity","impact.base.entity-pool").K(function(){ig.b$=ig.Ca.extend({Q:q,rcb:y,n:0,Fa:0,c_:0,s8a:q,XZ:q,Sj:0,Zaa:q,Pd:0,oT:0,cancelable:y,f:function(a,b){this.Q=a;this.rcb=b},cancel:function(){if(this.Fa<0){this.Fa=100;this.n=this.Fa-this.XZ.o2a(this.c_)}else this.n=Math.max(this.n,this.Fa-this.XZ.o2a(this.c_))},setData:function(a){var b=a.data;this.s8a=b;this.XZ=b.state;this.Fa=b.PT;if(this.Fa==-2)this.Fa=a.ownerEffect.duration;
if(!this.Fa)this.Fa=b.bb&&b.bb.Gi()||0;if(b.gKa)this.Fa=this.Fa+(Math.random()*2-1)*b.gKa;this.c_=b.qga&&b.qga.Gi()||0;this.n=0;this.oT=b.oT;this.cancelable=b.cancelable;this.Pd=a.flipX||y;this.Sj=a.angle||0;if(b.OQ)this.Sj=this.Sj+(Math.random()-0.5)*b.OQ*Math.PI*2;if(b.g9a&&Math.random()<0.5)this.Pd=!this.Pd;this.Zaa=a.angleSync||q;if(b.pg){var a=-1,c=0.05;if(this.Fa>0)c=a=this.Fa/2;this.zj=new ig.Bw(this.Q,b.pg,0,c,a,1,y);ig.pg.ey(this.zj)}},am:function(){if(this.Zaa)this.Sj=this.Zaa.Qb;this.n=
this.n+ig.i.ja;this.c_&&this.Fa-this.n<this.c_&&this.Q.Ma("post",h)},jqa:function(a){this.XZ.jqa(a,this.Sj,this.Pd)},$H:function(a){this.XZ.$H(a,this.n,this.Fa,this.c_,this.Sj,this.Pd,this.Zaa)},gea:function(a){this.XZ.gea(a,this.Sj,this.Pd)},Bia:function(a){this.XZ.Bia(a,this.n,this.Fa,this.c_,this.Sj,this.Pd,this.Zaa)},Bd:function(a){var b=this.s8a;a.pLa("default",b.bb);if(b.dB){a.pLa("followUp",b.dB);this.Q.Ma("default",h,"followUp",h)}else{a.s9a("followUp");this.Q.Ma("default",h,q,h)}b.qga?a.pLa("post",
b.qga):a.s9a("post")}});ig.wa.Particle=ig.Wd.extend({handle:q,f:function(a,b,c,d){this.parent(a,b,c,d);this.mb=new ig.Al;this.handle=new ig.b$(this);this.lWa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.lWa(d)},lWa:function(a){this.handle.setData(a);this.b.type=a.collision?ig.ca.PASSIVE:ig.ca.NONE;this.b.F(0,0,0);this.b.YI=h;a.vel&&Vec2.assign(this.b.V,a.vel);this.b.Ze.vg=a.friction||0;this.b.Ze.Am=this.b.Ze.vg;this.handle.Bd(this.mb);this.handle.gea(this.Ya)},update:function(){this.handle.am();
this.handle.Bia(this.Ya);this.parent()}});ig.xw.cD(ig.wa.Particle);ig.wa.FaceParticle=ig.Wd.extend({handle:q,face:{x:0,y:0},f:function(a,b,c,d){this.parent(a,b,c,d);this.mb=new ig.Al;this.handle=new ig.b$(this,h);this.iWa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.face.x=this.face.y=0;this.iWa(d)},iWa:function(a){this.handle.setData(a);this.handle.oT=1;this.b.type=ig.ca.NONE;if(a.size){a=a.size;this.b.F(a.x,a.y,a.z)}else this.b.F(0,0,0);this.handle.Bd(this.mb);this.handle.gea(this.Ya)},
update:function(){this.handle.am();this.handle.Bia(this.Ya);this.parent()}});ig.xw.cD(ig.wa.FaceParticle);ig.wa.CopyParticle=ig.Kc.extend({handle:q,color:q,Em:q,uT:y,zT:Vec3.create(),f:function(a,b,c,d){this.parent(a,b,c,d);this.handle=new ig.b$(this);this.eWa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.eWa(d)},eWa:function(a){this.handle.setData(a);this.b.type=ig.ca.NONE;this.b.Ze.vg=0;this.color=a.color||q;this.Jca=a.fadeColor||q;this.Em=a.colorAlpha||1;this.uT=a.noLighter||y;for(var b=
a.spriteFilter,c=a.entity,d=c.Ua.length&&c.Ua[0].X||y,f=0,n=c.Ua.length;n--;)if(!b||b.indexOf(n)!=-1){this.ul(f+1,d);var o=this.Ua[f];o.assign(c.Ua[n]);o.Yta(0,0,0,0);o.g.y=o.g.y-1;o.qm.y=o.qm.y+1;a.offset&&Vec3.add(o.g,a.offset);this.handle.jqa(o);f++}Vec3.assign(this.zT,this.b.g)},Np:J(),update:function(){this.handle.am();this.parent()},Gh:function(){var a=Vec3.sub(this.b.g,this.zT,c);Vec3.assign(this.zT,this.b.g);var b=this.color;if(this.Jca){var b=this.handle.n/this.handle.Fa,d=new ig.xp(this.color),
f=new ig.xp(this.Jca);ig.xp.z4a(d,f,b,d);b=d.D0()}for(d=this.Ua.length;d--;){Vec3.add(this.Ua[d].g,a);this.uT?this.Ua[d].tMa(b,this.Em):this.Ua[d].Sta(b,this.Em);this.handle.$H(this.Ua[d])}}});ig.xw.cD(ig.wa.CopyParticle);ig.wa.DebrisParticle=ig.Wd.extend({handle:q,j6:8,f:function(a,b,c,d){this.parent(a,b,c,d);this.mb=new ig.Al;this.handle=new ig.b$(this);this.gWa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.gWa(d)},gWa:function(a){this.handle.setData(a);this.b.type=ig.ca.PASSIVE;var b=a.debrisSize;
b?this.b.F(b.x,b.y,b.z):this.b.F(8,8,8);this.b.Fd=a.zGravityFactor==g?1:a.zGravityFactor;this.b.kj=a.zBounciness==g?0.9:a.zBounciness;this.b.Vm=1;this.b.Ze.vg=1;this.b.Ze.Am=0;this.b.Cd.size=4;b=this.b;b.l(b.g.x-b.size.x/2,b.g.y-b.size.y/2,b.g.z);a.vel&&Vec2.assign(this.b.V,a.vel);this.b.V.z=a.zVel||0;this.j6=a.minZVel||0;this.handle.Bd(this.mb);this.handle.gea(this.Ya)},update:function(){this.handle.am();this.handle.Bia(this.Ya);this.parent()},hH:function(){if(this.j6&&this.b.V.z<this.j6)this.b.V.z=
this.j6}});ig.xw.cD(ig.wa.DebrisParticle);var a=Vec2.create(),b=Vec2.create();ig.wa.OffsetParticle=ig.wa.Particle.extend({UK:0,lT:Vec2.vc(0,0),Ap:y,Vg:q,inverse:y,mT:0,v7:y,a$a:y,IZ:0,sfa:0,bE:0,dn:0,f:function(a,b,c,d){this.parent(a,b,c,d);this.tQ(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.tQ(d)},tQ:function(a){this.b.type=ig.ca.NONE;this.UK=a.startFactor||0;Vec2.assign(this.lT,a.moveOffset);this.Ap=a.alongZ||y;this.Vg=a.keySpline||KEY_SPLINES.LINEAR;this.inverse=a.inverse||y;this.sfa=
a.moveDuration||0;this.mT=a.moveRotate||0;this.v7=a.rotateWithTime||y;this.a$a=a.rotateGfx||y;this.IZ=a.normalMoveDist||0;this.dn=0;this.bE=-1;this.qj()},qj:function(){var c=this.bE==-1?0:this.UK+this.bE*(1-this.UK);if(this.bE==-1)this.bE=0;Vec2.Bk(this.lT,c,a);c=this.sfa||this.handle.Fa;this.dn=this.dn+ig.i.ja;if(this.dn>c)this.dn=c;var d=this.dn/c,d=this.Vg.get(d);this.inverse&&(d=1-d);var f=this.UK+d*(1-this.UK);if(this.mT){var l=(this.v7?ig.i.ja/c:d-this.bE)*this.mT*Math.PI*2;this.inverse&&(l=
-l);Vec2.rotate(this.lT,this.Ap?l:-l);if(this.a$a)this.Ya.Qb=this.Ya.Qb+l}l=0;this.IZ&&(l=this.IZ*(ig.i.ja/c));Vec2.Bk(this.lT,f,b);Vec2.sub(b,a);this.l(this.b.g.x+b.x,this.b.g.y+(this.Ap?l:b.y),this.b.g.z+(this.Ap?b.y:l));this.bE=d},update:function(){this.parent();this.qj()}});ig.xw.cD(ig.wa.OffsetParticle);ig.wa.RhombusParticle=ig.wa.Particle.extend({UK:0,P6a:0,Se:100,Ap:y,Vg:q,bE:0,f:function(a,b,c,d){this.parent(a,b,c,d);this.tQ(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.tQ(d)},tQ:function(b){this.b.type=
ig.ca.NONE;this.UK=b.startFactor||0;this.P6a=b.moveFactor||0;this.Se=b.radius||0;this.Ap=b.alongZ||y;this.Vg=b.keySpline||KEY_SPLINES.LINEAR;this.bE=this.UK;b=this.Hza(a,this.UK,this.Se);this.l(this.b.g.x+b.x,this.b.g.y+(this.Ap?0:b.y),this.b.g.z+(this.Ap?b.y:0))},qj:function(){var c=this.Hza(a,this.bE,this.Se);this.bE=this.UK+this.handle.n/this.handle.Fa*this.P6a;var d=this.Hza(b,this.bE,this.Se),c=Vec2.sub(d,c);this.l(this.b.g.x+c.x,this.b.g.y+(this.Ap?0:c.y),this.b.g.z+(this.Ap?c.y:0))},Hza:function(a,
b,c){b=(b%1+1)%1;a.x=c*(Math.abs(Math.abs(3-4*b)-2)-1);a.y=c*(2*Math.abs(1-2*b)-1);return a},update:function(){this.parent();this.qj()}});ig.xw.cD(ig.wa.RhombusParticle);var c=Vec3.create(),d=Vec3.create(),f=Vec3.create();ig.Ewa={FLY_ARC:[{Ne:aa(),Jm:function(a){return 1-(2*a-1)*(2*a-1)}}],EXPAND_DASH:[{Ne:N(0),Jm:function(a){return KEY_SPLINES.EASE_OUT.get(a)}},{Ne:aa(),Jm:function(a){return 1-a}}]};ig.wa.HomingParticle=ig.wa.Particle.extend({inverse:y,lY:q,I6:0,Dra:0,c7a:0,dn:0,ZZ:q,f:function(a,
b,c,d){this.parent(a,b,c,d);this.tQ(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.tQ(d)},tQ:function(a){this.b.type=ig.ca.NONE;this.lY=ig.Ewa[a.flyType]||ig.Ewa.FLY_ARC;this.inverse=a.inverse||y;this.I6=a.ownerEffect;this.Dra=a.normalXY;this.c7a=a.normalZ;this.ZZ=a.phaseDurations||[];this.$ga=a.rotateMoveDir||y;var b=Math.random();if(a.target1Vary){this.r0=Vec2.vc(0,a.target1Vary*Math.sqrt(Math.random()));Vec2.rotate(this.r0,b*2*Math.PI)}else this.r0=q;if(a.target2Vary){this.s0=Vec2.vc(0,
a.target2Vary*Math.sqrt(Math.random()));Vec2.rotate(this.s0,b*2*Math.PI)}else this.s0=q;this.dn=0;this.qj(h)},qj:function(b){if(this.dn>this.handle.Fa)this.dn=this.handle.Fa;var j=this.dn/this.handle.Fa;j>1&&(j=1);for(var k=0,l=1;k<this.lY.length-1&&(this.ZZ[k]||0)<=j;){var m=this.ZZ[k]||0,j=j-m,l=l-m;k++}var m=this.lY[k],j=j/(k==this.lY.length-1?l:this.ZZ[k]||0),k=m.Ne(j),l=m.Jm(j),n=Vec3.assign(f,this.I6.b.g),m=this.I6.M2a(c);this.r0&&Vec2.add(n,this.r0);this.s0&&Vec2.add(m,this.s0);j=this.inverse?
Vec3.an(n,m,k,d):Vec3.an(m,n,k,d);if(l&&this.Dra){k=Vec2.sub(m,n,a);this.Dra<0?Vec2.w_(k):Vec2.hz(k);Vec2.length(k,Math.abs(this.Dra)*l);Vec2.add(j,k)}j.z=j.z+this.c7a*l;if(this.$ga){b=b||this.$ga==sc.Hja.AT_TARGET?Vec3.sub(m,j,c):Vec3.sub(j,this.b.g,c);b.y=b.y-b.z;b=Vec2.Wm(b);this.Ya.Qb=b}this.l(j.x,j.y,j.z)},update:function(){this.parent();this.dn=this.dn+ig.i.ja;this.qj()}});ig.xw.cD(ig.wa.HomingParticle);ig.wa.LaserParticle=ig.Kc.extend({handle:q,f:function(a,b,c,d){this.parent(a,b,c,d);this.handle=
new ig.b$(this);this.jWa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.jWa(d)},jWa:function(a){this.handle.setData(a);this.b.type=ig.ca.NONE;this.b.F(0,0,0);this.b.YI=h;this.I6=a.ownerEffect;this.Rp=a.patternSheet;this.Zt=a.animFrames;this.Mo=a.frameTime||0.1;this.gua=a.shiftSpeed||0;this.ZI=0;this.offset=a.offset||q;this.SJ=a.guiSprites||y;this.qg=a.renderMode},Np:function(){this.ul(1,this.SJ);this.handle.jqa(this.Ua[0])},update:function(){this.handle.am();this.ZI=this.ZI+ig.i.ja;this.parent()},
Gh:function(){var b=this.Ua[0],f=Vec3.assign(d,this.I6.b.g),k=this.I6.M2a(c);this.offset&&Vec3.add(f,this.offset);k=Vec2.Oa(a,k.x,k.y-k.z);Vec2.o0(k,f.x,f.y-f.z);var l=this.Rp.N6,m=Vec2.length(k),m=Math.round(m);b.F(l,0,m,0);b.l(f.x-l/2,f.y,f.z);b.Eb(l/2,m);if(this.qg)b.qg=this.qg;f=Math.round(-this.gua*this.ZI);b.Bj(this.Rp.Iy(this.Zt[Math.floor(this.ZI/this.Mo)%this.Zt.length]),0,f);this.handle.$H(b);b.rotate=Vec2.Wm(k);b.YI=h}});ig.xw.cD(ig.wa.LaserParticle)});ig.J=h;
ig.N("impact.feature.effect.effect-sheet").O("impact.base.loader","impact.base.animation","impact.feature.effect.entities.effect","impact.feature.effect.entities.effect-particle").K(function(){var a={bb:{c:"EffectAnim",d:"Animation of particle"},dB:{c:"EffectAnim",d:"Animation of particle to be played before anim",I:h},qga:{c:"EffectAnim",d:"Animation of particle to be played when particle disappears",I:h}},b={oWb:{c:"ParticleState",d:"Alpha state of particle",KXa:"Number",JXa:1,I:h},rWb:{c:"ParticleState",
d:"Alpha state of particle",KXa:"Vec2",JXa:{x:1,y:1},I:h},qWb:{c:"ParticleState",d:"Alpha state of particle",KXa:"Number",JXa:0,I:h},OQ:{c:"Number",d:"If defined, randomly vary angle centered around start angle with given circular angle range",I:h},g9a:{c:"Boolean",d:"If true: randomly flip particule horizontally",I:h},oT:{c:"Number",d:"Whether particle should move with target. 0=not at all. 0.5=over half the time, 1=entirely",I:h},pWb:{c:"String",d:"If defined: emit light of given size for each particle",
U:ig.mk,I:h},PT:{c:"Number",d:"Duration of particle. 0=animation length. -1=forever. -2=length of effect. Does NOT include time of post animation / transitions",I:h},gKa:{c:"Number",d:"Variance to duration. Value will be added or subtracted from duration",I:h},cancelable:{c:"Boolean",d:"If true, then particle is killed when effect is stopped.",I:h}};ig.si=ig.u.extend({f:function(c){var d={attributes:{}};c.Ns&&(c.Ns!="CopyParticle"&&c.Ns!="LaserParticle")&&ig.merge(d.attributes,a);ig.merge(d.attributes,
c.attributes);c.Ns&&ig.merge(d.attributes,b);this.parent(d)}});ig.si.KD=function(a,b,c){var k={};k.bb=a&&b.anim&&a.Ba[b.anim]||q;k.dB=a&&b.followUpAnim&&a.Ba[b.followUpAnim]||q;k.qga=a&&b.postAnim&&a.Ba[b.postAnim]||q;k.state=new ig.rlb(b);k.oT=b.moveWithTarget||0;k.PT=b.particleDuration||0;k.gKa=b.particleDurVariance||0;k.OQ=b.angleVary||0;k.g9a=b.randFlip||y;k.cancelable=b.cancelable||y;k.pg=ig.mk[b.pLight]||0;a&&!k.bb&&ig.log("EFFECT ERROR - No Animation of name '"+b.anim+"' in '"+c+"' available. Used by '"+
d+"'");return k};ig.si.oN=function(a){return a.cancelable?(a.PT||a.bb.Gi())*a.oT:0};ig.si.TAb=function(a){return a.PT||a.bb.Gi()};var c=Vec2.create();ig.rlb=ig.Ca.extend({alpha:q,scale:q,rotate:q,f:function(a){if(a.pAlpha)this.alpha=this.iza(a.pAlpha);if(a.pScale)this.scale=this.iza(a.pScale);if(a.pRotate)this.rotate=this.iza(a.pRotate,2*Math.PI)},iza:function(a,b){var c={start:ig.copy(a.start),end:ig.copy(a.end),Lx:a.init,FE:a.start?a.start.value:a.init,Mia:a.end?a.end.value:a.start?a.start.value:
a.init};if(b){c.Lx=c.Lx*b;c.FE=c.FE*b;c.Mia=c.Mia*b}c.start&&(c.start.spline=KEY_SPLINES[c.start.spline]||q);c.end&&(c.end.spline=KEY_SPLINES[c.end.spline]||q);return c},o2a:function(a){a=a||0;this.alpha&&this.alpha.end&&(a=Math.max(a,this.alpha.end.time||0));this.scale&&this.scale.end&&(a=Math.max(a,this.scale.end.time||0));this.rotate&&this.rotate.end&&(a=Math.max(a,this.rotate.end.time||0));return a},aS:function(a,b,c){if(this.alpha){a=this.Cza(this.alpha,a,b,c);if(a==0)return this.alpha.FE;if(a<
0){b=this.alpha.Lx;c=this.alpha.FE;a=a+100}else{b=this.alpha.FE;c=this.alpha.Mia}return b+a*(c-b)}return y},F2a:function(a,b,c,d,l){if(this.scale){b=this.Cza(this.scale,b,c,d);if(b==0){a.x=this.scale.FE.x;a.y=this.scale.FE.y}else{if(b<0){c=this.scale.Lx;d=this.scale.FE;b=b+100}else{c=this.scale.FE;d=this.scale.Mia}a.x=c.x+b*(d.x-c.x);a.y=c.y+b*(d.y-c.y)}if(l)a.x=-a.x}},D2a:function(a,b,c,d,l){if(this.rotate){a=this.Cza(this.rotate,a,b,c);b=0;if(a==0)b=this.rotate.FE;else{if(a<0){b=this.rotate.Lx;
c=this.rotate.FE;a=a+100}else{b=this.rotate.FE;c=this.rotate.Mia}b=b+a*(c-b)}l&&(b=-b);return d+b}},gea:function(a,b,c){a.alpha=this.alpha?this.alpha.Lx:1;a.Qb=b+(this.rotate?c?-this.rotate.Lx:this.rotate.Lx:0);a.Xa=this.scale?this.scale.Lx.x:1;a.Va=this.scale?this.scale.Lx.y:1;if(c)a.Xa=-a.Xa},Bia:function(a,b,d,k,l,m,n){if(this.alpha)a.alpha=this.aS(b,d,k);if(this.scale){this.F2a(c,b,d,k,m);a.Xa=c.x;a.Va=c.y}if(this.rotate&&(this.rotate.start||this.rotate.end))a.Qb=this.D2a(b,d,k,l,m);else if(n)a.Qb=
l},jqa:function(a,b,c){a.ge(this.alpha?this.alpha.Lx:1);if(this.scale){a.scale.x=this.scale?this.scale.Lx.x:1;a.scale.y=this.scale?this.scale.Lx.y:1}if(c)a.scale.y=-a.scale.y;if(this.rotate)a.rotate=b+(this.rotate?c?-this.rotate.Lx:this.rotate.Lx:0)},$H:function(a,b,c,d,l,m,n){this.alpha&&a.ge(this.aS(b,c,d));this.scale&&this.F2a(a.scale,b,c,d,m);if(this.rotate&&(this.rotate.start||this.rotate.end))a.rotate=this.D2a(b,c,d,l,m);else if(n)a.rotate=l},Cza:function(a,b,c,d){var d=a.end?a.end.time||d:
0,l=a.start?a.start.time||c-d:0,m=0;if(b<l){m=(b/l).Rb(0,1);a.start.spline&&(m=a.start.spline.get(m));m=m-100}else if(c>0&&a.end&&c-b<d){m=(1-(c-b)/d).Rb(0,1);a.end.spline&&(m=a.end.spline.get(m))}return m}});ig.ud=ig.XE.extend({Wi:"EffectSheet",mb:q,toa:q,G:{},Wo:function(){this.mb&&this.mb.Ka();this.toa&&this.toa.Ka();for(var a in this.G)this.G[a].Ka()},oG:function(){return ig.root+this.path.vm("data/effects/",".json")+ig.Kn()},onload:function(a){this.name=a.name;if(a.ANIMS){a.ANIMS.shapeType||
(a.ANIMS.shapeType="YZ_EXPAND");a.ANIMS.wallY==g&&(a.ANIMS.wallY=1);a.ANIMS.centerPivot==g&&(a.ANIMS.centerPivot=h);this.mb=new ig.Al(a.ANIMS)}if(a.FACEANIMS){a.FACEANIMS.DOCTYPE||(a.FACEANIMS.DOCTYPE="MULTI_DIR_ANIMATION");this.toa=new ig.Al(a.FACEANIMS)}for(var b in a.EFFECTS)this.G[b]=new ig.Ggb(this,b,a.EFFECTS[b])},Jpa:function(a){return!!this.G[a]},va:function(a,b,c){if(!this.loaded)return q;if(!this.G[a]){ig.warn("Could not span effect '"+a+"' of sheet '"+this.path+"'");return q}if(!b)return q;
var c=c||{},d=b.tb();return ig.r.Pe(ig.wa.Effect,d.x,d.y,b.b.g.z,{effect:this.G[a],target:b,target2:c.target2,target2Point:c.target2Point,target2Align:c.target2Align,target2Offset:c.target2Offset,spriteFilter:c.spriteFilter,offset:c.offset,rotOffset:c.rotOffset,align:c.align||ig.Pa.BOTTOM,angle:c.angle||0,flipX:c.flipX||y,rotateFace:c.rotateFace||0,flipLeftFace:c.flipLeftFace||y,duration:c.duration||0,group:c.group||q,callback:c.callback})},Cg:function(a,b,c,d,l,m){if(!this.loaded)return q;if(!this.G[a]){ig.warn("Could not span effect '"+
a+"' of sheet '"+this.path+"'");return q}m=m||{};return ig.r.Pe(ig.wa.Effect,b,c,d,{effect:this.G[a],target:l,target2:m.target2,target2Point:m.target2Point,target2Align:m.target2Align,target2Offset:m.target2Offset,spriteFilter:m.spriteFilter,align:0,flipX:m.flipX||y,rotateFace:m.rotateFace||0,flipLeftFace:m.flipLeftFace||y,angle:m.angle||0,duration:m.duration||0,group:m.group||q,callback:m.callback})}});ig.s9={NONE:0,fI:1,txa:2};var d=q;ig.Ggb=ig.Ca.extend({id:q,Fx:[],e6a:0,ZHa:0,bT:-1,oB:-1,Fa:0,
f:function(a,b,c){this.id=a.path+"/"+b;var k=0;d=b;for(b=0;b<c.length;++b){var l=c[b],m=l.type;if(m=="WAIT"){k=k+l.time;this.Fa=Math.max(this.Fa,k);l=new ig.kk}else if(m=="LOOP_START"){this.e6a=this.Fx.length;this.ZHa=k;l=new ig.kk}else if(m=="LOOP_END"){this.bT=this.Fx.length;this.oB=k;l=new ig.kk;this.Fa=this.oB}else l=new ig.Fj[l.type](a,l);l.time=k;this.Fx.push(l);l=l.Gi?l.Gi():0;if(!l||l<0)l=0;this.Fa=Math.max(this.Fa,k+l)}if(this.bT==-1){this.bT=this.Fx.length;this.oB=this.Fa}if(this.oB-this.ZHa==
0&&this.bT>=this.Fx.length-1){this.oB=this.oB+0.1;this.Fa=Math.max(this.Fa,this.oB)}},Ka:function(){for(var a=0;a<this.Fx.length;++a)this.Fx[a].Ka&&this.Fx[a].Ka()},update:function(a){a.n=a.n+ig.i.ja;var b=a.duration==0;if(a.duration>0){a.duration=a.duration-ig.i.ja;if(a.duration<=ig.lf.Zj)a.duration=0}a.HOb();var c=this.Fx,d=ig.s9.NONE;if(a.cP<this.bT&&!a.duration){a.n=this.oB;if(b||a.$Ha)a.cP=this.bT}if(!a.duration){if(a.state==ig.ev.Vx&&a.n>=this.oB){d=ig.s9.fI;a.state=ig.ev.fka;a.Gb&&a.Gb.Aj(a)}if(a.state==
ig.ev.fka&&a.n>=this.Fa){d=d||ig.s9.txa;a.state=ig.ev.mC;a.Gb&&a.Gb.Aj(a)}}if(a.cP>=this.bT&&d){a.hZa(d==ig.s9.txa);d=q}for(var l;a.cP<c.length&&(l=c[a.cP]).time<=a.n;){if(b=l.start(a)){b=b.gc?new ig.Hgb(l,b):new ig.Igb(l,b);b.update(a)||a.uO.push(b)}a.cP++;if(a.cP==this.bT){if(d){a.hZa(d==ig.s9.txa);d=0}b=this.oB-this.ZHa;if(b<=0||!a.duration)break;a.$Ha=h;a.n=a.n-b;a.cP=this.e6a}}},vDb:function(a){return a.n>=this.oB},ek:function(a){return a.n>=this.Fa},iS:function(a){return a.duration>=0?a.duration+
(this.Fa-this.oB):this.Fa}});ig.kk=ig.Ca.extend({time:0,start:J(),Gi:N(0)});ig.Bi=ig.Ca.extend({l4:q,name:q,C0a:y,f:function(a){if(a.sheet instanceof ig.ud){this.l4=a.sheet;this.C0a=h}else this.l4=new ig.ud(a.sheet);this.name=a.name},Ka:function(){!this.C0a&&this.l4&&this.l4.Tc()},va:function(a,b){return this.l4.va(this.name,a,b)},Cg:function(a,b,c,d,l){return this.l4.Cg(this.name,a,b,c,d,l)}});ig.Igb=ig.Ca.extend({step:q,data:q,duration:0,Le:0,f:function(a,b){this.step=a;this.data=b;this.duration=
b.duration},update:function(a){this.Le=this.Le+ig.i.ja;this.step.update(a,this.Le,this.duration,this.data);var b=this.duration>=0&&this.Le>this.duration;b&&this.step.finish&&this.step.finish(a,this.data);return b},cancel:function(a,b){if(b&&this.duration>=0)return y;var c=0;this.duration<0&&(c=this.step.cancel&&this.step.cancel(a,this.Le,this.data));if(c>0)this.duration=c;else{this.step.finish&&this.step.finish(a,this.data);return h}return y}});ig.Hgb=ig.Ca.extend({step:q,data:q,fva:0,qna:0,duration:0,
Le:0,f:function(a,b){this.step=a;this.data=b;this.fva=b.gc;this.Vg=b.Vg;this.duration=b.duration},update:function(a){var b=this.qna;this.Le=this.Le+ig.i.ja;var c=Math.min(1,this.Le/this.duration);this.Vg&&(c=this.Vg.get(c));this.qna=Math.min(Math.ceil(c*this.fva),this.fva);this.step.update(a,b,this.qna,this.data);return this.qna==this.fva},cancel:function(a){this.step.finish&&this.step.finish(a,this.data);return h}});ig.Fj={}});ig.J=h;
ig.N("impact.feature.rumble.rumble-steps").O("impact.base.action","impact.base.event","impact.feature.effect.effect-sheet","impact.feature.rumble.rumble").K(function(){function a(a){return a instanceof ig.Fo.fF}ig.oa.RUMBLE_SCREEN=ig.qa.extend({hE:q,name:q,duration:0,Hq:0,speed:0,Wl:y,t:new ig.u({attributes:{hE:{c:"String",d:"Type of rumble",U:ig.$V},name:{c:"String",d:"Name of the rumble. Can be ignored for anonymous rumble effects."},duration:{c:"Number",d:"The time the rumble will take. -1 for continues effect"},
Hq:{c:"String",U:ig.Fo.ska,d:"Power of the rumble."},speed:{c:"String",U:ig.Fo.rka,d:"Speed of a single rumble."},Wl:{c:"Boolean",d:"Rumble effect gets weaker towards the passed time."}}}),f:function(a){this.hE=a.rumbleType||q;this.name=a.name||q;this.Hq=a.power||"WEAKEST";this.speed=a.speed||"SLOWEST";this.duration=a.duration||0;this.Wl=a.fade||y},start:function(){if(ig.gE.tda(this.name))ig.gE.tda(this.name).set(this.Hq,this.speed,this.duration,this.Wl);else{var a=new ig.Fo.fF(this.hE,this.Hq,this.speed,
this.duration,this.Wl,this.name);ig.gE.OW(a)}}});ig.oa.RUMBLE_STOP_CONTINUES=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of the rumble to stop. Must be given!"}}}),f:function(a){this.name=a.name||q},start:function(){var a=ig.gE.tda(this.name);a&&a.stop()}});ig.la.RUMBLE_SCREEN=ig.ta.extend({hE:q,name:q,duration:0,Hq:0,speed:0,Wl:y,t:new ig.u({attributes:{hE:{c:"String",d:"Type of rumble",U:ig.$V},name:{c:"String",d:"Name of the rumble. Can be ignored for anonymous rumble effects."},
duration:{c:"Number",d:"The time the rumble will take. -1 for continues effect"},Hq:{c:"String",U:ig.Fo.ska,d:"Power of the rumble."},speed:{c:"String",U:ig.Fo.rka,d:"Speed of a single rumble."},Wl:{c:"Boolean",d:"Rumble effect gets weaker towards the passed time."}}}),f:function(a){this.hE=a.rumbleType||q;this.name=a.name||q;this.Hq=a.power||"WEAKEST";this.speed=a.speed||"SLOWEST";this.duration=a.duration||0;this.Wl=a.fade||y},ya:function(){if(ig.gE.tda(this.name))ig.gE.tda(this.name).set(this.Hq,
this.speed,this.duration,this.Wl);else{var a=new ig.Fo.fF(this.hE,this.Hq,this.speed,this.duration,this.Wl,this.name);ig.gE.OW(a)}return h}});ig.Fj.RUMBLE=ig.Ca.extend({hE:q,duration:0,Hq:0,speed:0,Wl:y,t:new ig.u({attributes:{hE:{c:"String",d:"Type of Rumble effect",U:ig.$V},Hq:{c:"String",d:"Power of rumble effect",U:ig.Fo.ska},speed:{c:"String",d:"Speed of rumble effect",U:ig.Fo.rka},duration:{c:"Number",d:"Duration of rumble effect"},Wl:{c:"Boolean",d:"True if rumble effect should fade towards the end."}}}),
f:function(a,c){this.hE=c.rumbleType||q;this.Hq=c.power||"WEAKEST";this.speed=c.speed||"SLOWEST";this.duration=c.duration||0;this.Wl=c.fade||y},start:function(a){var c=new ig.Fo.fF(this.hE,this.Hq,this.speed,this.duration,this.Wl,q);a.it(c);ig.gE.OW(c)}});ig.Fj.CLEAR_RUMBLE=ig.Ca.extend({hE:q,duration:0,Hq:0,speed:0,Wl:y,t:new ig.u({attributes:{}}),f:J(),start:function(b){b.GA(a)}})});ig.J=h;ig.N("impact.feature.rumble.plug-in").O("impact.feature.rumble.rumble","impact.feature.rumble.rumble-steps").K(J());
ig.J=h;
ig.N("impact.feature.slow-motion.slow-motion").O("impact.base.event","impact.base.game").K(function(){ig.Snb=ig.Uf.extend({KU:[],qT:{},f:function(){this.parent("SlowMotion")},XR:function(){this.update();ig.i.ja=ig.i.Sa*ig.i.fm},update:function(){for(var a=1,b=this.KU.length;b--;){var c=this.KU[b];if(c.update()){c.name&&delete this.qT[c.name];this.KU.splice(b,1)}else a=Math.min(a,this.KU[b].cx())}ig.i.OLb(a)},OAb:function(){for(var a=1,b=1,c=this.KU.length;c--;){var d=this.KU[c],f=d.cx(),b=Math.min(b,
f);d.GS.length>0&&(a=Math.max(a,1/f))}return b*a},xK:100,az:function(){this.update()},Ms:function(){this.fj()},fj:function(){this.KU.length=0;this.qT={}},add:function(a,b,c){a=new ig.HTa(a,b,c);this.KU.push(a);if(c){if(this.qT[c]){this.qT[c].clear();this.qT[c].name=q}this.qT[c]=a}return a},Bba:function(a,b){this.qT[a]&&this.qT[a].clear(b)}});ig.Vf(function(){return ig.Ru=new ig.Snb});ig.HTa=ig.Ca.extend({yh:1,lva:0,name:q,n:0,oCa:y,GS:[],f:function(a,b,c){this.yh=a;this.n=this.lva=b;this.name=c||
q},clear:function(a){this.oCa=h;this.n=this.lva=a||0},update:function(){if(this.n>0){this.n=this.n-ig.i.Sa;if(this.n<0)this.n=0}for(var a=this.GS.length;a--;){this.GS[a].DS.vbb=1/this.cx();this.GS[a].wOb()}if(!this.n&&this.oCa){for(a=this.GS.length;a--;)this.GS[a].clear();this.GS.length=0;return h}return y},Ytb:function(a){var b=new ig.CV,a=new ig.Qwa(a.Aq,b);this.GS.push(a)},cx:function(){var a=this.lva?this.n/this.lva:0;this.oCa||(a=1-a);return(1-a)*1+a*this.yh},Zl:function(){this.clear(0.2)}})});
ig.J=h;
ig.N("impact.feature.slow-motion.slow-motion-steps").O("impact.feature.slow-motion.slow-motion","impact.base.action","impact.base.event").K(function(){ig.oa.ADD_SLOW_MOTION=ig.qa.extend({name:q,yh:0,time:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of the slow motion effect. Used this to remove the effect later on"},yh:{c:"Number",d:"How much to slow down the time. 0.5 = half the speed"},time:{c:"Number",d:"Transition time for slow motion"}}}),f:function(a){this.name=a.name;this.yh=a.factor;this.time=
a.time},start:function(){ig.Ru.add(this.yh,this.time,this.name)}});ig.oa.CLEAR_SLOW_MOTION=ig.qa.extend({name:q,time:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of slow motion to be removed"},time:{c:"Number",d:"Transition time for slow motion removal"}}}),f:function(a){this.name=a.name;this.time=a.time},start:function(){ig.Ru.Bba(this.name,this.time)}});ig.la.ADD_SLOW_MOTION=ig.ta.extend({yh:0,time:0,t:new ig.u({attributes:{yh:{c:"Number",d:"How much to slow down the time. 0.5 = half the speed"},
time:{c:"Number",d:"Transition time for slow motion"},y5a:{c:"Boolean",d:"If true, set entity to be in animation static time"},D4a:{c:"Boolean",d:"If true, inverse accelerate actor"}}}),f:function(a){this.yh=a.factor;this.time=a.time;this.y5a=a.keepEntityStatic;this.D4a=a.inversAccelerate},start:function(a){var b=ig.Ru.add(this.yh,this.time,q);a.Hj(b);if(this.y5a)a.b.time.uA=h;if(this.D4a){for(a=a.b;a.time.parent;)a=a.time.parent;b.Ytb(a.Q)}}});ig.la.CLEAR_SLOW_MOTION=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"Number",
d:"Transition time for slow motion removal"},w9a:{c:"Boolean",d:"If true, remove entity from static time"}}}),f:function(a){this.time=a.time;this.w9a=a.removeEntityStatic},start:function(a){for(var b=a.kl,c=b.length;c--;)if(b[c]instanceof ig.HTa){b[c].clear(this.time);b.splice(c,1)}if(this.w9a)a.b.time.uA=y}})});ig.J=h;ig.N("impact.feature.slow-motion.plug-in").O("impact.feature.slow-motion.slow-motion","impact.feature.slow-motion.slow-motion-steps").K(J());ig.J=h;
ig.N("impact.feature.effect.entities.effect-previewer").O("impact.base.actor-entity").K(function(){Vec3.create();ig.wa.EffectPreviewer=ig.Jc.extend({vf:q,S3:q,xra:q,qR:q,UB:q,Ft:0,t:new ig.u({Dd:h,attributes:{},label:N(""),Uk:h,Sl:"rgba(255,0,0, 0.5)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.F(24,24,24);this.mb=new ig.Al("player");this.Bd()},update:function(){if(this.Ft>0){this.Ft=this.Ft-ig.i.ja;this.Ft<0&&this.K9a()}if(!this.vf){this.vf=new ig.sf.gq(new ig.sf.xV(this),0,0);ig.le.wx(this.vf);
this.vf.iw(2,0.2);ig.r.jKb("READY",q)}if(!this.qR||this.qR.ek()){if(this.qR){this.Ft=1;this.qR=q}if(this.xra){this.S3&&this.S3.Tc();this.S3=q;try{this.S3=new ig.ud(this.xra);this.xra=q}catch(a){console.log("EFFECT SHEET ERROR: ",a)}}if(this.UB&&this.S3){this.qR=this.S3.va(this.UB.name,this,this.UB.yf);this.UB=q}}this.parent()},ecb:function(){if(this.qR){this.qR.stop();this.qR=q;this.Ft=1}},K9a:function(){this.Ft=0;this.Ya.alpha=1;this.Ya.Qb=0;this.Ya.Xa=1;this.Ya.Va=1;ig.gl.Lma(this);ig.gl.EZa(this)},
w7a:function(a,b){if(a=="EFFECT_PREVIEWER_APPEARANCE"){this.F(b.size.x,b.size.y,b.size.z);this.mb=new ig.Al(b.mb);this.mb.Yt(this);this.vf.iw(b.zoom||1,0.2,KEY_SPLINES.EASE_IN_OUT);ig.i.bdb=b.fm||1}else if(a=="UPDATE_EFFECT_SHEET")this.xra=b;else if(a=="PLAY_EFFECT"){this.ecb();this.K9a();this.UB=b;this.UB.yf.target2=ig.r.Is.target2;this.UB.yf.target2Align=ig.Pa.CENTER}else if(a=="STOP_EFFECT"){this.ecb();this.tXb=y}else a=="RELOAD_IMAGE"&&ig.ia.LIb()},Eq:function(a,b){if(b==this.mb){for(var c in this.mb.Ba)break;
this.Ma(c);this.eo=h}}})});ig.J=h;
ig.N("impact.feature.effect.effect-steps").O("impact.base.action","impact.base.event","impact.base.entity").K(function(){function a(a){if(a.ek())this.ne=q}var b=Vec3.create();ig.s1={};ig.s1.SELF=aa();ig.s1.TARGET=function(a){return a.Qd()};ig.tI={};ig.tI.SELF=function(a,b){a.target2=b};ig.tI.ATTRIB_ENTITY=function(a,b,f){a.target2=b.getAttribute(f)};ig.tI.ATTRIB_POINT=function(a,b,f){a.target2Point=b.MEa(f)};ig.tI.TARGET=function(a,b){a.target2=b.Qd()};ig.la.SHOW_EFFECT=ig.ta.extend({ne:q,duration:0,
offset:q,align:0,rU:0,Ec:y,jj:0,group:q,Ck:q,t:new ig.u({attributes:{ne:{c:"Effect",d:"Effect to play"},duration:{c:"Number",d:"Amount of time to play animation.<br /> 0 = actual lenght of animation, -1 = forever until stopped."},offset:{c:"Offset",d:"Offset to entity position"},Tr:{c:"Vec2",d:"X and Y offset that is rotated with face direction. Specified is vector for NORTH viewing direction",I:h},target:{c:"String",d:"If not defined: use same target",I:h,U:ig.s1},align:{c:"String",d:"Alignment of Animation relative to target",
U:ig.Pa},rU:{c:"Number",d:"If number is provided: rotate effect to match entity face, number matching possible face directions. -1 = take precise face rotation"},us:{c:"Boolean",d:"Flip the animation if rotation is negative."},Ec:{c:"Boolean",d:"Wait until effect is over"},jj:{c:"Number",d:"The amount of seconds to skip waiting before effect is over"},mv:{c:"Boolean",d:"If true, keep Effect even after action is finished or canceled"},group:{c:"String",d:"A string identifying the effect. Optional. Name can be used with CLEAR_EFFECT to clear only certain effects",
I:h},Ck:{c:"String",d:"Entity part on which to show animation",I:h},Pi:{c:"String",d:"Secondary effect target options.",I:h,U:ig.tI},vcb:{c:"String",d:"Additional key value to determine second target (e.g. for attribute name)",I:h},v8:{c:"Offset",d:"Offset to entity position",I:h},u8:{c:"String",d:"Alignment of Animation relative to target",U:ig.Pa,I:h},Aoa:{c:"Boolean",d:"If true: show effect fixed at current entity pos"},Yp:{c:"Array",d:"Only apply filter on list of sprites (by index)",Xt:{c:"Integer"},
I:h},$3a:{c:"Boolean",d:"If true: ignore slow motion for this effect",I:h}}}),f:function(a){assertContent(a,"effect");this.ne=new ig.Bi(a.effect);this.duration=a.duration||0;this.offset=a.offset||0;this.Tr=a.rotOffset;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.mv=a.actionDetached||y;this.rU=a.rotateFace||0;this.group=a.group||y;this.us=a.flipLeftFace||y;this.Ck=a.partName||q;this.target=ig.s1[a.target]||q;this.Pi=ig.tI[a.target2]||q;this.u8=ig.Pa[a.target2Align]||
ig.Pa.BOTTOM;this.v8=a.target2Offset;this.vcb=a.target2Key||q;this.Aoa=a.fixPos||y;this.Yp=a.spriteFilter||q;this.$3a=a.ignoreSlowMo||y},Ka:function(){this.ne.Ka()},start:function(c){var d={duration:this.duration,offset:this.offset,rotOffset:this.Tr,align:this.align,group:this.group,rotateFace:this.rU,flipLeftFace:this.us,callback:q,target2:q,target2Point:q,target2Align:this.u8,target2Offset:this.v8,spriteFilter:this.Yp};this.Pi&&this.Pi(d,c,this.vcb);if(this.Ec){c.$a.Aj=a;d.callback=c.$a}var f=c;
this.target&&(f=this.target(c)||c);if(this.Ck)for(var i=f.b.qn,j=i.length;j--;)if(i[j].Q.Ck==this.Ck){f=i[j].Q;break}if(this.Aoa){f=f.lc(this.align,b);d.offset&&Vec3.add(f,d.offset);d=this.ne.Cg(f.x,f.y,f.z,c,d)}else d=this.ne.va(f,d);if(d){d.aua(c);this.mv||d.Jub(c);this.$3a&&d.IK();if(this.Ec)c.$a.ne=d}},ya:function(a){return!this.Ec||!a.$a.ne||a.$a.ne.iS()<=this.jj}});ig.la.CLEAR_EFFECTS=ig.ta.extend({Q:q,group:q,t:new ig.u({attributes:{Q:{c:"String",d:"Secondary effect target.",I:h,U:ig.tI},group:{c:"String",
d:"If provided: only clear effects attached under specified group",I:h}}}),f:function(a){this.Q=ig.tI[a.entity]||q;this.group=a.group||q},moa:function(a){return a instanceof ig.wa.Effect&&(!this.group||this.group==a.dba)},Etb:function(a){return a instanceof ig.wa.Effect},ya:function(a){if(this.Q){var b={};this.Q(b,a);a=b.target2;a.GA(this.moa.bind(this))}else this.group?a.GA(this.moa.bind(this)):a.rX(this.Etb.bind(this));return h}});ig.oa.SHOW_EFFECT=ig.qa.extend({Q:q,ne:q,duration:0,offset:q,group:q,
Ec:y,jj:0,Pi:q,v8:q,u8:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to apply effect on"},ne:{c:"Effect",d:"Effect to play"},duration:{c:"Number",d:"Amount of time to play animation.<br /> 0 = actual lenght of animation, -1 = forever until stopped."},offset:{c:"Offset",d:"Offset to entity position"},align:{c:"String",d:"Alignment of Animation relative to target",U:ig.Pa},group:{c:"String",d:"A string identifying the effect. Optional. Name can be used with CLEAR_EFFECT to clear only certain effects"},
Ec:{c:"Boolean",d:"Wait until effect is over"},jj:{c:"Number",d:"The amount of seconds to skip waiting before effect is over"},Pi:{c:"Entity",d:"Alternative target for homing particles",I:h},v8:{c:"Offset",d:"Offset to entity position",I:h},u8:{c:"String",d:"Alignment of Animation relative to target",U:ig.Pa,I:h}}}),f:function(a){assertContent(a,"effect");this.Q=a.entity;this.ne=new ig.Bi(a.effect);this.duration=a.duration||0;this.offset=a.offset||q;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.group=
a.group||q;this.Ec=a.wait||y;this.jj=a.waitSkip||0;this.Pi=a.target2;this.u8=ig.Pa[a.target2Align]||ig.Pa.BOTTOM;this.v8=a.target2Offset},Ka:function(){this.ne.Ka()},start:function(b,d){var f=ig.Ja.rd(this.Q,d),i;this.Pi&&(i=ig.Ja.rd(this.Pi,d));i={duration:this.duration,offset:this.offset,align:this.align,group:this.group,target2:i,target2Align:this.u8,target2Offset:this.v8};if(this.Ec){i.callback=b;b.Aj=a}b.ne=this.ne.va(f,i)},ya:function(a){if(!this.Ec||!a.ne||a.ne.iS()<=this.jj){a.ne=q;return h}return y}});
ig.oa.CLEAR_EFFECTS=ig.qa.extend({Q:q,group:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to clear effects from"},group:{c:"String",d:"if provided: only clear effects attached under specified group",I:h}}}),f:function(a){this.Q=a.entity;this.group=a.group||q},moa:function(a){return a instanceof ig.wa.Effect&&(!this.group||this.group==a.dba)},start:function(a,b){var f=ig.Ja.rd(this.Q,b);f&&f.GA(this.moa.bind(this))}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-basic").O("impact.feature.effect.effect-sheet").K(function(){function a(a){return a instanceof ig.w$}ig.Fj.WAIT=ig.kk.extend({t:new ig.u({attributes:{time:{c:"Number",d:"Time to wait"}}})});ig.Fj.LOOP_START=ig.kk.extend({t:new ig.u({attributes:{}})});ig.Fj.LOOP_END=ig.kk.extend({t:new ig.u({attributes:{}})});var b=Vec3.create();ig.Fj.PLAY_ANIM=ig.kk.extend({t:new ig.si({Ns:"Particle",attributes:{fC:{c:"Boolean",d:"Align animation with effect rotation"},v5a:{c:"Boolean",
d:"If true: Keep target angle synchronized while particle is visible"},offset:{c:"Offset",d:"Offset to effect center",I:h},Tr:{c:"Offset",d:"Offset rotated with effect direction",I:h}}}),wg:q,offset:{x:0,y:0,z:0},Tr:q,fC:y,f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);if(b.offset)this.offset=b.offset;this.Tr=b.rotOffset||q;this.fC=b.useTargetAngle||y;this.v5a=b.keepAngleSync||y},start:function(a){var d=a.Qb,c=q;this.fC&&(a.target&&a.target.Ya)&&(d=d+a.target.Ya.Qb);this.v5a&&(c=a);var f=Vec3.Oa(b,
0,0,0);if(this.Tr){Vec3.add(f,this.Tr);Vec2.rotate(f,-a.Qb)}Vec3.add(f,this.offset);a.Xp(ig.wa.Particle,f,{data:this.wg,angle:d,flipX:a.Pd,angleSync:c})},Gi:function(){return ig.si.oN(this.wg)}});ig.Fj.PLAY_FACE_ANIM=ig.kk.extend({wg:q,offset:{x:0,y:0,z:0},t:new ig.si({Ns:"FaceParticle",attributes:{offset:{c:"Offset",d:"Offset to effect center",I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.toa,b,a&&a.kr);if(b.offset)this.offset=b.offset},start:function(a){var d=Vec3.assign(b,this.offset);if(a.target){d.x=
d.x-a.target.b.size.x/2;d.y=d.y-a.target.b.size.y/2}a.Xp(ig.wa.FaceParticle,d,{data:this.wg,size:a.target&&a.target.b.size})},Gi:function(){return ig.si.oN(this.wg)}});var c=Vec2.create();ig.Fj.PLAY_ANIM_RANGE=ig.kk.extend({wg:q,offset:{x:0,y:0,z:0},Se:0,duration:0,dj:2,fC:y,t:new ig.si({Ns:"Particle",attributes:{Se:{c:"Number",d:"Radius in which animation is played"},fC:{c:"Boolean",d:"Align animation with effect rotation"},dj:{c:"Number",d:"Amount of particles",ab:1},duration:{c:"Number",d:"Duration in which to spawn particles"},
offset:{c:"Offset",d:"Offset to effect center",I:h},uYa:{c:"Boolean",d:"If true: distribute animation along Y coordinate instead of Z"},jK:{c:"Number",d:"Distance that entities should move upward (or downward if negative",I:h},Vg:{c:"String",d:"Keyspline of particle z movement",U:KEY_SPLINES,I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);if(b.offset)this.offset=b.offset;this.Se=b.radius||0;this.duration=b.duration||0;this.dj=b.numParticles||1;this.fC=b.useTargetAngle||y;this.uYa=b.alongY||
y;this.jK=b.moveZDist||0;this.Vg=KEY_SPLINES[b.keySpline]||q},Gi:M("duration"),start:function(){return{duration:this.duration,gc:this.dj}},update:function(a,b,d){var f=a.Qb;this.fC&&(a.target&&a.target.Ya)&&(f=f+a.target.Ya.Qb);f={data:this.wg,angle:f};if(this.jK){f.moveOffset=Vec2.vc(0,this.jK);f.alongZ=h;f.keySpline=this.Vg}for(;b<d;++b){var i=ig.copy(this.offset),j=this.Se*Math.sqrt(Math.random()),k=Vec2.Oa(c,Math.random()-0.5,Math.random()-0.5);Vec2.length(k,j);i.x=(i.x||0)+k.x;this.uYa?i.y=(i.y||
0)+k.y:i.z=(i.z||0)+k.y;a.Xp(ig.wa[this.jK?"OffsetParticle":"Particle"],i,f)}}});var d={},f={},i=Vec3.create();ig.Fj.PLAY_ANIMS_OVER_ENTITY=ig.kk.extend({wg:q,duration:0,Nz:1,pp:1,qX:y,offset:{x:0,y:0,z:0},dj:0,Vg:0,jK:0,t:new ig.si({Ns:"Particle",attributes:{dj:{c:"Integer",d:"Amount of particles to spawn",ab:1},duration:{c:"Number",d:"Duration in which to spawn particles"},qX:{c:"Boolean",d:"True if particles should be spawned circular (instead of rectangular)."},Nz:{c:"Number",d:"How much of the x dimension should be covered. 1=full",
I:h},pp:{c:"Number",d:"How much of the y dimension should be covered. 1=full",I:h},jK:{c:"Number",d:"Distance that entities should move upward (or downward if negative",I:h},Vg:{c:"String",d:"Keyspline of particle z movement",U:KEY_SPLINES,I:h},offset:{c:"Offset",d:"Offset to effect center",I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);this.duration=b.duration||0;this.Nz=b.xScale||1;this.pp=b.yScale||1;this.qX=b.circular||y;this.jK=b.moveZDist||0;this.Vg=KEY_SPLINES[b.keySpline]||q;b.offset&&
Vec3.assign(this.offset,b.offset);this.dj=b.numParticles||2},start:function(a){if(a.target){ig.gl.spa(d,a.target);var a=d.left+d.right,b=d.top+d.bottom;if(!(a<0||b<0))return{duration:this.duration,gc:this.dj*a/32*b/32*this.Nz*this.pp*this.duration,oi:(-d.left+d.right)/2,bi:d.bottom,Cfa:b/2,Se:a/2,Hub:b/a}}},Gi:function(){return this.duration+ig.si.oN(this.wg)},update:function(a,b,d,j){f.data=this.wg;if(this.jK){f.moveOffset=Vec2.vc(0,this.jK);f.alongZ=h;f.keySpline=this.Vg}for(;b<d;++b){var k=Vec3.Oa(i,
0,0,0),l=Vec2.Oa(c,Math.random()-0.5,Math.random()-0.5);if(this.qX){var u=j.Se*Math.sqrt(Math.random());Vec2.length(l,u)}else{l.x=l.x*j.Se*2;l.y=l.y*j.Se*2}k.x=j.oi+l.x*this.Nz+this.offset.x;k.y=j.bi+this.offset.y;k.z=j.Cfa+l.y*this.pp*j.Hub+this.offset.z;a.Xp(ig.wa[this.jK?"OffsetParticle":"Particle"],k,f,h)}}});var j=Vec2.create(),k=Vec2.create(),l={};ig.Fj.DEBRIS_OVER_ENTITY=ig.kk.extend({wg:q,Nz:1,pp:1,qX:y,offset:{x:0,y:0,z:0},dj:0,TCa:0,t:new ig.si({Ns:"DeprisParticle",attributes:{dj:{c:"Integer",
d:"Amount of particles per tile",ab:1},qX:{c:"Boolean",d:"True if particles should be spawned circular (instead of rectangular)."},Nz:{c:"Number",d:"How much of the x dimension should be covered. 1=full",I:h},pp:{c:"Number",d:"How much of the y dimension should be covered. 1=full",I:h},cw:{c:"Number",d:"Minimum amount of speed",I:h},Mh:{c:"Number",d:"Maximum amount of speed",I:h},i6:{c:"Number",d:"Minimum amount of z speed"},g6:{c:"Number",d:"Maximum amount of z speed"},TCa:{c:"Offset",d:"Collision size of debris",
I:h},Fd:{c:"Number",d:"Gravity factor of debris",I:h},kj:{c:"Number",d:"Z bounciness of debris",I:h},j6:{c:"Number",d:"mininum zVel when bouncing on Ground",I:h},offset:{c:"Offset",d:"Offset to effect center",I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);this.Nz=b.xScale||1;this.pp=b.yScale||1;this.qX=b.circular||y;b.offset&&Vec3.assign(this.offset,b.offset);this.cw=b.minSpeed||0;this.Mh=b.maxSpeed||0;this.i6=b.minZSpeed||0;this.g6=b.maxZSpeed||0;this.Fd=b.zGravityFactor||q;if(b.zBounciness!=
g)this.kj=b.zBounciness;this.TCa=b.debrisSize||g;this.dj=b.numParticles||2},start:function(a){if(a.target){ig.gl.spa(d,a.target);var b=d.left+d.right,c=d.top+d.bottom,f=Math.round(b*this.Nz),p=Math.round(c*this.pp),b=-d.left+(b-f)/2,c=-d.top+(c-p)/2,r=Math.round(this.dj*f/16),u=Math.round(this.dj*p/16);l.data=this.wg;l.zGravityFactor=this.Fd;l.zBounciness=this.kj;l.debrisSize=this.TCa;for(var w=0;w<r;++w)for(var z=0;z<u;++z){var v=f*w/(r-1),x=p*z/(u-1),A=Vec2.Oa(j,v-f/2,x-p/2),x=Vec2.Oa(k,b+v,c+x);
if(this.qX){A.x=A.x*(p/f);if(Vec2.length(A)>p/2)continue;A.x=A.x*(f/p)}v=Vec3.Oa(i,0,0,0);v.x=this.offset.x+x.x;v.y=this.offset.y+x.y;v.z=this.offset.z+x.z;x=Math.random();l.zVel=this.i6*x+this.g6*(1-x);l.vel=Vec2.length(A,this.cw+Math.random()*(this.Mh-this.cw));a.Xp(ig.wa.DebrisParticle,v,l,h)}}},Gi:function(){return ig.si.oN(this.wg)}});ig.Fj.PLAY_SOUND=ig.kk.extend({$b:q,global:y,loop:y,yf:q,t:new ig.u({attributes:{$b:{c:"SoundT",d:"URL of sound."},group:{c:"String",d:"Group of sounds. Sounds of same group will interrupt each other",
I:h},volume:{c:"Number",d:"Volume of sound",ab:1},global:{c:"Boolean",d:"Play sound globally if true"},loop:{c:"Boolean",d:"Loop sound if true"},yl:{c:"Number",d:"Speed playback variance.",I:h},speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h},bEa:{c:"Number",d:"Fade duration of sound when canceled. Increase in case of sound artifacts",I:h},Se:{c:"Number",d:"Radius up to which you can hear the sound",I:h}}}),f:function(a,b){if(b.sound)this.$b=new ig.ka(b.sound,b.volume||
1,b.variance||0,b.group);this.global=b.global||y;this.loop=b.loop||y;this.Se=b.radius||0;this.yf={speed:b.speed||1,fadeDuration:b.fadeDuration||0}},Ka:function(){this.$b&&this.$b.Ka()},start:function(a){if(this.$b){var b;b=this.global?this.$b.play(this.loop,this.yf):ig.ah.gh(this.$b,a,this.loop,this.yf,this.Se);this.loop&&a.it(b)}}});ig.Fj.PLAY_RANDOM_SOUND=ig.kk.extend({Na:[],global:y,loop:y,yf:q,t:new ig.u({attributes:{Na:{c:"Array",d:"Sound to be played random",Xt:{c:"SoundConfig"}},global:{c:"Boolean",
d:"Play sound globally if true"},loop:{c:"Boolean",d:"Loop sound if true"},speed:{c:"Number",d:"Playback speed. 1=default speed. 0.5=half speed.",I:h},bEa:{c:"Number",d:"Fade duration of sound when canceled. Increase in case of sound artifacts",I:h},Se:{c:"Number",d:"Radius up to which you can hear the sound",I:h}}}),f:function(a,b){for(var d=0;d<b.sounds.length;++d){var c=b.sounds[d];this.Na.push(new ig.ka(c.sound,c.volume||1,c.variance||0))}this.global=b.global||y;this.loop=b.loop||y;this.Se=b.radius||
0;this.yf={speed:b.speed||1,fadeDuration:b.fadeDuration||0}},Ka:function(){for(var a=this.Na.length;a--;)this.Na[a].Ka()},start:function(a){var b;b=this.Na.random();b=this.global?b.play(this.loop,this.yf):ig.ah.gh(b,a,this.loop,this.yf,this.Se);this.loop&&a.it(b)}});ig.Fj.STOP_SOUNDS=ig.kk.extend({t:new ig.u({attributes:{}}),f:J(),start:function(b){b.GA(a)}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-box").O("impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create();Vec2.create();var b=Vec3.create(),c=Vec2.create(),d=Vec2.create(),f={};ig.DPa={ALL:15,NORTH:1,EAST:2,SOUTH:4,WEST:8,NO_NORTH:14,NO_EAST:13,NO_SOUTH:11,NO_WEST:7};var i=[{x:0,y:0,Vc:1,sd:0,By:1},{x:1,y:0,Vc:0,sd:1,By:2},{x:0,y:1,Vc:1,sd:0,By:4},{x:0,y:0,Vc:0,sd:1,By:8}];ig.Fj.PARTICLE_BOX=ig.kk.extend({wg:q,padding:{x:0,y:0},DBa:0,dj:4,gN:y,cw:50,Mh:100,HM:y,random:0,vra:0,AIa:0,t:new ig.si({Ns:"OffsetParticle",
attributes:{DBa:{c:"String",d:"Which side of the box to spawn particles on",U:ig.DPa},padding:{c:"Vec2",d:"Padding around target bounds. Can also be negative"},HM:{c:"Boolean",d:"Whether particles should collide."},dj:{c:"Integer",d:"Amount of particles",ab:1},random:{c:"Number",d:"Randomness of particle spawning from 0 to 1",I:h},gN:{c:"Boolean",d:"Flip particles spawned on the right side",I:h},cw:{c:"Number",d:"Minimum Speed of particles",I:h},Mh:{c:"Number",d:"Maximum Speed of particles",I:h},
vra:{c:"Number",d:"Move particles upwards by given pixels. (won't move away in this case)",I:h},AIa:{c:"Number",d:"Z Distance Variance.",I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);b.padding&&Vec2.assign(this.padding,b.padding);this.DBa=ig.DPa[b.boxSide||"ALL"];this.dj=b.numParticles;this.gN=b.flipRightParticles||y;this.cw=b.minSpeed||0;this.Mh=b.maxSpeed||0;this.HM=b.collision||y;this.random=b.random||0;this.vra=b.moveZ||0;this.AIa=b.moveZVariance||0},Gi:function(){return ig.si.oN(this.wg)},
start:function(a){if(a.target)for(var b=a.target.b,d=i.length;d--;)this.DBa&i[d].By&&this.GMb(a,b,i[d])},GMb:function(i,k,l){var m=l.x?k.size.x+this.padding.x:-this.padding.x,n=l.y?k.size.y+this.padding.y:-this.padding.y,o=l.Vc?k.size.x+this.padding.x*2:0,t=l.sd?k.size.y+this.padding.y*2:0,l=Vec2.Oa(a,0,0);Vec2.JQ(l,m,n);m=Math.max(1,this.dj*(o+t)/32|0);o=o/m;t=t/m;f.data=this.wg;f.friction=0.8;f.collision=this.HM;for(n=0;n<m;n++){var p=Vec3.Oa(b,l.x,l.y,0);p.x=p.x+(0.5+n+(Math.random()-0.5)*this.random)*
o;p.y=p.y+(0.5+n+(Math.random()-0.5)*this.random)*t;var r=Vec2.Oa(d,p.x,p.y);Vec2.o0(r,k.size.x/2,k.size.y/2);f.flipX=this.gN&&r.x<0;if(this.vra){r=this.vra+(Math.random()-0.5)*2*this.AIa;f.alongZ=h;f.moveOffset=Vec2.Oa(c,0,r);f.keySpline=KEY_SPLINES.EASE_OUT;i.Xp(ig.wa.OffsetParticle,p,f,h)}else{Vec2.length(r,this.cw+Math.random()*(this.Mh-this.cw));f.vel=r;i.Xp(ig.wa.Particle,p,f,h)}}}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-color").O("impact.feature.effect.effect-sheet").K(function(){ig.Fj.FLASH_COLOR=ig.kk.extend({color:q,alpha:1,E5:0,duration:1,t:new ig.u({attributes:{color:{c:"String",d:"Color to flash in"},alpha:{c:"Number",d:"Maximum alpha of color flash"},duration:{c:"Number",d:"Duration of color flash"},E5:{c:"Number",d:"Duration of showing maximum flash intensity at beginnging."},uT:{c:"Boolean",d:"If true, don't apply lighter color but regular color overlay"}}}),f:function(a,
b){this.color=b.color||"white";this.alpha=b.alpha||1;this.duration=b.duration||1;this.E5=b.keepDuration||0;this.Pj=!b.noLighter;assert(this.duration>=0)},start:function(a){var b=new ig.gwa(this.color,0,a.Yp?a.Yp[0]:q,this.Pj);a.target&&a.target.Ya&&ig.gl.VAa(a.target,b);return{duration:this.duration+this.E5,Ud:b}},Gi:function(){return this.duration+this.E5},update:function(a,b,c,d){a=0;a=b<this.E5?1:Math.max(0,1-(b-this.E5)/this.duration);d.Ud.alpha=a*this.alpha},finish:function(a,b){b.Ud.clear()}});
ig.Fj.BLINK_COLOR=ig.kk.extend({color:q,Bq:1,PD:0,sM:0.5,hma:1,t:new ig.u({attributes:{color:{c:"String",d:"Color to blink in"},Bq:{c:"Number",d:"Maximum alpha intensity"},PD:{c:"Number",d:"Minimum alpha intensity"},sM:{c:"Number",d:"Duration of one time flashing back and force between min and max alpha"},hma:{c:"Integer",d:"Number of blinks. -1 if unlimited"},uT:{c:"Boolean",d:"If true, don't apply lighter color but regular color overlay"}}}),f:function(a,b){this.color=b.color||"white";this.Bq=b.maxAlpha||
1;this.PD=b.minAlpha||0;this.sM=b.blinkDuration||0;this.hma=b.blinkCount||1;this.Pj=!b.noLighter},start:function(a){var b=new ig.gwa(this.color,0,a.Yp?a.Yp[0]:q,this.Pj);a.target&&a.target.Ya&&ig.gl.VAa(a.target,b);return{duration:this.Gi(),Ud:b}},Gi:function(){return this.hma<0?-1:this.hma*this.sM},update:function(a,b,c,d){a=this.PD;if(b<this.sM/2||c>0&&c-b<this.sM/2)a=0;b=b%this.sM/this.sM;b=(b>0.5?1-b:b)*2;d.Ud.alpha=a*(1-b)+this.Bq*b},cancel:function(a,b){return Math.ceil(b/this.sM)*this.sM},
finish:function(a,b){b.Ud.clear()}});ig.Fj.FADE_COLOR=ig.kk.extend({color:q,alpha:1,fadeIn:0,fadeOut:0,duration:0,t:new ig.u({attributes:{color:{c:"String",d:"Color to blink in"},alpha:{c:"Number",d:"Maximum alpha intensity"},fadeIn:{c:"Number",d:"Fade in duration of color"},fadeOut:{c:"Number",d:"Fade out duration of color"},duration:{c:"Number",d:"Duration of color display. -1 = forever"},uT:{c:"Boolean",d:"If true, don't apply lighter color but regular color overlay"}}}),f:function(a,b){this.color=
b.color||"white";this.alpha=b.alpha||1;this.fadeIn=b.fadeIn||0;this.fadeOut=b.fadeOut||0;this.duration=b.duration||0;this.Pj=!b.noLighter},start:function(a){var b=new ig.gwa(this.color,0,a.Yp?a.Yp[0]:q,this.Pj);a.target&&a.target.Ya&&ig.gl.VAa(a.target,b);return{duration:this.Gi(),Ud:b}},Gi:function(){return this.duration<0?-1:this.fadeIn+this.duration+this.fadeOut},update:function(a,b,c,d){a=1;c>0&&c-b<this.fadeOut?a=(c-b)/this.fadeOut:b<this.fadeIn&&(a=b/this.fadeIn);d.Ud.alpha=this.alpha*a},cancel:function(a,
b){return b+this.fadeOut},finish:function(a,b){b.Ud.clear()}});ig.Fj.CHANGE_ALPHA=ig.kk.extend({alpha:0,duration:0,t:new ig.u({attributes:{alpha:{c:"Number",d:"Target alpha value"},duration:{c:"Number",d:"Transition time to target alpha value"}}}),f:function(a,b){this.alpha=b.alpha||0;this.duration=b.duration||0},Gi:M("duration"),start:function(a){if(a.target&&a.target.Ya)if(this.duration==0)a.target.Ya.alpha=this.alpha;else return{duration:this.duration,d0:a.target.Ya.alpha}},update:function(a,b,
c,d){if(a.target&&a.target.Ya){b=Math.min(1,b/c);a.target.Ya.alpha=d.d0*(1-b)+this.alpha*b}},finish:function(a){if(a.target&&a.target.Ya)a.target.Ya.alpha=this.alpha}});ig.Fj.CHANGE_SCALE=ig.kk.extend({Xa:0,Va:0,duration:0,Sha:q,t:new ig.u({attributes:{Xa:{c:"Number",d:"Target scale X value",ab:1},Va:{c:"Number",d:"Target scale Y value",ab:1},duration:{c:"Number",d:"Transition time to target scale value"},Sha:{c:"String",d:"Spline for transition",I:h,U:KEY_SPLINES}}}),f:function(a,b){this.Xa=b.scaleX||
0;this.Va=b.scaleY||0;this.duration=b.duration||0;this.Sha=KEY_SPLINES[b.spline||"LINEAR"]},Gi:M("duration"),start:function(a){if(a.target&&a.target.Ya)if(this.duration==0){a.target.Ya.Xa=this.Xa;a.target.Ya.Va=this.Va}else return{duration:this.duration,lNb:a.target.Ya.Xa,mNb:a.target.Ya.Va}},update:function(a,b,c,d){if(a.target&&a.target.Ya){b=Math.min(1,b/c);b=this.Sha.get(b);a.target.Ya.Xa=d.lNb*(1-b)+this.Xa*b;a.target.Ya.Va=d.mNb*(1-b)+this.Va*b}},finish:function(a){if(a.target&&a.target.Ya){a.target.Ya.Xa=
this.Xa;a.target.Ya.Va=this.Va}}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-circle").O("impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create(),b=Vec2.create(),c=Vec3.create(),d={},f=ig.kk.extend({wg:q,offset:{x:0,y:0,z:0},duration:0,my:y,Tr:q,dj:16,Ij:0,Sj:0,random:y,gL:0,Qq:0,M6:y,gN:y,HM:y,Ap:y,fC:y,f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);if(b.offset)this.offset=b.offset;this.Tr=b.rotOffset||q;this.dj=b.numParticles;this.random=b.random||y;this.gL=b.uniformRandom||0;this.Ij=b.centralAngle*Math.PI*2||Math.PI*2;this.Sj=
b.startAngle!==g?b.startAngle*Math.PI*2:-this.Ij/2;this.Qq=b.startDist||0;this.M6=b.particleRotate||y;this.gN=b.flipRightParticles||y;this.HM=b.collision||y;this.Ap=b.alongZ||y;this.duration=b.duration||0;this.my=b.clockwise||y;this.fC=b.useTargetAngle||y;this.yZa=KEY_SPLINES[b.circleSpline]||q},start:function(a){if(this.duration)return{duration:this.duration,gc:this.dj,Vg:this.yZa};this.Aaa(a,0,this.dj)},Aaa:function(f,j,k){var l=Vec2.Oa(a,0,-1),m=this.Ij==Math.PI*2?this.dj:this.dj-1;d.data=this.wg;
d.friction=0.8;d.collision=this.HM;for(d.alongZ=this.Ap;j<k;j++){var n=m?j/m:0.5;m&&this.gL?n=n+1/m*(Math.random()-0.5)*this.gL:this.random&&(n=Math.random());n=this.Sj+n*this.Ij;this.my||(n=-n);f.Pd&&(n=-n);n=n+f.Qb;this.fC&&(n=n+f.target.Ya.Qb);var o=Vec3.Oa(c,0,0,0);if(this.Tr){Vec3.add(o,this.Tr);Vec2.rotate(o,-f.Qb)}this.offset&&Vec3.add(o,this.offset);var t=Vec2.rotate(l,-n,b),p=this.gN&&t.x<0;f.Pd&&(p=!p);d.angle=this.M6?n:0;d.flipX=p;if(this.Ap)t.y=t.y*-1;this.Vn(f,o,d,t)}},update:function(a,
b,d){this.Aaa(a,b,d)},Gi:function(){return this.duration+ig.si.oN(this.wg)},Vn:J()});ig.Fj.OFFSET_PARTICLE_CIRCLE=f.extend({xIa:0,EZ:0,Vg:q,mT:0,v7:y,inverse:y,IZ:0,t:new ig.si({Ns:"OffsetParticle",attributes:{dj:{c:"Integer",d:"Number of particles to be spawned"},duration:{c:"Number",d:"Duration of particle spawning"},my:{c:"Boolean",d:"true if particles are to move clockwise",I:h},Ij:{c:"Number",d:"Circle range to spawn. 1=full circle",ab:1},Sj:{c:"Number",d:"Turn angle from which to start relative to view direciton. 0.25=quarter turn",
I:h},Qq:{c:"Number",d:"Start distance away from center"},random:{c:"Boolean",d:"If true, spawn particles randomly along circle",I:h},gL:{c:"Number",d:"Only vary slightly along circle. Set intensity between 0-1",I:h},M6:{c:"Boolean",d:"If true, rotate particle with movement orientation",I:h},gN:{c:"Boolean",d:"If true, flip particles on the right side",I:h},Ap:{c:"Boolean",d:"If true, move particales along z instead of y",I:h},offset:{c:"Offset",d:"Offset to effect center",I:h},Tr:{c:"Offset",d:"Offset rotated with effect direction",
I:h},fC:{c:"Boolean",d:"Align spawning with rotation of target",I:h},yZa:{c:"String",d:"Keyspline used for circle spawning speed",U:KEY_SPLINES,I:h},xIa:{c:"Number",d:"Fixed move distance in pixels away from circle (or towards circle if inverse=true)"},EZ:{c:"Number",d:"Move distance variation in pixels",I:h},sfa:{c:"Number",d:"Duration of particle motion. If not defined, will use particleDuration",I:h},Vg:{c:"String",d:"Keyspline of particle movement",U:KEY_SPLINES},mT:{c:"Number",d:"Particles should rotate while moving away/torwards circle. 1=full circle rotation",
I:h},v7:{c:"Boolean",d:"Set to true if particles should rotate with time rather than move distance",I:h},inverse:{c:"Boolean",d:"Set to true if particles should move towards center instead of away.",I:h},IZ:{c:"Number",d:"Distance to be moved in orthogonal direction of circle",I:h},HM:{c:"Boolean",d:"Set to true if particles should collide with environment"}}}),f:function(a,b){this.parent(a,b);this.xIa=b.moveDist||0;this.EZ=b.moveVariance||0;this.sfa=b.moveDuration||0;this.Vg=KEY_SPLINES[b.keySpline]||
q;this.mT=b.moveRotate||0;this.v7=b.rotateWithTime||y;this.inverse=b.inverse||y;this.IZ=b.normalMoveDist||0},Vn:function(a,b,d,c){var f=this.Qq+this.xIa+(2*Math.random()-1)*this.EZ;Vec2.length(c,f);d.startFactor=this.Qq/f;d.moveOffset=c;d.moveDuration=this.sfa;d.keySpline=this.Vg;d.moveRotate=a.Pd?-this.mT:this.mT;d.rotateWithTime=this.v7;d.rotateGfx=this.M6;d.inverse=this.inverse;d.normalMoveDist=this.IZ;a.Xp(ig.wa.OffsetParticle,b,d);delete d.normalMoveDist;delete d.moveOffset;delete d.moveDuration;
delete d.keySpline;delete d.moveRotate;delete d.rotateWithTime;delete d.inverse}});f=f.extend({Vn:function(a,b,d,c){b.x=b.x+c.x*this.Qq;this.Ap?b.z=b.z+c.z*this.Qq:b.y=b.y+c.y*this.Qq;d.vel=Vec2.length(c,this.cw+Math.random()*(this.Mh-this.cw));this.lNa(a,b,d);delete d.vel},lNa:J()});ig.Fj.PARTICLE_CIRCLE=f.extend({cw:50,Mh:100,t:new ig.si({Ns:"Particle",attributes:{dj:{c:"Integer",d:"Number of particles to be spawned"},duration:{c:"Number",d:"Duration of particle spawning"},my:{c:"Boolean",d:"true if particles are to move clockwise",
I:h},Ij:{c:"Number",d:"Circle range to spawn. 1=full circle",ab:1},Sj:{c:"Number",d:"Turn angle from which to start relative to view direciton. 0.25=quarter turn",I:h},Qq:{c:"Number",d:"Start distance away from center"},random:{c:"Boolean",d:"If true, spawn particles randomly along circle",I:h},gL:{c:"Number",d:"Only vary slightly along circle. Set intensity between 0-1",I:h},M6:{c:"Boolean",d:"If true, rotate particle with movement orientation",I:h},gN:{c:"Boolean",d:"If true, flip particles on the right side",
I:h},Ap:{c:"Boolean",d:"If true, move particles along z instead of y",I:h},offset:{c:"Offset",d:"Offset to effect center",I:h},Tr:{c:"Offset",d:"Offset rotated with effect direction",I:h},fC:{c:"Boolean",d:"Align spawning with rotation of target",I:h},cw:{c:"Number",d:"Minimum amount of speed",I:h},Mh:{c:"Number",d:"Maximum amount of speed",I:h},HM:{c:"Boolean",d:"Set to true if particles should not collide with environment",I:h}}}),f:function(a,b){this.parent(a,b);this.cw=b.minSpeed||0;this.Mh=b.maxSpeed||
0},lNa:function(a,b,d){a.Xp(ig.wa.Particle,b,d)}});ig.Fj.DEBRIS_CIRCLE=f.extend({cw:50,Mh:100,i6:50,g6:100,Fd:0,kj:g,t:new ig.si({Ns:"DeprisParticle",attributes:{dj:{c:"Integer",d:"Number of particles to be spawned"},duration:{c:"Number",d:"Duration of particle spawning"},my:{c:"Boolean",d:"true if particles are to move clockwise",I:h},Ij:{c:"Number",d:"Circle range to spawn. 1=full circle",ab:1},Sj:{c:"Number",d:"Turn angle from which to start relative to view direciton. 0.25=quarter turn",I:h},
Qq:{c:"Number",d:"Start distance away from center"},random:{c:"Boolean",d:"If true, spawn particles randomly along circle",I:h},gL:{c:"Number",d:"Only vary slightly along circle. Set intensity between 0-1",I:h},M6:{c:"Boolean",d:"If true, rotate particle with movement orientation",I:h},gN:{c:"Boolean",d:"If true, flip particles on the right side",I:h},Ap:{c:"Boolean",d:"If true, move particales along z instead of y",I:h},offset:{c:"Offset",d:"Offset to effect center",I:h},Tr:{c:"Offset",d:"Offset rotated with effect direction",
I:h},fC:{c:"Boolean",d:"Align spawning with rotation of target",I:h},cw:{c:"Number",d:"Minimum amount of speed",I:h},Mh:{c:"Number",d:"Maximum amount of speed",I:h},i6:{c:"Number",d:"Minimum amount of z speed",I:h},g6:{c:"Number",d:"Maximum amount of z speed",I:h},Fd:{c:"Number",d:"Gravity factor of debris",I:h},kj:{c:"Number",d:"Z bounciness of debris",I:h},j6:{c:"Number",d:"mininum zVel when bouncing on Ground",I:h},HM:{c:"Boolean",d:"Set to true if particles should not collide with environment"}}}),
f:function(a,b){this.parent(a,b);this.cw=b.minSpeed||0;this.Mh=b.maxSpeed||0;this.i6=b.minZSpeed||0;this.g6=b.maxZSpeed||0;this.Fd=b.zGravityFactor||q;if(b.zBounciness!=g)this.kj=b.zBounciness},lNa:function(a,b,d){var c=Math.random();d.zVel=this.i6*c+this.g6*(1-c);d.zGravityFactor=this.Fd;d.zBounciness=this.kj;a.Xp(ig.wa.DebrisParticle,b,d);delete d.zVel;delete d.zGravityFactor}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-homing").O("impact.feature.effect.effect-sheet","impact.feature.effect.entities.effect-particle").K(function(){var a=Vec2.create();sc.Hja={NONE:0,MOVE_DIR:1,AT_TARGET:2};ig.Fj.SHOOT_HOMING_PARTICLE=ig.kk.extend({t:new ig.si({Ns:"Particle",attributes:{duration:{c:"Number",d:"Time over which to spawn particles"},dj:{c:"Number",d:"How many homing particles to spawn"},lY:{c:"String",d:"How particle should fly between targets",U:ig.Ewa},inverse:{c:"Boolean",d:"If true, fly target1->target2. Otherwise fly ftarget2->target1"},
dJa:{c:"NumberVary",d:"How far particle should fly in normal xy direction"},j7a:{c:"Number",d:"How to scale radius along Z direction. 1=normal length",ab:1},k7a:{c:"NumberVary",d:"Angle variance relative to radius pointing upwards. 1= offset radius will be along half circle"},r0:{c:"Number",d:"Random radial offset from target1 pos in x/y coords",I:h},s0:{c:"Number",d:"Random radial offset from target1 pos in x/y coords",I:h},ZZ:{c:"NumberArray",d:"Relative duration for each phase of the fly type. Values must add to 1"},
$ga:{c:"String",d:"How particles should be rotated",U:sc.Hja}}}),wg:q,f:function(a,c){this.duration=c.duration||0;this.wg=ig.si.KD(a.mb,c,a&&a.kr);this.dj=c.numParticles||1;this.lY=c.flyType;this.inverse=c.inverse||y;this.dJa=c.offsetRadius||0;this.j7a=c.offRadiusZScale||0;this.k7a=c.offsetAngle||0;this.ZZ=c.phaseDurations;this.$ga=sc.Hja[c.rotateMoveDir]||sc.Hja.NONE;this.r0=c.target1Vary;this.s0=c.target2Vary},start:function(a){if(this.duration)return{duration:this.duration,gc:this.dj};this.Aaa(a,
0,this.dj)},Aaa:function(b,c,d){for(var f={data:this.wg,ownerEffect:b,normalXY:0,normalZ:0,phaseDurations:this.ZZ,flyType:this.lY,inverse:this.inverse,rotateMoveDir:this.$ga,target1Vary:this.r0,target2Vary:this.s0};c<d;c++){var i=Vec2.Oa(a,0,1);Vec2.rotate(i,(Math.random()-0.5)*Math.PI*this.k7a);f.normalXY=ig.Ja.yY(this.dJa)*i.x;f.normalZ=ig.Ja.yY(this.dJa)*i.y*this.j7a;b.Xp(ig.wa.HomingParticle,q,f)}},update:function(a,c,d){this.Aaa(a,c,d)},Gi:function(){return this.duration+ig.si.oN(this.wg)}})});
ig.J=h;
ig.N("impact.feature.effect.fx.fx-light").O("impact.feature.effect.effect-sheet").K(function(){function a(a){return a instanceof ig.Bw}function b(a){return a instanceof ig.tV}ig.Fj.LIGHT=ig.kk.extend({size:q,fadeIn:0,fadeOut:0,duration:0,Bq:1,Y4:g,t:new ig.u({attributes:{size:{c:"String",d:"Size of emitting light",U:ig.mk},fadeIn:{c:"Number",d:"Fade in time of light"},fadeOut:{c:"Number",d:"Fade out time of light"},duration:{c:"Number",d:"Duration of light source. -1=forever"},Bq:{c:"Number",d:"Max alpha intensity of light",
I:h},Y4:{c:"Boolean",d:"True if light should additionally glow (lighter rendering addition)"},offset:{c:"Offset",d:"Offset for light position",I:h}}}),f:function(a,b){this.size=ig.mk[b.size||"XS"];this.fadeIn=b.fadeIn||0;this.fadeOut=b.fadeOut||0;this.duration=b.duration||0;this.Bq=b.maxAlpha||1;this.offset=b.offset||q;this.Y4=b.glow},start:function(a){a=new ig.Bw(a,this.size,this.fadeIn,this.fadeOut,this.duration,this.Bq,this.Y4);this.offset&&a.LB(this.offset.x,this.offset.y,this.offset.z);ig.pg.ey(a)},
Gi:function(){return this.duration>=0?this.duration+this.fadeIn+this.fadeOut:0}});ig.Fj.CLEAR_LIGHT=ig.kk.extend({t:new ig.u({attributes:{}}),f:J(),start:function(b){b.GA(a)},Gi:N(0)});ig.Fj.DARKNESS=ig.kk.extend({fadeIn:0,fadeOut:0,duration:0,EG:1,t:new ig.u({attributes:{fadeIn:{c:"Number",d:"Fade in time of darkness"},fadeOut:{c:"Number",d:"Fade out time of darkness"},duration:{c:"Number",d:"Duration of darkness. -1=forever"},EG:{c:"Number",d:"Intensity of darkness"}}}),f:function(a,b){this.fadeIn=
b.fadeIn||0;this.fadeOut=b.fadeOut||0;this.duration=b.duration||0;this.EG=b.intensity||1},start:function(a){var b=new ig.tV;b.Zta(a,this.EG,this.duration,this.fadeIn,this.fadeOut);ig.pg.Oaa(b)},Gi:function(){return this.duration>=0?this.duration+this.fadeIn+this.fadeOut:0}});ig.Fj.CLEAR_DARKNESS=ig.kk.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.GA(b)},Gi:N(0)});ig.Fj.SCREEN_FLASH=ig.kk.extend({color:q,fadeIn:0,fadeOut:0,duration:0,EG:1,t:new ig.u({attributes:{color:{c:"String",d:"Color of screenflash"},
fadeIn:{c:"Number",d:"Fade in time of darkness"},fadeOut:{c:"Number",d:"Fade out time of darkness"},duration:{c:"Number",d:"Duration of darkness. -1=forever"}}}),f:function(a,b){this.color=b.color||q;this.fadeIn=b.fadeIn||0;this.fadeOut=b.fadeOut||0;this.duration=b.duration||0},start:function(a){a=new ig.tnb(a,this.color,this.fadeIn,this.fadeOut,this.duration);ig.pg.gub(a)},Gi:function(){return this.duration>=0?this.duration+this.fadeIn+this.fadeOut:0}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-line").O("impact.feature.effect.effect-sheet").K(function(){ig.Fj.COPY_SPRITE=ig.kk.extend({wg:q,color:q,Em:1,offset:{x:0,y:0,z:0},t:new ig.si({Ns:"CopyParticle",attributes:{color:{c:"String",d:"Color to combine with sprite copy.",I:h},Em:{c:"String",d:"Alpha of pverlay color",I:h},Jca:{c:"String",d:"Sprite color will fade to this color towards end of display",I:h},offset:{c:"Offset",d:"offset of particle to target",I:h},uT:{c:"Boolean",d:"If true, don't apply lighter color but regular color overlay"}}}),
f:function(a,b){this.wg=ig.si.KD(q,b,a&&a.kr);this.wg.PT=this.wg.PT||1;this.color=b.color||q;this.Em=b.colorAlpha||1;this.Jca=b.fadeColor||q;this.offset=b.offset||this.offset;this.uT=b.noLighter||y},start:function(a){a.Xp(ig.wa.CopyParticle,q,{entity:a.target,color:this.color,fadeColor:this.Jca,colorAlpha:this.Em,data:this.wg,offset:this.offset,spriteFilter:a.Yp,noLighter:this.uT})}});ig.Fj.LASER_SPRITE=ig.kk.extend({wg:q,t:new ig.si({Ns:"LaserParticle",attributes:{pattern:{c:"TileSheet",d:"Pattern to be used for animation. Will be repeated in y direction",
xc:h},uWb:{c:"Integer",d:"How many tiles in y dimension",ab:1},Zt:{c:"AnimFrames",d:"Frames of sheet animation",I:h},Mo:{c:"Number",d:"Time per frame (in seconds)"},gua:{c:"Number",d:"Speed by which gfx will be shifted along laser direction (pixels per second)"},offset:{c:"Offset",d:"offset of particle to target",I:h},SJ:{c:"Boolean",d:"If true, display laser as gui sprite"},qg:{c:"String",d:"Render mode of Sprite",I:h,U:["source-over","lighter"],XJa:h}}}),f:function(a,b){this.wg=ig.si.KD(q,b,a&&
a.kr);this.wg.PT=this.wg.PT||1;this.Rp=new ig.Xz(b.pattern.src,ig.nf.Eg.OL,b.pattern.width,b.pattern.height,b.pattern.offX,b.pattern.offY,b.pattern.xCount||1,b.patternYCount||1);this.Zt=b.animFrames||[0];this.Mo=b.frameTime||0.1;this.gua=b.shiftSpeed||0;this.offset=b.offset||q;this.SJ=b.guiSprites;this.qg=b.renderMode},Ka:function(){this.Rp&&this.Rp.Tc()},start:function(a){a.Xp(ig.wa.LaserParticle,q,{data:this.wg,ownerEffect:a,patternSheet:this.Rp,animFrames:this.Zt,frameTime:this.Mo,shiftSpeed:this.gua,
offset:this.offset,guiSprites:this.SJ,renderMode:this.qg})}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-rhombus").O("impact.feature.effect.effect-sheet").K(function(){var a=Vec3.create(),b={};ig.Fj.PARTICLE_RHOMBUS=ig.kk.extend({wg:q,duration:0,dj:0,scale:0,TKa:0,offset:{x:0,y:0,z:0},yIa:0,EZ:0,UKa:y,Vg:q,Ap:q,hPa:0,t:new ig.si({Ns:"RhombusParticle",attributes:{dj:{c:"Number",d:"Amount of particles to spawn per 32 pixel line length and second",ab:1},duration:{c:"Number",d:"Duration in which to spawn particles"},scale:{c:"Number",d:"How much of the entity bounds should be covered. 0.5= half of the bounds are covered. 1.0=all the bounds",
I:h},TKa:{c:"Number",d:"Number of pixel substracted from radius",I:h},yIa:{c:"Number",d:"Move distance of particles in pixels"},EZ:{c:"Number",d:"Move variance in pixels. Added +- to distance",I:h},UKa:{c:"Boolean",d:"If true, randomly flip direction of particle",I:h},hPa:{c:"Number",d:"zRange randomly added to zPos when spawing",I:h},Vg:{c:"String",d:"Keyspline of particle movement",U:KEY_SPLINES},Ap:{c:"Boolean",d:"If true, move particles along z instead of y",I:h},offset:{c:"Offset",d:"Offset to effect center",
I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);this.duration=b.duration||0;this.scale=b.scale||0;this.TKa=b.radiusSub||0;b.offset&&Vec3.assign(this.offset,b.offset);this.dj=b.numParticles||2;this.yIa=b.moveDistance||1;this.EZ=b.moveVariance||0;this.Vg=KEY_SPLINES[b.keySpline]||q;this.Ap=b.Boolean||y;this.UKa=b.randomDirFlip||y;this.hPa=b.zRange||0},start:function(a){if(a.target){a=a.target.b.size.x;if(!(a<0)){var a=a/2*this.scale-this.TKa,b=4*Math.sqrt(a*a+a*a);return{duration:this.duration,
gc:Math.round(this.dj*b/32*this.duration),Se:a,MJb:b}}}},Gi:function(){return this.duration+ig.si.oN(this.wg)},update:function(c,d,f,i){b.data=this.wg;b.radius=i.Se;b.alongZ=this.Ap;for(b.keySpline=this.Vg;d<f;++d){var j=Vec3.assign(a,this.offset);j.z=j.z+Math.floor(this.hPa*Math.random());b.startFactor=Math.random();b.moveFactor=(this.yIa+(2*Math.random()-1)*this.EZ)/i.MJb;this.UKa&&Math.random()>=0.5&&(b.moveFactor=-b.moveFactor);c.Xp(ig.wa.RhombusParticle,j,b)}}})});ig.J=h;
ig.N("impact.feature.effect.fx.fx-wipe").O("impact.feature.effect.effect-sheet").K(function(){var a=Vec3.create();ig.Fj.MOVE_OFFSET=ig.kk.extend({t:new ig.u({attributes:{start:{c:"Offset",d:"Offset at start"},end:{c:"Offset",d:"Offset at end"},r9a:{c:"Boolean",d:"If true, multiply each offset with size of entity"},duration:{c:"Number",d:"Duration of wipe."},Vg:{c:"String",d:"Keyspline of movement",U:KEY_SPLINES}}}),f:function(a,b){this.PH=b.start;this.CJ=b.end;this.r9a=b.relative||y;this.duration=
b.duration||0;this.Vg=KEY_SPLINES[b.keySpline]||KEY_SPLINES.EASE_IN_OUT},Gi:M("duration"),start:function(a){if(a.target){a={duration:0};a.duration=this.duration;return a}},update:function(b,c,i){if(b.target){c=this.Vg.get(Math.min(1,c/i));c=Vec3.an(this.PH,this.CJ,c,a);this.r9a&&Vec3.FZ(c,b.target.b.size);this.I$a(b.target,c,b.Yp)}},finish:J(),I$a:function(a,b,c){for(var j=a.Ua,k=j.length;k--;){var l=j[k];c!==q&&c.indexOf(k)==-1||Vec3.assign(l.Wj,b)}a=a.b.qn;if(a.length>0)for(k=a.length;k--;)this.I$a(a[k].Q,
b,c)}});ig.Fj.WIPE=ig.kk.extend({dir:0,PH:0,CJ:0,duration:0,t:new ig.u({attributes:{dir:{c:"String",d:"Wipe direction",U:ig.kA},PH:{c:"Number",d:"Start wipe position (0-1). 1=all wiped away."},CJ:{c:"Number",d:"End wipe position (0-1). 1=all wiped away."},duration:{c:"Number",d:"Duration of wipe."},sMa:{c:"Boolean",d:"If true, do not set clipping for any other side. This allows running wipes in parallel."}}}),f:function(a,b){this.dir=ig.kA[b.dir]||ig.kA.NORTH;this.PH=b.startValue||0;this.CJ=b.endValue||
0;this.duration=b.duration||0;this.sMa=b.setOnlyOneSide||0},Gi:M("duration"),start:function(a){if(a.target){var b={duration:0,left:-1E3,right:-1E3,top:-1E3,bottom:-1E3};ig.gl.spa(b,a.target);b.duration=this.duration;return b}},update:function(a,b,c,j){if(a.target){var k=a.target.b,l=k.g.x-j.left,m=k.g.x+j.right,n=k.g.y-k.g.z-j.top,j=k.g.y-k.g.z+j.bottom,b=Math.min(1,b/c),b=this.PH+b*(this.CJ-this.PH);switch(this.dir){case ig.kA.NORTH:n=n+b*(j-n);break;case ig.kA.SOUTH:j=j-b*(j-n)}this.G$a(a.target,
l,m,n,j,a.Yp,this.sMa?this.dir:q)}},finish:function(a){this.CJ==0&&ig.gl.Lma(a.target,this.sMa?this.dir:q)},G$a:function(a,b,c,j,k,l,m){for(var n=a.Ua,o=n.length;o--;){var t=n[o];if(!(l!==q&&l.indexOf(o)==-1)){var p=Math.round(Math.max(0,j-(t.g.y-t.g.z-t.size.z))),r=Math.round(Math.max(0,t.g.y-t.g.z+t.size.y-k));if(m){if(m!=ig.kA.NORTH)p=t.vk.top;if(m!=ig.kA.SOUTH)r=t.vk.bottom}t.gp(p,r)}}a=a.b.qn;if(a.length>0)for(o=a.length;o--;)this.G$a(a[o].Q,b,c,j,k,l,m)}});var b={},c={},a=Vec3.create();ig.Fj.WIPE_PARTICLES=
ig.kk.extend({wg:q,dir:0,PH:0,CJ:0,duration:0,dj:0,lT:Vec2.create(),Vg:q,inverse:y,t:new ig.si({Ns:"OffsetParticle",attributes:{dir:{c:"String",d:"Wipe direction",U:ig.kA},PH:{c:"Number",d:"Start wipe position (0-1). 1=all wiped away."},CJ:{c:"Number",d:"End wipe position (0-1). 1=all wiped away."},duration:{c:"Number",d:"Duration of wipe."},dj:{c:"Integer",d:"Number of particles to spawned per second and 32 pixel target width"},lT:{c:"Vec2",d:"Move offset of individual particles",I:h},inverse:{c:"Boolean",
d:"True if particle should move in reverse",I:h},Nz:{c:"Number",d:"How much of the x dimension should be covered. 1=full",I:h},Vg:{c:"String",d:"KeySpline for moveOffset movement.",U:KEY_SPLINES,I:h},offset:{c:"Offset",d:"Offset to position",I:h}}}),f:function(a,b){this.wg=ig.si.KD(a.mb,b,a&&a.kr);this.dir=ig.kA[b.dir]||ig.kA.NORTH;this.PH=b.startValue||0;this.CJ=b.endValue||0;this.duration=b.duration||0;this.Nz=b.xScale;if(this.Nz===g)this.Nz=0.8;this.offset=b.offset;this.dj=b.numParticles||2;b.moveOffset&&
Vec2.assign(this.lT,b.moveOffset);this.Vg=KEY_SPLINES[b.keySpline]||q;this.inverse=b.inverse||y},start:function(a){if(a.target){ig.gl.spa(b,a.target);a=b.left+b.right;return{duration:this.duration,gc:this.dj*a/32*this.duration,oi:-b.left,bi:b.bottom,width:a,height:b.top+b.bottom}}},Gi:function(){return this.duration+ig.si.oN(this.wg)},update:function(b,f,i,j){c.data=this.wg;c.keySpline=this.Vg;c.inverse=this.inverse;c.alongZ=h;for(c.moveOffset=this.lT;f<i;++f){var k=j.gc>1?f/(j.gc-1):0,k=this.PH+
k*(this.CJ-this.PH);this.dir==ig.kA.NORTH&&(k=1-k);var l=Vec3.Oa(a,0,0,0);if(this.inverse){var m=ig.si.TAb(this.wg);l.z=l.z+j.height*m/this.duration}l.x=l.x+(j.oi+j.width*(0.5-this.Nz/2)+Math.random()*j.width*this.Nz);l.y=l.y+j.bi;l.z=l.z+k*j.height;this.offset&&Vec3.add(l,this.offset);b.Xp(ig.wa.OffsetParticle,l,c,h)}}})});ig.J=h;
ig.N("impact.feature.effect.plug-in").O("impact.feature.effect.entities.effect-previewer","impact.feature.effect.effect-sheet","impact.feature.effect.effect-steps","impact.feature.effect.fx.fx-basic","impact.feature.effect.fx.fx-box","impact.feature.effect.fx.fx-color","impact.feature.effect.fx.fx-circle","impact.feature.effect.fx.fx-homing","impact.feature.effect.fx.fx-light","impact.feature.effect.fx.fx-line","impact.feature.effect.fx.fx-rhombus","impact.feature.effect.fx.fx-wipe").K(function(){window.Ed&&
wm.Ek.push("impact.feature.effect.editors.effect-editor")});ig.J=h;
ig.N("impact.feature.gui.gui").O("impact.base.image","impact.base.game","impact.feature.storage.storage").K(function(){function a(a,b){return a.zIndex-b.zIndex}function b(a,b){switch(a.align.x){case ig.k.hb:return a.g.x;case ig.k.ra:return b-a.size.x-a.g.x;case ig.k.Ia:return Math.floor(b/2-a.size.x/2+a.g.x)}return 0}function c(a,b){switch(a.align.y){case ig.k.$:return a.g.y;case ig.k.Cb:return b-a.size.y-a.g.y;case ig.k.vb:return Math.floor(b/2-a.size.y/2+a.g.y)}return 0}function d(a){for(var b=
0;b<a.length;++b){a[b].X.ag&&a[b].X.ag();d(a[b].children)}}function f(a,b){if(b!=a.lm){a.lm=b;a.X.JT&&a.X.JT(b)}}function i(a,d){var f=d.yB,j;if(f instanceof ig.Kwa){a.Aa=d.xf||!ig.r.paused;j=ig.i.width;f=ig.i.height}else{i(a,f);a.x=a.x+f.scroll.x;a.y=a.y+f.scroll.y;j=f.size.x;f=f.size.y}a.x=a.x+b(d,j);a.y=a.y+c(d,f)}ig.Xf.X=h;var j=[],k=[],l=ig.Ca.extend({WX:[],na:function(a,b,c,d,f,i,j,k,l){return this.dy().qha(a,b,c,d,f,i,j,k,l)},bYa:function(a,b,c,d,f,i,j,k){return this.dy().YKb(a,b,c,d,f,i,j,
k)},tub:function(a,b,c,d,f){return this.dy().SLb(a,b,c,d,f)},WAa:function(a,b,c){return this.dy().WKb(a,b,c)},nc:function(a,b,c,d,f){return this.dy().pe(a,b,c,d,f)},Qk:function(a,b,c,d,f,i,j){return this.dy().hab(a,b,c,d,f,i,j)},QW:function(a,b,c){return this.dy().ga(a,b,c)},Pvb:function(){for(;this.WX.length;){var a=this.WX.pop();a&&a.ze()}},dy:function(){var a=n.get(ig.Rhb);this.WX.push(a);return a},ks:function(){var a=n.get(ig.Vhb);this.WX.push(a);return a},Xs:function(){this.WX.push(q)},nb:function(){for(var a=
ig.i,b=a.context,c=a.scale,d=0,f=0,i=this.WX,j=i.length,l=0;l<j;++l){var m=i[l];if(m)if(m.nb)m.nb(d,f);else{if(m.transform){k.push(m);if(m.H4a()){m.transform(d,f);d=f=0}else{d=d+a.qf(m.translate.x)/c;f=f+a.qf(m.translate.y)/c}if(m.alpha!=1){m.K8a=b.globalAlpha;b.globalAlpha=b.globalAlpha*m.alpha}}}else{(m=k.pop())||e(Error("Gui Draw: tried to undo non existing transform. Too many undos?"));if(m.H4a()){b.restore();d=m.Jsa.x;f=m.Jsa.y}else{d=d-a.qf(m.translate.x)/c;f=f-a.qf(m.translate.y)/c}if(m.alpha!=
1)b.globalAlpha=m.K8a}}k.length>0&&e(Error("Exited gui draw with transform remaining. Forgot to undo transform"))}}),m=0;ig.Kwa=ig.Uf.extend({sD:[],ox:{},JLa:y,to:new l,rra:[],L3:q,f:function(){this.parent("GUI");ig.zd.Lg(this)},DKb:L("L3"),Fu:function(a){var b={},c;for(c in this.ox){var d=this.ox[c].a.dT;b[c]={settings:d.yf,type:d.type}}a.gui=b},Bt:function(a){this.fj();var a=a.gui,b;for(b in a){var c=a[b];if(!ig.lj[c.type]||!ig.lj[c.type].psb){c=this.Wba(b,c.type,c.settings,h);this.Qha(c)}}},QM:500,
Eu:function(){this.JLa=y;this.to.Pvb();this.ttb();m=0;this.SXa(0,0,ig.i.width,ig.i.height,j,h,this.sD,0,0,1,h);ig.r.dra=this.JLa},Dsa:500,Zra:function(){ig.Xf.X&&this.to.nb()},TZ:function(){d(this.sD)},fj:function(){for(var a in this.ox)this.ox[a].remove();this.ox={};for(a=this.sD.length;a--;)if(this.sD[a].Nt){this.sD[a].pi();this.sD.splice(a,1)}},JVb:function(){console.Eda("GUI Array Elements:");for(var a in ig.lj)ig.lj[a]&&console.log(a);console.groupEnd()},Wba:function(a,b,c,d){var f=ig.lj[b];
if(!f)return q;f=new f(c);f.a.dT={name:a,type:b,yf:c,YR:d||y};return f},Qha:function(a){var b=a.a.dT,c=ig.lj[b.type];b.name&&(this.ox[b.name]=a);if(c.iNa){a.a.al=y;c.iNa(a)}else this.vd(a)},AEa:function(a){if(a)a.a.yB?a.a.dT.YR=h:a.Ka&&a.Ka()},vd:function(b){b=b.a;b.al=y;if(this.sD.indexOf(b)==-1){this.sD.push(b);this.sD.sort(a);b.Vo(this)}},eNa:function(){this.sD.sort(a)},sta:function(a){this.sD.ye(a.a)},ttb:function(){var a,b;if(this.L3){a=this.L3.Kp();b=this.L3.Ln()}else{a=ig.input.Ak.x;b=ig.input.Ak.y}for(var c=
q,d=this.L3&&this.L3.e2a(),f=0;f<this.rra.length;++f){var j=this.rra[f];if(j.lm){if(!j.Yf){j.Yf={x:0,y:0,Vc:j.size.x,sd:j.size.y,Aa:y,zIndex:0};i(j.Yf,j)}var k=j.Yf;if(k.Aa){var l=y;if(l=j.X.JG?j.X.JG():k.x<=a&&k.x+k.Vc>a&&k.y<=b&&k.y+k.sd>b)if(c)if(c.Yf.zIndex<j.Yf.zIndex){c.sra=y;c.X.$y&&c.X.$y(y,y);c=j}else l=y;else c=j;if(!l){j.sra=l;j.X.$y&&j.X.$y(y,y)}}}}if(c){c.sra=h;c.X.$y&&c.X.$y(h,d)}},SXa:function(a,d,i,j,k,l,n,v,x,A,F){for(var B=k.length>0,C=y,K=0;K<n.length;++K){var I,G,D,E;if(B){I=k[k.length-
4];G=k[k.length-3];D=k[k.length-2];E=k[k.length-1]}var H=n[K],Q=F&&(n!=this.sD||H.xf||!ig.r.paused);if(Q&&H.Jz()){H.pi();n.splice(K,1);K--;if(H.dT){var P=H.dT.name;P&&this.ox[P]==H.X&&delete this.ox[H.dT.name];H.dT.YR&&H.X.Ka&&H.X.Ka()}}else{var U=Q;if(Q&&(H.lm||H.jB)){U=y;H.X.update()}var T=H.size.x,V=H.size.y,R=a,W=d,X=v,Z=x,R=R+b(H,i),W=W+c(H,j),O=H.xe,ba=A*O.alpha;if(O.alpha==1&&H.gha)ig.X.JLa=h;R=R+(H.align.x==ig.k.ra?-O.offsetX:O.offsetX);W=W+(H.align.y==ig.k.Cb?-O.offsetY:O.offsetY);X=X+R;
Z=Z+W;if((P=l&&ba>0.01&&O.Xa!=0&&O.Va!=0)&&B){I=I-R;G=G-W;if(O.Xa!=1||O.Va!=1||O.Qb!=0){I=I-H.Db.x;G=G-H.Db.y;I=I/Math.abs(O.Xa);G=G/Math.abs(O.Va);I=I+H.Db.x;G=G+H.Db.y;D=D/Math.abs(O.Xa);E=E/Math.abs(O.Va)}P=!(0>=I+D||0>=G+E||T<=I||V<=G)}if(H.Yf){m++;H.Yf.x=X;H.Yf.y=Z;H.Yf.Vc=H.size.x;H.Yf.sd=H.size.y;H.Yf.Aa=Q;H.Yf.zIndex=m;if(B){if(I>0){H.Yf.x=H.Yf.x+I;H.Yf.Vc=H.Yf.Vc-I}if(G>0){H.Yf.y=H.Yf.y+G;H.Yf.sd=H.Yf.sd-G}H.Yf.Vc=Math.min(H.Yf.Vc,D+(I<0?I:0));H.Yf.sd=Math.min(H.Yf.sd,E+(G<0?G:0))}}U&&P&&
H.X.update();if(H.Fla.Nua||P||H.lm||H.jB){U=this.to.ks();U.bua(R,W);U.MB(O.Xa,O.Va);U.Eb(H.Db.x,H.Db.y);U.L7(O.Qb);U.ge(ba);H.clip&&U.zKb(H.size.x,H.size.y);R=H.clip;if(P&&(B||R))if(R)if(B){var W=Math.max(I,0),O=Math.max(G,0),U=Math.min(I+D,T),ja=Math.min(G+E,V);k.push(W,O,U-W,ja-O)}else k.push(0,0,T,V);else k.push(I,G,D,E);f(H,P);if(P&&H.nd>0){H.nd!=1&&this.to.ks().ge(H.nd);H.X.Da(this.to);H.nd!=1&&this.to.Xs()}Q=this.SXa(H.scroll.x,H.scroll.y,T,V,k,P,H.children,X,Z,ba,Q);H.Fla.Nua=H.Mv()||Q;C=C||
H.Fla.Nua;if(P&&(B||R))k.length=k.length-4;this.to.Xs()}}}return C},drb:function(a,b,c,d,f){for(var i=ig.i.context,j=0;j<f.length;++j){var k=f[j],l=a,m=b;switch(k.align.x){case ig.k.hb:l=l+k.g.x;break;case ig.k.ra:l=l+(c-k.size.x-k.g.x);break;case ig.k.Ia:l=l+Math.floor(c/2-k.size.x/2+k.g.x)}switch(k.align.y){case ig.k.$:m=m+k.g.y;break;case ig.k.Cb:m=m+(d-k.size.y-k.g.y);break;case ig.k.vb:m=m+Math.floor(d/2-k.size.y/2+k.g.y)}var n=k.xe;if(k.lm){var l=l+(k.align.x==ig.k.ra?-n.offsetX:n.offsetX),
m=m+(k.align.y==ig.k.Cb?-n.offsetY:n.offsetY),B=i.globalAlpha,C=B*n.alpha,K=C*k.nd,I=y;if(k.clip||n.Xa!=1||n.Va!=1||n.Qb!=0){I=h;i.save();i.translate(ig.i.qf(l),ig.i.qf(m));l=m=0;if(k.clip){i.beginPath();i.rect(0,0,k.size.x,k.size.y);i.clip()}if(n.Xa!=1||n.Va!=1||n.Qb!=0){i.translate(ig.i.qf(k.Db.x),ig.i.qf(k.Db.y));i.rotate(n.Qb);i.scale(n.Xa,n.Va);i.translate(-ig.i.qf(k.Db.x),-ig.i.qf(k.Db.y))}}n=k.TSb;if(K>0&&n.length>0){if(B!=K)i.globalAlpha=K;for(var G=0;G<n.length;++G)n[G].nb(l,m);if(K!=C)i.globalAlpha=
C}else if(B!=C)i.globalAlpha=C;this.drb(k.scroll.x+l,k.scroll.y+m,k.size.x,k.size.y,k.children);if(B!=C)i.globalAlpha=B;I&&ig.i.context.restore()}}},HUa:function(a){this.rra.push(a)},ZWa:function(a){this.rra.ye(a)}});ig.Vf(function(){return ig.X=new ig.Kwa});ig.lj={};ig.k={};ig.k.$=1;ig.k.vb=2;ig.k.Cb=3;ig.k.hb=4;ig.k.Ia=5;ig.k.ra=6;ig.Fja={LEFT:ig.k.hb,RIGHT:ig.k.ra,CENTER:ig.k.Ia};ig.Iwa={TOP:ig.k.$,BOTTOM:ig.k.Cb,CENTER:ig.k.vb};ig.Shb=ig.Ca.extend({g:Vec2.create(),size:{x:1,y:1},Db:{x:0,y:0},
scroll:{x:0,y:0},align:{x:ig.k.hb,y:ig.k.$},yB:q,children:[],tra:y,Yf:q,sra:y,nd:1,zIndex:0,xf:y,jB:y,gha:y,WK:q,clip:y,Nt:y,R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.EASE}},X:q,xe:{offsetX:0,offsetY:0,alpha:1,Xa:1,Va:1,Qb:0},hi:"",bb:{u0:q,WJ:q,n:0,Fa:0,p:q},al:y,Qr:q,uo:q,lm:y,Fla:{Nua:y},dT:q,WX:[],f:function(a){this.X=a;if(a.R){this.R=a.R;this.j("DEFAULT",h)}},BU:function(a){if(this.tra!=a){this.tra=a;this.yB&&(a?ig.X.HUa(this):ig.X.ZWa(this))}},Vo:function(a){if(this.yB!=a){this.yB=a;f(this,
a instanceof ig.Kwa?h:a.lm);this.tra&&ig.X.HUa(this);this.X.Vo&&this.X.Vo();for(a=this.children.length;a--;)this.children[a].Vo(this)}},pi:function(){if(this.yB){if(this.tra){this.Yf=q;ig.X.ZWa(this)}for(var a=this.children.length;a--;)this.children[a].pi();this.X.pi&&this.X.pi();this.yB=q}},QEa:function(a){return this.children.indexOf(a)},PEa:function(a){return this.children[a]},TAa:function(a){a.al=y;this.children.ye(a);a.pi();this.children.push(a);this.yB&&a.Vo(this)},aDb:function(a,b){a.al=y;
this.children.ye(a);a.pi();this.children.splice(b,0,a);this.yB&&a.Vo(this)},QIb:function(a){a.al=y;this.children.ye(a);a.pi()},RIb:function(a){a=this.children.splice(a,1)[0];a.al=y;a.pi();return a},rh:function(){for(var a=this.children.length;a--;){this.children[a].pi();this.children[a].al=y}this.children.length=0},j:function(a,b,c,d,f){var i=this.R[a];i||e(Error("No Transition found with name: "+a));if(!this.al){this.al=c||y;this.WK=q;if(!b)for(var j=this.yB;j&&j!=ig.X;){j.Fla.Nua=h;j=j.yB}if(this.hi==
a){if(d)this.WK=d;this.bb.n=Math.max(this.bb.n,b?i.time:0-(f||0))}else{this.hi=a;this.pXa(i.state,i.time,i.p,b,c,d,f)}}},pBb:function(){return!this.bb.Fa?1:this.bb.n/this.bb.Fa},Wna:function(a,b,c,d,f,i,j){if(!this.al){this.al=f||y;this.hi=q;this.pXa(a,b,c,d,f,i,j)}},MB:function(a,b){this.xe.Xa=a;this.xe.Va=b},pXa:function(a,b,c,d,f,i,j){if(i)this.WK=i;this.bb.WJ=ig.copy(this.xe);var f={offsetX:0,offsetY:0,alpha:1,Xa:1,Va:1,Qb:0},k;for(k in a)f[k]=a[k];this.bb.u0=f;this.bb.Fa=b;this.bb.n=d?b:0-(j||
0);this.bb.p=c;if(d)this.xe=ig.copy(f)},kd:function(a,b,c,d,f,i,j){i&&(c=Math.max(c,this.Qr?this.Qr.time-this.Qr.n:0));if(!c||c<=0){this.g.x=a;this.g.y=b;this.Qr=q}else this.Qr={VK:this.g.x,zNa:this.g.y,x:a,y:b,time:c,p:d||KEY_SPLINES.EASE_IN_OUT,n:0-(f||0),VA:j}},Hl:function(a,b,c,d,f){if(!c||c<=0||Math.abs(a-this.scroll.x)<ig.lf.Zj&&Math.abs(b-this.scroll.y)<ig.lf.Zj){this.scroll.x=a;this.scroll.y=b;this.uo=q}else this.uo={VK:this.scroll.x,zNa:this.scroll.y,x:a,y:b,time:c,p:d||KEY_SPLINES.EASE_IN_OUT,
n:0,VA:f||q}},Mv:function(){return!!this.bb.u0},BFa:function(){return(this.bb.n/this.bb.Fa).Rb(0,1)},FU:function(a,b,c){this.R[a]&&(this.R[a].state[b]=c)},Jz:function(){if(this.Qr){this.Qr.n=this.Qr.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.Qr.n)/this.Qr.time),a=this.Qr.p.get(a);this.g.x=this.Qr.VK*(1-a)+this.Qr.x*a;this.g.y=this.Qr.zNa*(1-a)+this.Qr.y*a;if(a==1){this.Qr.VA&&this.Qr.VA();this.Qr=q}}if(this.uo){this.uo.n=this.uo.n+ig.i.Sa;a=Math.min(1,this.uo.n/this.uo.time);a=this.uo.p.get(a);this.scroll.x=
this.uo.VK*(1-a)+this.uo.x*a;this.scroll.y=this.uo.zNa*(1-a)+this.uo.y*a;if(a==1){a=this.uo.VA;this.uo=q;a&&a()}}if(this.bb.u0){this.bb.n=this.bb.n+ig.i.Sa;var a=(this.bb.n/this.bb.Fa).Rb(0,1),a=this.bb.p.get(a),b;for(b in this.bb.u0)this.xe[b]=(1-a)*this.bb.WJ[b]+a*this.bb.u0[b];if(a==1){this.bb.u0=q;if(this.WK){a=this.WK;this.WK=q;a()}}else return y}return this.al}});ig.Rhb=ig.Ca.extend({g:{x:0,y:0},size:{x:0,y:0},src:{x:0,y:0},fB:q,mi:0,Lc:{x:y,y:y},alpha:1,Uma:"source-over",l:function(a,b){this.g.x=
a;this.g.y=b;return this},F:function(a,b){this.size.x=a;this.size.y=b;return this},Aab:function(a,b){this.src.x=a;this.src.y=b;return this},ge:function(a){this.alpha=a;return this},pe:function(a,b,c,d,f){this.fB=a;this.mi=3;this.l(b,c);this.F(d,f);return this},yi:function(a){this.Uma=a||"source-over"},qha:function(a,b,c,d,f,i,j,k,l){window.Ri&&!(a instanceof ig.ia||a instanceof ig.sRa)&&e(Error("Invalid setGfx Call. gfx is not instance of ig.Image"));this.fB=a;this.mi=1;this.l(b,c);this.Aab(d,f);
this.F(i,j);this.Lc.x=k||y;this.Lc.y=l||y;return this},YKb:function(a,b,c,d,f,i,j,k){window.Ri&&!(a instanceof ig.ia)&&e(Error("Invalid setGfxTile Call. gfx is not instance of ig.Image"));i=i?i:f;this.qha(a,b,c,Math.floor(d*f)%a.width,Math.floor(d*f/a.width)*i,f,i,j,k);return this},SLb:function(a,b,c,d,f){window.Ri&&!(a instanceof ig.Upb)&&e(Error("Invalid setVideo Call. video is not instance of ig.Video"));this.fB=a;this.mi=5;this.l(b,c);this.F(d,f);return this},WKb:function(a,b,c){window.Ri&&!(a instanceof
ig.x9)&&e(Error("Invalid setGameStateDraw Call. gamestate is not instance of ig.GameState"));this.fB=a;this.mi=6;this.l(b,c);return this},hab:function(a,b,c,d,f,i,j){window.Ri&&!(a instanceof ig.nf)&&e(Error("Invalid setPattern Call. gfx is not instance of ig.ImagePattern"));this.fB=a;this.mi=2;this.color=this.s=q;this.l(b,c);this.Aab(d,f);this.F(i,j);return this},ga:function(a,b,c){window.Ri&&!(a instanceof ig.Rd)&&e(Error("Invalid setText Call. gfx is not instance of ig.TextBlock"));this.fB=a;this.mi=
4;this.l(b,c);return this},nb:function(a,b){var c=ig.i,d=c.context,f=c.scale,i=a+this.g.x,j=b+this.g.y,k,l;if(this.alpha!=1){k=d.globalAlpha;d.globalAlpha=d.globalAlpha*this.alpha}if(this.Uma!="source-over"){l=d.globalCompositeOperation;d.globalCompositeOperation=this.Uma}if(this.mi==3){d.fillStyle=this.fB;d.fillRect(c.qf(i),c.qf(j),this.size.x*f,this.size.y*f)}else this.mi==1?this.fB.nb(i,j,this.src.x,this.src.y,this.size.x,this.size.y,this.Lc.x,this.Lc.y):this.mi==5?this.fB.nb(i,j,this.size.x,this.size.y):
this.mi==6?this.fB.Nyb(i,j):this.mi==2?this.fB.nb(i,j,this.src.x,this.src.y,this.size.x,this.size.y):this.mi==4&&this.fB.nb(i,j);if(d.globalCompositeOperation!="source-over")d.globalCompositeOperation=l;if(this.alpha!=1)d.globalAlpha=k},ze:function(){this.fB=q;this.mi=0;n.YR(this)},clear:function(){this.alpha=1;this.src.x=this.src.y=this.size.x=this.size.y=g;this.Lc.x=this.Lc.y=y;this.Uma="source-over"}});ig.Vhb=ig.Ca.extend({translate:{x:0,y:0},scale:{x:1,y:1},rotate:0,Db:{x:0,y:0},alpha:1,clip:{x:0,
y:0},Jsa:{x:0,y:0},K8a:0,ge:function(a){this.alpha=a;return this},zKb:function(a,b){this.clip.x=a;this.clip.y=b;return this},bua:function(a,b){this.translate.x=a;this.translate.y=b;return this},MB:function(a,b){this.scale.x=a;this.scale.y=b;return this},L7:function(a){this.rotate=a;return this},Eb:function(a,b){this.Db.x=a;this.Db.y=b;return this},H4a:function(){return this.scale.x!=1||this.scale.y!=1||this.rotate||this.clip.x!=0},transform:function(a,b){var c=ig.i,d=c.context,c=c.scale;d.save();
this.Jsa.x=a;this.Jsa.y=b;d.translate(ig.i.qf(a+this.translate.x),ig.i.qf(b+this.translate.y));if(this.clip.x!=0){d.beginPath();d.rect(0,0,this.clip.x*c,this.clip.y*c);d.clip()}if(this.scale.x!=1||this.scale.y!=1||this.rotate!=0){d.translate(ig.i.qf(this.Db.x),ig.i.qf(this.Db.y));d.rotate(this.rotate);d.scale(this.scale.x||1E-4,this.scale.y||1E-4);d.translate(-ig.i.qf(this.Db.x),-ig.i.qf(this.Db.y))}},ze:function(){n.YR(this)},clear:function(){this.translate.x=this.translate.y=0;this.scale.x=this.scale.y=
1;this.rotate=0;this.Db.x=this.Db.y=0;this.alpha=1;this.clip.x=this.clip.y=0}});ig.Uhb=ig.Ca.extend({get:function(a){if(!a.X6)a.X6=[];if(a.X6.length){a=a.X6.pop();a.clear();return a}return new a},YR:function(a){var b=a.constructor;if(!b.X6)b.X6=[];b.X6.push(a)}});var n=new ig.Uhb;ig.da=ig.Ca.extend({a:q,f:function(){this.a=new ig.Shb(this)},l:function(a,b){var c=this.a;c.g.x=a||0;c.g.y=b||0;c.Qr=q},GTb:function(){var a=this.a;return a.Qr||a.g},kXb:function(a,b){var c=this.a;c.scroll.x=a;c.scroll.y=
b;c.uo=q},Izb:function(){var a=this.a;return a.uo||a.scroll},F:function(a,b){var c=this.a;c.size.x=a;c.size.y=b},Eb:function(a,b){var c=this.a;c.Db.x=a;c.Db.y=b},H:function(a,b){var c=this.a;c.align.x=a;c.align.y=b},vVb:function(){return this.a.lm},QEa:function(a){return this.a.QEa(a.a)},PEa:function(a){return this.a.PEa(a)},m:function(a){this.a.TAa(a.a)},DG:function(a,b){this.a.aDb(a.a,b)},yH:function(a){this.a.QIb(a.a)},jLa:function(a){return this.a.RIb(a).X},rh:function(){this.a.rh()},update:J(),
Da:J(),remove:function(a){if(a){this.a.pi();this.a.al=y}else this.a.al=h},Vo:q,pi:q,JT:q,JG:q,hide:J(),show:J(),j:function(a,b,c,d,f){this.a.j(a,b,c,d,f)},Wna:function(a,b,c,d,f,i,j){this.a.Wna(a,b,c,d,f,i,j)},kd:function(a,b,c,d,f,i,j){this.a.kd(a,b,c,d,f,i,j)},Hl:function(a,b,c,d,f){this.a.Hl(a,b,c,d,f)},Mv:function(){return this.a.Mv()},BFa:function(){return this.a.BFa()},FU:function(a,b,c){this.a.FU(a,b,c)}})});ig.J=h;
ig.N("impact.feature.gui.gui-images").O("impact.base.image","impact.base.game","impact.feature.gui.gui","impact.feature.storage.storage").K(function(){ig.cRa=ig.da.extend({f:function(a){this.parent();this.a.zIndex=a;this.F(ig.i.width,ig.i.height)}});ig.Thb=ig.Uf.extend({a5:{},zCa:q,ACa:q,f:function(){this.parent("GUI");ig.zd.Lg(this);this.zCa=new ig.cRa(-30);ig.X.vd(this.zCa);this.ACa=new ig.cRa(51);ig.X.vd(this.ACa)},iMb:function(a,b,c,d,f,i,j){this.mLa(a);b=new ig.ec(b.wd,b.oi,b.bi,b.width,b.height);
b.H(ig.Fja[d],ig.Iwa[f]);b.qg=i||q;b.Wna(this.iVa(c),0,KEY_SPLINES.LINEAR,h);c={X:b,data:{alignX:d,alignY:f,state:c}};j?this.ACa.m(b):this.zCa.m(b);this.a5[a]=c},bFb:function(a,b,c,d,f){var i=this.a5[a];if(i){i.data.state=b;i.X.Wna(this.iVa(b),c,d,y,f);f&&delete this.a5[a]}},mLa:function(a){var b=this.a5[a];if(b){b.X.remove();delete this.a5[a]}},iVa:function(a){return{alpha:a.alpha,offsetX:a.offsetX,offsetY:a.offsetY,Xa:a.scaleX,Va:a.scaleY,Qb:a.angle}},Fu:J(),Bt:J(),fj:function(){for(var a in this.a5)this.mLa(a)}});
ig.Vf(function(){return ig.IY=new ig.Thb})});ig.J=h;
ig.N("impact.feature.gui.gui-steps").O("impact.base.action","impact.base.event","impact.feature.gui.gui").K(function(){ig.oa.ADD_GUI=ig.qa.extend({name:q,Gda:q,mS:q,t:new ig.u({attributes:{name:{c:"String",d:"Name to identify GUI for subsequent modifications (e.g. removal)",I:h},Gda:{c:"GUI",d:"Type and Settings of GUI to spawn",xc:h}}}),f:function(a){this.name=a.name;this.Gda=a.guiInfo;if(!window.Ed)this.mS=ig.X.Wba(this.name,this.Gda.type,this.Gda.settings)},start:function(){if(this.name){var a=
ig.X.ox[this.name];a&&a.remove()}ig.X.Qha(this.mS)},Ka:function(){ig.X.AEa(this.mS)}});ig.oa.REMOVE_GUI=ig.qa.extend({name:q,Gda:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of GUI to be removed"}}}),f:function(a){assertContent(a,"name");this.name=a.name},start:function(){var a=ig.X.ox[this.name];a&&a.remove()}});ig.oa.CHANGE_GUI_STATE=ig.qa.extend({name:q,tD:q,uGa:y,remove:y,t:new ig.u({attributes:{name:{c:"String",d:"Name to identify GUI for subsequent modifications (e.g. removal)"},tD:{c:"GUIState",
d:"Transition to change to"},uGa:{c:"Boolean",d:"If true: skip transition"},remove:{c:"Boolean",d:"Remove GUI after transition"}}}),f:function(a){assertContent(a,"name","guiState");this.name=a.name;this.tD=a.guiState;this.uGa=a.immediate||y;this.remove=a.remove||y},start:function(){var a=ig.X.ox[this.name];if(a){a instanceof ig.lj[this.tD.type]||e(Error("Gui State transition with invalid GUI type!"));a.j(this.tD.state,this.uGa,this.remove)}}});ig.oa.SHOW_IMAGE=ig.qa.extend({name:q,wd:q,tD:q,qv:q,
fy:q,qg:q,$Ja:y,t:new ig.u({attributes:{name:{c:"String",d:"Name of image"},wd:{c:"TileSheet",d:"Image to be displayed",xc:h},tD:{c:"GuiState",d:"Initial State of image",xc:h},qv:{c:"String",d:"X alignment",U:ig.Fja},fy:{c:"String",d:"Y alignment",U:ig.Iwa},qg:{c:"String",d:"Render Mode if Image",U:["source-over","lighter"],I:h},$Ja:{c:"Boolean",d:"If true, display image above game hud (e.g. cut scene bars, portraits)"}}}),f:function(a){this.name=a.name;this.wd=new ig.Vh.AX(a.image);this.tD=a.guiState;
this.qv=a.alignX;this.fy=a.alignY;this.qg=a.renderMode;this.$Ja=a.overGui||y},start:function(){ig.IY.iMb(this.name,this.wd,this.tD,this.qv,this.fy,this.qg,this.$Ja)},Ka:function(){this.wd.Ka()}});ig.oa.MOVE_IMAGE=ig.qa.extend({name:q,tD:q,time:q,Vg:q,hLa:y,t:new ig.u({attributes:{name:{c:"String",d:"Name of image"},tD:{c:"GuiState",d:"Initial State of image",xc:h},time:{c:"Number",d:"Transition time"},Vg:{c:"String",d:"Key spline for transition",U:KEY_SPLINES},hLa:{c:"Boolean",d:"True if image should be removed after transition"}}}),
f:function(a){this.name=a.name;this.tD=a.guiState;this.time=a.time||0.1;this.Vg=KEY_SPLINES[a.keySpline]||KEY_SPLINES.LINEAR;this.hLa=a.removeAfterwards||y},start:function(){ig.IY.bFb(this.name,this.tD,this.time,this.Vg,this.hLa)}});ig.oa.REMOVE_IMAGE=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of image to be removed"}}}),f:function(a){this.name=a.name},start:function(){ig.IY.mLa(this.name)}})});ig.J=h;
ig.N("impact.feature.gui.base.box").O("impact.feature.gui.gui").K(function(){ig.jc=ig.Ca.extend({Vj:{width:0,height:0,top:0,bottom:0,left:0,right:0,Vb:{"default":{x:0,y:0}}},th:{},pattern:{},s:q,f:function(a,b){this.Vj=b;this.s=new ig.ia(a);this.s.loaded?this.m4a():this.s.I2(this.m4a.bind(this))},m4a:function(){var a=this.Vj;a.top==0&&(this.th[0]=this.th[1]=this.th[2]=1);a.bottom==0&&(this.th[6]=this.th[7]=this.th[8]=1);a.left==0&&(this.th[0]=this.th[3]=this.th[6]=1);a.right==0&&(this.th[2]=this.th[5]=
this.th[8]=1);a.width==0&&(this.th[1]=this.th[4]=this.th[7]=1);a.height==0&&(this.th[3]=this.th[4]=this.th[5]=1);for(var b in this.Vj.Vb){this.pattern[b]={};var c=this.Vj.Vb[b].x,d=this.Vj.Vb[b].y;if(a.top>0&&a.width>0)this.pattern[b].top=this.s.createPattern(c+a.left,d,a.width,a.top,ig.nf.Eg.Yn);if(a.bottom>0&&a.width>0)this.pattern[b].bottom=this.s.createPattern(c+a.left,d+a.top+a.height,a.width,a.bottom,ig.nf.Eg.Yn);if(a.left>0&&a.height>0)this.pattern[b].left=this.s.createPattern(c,d+a.top,a.left,
a.height,ig.nf.Eg.OL);if(a.right>0&&a.height>0)this.pattern[b].right=this.s.createPattern(c+a.left+a.width,d+a.top,a.right,a.height,ig.nf.Eg.OL);if(a.width>0&&a.height>0)this.pattern[b].mq=this.s.createPattern(c+a.left,d+a.top,a.width,a.height,ig.nf.Eg.eF)}},nb:function(a,b,c,d,f,i){var j=this.Vj,k=j.Vb[d].x,l=j.Vb[d].y,d=this.pattern[d],m=Math.min(j.top,c-j.bottom),f=f||0,i=i||0;this.th[0]||a.na(this.s,f,i,k,l,j.left,m);this.th[2]||a.na(this.s,f+b-j.right,i,k+j.left+j.width,l,j.right,m);this.th[6]||
a.na(this.s,f,i+c-j.bottom,k,l+j.top+j.height,j.left,j.bottom);this.th[8]||a.na(this.s,f+b-j.right,i+c-j.bottom,k+j.left+j.width,l+j.top+j.height,j.right,j.bottom);this.th[1]||a.Qk(d.top,f+j.left,i,0,0,b-j.left-j.right,m);this.th[7]||a.Qk(d.bottom,f+j.left,i+c-j.bottom,0,0,b-j.left-j.right,j.bottom);this.th[3]||a.Qk(d.left,f,i+m,0,0,j.left,c-m-j.bottom);this.th[5]||a.Qk(d.right,f+b-j.right,i+m,0,0,j.right,c-m-j.bottom);this.th[4]||a.Qk(d.mq,f+j.left,i+m,0,0,b-j.left-j.right,c-m-j.bottom)},X_a:function(a,
b,c,d,f,i,j){var k=this.Vj,l=k.Vb[d].x,m=k.Vb[d].y,d=this.pattern[d],n=Math.min(k.top,c-k.bottom),i=i||0,j=j||0,f=f||"source-over";this.th[0]||a.na(this.s,i,j,l,m,k.left,n).yi(f);this.th[2]||a.na(this.s,i+b-k.right,j,l+k.left+k.width,m,k.right,n).yi(f);this.th[6]||a.na(this.s,i,j+c-k.bottom,l,m+k.top+k.height,k.left,k.bottom).yi(f);this.th[8]||a.na(this.s,i+b-k.right,j+c-k.bottom,l+k.left+k.width,m+k.top+k.height,k.right,k.bottom).yi(f);this.th[1]||a.Qk(d.top,i+k.left,j,0,0,b-k.left-k.right,n).yi(f);
this.th[7]||a.Qk(d.bottom,i+k.left,j+c-k.bottom,0,0,b-k.left-k.right,k.bottom).yi(f);this.th[3]||a.Qk(d.left,i,j+n,0,0,k.left,c-n-k.bottom).yi(f);this.th[5]||a.Qk(d.right,i+b-k.right,j+n,0,0,k.right,c-n-k.bottom).yi(f);this.th[4]||a.Qk(d.mq,i+k.left,j+n,0,0,b-k.left-k.right,c-n-k.bottom).yi(f)}});ig.Ue=ig.da.extend({s:{},gb:q,ii:"",th:{},JJ:y,f:function(a,b,c,d){this.parent();this.F(a,b);this.JJ=c||y;if(d)this.gb=d;for(var f in this.gb.Vj.Vb){this.ii=f;break}},F:function(a,b){this.a.size.x=a;this.a.size.y=
b;this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2},Da:function(a){this.JJ&&a.ks().MB(-1,1).bua(this.a.size.x,0);this.gb.nb(a,this.a.size.x,this.a.size.y,this.ii);this.JJ&&a.Xs()}})});ig.J=h;ig.N("impact.feature.gui.plug-in").O("impact.feature.gui.gui","impact.feature.gui.gui-images","impact.feature.gui.gui-steps","impact.feature.gui.base.box").K(function(){if(window.Ed){wm.Ek.push("impact.feature.gui.editors.gui-editor");wm.Um(/GUI/,"orange")}});ig.J=h;
ig.N("impact.feature.light.light").O("impact.base.game","game.config").K(function(){ig.mk={XXXXL:1,XXXL:2,XXL:3,XL:4,L:5,M:6,S:7,XS:8,NONE:9};var a={};a[ig.mk.XXXXL]={x:0,y:0,Vc:384,sd:384};a[ig.mk.XXXL]={x:384,y:0,Vc:256,sd:256};a[ig.mk.XXL]={x:448,y:256,Vc:192,sd:192};a[ig.mk.XL]={x:0,y:384,Vc:128,sd:128};a[ig.mk.L]={x:128,y:448,Vc:64,sd:64};a[ig.mk.M]={x:192,y:464,Vc:48,sd:48};a[ig.mk.S]={x:240,y:480,Vc:32,sd:32};a[ig.mk.XS]={x:272,y:480,Vc:32,sd:32};a[ig.mk.NONE]={x:272,y:480,Vc:32,sd:32};ig.ARa=
a;Vec3.create();ig.Xf.Y5a=h;ig.Bw=ig.Ca.extend({Ao:q,SS:Vec3.create(),size:q,fadeIn:0,fadeOut:0,duration:0,Bq:0,Y4:h,n:0,offset:q,f:function(a,c,d,f,i,j,k){this.Ao=a;this.Ao.it(this);this.size=c||ig.mk.XS;this.fadeIn=d||0;this.fadeOut=f||0;this.duration=i||0;this.Bq=j||1;this.Y4=k!==g?k:h;this.n=this.fadeIn||this.duration||this.fadeOut},LB:function(a,c,d){if(!this.offset)this.offset=Vec3.create();Vec3.Oa(this.offset,a,c,d)},Zl:function(){this.stop()},dw:function(){(this.fadeIn||this.duration)&&this.stop();
this.Ao=q},stop:function(){this.n=this.fadeOut;this.duration=this.fadeIn=0},update:function(){this.n=this.n-(this.Ao?this.Ao.b.qD(h):ig.i.ja);if(this.n<=0)if(this.fadeIn){this.fadeIn=0;this.n=this.duration||this.fadeOut}else if(this.duration){if(this.duration>0){this.duration=0;this.n=this.fadeOut}}else{this.fadeOut=0;return h}return y},nb:function(b,c){b=b||1;c=c||0;this.Ao&&this.Ao.lc(ig.Pa.CENTER,this.SS);var d=this.SS,f=d.x-ig.r.screen.x,d=d.y-d.z-ig.r.screen.y;if(this.offset){f=f+this.offset.x;
d=d+(this.offset.y-this.offset.z)}var i=a[this.size+c];if(i){var j=i.x,k=i.y,l=i.Vc,i=i.sd;if(!(f+l/2<0||d+i/2<0||f-l/2>ig.i.width||d-i/2>ig.i.height)){var m=0;this.fadeIn?m=this.Bq*(1-this.n/this.fadeIn):this.duration?m=this.Bq:this.fadeOut&&(m=this.Bq*(this.n/this.fadeOut));ig.i.context.globalAlpha=m*b;ig.pg.Pea.nb(f-l/2,d-i/2,j,k,l,i)}}}});ig.tV=ig.Ca.extend({leb:y,n:0,Nt:y,Q:q,duration:0,fadeIn:0,fadeOut:0,u6:0,hia:0,f:function(a){this.leb=a||y},W$a:function(a,c){this.u6=this.oda();this.hia=a;
this.n=this.duration=c;this.Nt=y},Zta:function(a,c,d,f,i){this.u6=this.oda();this.hia=c;this.Nt=h;(this.Q=a)&&this.Q.it(this);this.duration=d||0;this.fadeIn=f||0;this.fadeOut=i||0;this.n=this.fadeIn||this.duration||this.fadeOut},Zl:function(){this.stop()},dw:function(){this.Nt&&(this.fadeIn||this.duration)&&this.stop()},stop:function(){this.u6=this.oda();this.n=this.fadeOut;this.hia=this.duration=this.fadeIn=0},update:function(){this.n=this.leb?this.n-ig.i.Sa:this.n-(this.Q?this.Q.b.qD(h):ig.i.ja);
if(this.n<=0&&this.Nt)if(this.fadeIn){this.fadeIn=0;this.n=this.duration||this.fadeOut}else if(this.duration){if(this.duration>0){this.u6=this.oda();this.duration=0;this.n=this.fadeOut;this.hia=0}}else{this.fadeOut=0;return h}return y},oda:function(){return this.u6+(this.hia-this.u6)*(this.Nt?this.fadeIn?1-this.n/this.fadeIn:this.duration?1:1-this.n/this.fadeOut:this.n>0?1-this.n/this.duration:1)}});ig.tnb=ig.Ca.extend({Ao:q,fadeIn:0,fadeOut:0,duration:0,color:q,n:0,f:function(a,c,d,f,i){this.Ao=
a;this.Ao.it(this);this.color=c||"white";this.fadeIn=d||0;this.fadeOut=f||0;this.duration=i||0;this.n=this.fadeIn||this.duration||this.fadeOut},Zl:function(){this.stop()},dw:function(){(this.fadeIn||this.duration)&&this.stop();this.Ao=q},stop:function(){this.n=this.fadeOut;this.duration=this.fadeIn=0},update:function(){this.n=this.n-ig.i.Sa;if(this.n<=0)if(this.fadeIn){this.fadeIn=0;this.n=this.duration||this.fadeOut}else if(this.duration){if(this.duration>0){this.duration=0;this.n=this.fadeOut}}else{this.fadeOut=
0;return h}return y},nb:function(){var a=0;this.fadeIn?a=1-this.n/this.fadeIn:this.duration?a=1:this.fadeOut&&(a=this.n/this.fadeOut);ig.i.context.globalAlpha=a;ig.i.context.fillStyle=this.color;ig.i.context.fillRect(0,0,ig.i.width,ig.i.height)}});ig.Jwa=ig.qP.extend({Wi:"GLOW_COLOR",canvas:q,s:q,f:function(a){this.parent(a);var c=ig.Yr("canvas"),d=ig.pg.Pea;c.width=d.width*ig.i.scale;c.height=d.height*ig.i.scale;var f=ig.i.ys(c);f.globalCompositeOperation="source-over";f.fillStyle=a;f.fillRect(0,
0,c.width,c.height);f.globalCompositeOperation="destination-in";f.drawImage(d.data,0,0);this.canvas=c;this.s=new ig.Pwa(c)},NJ:aa(),Wo:function(){this.canvas.width=this.canvas.height=0;this.s=this.canvas=q}});ig.Yfb=ig.Ca.extend({fb:q,KHa:[],z3a:y,w3a:y,qc:y,n:0,f:function(a){this.fb=a;this.qc=this.fb.evaluate()},Qaa:function(a,c,d,f){if(d&&!f)f=ig.pg.tZ;this.KHa.push({g:a,X5a:c,Y2a:d,be:f});if(d)this.w3a=h;if(c)this.z3a=h},update:function(){var a=this.fb.evaluate();if(a!=this.qc){this.qc=a;this.n=
0.2-this.n}if(this.n){this.n=this.n-ig.i.Sa;if(this.n<=0)this.n=0}},aS:function(){var a=this.n/0.2;return this.qc?1-a:a},Zna:function(){this.w3a&&this.U$(h)},rDa:function(){this.z3a&&this.U$(y)},U$:function(b){var c=this.aS();if(c){var d=ig.i.context.globalAlpha;ig.i.context.globalAlpha=c;for(c=this.KHa.length;c--;){var f=this.KHa[c],i=f.g.x-ig.r.screen.x,j=f.g.y-ig.r.screen.y,k=b?f.Y2a:f.X5a;if(k){var l=a[k];if(l){var k=l.x,m=l.y,n=l.Vc,l=l.sd;i+n/2<0||(j+l/2<0||i-n/2>ig.i.width||j-l/2>ig.i.height)||
(b?f.be.s:ig.pg.Pea).nb(i-n/2,j-l/2,k,m,n,l)}}}ig.i.context.globalAlpha=d}}});ig.tjb=ig.Uf.extend({U5:q,eK:q,FO:[],Uv:[],IX:[],vU:[],KY:y,Ld:0.6,xt:1,Pea:new ig.ia("media/map/lightmap.png"),tZ:y,wCa:{},oR:[],f:function(){this.parent("Light");this.U5=ig.Yr("canvas");this.U5.width=ig.i.TC+1;this.U5.height=ig.i.RC+1;this.eK=ig.i.ys(this.U5)},$$a:function(a){this.tZ&&this.tZ.Tc();this.tZ=q;if(a)this.tZ=new ig.Jwa(a)},yAb:function(){return this.tZ&&this.tZ.s},Oaa:function(a){this.IX.push(a)},LWb:function(a){this.IX.ye(a)},
gub:function(a){this.vU.push(a)},OWb:function(a){this.vU.ye(a)},Ptb:function(a,c,d,f,i){var j=a.toString(),k=this.wCa[j];if(!k){k=new ig.Yfb(a);this.oR.push(k);this.wCa[j]=k}k.Qaa(c,d,f,i)},ey:function(a){this.Uv.push(a)},Tla:function(a){if(this.FO.indexOf(a)==-1){this.FO.push(a);this.FO.sort(function(a,b){return a.fua-b.fua})}},Pga:function(a){this.FO.ye(a)},PG:0,Ms:function(){this.oR.length=0;this.wCa={}},Eu:function(){for(var a=this.Uv.length;a--;)this.Uv[a].update()&&this.Uv.splice(a,1);for(a=
this.IX.length;a--;)this.IX[a].update()&&this.IX.splice(a,1);for(a=this.vU.length;a--;)this.vU[a].update()&&this.vU.splice(a,1);for(a=this.oR.length;a--;)this.oR[a].update()},Hsa:0,asa:function(){this.KY=y;if(ig.Xf.Y5a&&sc.options.get("lighting")){for(var a=1,c=this.IX.length;c--;)a=Math.min(a,1-this.IX[c].oda());if(ig.r.iCb()||!(this.FO.length==0&&a==1)){if(ig.i.zoom!=1)ig.i.Y7=y;var d=ig.i.context;ig.i.context=this.eK;this.eK.globalAlpha=1;ig.i.context.globalCompositeOperation="source-over";this.eK.clearRect(0,
0,ig.i.qO,ig.i.pO);for(c=0;c<this.FO.length;++c)this.FO[c].tDa();ig.i.context.globalCompositeOperation="destination-out";for(c=this.oR.length;c--;)this.oR[c].rDa();this.eK.globalCompositeOperation="source-over";ig.r.to.rDa();if(a<1){this.eK.globalAlpha=1-a;this.eK.fillStyle="#000008";this.eK.fillRect(0,0,ig.i.qO,ig.i.pO);this.eK.globalAlpha=1}this.eK.globalCompositeOperation="destination-out";for(c=this.Uv.length;c--;)this.Uv[c].nb();if(ig.i.zoom!=1)ig.i.Y7=h;ig.i.context=d;this.KY=h}}},lfa:0,Mfa:function(){if(ig.Xf.Y5a&&
sc.options.get("lighting")){ig.i.context.globalCompositeOperation="lighter";ig.i.context.globalAlpha=1;for(var a=0;a<this.FO.length;++a){var c=this.FO[a];c.Zna&&c.Zna()}for(a=this.oR.length;a--;)this.oR[a].Zna();if(this.KY){ig.i.context.globalCompositeOperation="source-over";ig.i.context.globalAlpha=1;var c=a=0,d=ig.i.SC;if(ig.i.Y7){a=Math.round(ig.r.screen.x*d)/d%1;c=Math.round(ig.r.screen.y*d)/d%1}ig.i.context.drawImage(this.U5,-a,-c);ig.i.context.globalCompositeOperation="lighter"}if(this.Uv.length>
0)for(a=this.Uv.length;a--;)this.Uv[a].Y4&&this.Uv[a].nb(0.2,1);if(this.vU.length>0)for(a=this.vU.length;a--;)this.vU[a].nb();ig.i.context.globalCompositeOperation="source-over";ig.i.context.globalAlpha=1}}});ig.Vf(function(){return ig.pg=new ig.tjb})});ig.J=h;
ig.N("impact.feature.light.light-steps").O("impact.base.action","impact.base.event").K(function(){Vec3.create();ig.la.ADD_DARKNESS=ig.qa.extend({EG:0,duration:0,fadeIn:0,fadeOut:0,t:new ig.u({attributes:{EG:{c:"Number",d:"Intensity of darkness"},duration:{c:"Number",d:"Duration of darkness effect. -1 for continuous effect"},fadeIn:{c:"Number",d:"fadeIn duration"},fadeOut:{c:"Number",d:"fadeOut duration"}}}),f:function(a){this.EG=a.intensity||0;this.duration=a.duration||0;this.fadeIn=a.fadeIn||0;this.fadeOut=
a.fadeOut||0},start:function(a){var b=new ig.tV;b.Zta(a,this.EG,this.duration,this.fadeIn,this.fadeOut);ig.pg.Oaa(b);a.Hj(b)}});ig.la.CLEAR_DARKNESS=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof ig.tV){a[b].stop();a.splice(b,1);break}}})});ig.J=h;
ig.N("impact.feature.light.light-map").O("impact.feature.light.light","impact.base.map","impact.base.game","impact.base.image","game.config").K(function(){ig.$j.Light=ig.cQa.extend({Pea:new ig.ia("media/map/lightmap.png"),t:new ig.u({faa:"Light",W$:ig.Co.DISABLE_LAYER_SIZE,maa:h,laa:h,kaa:ig.Co.DISABLE_LAYER_DISTANCE,X$:ig.Co.DEFAULT_TILE_SIZE,yza:"media/map/lightmap-tiles.png",trb:"last",aaa:"impact/feature/light/editors/layer-icon.png",Xya:1,Zya:0.4,Yya:0.5}),JHa:[],KFa:[],PIa:h,U5:q,fua:3,f:function(a,
b){this.parent(a,b);for(var c=0;c<this.height;++c)for(var d=0;d<this.width;++d)if(this.data[c][d]){var f=0,i=0,j=this.data[c][d],k=(j-1)%32%5+1,l=Math.floor((j-1)%32/5);switch(Math.floor((j-1)/32)){case 1:i=-8;break;case 2:f=8;break;case 3:i=8;break;case 4:f=-8;break;case 5:f=8;i=-8}if(l!=4){var j=ig.ARa[k],m=(d+0.5)*this.Bb+f-j.Vc/2,n=(c+0.5)*this.Bb+i-j.sd/2;this.JHa.push({x:m,y:n,VNa:j.x,WNa:j.y,width:j.Vc,height:j.sd})}if(l>0){j=ig.ARa[l==4?k:k+l-1];m=(d+0.5)*this.Bb+f-j.Vc/2;n=(c+0.5)*this.Bb+
i-j.sd/2;this.KFa.push({x:m,y:n,VNa:j.x,WNa:j.y,width:j.Vc,height:j.sd})}}ig.pg.Tla(this)},clear:function(){ig.pg.Pga(this);this.parent()},Lsa:function(a,b,c,d,f){var a=Math.floor(a*this.NC/this.Bb/ig.i.scale),b=Math.floor(b*this.OC/this.Bb/ig.i.scale),i=ig.i.context;(ig.i.context=ig.i.ys(f)).globalAlpha=1;a=a*this.Bb;b=b*this.Bb;for(f=0;f<this.JHa.length;f++){var j=this.JHa[f];j.x>a+c/ig.i.scale||(j.x+j.width<a||j.y>b+d/ig.i.scale||j.y+j.height<b)||this.Pea.nb(j.x-a,j.y-b,j.VNa,j.WNa,j.width,j.height)}ig.i.context=
i},tDa:function(){if(this.bp&&this.bp.length){var a=ig.i.context,b=ig.pg.Ld;if(b>0){a.globalAlpha=b;a.globalCompositeOperation="source-over";a.fillStyle=ig.r.clearColor;a.fillRect(0,0,ig.i.qO,ig.i.pO)}a.globalCompositeOperation="destination-out";a.globalAlpha=ig.pg.xt;this.U$()}},Zna:function(){var a=ig.i.context,b=this.KFa.length,c=ig.pg.yAb();if(c)for(;b--;){var d=this.KFa[b],f=d.x-ig.r.screen.x,i=d.y-ig.r.screen.y;if(!(f+d.width<0||i+d.height<0||f>ig.i.width||i>ig.i.height)){a.globalCompositeOperation=
"lighter";c.nb(f,i,d.VNa,d.WNa,d.width,d.height)}}},nb:J(),$na:J()})});ig.J=h;
ig.N("impact.feature.weather.clouds").O("impact.base.game").K(function(){ig.Mfb=ig.Ca.extend({s:new ig.ia("media/map/cloud.png"),py:[],aD:0,V:Vec2.create(),zv:Vec2.create(),n:0,Fa:0,alpha:0,fua:0,f:J(),CZa:function(a){if(a){this.py=[];ig.pg.Pga(this)}else for(a=this.py.length;a--;)this.py[a].n=-2;this.aD=0},AKb:function(a,b,c,d){this.CZa(d);this.aD=a;Vec2.assign(this.V,b);this.alpha=c||0.7;this.zv.x=Math.floor(this.s.width/Math.sqrt(a));this.zv.y=Math.floor(this.s.height/Math.sqrt(a));this.Fa=(b=
Math.abs(this.V.x)>Math.abs(this.V.y))?this.zv.x/Math.abs(this.V.x):this.zv.y/Math.abs(this.V.y);a=d?0:this.py.length;for(b=(b?Math.ceil(ig.r.size.x/this.zv.x):Math.ceil(ig.r.size.y/this.zv.y))+1;b--;){c=Math.max(Math.abs(this.V.x),Math.abs(this.V.y));this.N6a(this.zv.x*this.V.x/c,this.zv.y*this.V.y/c,a,!d);this.Dbb(d)}ig.pg.Tla(this)},Dbb:function(a){var b,c,d,f,i,j=Math.abs(this.V.x)>Math.abs(this.V.y);if(j){d=this.V.x;b=ig.r.size.x;f=this.V.y;c=ig.r.size.y;i=this.zv.y}else{d=this.V.y;b=ig.r.size.y;
f=this.V.x;c=ig.r.size.x;i=this.zv.x}for(b=-b*Math.abs(f)/Math.abs(d);b<c;b=b+i)this.Ltb(j?-this.zv.x:b,j?b:-this.zv.y,a)},Ltb:function(a,b,c){a=this.V.x>0?a:ig.r.size.x-a-this.zv.x;b=this.V.y>0?b:ig.r.size.y-b-this.zv.y;c={x:0,y:0,iTb:Math.random()>0.5,$h:Math.random()>0.5,n:c?0:2};c.x=a+Math.random()*(this.zv.x-this.s.width);c.y=b+Math.random()*(this.zv.y-this.s.height);this.py.push(c)},N6a:function(a,b,c,d){for(var f=this.py.length;f--;){if(c&&f<c)break;var i=this.py[f];i.x=i.x+a;i.y=i.y+b;if(!d)if(i.n>
0){i.n=i.n-ig.i.ja;if(i.n<0)i.n=0}else if(i.n<0){i.n=i.n+ig.i.ja;if(i.n>=0){this.py.splice(f,1);continue}}(this.V.x<=0&&i.x>ig.r.size.x||this.V.x<=0&&i.x<this.s.width||this.V.y>=0&&i.y>ig.r.size.y||this.V.y<=0&&i.y<this.s.height)&&this.py.splice(f,1)}this.py.length==0&&ig.pg.Pga(this)},update:function(){if(this.py.length!=0){this.N6a(this.V.x*ig.i.ja,this.V.y*ig.i.ja);if(this.aD>0){this.n=this.n+ig.i.ja;if(this.n>=this.Fa){this.Dbb();this.n=this.n-this.Fa}}}},tDa:function(){if(this.py.length!=0){var a=
ig.i.context.globalAlpha,b=a*this.alpha;ig.i.context.globalAlpha=b;for(var c=this.py.length,d=ig.r.screen.x,f=ig.r.screen.y,i=ig.i.width,j=ig.i.height,k=this.s.width,l=this.s.height;c--;){var m=this.py[c];if(!(m.x>d+i||m.x+k<d||m.y>f+j||m.y+l<f)){if(m.n)ig.i.context.globalAlpha=ig.i.context.globalAlpha*(m.n>0?1-m.n/2:-m.n/2);this.s.nb(m.x-d,m.y-f,0,0,g,g,m.Pd,m.$h);if(m.n)ig.i.context.globalAlpha=b}}ig.i.context.globalAlpha=a}}})});ig.J=h;
ig.N("impact.feature.weather.fog").O("impact.base.game").K(function(){var a=Vec2.create();ig.Ihb=ig.Ca.extend({Hu:new ig.Xz("media/map/fog2.png",ig.nf.Eg.eF,512,512,0,0,1,1),V:Vec2.create(),scroll:Vec2.create(),alpha:0,R8a:0,n:0,fua:1,zoom:0,f:function(){this.zoom=1.4},Qvb:function(a){this.O$a(0,q,this.zoom,a)},O$a:function(a,c,d,f){d=d||1.4;if(d!=this.zoom){this.scroll.x=this.scroll.x+ig.r.screen.x*this.zoom-ig.r.screen.x*d;this.scroll.y=this.scroll.y+ig.r.screen.y*this.zoom-ig.r.screen.y*d;this.zoom=
d}if(f){this.alpha=a;this.n=0;a==0?ig.pg.Pga(this):ig.pg.Tla(this)}else if(this.alpha!=a){this.R8a=this.alpha;this.alpha=a;this.n=2;a>0&&ig.pg.Tla(this)}c&&Vec2.assign(this.V,c)},update:function(){if(this.n>0){this.n=this.n-ig.i.ja;if(this.n<=0){this.n=0;this.alpha==0&&ig.pg.Pga(this)}}Vec2.Tm(this.scroll,this.V,ig.i.ja)},tDa:function(){var b=this.alpha;this.n>0&&(b=this.alpha+(this.R8a-this.alpha)*(this.n/2));var c=ig.i.context.globalAlpha;ig.i.context.globalAlpha=b;var b=this.Hu.Iy(0),d=0,f=0,i=
0,j=0;if(this.zoom!=1){f=ig.i.npa(a,ig.i.width/2,ig.i.height/2);d=ig.r.screen.x+ig.i.width/2-f.x;f=ig.r.screen.y+ig.i.height/2-f.y}i=(ig.r.screen.x-d)*this.zoom+d;j=(ig.r.screen.y-f)*this.zoom+f;b.nb(0,0,-this.scroll.x+i,-this.scroll.y+j,ig.i.width,ig.i.height);ig.i.context.globalAlpha=c}})});ig.J=h;
ig.N("impact.feature.weather.rain").O("impact.base.game","impact.base.entity-pool").K(function(){ig.Ut={NONE:q,DRIZZLE:{pattern:0,move:{x:80,y:320},duration:0.62,Ec:0.25,$M:5,Wl:0.3,$b:new ig.ka("media/sound/background/rain.ogg",0.7)},WEAK:{pattern:0,move:{x:80,y:320},duration:0.35,Ec:0.15,$M:15,$b:new ig.ka("media/sound/background/rain.ogg",0.7)},MEDIUM:{pattern:1,move:{x:80,y:320},duration:0.35,Ec:0.15,$M:30,$b:new ig.ka("media/sound/background/rain.ogg",0.7)},STRONG:{pattern:2,move:{x:80,y:320},
duration:0.35,Ec:0.15,$M:45,$b:new ig.ka("media/sound/background/rain-strong.ogg",0.7)},SNOW_WEAK:{pattern:4,move:{x:30,y:75},duration:0.5,Ec:0.2,$M:0,$b:q,alpha:0.8,Wl:0.1},SNOW_MEDIUM:{pattern:5,move:{x:30,y:75},duration:0.5,Ec:0.2,$M:0,$b:q,alpha:0.8,Wl:0.1},SANDSTORM_WEAK:{pattern:3,move:{x:320,y:80},duration:0.5,Ec:0.2,$M:0,$b:new ig.ka("media/sound/background/desert/sandstorm-ambient.ogg",0.6),Wl:0.2},SANDSTORM_NERD:{pattern:3,move:{x:256,y:64},duration:0.5,Ec:0.2,$M:0,$b:new ig.ka("media/sound/background/desert/sandstorm-ambient.ogg",
0.6),Wl:0.2}};ig.RSa=ig.Wd.extend({mb:new ig.Al({sheet:{src:"media/map/rain-drop.png",width:8,height:8},renderMode:"lighter",SUB:[{name:"default",time:0.05,frames:[0,1,2,3],repeat:y}]}),f:function(a,b,f,i){this.parent(a,b,f,i);this.mWa(i)},reset:function(a,b,f,i){this.parent(a,b,f,i);this.mWa(i)},mWa:function(){this.b.F(8,8,0);this.b.type=ig.ca.NONE;this.Ya.alpha=0.6;this.Bd();this.Ma("default",h,q,h,h)},PQ:function(){this.ze()}});ig.xw.cD(ig.RSa);var a=0,b=0;ig.xmb=ig.Ca.extend({s:new ig.Xz("media/map/rain.png",
ig.nf.Eg.eF,128,128),pn:ig.Ut.NONE,xb:[],n:0,yca:0,K0:0,vR:q,em:q,f:J(),qab:function(a,b){if((this.vR&&this.vR.group)!=(a&&a.$b&&a.$b.group))this.K0=3;this.pn=a;if(b)this.xb.length=0},Xvb:function(a){this.qab(ig.Ut.NONE,a);this.K0=3},fj:function(){this.K0=0;this.em&&this.em.stop();this.vR=this.em=q},update:function(){if(sc.options.get("weather")){if(ig.ready&&this.K0){this.K0--;if(!this.K0){this.em&&this.em.stop();this.em=(this.vR=this.pn&&this.pn.$b)&&this.vR.play(h)}}if(this.pn){for(this.n=this.n+
ig.i.ja;this.n>this.pn.Ec;){this.MMb();this.n=this.n-this.pn.Ec}if(this.pn.$M){this.yca=this.yca+ig.i.ja;for(var a=1/this.pn.$M;this.yca>a;){this.yca=this.yca-a;this.NMb()}}}this.eFb()}else if(this.vR){this.vR=q;this.em&&this.em.stop();this.K0=1}},MMb:function(){var c=Math.random()*0.75+0.25;a=a+c*128;b=b+(1-c)*128;this.xb.push({n:this.pn.duration,Fa:this.pn.duration,g:{x:a,y:b},move:this.pn.move,alpha:this.pn.alpha||0.2,Wl:this.pn.Wl||0.025,pattern:this.pn.pattern})},NMb:function(){if(ig.Xf.iC&&
sc.options.get("weather")){var a=10;do{for(var b=ig.r.screen.x+Math.random()*ig.i.width,f=ig.r.screen.y+Math.random()*ig.i.height,i=ig.r.Jl;i--;){var j=ig.r.rb[i];if(j.collision&&j.collision.o5a(b,f)){a=j.height;j=j.collision.Bb;b=b+(-(b%j)+Math.random()*(j-8));f=f+(-(f%j)+Math.random()*(j-8));f=f+a;ig.r.Pe(ig.RSa,b,f,a,{});return}}a--}while(a)}},eFb:function(){for(var a=this.xb.length;a--;){var b=this.xb[a];b.n=b.n-ig.i.ja;b.n<=0?this.xb.splice(a,1):Vec2.Tm(b.g,b.move,ig.i.ja)}},nb:function(){if(ig.Xf.iC&&
sc.options.get("weather")){var a=ig.i.context.globalAlpha;ig.i.context.globalCompositeOperation="lighter";for(var b=this.xb.length;b--;){var f=this.xb[b],i=this.s.Iy(f.pattern),j=1;f.n<f.Wl?j=f.n/f.Wl:f.n>f.Fa-f.Wl&&(j=(f.Fa-f.n)/f.Wl);j=j*f.alpha;ig.i.context.globalAlpha=a*j;i.nb(0,0,-f.g.x+ig.r.screen.x,-f.g.y+ig.r.screen.y,ig.i.width,ig.i.height)}ig.i.context.globalAlpha=a;ig.i.context.globalCompositeOperation="source-over"}}})});ig.J=h;
ig.N("impact.feature.weather.weather").O("impact.base.game","impact.feature.weather.clouds","impact.feature.weather.fog","impact.feature.weather.rain").K(function(){ig.Xf.iC=h;ig.G$={NONE:{Ld:0.6},CARGO_HOLD:{gc:[{type:"DARK_DUST",Bc:10}]},DUSTY:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:10}],be:"#0f0f0f"},CLOUDY:{Fg:{alpha:0.5,time:2,Zd:0.7},HA:{aD:0.5,V:{x:60,y:24},alpha:0.4}},BEFORE_RAIN:{Fg:{alpha:0.2,time:2,Zd:0.3},pf:{alpha:0.3,V:{x:100,y:40}}},RAINY_WEAK:{Ys:{alpha:0.2,time:2,Zd:0.3},Sp:ig.Ut.WEAK,pf:{alpha:0.3,
V:{x:100,y:40}}},RAINY_MEDIUM:{Ys:{alpha:0.25,time:2,Zd:0.35},Sp:ig.Ut.MEDIUM,pf:{alpha:0.4,V:{x:150,y:60}}},RAINY_STRONG:{Ys:{alpha:0.5,time:2,Zd:0.7},Sp:ig.Ut.STRONG,pf:{alpha:0.5,V:{x:225,y:90}}},ROOKIE_HARBOR:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},gc:[]},ROOKIE_HARBOR_INNER:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:3}],be:"#0f0f0f"},EXPO_SPACE:{Fg:{alpha:1,time:2,Zd:1},Ld:0.2,gc:[{type:"BLUE_SQUARES",Bc:15}]},AUTUMN:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},
gc:[{type:"LEAVES",Bc:6}]},AUTUMN_RAIN_WEAK:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},Sp:ig.Ut.WEAK,pf:{alpha:0.3,V:{x:100,y:40}},gc:[{type:"LEAVES",Bc:8}]},AUTUMN_RAIN_MEDIUM:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},Sp:ig.Ut.MEDIUM,pf:{alpha:0.4,V:{x:150,y:60}},gc:[{type:"LEAVES",Bc:12}]},OLD_HIDEOUT_OUTSIDE:{Ys:{alpha:0.5,time:2,Zd:0.7},pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.2,gc:[{type:"WHITE_DUST",Bc:10}],be:"#000b2c"},OLD_HIDEOUT_OUTSIDE_ALT:{Ys:{alpha:0.2,
time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.6,gc:[{type:"WHITE_DUST",Bc:10}],be:"#331251"},OLD_HIDEOUT_INNER:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"DARK_DUST",Bc:10}],be:"#302313"},OLD_HIDEOUT_OFFICE:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"DARK_DUST",Bc:10}],be:"#302313"},RHOMBUS_DNG_TOP:{Fg:{alpha:0.5,time:2,Zd:0.7},gc:[{type:"BLUE_SQUARES",Bc:10}]},RHOMBUS_DUNGEON:{Fg:{alpha:0.3,time:2,Zd:0.5},gc:[{type:"BLUE_SQUARES",Bc:10}],be:"#101112"},CAVE:{pf:{alpha:0.7,V:{x:30,y:10}},
Ld:0.8,gc:[{type:"DARK_DUST",Bc:10}]},CAVE_BERGEN:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"DARK_DUST",Bc:10}]},BERGEN_SUNNY:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},gc:[{type:"GREEN_LEAVES",Bc:6}]},BERGEN_SNOW_START:{Ys:{alpha:0.1,time:2,Zd:0.2},Sp:ig.Ut.SNOW_WEAK,gc:[{type:"GREEN_LEAVES",Bc:2},{type:"SNOW_FLAKES",Bc:2}]},BERGEN_SNOW:{Ys:{alpha:0.2,time:2,Zd:0.3},Sp:ig.Ut.SNOW_MEDIUM,gc:[{type:"SNOW_FLAKES",Bc:6}]},BERGEN_INNER:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:3}],
be:"#0f0f0f"},COLD_DUNGEON:{Ys:{alpha:0.2,time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.5,be:"#021116",gc:[{type:"COLD_CRYSTALS",Bc:6},{type:"DARK_DUST",Bc:10}]},COLD_DUNGEON_DARK:{Ys:{alpha:0.2,time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.7,be:"#021116",gc:[{type:"COLD_CRYSTALS",Bc:12},{type:"DARK_DUST",Bc:6}]},COLD_DUNGEON_POST_BOSS:{Ys:{alpha:0.2,time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.9,be:"#021116",gc:[{type:"COLD_CRYSTALS",Bc:6},{type:"DARK_DUST",Bc:10}]},HEAT_DUSTY:{Fg:{alpha:0.4,
time:2,Zd:0.6},gc:[{type:"SAND_OUTSIDE",Bc:12}]},HEAT_PARALLAX:{Fg:{alpha:0.4,time:2,Zd:0.6},gc:[{type:"SAND_OUTSIDE",Bc:12}]},HEAT_SANDSTORM:{Fg:{alpha:0.8,time:2,Zd:0.9},Sp:ig.Ut.SANDSTORM_WEAK,pf:{alpha:0.3,V:{x:240,y:60},zoom:1},gc:[{type:"SANDSTORM",Bc:12}]},HEAT_SANDSTORM_LIGHT:{Fg:{alpha:0.4,time:2,Zd:0.5},Sp:ig.Ut.SANDSTORM_NERD,pf:{alpha:0.3,V:{x:120,y:45},zoom:1},gc:[{type:"SAND_OUTSIDE",Bc:12}]},HEAT_GREEN:{Fg:{alpha:0.3,time:2,Zd:0.5},HA:{aD:0.2,V:{x:90,y:36},alpha:0.24},gc:[{type:"GREEN_LEAVES",
Bc:6}]},HEAT_VILLAGE_INNER:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:3}],be:"#0f0f0f"},HEAT_VILLAGE_INNER_DUSTY:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:10}],be:"#0f0f0f"},HEAT_DUNGEON:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#140e08",gc:[{type:"SAND",Bc:16}]},HEAT_DUNGEON_MIDBOSS:{Fg:{alpha:0.3,time:2,Zd:0.5},Sp:ig.Ut.SANDSTORM_NERD,pf:{alpha:0.8,V:{x:120,y:45},zoom:1},Ld:0.5,be:"#140e08",gc:[{type:"SANDSTORM",Bc:12}]},HEAT_DUNGEON_COAL:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,
y:-15}},Ld:0.5,be:"#140e08",gc:[{type:"COAL_SPARKS",Bc:16}]},HEAT_DUNGEON_BOSS:{Fg:{alpha:0.2,time:1,Zd:0.7},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#140e08",gc:[{type:"COAL_SPARKS_FAST",Bc:30}]},DREAM:{Ys:{alpha:1,time:1,Zd:0.8}},UNKNOWN_INNER:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#4c1221"},OFFICE:{Ld:0.6,gc:[],be:"#0f0f0f"},LOBBY:{Ld:0.8,be:"#1e3036"},LOBBY_DARK:{Ld:1,be:"#1e3036"},FLAT:{Ld:0.8,be:"#43392c"},FLAT_DARK:{Ld:1,be:"#43392c"},JUNGLE_SUNNY:{Fg:{alpha:0.3,
time:2,Zd:0.5},gc:[{type:"JUNGLE_LEAVES",Bc:10}],UZ:h},JUNGLE_RAINY_LIGHT:{Ys:{alpha:0.16,time:2,Zd:0.25},Sp:ig.Ut.DRIZZLE,pf:{alpha:0.2,V:{x:85,y:30},zoom:1},be:"#332a17"},JUNGLE_RAINY:{Ys:{alpha:0.16,time:2,Zd:0.25},Sp:ig.Ut.MEDIUM,pf:{alpha:0.2,V:{x:85,y:30},zoom:1},be:"#332a17"},JUNGLE_INFESTED_PRE:{Fg:{alpha:0.3,time:2,Zd:0.5},Ld:0.5,be:"#32133b"},JUNGLE_INFESTED:{pf:{alpha:0.6,V:{x:85,y:30},zoom:1},Ld:0.5,be:"#32133b",gc:[{type:"INFESTED_DUST",Bc:20}]},CAVE_INFESTED:{pf:{alpha:0.6,V:{x:30,y:10}},
Ld:0.6,gc:[{type:"DARK_DUST",Bc:5},{type:"INFESTED_DUST",Bc:10}],be:"#32133b"},JUNGLE_CITY_PRE:{Ys:{alpha:0.16,time:2,Zd:0.25},Sp:ig.Ut.DRIZZLE,Ld:0.2,pf:{alpha:0.2,V:{x:85,y:30},zoom:1},be:"#332a17"},JUNGLE_CITY:{Ys:{alpha:0.16,time:2,Zd:0.25},Sp:ig.Ut.MEDIUM,pf:{alpha:0.4,V:{x:85,y:30},zoom:1},be:"#332a17"},JUNGLE_CITY_INNER:{Ld:0.6,gc:[{type:"DARK_DUST",Bc:3}],be:"#2e271a"},JUNGLE_WAVE_TEMPLE:{Ys:{alpha:0.16,time:2,Zd:0.25},Sp:ig.Ut.MEDIUM,pf:{alpha:0.4,V:{x:85,y:30},zoom:1},be:"#173133"},WAVE_DNG_INNER:{Fg:{alpha:0.3,
time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#0a2f29",gc:[{type:"WAVE_DUST",Bc:20}]},WAVE_DNG_INNER_FISH:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.8,be:"#0a2f29",gc:[{type:"WAVE_DUST",Bc:20}]},SHOCK_DNG_INNER:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#220b28",gc:[{type:"INFESTED_DUST",Bc:20}]},TREE_DNG_INNER:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#0a2f29",gc:[{type:"WAVE_DUST",Bc:20}]},TREE_INNER:{Fg:{alpha:0.3,
time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#0a2f29",gc:[{type:"DARK_DUST",Bc:20}]},TREE_INNER_INFESTED:{Fg:{alpha:0.4,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#0a2f29",gc:[{type:"DARK_DUST",Bc:20},{type:"INFESTED_DUST",Bc:10},{type:"SPOOKY_DUST",Bc:5}]},TREE_DNG_INNER_WAVE:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#0a2f29",gc:[{type:"WAVE_DUST",Bc:20}]},TREE_DNG_INNER_SHOCK:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#220b28",
gc:[{type:"WAVE_DUST",Bc:20}]},SPOOKY_INNER:{pf:{alpha:1,V:{x:20,y:-100},zoom:1},Ld:0.7,xt:1,gc:[{type:"SPOOKY_DUST",Bc:20}],be:"#211f1b"},CAVE_FOREST:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"WHITE_DUST",Bc:10}],be:"#20134c"},CAVE_ARID:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"WHITE_DUST",Bc:10}],be:"#4c121d"},CAVE_ARID_CLOSER:{pf:{alpha:0.7,V:{x:30,y:10}},Ld:0.8,gc:[{type:"ARID_DUST_1",Bc:20}],be:"#371008"},ARID_OUTSIDE:{pf:{alpha:0.6,V:{x:85,y:30},zoom:1},Ld:0.5,be:"#4c121d",gc:[{type:"ARID_DUST_1",
Bc:20}]},ARID_INSIDE:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#4c1221",gc:[{type:"ARID_DUST_1",Bc:20}]},ARID_ELEVATOR_UP:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.8,be:"#4c1221",gc:[{type:"ARID_DUST_ELEVATOR_UP",Bc:20}]},ARID_ELEVATOR_DOWN:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.8,be:"#4c1221",gc:[{type:"ARID_DUST_ELEVATOR_DOWN",Bc:20}]},ARID_BOSS:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.8,be:"#4c1221",
gc:[{type:"ARID_DUST_FAST",Bc:20}],UZ:h},ARID_END_SCENE:{Fg:{alpha:0.7,time:2,Zd:1},pf:{alpha:1,V:{x:5,y:-15}},Ld:0.8,be:"#4c1221",gc:[{type:"ARID_DUST_1",Bc:30}]},ARID_BETWEEN:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#4c1221",gc:[]},ARID_DNG_OUTSIDE:{Fg:{alpha:0.3,time:2,Zd:0.5},pf:{alpha:0.8,V:{x:5,y:-15}},Ld:0.5,be:"#4d4032",gc:[]},SAPPHIRE_RIDGE:{Ys:{alpha:0.2,time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.6,gc:[{type:"WHITE_DUST",Bc:10}],be:"#331251"},SAPPHIRE_RIDGE_BUILDING:{Ys:{alpha:0.2,
time:2,Zd:0.3},pf:{alpha:0.8,V:{x:30,y:10}},Ld:0.6,gc:[{type:"WHITE_DUST",Bc:10}],be:"#4c3127"},SAPPHIRE_RIDGE_INNER:{pf:{alpha:0.7,V:{x:5,y:-30}},Ld:0.65,gc:[{type:"DARK_DUST",Bc:6}],be:"#302313"},FLASHBACK_OFFICE:{Ld:1,gc:[],be:"#0f0f0f",SH:{j3:"#534500",Y3:"rgba(49,0,83,0.4)"},Fg:{alpha:1,time:2,Zd:0.9}},FLASHBACK_HIDEOUT:{Ld:1,gc:[{type:"WHITE_DUST",Bc:10}],be:"#411e61",SH:{j3:"#532500",Y3:"rgba(31,0,81,0.4)"},Fg:{alpha:1,time:2,Zd:0.9}},FLASHBACK_HIDEOUT_INNER:{Ld:1,gc:[],be:"#411e61",SH:{j3:"#532500",
Y3:"rgba(31,0,81,0.4)"},Fg:{alpha:1,time:2,Zd:0.9}},FLASHBACK_ARID:{Ld:1,gc:[{type:"ARID_DUST_1",Bc:20}],be:"#4c121d",SH:{j3:"#532500",Y3:"rgba(31,0,81,0.4)"},Fg:{alpha:1,time:2,Zd:0.9}},FLASHBACK_DIAGRAM:{Ld:1,gc:[],be:"#4c121d",SH:{j3:"#251000",Y3:"rgba(31,0,81,0.2)"},Fg:{alpha:1,time:2,Zd:0.9}},TREE_SPACE:{Fg:{alpha:0.4,time:2,Zd:0.8},Ld:0.5,be:"#4c1221",gc:[{type:"RHOMBUS",Bc:20}],UZ:h},RHOMBUS_SQUARE:{Fg:{alpha:0.5,time:2,Zd:0.7},HA:{aD:0.3,V:{x:90,y:36},alpha:0.24},gc:[{type:"BLUE_SQUARES",
Bc:10}]},RHOMBUS_SQUARE_INNER:{Ld:0.8,gc:[{type:"BLUE_SQUARES",Bc:5}],be:"#161c24"},FINAL_BOSS:{Fg:{alpha:0.5,time:2,Zd:0.7},gc:[{type:"BLUE_SQUARES",Bc:10}],UZ:h},GAUTHAM_ROOM:{Ld:0.7,gc:[],pf:{alpha:0.9,V:{x:5,y:-15}},be:"#360e0f",SH:{j3:"#560202",Y3:"rgba(0,0,0,0.5)"},Fg:{alpha:1,time:2,Zd:1}}};ig.Tka=ig.qP.extend({Wi:"Weather",name:q,fd:q,fga:[],f:function(a){this.parent();this.name=a;this.fd=ig.G$[this.name];if(a=this.fd.gc)for(var b=0;b<a.length;++b)this.fga.push(new ig.zwa(a[b].type))},NJ:aa(),
Wo:function(){for(var a=this.fga.length;a--;)this.fga[a].Tc();this.fga.length=0}});ig.Ypb=ig.Uf.extend({T5:q,una:new ig.Tka("NONE"),HA:new ig.Mfb,pf:new ig.Ihb,Sp:new ig.xmb,PM:q,UZ:y,Ld:{last:0,target:0,n:0},SH:q,xt:{last:0,target:0,n:0},f:function(){this.parent("Weather");this.PM=new ig.tV;ig.pg.Oaa(this.PM)},Hab:function(a,b){this.una=a;this.SOb(b)},PG:100,Ms:function(a){this.T5&&this.T5.Tc();this.T5=a.attributes&&a.attributes.weather?new ig.Tka(a.attributes.weather||"NONE"):new ig.Tka("NONE");
this.T5.fd.be?ig.pg.$$a(this.T5.fd.be):ig.pg.$$a(q)},dK:100,qx:function(){this.Hab(this.T5,h)},QM:0,Eu:function(){if(!ig.r.paused){if(this.Ld.n){this.Ld.n=this.Ld.n-ig.i.ja;if(this.Ld.n<0)this.Ld.n=0;var a=this.Ld.n/2,a=a*this.Ld.last+(1-a)*this.Ld.target;ig.pg.Ld=a}if(this.xt.n){this.xt.n=this.xt.n-ig.i.ja;if(this.xt.n<0)this.xt.n=0;a=this.xt.n/2;a=a*this.xt.last+(1-a)*this.xt.target;ig.pg.xt=a}this.HA.update();this.pf.update();this.Sp.update()}},lfa:100,Mfa:function(){this.Sp.nb();if(ig.Xf.iC&&
this.SH){var a=ig.i.context;a.globalCompositeOperation="lighter";a.fillStyle=this.SH.j3;a.fillRect(0,0,ig.i.qO,ig.i.pO);a.globalCompositeOperation="source-over";a.fillStyle=this.SH.Y3;a.fillRect(0,0,ig.i.qO,ig.i.pO)}},fj:function(){this.Sp.fj()},SOb:function(a){var b=this.una.fd;if(b.Fg){var c=b.Fg;ig.Ud.EH("BLACK",c.alpha,c.time,c.Zd)}else ig.Ud.EH("BLACK",0,a?0:2);if(b.Ys){c=b.Ys;ig.Ud.EH("WHITE",c.alpha,c.time,c.Zd)}else ig.Ud.EH("WHITE",0,a?0:2);if(b.HA){c=b.HA;this.HA.AKb(c.aD,c.V,c.alpha,a)}else this.HA.CZa(a);
if(b.pf){c=b.pf;this.pf.O$a(c.alpha,c.V,c.zoom,a)}else this.pf.Qvb(a);b.Sp?this.Sp.qab(b.Sp,a):this.Sp.Xvb(a);b.OM?this.PM.W$a(b.OM,a?0:2):this.PM.W$a(0,a?0:2);this.UZ=b.UZ;var c=b.Ld,d=b.xt;c==g&&(c=0.6);d==g&&(d=1);if(a){ig.pg.Ld=c;ig.pg.xt=d}else{this.Ld.last=ig.pg.Ld;this.Ld.target=c;this.Ld.n=2;this.xt.last=ig.pg.xt;this.xt.target=d;this.xt.n=2}this.SH=b.SH||q;this.T9a(a)},T9a:function(a){ig.FJ.clear(a);for(var b=this.una.fd,c=this.una.fga,d=c.length;d--;)ig.FJ.bBa(c[d],b.gc[d].Bc,a)}});ig.Vf(function(){return ig.iC=
new ig.Ypb})});ig.J=h;
ig.N("impact.feature.light.entities.cond-light").O("impact.base.actor-entity","impact.feature.weather.weather","impact.feature.light.light").K(function(){ig.wa.ConditionalLight=ig.Kc.extend({be:q,t:new ig.u({Dd:h,attributes:{fb:{c:"VarCondition",d:"Condition for light to appear"},X5a:{c:"String",d:"If defined: reduce shadow with provided size",U:ig.mk,ok:h},Y2a:{c:"String",d:"If defined: glow with provided size",U:ig.mk,ok:h},iC:{c:"String",d:"If defined, take glow color from weather definition",U:ig.G$,
ok:h},be:{c:"String",d:"Override glow color (ignores weather color)",I:h}},Uk:h,Sl:"rgba(255,255,125, 0.8)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(8,8,0);this.b.kn(ig.jk.gv);var a=new ig.de(d.condition),b=Vec2.vc(this.b.g.x+this.b.size.x/2,this.b.g.y-this.b.g.z+this.b.size.y/2),c=ig.mk[d.lightSize]||q,f=ig.mk[d.glowSize]||q;if(d.glowColor)this.be=new ig.Jwa(d.glowColor);else if(d.weather)if(d=(d=ig.G$[d.weather])&&d.be)this.be=new ig.Jwa(d);ig.pg.Ptb(a,b,c,f,this.be)},
Ge:function(a){this.be&&this.be.Tc();this.parent(a)},update:J()})});ig.J=h;ig.N("impact.feature.light.plug-in").O("impact.feature.light.light","impact.feature.light.light-steps","impact.feature.light.light-map","impact.feature.light.entities.cond-light").K(J());ig.J=h;
ig.N("impact.feature.height-map.height-map").O("impact.base.map","impact.base.game","impact.base.image","game.config").K(function(){ig.$j.HeightMap=ig.Q9.extend({t:new ig.u({faa:"HeightMap",W$:ig.Co.DISABLE_LAYER_SIZE,maa:h,laa:h,kaa:ig.Co.DISABLE_LAYER_DISTANCE,X$:ig.Co.DEFAULT_TILE_SIZE,yza:"media/map/heightmap-tiles.png",trb:"postlight",aaa:"impact/feature/height-map/editors/layer-icon.png",Xya:1,Zya:0,Yya:0}),PIa:h,f:function(a,b){this.parent(a,b)},nb:J(),$na:J()});ig.$j.HeightMap.Hqa="heightMap";
if(window.Ed){wm.cv={};var a={sI:"FILL",mI:"DIAGONAL_NE",nI:"DIAGONAL_SE",oI:"DIAGONAL_SW",PE:"DIAGONAL_NW",yka:"SQUARE_NE",hya:"SQUARE_SE",iya:"SQUARE_SW",zka:"SQUARE_NW",fv:"NORTH",vp:"EAST",eA:"SOUTH",zp:"WEST",i1:"CORNER_NE",ija:"CORNER_SE",jja:"CORNER_SW",j1:"CORNER_NW",et:"WALL_SOUTH",JI:"WALL_SOUTH_BASE",Fw:"WALL_SE",fQ:"WALL_SE_BASE",Gw:"WALL_SW",gQ:"WALL_SW_BASE",LI:"WALL_SQR_SW",F$:"WALL_SQR_SW_BASE",KI:"WALL_SQR_SE",E$:"WALL_SQR_SE_BASE",Oya:"WALL_END_WEST",Pya:"WALL_END_WEST_BASE",Mya:"WALL_END_EAST",
Nya:"WALL_END_EAST_BASE",Mja:"INVISIBLE_WALL"},b={};b[a.eA]={Mz:a.et,Sb:a.JI};b[a.oI]={Mz:a.Gw,Sb:a.gQ};b[a.nI]={Mz:a.Fw,Sb:a.fQ};b[a.iya]={Mz:a.LI,Sb:a.F$};b[a.hya]={Mz:a.KI,Sb:a.E$};b[a.jja]={EO:h,Mz:a.Oya,Sb:a.Pya};b[a.ija]={EO:h,Mz:a.Mya,Sb:a.Nya};b[a.fv]={EO:h,D8:h,$Ca:-1,Mz:a.et,Sb:a.JI};b[a.mI]={EO:h,D8:h,Mz:a.Gw,Sb:a.gQ};b[a.PE]={EO:h,D8:h,Mz:a.Fw,Sb:a.fQ};b[a.yka]={EO:h,D8:h,$Ca:-1,Mz:a.et,Sb:a.JI};b[a.zka]={EO:h,D8:h,$Ca:-1,Mz:a.et,Sb:a.JI};var c={};c[2]=a.mI;c[3]=a.nI;c[4]=a.oI;c[5]=a.PE;
var d=[{Lna:"NORTH",Mna:"EAST",s:a.yka},{Lna:"NORTH",Mna:"WEST",s:a.zka},{Lna:"SOUTH",Mna:"EAST",s:a.hya},{Lna:"SOUTH",Mna:"WEST",s:a.iya}],f={fv:{qs:0,rs:-1,WQ:3,XQ:4,s:a.fv,BE:[{qs:-1,rs:0},{qs:1,rs:0}]},vp:{qs:1,rs:0,WQ:4,XQ:5,s:a.vp,BE:[{qs:0,rs:-1},{qs:0,rs:1}]},eA:{qs:0,rs:1,WQ:2,XQ:5,s:a.eA,BE:[{qs:-1,rs:0},{qs:1,rs:0}]},zp:{qs:-1,rs:0,WQ:2,XQ:3,s:a.zp,BE:[{qs:0,rs:-1},{qs:0,rs:1}]},ukb:{qs:1,rs:-1,WQ:4,XQ:4,s:a.i1},Jmb:{qs:1,rs:1,WQ:5,XQ:5,s:a.ija},enb:{qs:-1,rs:1,WQ:2,XQ:2,s:a.jja},Hkb:{qs:-1,
rs:-1,WQ:3,XQ:3,s:a.j1}},i=[],j;for(j in f)i.push(j);var k={};k[2]=[f.fv,f.vp,f.ukb];k[3]=[f.eA,f.vp,f.Jmb];k[4]=[f.eA,f.zp,f.enb];k[5]=[f.fv,f.zp,f.Hkb];var l={};l[a.i1]={test:a.vp,set:a.sI};l[a.j1]={test:a.zp,set:a.sI};l[a.vp]={test:a.mI,set:a.i1};l[a.zp]={test:a.PE,set:a.j1};var m={start:0,end:0};wm.ZPb={data:q,Jea:q,VVb:0,Jl:0,width:0,height:0,kWb:function(a){this.IXa(a.data);this.$Ua();this.lXa();this.Jea=this.data;this.data=q},apply:function(a,b){this.IXa(a.data);this.$Ua();this.lXa();this.vqb(b);
this.Jea=this.data},IXa:function(a){this.data=[];var b=a[0].length,c=a.length;this.tIa=1E3;this.Jl=0;this.width=b;this.height=c;for(var d=0;d<c;++d){this.data[d]=[];for(var f=0;f<b;++f){var i=a[d][f]-1;if(i==-1)this.data[d][f]=q;else{var j=Math.floor(i/128),i=i%128,i={aa:Math.floor(i/8)||-1,fill:i%8,Pb:j,s:0,Pp:0,Gs:0,bYb:0,BE:-1};this.tIa=Math.min(i.aa,this.tIa);this.Jl=Math.max(i.aa,this.Jl);this.data[d][f]=i}}}},$Ua:function(){for(var a=this.Jl;a>=this.tIa;a--)for(var b=0;b<this.height;++b)for(var c=
0;c<this.width;++c){var d=this.data[b][c];if(d&&d.aa==a&&d.fill==0)d.fill=this.Grb(c,b,d.aa)}},lXa:function(){for(var a=0;a<this.height;++a)for(var b=0;b<this.width;++b){var c=this.data[a][b];c&&(c.fill==1?this.atb(b,a,c):this.Vsb(b,a,c))}},vqb:function(a){var b=ig.ss.zOa;b.Rub();for(var c=ig.ss.zVb,d=c.length,f=-1,i=0;i<d;++i){var j=c[i];if(!(j.aa=="first"||j.aa=="last"||j.aa=="light"||j.aa=="postlight"||j.aa.indexOf("object")!=-1)&&j.eb==1)if(j.type=="Background"&&wm.cv[j.w0]&&f!=j.aa){f=j.aa;this.tqb(j,
a)}else j.type=="Collision"&&this.uqb(j,a)}b.Jxb()},NVa:function(a,b){a<1&&(a=1);var c=ig.ss.rb,d=c[a-1];return d?d.height/b.Bb:c[c.length-1].height/b.Bb+(a-c.length)*2},qQ:function(a,b,c){return this.NVa(b,c)-this.NVa(a,c)},tqb:function(c,d){var f=wm.cv[c.w0];if(f){for(var f=new u(f),i=[],j=ig.ss.rb,k=j[c.aa],n=j[c.aa*1+1],t=j.length,j=(k.height-j[ig.ss.yt].height)/c.Bb,k=n?(n.height-k.height)/c.Bb:0,n=c.aa*1+1,p=ig.ss.yt*1+1,r=0;r<this.height;++r)for(var G=0;G<this.width;++G){var D=this.data[r][G];
if(D){var E=f.KY()&&D.aa>t&&D.Pp<=t,H=b[D.s];if(H&&H.EO&&(!E||n<p))H=q;if(D.aa==n){if(d||this.Orb(G,r)){var Q=q;if(f.UFa(D.Pb)&&(D.s==a.nI||D.s==a.oI)&&D.aa==p&&D.Pp==-1)Q="CHASM_FLOOR";var P=f.Ey(D.s,G,r-j,Q,D.Pb,D.BE);this.UI(c,G,r-j,P,i)}}else if(H&&H.D8&&p<=n&&n<D.Pp){var U=k,E=H.$Ca||0;if(d||this.bWa(G,r,U)){m.start=this.qQ(p,n,c);m.end=this.qQ(n,D.Pp,c)-1;for(var T=0;T<U;++T){P=T==0&&p==n?H.Sb:H.Mz;P=f.Ey(P,G,r-j-T+E,"BACK_WALL",D.Gs,-1,m);this.UI(c,G,r-j-T+E,P,i);m.start++;m.end--}if(E){P=
f.Ey(a.sI,G,r-j,"SHADOW",D.Gs);this.UI(c,G,r-j,P,i)}}}else if(H&&!H.D8&&(D.Pp<=n||E&&n==p)&&D.aa>n){var V=!H.EO&&f.Sb.Cd&&D.Pp==-1&&n<p,U=k,R=0,W=y,X=f.szb(D.Pb),T=f.A1a(D.Pb);if(V)R=this.qQ(n,p,c)-X-T;else if(E&&n==p){U=this.qQ(n,D.aa,c);W=h;R=this.qQ(n,D.Pp,c)}if(d||this.bWa(G,r,U)){var Z=D.Pp==-1||f.$Db(D.Gs,D.Pb)?D.Pb:D.Gs;if(E&&n>p){P=f.Ey(a.Mja,G,r-j,"SHADOW",Z);this.UI(c,G,r-j,P,i)}else{m.start=this.qQ(D.Pp,n,c);m.end=this.qQ(n,D.aa,c)-1-R;if(V)m.start=Math.max(-R,0);if(R&&W)m.start=0;for(T=
0;T<U;++T){Q=q;if(T<R){P=0;E&&(P=f.Ey(a.sI,G,r-j,"SHADOW",D.Gs));this.UI(c,G,r-j-T,P,i)}else{if(T==0&&D.Pp==n)P=H.Sb;else if(W&&T==R)P=H.Sb;else if(T==0&&f.UFa(Z)&&D.Pp==-1&&n==p){P=H.Sb;if(D.s==a.nI||D.s==a.oI)Q="CHASM"}else{P=H.Mz;W&&U-T==1&&(Q="SHADOW")}H.EO&&(Q="SHADOW");V&&T-R<X&&(Q=f.UFa(Z)&&D.aa==p?"CHASM_FLOOR":"CHASM");if(P){P=f.Ey(P,G,r-j-T,Q,Z,-1,m);this.UI(c,G,r-j-T,P,i)}m.start++;m.end--}}if(H.Mz&&W){P=f.Ey(D.s,G,r-j-U,"SHADOW",Z);this.UI(c,G,r-j-U,P,i)}}}}else if(D.Pp==n){if(d||this.q2(G,
r)){if(f.KY())if(c.aa>ig.ss.yt)P=o[D.s]?f.Ey(o[D.s],G,r-j,"BACK_WALL",D.Gs):f.Ey(a.Mja,G,r-j,"SHADOW",D.Gs);else{P=f.Ey(D.s,G,r-j,"SHADOW",D.Gs);if(!f.Ppa(D.Gs)&&l[D.s])(H=this.data[r-1]&&this.data[r-1][G])&&l[D.s].test==H.s&&(P=f.Ey(l[D.s].set,G,r-j,"SHADOW",D.Gs))}else P=f.Ey(a.sI,G,r-j,q,D.Gs);this.UI(c,G,r-j,P,i)}}else if(d||this.Prb(G,r,c)){P=0;f.KY()&&(c.aa==ig.ss.yt&&D.aa>n)&&(P=E&&D.Pp&&D.Pp<p?f.Ey(D.s,G,r-j,"DARK_WALL",D.Gs):f.Ey(a.sI,G,r-j,"SHADOW",D.Gs));this.UI(c,G,r-j,P,i)}}}ig.r.GYa.RWb(i,
c,ig.ss.zOa)}},uqb:function(a,b){for(var c=ig.ss.rb,c=(c[a.aa].height-c[ig.ss.yt].height)/a.Bb,d=a.aa*1+1,f=a.aa<=ig.ss.yt,i=a.aa<ig.ss.yt,j=0;j<this.height;++j)for(var k=0;k<this.width;++k)if(b||this.q2(k,j)){var l=this.data[j][k];if(l){var m=0;l.aa<d?m=f?p[1]:0:l.fill==1?!i&&l.aa>d&&(m=t[l.fill]):!i&&l.Pp>d?m=t[1]:l.aa>d?l.Pp<d&&f?m=i?p[l.fill]:r[l.fill]:i||(m=t[l.fill]):l.aa==d&&f&&(m=p[l.fill]);this.UI(a,k,j-c,m)}}},Orb:function(a,b){if(this.q2(a,b))return h;for(var c=i.length;c--;){var d=f[i[c]];
if(this.q2(a+d.qs,b+d.rs))return h}return y},bWa:function(a,b,c){for(c=c+1;c--;)if(this.q2(a,b-c))return h;return y},Prb:function(a,b,c){for(var d=11,f=ig.ss.rb;d--;)if(this.q2(a,b+d)){if(!d)return h;var i=this.data[b+d][a];if(i.aa>f.length){var j=this.qQ(ig.ss.yt+1,f.length,c),j=j+(i.aa-f.length)*2;if(d<=j)return h}}return y},q2:function(a,b){if(!this.Jea)return h;var c=this.Jea[b]&&this.Jea[b][a],d=this.data[b]&&this.data[b][a];return!c&&d||c&&!d?h:!c&&!d?y:c.aa!=d.aa||c.fill!=d.fill||c.s!=d.s||
c.Pp!=d.Pp||c.Pb!=d.Pb||c.Gs!=d.Gs||c.BE!=d.BE},UI:function(a,b,c,d,f){if(!(c<0||c>=this.height)){f&&ig.r.GYa.LRb(f,a,b,c);var f=ig.ss.zOa,d=ig.r.GYa.rTb(a,b,c,d),i=a.data[c][b];if(i!=d){f.gIb(a,b*a.Bb,c*a.Bb,i,d);a.yO(b,c,d)}}},HRb:function(a){var b=ig.ss.zOa;b.Rub();for(var c=0;c<this.height;++c)for(var d=0;d<this.width;++d){var f=this.data[c][d],f=(f.aa-1)*8+f.fill+1;b.gIb(a,d*16,c*16,a.data[c][d],f);a.yO(d,c,f)}b.Jxb()},Grb:function(a,b,c){var d=this.rQ(a,b,c,f.fv),i=this.rQ(a,b,c,f.vp),j=this.rQ(a,
b,c,f.zp),a=this.rQ(a,b,c,f.eA);return d&&i&&(!a||a>=d)&&(!j||j>=d)&&d==i?2:(!d||d>=i)&&i&&a&&(!j||j>=i)&&i==a?3:(!d||d>=j)&&(!i||i>=j)&&a&&j&&a==j?4:d&&(!i||i>=d)&&(!a||a>=d)&&j&&d==j?5:1},atb:function(b,c,j){var k=j.aa;j.s=q;for(var l=0;l<d.length;++l){var m=d[l],n=f[m.Lna],o=this.rQ(b,c,k,n),t=this.rQ(b,c,k,f[m.Mna]);if(o&&t&&o<k&&t<k){j.Pp=o;j.Gs=this.Jza(b,c,n)||0;j.s=m.s;j.BE=-1;return}}for(l=0;l<i.length;++l){m=f[i[l]];if((n=this.rQ(b,c,k,m))&&n<k){j.Pp=n;j.Gs=this.Jza(b,c,m)||0;j.s=m.s;j.BE=
this.Irb(b,c,m,j.Pb,k);return}}if(!j.s)j.s=a.sI},Vsb:function(a,b,d){for(var f=k[d.fill],i=f.length,j=[],l=[];i--;){j[i]=this.rQ(a,b,d.aa,f[i]);l[i]=this.Jza(a,b,f[i])||0}if(j[0]){a=j[0];l=l[0]}else if(j[1]){a=j[1];l=l[1]}else{a=j[2];l=l[2]}if(a>d.aa){d.fill=d.fill>3?d.fill-2:d.fill+2;d.Pp=d.aa;d.Gs=d.Pb;d.aa=a;d.Pb=l}else{d.Pp=a;d.Gs=l}d.s=c[d.fill]},rQ:function(a,b,c,d){b=b+d.rs;a=a+d.qs;a=this.data[b]&&this.data[b][a];if(!a)return 0;d=a.fill==d.WQ||a.fill==d.XQ;return a.aa==c?d?a.aa:0:!d?a.aa:
0},Jza:function(a,b,c){b=b+c.rs;a=a+c.qs;a=this.data[b]&&this.data[b][a];return!a?y:a.Pb},Frb:function(a,b,c,d){b=b+c.rs;a=a+c.qs;a=this.data[b]&&this.data[b][a];return!a||a.aa!=d?y:a.Pb},Irb:function(a,b,c,d,f){if(!d||!c.BE)return-1;for(var i=c.BE.length;i--;){var j=this.Frb(a,b,c.BE[i],f);if(j!==y&&j<d)return i}return-1}};var n={TYPE1:{BASE:{},ALT:{},SHADOW:{},CHASM:{},DARK_WALL:{},CHASM_FLOOR:{},BACK_WALL:{},SUB:{BASE:{},SHADOW:{},BACK_WALL:{},BORDER:{}}}};j=n.TYPE1;j.Ppa=h;j.rZa=1;j.BASE[a.fv]=
[[2,0],[3,0]];j.BASE[a.vp]=[[3,1],[3,2]];j.BASE[a.eA]=[[2,3],[3,3]];j.BASE[a.zp]=[[2,1],[2,2]];j.BASE[a.mI]=[[4,0],[5,1]];j.BASE[a.nI]=[[4,3],[5,2]];j.BASE[a.oI]=[[0,2],[1,3]];j.BASE[a.PE]=[[0,1],[1,0]];j.BASE[a.i1]=[[4,1]];j.BASE[a.ija]=[[4,2]];j.BASE[a.jja]=[[1,2]];j.BASE[a.j1]=[[1,1]];j.BASE[a.et]=[[3,4],[2,4]];j.BASE[a.Fw]=[[5,3],[4,4]];j.BASE[a.Gw]=[[1,4],[0,3]];j.BASE[a.JI]=[[2,5],[3,5]];j.BASE[a.fQ]=[[4,5],[5,4]];j.BASE[a.gQ]=[[0,4],[1,5]];j.BASE[a.Oya]=[[0,6],[0,7]];j.BASE[a.Pya]=[[0,6],[0,
7]];j.BASE[a.Mya]=[[5,6],[5,7]];j.BASE[a.Nya]=[[5,6],[5,7]];j.ALT.offset={x:0,y:6};j.ALT[a.et]=[[3,0],[2,0]];j.ALT[a.Fw]=[[5,0],[4,0]];j.ALT[a.Gw]=[[1,0],[0,0]];j.SHADOW.offset={x:0,y:0};j.SHADOW[a.sI]=[[0,0]];j.SHADOW[a.Mja]=[[5,0]];j.CHASM.offset={x:0,y:1};j.CHASM.fl={};j.CHASM.fl[a.et]={start:[1,0]};j.CHASM.fl[a.Fw]={start:[1,0]};j.CHASM.fl[a.Gw]={start:[1,0]};j.DARK_WALL.offset={x:0,y:7};j.BACK_WALL.offset={x:0,y:7};j.BACK_WALL[a.vp]=[[3,3],[4,2]];j.BACK_WALL[a.zp]=[[1,2],[2,3]];j.SUB.xN=[a.et,
a.Fw,a.Gw];j.SUB.BASE[a.JI]=[[2,4],[3,4]];j.SUB.BASE[a.fQ]=[[4,4],[5,3]];j.SUB.BASE[a.gQ]=[[0,3],[1,4]];j.SUB.SHADOW.offset={x:0,y:5};j.SUB.SHADOW[a.fv]=[[2,0],[3,0]];j.SUB.SHADOW[a.PE]=[[0,0],[1,0]];j.SUB.SHADOW[a.mI]=[[4,0],[5,0]];j.SUB.SHADOW[a.zp]=[[0,1],[1,1]];j.SUB.SHADOW[a.vp]=[[5,1],[4,1]];j.SUB.BACK_WALL.offset={x:0,y:7};j.SUB.BACK_WALL[a.fv]=[[2,0],[3,0]];j.SUB.BACK_WALL[a.PE]=[[0,0],[1,0]];j.SUB.BACK_WALL[a.mI]=[[4,0],[5,0]];j.SUB.BACK_WALL[a.zp]=[[0,1],[1,1]];j.SUB.BACK_WALL[a.vp]=[[5,
1],[4,1]];j.SUB.BORDER[a.fv]=[[[2,5]],[[3,5]]];j.SUB.BORDER[a.vp]=[[[4,5]],[[4,6]]];j.SUB.BORDER[a.eA]=[[[2,6]],[[3,6]]];j.SUB.BORDER[a.zp]=[[[1,5]],[[1,6]]];n.TYPE2={BASE:{},ALT:{},SHADOW:{},CHASM:{},CHASM_FLOOR:{},DARK_WALL:{},BACK_WALL:{},SUB:{BASE:{},SHADOW:{},CHASM_FLOOR:{},BACK_WALL:{},BORDER:{}}};j=n.TYPE2;j.Ppa=y;j.rZa=0;j.BASE[a.fv]=[[1,0]];j.BASE[a.vp]=[[4,1]];j.BASE[a.eA]=[[1,3]];j.BASE[a.zp]=[[3,1]];j.BASE[a.mI]=[[2,0]];j.BASE[a.nI]=[[2,3]];j.BASE[a.oI]=[[0,3]];j.BASE[a.PE]=[[0,0]];j.BASE[a.yka]=
[[4,0]];j.BASE[a.hya]=[[4,2]];j.BASE[a.iya]=[[3,2]];j.BASE[a.zka]=[[3,0]];j.BASE[a.i1]=[[2,1]];j.BASE[a.ija]=[[2,2]];j.BASE[a.jja]=[[0,2]];j.BASE[a.j1]=[[0,1]];j.BASE[a.et]=[[1,4]];j.BASE[a.JI]=[[1,7]];j.BASE[a.Fw]=[[2,4]];j.BASE[a.fQ]=[[2,7]];j.BASE[a.Gw]=[[0,4]];j.BASE[a.gQ]=[[0,7]];j.BASE[a.KI]=[[4,3]];j.BASE[a.E$]=[[4,6]];j.BASE[a.LI]=[[3,3]];j.BASE[a.F$]=[[3,6]];j.BASE[a.Oya]=[[3,0]];j.BASE[a.Pya]=[[3,1]];j.BASE[a.Mya]=[[4,0]];j.BASE[a.Nya]=[[4,1]];j.BASE.fl={};j.BASE.fl[a.et]={loop:[1,2],end:[0]};
j.BASE.fl[a.Fw]={loop:[1,2],end:[0]};j.BASE.fl[a.Gw]={loop:[1,2],end:[0]};j.BASE.fl[a.KI]={loop:[1,2],end:[0]};j.BASE.fl[a.LI]={loop:[1,2],end:[0]};j.SHADOW.offset={x:0,y:0};j.SHADOW[a.sI]=[[1,1]];j.SHADOW[a.Mja]=[[1,2]];j.SHADOW[a.vp]=[[1,1]];j.SHADOW[a.zp]=[[1,1]];j.SHADOW.fl={};j.CHASM.offset={x:0,y:8};j.CHASM[a.fQ]=[[3,2]];j.CHASM[a.gQ]=[[4,2]];j.CHASM[a.et]=[[1,2]];j.CHASM[a.LI]=[[0,2]];j.CHASM[a.KI]=[[2,2]];j.CHASM[a.Fw]=[[3,3]];j.CHASM[a.Gw]=[[4,3]];j.CHASM.fl={};j.CHASM.fl[a.et]={start:[2,
1,0]};j.CHASM.fl[a.Fw]={start:[2,1,0]};j.CHASM.fl[a.Gw]={start:[2,1,0]};j.CHASM.fl[a.KI]={start:[2,1,0]};j.CHASM.fl[a.LI]={start:[2,1,0]};j.CHASM_FLOOR.offset={x:0,y:8};j.CHASM_FLOOR[a.nI]=[[3,0]];j.CHASM_FLOOR[a.oI]=[[4,0]];j.CHASM_FLOOR[a.et]=[[1,1]];j.CHASM_FLOOR[a.LI]=[[0,1]];j.CHASM_FLOOR[a.KI]=[[2,1]];j.CHASM_FLOOR[a.Fw]=[[3,1]];j.CHASM_FLOOR[a.Gw]=[[4,1]];j.CHASM_FLOOR.fl={};j.CHASM_FLOOR.fl[a.et]={start:[3,2,0]};j.CHASM_FLOOR.fl[a.Fw]={start:[4,3,0]};j.CHASM_FLOOR.fl[a.Gw]={start:[4,3,0]};
j.CHASM_FLOOR.fl[a.KI]={start:[3,2,0]};j.CHASM_FLOOR.fl[a.LI]={start:[3,2,0]};j.DARK_WALL.offset={x:0,y:13};j.DARK_WALL[a.fv]=[[3,1]];j.DARK_WALL[a.mI]=[[1,0]];j.DARK_WALL[a.PE]=[[0,0]];j.DARK_WALL[a.zka]=[[2,1]];j.DARK_WALL[a.yka]=[[4,1]];j.DARK_WALL[a.PE]=[[0,0]];j.DARK_WALL[a.i1]=[[2,0]];j.DARK_WALL[a.j1]=[[2,0]];j.DARK_WALL[a.zp]=[[0,1]];j.DARK_WALL[a.vp]=[[1,1]];j.BACK_WALL.offset={x:0,y:2};j.BACK_WALL[a.JI]=[[1,6]];j.BACK_WALL[a.fQ]=[[2,6]];j.BACK_WALL[a.gQ]=[[0,6]];j.BACK_WALL[a.E$]=[[4,5]];
j.BACK_WALL[a.F$]=[[3,5]];j.BACK_WALL[a.vp]=[[1,0]];j.BACK_WALL[a.zp]=[[1,0]];j.BACK_WALL.fl={};j.BACK_WALL.fl[a.et]={loop:[1],end:[0]};j.BACK_WALL.fl[a.Fw]={loop:[1],end:[0]};j.BACK_WALL.fl[a.Gw]={loop:[1],end:[0]};j.BACK_WALL.fl[a.KI]={loop:[1],end:[0]};j.BACK_WALL.fl[a.LI]={loop:[1],end:[0]};j.SUB.xN=[a.et,a.JI,a.Fw,a.Gw,a.KI,a.E$,a.LI,a.F$];j.SUB.JCb=[a.et,a.Fw,a.Gw,a.KI,a.LI];j.SUB.BASE[a.fQ]=[[2,4]];j.SUB.BASE[a.gQ]=[[0,4]];j.SUB.BASE[a.JI]=[[1,4]];j.SUB.BASE[a.E$]=[[1,2]];j.SUB.BASE[a.F$]=
[[1,1]];j.SUB.SHADOW.offset={x:0,y:0};j.SUB.SHADOW[a.PE]=[[3,3]];j.SUB.SHADOW[a.mI]=[[4,3]];j.SUB.BACK_WALL.offset={x:0,y:0};j.SUB.BACK_WALL[a.nI]=[[3,4]];j.SUB.BACK_WALL[a.oI]=[[4,4]];j.SUB.BORDER[a.fv]=[[[2,5]],[[3,5]]];j.SUB.BORDER[a.vp]=[[[4,5]],[[4,6]]];j.SUB.BORDER[a.eA]=[[[2,6]],[[3,6]]];j.SUB.BORDER[a.zp]=[[[1,5]],[[1,6]]];j.SUB.CHASM_FLOOR[a.nI]=[[0,5]];j.SUB.CHASM_FLOOR[a.oI]=[[0,6]];var o={};o[a.zp]=a.zp;o[a.vp]=a.vp;o[a.PE]=a.nI;o[a.mI]=a.oI;var t={1:2,2:8,3:9,4:10,5:11},p={1:1,2:6,3:7,
4:4,5:5},r={1:2,2:24,3:25,4:26,5:27},u=ig.Ca.extend({Lcb:0,Sb:q,$B:[],f:function(a){this.Lcb=a.tileCountX;this.Sb=this.bVa(a.base);if(a.terrains)for(var b=0;b<a.terrains.length;++b)this.$B[b]=this.bVa(a.terrains[b])},bVa:function(b){var c=ig.copy(b);c.hK=n[b.mappingType]||q;if(b.blockTypes){c.nba=[];for(var d=b.blockedTypes.length;d--;)c.nba.push(a[b.blockedTypes[d]])}return c},Eza:function(a){if(a&&this.$B[a-1]){a=this.$B[a-1];if(a.hK)return a;if(a.uBa)return this.$B[a.uBa-1]}return this.Sb},Ppa:function(a){return this.Eza(a).hK.Ppa},
szb:function(b){var b=this.Eza(b),c=1;if(b.hK.CHASM.fl)c=b.hK.CHASM.fl[a.et].start.length;return c},A1a:function(a){return this.Eza(a).hK.rZa||0},UFa:function(a){return this.A1a(a)==0},KY:function(){return this.Sb.Cd&&!this.Sb.pSb},uUb:function(){return this.Sb.Cd},xDb:function(b,c){return b==a.sI||(c&&this.$B[c-1].nba?this.$B[c-1].nba.indexOf(b)!=-1:this.Sb.nba&&this.Sb.nba.indexOf(b)!=-1)},$Db:function(a,b){var c=a&&this.$B[a-1]||this.Sb,d=b&&this.$B[b-1]||this.Sb;return(d&&d.YOb||0)>(c&&c.YOb||
0)},Ey:function(a,b,c,d,f,i,j){f&&!this.$B[f-1]&&(f=0);var k=this.Sb,l=q;if(f&&this.$B[f-1].hK)k=this.$B[f-1];else if(f)(l=this.$B[f-1])&&l.uBa&&(k=this.$B[l.uBa-1]);var m=q,n=k.hK,D=n.BASE[a],o=k.vg,t=k.PZa,p=n.BASE.fl,r=l&&l.nWb?n.SUB.JCb:n.SUB.xN;l&&r.indexOf(a)!=-1&&(l=q);if(d){m=n[d].offset;D=n[d][a]||D;p=n[d].fl||p;o=q;t=k.Cd}else if(k.sSb&&n.ALT[a]&&Math.random()<0.5){m=n.ALT.offset;D=n.ALT[a]}k=y;if(l)if((r=d&&n.SUB[d])&&r[a]){t=l.PZa;m=r.offset;D=r[a]}else if(!d){o=l.vg;t=l.PZa;D=n.SUB.BASE[a]||
D;k=l.border}d=m&&m.y||0;if(this.xDb(a))return o?this.VVa(o.x,o.y):D?this.OVa(t,D,b,c,d):0;if(j&&p&&p[a]){o=p[a];o.end&&j.end<o.end.length?d=d+o.end[j.end]:o.start&&j.start<o.start.length?d=d+o.start[j.start]:o.loop&&(d=d+o.loop[j.start%o.loop.length])}k&&(f&&i!=-1&&n.SUB.BORDER[a])&&(D=n.SUB.BORDER[a][i]);return!D||D.length==0?0:this.OVa(t,D,b,c,d)},OVa:function(a,b,c,d,f){b=b.length>1&&this.Krb(c,d)?b[1]:b[0];return this.VVa(a.x+b[0],a.y+b[1]+(f||0))},VVa:function(a,b){return b*this.Lcb+a+1},Krb:function(a,
b){return(a+b)%2}})}});ig.J=h;
ig.N("impact.feature.height-map.height-map-config").O("impact.feature.height-map.height-map").K(function(){if(window.Ed){wm.cv["media/map/autumn-outside.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:5},blockedTypes:["CORNER_SW","CORNER_SE"]},terrains:[{ground:{x:0,y:1},cliff:{x:0,y:5},border:h}]};wm.cv["media/map/old-hideout.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:5},cliffAlt:q,blockedTypes:["CORNER_SW","CORNER_SE"]}};wm.cv["media/map/bergen-trail.png"]=
{tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},blockedTypes:[]},terrains:[{ground:{x:1,y:0},cliff:{x:6,y:4},border:h},{ground:{x:1,y:2},cliff:{x:12,y:4},border:h},{ground:{x:12,y:12},cliff:{x:12,y:8},border:h}]};wm.cv["media/map/heat-area.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},shadow:{x:6,y:6},blockedTypes:[],chasmOnly:h},terrains:[{ground:{x:11,y:0},cliff:{x:6,y:4},border:h},{ground:{x:1,y:0},
cliff:{x:12,y:4},border:h},{ground:{x:12,y:12},cliff:{x:12,y:8},border:h},{ground:{x:1,y:2},cliff:{x:18,y:4},border:h}]};wm.cv["media/map/cave.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},shadow:{x:6,y:4}},terrains:[{ground:{x:2,y:0},cliff:{x:12,y:4},border:y,shadow:{x:12,y:9}},{ground:{x:8,y:0},cliff:{x:12,y:4},border:y,shadow:{x:12,y:9}},{ground:{x:8,y:1},cliff:{x:18,y:4},border:y,shadow:{x:18,y:9}},{ground:{x:24,y:8},cliff:{x:24,y:4},border:y,
shadow:{x:24,y:9}}]};wm.cv["media/map/cold-dng.png"]={tileCountX:32,mappingType:"TYPE1",base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},shadow:{x:6,y:4}},terrains:[{mappingType:"TYPE2",ground:{x:12,y:0},cliff:{x:12,y:4},shadow:{x:17,y:4}},{baseTerrain:1,ground:{x:20,y:0},cliff:{x:22,y:4}}]};wm.cv["media/map/heat-dng.png"]={tileCountX:32,base:{mappingType:"TYPE2",ground:{x:0,y:0},cliff:{x:0,y:4},shadow:{x:5,y:4}},terrains:[{ground:{x:1,y:0},cliff:{x:10,y:4},border:h},
{ground:{x:9,y:0},cliff:{x:15,y:4},border:h},{ground:{x:19,y:2},cliff:{x:20,y:4},border:y},{ground:{x:26,y:7},cliff:{x:25,y:4},border:y,overrideWallBase:h}]};wm.cv["media/map/jungle.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},shadow:{x:6,y:6},blockedTypes:[],chasmOnly:h},terrains:[{ground:{x:0,y:1},cliff:{x:12,y:4},border:y},{ground:{x:6,y:0},cliff:{x:18,y:4},border:h},{ground:{x:12,y:12},cliff:{x:12,y:8},border:h},{mappingType:"TYPE1",ground:{x:7,
y:10},cliff:{x:6,y:4}},{baseTerrain:4,ground:{x:0,y:1},cliff:{x:24,y:4},border:y},{ground:{x:19,y:2},cliff:{x:24,y:2},border:y},{baseTerrain:4,ground:{x:19,y:2},cliff:{x:24,y:3},border:y}]};wm.cv["media/map/shockwave-dng.png"]={tileCountX:32,base:{mappingType:"TYPE2",ground:{x:0,y:0},cliff:{x:0,y:4},shadow:{x:5,y:4}},terrains:[{ground:{x:1,y:0},cliff:{x:10,y:4},border:h},{ground:{x:9,y:0},cliff:{x:15,y:4},border:h},{ground:{x:20,y:4},cliff:{x:20,y:4},border:y,overrideWallBase:h},{mappingType:"TYPE1",
ground:{x:25,y:0},cliff:{x:25,y:2},shadow:{x:24,y:36}},{ground:{x:3,y:2},cliff:{x:10,y:4},border:h,baseTerrain:0},{ground:{x:18,y:43},cliff:{x:18,y:38},baseTerrain:4}]};wm.cv["media/map/tree-inner.png"]={tileCountX:32,base:{mappingType:"TYPE2",ground:{x:0,y:0},cliff:{x:0,y:4},shadow:{x:5,y:4}},terrains:[{ground:{x:1,y:0},cliff:{x:10,y:4},border:h},{ground:{x:9,y:0},cliff:{x:15,y:4},border:h},{ground:{x:20,y:4},cliff:{x:20,y:4},border:y,overrideWallBase:h},{mappingType:"TYPE1",ground:{x:25,y:0},cliff:{x:25,
y:2},shadow:{x:24,y:36}},{ground:{x:3,y:2},cliff:{x:10,y:4},border:h,baseTerrain:0},{ground:{x:18,y:43},cliff:{x:18,y:38},baseTerrain:4}]};wm.cv["media/map/arid.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:4},cliffAlt:{x:0,y:10},blockedTypes:[]},terrains:[{ground:{x:1,y:0},cliff:{x:6,y:4},border:h},{ground:{x:3,y:2},cliff:{x:12,y:4},border:h},{ground:{x:12,y:12},cliff:{x:12,y:8},border:h},{mappingType:"TYPE2",ground:{x:11,y:0},cliff:{x:0,y:12},wallTerrainPrio:1},{ground:{x:1,
y:21},cliff:{x:0,y:20},baseTerrain:4,wallTerrainPrio:1}]};wm.cv["media/map/arid-interior.png"]={tileCountX:32,base:{mappingType:"TYPE2",ground:{x:0,y:0},cliff:{x:0,y:4},shadow:{x:5,y:4}},terrains:[{ground:{x:0,y:1},cliff:{x:10,y:4},border:h},{mappingType:"TYPE2",ground:{x:1,y:0},cliff:{x:15,y:4},shadow:{x:20,y:4},border:y},{ground:{x:11,y:0},cliff:{x:25,y:4},border:h,baseTerrain:2}]};wm.cv["media/map/forest.png"]={tileCountX:32,base:{mappingType:"TYPE1",ground:{x:0,y:0},cliff:{x:0,y:5},blockedTypes:[]},
terrains:[{ground:{x:6,y:10},cliff:{x:6,y:6},border:h},{mappingType:"TYPE1",ground:{x:2,y:12},cliff:{x:0,y:11},blockedTypes:[],wallTerrainPrio:1}]};wm.cv["media/map/rhombus-outside.png"]={tileCountX:32,base:{mappingType:"TYPE2",ground:{x:1,y:5},cliff:{x:0,y:4},blockedTypes:[],wallTerrainPrio:1},terrains:[{ground:{x:1,y:5},cliff:{x:5,y:4},blockedTypes:[],wallTerrainPrio:0.5},{ground:{x:11,y:20},cliff:{x:10,y:19},blockedTypes:[],wallTerrainPrio:0.5},{mappingType:"TYPE1",ground:{x:6,y:32},cliff:{x:0,
y:32},blockedTypes:[]},{ground:{x:6,y:32},cliff:{x:8,y:21},blockedTypes:[],wallTerrainPrio:1,overrideWallBase:h},{ground:{x:6,y:35},cliff:{x:6,y:31},blockedTypes:[],baseTerrain:3}]}}});ig.J=h;ig.N("impact.feature.height-map.plug-in").O("impact.feature.height-map.height-map","impact.feature.height-map.height-map-config").K(J());ig.J=h;
ig.N("impact.feature.navigation.nav-map").O("impact.base.map","impact.base.image","game.config").K(function(){function a(a,b,c,d,f,i,j){var k=0,l=0;b.min.x-b.max.x?l=b.min.y*f+d<c.mq.y?i:-i:k=b.min.x*f<c.mq.x?i:-i;ig.pL.vxb(a,b.min.x*f+k+Math.abs(l),b.min.y*f+l+Math.abs(k),b.max.x*f+k-Math.abs(l),b.max.y*f+l-Math.abs(k),j||2)}function b(a,b,c,d){var f,j,k;if(d){f=d.uIa;j=d.mIa+1;k=d.vIa;d=d.nIa+1}else{f=0;j=a.width;k=0;d=a.height}for(;k<d;++k)for(var l=f;l<j;++l){var m=i(a,b,l,k);if(m&&m<F&&!a.qY(l,
k)){var m=a,n=m.Yl.length+1;m.BEa.length>0&&(n=m.BEa.pop());n>=2048&&e(Error("Exceeded NavMap id range of 2048! Simplify Nav Map of height "+m.kf/16));m=n;n=new ig.vlb(m,a,b,l,k,c);a.Yl[m-1]=n}}}function c(a,b){if(a.Rcb!=b){a.Rcb=b;a.mOa=q;a.lOa=q;a.nOa=y;a.pOa=-1;a.oOa=-1}}function d(a,b){a.O2=y;for(var c=a.Xg.length;c--;)if(a.Xg[c].Ce==b){a.Xg.splice(c,1);return}for(c=a.XW.length;c--;)if(a.XW[c].Ce==b){a.XW.splice(c,1);break}}function f(a,b,c,d,i){if(a.qY(c,d)==b.id){a.eMa(c,d,0);a.Rvb(c,d);i.uIa=
Math.min(i.uIa,c);i.mIa=Math.max(i.mIa,c);i.vIa=Math.min(i.vIa,d);i.nIa=Math.max(i.nIa,d);for(var j=0;j<C.length;++j){var k=C[j];f(a,b,c+k.x,d+k.y,i)}}}function i(a,b,c,d){var f=a.gAb(c,d);if(f<F||f>B)if(ig.sP.n5a(b.dS(c,d))||a.lda(c,d,ig.A1.yPa))return 0;return f}function j(a,b,c,d){var f=i(a,b,c,d);f!=A.PQa&&(!a.d2a(c,d)&&!a.lda(c,d,ig.A1.Cja)&&b&&b.L4a(c,d))&&(f=f+x);return f}function k(a,b,c){a.Cp=[0,0];if(c)if(a.min.x!=a.max.x){if(!j(b,c,a.min.x-1,a.min.y-1)||!j(b,c,a.min.x-1,a.min.y))a.Cp[0]=
1;if(!j(b,c,a.max.x,a.min.y-1)||!j(b,c,a.max.x,a.min.y))a.Cp[1]=1}else{if(!j(b,c,a.min.x-1,a.min.y-1)||!j(b,c,a.min.x,a.min.y-1))a.Cp[0]=1;if(!j(b,c,a.min.x-1,a.max.y)||!j(b,c,a.min.x,a.max.y))a.Cp[1]=1}}function l(a,b,c,d,f,i,j,l){for(var n=0;n<c.length;++n){var o=c[n],t=0,p=0,x=0,r=0,C=0;if(o.min.x-o.max.x){x=1;C=o.max.x-o.min.x;p=a.qY(o.min.x,o.min.y)==b.id?-1:0}else{r=1;C=o.max.y-o.min.y;t=a.qY(o.min.x,o.min.y)==b.id?-1:0}for(var A=q,v=o.min.x,u=o.min.y,F=0,B=o.min.x,K=o.min.y;F<C;++F,B=B+x,K=
K+r){for(var I=q,o=0;!I&&o<d.length;++o)I=d[o].dFa(B+t,K+p+f[o]);if(I!=A){if(A){o={min:{x:v,y:u},max:{x:B,y:K}};k(o,a);m(a,b,A,o,i,j,l)}A=I;v=B;u=K}}if(A){o={min:{x:v,y:u},max:{x:B,y:K}};k(o,a);m(a,b,A,o,i,j,l)}}}function m(a,b,c,d,f,i,j){if(j&&(c.Zh.up.length>0||c.Zh.upStairs.length>0))c.O2=y;for(j=b.Xg.length;j--;){var k=b.Xg[j];if(k.Ce==c&&k.Hk.type==f){k.Hk.Zh.push(d);i&&k.Hk.reverse&&k.Hk.reverse.Zh.push(n(a,b,c,d));return}}f=new ig.ika(f);f.Zh.push(d);b.Xg.push({Ce:c,Hk:f});c.XW.push({Ce:b,
Hk:f});if(i){i=new ig.ika(i);i.Zh.push(n(a,b,c,d));f.reverse=i;c.Xg.push({Ce:b,Hk:i});b.XW.push({Ce:c,Hk:i})}}function n(a,b,c,d){d=ig.copy(d);a=(c.height-b.height)/a.Bb;d.min.y=d.min.y-a;d.max.y=d.max.y-a;return d}var o=["red","blue","green","yellow","pink","orange","violet","brown"],t=Vec2.create();Vec2.create();var p=Vec2.create(),r={fJ:0,map:31},u={fJ:5,map:1},w={fJ:8,map:15},z={fJ:12,map:2047};ig.A1={yPa:{fJ:23,map:7},Cja:{fJ:26,map:7}};var v=[];ig.$j.Navigation=ig.Q9.extend({Yl:[],BEa:[],zN:y,
t:new ig.u({faa:"Navigation",W$:ig.Co.DISABLE_LAYER_SIZE,maa:h,laa:h,kaa:ig.Co.DISABLE_LAYER_DISTANCE,X$:ig.Co.DEFAULT_TILE_SIZE,yza:"media/map/pathmap-tiles.png",aaa:"impact/feature/navigation/editors/layer-icon.png",Xya:0.6,Zya:0,Yya:0}),f:function(a,b){this.parent(a,b)},rEb:function(a){b(this,ig.r.rb[a].collision,this.kf);this.zN=h},iJb:function(a,c,d,f,i){if(this.zN){for(var j={uIa:c,mIa:d,vIa:f,nIa:i},k=f-1;k<=i+1;++k)for(var l=c-1;l<=d+1;++l)if(!(l==c-1||l==d+1)||!(k==f-1||k==i+1)){var m=this.dFa(l,
k);if(m){m.ye(this,l,k,j);this.Yl[m.id-1]=q;this.BEa.push(m.id)}}b(this,ig.r.rb[a].collision,this.kf,j)}},Nba:function(a){for(var b=a,c=[],d=[],f=ig.r.rb[a].height;--b>=0;)if(ig.r.rb[b].navigation){c.push(ig.r.rb[b].navigation);d.push((f-ig.r.rb[b].height)/this.Bb)}for(var i=a,a=[],b=[];++i<ig.r.Jl;)if(ig.r.rb[i].navigation){a.push(ig.r.rb[i].navigation);b.push((f-ig.r.rb[i].height)/this.Bb)}for(f=v.length=0;f<this.Yl.length;++f)if((i=this.Yl[f])&&!i.ll&&!i.O2){i.O2=h;c.length&&l(this,i,i.Zh.down,
c,d,K.JV,K.Ska,h);if(a.length){l(this,i,i.Zh.up,a,b,K.c2);l(this,i,i.Zh.upStairs,a,b,K.kUa,K.CRa)}for(var j=i,k=c,m=d,n=0;n<j.Xg.length;++n){var o=j.Xg[n],t=o.Ce;if(t.ll&&o.Hk.type==K.Txa){if(!t.O2){t.O2=h;k.length&&l(this,t,t.Zh.down,k,m,K.JV)}for(var t=o.Ce.Xg,p=0;p<t.length;++p){var x=t[p],r=x.Hk.type;if(!(r==K.Ska||r==K.c2)&&x.Ce!=j&&!x.Ce.ll){for(var r=j,C=r.Xg,A=C.length,u=q;A--;)if(C[A].Ce==x.Ce){u=C[A];break}if(!(u&&u.Hk.type!=K.WP)){for(var F=C=g,B=A=g,I=o.Hk.Zh,w=x.Hk.Zh,z=0;z<I.length;++z)for(var za=
Vec2.eb(I[z].min,I[z].max),ha=0;ha<w.length;++ha){var ka=Vec2.eb(w[ha].min,w[ha].max),ka=Math.min(ka,za),va=Line2.gxb(I[z].min,I[z].max,w[ha].min,w[ha].max);if(C==g||ka>F||ka==F&&va<C){C=va;F=ka;A=I[z];B=w[ha]}}C=C*this.Bb;if(u){if(u.Hk.NS.qHa>C){u.Hk.Zh=[A];u.Hk.NS.qHa=C}}else{u=new ig.ika(K.WP);u.Zh.push(A);u.NS={qHa:C,E_a:B};u={Ce:x.Ce,Hk:u};r.Xg.push(u)}}}}}}v.push(i);for(j=i.Xg.length;j--;){k=i.Xg[j].Hk;m=k.Ria;n=k.Qia;o=k.NS?[k.NS.E_a]:k.Zh;t=o.length;p=0;r=h;for(x=0;x<t;++x){p=Math.max(p,Vec2.eb(o[x].min,
o[x].max)*this.Bb);if(!o[x].Cp[0]||!o[x].Cp[1])p=Math.max(p,64);if(r){r=y;Vec2.assign(m,o[x].min);Vec2.assign(n,o[x].max)}else{Vec2.min(m,o[x].min);Vec2.max(n,o[x].max)}}Vec2.Bk(m,this.Bb);Vec2.Bk(n,this.Bb);k.iIa=p;if(k.reverse){k.reverse.iIa=p;Vec2.assign(k.reverse.Ria,m);Vec2.assign(k.reverse.Qia,n)}}}},nb:function(b){ig.i.context.font="bold 8px Arial, sans-serif";ig.i.context.globalAlpha=1;ig.i.context.save();for(var c=0;c<this.Yl.length;++c){var d=this.Yl[c];if(d){for(var f=o[d.id%8],i=0;i<d.Xg.length;++i)if(!d.Xg[i].Ce.ll){for(var j=
d.Xg[i].Hk.Zh,k=0;k<j.length;++k)a(f,j[k],d,b,this.Bb,1);j=Vec2.an(d.Xg[i].Hk.Ria,d.Xg[i].Hk.Qia,0.5,p);k=Vec2.an(j,d.mq,0.75,t);ig.pL.vxb(f,j.x,j.y,k.x,k.y-b*0.75,1)}for(i=0;i<d.Zh.block.length;++i)a("red",d.Zh.block[i],d,b,this.Bb,-2,2);for(i=0;i<d.Zh.airBlock.length;++i)a("blue",d.Zh.airBlock[i],d,b,this.Bb,-2,2);for(i=0;i<d.Zh.down.length;++i)a("white",d.Zh.down[i],d,b,this.Bb,-2,2);for(i=0;i<d.Zh.up.length;++i)a("white",d.Zh.up[i],d,b,this.Bb,-2,2);for(i=0;i<d.Zh.upStairs.length;++i)a("yellow",
d.Zh.upStairs[i],d,b,this.Bb,-2,2);ig.pL.fillRect(d.ll?"white":"black",d.mq.x-8,d.mq.y-b-4,12,7);ig.pL.RSb(c+1<10?"0"+(c+1):c+1,f,d.mq.x-6,d.mq.y-b+2)}}ig.i.context.restore()},Z$:function(a,b,c){return this.dS(a,b)>>c.fJ&c.map},sAa:function(a,b,c,d){c=(c&d.map)<<d.fJ;this.yO(a,b,this.dS(a,b)&~(d.map<<d.fJ)|c)},Xsb:function(a,b,c,d){c=c<<d.fJ;this.yO(a,b,this.dS(a,b)|c)},iRb:function(a,b,c,d){c=c<<d.fJ;this.yO(a,b,this.dS(a,b)&~c)},lda:function(a,b,c){return this.Z$(a,b,c)},H$a:function(a,b,c,d){this.sAa(a,
b,c,d)},MCb:function(a,b,c){return this.H$a(a,b,this.lda(a,b,c)+1,c)},Vwb:function(a,b,c){this.H$a(a,b,this.lda(a,b,c)-1,c)},gAb:function(a,b){return this.Z$(a,b,r)},d2a:function(a,b){return this.Z$(a,b,u)},dFa:function(a,b){var c=this.qY(a,b);return c&&this.Yl[c-1]},qY:function(a,b){return this.Z$(a,b,z)},eMa:function(a,b,c){return this.sAa(a,b,c,z)},hAb:function(a,b){return this.Z$(a,b,w)},rha:function(a,b,c){return this.Xsb(a,b,c,w)},Rvb:function(a,b){return this.sAa(a,b,0,w)},pG:function(a,b){a=
Math.floor(a/this.Bb);b=Math.floor(b/this.Bb);return this.dFa(a,b)}});ig.$j.Navigation.Hqa="navigation";var x=256,A={vRa:9,Sib:10,Rib:11,Tib:12,Uib:13,Tmb:14,Vmb:15,Umb:16,Wmb:17,Xmb:18,PQa:19},F=A.vRa,B=A.PQa;ig.vlb=ig.Ca.extend({id:0,height:0,min:Vec2.create(),max:Vec2.create(),mq:Vec2.create(),Xg:[],XW:[],ll:y,O2:y,Zh:{north:[],east:[],south:[],west:[],down:[],up:[],upStairs:[],block:[],airBlock:[]},Rcb:0,mOa:q,Ocb:Vec2.create(),lOa:q,nOa:y,pOa:0,oOa:0,f:function(a,b,c,d,f,i){this.id=a;this.height=
i;Vec2.Oa(this.min,d*b.Bb,f*b.Bb+i);Vec2.Oa(this.max,(d+1)*b.Bb,(f+1)*b.Bb+i);this.ll=!b.d2a(d,f)&&!b.lda(d,f,ig.A1.Cja)&&c&&c.L4a(d,f);a=d;I.length=0;b.eMa(a,f,this.id);for(I.push({x:a,y:f});I.length>0;){f=I.pop();a=f.x;f=f.y;Vec2.UEb(this.min,a*b.Bb,f*b.Bb+i);Vec2.PEb(this.max,(a+1)*b.Bb,(f+1)*b.Bb+i);(d=j(b,c,a,f))||e(Error("Tried to expand to field with 0 source value"));for(var l,m=0;m<C.length;++m){var n=C[m];if(!(b.hAb(a,f)&n.By)){var o=a+n.x,t=f+n.y;l=j(b,c,o,t);if(d==l){b.rha(a,f,n.By);if(!b.qY(o,
t)){b.eMa(o,t,this.id);I.push({x:o,y:t})}}else{var o=b,p=c,r=a,t=f,v=d,u=l,w=o.qY(r+n.x,t+n.y);l=u&x;if(w)a:{for(var p=o.Yl[w-1],w=r+(n.x>0?1:0)+(n.y?0.5:0),v=t+(n.y>0?1:0)+(n.x?0.5:0),z=p.Zh[n.aoa],la=z.length;la--;){u=z[la];if(v>=u.min.y&&v<=u.max.y&&w>=u.min.x&&w<=u.max.x){l&&!this.ll&&this.Zh.down.push(u);this.Zh[n.zca].push(u);if(n.x)for(l=u.min.y;l<u.max.y;++l)o.rha(r,l,n.By);else for(l=u.min.x;l<u.max.x;++l)o.rha(l,t,n.By);for(o=this.Xg.length;o--;)if(this.Xg[o].Ce==p){this.Xg[o].Hk.Zh.push(u);
break a}o=new ig.ika(K.Txa);o.Zh.push(u);this.Xg.push({Ce:p,Hk:o});p.Xg.push({Ce:this,Hk:o});break a}}e(Error("Didn't find any edge when something should have been found"))}else{z=r;for(w=t;j(o,p,z,w)==v&&j(o,p,z+n.x,w+n.y)==u;){o.rha(z,w,n.By);z=z+n.y;w=w+n.x}z=z-n.y;w=w-n.x;r=r-n.y;for(t=t-n.x;j(o,p,r,t)==v&&j(o,p,r+n.x,t+n.y)==u;){o.rha(r,t,n.By);r=r-n.y;t=t-n.x}r=r+n.y;t=t+n.x;v=Math.min(z,r)+(n.x>0?1:0);la=Math.min(w,t)+(n.y>0?1:0);r=Math.max(z,r)+(n.x>0?1:0)+(n.y?1:0);t=Math.max(w,t)+(n.y>0?
1:0)+(n.x?1:0);t={min:{x:v,y:la},max:{x:r,y:t}};k(t,o,p);l&&this.Zh.down.push(t);o=u%x;o==A.vRa||o==n.sva?this.ll||this.Zh.up.push(t):o==A.Tmb||o==n.yua?this.ll||this.Zh.upStairs.push(t):!o||o>=F&&o<=B?l&&!this.ll?this.Zh.airBlock.push(t):this.Zh.block.push(t):o&&this.Zh[n.zca].push(t)}}}}}Vec2.an(this.min,this.max,0.5,this.mq)},ye:function(a,b,c,i){for(var j=this.Xg.length;j--;)d(this.Xg[j].Ce,this);for(j=this.XW.length;j--;)d(this.XW[j].Ce,this);f(a,this,b,c,i)},XUb:function(a){c(this,a);return this.nOa},
ZWb:function(a,b){c(this,a);this.nOa=b},yTb:function(a){c(this,a);return this.mOa},xTb:function(a){c(this,a);return this.lOa},zTb:function(a){c(this,a);return this.Ocb},YWb:function(a,b,d,f){c(this,a);this.mOa=b;this.lOa=d;Vec2.assign(this.Ocb,f)},fAb:function(a){c(this,a);return this.pOa},dXb:function(a,b){c(this,a);this.pOa=b},KTb:function(a){c(this,a);return this.oOa},bXb:function(a,b){c(this,a);this.oOa=b},xUb:function(){return this.fAb()!=-1}});ig.ika=ig.Ca.extend({Zh:[],Ria:Vec2.create(),Qia:Vec2.create(),
iIa:0,type:0,NS:q,reverse:q,B0a:{},Gt:{zq:0,g:Vec2.create(),CEa:q,Moa:q,qOa:q,LJ:-1,fN:-1,closed:y},f:L("type"),rG:function(a){if(this.Gt.zq!=a){this.Gt.zq=a;Vec2.Oa(this.Gt.g,0,0);this.Gt.Moa=q;this.Gt.qOa=q;this.Gt.CEa=q;this.Gt.LJ=-1;this.Gt.fN=-1;this.Gt.closed=y}return this.Gt},bMa:function(a,b){this.B0a[a]=b;ig.navigation.BZa()}});var C=[{x:0,y:-1,By:1,zca:"north",aoa:"south",sva:A.Tib,yua:A.Wmb},{x:1,y:0,By:2,zca:"east",aoa:"west",sva:A.Uib,yua:A.Xmb},{x:0,y:1,By:4,zca:"south",aoa:"north",
sva:A.Sib,yua:A.Vmb},{x:-1,y:0,By:8,zca:"west",aoa:"east",sva:A.Rib,yua:A.Umb}],K=ig.cq={Txa:0,JV:1,c2:2,CRa:3,kUa:4,Ska:5,WP:6};ig.cq=K;var I=[];Vec2.create()});ig.J=h;
ig.N("impact.feature.navigation.navigation").O("impact.base.game").K(function(){function a(a,b,c,d,f,i){for(var j=y,k=ig.r.Hy(b+4);k>=0;--k){var l=ig.r.rb[k];if(l&&l.navigation&&!(l.height+16<a)){var m=Math.abs(l.height-b)<=4?ig.A1.Cja:ig.A1.yPa;if(!(i&&m==ig.A1.Cja)){for(var j=l.navigation,n=Math.floor(c.x/j.Bb),D=Math.floor((c.x+d.x-1)/j.Bb),o=Math.floor((c.y-l.height)/j.Bb),l=Math.floor((c.y+d.y-l.height-1)/j.Bb),t=o;t<=l;t++)for(var p=n;p<=D;p++)switch(f){case w.kRa:j.MCb(p,t,m);break;case w.hQa:j.Vwb(p,
t,m)}j.iJb(k,n,D,o,l);j=h}}}return j}function b(a,b){var c=i(ig.r.Hy((b!==g?b:a.z)||0)),d=c&&c.kf;return c&&c.pG(a.x,a.y-d)}function c(a,c,d,f){for(var j=ig.navigation.Bb,k=(d-1)/2,l=q,m=0;m<d;++m)for(var n=0;n<d;++n){var o=Vec2.assign(D,a);o.z=c!==g?c:a.z;o.x=(Math.floor(o.x/j-k+m)+0.5)*j;o.y=(Math.floor(o.y/j-k+n)+0.5)*j;if(f)a:{for(var t=ig.r.Hy(o.z||0);t>=0;){var p=i(t),x=p&&p.kf;if(p=p&&p.pG(o.x,o.y-x)){o=p;break a}t--}o=q}else o=b(o);if(!o||o.ll||l&&o.height!=l.height)return q;l=o}a.x=(Math.floor(a.x/
j-k)+d/2)*j;a.y=(Math.floor(a.y/j-k)+d/2)*j;return l}function d(a){var b=a.Jg?a.b.g.z:a.b.pc,b=b+8,c=ig.r.Hy(b),d=i(c);if(!d){c=ig.r.Hy(b+16);d=i(c);if(!d)return q}a.tb(R);b=d.kf;d=f(a,R,d,b);if(!d){var j=ig.r.rb[c+1]&&ig.r.rb[c+1].height;if(j&&j-a.b.g.z<a.b.g.z-b){c=c+1;d=i(c);if(!d)return q;b=ig.r.rb[c].height;d=f(a,R,d,b)}}return d}function f(a,b,c,d){var a=a.b,f;if((f=c.pG(b.x,b.y-d))&&!f.ll||(f=c.pG(a.g.x,a.g.y-d))&&!f.ll||(f=c.pG(a.g.x+a.size.x,a.g.y-d))&&!f.ll||(f=c.pG(a.g.x,a.g.y+a.size.y-
d))&&!f.ll||(f=c.pG(a.g.x+a.size.x,a.g.y+a.size.y-d))&&!f.ll||(f=c.pG(a.g.x-8,b.y-d))&&!f.ll||(f=c.pG(a.g.x+a.size.x+8,b.y-d))&&!f.ll||(f=c.pG(b.x,a.g.y-8-d))&&!f.ll)return f;return f=c.pG(b.x,a.g.y+a.size.y+8-d)}function i(a){for(;ig.r.rb[a]&&!ig.r.rb[a].navigation;)a--;return ig.r.rb[a]&&ig.r.rb[a].navigation}function j(a,b,c,d,f,i){if(!a||!b)return y;if(a==b)return h;if(a.height!=b.height||a.ll||b.ll)return y;var j=ig.Co.DEFAULT_TILE_SIZE;Vec2.assign(z,c);z.y=z.y-a.height;Vec2.Bk(z,1/j);Vec2.assign(v,
d);v.y=v.y-a.height;Vec2.Bk(v,1/j);i=(i||4)/j;Vec2.assign(x,z);for(var c=a,k=[];c&&c!=b;){var l;a:{l=c;for(var m=z,n=v,D=x,o=k,t=i,p=l.Xg.length,r=q;p--;){var E=l.Xg[p];if(o.indexOf(E.Ce)==-1&&!(E.Hk.type==ig.cq.c2||E.Hk.type==ig.cq.Ska||E.Hk.type==ig.cq.kUa))for(var C=E.Hk.Zh,u=0;u<C.length;++u){var H=C[u];if(Line2.B4a(H.min,H.max,m,n,t,D,H.Cp))if(E.Ce.ll||E.Hk.type==ig.cq.JV)r=E;else{l=E;break a}}}l=r}if(!l||l.ll||l.Hk.type==ig.cq.JV){if(!f)return y;Vec2.assign(A,x);Vec2.Bk(A,j);A.z=a.height;A.y=
A.y+a.height;ig.r.Ie.Il(F);return ig.r.trace(F,A.x-4,A.y-4,A.z+12,d.x-A.x,d.y-A.y,8,8,8,ig.ca.PROJECTILE)?y:h}k.push(c);c=l.Ce}return c==b}function k(a,b,c,d,f){if(a==b)return h;if(a.height!=b.height)return y;for(var f=f||0,i=ig.Co.DEFAULT_TILE_SIZE,j=a.Xg.length;j--;){var k=a.Xg[j];if(k.Ce==b){b=k.Hk.Zh;for(j=0;j<b.length;++j){k=b[j];Vec2.assign(z,k.min);Vec2.Bk(z,i);z.y=z.y+a.height;Vec2.assign(v,k.max);Vec2.Bk(v,i);v.y=v.y+a.height;if(Line2.B4a(z,v,c,d,f,q,k.Cp))return h}break}}return y}function l(a,
c,f,i){a.z=f.b.g.z;f.tb(a);var k=d(f);if(i.posOffset){i=i.posOffset;f=ig.qd.Wk(c.b,f.b,E);c=Vec3.assign(H,a);if(Math.abs(f.x)>Math.abs(f.y)){c.y=c.y+i.x;c.x=c.x+(f.x>0?i.y:-i.y)}else{c.x=c.x+i.x;c.y=c.y+(f.y>0?i.y:-i.y)}if((i=b(c))&&!i.ll&&(!k||k.height==i.height)&&j(k,i,a,c,y)){Vec3.assign(a,c);k=i}}return k}function m(a,b,c,d,f){var i;i=T=T%1E7+1;var j=[];if(!b||b.ll||!c)return{Yl:[]};if(b==c)return{Yl:[{Ce:b,J3:q}]};if(c.ll)return q;var k=Math.max(a.b.size.x,a.b.size.y);do{var l=q,m,n,D;if(j.length==
0){m=b;D=d;n=0}else{var l=j.pop(),o=l.rG(i);D=o.g;n=o.LJ;m=o.qOa;o.closed=h}if(m==c){a=i;d=[{Ce:c,J3:q}];f=l;i=y;for(j=0;c!=b;){k=f.rG(a);i=i||c.height!=b.height;c=k.Moa;f.NS&&j++;d.push({Ce:c,J3:f});f=k.CEa}return{Yl:d,eb:l.rG(a).fN,$Vb:i,dEb:j}}for(o=m.Xg.length;o--;){var t=m.Xg[o],p=t.Ce,t=t.Hk;if(!(l&&t==l)){var x=t.rG(i);if(!p.ll&&!(t.type!=ig.cq.WP&&t.iIa<k)&&(!(t.type==ig.cq.WP||t.type==ig.cq.c2)||a.nB))if(!a.b.rt||!(a.b.rt!=ig.hI.STRONG_FLIGHT&&t.type==ig.cq.JV))if((a.Gg.height||t.type!=ig.cq.Ska)&&
!(t.type==ig.cq.WP&&t.NS.qHa>1600)&&!ig.$Ra.Nb(t,a)){var r=t.type==ig.cq.WP?1.2:1,E=0;t.type==ig.cq.c2&&(E=E+100);Line2.Pma(U,t.Ria,t.Qia,m.height,1,D,f,0,0);var C=U,r=n+Vec2.eb(D,C)*r+(p.height>m.height?p.height-m.height:0)*2+E,E=x.LJ;if(!x.closed||!(r>=E||x.closed.Moa!=m))if(E==-1||r<E){E!=-1&&j.ye(t);x.Moa=m;x.qOa=p;x.CEa=l;x.LJ=r;Vec2.assign(x.g,C);p=r+Vec2.eb(C,f);x.fN=p;for(x=j.length;x&&j[x-1].rG(i).fN<p;)x--;j.splice(x,0,t)}}}}}while(j.length>0);return q}function n(a,b,c,d,f,i,j,k){Line2.Vpa(c.min,
c.max)?a.y=a.y+(c.min.y*f+d.height>b.y?j*(i.b.size.y+k):-j*(i.b.size.y+k)):a.x=a.x+(c.min.x*f>b.x?j*(i.b.size.x+k):-j*(i.b.size.x+k))}var o=Vec2.create(),t=Vec2.create(),p=Vec2.create(),r=Vec2.create(),u=Vec2.create();ig.z1={NEUTRAL:{Hna:[-1,-4,-1,-1,-4],start:0},PASSIVE:{Hna:[1,1,2,1,1,-3],start:0},GET_AWAY:{Hna:[-1,2,-3,4,-5,6],start:3},AGGRESSIVE:{Hna:[-2,3,-4,5,-6,7,-8,9,-10],start:-2}};ig.y1={RANDOM:function(a){Vec2.rotate(a,Math.random()*Math.PI*2)},BEHIND:J(),FRONT:function(a){Vec2.Lc(a)},
BEHIND_FACE:function(a,b){if(b){Vec2.assign(a,b.face);Vec2.Lc(a)}},FRONT_FACE:function(a,b){b&&Vec2.assign(a,b.face)}};ig.Xf.mK=y;ig.Lkb=ig.Uf.extend({Bb:ig.Co.DEFAULT_TILE_SIZE,wca:[],LBa:{},gT:0,empty:h,fea:[],f:function(){this.parent("Navigation")},j5a:function(a,b,c,f){var i=a.tb(o),k=b.tb(t);if(Vec2.eb(i,k)>c)return y;if(this.empty)return h;if(b.Jg)return y;a=d(a);b=d(b);return!a||!b?h:j(a,b,i,k,f,4)},Z4a:function(a,b){var c=a.tb(o),f=b.tb(t),i=d(a),j=d(b);return(c=m(a,i,j,c,f))&&c.Yl.length>
0?h:y},$Ub:function(a,b){var c=d(a),f=d(b);return k(c,f,a.tb(),b.tb())},jVb:function(a,c){var f=d(a);return k(f,b(c),a.tb(),c,a.b.size.x)},Uoa:function(a,c,f,i,k,l,m,n,D,p){var x,r=0,m=m||0.5,n=n||0;if(k){x=Vec2.assign(o,k);r=k.z;k=b(x,r)}else{x=i.tb(o);k=d(i);r=i.b.pc}for(var E=ig.navigation.Bb,C=E*1.5;l>=0;){var A=Vec2.sub(x,c,I);D&&D(A,i);Vec2.rotate(A,n*Math.PI*2);Vec2.length(A,l);for(var v=Math.ceil(l*Math.PI*2*m/C),u=Math.PI*2*m/v,H=1,F=0;v--;){var B=Vec2.add(x,A,t);B.x=(Math.floor(B.x/E)+0.5)*
E;B.y=(Math.floor(B.y/E)+0.5)*E;if(j(k,b(B,r),x,B,p,0))if(ig.r.sea(B.x-f.x/2,B.y-f.y/2,r,f.x,f.y,f.z,h))ig.Xf.mK&&ig.qy.tA(B.x,B.y,r,8,8,"violet",2);else{ig.Xf.mK&&ig.qy.tA(B.x,B.y,r,8,8,"blue",2);Vec3.Oa(a,B.x,B.y,r);return h}else ig.Xf.mK&&ig.qy.tA(B.x,B.y,r,8,8,"red",2);F=F+u;H=H*1;Vec2.rotate(A,F*H)}l=l-C}Vec3.Oa(a,x.x,x.y,r);return y},T1a:function(a,b,f,i,k){var k=k||ig.z1.NEUTRAL,l=b.b.g.z,m=b.b.size.x+8,n=b.tb(o),D=f.tb(t),x=d(b),E=Vec2.sub(n,D,r),f=Vec2.assign(u,f.b.V);Vec2.Ig(f)&&Vec2.assign(f,
E);var C=Math.PI*2/12;Vec2.w_(f);if(Vec2.ug(E,f)<0){Vec2.Lc(f);C=-C}k.start&&Vec2.rotate(f,C*k.start);E=ig.navigation.Bb;b=Math.ceil(Math.max(b.b.size.x,b.b.size.y)/E);Vec2.length(f,i);i=k.Hna;for(k=0;k<i.length+1;++k){var A=Vec2.add(k>=6?D:n,f,p);A.x=(Math.floor(A.x/E)+0.5)*E;A.y=(Math.floor(A.y/E)+0.5)*E;var v=c(A,l,b);ig.Xf.mK&&ig.qy.tA(A.x,A.y,l,8,8,"violet",2);if(j(x,v,n,A,y,m)){Vec3.Oa(a,A.x,A.y,l);return h}k<i.length&&Vec2.rotate(f,C*i[k])}return y},BZa:function(){this.LBa={}},Ktb:function(a,
b,c){a&&b&&(this.LBa[this.HVa(a,b,c)]=h)},pDb:function(a,b,c){return!a||!b?y:this.LBa[this.HVa(a,b,c)]},HVa:function(a,b,c){a=a.id+"|"+a.height+">"+b.id+"|"+b.height;b=Math.max(c.b.size.x,c.b.size.y);return a=a+("["+b+"|"+c.nB+"|"+c.b.rt+"|"+!!c.Gg.height+"]")},nN:function(a){return new ig.Kkb(a)},Ms:function(){this.fea.length=0},qx:function(){this.wca=[];this.empty=h;for(var a in ig.r.rb){var b=ig.r.rb[a];if(b.navigation){b.navigation.rEb(a);this.empty=y}}this.Nba()},Nba:function(){for(var a=ig.r.Jl;a--;){var b=
ig.r.rb[a];b.navigation&&b.navigation.Nba(a)}this.Cub();this.gT++;this.BZa()},eS:function(a){return new ig.Jkb(a)},bLa:function(a){this.fea.indexOf(a)==-1&&this.fea.push(a)},Cub:function(){for(var a=this.fea.length;a--;)this.fea[a].w6()},oFa:function(a,c,d){a=b(a);if((c=b(c))&&c.ll)for(i=c.Xg.length;i--;){var f=c.Xg[i];if(f.Ce!=a&&!f.Ce.ll){c=f.Ce;break}}if(a&&c)for(var i=a.Xg.length;i--;){f=a.Xg[i];if(!(d!==g&&f.Hk.type!=d)&&f.Ce==c)return f.Hk}}});ig.HL={XV:0,qxa:1,S9:2};ig.Jkb=ig.Ca.extend({Q:q,
g:Vec3.create(),size:Vec3.create(),iy:0,f:function(a,b){this.Q=a;this.iy=b||0;this.h0a()},update:function(a){this.x9a();this.iy=a||0;this.h0a()},h0a:function(){var b=this.Q.b;Vec3.assign(this.g,b.g);Vec3.assign(this.size,b.size);this.iy!=ig.HL.qxa&&a(this.g.z,this.g.z+this.size.z,this.g,this.size,w.kRa,this.iy==ig.HL.S9)&&ig.navigation.Nba()},x9a:function(){this.iy!=ig.HL.qxa&&a(this.g.z,this.g.z+this.size.z,this.g,this.size,w.hQa,this.iy==ig.HL.S9)&&ig.navigation.Nba()},remove:function(){this.x9a();
this.Q=q}});var w={kRa:0,hQa:1,HQb:2};ig.Vf(function(){return ig.navigation=new ig.Lkb});var z=Vec2.create(),v=Vec2.create(),x=Vec2.create(),A=Vec3.create(),F={},B=Vec2.create(),C=Vec2.create(),K=Vec2.create(),I=Vec2.create();Vec2.create();var G=Vec3.create(),D=Vec3.create();ig.Kkb=ig.Ca.extend({gT:0,Uc:q,wz:0,Ao:q,cl:Vec3.create(),Ata:Vec3.create(),u_:q,Wy:0,Ph:y,options:q,path:q,rx:-1,tWb:0,en:{Sf:Vec2.create(),ju:Vec2.create(),ni:y,height:0},wB:y,iO:y,mva:y,fL:-1,O_a:y,SXb:-1,aJ:Vec2.create(),
pM:Vec2.create(),iEa:y,Zp:Vec2.create(),ZO:0,TR:0,P8:0,AHa:Vec2.create(),f:L("Uc"),C0:function(a,b,c,d){this.Ao=a;a.tb(this.cl);this.Wy=b||0;this.options=c||{};this.Ph=d||y;this.iEa=!this.Ph;this.wz=this.Uc.b.jf;this.Uc.lu=y;this.k7()},E8:function(a,b,c){this.Ao=q;Vec3.assign(this.cl,a);this.Wy=b||0;this.Ph=c||y;this.wz=this.Uc.b.jf;this.Uc.lu=y;this.k7()},ZKa:function(){this.gT=-1},kbb:function(a,b,c,f,i,j,k,l){var m=d(a),n=this.Uc.tb(o),a=a.tb(t),D=Vec2.eb(n,a);j&&D<j&&(D=j);k&&D>k&&(D=k);this.MWa(m,
n,a,D,f,b-c,b+c,i,l)},ji:function(a,b,c){ig.navigation.T1a(G,this.Uc,a,b,c)?this.E8(G,0,y):this.tU(a,b,y)},tU:function(a,b,c){for(var f=d(a),i=this.Uc.tb(o),a=a.tb(t),j=b;j>0.5*b;){if(this.MWa(f,i,a,j,c))break;j=j-b/8}},Eta:function(a,b,f,i,k){var l=d(a);this.Uc.tb(o);var m=a.tb(t),n=ig.navigation.Bb,n=Math.ceil(Math.max(this.Uc.b.size.x,this.Uc.b.size.y)/n),a=Vec2.assign(I,a.face);Vec2.rotate(a,b*Math.PI*2);for(b=f;b<i;){Vec2.length(a,b);f=Vec2.add(m,a,G);f.z=this.Uc.b.g.z;var D=c(f,g,n,h);if(D&&
(!k||j(D,l,f,m,h))){f.z=D.height;this.E8(f,this.Uc.b.size.x/2,y);if(this.path)return h}b=b+16}return y},MWa:function(a,b,d,f,i,k,l,m,n){if(!a)return y;var D=i?a.height:this.Uc.b.g.z,o=ig.navigation.Bb,t=Vec2.sub(b,d,I);Vec2.length(I,f);var p=Math.random()>0.5?1:-1,x=0,f=32/(Math.PI*2*f),E=Math.ceil(1/f),p=Vec2.BYa(t,this.AHa)?1:-1;if(k){x=f*(k/32);Vec2.rotate(t,Math.PI*2*x*-p);x=m?f:x*2}o=Math.ceil(Math.max(this.Uc.b.size.x,this.Uc.b.size.y)/o);if(l){E=Math.ceil((l-(k||0))/32*2).Rb(1,E);m&&(E=Math.ceil(E/
2))}for(k=q;E--;){l=Vec2.add(d,t,G);l.z=D;var r=c(l,g,o,h);if(r&&(!i||j(r,a,l,d,h))){k=l;k.z=r.height;this.E8(k,this.Uc.b.size.x/2,n||y);if(this.path){ig.Xf.mK&&ig.qy.tA(l.x,l.y,l.z,8,8,"blue",2);Vec2.assign(this.AHa,k);Vec2.sub(this.AHa,b);return h}ig.Xf.mK&&ig.qy.tA(l.x,l.y,l.z,8,8,"green",2)}else ig.Xf.mK&&ig.qy.tA(l.x,l.y,l.z,8,8,r?"orange":"red",2);if(!m){x=x+f;p=p*-1}Vec2.rotate(t,Math.PI*2*x*-p)}return y},ida:function(){return this.path&&this.path.eb||0},QTb:function(){return this.path&&this.path.dEb||
0},YUb:function(){return!!this.path},k7:function(a,c){this.gT=ig.navigation.gT;this.u_=q;var f=d(this.Uc),i,j;if(a){i=a;Vec3.assign(this.cl,c);j=y}else{i=this.Ao?l(this.cl,this.Uc,this.Ao,this.options):b(this.cl);j=this.Ao&&this.Ao.Jg}this.rx=-1;if(j||ig.navigation.pDb(f,i,this.Uc))this.path=q;else{this.Uc.tb(R);(this.path=m(this.Uc,f,i,R,this.cl))||ig.navigation.Ktb(f,i,this.Uc)}this.path?this.TR=0:this.TR++;this.wB=0;this.iO=y;this.fL=-1;this.en.ni=y;this.P8=0;this.Uc.zM();this.Uc.lu=y;Vec2.Oa(this.aJ,
0,0);Vec2.Oa(this.pM,0,0)},nea:function(){this.Uc.b.jf=this.wz;this.Uc.Gg.minHeight=0;this.Uc.lu=y},I4a:function(){var a=d(this.Uc);return a&&!a.ll&&(!this.path.Yl[this.rx]||a!=this.path.Yl[this.rx].Ce)&&(!this.path.Yl[this.rx-1]||a!=this.path.Yl[this.rx-1].Ce)&&(!this.path.Yl[this.rx+1]||a!=this.path.Yl[this.rx+1].Ce)?h:y},nx:function(){var a=!this.Uc.Jg&&(this.Uc.b.yd.height||this.Uc.b.g.z==this.Uc.b.pc),c=this.gT!=ig.navigation.gT;if(!c&&a&&this.path&&this.rx!=-1&&!this.iO)if(this.I4a()){this.P8=
this.P8+ig.i.ja;this.P8>=0.3&&(c=h)}else this.P8=0;else this.P8=0;if(c&&!this.Ao){Vec3.assign(this.Ata,this.cl);this.u_=b(this.cl)}if(this.Ao&&!this.Ao.Jg){var f=l(G,this.Uc,this.Ao,this.options);if(f&&!f.ll){Vec3.assign(this.Ata,G);this.u_=f}}if(this.u_&&a){Vec3.assign(this.cl,this.Ata);(c||!this.path||this.path.Yl.length==0||this.path.Yl[0].Ce!=this.u_)&&this.k7(this.u_,this.Ata);this.u_=q}if(this.Uc.b.Zo>0.5)if(this.wB&&!this.mva){this.mva=h;this.wB=0}else if(this.fL==-1){Vec2.Oa(this.aJ,0,0);
Vec2.Oa(this.pM,0,0);ig.navigation.wca.ye(this.Uc);this.Uc.lu=h;this.O_a=y;this.fL=0.3;Vec2.rotate(this.Zp,(Math.random()-0.5)*Math.PI);this.Uc.b.Zo=0}else this.k7();if(this.fL>0){this.fL=this.fL-ig.i.ja;if(this.fL<0){this.fL=0;this.Uc.lu=y}this.O_a&&this.fL<0.5?Vec2.Oa(this.Uc.b.wb,0,0):Vec2.assign(this.Uc.b.wb,this.Zp);return y}this.Uc.tb(R);if(Vec2.Ig(this.aJ)){ig.navigation.wca.ye(this.Uc);if(!this.path)return h;if(this.iO&&this.Ao&&this.rx==1&&d(this.Uc)==this.path.Yl[1].Ce&&!k(this.path.Yl[1].Ce,
this.path.Yl[0].Ce,R,this.cl,this.Uc.b.size.x))this.iO=y;this.iO||this.RJb();if(this.iO){Vec2.assign(this.Zp,this.cl);Vec2.sub(this.Zp,R);this.ZO=Vec2.length(this.Zp);if(this.ZO<=Math.max(this.Ph?2:8,this.Wy+(this.iEa?16:0))){Vec2.Oa(this.Zp,0,0);this.Uc.Jg&&Vec2.Oa(this.Uc.b.V,0,0);Vec2.ZO=0;this.Uc.b.jf=this.wz;this.Uc.Gg.minHeight=0;Vec2.Oa(this.Uc.b.wb,0,0);return!this.Uc.Jg}if(this.Ph&&this.Uc.b.Ch*this.Uc.b.jf>this.ZO*10)this.Uc.b.jf=this.ZO/this.Uc.b.Ch*10}this.iEa=y;this.Oub();Vec2.assign(this.Uc.b.wb,
this.Zp);return y}Vec2.assign(this.Uc.b.wb,this.aJ);Vec2.sub(this.Uc.b.wb,R);if(Vec2.length(this.Uc.b.wb)<4)if(Vec2.Ig(this.pM)){Vec2.Oa(this.aJ,0,0);this.k7()}else{Vec2.assign(this.aJ,this.pM);Vec2.Oa(this.pM,0,0)}},Oub:function(){if(this.Uc.b.type!=ig.ca.IGNORE){if(!this.Ao){ig.r.Ie.Il(F);Vec2.assign(B,this.Zp);this.ZO>48&&Vec2.length(B,48);var a=[],b=this.Uc.b;if(ig.r.Uq(F,this.Uc,B.x,B.y,0,0,0,ig.ca.BLOCK,a)){var c;Vec2.normalize(B);if(Math.abs(Vec2.ug(B,F.dir))<0.8||a.length==0)return;for(var d=
a.length;d--;){var f=a[d].Q;if(f instanceof ig.Jc&&ig.navigation.wca.indexOf(f)==-1){if(Vec2.Ig(f.b.wb)){c=f;break}Vec2.normalize(f.b.wb,I)}}if(!c)return;a=c.b;c.tb(C);this.Uc.tb(K);Vec2.sub(C,K,I);if(Vec2.ug(I,B)<=0)return;Vec2.sub(C,this.cl,I);if(Math.abs(I.x)<a.size.x/2+b.size.x/2&&Math.abs(I.y)<a.size.y/2+b.size.y/2)return;c=(a.size.x+4)/2;b=(b.size.x+4)/2;a=Vec2.assign(X,B);Vec2.normalize(a);d=Vec2.assign(W,B);Vec2.hz(d);Vec2.length(d,c+b);f=Vec2.sub(C,K,I);Vec2.ug(d,f)>0&&Vec2.Lc(d);Vec2.Tm(C,
a,-c-b);Vec2.add(C,d);Vec2.assign(K,C);Vec2.Tm(K,d,-2);Vec2.assign(B,a);Vec2.length(B,c*2+b*2);Vec2.sub(C,R,I);ig.r.Ie.Il(F);if(!ig.r.Uq(F,this.Uc,I.x,I.y,0,0,0,q)){Vec2.sub(this.cl,C,X);Vec2.length(X)<Vec2.length(B)&&Vec2.assign(B,X);ig.r.Ie.Il(F);if(!ig.r.Uq(F,this.Uc,B.x,B.y,I.x,I.y,0,q)){Vec2.assign(this.aJ,C);Vec2.assign(this.pM,C);Vec2.add(this.pM,B)}}if(Vec2.Ig(this.aJ)){Vec2.sub(K,R,I);F.Ne=1;if(!ig.r.Uq(F,this.Uc,I.x,I.y,0,0,0,q)){Vec2.sub(this.cl,K,X);Vec2.length(X)<Vec2.length(B)&&Vec2.assign(B,
X);F.Ne=1;if(!ig.r.Uq(F,this.Uc,B.x,B.y,I.x,I.y,0,q)){Vec2.assign(this.aJ,K);Vec2.assign(this.pM,K);Vec2.add(this.pM,B)}}}}}Vec2.Ig(this.aJ)||ig.navigation.wca.push(this.Uc)}},RJb:function(){if(this.path.Yl.length<=1)this.iO=h;else{if(this.rx==-1){this.rx=this.path.Yl.length-1;this.wB=0;this.mva=y;this.fL=-1;this.q$a()}if(!this.en.ni&&this.rx==1&&k(this.path.Yl[1].Ce,this.path.Yl[0].Ce,R,this.cl,this.Uc.b.size.x)){this.Uc.b.jf=this.wz;this.iO=h}else{Vec2.assign(this.Zp,this.wB?this.en.ju:this.en.Sf);
Vec2.sub(this.Zp,R);this.ZO=Vec2.length(this.Zp);this.Uc.b.jf=this.en.ni&&this.wB?1:this.wz;if(this.Uc.Gg.height)this.Uc.Gg.minHeight=this.en.height;if(this.ZO<8)if(this.en.ni&&!this.wB&&this.Uc.Jg){Vec2.sub(this.Zp,0,0);Vec2.Oa(this.Uc.b.V,0,0);this.ZO=0}else{this.wB=this.wB?0:1;if(!this.wB){this.rx--;if(this.rx==0){this.Uc.b.jf=this.wz;this.iO=h;this.en.ni=y}else{this.mva=y;this.q$a()}}}else this.en.ni&&(this.wB&&!this.Uc.Jg&&this.I4a())&&this.k7()}}},q$a:function(){var a=this.en,b=this.path.Yl,
c=this.rx,d=this.Uc,f=this.cl,i=b[c].Ce,j=b[c].J3,k=j.Zh,l=ig.navigation.Bb,m=d.b.size.x/2;j.type==ig.cq.WP&&(m=8);var D=m+O;d.tb(R);var o=f;a.height=i.height;if(c>1){o=b[c-1].J3;a.height=b[c-1].Ce.height;Line2.Pma(U,o.Ria,o.Qia,a.height,1,R,f,m,D);o=U}for(var t=k.length,p=g,x,b=-1,c=q,E=y;t--;){var r=k[t],C=E||!r.Cp[0]&&!r.Cp[1]?4:m;x=Line2.Pma(V,r.min,r.max,i.height,l,R,o,C,D,Z);if(x!==y&&(p===g||p>x)){p=x;c=r;b=x==0&&!Z.dwb?-1:Z.Byb<0.5?0:1;n(V,i.mq,r,i,l,d,-0.5,ba*2);Vec2.assign(a.Sf,V);if(j.type!=
ig.cq.WP){a.ni=y;n(V,i.mq,r,i,l,d,1,ba*2+(j.type==ig.cq.JV?16:0))}else{a.ni=h;x=j.NS.E_a;Line2.Pma(V,x.min,x.max,i.height,l,R,f,C,D);n(V,a.Sf,x,i,l,d,0.5,ba*2)}Vec2.assign(a.ju,V)}if(!t&&!c&&!E){E=h;t=k.length}}(f=j.type==ig.cq.Txa||j.type==ig.cq.JV||j.type==ig.cq.CRa)&&b!=-1&&c.Cp[b]&&(f=y);if(f){i=Vec2.an(a.Sf,a.ju,0.5,W);o=Vec2.assign(X,o);Vec2.sub(o,i);i=Vec2.sub(i,R);Vec2.Qb(i,o)>Math.PI*0.4&&(f=y)}!f&&!a.ni&&!d.Jg&&Vec2.eb(R,a.Sf)<4&&(f=h);if(f){this.wB=2;Vec2.an(this.en.ju,this.en.Sf,0.5,this.en.ju);
if(ig.Xf.mK){a=this.en.ju;ig.qy.tA(a.x,a.y,this.Uc.b.g.z,this.Uc.b.size.x,this.Uc.b.size.y,"green",2)}}else{if(!this.en.ni||!this.Uc.Jg){Vec2.assign(Q,this.en.ju);Vec2.sub(Q,this.en.Sf);Vec2.assign(P,this.en.Sf);Vec2.sub(P,R);if(Vec2.ug(Q,P)<=0){Vec2.assign(Q,this.en.ju);Vec2.sub(Q,this.en.Sf);Vec2.normalize(Q);Vec2.assign(P,R);Vec2.sub(P,this.en.Sf);Vec2.Bk(Q,Vec2.ug(Q,P));Vec2.sub(P,Q);if(Vec2.length(P)<this.Uc.b.size.x)this.wB=1}}if(ig.Xf.mK){a=this.en.Sf;ig.qy.tA(a.x,a.y,this.Uc.b.g.z,this.Uc.b.size.x,
this.Uc.b.size.y,"yellow",2);a=this.en.ju;ig.qy.tA(a.x,a.y,this.Uc.b.g.z,this.Uc.b.size.x,this.Uc.b.size.y,"yellow",2)}}if(this.en.ni&&ig.Xf.mK){a=this.en.Sf;ig.qy.tA(a.x,a.y,this.Uc.b.g.z,this.Uc.b.size.x,this.Uc.b.size.y,"red",2);a=this.en.ju;ig.qy.tA(a.x,a.y,this.Uc.b.g.z,this.Uc.b.size.x,this.Uc.b.size.y,"blue",2)}}});var E=Vec2.create(),H=Vec3.create(),Q=Vec2.create(),P=Vec2.create(),U=Vec2.create(),T=0,V=Vec2.create(),R=Vec2.create(),W=Vec2.create(),X=Vec2.create(),Z={},O=0,ba=4;ig.$Ra={zBa:[],
Lg:function(a){this.zBa.push(a)},Nb:function(a,b){for(var c=this.zBa.length;c--;)if(this.zBa[c](a,b))return h;return y}}});ig.J=h;
ig.N("impact.feature.navigation.navigation-steps").O("impact.feature.navigation.navigation","impact.base.action","impact.base.event").K(function(){function a(a,b,c){if(!c)return h;if(a.Fa&&b.ib<=0&&!b.Jg){c.nea();return h}return c.nx()&&!a.zr}var b=Vec3.create(),c={ENEMY:function(a,b,c,d){if(b=b.Qd()){a.C0(b,c,g,d);return h}},PROXY_OWNER:function(a,b,c,d){if(b.pb){a.C0(b.pb,c,g,d);return h}},PROXY_SRC:function(a,b,c,d){if(b.Pq){a.C0(b.Pq,c,g,d);return h}},COLLAB_ENTITY:function(a,b,c,d){if(b.Dm&&
b.Dm.Q){a.C0(b.Dm.Q,c,g,d);return h}},COLLAB_POINT:function(a,b,c,d){if(b.Dm&&b.Dm.Gq){a.E8(b.Dm.Gq,c,d);return h}}};ig.la.NAVIGATE_TO_TARGET=ig.ta.extend({Fa:0,zr:y,eb:0,Lm:y,ZB:0,t:new ig.u({attributes:{Fa:{c:"Number",d:"Maximum time spent on navigation"},zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},eb:{c:"Number",d:"The maximum amount of distance to the target"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},ZB:{c:"String",d:"Type of target",
U:c},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"}}}),f:function(a){this.Fa=a.maxTime||0;this.eb=a.distance||0;this.zr=a.forceTime||y;this.Lm=a.planOnly||y;this.ZB=c[a.targetType]||c.ENEMY;this.Ph=a.precise||y},start:function(a){a.$a.path=q;var b=a.hf?a.hf.path:ig.navigation.nN(a);if(this.ZB(b,a,this.eb,this.Ph)){a.ib=a.ib+this.Fa;a.$a.path=b}},ya:function(b){return this.Lm?h:a(this,b,b.$a.path)}});var d={ENEMY:function(a,b,c,d){if(b=b.Qd()){a.tU(b,c,d);return h}},COLLAB_ENTITY:function(a,
b,c,d){if(b.Dm&&b.Dm.Q){a.tU(b.Dm.Q,c,d);return h}}};ig.la.NAVIGATE_ESCAPE_TARGET=ig.ta.extend({Fa:0,eb:0,Ot:y,Lm:y,ZB:0,t:new ig.u({attributes:{Fa:{c:"Number",d:"Maximum time spent on navigation"},zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},eb:{c:"Number",d:"The minimum amount of distance to the target"},Ot:{c:"Boolean",d:"True if after escape, entity should be able to throw at target"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},ZB:{c:"String",
d:"Type of target",U:d}}}),f:function(a){this.Fa=a.maxTime||0;this.zr=a.forceTime||y;this.eb=a.distance||0;this.Ot=a.throwing||y;this.Lm=a.planOnly||y;this.ZB=d[a.targetType]||d.ENEMY},start:function(a){a.$a.path=q;var b=a.hf?a.hf.path:ig.navigation.nN(a);if(this.ZB(b,a,this.eb,this.Ot)){a.ib=a.ib+this.Fa;a.$a.path=b}},ya:function(b){return this.Lm?h:a(this,b,b.$a.path)}});ig.la.NAVIGATE_SIDEWAYS_TARGET=ig.ta.extend({Fa:0,eb:0,fDa:0,Ot:y,Lm:y,t:new ig.u({attributes:{Fa:{c:"Number",d:"Maximum time spent on navigation"},
zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},eb:{c:"Number",d:"The minimum amount of distance to move"},fDa:{c:"Number",d:"The maximum amount of distance to move"},x5a:{c:"Boolean",d:"If true: always move close to face direction."},Ot:{c:"Boolean",d:"True if after sideway movement, entity should be able to throw at target"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},d1a:{c:"Number",d:"If defined always force this minimum distance to the target",
I:h},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"}}}),f:function(a){this.Fa=a.maxTime||0;this.zr=a.forceTime||y;this.eb=a.distance||0;this.fDa=a.distVariance||0;this.Ot=a.throwing||y;this.Lm=a.planOnly||y;this.x5a=a.keepDirection||y;this.d1a=a.forceMinTargetDistance||0;this.Oyb=a.forceMaxTargetDistance||0;this.Ph=a.precise||y},start:function(a){a.$a.path=q;var b=a.Qd();if(b){a.ib=a.ib+this.Fa;var c=a.hf?a.hf.path:ig.navigation.nN(a),b=a.Qd();c.kbb(b,this.eb,this.fDa,this.Ot,
this.x5a,this.d1a,this.Oyb,this.Ph);a.$a.path=c}},ya:function(b){return this.Lm?h:a(this,b,b.$a.path)}});ig.la.NAVIGATE_TO_ENTITY=ig.ta.extend({Q:q,Fa:0,eb:0,rGa:0,Lm:y,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to move to"},Fa:{c:"Number",d:"Maximum time spent on navigation"},zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},eb:{c:"Number",d:"The entity will move as close as to this distance "},rGa:{c:"Number",d:"The entity will not move if distance is below this value"},
Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"}}}),f:function(a){this.Q=a.entity;this.Fa=a.maxTime||0;this.zr=a.forceTime||y;this.eb=a.distance||0;this.rGa=a.ignoreBelow||0;this.Lm=a.planOnly||y;this.Ph=a.precise||y},start:function(a){var b=ig.Ja.rd(this.Q);a.$a.path=q;if(b&&!(a.h4(b)<this.rGa)){a.ib=a.ib+this.Fa;var c=a.hf?a.hf.path:ig.navigation.nN(a);c.C0(b,this.eb,g,this.Ph);a.$a.path=c}},ya:function(b){return this.Lm?
h:a(this,b,b.$a.path)}});ig.la.NAVIGATE_ESCAPE_ENTITY=ig.ta.extend({Q:q,Fa:0,eb:0,Ot:y,Lm:y,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to escape from"},Fa:{c:"Number",d:"Maximum time spent on navigation"},eb:{c:"Number",d:"The minimum amount of distance to the target"},Ot:{c:"Boolean",d:"True if after escape, entity should be able to throw at target"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"}}}),f:function(a){this.Q=a.entity;this.Fa=a.maxTime||0;this.eb=a.distance||
0;this.Ot=a.throwing||y;this.Lm=a.planOnly||y},start:function(a){var b=ig.Ja.rd(this.Q);a.$a.path=q;if(b){a.ib=a.ib+this.Fa;var c=a.hf?a.hf.path:ig.navigation.nN(a);c.tU(b,this.eb,this.Ot);a.$a.path=c}},ya:function(b){return this.Lm?h:a(this,b,b.$a.path)}});ig.la.NAVIGATE_DODGE=ig.ta.extend({Fa:0,eb:0,Lm:y,lDa:q,t:new ig.u({attributes:{Fa:{c:"Number",d:"Maximum time spent on navigation"},eb:{c:"Number",d:"The minimum amount of distance to the target"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},
lDa:{c:"String",d:"Type of dodging.",U:ig.z1}}}),f:function(a){this.Fa=a.maxTime||0;this.eb=a.distance||0;this.Lm=a.planOnly||y;this.lDa=ig.z1[a.dodgeType]||ig.z1[a.NEUTRAL]},start:function(a){var b=a.v0||a.Qd();a.$a.path=q;if(b){a.ib=a.ib+this.Fa;var c=a.hf?a.hf.path:ig.navigation.nN(a);c.ji(b,this.eb,this.lDa);a.$a.path=c}},ya:function(b){return this.Lm?h:a(this,b,b.$a.path)}});ig.la.NAVIGATE_TO_POINT=ig.ta.extend({target:h,Fa:0,eb:0,Ph:y,Lm:y,t:new ig.u({attributes:{target:{c:"Vec3",d:"Point to navigate to",
wC:h,dr:h,kq:h},Fa:{c:"Number",d:"Maximum time spent on navigation. If 0=keep executing until done."},eb:{c:"Number",d:"The maximum amount of distance to the target"},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"},Lm:{c:"Boolean",d:"If true, only plan navigation, but don't execute it"},Dcb:{c:"Boolean",d:"If navigation fails, teleport entity to target pos"}}}),f:function(a){assertContent(a,"target");this.target=a.target;this.Fa=a.maxTime||0;this.eb=a.distance||0;this.Ph=
a.precise||y;this.Lm=a.planOnly||y;this.Dcb=a.teleportOnFail||y},start:function(a){a.ib=a.ib+this.Fa;var c=ig.Xe.vq(this.target,a,b);if(c){var d=a.hf?a.hf.path:ig.navigation.nN(a);d.E8(c,this.eb,this.Ph);a.$a.path=d;a.Aha&&a.Aha(c)}else a.$a.path=q},ya:function(c){if(this.Lm)return h;var d=a(this,c,c.$a.path);if(this.Dcb&&c.hf.path.TR>0&&c&&c.XM&&c.Aha){d=ig.Xe.vq(this.target,c,b);c.Aha(d);c.XM(0,h);return h}return d}});ig.la.DO_NAVIGATION=ig.ta.extend({Fa:0,t:new ig.u({attributes:{Fa:{c:"Number",
d:"Maximum time spent on navigation"}}}),f:function(a){this.Fa=a.maxTime||0},start:function(a){a.ib=a.ib+this.Fa},ya:function(b){return!b.hf?h:a(this,b,b.hf.path)}});ig.la.CANCEL_IF_NAVIGATION_FAILED=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"Number",d:"Time to wait before canceling"}}}),f:function(a){this.time=a.time;if(this.time==g)this.time=0.5},start:function(a){a.ib=a.ib+this.time},ya:function(a){if(!a.hf||a.hf.path.TR==0)return h;if(a.ib>0)return y;a.Ei();return h}});ig.la.SET_ATTRIB_CLOSE_TARGET_POS=
ig.ta.extend({name:q,eb:0,iE:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"},iE:{c:"Number",d:"Determines where position is searched relative to target",U:ig.y1},eb:{c:"Number",d:"Preferred distance to target. Might end up being smaller"},Ij:{c:"Number",d:"How much to circle around preferred position. 1 = full circle",ab:0.7},RX:{c:"Number",d:"Additional rotation to preferred placement direction (relative to target)",I:h},Ot:{c:"Boolean",d:"True entity should be able to throw at target from found position"},
offset:{c:"Offset",d:"Offset to position",I:h}}}),f:function(a){this.name=a.name;this.iE=ig.y1[a.searchType]||ig.y1.RANDOM;this.eb=a.distance||32;this.Ij=a.centralAngle||0.7;this.RX=a.dirRotate||0;this.Ot=a.throwing||y;this.offset=a.offset||q},ya:function(a){var c=Vec3.create(),d=a.Qd();if(d){ig.navigation.Uoa(c,a.lc(ig.Pa.BOTTOM,b),a.b.size,d,q,this.eb,this.Ij,this.RX,this.iE,this.Ot);this.offset&&Vec3.add(c,this.offset);a.setAttribute(this.name,c)}return h}});ig.la.SET_ATTRIB_NAV_TARGET_POS=ig.ta.extend({name:q,
eb:0,iE:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attribute to set"}}}),f:function(a){this.name=a.name},ya:function(a){if(a.hf&&a.hf.path&&a.hf.path.cl){a.setAttribute(this.name,a.hf.path.cl);return h}}})});ig.J=h;ig.N("impact.feature.navigation.plug-in").O("impact.feature.navigation.nav-map","impact.feature.navigation.navigation","impact.feature.navigation.navigation-steps").K(J());ig.J=h;
ig.N("impact.feature.map-content.map-style").O("impact.base.game").K(function(){ig.GL={};ig.kc=ig.Uf.extend({currentStyle:q,GRb:h,f:function(){this.parent("MapStyle")},get:function(a){if(ig.GL[this.currentStyle]&&ig.GL[this.currentStyle][a])return ig.GL[this.currentStyle][a];if(ig.GL["default"])return ig.GL["default"][a]},PG:100,Ms:function(a){this.currentStyle=a.attributes&&a.attributes.mapStyle}});ig.kc.rc=function(a,b,c){ig.GL[a]||(ig.GL[a]={});ig.GL[a][b]=c};ig.Vf(function(){return ig.Rf=new ig.kc})});
ig.J=h;
ig.N("impact.feature.map-content.entities.hidden-block").O("impact.base.entity").K(function(){ig.wa.HiddenBlock=ig.Kc.extend({Pb:0,t:new ig.u({Dd:h,attributes:{shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf},$m:{c:"String",d:"Height-Shape of Block Entity",U:ig.rp},kf:{c:"Number"},Pb:{c:"String",d:"Terrain of prop",U:ig.hd,ok:h},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},Jj:{c:"String",d:"Default is BLOCK",I:h,U:ig.ca}},label:N(""),Uk:h,Kq:h,Lq:h,Sl:"rgba(0,255,255, 0.5)",kD:"rgba(0,120,120, 0.8)"}),
f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca[d.collType]||ig.ca.BLOCK;d.size||this.b.F(32,32,0);this.b.shape=ig.Tf[d.shape||"RECTANGLE"];this.b.$m=ig.rp[d.heightShape]||0;this.Pb=ig.hd[d.terrain]||q;this.b.size.z=d.zHeight||0}});ig.wa.HiddenSkyBlock=ig.Kc.extend({Pb:0,t:new ig.u({Dd:h,attributes:{shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},Jj:{c:"String",d:"Default is BLOCK",U:ig.ca,ab:"NPBLOCK"}},label:N(""),
Uk:h,Kq:h,Lq:h,Sl:"rgba(0,255,255, 0.9)",kD:"rgba(0,120,120, 0.8)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca[d.collType]||ig.ca.BLOCK;this.b.shape=ig.Tf[d.shape||"RECTANGLE"];d.size||this.b.F(32,32,0);if(!window.Ed){this.b.g.z=this.b.g.z-1E3;this.b.size.z=2E3}}})});ig.J=h;
ig.N("impact.feature.map-content.entities.door").O("impact.base.entity","impact.base.actor-entity","impact.feature.map-content.entities.hidden-block","impact.feature.base.entities.object-layer-view","impact.feature.effect.effect-sheet").K(function(){ig.uP={};ig.uP.DEFAULT={Ba:q,f_:0,size:{x:32,y:16,z:48}};var a={REGULAR:1,INTER_AREA:2};ig.lQa={NORMAL:new ig.ka("media/sound/puzzle/door-open.mp3"),STONE:new ig.ka("media/sound/environment/stone-door-small.mp3"),CLOTH:new ig.ka("media/sound/environment/cloth-door.ogg",
0.6)};ig.wa.Door=ig.Wd.extend({Gv:q,fb:q,map:"",If:"",dir:"SOUTH",ZM:q,Aa:y,bO:0,wk:y,TFa:y,bj:q,Dn:q,ls:q,Ct:q,Na:{Pf:new ig.ka("media/sound/puzzle/door-activate-2.mp3"),ui:new ig.ka("media/sound/puzzle/door-deactivate.ogg")},fx:{sheet:new ig.ud("map.door")},fsa:q,t:new ig.u({Dd:h,attributes:{Gv:{c:"String",d:"Type of door",U:ig.uP},fb:{c:"VarCondition",d:"Condition for the door to open",xc:h},dir:{c:"String",d:"View direction of door.",U:ig.Jc.Lk,ab:"SOUTH"},map:{c:"Maps",d:"Map to be loaded",bh:"Map"},
If:{c:"Marker",d:"Marker on map to teleport player to"},rS:{c:"VarCondition",d:"Condition for entity to become transparent",xc:h},Dn:{c:"Event",d:"Event to be performed when entering the door",xc:h,I:h},ls:{c:"VarCondition",d:"Condition to show the block event when entering this door",xc:h},gYb:{c:"DoorVariations",d:"Variation of door"},eC:{c:"String",d:"Type of transition.",U:a}},label:function(){return"[ "+this.fb+" ]\n"+this.map+" > "+this.If}}),f:function(b,c,d,f){this.parent(b,c,d,f);this.Gv=
ig.uP[f.doorType]||ig.uP.DEFAULT;this.eC=a[f.transitionType]||a.REGULAR;this.b.type=ig.ca.BLOCK;this.b.F(this.Gv.size.x,this.Gv.size.y,this.Gv.size.z);this.b.time.Im=h;if(this.Gv.Ct){b=this.Gv.Ct;if(this.eC==a.REGULAR&&this.Gv.i8a)b=this.Gv.i8a;this.Ct=new ig.Bi(b)}this.map=f.map;this.If=f.marker;this.dir=f.dir||"SOUTH";b=this.b;if(this.Gv.Ba){this.wk=y;this.dir="SOUTH";this.Bd(this.Gv.Ba)}else{var c=ig.Rf.get("map"),i=this.dir=="NORTH"?4:0,d=c.MR&&c.MR[f.variation],j=this.dir=="EAST"||this.dir==
"WEST";this.wk=c.wk&&this.map;this.TFa=!!c.Fv;this.fsa=ig.lQa[c.j4]||ig.lQa.NORMAL;var k=0,l=0;if(d){k=d.x||0;l=d.y||0;this.wk=(d.ZM!=g?d.ZM:this.wk)&&this.map}if(j){i={shapeType:"Y_FLAT",offset:{x:this.dir=="WEST"?-8:8,y:0,z:0},namedSheets:{door:{src:c.sheet,width:16,height:96,offX:k+128,offY:l,xCount:1}},sheet:"door",tileOffset:i,flipX:this.dir=="EAST",SUB:[{name:"idle",time:1,frames:[0],repeat:y},{name:"open",time:1,frames:[0],repeat:y},{name:"close",time:1,frames:[0],repeat:y}]};if(c.Fv){i.namedSheets.glow=
{src:c.sheet,width:16,height:96,xCount:1,offX:c.Fv.hbb,offY:c.Fv.ibb};i.SUB.push({time:1,frames:[0],tileOffset:0,sheet:"glow",SUB:[{name:"idle"},{name:"open"},{name:"close"}]})}}else{i={shapeType:"Y_FLAT",offset:{x:0,y:this.dir=="NORTH"?-15:0,z:0},namedSheets:{door:{src:c.sheet,width:32,height:48,xCount:4,offX:k,offY:l}},sheet:"door",tileOffset:i,SUB:[{name:"idle",time:1,frames:[0],repeat:y},{name:"open",time:0.04,frames:[1,2,3],repeat:y},{name:"close",time:0.04,frames:[2,1],repeat:y}]};if(c.Fv){j=
c.Fv;if(d&&d.Fv)j=d.Fv;i.namedSheets.glow={src:c.sheet,width:32,height:48,xCount:j.vh,offX:j.x,offY:j.y};i.SUB.push({name:"idle",time:1,frames:[this.dir=="NORTH"?1:0],tileOffset:0,sheet:"glow"})}}this.Bd(i);switch(this.dir){case "NORTH":this.Ya.alpha=0.8;break;case "WEST":b.size.x=16;b.size.y=32;break;case "EAST":b.size.x=16;b.size.y=32}}this.fb=new ig.de(f.condition);this.Aa=this.fb.evaluate();if(f.blockEvent){this.Dn=new ig.Ja({name:"DOOR BLOCK EVENT",steps:f.blockEvent});this.ls=new ig.de(f.blockEventCondition||
"true")}this.Ma("idle");if(f.hideCondition)this.bj=new ig.r1(f.hideCondition)},Ge:function(a){this.parent(a);this.Ct&&this.Ct.Ka()},show:function(a){this.parent(a);a=this.b;if(this.wk){var c=a.g.x,d=a.g.y;switch(this.dir){case "NORTH":d=d-a.size.y;break;case "WEST":c=c-a.size.x}this.ZM=ig.r.Pe(ig.vgb,c,d,a.g.z,{dir:this.dir,active:this.Aa})}if(!this.map)if(this.dir=="NORTH"||this.dir=="SOUTH"){ig.r.Pe("HiddenBlock",a.g.x,a.g.y,a.g.z,{size:{x:4,y:a.size.y},zHeight:a.size.z});ig.r.Pe("HiddenBlock",
a.g.x+a.size.x-4,a.g.y,a.g.z,{size:{x:4,y:a.size.y},zHeight:a.size.z})}else{ig.r.Pe("HiddenBlock",a.g.x,a.g.y,a.g.z,{size:{x:a.size.x,y:4},zHeight:a.size.z});ig.r.Pe("HiddenBlock",a.g.x,a.g.y+a.size.y-4,a.g.z,{size:{x:a.size.x,y:4},zHeight:a.size.z})}},update:function(){this.bj&&this.bj.update(this);if(this.TFa&&this.Ua.length>1){var a=this.Ua[1];a.gp(!this.Aa?a.size.y+a.size.z:0,0)}if(this.bO){if(this.RAb(h).length>(this.map?0:2))this.bO=1;this.bO=this.bO-ig.i.ja;this.bO<=0&&this.close()}this.parent()},
close:function(){this.bO=0;this.Ma("close",h,"idle");this.map||this.b.vl(ig.ca.BLOCK)},open:function(b){if(!this.bO){!this.Ct&&this.fsa&&(b?this.fsa.play():ig.ah.gh(this.fsa,this));this.mb.Kda("openFast")&&this.eC==a.REGULAR?this.Ma("openFast",h):this.Ma("open",h);this.map||this.b.vl(ig.ca.TRIGGER)}this.bO=1+this.Gv.f_;this.Ct&&this.Ct.va(this)},ag:function(){var a=this.fb.evaluate();if(this.Aa!=a){this.Aa=a;this.ZM&&this.ZM.setActive(this.Aa);if(this.TFa&&this.Aa){this.fx.sheet.va("doorActivateGlow",
this,{spriteFilter:[1]});(a=this.Ua[1])&&a.gp(0,0)}if(this.Aa)this.Na.Pf.play();else{this.Na.ui.play();this.bO&&this.close()}}},oq:function(b,c){var d=Vec2.sub(b.tb(),this.tb()),f=this.b;if(this.dir=="SOUTH"&&Math.abs(d.x)<f.size.x/2||this.dir=="NORTH"&&Math.abs(d.x)<f.size.x/2||this.dir=="EAST"&&Math.abs(d.y)<f.size.y/2||this.dir=="WEST"&&Math.abs(d.y)<f.size.y/2)if(this.Aa&&!this.map&&b instanceof ig.Jc)this.open();else if(this.map&&ig.r.bHa(this,b,c)&&ig.r.JS()&&b.b.g.z==this.b.g.z)if(this.Dn&&
this.ls.evaluate())sc.$r.TK(this.Dn);else if(this.Aa){if(this.eC==a.INTER_AREA){ig.r.Bha(255,255,255,y);ig.r.Cha(1,1);sc.Ta.qEa();ig.mh.cHa()&&ig.mh.pause("SLOW")}this.b.rm=h;this.open(h);d=this.Vzb(b);d.steps.push({type:"TELEPORT",map:this.map,marker:this.If});d=new ig.Ja(d);ig.r.vi.Dp(d,ig.Qm.BLOCKING)}},q4:function(a){this.open();var c=this.mG(a),c=new ig.Xe("doorAction",c);a.Zf(c)},rZ:function(){this.open()},mG:function(a){var c=[{type:"SET_TERRAIN_FRICTION_IGNORE",value:h},{type:"SET_SLIP_THROUGH",
value:h},{type:"SET_FACE_FIX",value:y},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"MOVE_TO_POINT",target:this.uFa(a)},{type:"MOVE_TO_POINT",target:this.Nzb(a)},{type:"WAIT",time:1}];a instanceof ig.wa.Combatant&&c.unshift({type:"SET_WALK_ANIMS",config:"normal"});return c},Vzb:function(b){var c={steps:[{type:"DO_ACTION",entity:b,action:this.mG(b)}]};if(this.Gv.f_){c.steps.unshift({type:"WAIT",time:!this.Gv.xKa||this.eC==a.INTER_AREA?this.Gv.f_:this.Gv.xKa});var d=this.tb();d.y=d.y+(this.b.size.y/
2+b.b.size.y/2+8);c.steps.unshift({type:"DO_ACTION",entity:b,action:[{type:"SET_TERRAIN_FRICTION_IGNORE",value:h},{type:"SET_SLIP_THROUGH",value:h},{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_FACE_TO_ENTITY",entity:this,rotate:h},{type:"SET_FACE_FIX",value:h},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"MOVE_TO_POINT",target:d,precise:h},{type:"SET_FACE",face:"NORTH",rotate:h}]})}return c},uFa:function(a){var c=this.tb(),d=this.b,a=a.b;switch(this.dir){case "NORTH":c.y=c.y-(d.size.y/2-a.size.y/
2);break;case "SOUTH":c.y=c.y+(d.size.y/2-a.size.y/2);break;case "EAST":c.x=c.x+(d.size.x/2-a.size.x/2);break;case "WEST":c.x=c.x-(d.size.x/2-a.size.x/2)}return c},Nzb:function(){var a=this.tb(),c=this.b;switch(this.dir){case "NORTH":a.y=a.y+c.size.y/2;break;case "SOUTH":a.y=a.y-c.size.y/2;break;case "EAST":a.x=a.x-c.size.x/2;break;case "WEST":a.x=a.x+c.size.x/2}return a},BF:function(a){var c=this.b;a.b.aa=c.aa;a.b.pc=c.pc;a.b.g.z=c.g.z;ig.Jc.uq(ig.Jc.un[this.dir]||0,a.face);var d=c.g.x+c.size.x/
2-a.b.size.x/2,f=c.g.y+c.size.y/2-a.b.size.y/2;switch(this.dir){case "NORTH":f=f-(c.size.y/2+16);break;case "SOUTH":f=f+(c.size.y/2+16);break;case "WEST":d=d-(c.size.x/2+16);break;case "EAST":d=d+(c.size.x/2+16)}a.l(d,f)}});ig.vgb=ig.Wd.extend({dir:"SOUTH",wc:y,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.NONE;this.b.F(32,32,0);this.b.time.Im=h;this.dir=f.dir;this.wc=f.active||y;a=ig.Rf.get("map");this.Bd({sheet:{src:a.sheet,width:32,height:32,offY:96,xCount:5},tileOffset:this.dir==
"EAST"||this.dir=="WEST"?0:5,flipX:this.dir=="EAST",flipY:this.dir=="NORTH",SUB:[{name:"active",time:1,frames:[4],repeat:y},{name:"inactive",time:1,frames:[0],repeat:y},{name:"activate",time:0.06,frames:[1,2,3,3,3],repeat:y},{name:"deactivate",time:0.06,frames:[3,2,1],repeat:y}]});this.Ma(this.wc?"active":"inactive")},setActive:function(a){if(a!=this.wc)(this.wc=a)?this.Ma("activate",h,"active"):this.Ma("deactivate",h,"inactive")}})});ig.J=h;
ig.N("impact.feature.map-content.entities.stair-door").O("impact.base.entity","impact.base.actor-entity","impact.feature.map-content.entities.hidden-block","impact.feature.base.entities.object-layer-view").K(function(){var a={UPWARDS_EAST:{rva:h,Lc:y},UPWARDS_WEST:{rva:h,Lc:h},DOWNWARDS_EAST:{bD:h,Lc:y},DOWNWARDS_WEST:{bD:h,Lc:h}},b=Vec3.create(),c=Vec3.create(),d=Vec2.create(),f=Vec2.create(),i={REGULAR:1,INTER_AREA:2};ig.wa.TeleportStairs=ig.Kc.extend({s:q,map:"",If:"",OU:a.UPWARDS_EAST,Dn:q,ls:q,
X_:0,eC:0,$G:0,Cma:y,Bfa:q,t:new ig.u({Dd:h,attributes:{OU:{c:"String",d:"View direction of teleport ground.",U:a},map:{c:"Maps",d:"Map to be loaded",bh:"Map"},If:{c:"Marker",d:"Marker on map to teleport player to"},Dn:{c:"Event",d:"Event to be performed when entering the teleport ground",xc:h,I:h},ls:{c:"VarCondition",d:"Condition to show the block event when entering this teleport ground"},$G:{c:"Number",d:"Probability that NPCs will enter and leave through this exit"},FHa:{c:"String",d:"Object layer from which to display surrounding stuff",
U:{object1:1,object2:1,object3:1},ok:h},eC:{c:"String",d:"Type of transition.",U:i}},label:function(){return this.map+" > "+this.If+"\n\n\n"},Uk:h,Sl:"rgba(255,255,0, 0.5)",kD:"rgba(120,120,0, 0.8)",Yaa:h}),f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.BLOCK;this.b.F(32,16,48);this.eC=i[f.transitionType]||i.REGULAR;this.map=f.map;this.If=f.marker;this.OU=a[f.stairType]||a.UPWARDS_EAST;if(b=f.layer)this.Bfa=ig.r.rda(b);if((b=ig.Rf.get("map"))&&b.OH)this.s=new ig.ia(b.sheet);this.$G=f.npcRunnerProb||
0;if(f.blockEvent){this.Dn=new ig.Ja({name:"DOOR BLOCK EVENT",steps:f.blockEvent});this.ls=new ig.de(f.blockEventCondition||"true")}},Ge:function(a){this.parent(a);this.s&&this.s.Tc()},Np:function(){var a=1;Vec3.assign(b,this.b.g);b.x=b.x-16;Vec3.Oa(c,64,16,64);this.Bfa&&(a=a+ig.MP.tpa(this,this.Bfa,b,c));this.ul(a)},Gh:function(){if(!this.LU){Vec3.assign(b,this.b.g);b.x=b.x-16;Vec3.Oa(c,64,16,64);if(!this.Bfa||ig.MP.Gh(this,this.Bfa,0,q,b,c)){this.LU=h;var a=ig.Rf.get("map");if(a&&a.OH){var d=this.Ua.last();
d.HK(this,32,48,ig.IE.Z_FLAT,0,q,this.s,a.OH.x+(this.OU.bD?32:0),a.OH.y);d.AU(this.OU.Lc,y)}}}},oq:function(a,b){if(this.map&&ig.r.bHa(this,a,b)&&ig.r.JS()&&a.b.g.z==this.b.g.z)if(this.Dn&&this.ls.evaluate())sc.$r.TK(this.Dn);else{this.b.rm=h;if(this.eC==i.INTER_AREA){ig.r.Bha(255,255,255,y);ig.r.Cha(1,1);sc.Ta.qEa();ig.mh.cHa()&&ig.mh.pause("SLOW")}var c=this.mG(a),c=new ig.Ja({steps:[{type:"DO_ACTION",entity:a,action:c},{type:"WAIT",time:0.4},{type:"TELEPORT",map:this.map,marker:this.If}]});ig.r.vi.Dp(c,
ig.Qm.BLOCKING)}},q4:function(a){var b=this.mG(a,h),b=new ig.Xe("doorAction",b);a.Zf(b)},rZ:J(),mG:function(a){var a=[{type:"SET_TERRAIN_FRICTION_IGNORE",value:h},{type:"SET_SLIP_THROUGH",value:h},{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_FACE_FIX",value:y},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"MOVE_TO_POINT",target:this.uFa(a)},{type:"SHOW_ANIMATION",anim:"move",viaWalkConfig:h},{type:"SET_FACE",value:0.2,face:"NORTH"},{type:"SET_FACE_FIX",value:h}],b,c,i;if(this.OU.rva){d.y=-16;
d.x=8;f.y=-40;f.x=24;b=this.OU.Lc?"NORTH_WEST":"NORTH_EAST";i=c=0.4}else{d.y=-8;d.x=8;f.y=-4;f.x=24;c=0.2;i=0.3;b=this.OU.Lc?"NORTH_WEST":"NORTH_EAST"}if(this.OU.Lc){d.x=-d.x;f.x=-f.x}var n=Vec2.add(this.tb(),d),o=Vec2.add(this.tb(),f);a.push.apply(a,[{type:"SET_RELATIVE_SPEED",value:c},{type:"MOVE_TO_POINT",target:n},{type:"SET_RELATIVE_SPEED",value:i},{type:"SET_FACE",value:0.2,face:b},{type:"MOVE_TO_POINT",target:o},{type:"WAIT",time:1}]);return a},uFa:function(a){var b=this.tb();b.y=b.y+(this.b.size.y/
2-a.b.size.y/2+4);return b},BF:function(a){var b=this.b;a.b.aa=b.aa;a.b.pc=b.pc;a.b.g.z=b.g.z;ig.Jc.uq(ig.Jc.un[this.dir]||0,a.face);Vec2.Lc(a.face);var c=b.g.x+b.size.x/2-a.b.size.x/2,d=b.g.y+b.size.y/2-a.b.size.y/2,d=d+(b.size.y/2+16);a.l(c,d)},ppa:function(){return!this.$G||!this.map?q:{xb:[{Q:this,dir:this.dir,type:sc.IL.ENTER_EXIT,ap:sc.bka.SIDE}],r4:this.$G,v4:this.$G,map:this.map}}})});ig.J=h;
ig.N("game.feature.npc.entities.npc-waypoint").O("impact.base.actor-entity").K(function(){sc.Rya=ig.Ca.extend({XD:q,ana:q,zN:y,I3:[],J6a:y,Gt:{zq:0,NBa:q,LJ:-1,fN:-1,closed:q},f:function(a,b){this.XD=a;this.ana=b||[];this.J6a=a instanceof ig.wa.NPCWaypoint},Pza:function(){if(!this.zN){this.zN=h;for(var a=0;a<this.ana.length;++a){var b=ig.Ja.rd(this.ana[a]);b&&this.I3.push(b.HE)}for(a=this.I3.length;a--;)this.I3[a].uub(this)}},uub:function(a){this.Pza();this.I3.indexOf(a)==-1&&this.I3.push(a)},ida:function(a){return ig.qd.Fy(this.XD.b,
a.XD.b)},EBb:function(){this.Pza();return this.I3},rG:function(a){if(a!=this.Gt.zq){this.Gt.zq=a;this.Gt.NBa=q;this.Gt.LJ=-1;this.Gt.fN=-1;this.Gt.closed=y}return this.Gt}});sc.bSa={D_:0,rJb:function(){this.D_=0},aKb:function(a,b){this.D_++;var c=[a],d=a.rG(this.D_);d.LJ=0;for(d.fN=a.ida(b);c.length>0;){var d=c.pop(),f=d.rG(this.D_);if(d==b)return this.Ksb(a,b);f.closed=h;for(var i=d.EBb(),j=i.length;j--;){var k=i[j],l=k.rG(this.D_),m=f.LJ+k.ida(d),n=l.LJ;if(k.J6a||k==b)if(!(l.closed&&m>=n)&&(n==
-1||m<n)){n!=-1&&c.ye(k);l.NBa=d;l.LJ=m;m=m+k.ida(b);l.fN=m;for(l=c.length;l&&c[l-1].rG(this.D_).fN<m;)l--;c.splice(l,0,k)}}}return q},Ksb:function(a,b){for(var c=[],d=b;d!=a;){d!=b&&c.unshift(d.XD);d=d.rG(this.D_).NBa}return c}};ig.wa.NPCWaypoint=ig.Kc.extend({name:"",HE:q,t:new ig.u({Dd:h,attributes:{ana:{c:"Array",d:"Connections to other stuff",Xt:{c:"EntitySelect",rrb:function(a){return a.EFa}}}},Kq:h,Lq:h,label:N(""),Uk:h,Sl:"rgba(120,120,255, 0.25)"}),f:function(a,b,c,d){this.parent(a,b,c,d);
this.b.type=ig.ca.NONE;this.b.kn(ig.jk.gv);this.HE=new sc.Rya(this,d.connections)},EGa:function(){this.HE.Pza()},EFa:M("HE")})});ig.J=h;
ig.N("impact.feature.map-content.entities.teleport-ground").O("impact.base.entity","impact.base.actor-entity","impact.feature.map-content.entities.hidden-block","impact.feature.base.entities.object-layer-view","game.feature.npc.entities.npc-waypoint").K(function(){var a={REGULAR:1,INTER_AREA:2};ig.wa.TeleportGround=ig.Kc.extend({map:"",If:"",dir:"SOUTH",Dn:q,ls:q,X_:0,eC:0,$G:0,Cma:y,HE:q,t:new ig.u({Dd:h,attributes:{kf:{c:"Number",ab:64},dir:{c:"String",d:"View direction of teleport ground.",U:ig.Jc.Lk,
ab:"SOUTH"},map:{c:"Maps",d:"Map to be loaded",bh:"Map"},If:{c:"Marker",d:"Marker on map to teleport player to"},X_:{c:"Number",d:"Distance to place player away from teleportGround when spawning",ab:48},Dn:{c:"Event",d:"Event to be performed when entering the teleport ground",xc:h,I:h},ls:{c:"VarCondition",d:"Condition to show the block event when entering this teleport ground",xc:h},eC:{c:"String",d:"Type of transition.",U:a},$G:{c:"Number",d:"Probability that NPCs will enter and leave through this exit"},
Cma:{c:"Boolean",d:"If entity should always walk through the center of this opening"},Zg:{c:"VarCondition",d:"Condition for teleporter to appear",xc:h}},Kq:h,Lq:h,label:function(){return this.map+" > "+this.If},Uk:h,Sl:"rgba(255,255,0, 0.5)",kD:"rgba(120,120,0, 0.8)"}),f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.BLOCK;f.size?this.b.size.z=f.zHeight:this.b.F(8,8,f.zHeight||64);this.map=f.map;this.If=f.marker;this.dir=f.dir||"SOUTH";this.X_=f.spawnDistance||48;this.eC=a[f.transitionType]||
a.REGULAR;this.Cma=f.centerWalkThrough||y;this.$G=f.npcRunnerProb||0;if(f.blockEvent){this.Dn=new ig.Ja({name:"DOOR BLOCK EVENT",steps:f.blockEvent});this.ls=new ig.de(f.blockEventCondition||"true")}this.HE=new sc.Rya(this)},oq:function(b,c){if(this.map&&ig.r.bHa(this,b,c)&&ig.r.JS()&&b.b.g.z==this.b.g.z)if(this.Dn&&this.ls.evaluate())sc.$r.TK(this.Dn);else{if(this.eC==a.INTER_AREA){ig.r.Bha(255,255,255,y);ig.r.Cha(1,1);sc.Ta.qEa();ig.mh.cHa()&&ig.mh.pause("SLOW")}this.b.rm=h;var d=this.mG(b),d=new ig.Ja({steps:[{type:"DO_ACTION",
entity:b,action:d},{type:"TELEPORT",map:this.map,marker:this.If}]});ig.r.vi.Dp(d,ig.Qm.BLOCKING)}},q4:function(a){var c=this.mG(a,h),c=new ig.Xe("doorAction",c);a.Zf(c)},rZ:J(),mG:function(){var a=[{type:"SET_SLIP_THROUGH",value:h},{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_FACE_FIX",value:h},{type:"SET_FACE",face:this.dir},{type:"SET_Z_GRAVITY_FACTOR",value:0},{type:"SET_JUMPING",value:y},{type:"MOVE_FORWARD",time:2},{type:"WAIT",time:-1}];if(this.Cma){a.splice(0,0,{type:"SET_RELATIVE_SPEED",
value:0.5});a.splice(4,0,{type:"MOVE_TO_POINT",target:this.tb()})}return a},BF:function(a){var c=this.b;a.b.aa=c.aa;a.b.pc=c.pc;a.b.g.z=c.g.z;ig.Jc.uq(ig.Jc.un[this.dir]||0,a.face);Vec2.Lc(a.face);var d=c.g.x+c.size.x/2-a.b.size.x/2,f=c.g.y+c.size.y/2-a.b.size.y/2;switch(this.dir){case "NORTH":f=f+(c.size.y/2+this.X_);break;case "SOUTH":f=f-(c.size.y/2+this.X_);break;case "WEST":d=d+(c.size.x/2+this.X_);break;case "EAST":d=d-(c.size.x/2+this.X_)}a.l(d,f)},ppa:function(){return!this.$G||!this.map?
q:{xb:[{Q:this,dir:this.dir,type:sc.IL.ENTER_EXIT,ap:sc.bka.SIDE}],r4:this.$G,v4:this.$G,map:this.map}},EFa:M("HE")})});ig.J=h;
ig.N("impact.feature.map-content.entities.glowing-ground").O("impact.base.entity").K(function(){ig.wa.GlowingGround=ig.Kc.extend({vX:"",wX:"",duration:1,n:0,lR:q,t:new ig.u({Dd:h,attributes:{vX:{c:"String",d:"First color of interpolation"},wX:{c:"String",d:"Second color of interpolation"},duration:{c:"Number",d:"Duration of color interpolation (back and forth)"}},Kq:h,Lq:h,label:N("")}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;d.size||this.b.F(32,32,0);this.vX=d.color1;this.wX=
d.color2;this.duration=d.duration?d.duration:1;this.lR=new ig.Oka(this.vX,this.wX)},Np:function(){this.ul(1)},update:function(){this.n=this.n+ig.i.ja;this.n=this.n%this.duration},Gh:function(){var a=this.n/this.duration;this.lR.VLa(a<0.5?a*2:(1-a)*2);a=this.b;this.Ua[0].l(a.g.x,a.g.y,a.g.z);this.Ua[0].F(a.size.x,a.size.y,a.size.z);this.Ua[0].Bj(this.lR,0,0)}})});ig.J=h;
ig.N("impact.feature.map-content.entities.prop").O("impact.base.entity").K(function(){ig.Glb=ig.XE.extend({Wi:"PropSheet",HKa:{},Wo:J(),oG:function(){return ig.root+this.path.vm("data/props/",".json")+ig.Kn()},onload:function(a){a.DOCTYPE!="PROP_SHEET"&&e(Error("Invalid JSON Format for PropSheet"));for(var a=a.props,b=0;b<a.length;++b)this.SBb(a[b])},SBb:function(a){if(a.name){var b=a.name;delete a.name;this.HKa[b]=a}else if(a.sequence){var b=a.sequence,c=b.entries,d=b.sheet;delete a.sequence;for(var f=
0;f<c.length;++f){var i=c[f],j={},b=i.name;delete i.name;ig.merge(j,a);ig.merge(j,i);j.fix={gfx:d.gfx,x:d.x+d.w*f,y:d.y,w:d.w,h:d.h,Pd:y};this.HKa[b]=j}}},aBb:function(a){return this.HKa[a]}});sc.ESa={};sc.ESa.PLANT=new ig.ka("media/sound/environment/plant-shake.ogg",0.7,0.2);ig.Z9=q;ig.YE.Prop=function(a){var b="PROP[";a.yf.W8a&&(b=b+a.yf.W8a.name);return b+"]"};ig.wa.Prop=ig.Wd.extend({Pb:0,face:Vec2.create(),DWb:q,Cga:q,FKa:q,Dq:{Aa:y,n:0,yl:0.01,Vra:y},rCa:q,rJ:q,dP:q,FQ:y,TMa:y,La:q,YC:q,hy:q,
G:{ZY:y,sheet:q,show:q,hide:q,Xd:q,Q7:q,f5:q,Pr:q,usa:q,aZ:q},t:new ig.u({Dd:h,attributes:{W8a:{c:"PropType",d:"Type of prop"},FKa:{c:"EntityAnim",d:"Animation of prop"},rJ:{c:"CondAnims",d:"Animations shown by conditions"},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},dP:{c:"VarName",d:"Variable to be changed when prop is touched",I:h},La:{c:"PropInteract",d:"Interaction for this property",xc:h,I:h},OMa:{c:"Effect",d:"Effect to show when showing entity",I:h},wCb:{c:"Effect",d:"Effect to show when hiding entity",
I:h},Pr:{c:"Effect",d:"Effect to be shown permanently",I:h},rS:{c:"VarCondition",d:"Condition for entity to become transparent",I:h}},label:N(""),Uk:h,Sl:"rgba(255,255,0, 0.5)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(32,32,0);this.dP=d.touchVar||q;this.FKa=d.propAnim||"default";a=d.condAnims;this.G.Q7=d.showEffect?new ig.Bi(d.showEffect):q;this.G.f5=d.hideEffect?new ig.Bi(d.hideEffect):q;this.G.Pr=d.permaEffect?new ig.Bi(d.permaEffect):q;if(d.hideCondition)this.bj=
new ig.r1(d.hideCondition);if(a&&a.length>0){this.rJ=[];for(b=0;b<a.length;++b){c=q;a[b].interact&&ig.Z9&&(c=new ig.Z9(this,a[b].interact));this.rJ.push({fb:new ig.de(a[b].condition),bb:a[b].anim,La:c})}}else if(!this.bj)this.ag=q;if(d.interact&&ig.Z9)this.La=new ig.Z9(this,d.interact);if(d.propType&&d.propType.name&&d.propType.sheet){this.Cga=d.propType.name;if(window.kib&&d.propType.sheet=="autumn"&&this.Cga.indexOf("tree")!=-1)this.Cga="cubaum";this.Dga=new ig.Glb(d.propType.sheet);this.Dga.Yt(this)}},
show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}if(this.G.Pr)this.G.ZY=h;if(this.YC&&this.YC.$7a())this.G.ZY=h;this.G.ZY&&this.b.kn(ig.jk.RE);this.FQ=y;if(!a&&(this.G.sheet||this.G.Q7)){this.Ya.alpha=0;this.G.Q7?this.G.Q7.va(this,{}):this.G.sheet.va(this.G.show,this,{})}},XCb:function(){this.G.ZY=y;if(this.G.Pr)this.G.usa=this.G.Pr.va(this,{duration:-1});this.YC&&this.YC.PGb()},po:function(){this.YC&&this.YC.C7a();this.G.usa&&this.G.usa.stop();this.G.usa=q;if(this.G.sheet||
this.G.f5){this.G.Xd=this.G.f5?this.G.f5.va(this,{callback:this}):this.G.sheet.va(this.G.hide,this,{callback:this});this.b.kn(ig.jk.RE)}else this.hide()},Np:function(){this.ul(1)},Eq:function(a){a||e(Error("Loading Failed!"));if(a=this.Dga.aBb(this.Cga)){if(window.Ed){this.t=this.t.copy();this.t.Uk=y}Vec3.assign(this.b.size,a.size);this.b.type=ig.ca[a.collType]||this.b.type;this.b.shape=ig.Tf[a.shapeType]||ig.Tf.RECTANGLE;this.b.Cd.size=a.shadow||0;this.TMa=a.shuffleAnims||y;if(a.ballKill)this.hy=
{fx:a.ballKill.fx?new ig.Bi(a.ballKill.fx):q};if(a.nudging){this.Dq.Aa=h;this.Dq.yl=Math.PI*2*(a["nudge-variance"]?a["nudge-variance"]:0.015);this.Dq.n=new ig.Vt(y);if(this.b.type!=ig.ca.BLOCK)this.b.type=ig.ca.TRIGGER;this.rCa=a.collideSound||sc.ESa.PLANT}if(a.floatHeight)this.b.yd.height=a.floatHeight;if(a.floatVariance)this.b.yd.height=a.floatVariance;if(a.effects){this.G.sheet=new ig.ud(a.effects.sheet);this.G.hide=a.effects.hide;this.G.show=a.effects.show}this.Pb=ig.hd[a.terrain]||0;this.b.Fd=
a.zGravityFactor||0;if(a.anims)this.Bd(a.anims);else{if(this.bj)this.bj.m4=h;this.G.ZY||this.b.kn(ig.jk.gv);this.io={wd:new ig.ia(a.fix.gfx),x:a.fix.x,y:a.fix.y,Vc:a.fix.w,sd:a.fix.h,Pd:a.fix.flipX,$h:a.fix.flipY,Hh:a.fix.wallY,zC:a.fix.aboveZ||0,shape:ig.IE[a.fix.shape||"NO_EXPAND"],Db:{x:a.fix.pivotX,y:a.fix.pivotY},oi:a.fix.offX||0,bi:a.fix.offY||0,qg:a.fix.renderMode||q}}this.NXa()}},Ge:function(a){this.parent(a);this.Dga&&this.Dga.Tc();this.io&&this.io.wd.Tc();this.La&&this.La.Ge();this.G.sheet&&
this.G.sheet.Tc();this.G.Q7&&this.G.Q7.Ka();this.G.f5&&this.G.f5.Ka();this.G.Pr&&this.G.Pr.Ka();this.hy&&this.hy.fx&&this.hy.fx.Ka();if(this.rJ)for(a=this.rJ.length;a--;)this.rJ[a].La&&this.rJ[a].La.Ge()},update:function(){if(this.G.ZY){this.XCb();this.io&&this.b.kn(ig.jk.gv)}this.bj&&this.bj.update(this);if(this.Dq.n&&!this.Dq.n.Xb()){this.Dq.n.ja();if(this.Dq.n.o7>=1){this.Dq.n.set(0);this.io&&this.b.kn(ig.jk.gv)}}this.parent();if(!this.io&&!this.Dq.n&&(!this.bj||!this.bj.Nv)&&this.Ya.RDb()){if(this.bj)this.bj.m4=
h;this.b.kn(ig.jk.gv)}},Aj:function(a){if(a==this.G.Xd&&a.ek()){this.G.Xd=q;this.hide()}},Gh:function(){var a=0,b=0;if(this.Dq.n&&!this.Dq.n.Xb()){a=this.Dq.n.get();if(this.Dq.Vra){b=Math.sin(Math.PI*a)*2;a=this.Dq.yl*Math.sin(Math.PI*a)}else a=this.Dq.yl*a}if(this.mb){this.Ya.Qb=a;ig.Wd.prototype.Gh.call(this)}else if(this.io){var c=this.Ua[0];c.HK(this,this.io.Vc,this.io.sd,this.io.shape||"NO_EXPAND",this.io.Hh,q,this.io.wd,this.io.x,this.io.y);c.zC=this.io.zC||0;c.AU(this.io.Pd,this.io.$h);c.Eb(this.io.Db.x,
this.io.Db.y);if(this.io.qg)c.qg=this.io.qg;c.setTransform(1,1,a);c.ge(this.Ya.alpha);c.dMa(this.io.oi,this.io.bi+b);this.Ya.L0(this)}else this.Ua[0].FH()},oq:function(a){if(this.dP&&a==ig.r.cb&&!this.FQ){this.FQ=h;ig.ma.set(this.dP,h)}this.Dq&&(a.b.type==ig.ca.PROJECTILE||this.b.type==ig.ca.BLOCK||this.wT(a==ig.r.cb))},Ifa:function(a){this.wT(a==ig.r.cb,h)},wT:function(a,b){if(this.Dq.n&&this.Dq.n.Xb()){a&&this.rCa&&ig.ah.gh(this.rCa,this,y,{fadeDuration:0.25});this.b.kn(ig.jk.RE);this.Dq.Vra=b||
y;b?this.Dq.n.set(0.15,ig.Ol.br):this.Dq.n.set(0.3,ig.Ol.Zxa)}},mOb:function(){this.FQ=y},ag:function(){this.bj&&this.bj.ag(this);this.NXa()},oZa:function(a){if(this.YC!=a){!this.Og&&this.YC&&this.YC.C7a();this.YC=a;if(!this.Og&&this.YC&&this.YC.$7a()){this.G.ZY=h;this.b.kn(ig.jk.RE)}}},sj:function(a){if(!this.hy||!a.Nn)return y;this.hy.fx&&this.hy.fx.va(this,{});var b=a.aj(this);sc.Ta.Oi(this,b,sc.Wb.NONE,a.Gf(),y,y,y);return h},NXa:function(){if(this.rJ)for(var a=this.rJ.length;a--;){var b=this.rJ[a];
if(b.fb.evaluate()){this.io||this.Ma(b.bb,h,q,h);this.oZa(b.La||this.La);this.TMa&&this.Ya.MK();return}}this.oZa(this.La);if(!this.io){this.Ma(this.FKa);this.b.kn(ig.jk.RE)}this.TMa&&this.Ya.MK()}});ig.wa.Prop.$bb=h});ig.J=h;
ig.N("impact.feature.map-content.entities.scalable-prop").O("impact.base.entity").K(function(){ig.qnb=ig.XE.extend({Wi:"ScalablePropSheet",xb:{},Wo:J(),oG:function(){return ig.root+this.path.vm("data/scale-props/",".json")+ig.Kn()},onload:function(a){a.DOCTYPE!="SCALABLE_PROP_SHEET"&&e(Error("Invalid JSON Format for ScalablePropSheet"));this.xb=a.entries},kBb:function(a){return this.xb[a]}});var a={west:{bPb:h,teb:h},east:{teb:h,right:h},north:{fPb:h,g3a:h,top:h},south:{g3a:h,bottom:h}};ig.wa.ScalableProp=
ig.Wd.extend({Pb:0,Wsa:q,fha:q,D3a:y,s:q,Rp:q,qsa:{x:0,y:0},Db:q,Hh:0,Nu:0,qg:q,W4:[],Zt:q,bX:q,y0:0,n:0,dP:q,FQ:y,G:{sheet:q,show:q,hide:q,Xd:q},t:new ig.u({Dd:h,attributes:{Wsa:{c:"ScalablePropConfig",d:"Type of Scalable Prop"},qsa:{c:"Vec2",d:"Start offset of the repeating pattern in pixels"},$ua:{c:"Number",d:"Time offset of the animation"},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},dP:{c:"VarName",d:"Variable to be changed when prop is touched",I:h},zA:{c:"Boolean",CUa:"If true, block path map and update when destroyed"},
rS:{c:"VarCondition",d:"Condition for entity to become transparent",I:h}},label:N(""),Uk:h,Sl:"rgba(255,255,0, 0.5)"}),f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.NONE;this.dP=f.touchVar||q;f.size?this.D3a=h:this.b.F(32,32,0);f.patternOffset&&Vec2.assign(this.qsa,f.patternOffset);this.n=f.timeOffset||0;this.zA=f.blockNavMap;f.hideCondition?this.bj=new ig.r1(f.hideCondition):this.ag=q;if(f.propConfig&&f.propConfig.name&&f.propConfig.sheet){this.Wsa=f.propConfig;this.fha=new ig.qnb(f.propConfig.sheet);
this.fha.Yt(this)}},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}this.FQ=this.b.rm=y;if(!a&&this.G.sheet){this.Ya.alpha=0;this.G.sheet.va(this.G.show,this,{})}if(this.zA)this.Kg=ig.navigation.eS(this);this.ubb&&!this.W7&&this.n_a()},n_a:function(){var a=this.b;this.W7=ig.r.Pe(ig.wa.HiddenSkyBlock,a.g.x,a.g.y,a.g.z,{size:Vec2.create(this.b.size)});this.W7.b.vl(this.b.type)},po:function(){this.Kg&&this.Kg.remove();this.Kg=q;this.b.rm=h;if(this.W7){this.W7.ze();this.W7=
q}if(this.G.sheet){this.G.Xd=this.G.sheet.va(this.G.hide,this,{callback:this});this.b.kn(ig.jk.RE)}else this.hide()},Eq:function(b){b||e(Error("Loading Failed!"));var c=this.b;if(b=this.fha.kBb(this.Wsa.name)){if(window.Ed){this.t=this.t.copy();this.t.Uk=y;this.t.Kq=b.scalableX;this.t.Lq=b.scalableY;this.t.B_=b.scalableStep}if(this.D3a){if(!b.scalableX&&c.size.x!=b.baseSize.x||(c.size.x-b.baseSize.x)%b.scalableStep!=0){c.size.x=b.baseSize.x;c.size.y=b.baseSize.y}if(!b.scalableY&&c.size.y!=b.baseSize.y||
(c.size.y-b.baseSize.y)%b.scalableStep!=0){c.size.x=b.baseSize.x;c.size.y=b.baseSize.y}}else Vec2.assign(c.size,b.baseSize);if(b.ballKill)this.hy={fx:b.ballKill.fx?new ig.Bi(b.ballKill.fx):q};c.size.z=b.baseSize.z;this.b.vl(ig.ca[b.collType]||this.b.type);this.Hh=b.wallY||0;this.Pb=ig.hd[b.terrain]||0;this.Nu=c.size.z;if(b.renderHeight!=g)this.Nu=b.renderHeight;this.qg=b.renderMode;this.Zt=b.animFrames||q;this.bX=b.animTime||0.1;this.y0=b.timePadding||q;if(b.effects){this.G.sheet=new ig.ud(b.effects.sheet);
this.G.hide=b.effects.hide;this.G.show=b.effects.show}this.Db=b.pivot||q;this.ubb=b.skyBlock;var d=b.patterns,c=b.gfxBaseX||0,f=b.gfxBaseY||0;this.Rp=new ig.Xz(b.gfx,b.scalableX?b.scalableY?ig.nf.Eg.eF:ig.nf.Eg.Yn:ig.nf.Eg.OL,d.w,d.h,c+(d.x||0),f+(d.y||0),d.xCount||1,d.yCount||1);this.s=new ig.ia(b.gfx);if(d=this.Wsa.ends)for(var i in b.gfxEnds){var j=b.gfxEnds[i][d[i]];if(j){j={x:j.x,y:j.y,Vc:j.w,sd:j.h,kf:j.zHeight==g?this.Nu:j.zHeight,oi:j.offX,bi:j.offY,Pd:j.flipX||y,$h:j.flipY||y,Zt:j.animFrames||
q,qg:j.renderMode||q,Xyb:j.fullBack||y};ig.merge(j,a[i]);j.x=j.x+c;j.y=j.y+f;this.W4.push(j)}}this.ul(1+this.W4.length);if(!this.Zt&&!this.bX&&!this.y0){if(this.bj)this.bj.m4=h;this.b.kn(ig.jk.gv)}}},Np:function(){this.ul(1+this.W4.length)},Ge:function(a){this.Kg&&this.Kg.remove();this.parent(a);this.fha&&this.fha.Tc();this.Rp&&this.Rp.Tc();this.G.sheet&&this.G.sheet.Tc();this.hy&&this.hy.fx&&this.hy.fx.Ka();this.s&&this.s.Tc()},update:function(){this.ubb&&(!this.W7&&!this.G.Xd)&&this.n_a();this.bj&&
this.bj.update(this);this.parent();if(this.Zt||this.y0)this.n=this.n+ig.i.ja},Aj:function(a){if(a==this.G.Xd&&a.ek()){this.G.Xd=q;!this.Zt&&(!this.bX&&!this.y0)&&this.b.kn(ig.jk.gv);this.hide()}},Gh:function(){var a=this.b;if(this.Rp){var c=0,d=0,f=0;if(this.Zt)var i=this.Zt.length*this.bX,i=Math.floor(this.n%i/this.bX),c=this.Zt[i];for(var j=a.g.x,k=a.g.y,l=0,m=0,n=a.size.x,o=a.size.y,t=y,p=0;p<this.W4.length;++p){var r=this.W4[p],u=a.g.z,w=r.kf;if(r.top&&!r.Xyb){u=u+this.Nu;w=w-this.Nu}var z=r.sd-
w;this.Ua[p].l(a.g.x+(r.right?a.size.x-r.Vc:0),a.g.y+(r.bottom?a.size.y-z:0),u);this.Ua[p].F(r.Vc,z,w,Math.round(this.Hh)*z);this.Ua[p].Eb(r.Vc/2,(z+w)/2);u=r.x;w=r.y;i=c;if(r.Zt){i=r.Zt.length*this.bX;i=Math.floor(this.n%i/this.bX);i=r.Zt[i]}if(i)var v=r.vh||100,u=u+i%v*r.Vc,w=w+Math.floor(i/v)*r.sd;this.Ua[p].Bj(this.s,u,w);this.Ua[p].AU(r.Pd,r.$h);r.bPb&&(l=l+r.Vc);r.fPb&&(m=m+z);r.teb&&(n=n-r.Vc);r.g3a&&(o=o-z);this.Ua[p].qg=r.qg||this.qg;this.Ua[p].ge(this.Ya.alpha);this.Ua[p].dMa(r.oi||0,r.bi||
0);this.Ua[p].setTransform(this.Ya.Xa,this.Ya.Va,this.Ya.Qb);t=r.bottom||t}if(this.y0){d=Math.floor(this.n*this.y0.x);f=Math.floor(this.n*this.y0.y)}a=this.Nu;r=this.b.g.z;if(this.W4&&t){r=r+a;a=0}this.Ua[p].l(j+l,k+m,r);if(n>0&&o>0){this.Ua[p].F(n,o,a,Math.round(this.Hh)*o);this.Ua[p].Eb(n*(this.Db?this.Db.x:0.5),(o+a)*(this.Db?this.Db.y:0.5));this.Ua[p].Bj(this.Rp.Iy(c),this.qsa.x+d,this.qsa.y+f);this.Ua[p].qg=this.qg;this.Ua[p].ge(this.Ya.alpha);this.Ua[p].setTransform(this.Ya.Xa,this.Ya.Va,this.Ya.Qb)}else this.Ua[p].FH();
this.Ya.L0(this)}else for(p=0;p<this.Ua.length;++p)this.Ua[p].FH()},oq:function(a){if(this.dP&&a==ig.r.cb&&!this.FQ){this.FQ=h;ig.ma.set(this.dP,h)}},ag:function(){this.bj&&this.bj.ag(this)},sj:function(a){if(!this.hy||!a.Nn)return y;this.hy.fx&&this.hy.fx.va(this,{});var c=a.aj(this);sc.Ta.Oi(this,c,sc.Wb.NONE,a.Gf(),y,y,y);return h}});ig.wa.ScalableProp.$bb=h});ig.J=h;
ig.N("impact.feature.map-content.entities.note").O("impact.base.entity").K(function(){ig.wa.Note=ig.Kc.extend({text:"",t:new ig.u({Dd:h,attributes:{kf:{c:"Number",ab:0},text:{c:"String",d:"Text to display in information.",gs:h}},Kq:h,Lq:h,Uk:h,label:M("text"),Sl:"rgba(30, 30, 30, 1)",kD:"rgba(0, 0, 0, 1)",UIa:h}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;d.size?this.b.size.z=d.zHeight||0:this.b.F(32,32,d.zHeight||0);this.text="\n"+d.text||""}})});ig.J=h;
ig.N("impact.feature.map-content.map-content-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.NUDGE_PROP=ig.qa.extend({ep:q,qH:y,t:new ig.u({attributes:{ep:{c:"Entity",d:"Prop Entity",fla:"Prop",dr:h},qH:{c:"Boolean",d:"True if the nudge sound should be played"}}}),f:function(a){assertContent(a,"prop");this.ep=a.prop;this.qH=a.playSound||y},start:function(a,b){var c=ig.Ja.rd(this.ep,b);c.wT&&c.wT(this.qH)}});ig.oa.OPEN_DOOR=ig.qa.extend({ur:q,t:new ig.u({attributes:{ur:{c:"Entity",
d:"Door Entity to enter"}}}),f:function(a){this.ur=a.door},start:function(){var a=ig.Ja.rd(this.ur);a&&a.open&&a.open()}});ig.oa.CLOSE_DOOR=ig.qa.extend({ur:q,t:new ig.u({attributes:{ur:{c:"Entity",d:"Door Entity to close"}}}),f:function(a){this.ur=a.door},start:function(){var a=ig.Ja.rd(this.ur);a&&a.close&&a.close()}});ig.la.ENTER_DOOR=ig.ta.extend({ur:q,t:new ig.u({attributes:{ur:{c:"Entity",d:"Door Entity to enter"}}}),f:function(a){assertContent(a,"door");this.ur=a.door},ya:function(a){var b=
ig.Ja.rd(this.ur);b&&b.q4&&b.q4(a);return h}})});ig.J=h;
ig.N("impact.feature.map-content.plug-in").O("impact.feature.map-content.map-style","impact.feature.map-content.entities.door","impact.feature.map-content.entities.stair-door","impact.feature.map-content.entities.teleport-ground","impact.feature.map-content.entities.glowing-ground","impact.feature.map-content.entities.prop","impact.feature.map-content.entities.scalable-prop","impact.feature.map-content.entities.hidden-block","impact.feature.map-content.entities.note","impact.feature.map-content.map-content-steps").K(function(){if(window.Ed){wm.Ek.push("impact.feature.map-content.editors.map-content-editor");
wm.yu&&(wm.yu.mapStyle={c:"String",d:"Select style of map (influences appearance of several entities)",U:ig.GL,ok:h})}});ig.J=h;
ig.N("impact.feature.map-image.map-image").O("impact.base.game","game.config","impact.base.entity").K(function(){ig.Vjb=ig.Uf.extend({images:{},f:function(){this.parent("MapImage")},mMb:function(a,b){this.y9a(a);var c=ig.r.Pe(ig.Ujb,0,0,0,b);this.images[a]=c},y9a:function(a){var b=this.images[a];delete this.images[a];b&&b.remove()}});ig.Vf(function(){return ig.o6a=new ig.Vjb});ig.Ujb=ig.Wd.extend({b4a:q,t:new ig.u({Dd:y}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.Pt=d.tileSheet;
this.f3a=d.guiSprite;this.Hh=0;d.size?this.b.F(d.size.x,d.size.y,d.size.z):this.b.F(this.Pt.width,0,this.Pt.height);a=d.position;this.b.l(a.x-this.b.size.x/2,a.y-this.b.size.y/2,a.z)},remove:function(){this.ze()},Np:function(){this.ul(1,this.f3a);this.Ua[0].HK(this,this.Pt.width,this.Pt.height,"NO_EXPAND",this.Hh,q,this.Pt.wd,this.Pt.oi,this.Pt.bi)},Gh:function(){this.Ua[0].ge(this.Ya.alpha);this.Ya.L0(this)}})});ig.J=h;
ig.N("impact.feature.map-image.map-image-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.SHOW_MAP_IMAGE=ig.qa.extend({t:new ig.u({attributes:{name:{c:"String",d:"Name of image"},Pt:{c:"TileSheet",d:"Image to be displayed",xc:h},position:{c:"Vec3",d:"Point where to spawn image",dr:h,kq:h},f3a:{c:"Boolean",d:"If true: Show sprite as GUI Sprite"},size:{c:"Offset",d:"Optional: Size of entity. If not specified will match image dimensions to x and z size, y always 0",I:h}}}),f:function(a){this.name=
a.name;this.yf=ig.copy(a);delete this.yf.name;this.yf.tileSheet=new ig.Vh.AX(a.tileSheet)},start:function(){ig.o6a.mMb(this.name,this.yf)},Ka:function(){this.yf.tileSheet.Ka()}});ig.oa.REMOVE_MAP_IMAGE=ig.qa.extend({t:new ig.u({attributes:{name:{c:"String",d:"Name of image"}}}),f:function(a){this.name=a.name},start:function(){ig.o6a.y9a(this.name)}})});ig.J=h;ig.N("impact.feature.map-image.plug-in").O("impact.feature.map-image.map-image","impact.feature.map-image.map-image-steps").K(J());ig.J=h;
ig.N("impact.feature.overlay.overlay").O("impact.base.event","impact.base.game","impact.feature.gui.gui").K(function(){ig.Xf.Ud=h;ig.blb=ig.da.extend({color:q,Pj:y,f:function(){this.parent();this.a.zIndex=-10},Da:function(a){if(ig.Xf.Ud&&this.color){var b=this.color;if(b.E2>0.01){b="rgba("+Math.floor(b.Fk)+","+Math.floor(b.tk)+","+Math.floor(b.qk)+","+b.E2+")";a=a.nc(b,0,0,ig.i.width,ig.i.height);this.Pj&&a.yi("lighter")}}}});ig.tPa=ig.Ca.extend({n:q,d0:0,wcb:0,Zd:g,f:function(){this.n=new ig.Vt(h)},
update:function(){if(!this.n.Xb()){this.n.ja();this.n.get();if(this.Zd!==g&&this.n.zFb()){this.d0=this.Zd;this.Zd=g}return y}return h},aS:function(){var a=this.n.get();return(1-a)*this.d0+a*this.wcb},set:function(a,b,c){this.d0=this.aS();this.wcb=a;this.Zd=c;this.n.set(b,c!==g?ig.Ol.Uva:ig.Ol.br)}});ig.alb=ig.da.extend({s:q,lM:q,f:function(a){this.parent();this.a.nd=0;this.a.zIndex=-20;this.s=a;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.lM=new ig.tPa(h)},update:function(){if(!this.lM.update())this.a.nd=
this.lM.aS()},Da:function(a){if(ig.Xf.Ud){a.na(this.s,0,0);a.na(this.s,this.a.size.x-this.s.width,0,0,0,g,g,h)}},ge:function(a,b,c){if(!b)this.a.nd=a;this.lM.set(a,b,c)}});ig.V9={WHITE:0,RED:1,BLACK:2};ig.$kb=ig.Uf.extend({Rma:{Fk:0,tk:0,qk:0,E2:0},pJ:{Fk:0,tk:0,qk:0,E2:0},Pj:y,n:0,max:0,s:{WHITE:new ig.ia("media/gui/env-white.png"),RED:new ig.ia("media/gui/env-red.png"),BLACK:new ig.ia("media/gui/env-black.png")},D3:q,i_a:[],f:function(){this.parent("Overlay");this.D3=new ig.blb;ig.X.vd(this.D3);
for(var a in this.s){var b=new ig.alb(this.s[a]);this.i_a[ig.V9[a]]=b;ig.X.vd(b)}},QM:400,Eu:function(){if(this.n<this.max){this.n=this.n+ig.i.Sa;if(this.n>=this.max){this.n=this.max;if(this.pJ.E2==0){this.pJ.Fk=0;this.pJ.tk=0;this.pJ.qk=0;this.Pj=y}}}var a=this.pQ();this.D3.color=a;this.D3.Pj=this.Pj},fj:function(){this.pe(0,0,0,0,0,y);for(var a in ig.V9)this.EH(a,0,0,y)},pe:function(a,b,c,d,f,i,j){this.Rma=this.pQ();this.pJ.Fk=a;this.pJ.tk=b;this.pJ.qk=c;this.pJ.E2=d;this.Pj=i||y;this.max=f;this.n=
0;a=j?1300:-10;if(a!=this.D3.a.zIndex){this.D3.a.zIndex=a;ig.X.eNa()}},ge:function(a,b){this.Rma=this.pQ();this.pJ.E2=a;this.max=b;this.n=0},EH:function(a,b,c,d){a=typeof a=="string"?ig.V9[a]:a;this.i_a[a].ge(b,c,d)},pQ:function(){var a={},b=this.max?(this.n/this.max).Rb(0,1):1,c;for(c in this.Rma)a[c]=this.Rma[c]*(1-b)+this.pJ[c]*b;return a}});ig.Vf(function(){return ig.Ud=new ig.$kb})});ig.J=h;
ig.N("impact.feature.overlay.overlay-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.SET_OVERLAY=ig.qa.extend({color:q,alpha:0,time:0,Pj:y,t:new ig.u({attributes:{color:{c:"Color",d:"Color of overlay"},alpha:{c:"Number",d:"Alpha of overlay, range [0,1]. 0 = transparent"},time:{c:"Number",d:"Transition time to new overlay color and alpha"},Pj:{c:"Boolean",d:"Apply color in lighter mode"},o8a:{c:"Boolean",d:"If true: show overlay above messages",I:h}}}),f:function(a){assertContent(a,
"alpha","time","color");this.alpha=a.alpha;this.time=a.time;this.color=new ig.xp(a.color);this.Pj=a.lighter||y;this.o8a=a.overMessage||y},start:function(){ig.Ud.pe(this.color.Fk||0,this.color.tk||0,this.color.qk||0,this.alpha,this.time,this.Pj,this.o8a)}});ig.oa.SET_OVERLAY_CORNER=ig.qa.extend({color:q,alpha:0,time:0,Zd:q,t:new ig.u({attributes:{color:{c:"String",d:"Color of corner",U:ig.V9},alpha:{c:"Number",d:"Alpha of corner, range [0,1]. 0 = transparent"},time:{c:"Number",d:"Transition time to new alpha value"},
Zd:{c:"Number",d:"If specified: alterate between alpha and blinkAlpha",I:h}}}),f:function(a){assertContent(a,"alpha","time","color");this.alpha=a.alpha;this.time=a.time;this.color=a.color;this.Zd=a.blinkAlpha},start:function(){ig.Ud.EH(this.color,this.alpha,this.time,this.Zd===q?g:this.Zd)}})});ig.J=h;ig.N("impact.feature.overlay.plug-in").O("impact.feature.overlay.overlay","impact.feature.overlay.overlay-steps").K(function(){window.Ed&&wm.Um(/OVERLAY/,"yellow")});ig.J=h;
ig.N("impact.feature.dream-fx.dream-fx").O("impact.base.event","impact.base.game","impact.feature.gui.gui","impact.base.utils").K(function(){ig.Xf.Ud=h;ig.sQa=ig.Ca.extend({EMa:q,UMa:q,wDa:q,mDa:q,f:function(){this.EMa=new ig.ia("media/pics/dream/shadow-circle.png");this.UMa=new ig.ia("media/pics/dream/side-line.png");this.wDa=new ig.ia("media/pics/dream/edge.png");this.mDa=new ig.ia("media/pics/dream/dot.png")},clone:function(){return new ig.sQa},Ka:function(){this.EMa.Tc();this.UMa.Tc();this.wDa.Tc();
this.mDa.Tc()}});var a=new ig.xp;ig.wgb=ig.da.extend({Bn:q,lJ:{NZ:new ig.xp,GZ:new ig.xp},borderColor:{NZ:new ig.xp,GZ:new ig.xp},Hba:0,C3:0,nq:{NZ:1,GZ:1,n:0,duration:0},ePa:0,R:{DEFAULT:{state:{},time:2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.zIndex=-21;this.F(ig.i.width,ig.i.height)},wO:function(a,c,d){this.pQ(this.lJ.NZ,this.lJ);this.pQ(this.borderColor.NZ,this.borderColor);this.lJ.GZ.assign(a);this.borderColor.GZ.assign(c);
this.C3=d;this.Hba=0},pQ:function(a,c){ig.xp.z4a(c.NZ,c.GZ,this.C3?this.Hba/this.C3:1,a);return a},IVa:function(){var a=this.nq.duration?this.nq.n/this.nq.duration:1;a!=1&&(a=KEY_SPLINES.EASE_IN_OUT.get(a));return this.nq.NZ*(1-a)+this.nq.GZ*a},Nta:function(a,c){this.nq.NZ=this.IVa();this.nq.GZ=a;this.nq.duration=c;this.nq.n=0},update:function(){if(this.nq.duration){this.nq.n=this.nq.n+ig.i.Sa;if(this.nq.n>=this.nq.duration)this.nq.duration=0}this.ePa=this.ePa+ig.i.Sa;if(this.C3){this.Hba=this.Hba+
ig.i.Sa;if(this.Hba>=this.C3)this.C3=0}},Da:function(b){if(this.Bn){b.nc("black",0,0,ig.i.width,ig.i.height).ge(0.5);var c=this.pQ(a,this.lJ).D0();b.nc(c,0,0,ig.i.width,ig.i.height).yi("lighter");var c=this.IVa(),d=this.ePa*Math.PI*1,c=c+0.015*Math.sin(d);if(c=Math.max(0,c)){b.ks().MB(c,c);var f=this.Bn.EMa,i=f.width,j=f.height,k=(ig.i.width/c-i)/2,l=(ig.i.height/c-j)/2;b.na(f,k,l,0,0,i,j,y,y);b.Xs();k=k*c;i=i*c;l=l*c;j=j*c;if(l>=0){b.nc("#161616",0,0,Math.ceil(ig.i.width),Math.ceil(l+2));b.nc("#161616",
0,Math.floor(l+j-2),Math.ceil(ig.i.width),Math.ceil(l+4))}if(k>=0){b.nc("#161616",0,Math.floor(l-2),Math.ceil(k+4),Math.ceil(j+4));b.nc("#161616",Math.floor(k+i-2),Math.floor(l-4),Math.ceil(k+4),Math.ceil(j+4))}}else b.nc("#161616",0,0,ig.i.width,ig.i.height);c=this.pQ(a,this.borderColor).D0();b.nc(c,0,0,ig.i.width,ig.i.height).yi("lighter");d=0.05*Math.sin(d*0.25);b.ks().MB(1.1,1.1).L7(d).Eb(ig.i.width/2,ig.i.height/2);d=this.Bn.wDa;c=d.width;b.na(d,0,0,0,0,c,this.a.size.y,y,y).yi("lighter");b.na(d,
this.a.size.x-c,0,0,0,c,this.a.size.y,h,y).yi("lighter");b.Xs()}}});ig.zgb=ig.da.extend({Bn:q,gc:[],It:0,Fqa:y,Bta:{left:new ig.Lya(12,h),right:new ig.Lya(12,h)},R:{DEFAULT:{state:{},time:2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.zIndex=-15},update:function(){this.It=this.It-ig.i.Sa;if(this.It<=0){this.It=this.It+0.15;this.Xp()}for(var a=this.gc.length;a--;){var c=this.gc[a];c.n=c.n+ig.i.Sa;c.y=c.y+ig.i.Sa*c.OMb;c.n>=c.duration&&
this.gc.splice(a,1)}},Da:function(a){if(this.Bn)for(var c=this.Bn.UMa,d=c.width,f=c.height,i=this.gc.length,j=ig.i.height/2;i--;){var k=this.gc[i],l=1;k.n<0.4?l=k.n/0.4:k.n>k.duration-0.4&&(l=(k.duration-k.n)/0.4);var m=(j-(k.y-f/2))/j,m=(1-m*m)*64;a.na(c,k.right?ig.i.width-d+m:-m,k.y-f/2,0,0,d,f,k.right,y).ge(l).yi("lighter")}},Xp:function(){var a=(this.Fqa?this.Bta.left.get():this.Bta.right.get())*ig.i.height,c=(Math.random()-0.5)*12,a={duration:2.5,n:0,right:this.Fqa,y:a,OMb:c};this.Fqa=!this.Fqa;
this.gc.push(a)}});ig.xgb=ig.da.extend({Bn:q,gc:[],It:0,Bta:new ig.Lya(36,y),rotate:0,R:{DEFAULT:{state:{},time:2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.zIndex=-14},update:function(){this.rotate=this.rotate+ig.i.Sa*0.02;if(this.rotate>=1)this.rotate=this.rotate-1;this.It=this.It-ig.i.Sa;if(this.It<=0){this.It=this.It+0.15;this.Xp()}for(var a=this.gc.length;a--;){var c=this.gc[a];c.n=c.n+ig.i.Sa;c.n>=c.duration&&this.gc.splice(a,
1)}},Da:function(a){if(this.Bn){var c=this.Bn.mDa,d=c.width,f=c.height,i=this.gc.length;a.ks().L7(this.rotate*Math.PI*2).Eb(ig.i.width/2,ig.i.height/2);for(var j=ig.i.width/2-160,k=ig.i.height/2-160;i--;){var l=this.gc[i],m=Math.sin(Math.PI*l.n/l.duration),n=m,o=j+l.x,t=k+l.y,l=l.x6a/2+l.x6a/2*m;a.ks().MB(l,l).Eb(o,t);a.na(c,o-d/2,t-f/2,0,0,d,f,y,y).ge(n).yi("lighter");a.Xs()}a.Xs()}},Xp:function(){var a=Math.floor(this.Bta.get()*36),c=Math.floor(a/6),d=320/6,a=(a%6+0.5)*d+(Math.random()-0.5)*d,c=
{duration:2.5,n:0,y:(c+0.5)*d+(Math.random()-0.5)*d,x:a,x6a:0.5+Math.random()*0.5};this.gc.push(c)}});ig.V9={WHITE:0,RED:1,BLACK:2};ig.ygb=ig.Uf.extend({Bn:q,EM:q,P_:q,VX:q,f:function(){this.parent("Overlay");this.EM=new ig.wgb;this.P_=new ig.zgb;this.VX=new ig.xgb},fj:function(){this.clear()},start:function(a,c){if(!this.Bn){this.Bn=a.clone();this.EM.Bn=a;this.P_.Bn=a;this.VX.Bn=a;ig.X.vd(this.EM);ig.X.vd(this.P_);ig.X.vd(this.VX);sc.q.e7a();if(c){this.EM.j("HIDDEN",h);this.EM.j("DEFAULT");this.P_.j("HIDDEN",
h);this.P_.j("DEFAULT");this.VX.j("HIDDEN",h);this.VX.j("DEFAULT")}}},clear:function(){if(this.Bn){this.Bn.Ka();this.Bn=q;this.EM.Bn=q;this.P_.Bn=q;this.VX.Bn=q;ig.X.sta(this.EM);ig.X.sta(this.P_);ig.X.sta(this.VX);sc.q.e7a()}},wO:function(a,c,d){this.EM.wO(a,c,d)},Nta:function(a,c){this.EM.Nta(a,c)},wc:function(){return!!this.Bn}});ig.Vf(function(){return ig.Xw=new ig.ygb})});ig.J=h;
ig.N("impact.feature.dream-fx.dream-fx-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.START_DREAM_FX=ig.qa.extend({t:new ig.u({attributes:{lJ:{c:"Color",d:"Color of center"},borderColor:{c:"Color",d:"Color of border"},nq:{c:"Number",d:"Size of visible circle in center. 1=fullSize"},Ai:{c:"Boolean",d:"If true, slowly fade in effects"}}}),f:function(a){this.Bn=new ig.sQa;this.lJ=new ig.xp(a.centerColor);this.borderColor=new ig.xp(a.borderColor);this.nq=a.circleSize||0;this.Ai=
a.transition||y},Ka:function(){this.Bn.Ka()},start:function(){ig.Xw.start(this.Bn,this.Ai);ig.Xw.wO(this.lJ,this.borderColor,0);ig.Xw.Nta(this.nq,0)}});ig.oa.CLEAR_DREAM_FX=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){ig.Xw.clear()}});ig.oa.SET_DREAM_FX_COLORS=ig.qa.extend({t:new ig.u({attributes:{lJ:{c:"Color",d:"Color of center"},borderColor:{c:"Color",d:"Color of border"},duration:{c:"Number",d:"Duration of transition"}}}),f:function(a){this.lJ=new ig.xp(a.centerColor);this.borderColor=
new ig.xp(a.borderColor);this.duration=a.duration||0},start:function(){ig.Xw.wO(this.lJ,this.borderColor,this.duration)}});ig.oa.SET_DREAM_FX_CIRCLE_SIZE=ig.qa.extend({t:new ig.u({attributes:{nq:{c:"Number",d:"Size of visible circle in center. 1=fullSize"},duration:{c:"Number",d:"Duration of transition"}}}),f:function(a){this.nq=a.circleSize||0;this.duration=a.duration||0},start:function(){ig.Xw.Nta(this.nq,this.duration)}})});ig.J=h;
ig.N("impact.feature.dream-fx.plug-in").O("impact.feature.dream-fx.dream-fx","impact.feature.dream-fx.dream-fx-steps").K(function(){if(window.Ed){wm.Um(/DREAM_MSG/,"red");wm.Um(/DREAM/,"yellow")}});ig.J=h;
ig.N("impact.feature.gui.base.basic-gui").O("impact.feature.gui.gui").K(function(){ig.ec=ig.da.extend({wd:q,offsetX:0,offsetY:0,qg:q,Pd:y,$h:y,z8a:y,frames:q,vh:0,Mo:0,n:0,loop:y,bl:h,f:function(a,b,c,d,f){this.parent();a&&this.hMa(a,b,c,d,f)},hMa:function(a,b,c,d,f){this.wd=a;this.offsetX=b||0;this.offsetY=c||0;this.a.size.x=d||0;this.a.size.y=f||0;this.wd.Yt(this)},kha:function(a,b,c,d){this.loop=d!=g?d:h;this.bl=y;this.frames=a;this.Mo=b;this.vh=c},SWb:function(){this.n=0;this.bl=y},Eq:function(){this.a.size.x=
this.a.size.x||this.wd.width;this.a.size.y=this.a.size.y||this.wd.height;this.a.size.x=Math.min(this.a.size.x,this.wd.width);this.a.size.y=Math.min(this.a.size.y,this.wd.height);if(!this.z8a){this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2}},update:function(){if(this.frames&&!this.bl)this.n=this.n+ig.i.Sa},Da:function(a){var b=0,c=0;if(this.frames){c=Math.floor(this.n/this.Mo)%this.frames.length;if(c==this.frames.length-1&&!this.loop)this.bl=h;b=c%this.vh*this.a.size.x;c=Math.floor(c/this.vh)*
this.a.size.y}a.na(this.wd,0,0,this.offsetX+b,this.offsetY+c,this.a.size.x,this.a.size.y,this.Pd,this.$h).yi(this.qg)}});ig.mf=ig.da.extend({color:q,qg:q,f:function(a,b,c){this.parent();this.color=a;this.a.size.x=b==g?ig.i.width:b;this.a.size.y=c==g?ig.i.height:c;this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2},Da:function(a){this.a.size.x!=0&&this.a.size.y!=0&&a.nc(this.color,0,0,this.a.size.x,this.a.size.y).yi(this.qg)}});ig.qka={wRa:1,mC:2};ig.oya=ig.da.extend({n:-1,CE:0,s:q,X:q,dl:q,hta:[],
tna:q,f:function(a){this.parent();this.Gb=a;this.dl&&this.q4a(this.s,this.X,this.dl)},q4a:function(a,b,c){this.s=a;this.X=b;this.dl=c;for(var d in this.X){a=this.X[d];if(a.s){this.X[d]=a.src?new ig.ec(this.s[a.s],a.src.x,a.src.y,a.src.Vc,a.src.sd):new ig.ec(this.s[a.s]);a.bb&&this.X[d].kha(a.bb.frames,a.bb.time,a.bb.vh);if(a.g)this.X[d].a.g=a.g;if(a.align)this.X[d].a.align=a.align;if(a.qg)this.X[d].qg=a.qg;if(a.Db){this.X[d].a.Db=a.Db;this.X[d].z8a=h}if(a.$b)this.X[d].$b=a.$b;this.X[d].Pd=a.Pd||y;
this.X[d].$h=a.$h||y}else if(a.$b)continue;else this.X[d]=new ig.mf(a.color);this.X[d].a.R=a.R;this.X[d].j("HIDDEN",h);this.m(this.X[d])}},update:function(){if(this.n>=0)for(this.n=this.n+ig.i.Sa;this.CE<this.dl.length&&this.dl[this.CE].time<=this.n;){var a=this.dl[this.CE];if(a.X){a.O8a&&this.X[a.X].j(a.O8a,h);a.state&&this.X[a.X].j(a.state);a.$b&&a.$b.play()}else if(a.$b)a.$b.$b.play(y,a.$b.zMb);else if(a.end){this.end();break}else if(a.$2a)this.zqa(a.$2a);else if(a.label)this.mXa(a.label);else if(a.obb!==
g)this.tna=a.obb;this.CE++}},mXa:function(a){if(this.hta.indexOf(a)==-1){this.hta.push(a);this.d7a(ig.qka.wRa,a)}},start:function(){for(var a in this.X)this.X[a].$b||this.X[a].j("HIDDEN",h);this.Ud={};this.hta.length=0;this.tna=q;this.CE=this.n=0},end:function(){this.CE=0;this.n=-1;this.d7a(ig.qka.mC)},d7a:function(a,b){this.Gb&&this.Gb(a,b||q)},Nq:function(){this.tna&&this.zqa(this.tna)},zqa:function(a){for(var b=this.dl.length;b--;)if(this.dl[b].label==a){this.n=this.dl[b].time;this.CE=b;this.mXa(a);
break}},Lda:function(){return this.n<0},BDb:function(a){return this.hta.indexOf(a)!=-1}});ig.t$=ig.da.extend({hide:function(a,b){this.j("HIDDEN",a,y,q,b)},show:function(a,b){this.j("DEFAULT",a,y,q,b)}})});ig.J=h;
ig.N("impact.feature.parallax.parallax").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image").K(function(){ig.ySa=ig.XE.extend({Wi:"Parallax",s:{},X:{},dl:[],iZa:y,Ss:y,f:function(a){this.parent(a)},Wo:function(){for(var a in this.s)this.s[a].Tc();for(a in this.X)this.X[a].$b&&this.X[a].$b.Ka();delete this.s},oG:function(){return ig.root+this.path.vm("data/parallax/",".json")+ig.Kn()},onload:function(a){if(a.cancelSkip)this.iZa=h;if(a.blockSkip)this.Ss=h;this.Gqb(a.entries,
a.points);this.Hqb(a.sequence)},Gqb:function(a,b){for(var c=0;c<a.length;++c){var d=a[c],f={};this.s[d.gfx]||(this.s[d.gfx]=new ig.ia(d.gfx));if(d.gfx)f.s=d.gfx;else if(d.color)f.color=d.color;f.align={x:ig.k.hb,y:ig.k.$};if(d.align){if(d.align.x){var i=ig.Fja[d.align.x];i||e(Error("Unknown x align type '"+d.align.x+"'"));f.align.x=i}if(d.align.y){(i=ig.Iwa[d.align.y])||e(Error("Unknown y align type '"+d.align.y+"'"));f.align.y=i}}f.R={HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}};if(d.pos)f.g=
Vec2.create(d.pos);if(d.src)f.src={x:d.src.x,y:d.src.y,Vc:d.src.w,sd:d.src.h};if(d.sound){f.$b=new ig.ka(d.sound,d.volume,d.variance);f.zMb={speed:d.speed||1}}if(d.anim)f.bb={frames:d.anim.frames,time:d.anim.time,vh:d.anim.xCount};if(d.pivot)if(i=b[d.pivot]){f.Db=Vec2.create(i);f.g&&Vec2.sub(f.Db,f.g)}f.qg=d.renderMode||q;f.Pd=d.flipX||y;f.$h=d.flipY||y;this.X[d.name]=f}},Hqb:function(a){for(var b=0,c=KEY_SPLINES.LINEAR,d=0;d<a.length;++d){var f=a[d];if(f.wait)b=b+f.wait*1;else if(f.keySpline)c=KEY_SPLINES[f.keySpline];
else if(f["goto"])this.dl.push({time:b,$2a:f["goto"]});else if(f.label)this.dl.push({time:b,label:f.label});else if(f.skipLabel!==g)this.dl.push({time:b,obb:f.skipLabel});else if(f.sound)this.dl.push({time:b,$b:this.X[f.sound]});else{var i=this.X[f.entry],j={X:f.entry};if(f.reset||!f.reset&&!f.move){var k="STEP"+d+"_PRE",l={};f.reset&&this.cVa(l,f.reset);i.R[k]={state:l,time:0,p:c};j.O8a=k}if(f.move){k="STEP"+d;l={};this.cVa(l,f.move);i.R[k]={state:l,time:f.duration*1,p:c};j.state=k}j.time=b;this.dl.push(j)}}this.dl.push({time:b,
end:h})},cVa:function(a,b){a.offsetX=b.x||0;a.offsetY=b.y||0;if(b.alpha!=g)a.alpha=b.alpha;a.Qb=(b.angle||0)*Math.PI*2;a.Xa=1;a.Va=1;if(b.zoom!=g){a.Xa=a.Xa*b.zoom;a.Va=a.Va*b.zoom}if(b.scaleX!=g)a.Xa=a.Xa*b.scaleX;if(b.scaleY!=g)a.Va=a.Va*b.scaleY}});ig.lj.Parallax=ig.zSa=ig.oya.extend({xB:q,C5a:y,t:new ig.u({attributes:{xB:{c:"String",d:"Parallax to show",U:"parallax"}}}),R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}},f:function(a,b){this.parent(b||
q);this.a.zIndex=0;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.xB=new ig.ySa(a.parallax);this.xB.Yt(this)},Ka:function(){this.xB&&this.xB.Tc()},Eq:function(){this.q4a(this.xB.s,ig.copy(this.xB.X),ig.copy(this.xB.dl))},Vo:function(){this.j("HIDDEN",h);this.j("DEFAULT")},start:function(a){this.xB.iZa&&sc.q.YK();if(this.xB.Ss)sc.q.Ss=h;this.parent();this.C5a=a||y;this.j("HIDDEN",h);this.j("DEFAULT")},end:function(){if(this.xB.Ss)sc.q.Ss=y;this.parent();this.C5a||this.j("HIDDEN",y,h)}})});
ig.J=h;ig.N("impact.feature.parallax.parallax-steps").O("impact.feature.parallax.parallax","impact.base.action","impact.base.event").K(function(){ig.oa.SHOW_PARALLAX=ig.qa.extend({cga:q,t:new ig.u({attributes:{xB:{c:"String",d:"Parallax to show",U:"parallax"}}}),f:function(a){if(!window.Ed)this.cga=ig.X.Wba("__parallaxGui__","Parallax",{parallax:a.parallax})},Ka:function(){ig.X.AEa(this.cga)},start:function(){ig.X.Qha(this.cga);this.cga.start()},ya:function(){return this.cga.Lda()}})});ig.J=h;
ig.N("impact.feature.parallax.plug-in").O("impact.feature.parallax.parallax","impact.feature.parallax.parallax-steps").K(J());ig.J=h;
ig.N("impact.feature.screen-blur.screen-blur").O("impact.base.game").K(function(){ig.Wva={LIGHTER:{Q8:0.025,duration:0.5,repeat:3,ZW:0.3},LIGHT:{Q8:0.05,duration:0.5,repeat:3,ZW:0.5},MEDIUM:{Q8:0.15,duration:0.1,repeat:5,ZW:0.3},SLOW_INTENSE:{Q8:0.15,duration:0.5,repeat:5,ZW:0.3},STATIC_LIGHT:{Q8:0.05,duration:0,repeat:3,ZW:0.5}};ig.rnb=ig.Uf.extend({buffer:q,context:q,HYa:q,fba:q,tcb:q,ucb:q,PD:1,Bq:1,CK:0,jJb:0,yoa:y,n:q,eI:[],n6:{},f:function(){this.parent("ScreenBlur");this.n=new ig.Vt(h,1,ig.Ol.Uva);
var a=ig.Yr("canvas");a.width=ig.i.qO;a.height=ig.i.pO;this.buffer=a;this.context=ig.i.ys(a);this.context.scale(ig.i.SC,ig.i.SC);a=ig.Yr("canvas");a.width=ig.i.qO;a.height=ig.i.pO;this.HYa=a;this.fba=ig.i.ys(a);this.fba.scale(ig.i.SC,ig.i.SC);this.yoa=h},ge:function(a){this.Bq=this.PD=a;if(a==1)this.yoa=h},clear:function(){this.ge(1)},awb:function(){this.eI.length=0;this.n6={}},dBa:function(a){if(a.name){this.n6[a.name]&&this.eI.ye(this.n6[a.name]);this.n6[a.name]=a}this.eI.push(a)},G0a:function(a,
b){var c=this.n6[a];c&&c.oha(b)},az:function(){this.n.ja();this.CK=this.CK-ig.i.ja;for(var a=this.eI.length;a--;)if(this.eI[a].update()){var b=this.eI[a];b.name&&delete this.n6[b.name];this.eI.splice(a,1)}},Hsa:1E3,asa:function(){if(this.GVa()<1||this.eI.length){this.ucb=ig.i.context;this.tcb=ig.i.canvas;ig.i.context=this.context}},Dsa:200,Zra:function(){var a=this.GVa();if(a<1||this.eI.length){var b=y,c=ig.i.qO,d=ig.i.pO,f=ig.i.TC,i=ig.i.RC;if(a<1&&this.CK<=0){this.CK=this.CK+this.jJb;this.fba.globalAlpha=
this.yoa?1:a;this.fba.drawImage(this.buffer,0,0,c,d,0,0,f,i);this.fba.globalAlpha=1;this.yoa=y;b=h}ig.i.context=this.ucb;ig.i.canvas=this.tcb;a<1&&ig.i.context.drawImage(this.HYa,0,0,c,d,0,0,f,i);if(!b){ig.i.context.globalAlpha=a;ig.i.context.drawImage(this.buffer,0,0,c,d,0,0,f,i);ig.i.context.globalAlpha=1}for(a=0;a<this.eI.length;++a)this.eI[a].nb(this.buffer,c,d,f,i)}},fj:function(){this.clear();this.awb()},GVa:function(){var a=this.n.get();return this.PD*a+this.Bq*(1-a)}});ig.Vf(function(){return ig.C_=
new ig.rnb});ig.Uya=ig.Ca.extend({name:q,fd:q,vYa:0,iG:q,CK:q,woa:0,duration:0,gY:0,state:0,f:function(a,b,c,d,f){this.iG=new ig.Vt(h);this.CK=new ig.Vt(h);this.fd=ig.Wva[a];this.vYa=this.fd.ZW/(this.fd.repeat-1);this.name=f||q;this.duration=b;this.woa=c;this.gY=d;this.CK.set(this.fd.duration,ig.Ol.REPEAT);this.state=0;this.iG.set(this.woa,ig.Ol.br)},update:function(){if(this.state==0&&(!this.woa||this.iG.Xb())){this.state=1;this.iG.set(this.duration,ig.Ol.br)}if(this.state==1&&this.duration!=-1&&
this.iG.Xb()){this.state=2;this.iG.set(this.gY,ig.Ol.br)}if(this.state==2&&(!this.gY||this.iG.Xb()))return h;this.iG.ja();this.CK.ja();return y},Zl:function(){this.oha(this.gY)},oha:function(a){this.gY=a;this.state=2;this.iG.set(a,ig.Ol.br)},nb:function(a,b,c,d,f){var i;switch(this.state){case 0:i=this.iG.get();break;case 1:i=1;break;case 2:i=1-this.iG.get()}var j=this.CK.get(),k=this.fd,l=1+j*k.Q8;ig.i.context.globalAlpha=i*j*k.ZW;for(var m=0;m<k.repeat;++m){var n=l,o=ig.i.context;o.save();o.translate(ig.i.TC/
2,ig.i.RC/2);o.scale(n,n);o.translate(-ig.i.TC/2,-ig.i.RC/2);ig.i.context.drawImage(a,0,0,b,c,0,0,d,f);ig.i.context.restore();ig.i.context.globalAlpha=i*(k.ZW-this.vYa*(j+m));l=l+k.Q8}ig.i.context.globalAlpha=1}})});ig.J=h;
ig.N("impact.feature.screen-blur.screen-blur-steps").O("impact.feature.screen-blur.screen-blur","impact.base.action","impact.base.event").K(function(){ig.oa.SET_SCREEN_BLUR=ig.qa.extend({alpha:0,t:new ig.u({attributes:{alpha:{c:"Number",d:"Alpha of Screen blur. The lower, the stronger the effect",ab:0.5}}}),f:function(a){this.alpha=a.alpha||0.5},start:function(){ig.C_.ge(this.alpha)}});ig.oa.CLEAR_SCREEN_BLUR=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){ig.C_.clear()}});ig.oa.SET_ZOOM_BLUR=
ig.qa.extend({U0:q,fadeIn:0,duration:0,fadeOut:0,name:q,t:new ig.u({attributes:{U0:{c:"String",d:"Type of Zoom Blur effect",U:ig.Wva},fadeIn:{c:"Number",d:"Time in seconds for effect to fade in",ab:0.2},duration:{c:"Number",d:"Time of effect. -1 = run forever",ab:1},fadeOut:{c:"Number",d:"Time in seconds for effect to fade out",ab:0.2},name:{c:"String",d:"Name of zoom blur. Can be used to fadeOut permanent zoom blurs",I:h}}}),f:function(a){this.U0=a.zoomType;this.fadeIn=a.fadeIn;this.duration=a.duration;
this.fadeOut=a.fadeOut;this.name=a.name},start:function(){var a=new ig.Uya(this.U0,this.duration,this.fadeIn,this.fadeOut,this.name);ig.C_.dBa(a)}});ig.oa.FADE_OUT_ZOOM_BLUR=ig.qa.extend({name:q,fadeOut:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of zoom blur to be faded out"},fadeOut:{c:"Number",d:"Time in seconds for effect to fade out",ab:0.2}}}),f:function(a){this.name=a.name;this.fadeOut=a.fadeOut||0},start:function(){ig.C_.G0a(this.name,this.fadeOut)}});ig.la.SET_ZOOM_BLUR=ig.ta.extend({U0:q,
fadeIn:0,duration:0,fadeOut:0,name:q,t:new ig.u({attributes:{U0:{c:"String",d:"Type of Zoom Blur effect",U:ig.Wva},fadeIn:{c:"Number",d:"Time in seconds for effect to fade in",ab:0.2},duration:{c:"Number",d:"Time of effect. -1 = run forever",ab:1},fadeOut:{c:"Number",d:"Time in seconds for effect to fade out",ab:0.2},name:{c:"String",d:"Name of zoom blur. Can be used to fadeOut permanent zoom blurs",I:h}}}),f:function(a){this.U0=a.zoomType;this.fadeIn=a.fadeIn;this.duration=a.duration;this.fadeOut=
a.fadeOut;this.name=a.name},start:function(a){var b=new ig.Uya(this.U0,this.duration,this.fadeIn,this.fadeOut,this.name);ig.C_.dBa(b);this.duration==-1&&a.Hj(b)}});ig.la.FADE_OUT_ZOOM_BLUR=ig.ta.extend({name:q,fadeOut:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of zoom blur to be faded out"},fadeOut:{c:"Number",d:"Time in seconds for effect to fade out",ab:0.2}}}),f:function(a){this.name=a.name;this.fadeOut=a.fadeOut||0},start:function(){ig.C_.G0a(this.name,this.fadeOut)}})});ig.J=h;
ig.N("impact.feature.screen-blur.plug-in").O("impact.feature.screen-blur.screen-blur","impact.feature.screen-blur.screen-blur-steps").K(function(){window.Ed&&wm.Um(/SCREEN_BLUR/,"yellow")});ig.J=h;
ig.N("impact.feature.terrain.terrain").O("impact.base.loader","game.config").K(function(){var a=Vec2.create();ig.Wob=ig.UL.extend({Wi:"Terrain",ICb:{},gFb:{},Xua:{},y_a:[],I0a:[],f:function(){if(!ig.hd)return ig.warn("No TERRAIN specified. Please create ig.TERRAIN in game.config");if(!ig.xya)return ig.warn("Can't initialize terrain because no ig.TERRAIN_FILE was provided");ig.hd.undefined=0;this.gFb=ig.hd;for(var a in ig.hd)this.ICb[ig.hd[a]]=a;this.parent()},qta:function(a,c){this.y_a.push(a);c&&
this.I0a.push(a)},qqa:function(a){return this.y_a.indexOf(a)!=-1},vea:function(a){return this.I0a.indexOf(a)!=-1},pN:function(b,c,d){if(!b)return 0;var f=b.tb(a);if(b.Nc&&b.Nc.Mj&&b.Nc.Mj.Q.Pb)return b.Nc.Mj.Q.Pb*1;var i=0,j=b.aa,k=ig.r.lpa(j);do{i=this.mFa(f.x,f.y+ig.r.lpa(j)-k,j,c?b.size.x:0,c?b.size.y:0);j--}while(d&&!i&&j>=0);return i||ig.VL},YAb:function(a,c,d,f,i){for(var j=ig.r.Hy(d),k=ig.r.lpa(j),l=ig.r.Br(a-f/2,c-i/2,k,f,i,d-k),m=l.length,n=0;m--;){var o=l[m],t=o.b,t=t.g.z+t.size.z;if(o.Pb&&
t<=d&&t>=k){n=o.Pb;k=t}}return n?n:this.mFa(a,c,j,f,i)},mFa:function(a,c,d,f,i){if(!ig.r.rb[d])return 0;var c=c-ig.r.rb[d].height,d=ig.r.rb[d].Df,j;if(j=this.Q$(d,a,c))return j;if(f||i){if(j=this.Q$(d,a-f/2,c))return j;if(j=this.Q$(d,a+f/2,c))return j;if(j=this.Q$(d,a,c-i/2))return j;if(j=this.Q$(d,a,c+i/2))return j}return 0},Q$:function(a,c,d){for(var f=a.length;f--;){var i=this.Xua[a[f].w0];if(a[f]instanceof ig.$j.Background&&i){var j=a[f].xda(c,d);if(j&&i[j-1])return i[j-1]*1}}return 0},vBb:function(a,
c){var d=this.Xua[a.w0];return!d?ig.VL:d[c-1]},wu:function(){$.ajax({dataType:"json",url:ig.root+ig.xya+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(){this.Xua={};this.Xl(h)},onload:function(a){this.Xua=a;this.Xl(h)}});ig.Pb=new ig.Wob});ig.J=h;ig.N("impact.feature.terrain.plug-in").O("impact.feature.terrain.terrain").K(J());ig.J=h;
ig.N("impact.feature.interact.interact").O("impact.base.game").K(function(){ig.tRa=ig.Ca.extend({wc:function(){return ig.La.xb[ig.La.xb.length-1]==this},q7a:J(),s7a:J(),update:J()});ig.wib=ig.Uf.extend({AA:0,xb:[],f:function(){this.parent("Interact")},De:function(a){if(this.xb.indexOf(a)==-1){this.xb.push(a);a.q7a()}},$e:function(a){var b=this.xb.indexOf(a);if(b!=-1){this.xb.splice(b,1);a.s7a()}},Md:function(a){this.AA=a===g?0.2:a},zh:function(){return this.AA>0},QM:0,Eu:function(){if(this.AA>0){this.AA=
this.AA-ig.i.Sa;if(this.AA<0)this.AA=0;else return}this.xb.length>0&&this.xb[this.xb.length-1].update()}});ig.Vf(function(){return ig.La=new ig.wib})});ig.J=h;
ig.N("impact.feature.interact.button-interact").O("impact.feature.interact.interact").K(function(){ig.tw={fI:0,dQ:1,Ija:2};ig.wh=ig.Ca.extend({Z:q,elements:[],iha:[],Rsa:[],pfa:q,Sk:q,Qa:{x:0,y:0},n9a:{x:0,y:0},nZ:{x:0,y:0},Zea:h,OO:y,Bca:y,CS:y,jha:ig.tw.fI,ft:q,Tza:y,Na:{focus:q},f:function(a,b,c){this.jha=a||ig.tw.fI;this.Zea=b!=g?b:h;this.OO=c||y},jd:function(a,b,c,d){d&&this.Tsb(a);this.elements[b]||(this.elements[b]=[]);this.elements[b][c]=a;a.ua=this;a.Z=q;this.nZ.x=Math.max(this.nZ.x,b);this.nZ.y=
Math.max(this.nZ.y,c)},gEa:function(){for(var a=0;a<this.elements.length;a++)for(var b=0;b<this.nZ.y;b++){this.elements[a]||(this.elements[a]=[]);this.elements[a][b]||(this.elements[a][b]=q)}},t4a:function(a,b,c){this.elements[b]||(this.elements[b]=[]);this.pva();this.elements[b].splice(c,0,a);a.ua=this;a.Z=q},lLa:function(a,b){this.elements[a]||(this.elements[a]=[]);var c=this.elements[a].splice(b,1)[0];if(!c)return q;c.yk&&c.ff(y);c.ai();c.ua=q;c.Z=q;return c},hYa:function(a,b){this.elements[a]||
(this.elements[a]=[]);this.elements[a][b]=q},LVb:function(a,b){for(var c=0;c<a;c++)for(var d=0;d<b;d++){this.elements[c]||(this.elements[c]=[]);this.elements[c][d]=q}},LGa:function(){if(this.elements[this.Qa.x]){var a=this.elements[this.Qa.x][this.Qa.y];if(a)if(a.Aa){if(a.yk){if(!a.Yc){a.kB();a.ff(h)}}else a.kB();this.qWa(a);this.ft&&(!this.ft.iHa(a)&&this.ft.yk)&&this.ft.ff(y);if(!this.Bca)this.ft=a}else a.fo&&a.fo.play()}},pea:function(){this.Sk&&this.Sk.kB()},jn:function(a){if(a)this.pfa=a},Ql:function(a){a&&
this.Rsa.push(a)},MWb:function(a){a&&this.Rsa.remove(a)},Rk:function(a){a&&this.iha.push(a)},PWb:function(a){a&&this.iha.remove(a)},Yvb:function(){this.iha.length=0},Eua:function(){if(this.jha!=ig.tw.dQ&&!this.tt()){var a=this.Qa.x;if(this.Zea)for(;!this.elements[++a%this.elements.length];);else{a++;if(a>=this.elements.length)a=this.elements.length-1;else for(var b=a;b<this.elements.length;b++)if(this.elements[b]){a=b;break}}a=a%this.elements.length;if(this.elements[a][this.Qa.y])this.V0a(a);else{for(var c=
b=this.Qa.y,d=0,f=0;!this.elements[a][++b%this.elements[a].length];)d++;c--;for(c<0&&(c=this.elements[a].length-1);!this.elements[a][c];){c--;f++;c<0&&(c=this.elements[a].length-1)}d<f?this.Sg(a,b):this.Sg(a,c)}}},Dua:function(){if(this.jha!=ig.tw.dQ&&!this.tt()){var a=this.Qa.x-1;if(this.Zea)for(a<0&&(a=this.elements.length-1);!this.elements[a];){a--;a<0&&(a=this.elements.length-1)}else if(a<0)a=0;else for(var b=a;b>=0;b--)if(this.elements[b]){a=b;break}if(this.elements[a][this.Qa.y])this.V0a(a);
else{for(var c=b=this.Qa.y,d=0,f=0;!this.elements[a][++b%this.elements[a].length];)d++;c--;for(c<0&&(c=this.elements[a].length-1);!this.elements[a][c];){c--;f++;c<0&&(c=this.elements[a].length-1)}d<f?this.Sg(a,b):this.Sg(a,c)}}},INa:function(a){if(this.jha!=ig.tw.Ija&&!this.tt()){var b=this.Qa.y;if(this.elements[this.Qa.x]){if(a)b=a+b>=this.elements[this.Qa.x].length?this.elements[this.Qa.x].length-1:b+a;else if(this.Zea)for(;this.elements[this.Qa.x][++b%this.elements[this.Qa.x].length]===g;);else{b++;
if(b>=this.elements[this.Qa.x].length)b=this.elements[this.Qa.x].length-1;else for(a=b;a<this.elements[this.Qa.x].length;a++)if(this.elements[this.Qa.x][a]!==g){b=a;break}}b=b%this.elements[this.Qa.x].length;if(this.elements[this.Qa.x][b])this.W0a(b);else{for(var c=a=this.Qa.x,d=0,f=0;!this.elements[++a%this.elements.length][b];)d++;c--;for(c<0&&(c=this.elements.length-1);!this.elements[c][b];){c--;f++;c<0&&(c=this.elements.length-1)}d<f?this.Sg(a,b):this.Sg(c,b)}}}},KNa:function(a){if(this.jha!=
ig.tw.Ija&&!this.tt()){var b=this.Qa.y-1;if(this.elements[this.Qa.x]){if(a)b=b-a<0?0:b-a;else if(this.Zea)for(b<0&&(b=this.elements[this.Qa.x].length-1);this.elements[this.Qa.x][b]===g;){b--;b<0&&(b=this.elements[this.Qa.x].length-1)}else if(b<0)b=0;else for(a=b;a>=0;a--)if(this.elements[this.Qa.x][a]!==g){b=a;break}if(this.elements[this.Qa.x][b])this.W0a(b);else{for(var c=a=this.Qa.x,d=0,f=0;!this.elements[++a%this.elements.length][b];)d++;for(;!this.elements[c][b];){c--;f++;c<0&&(c=this.elements.length-
1)}d<f?this.Sg(a,b):this.Sg(c,b)}}}},DUa:function(){if(!ig.input.Id&&!this.CS){var a=this.oY();if(a){a.Lo();this.uQ(a)}}},qVa:function(){for(var a=0;a<this.elements.length;++a)if(this.elements[a])for(var b=0;b<this.elements[a].length;++b)this.elements[a][b]&&this.elements[a][b].ai();this.ft&&this.ft.ff(y);this.ft=q},clear:function(){var a=this.elements[this.Qa.x]?this.elements[this.Qa.x][this.Qa.y]:q;if(a){a.yk&&a.ff(y);a.ai()}this.Qa.x=0;this.Qa.y=0;this.elements=[];this.nZ.x=0;this.nZ.y=0;this.ft=
q},xJ:J(),oY:function(){return this.elements[this.Qa.x]&&this.elements[this.Qa.x][this.Qa.y]},Jr:N(y),tt:function(){return this.elements.length==0},$4a:function(a,b){return this.elements[a]&&this.elements[a][b]},wc:function(){if(!this.Z||!this.Z.wc())return y;if(this.Tza)return h;var a=this.Z.n3;return a.length==0?y:this==a[a.length-1]},fXb:L("ft"),qMa:J(),tl:function(a,b){this.Qa.x=a;this.Qa.y=b},zha:function(a,b){this.n9a.x=a;this.n9a.y=b},V0a:function(a){if(this.Qa.x!=a){this.elements[this.Qa.x][this.Qa.y]&&
this.elements[this.Qa.x][this.Qa.y].ai();this.Qa.x=a%this.elements.length;a=this.elements[this.Qa.x][this.Qa.y];a.yk&&!this.OO?a.Yc||this.Na.focus&&this.Na.focus.play():this.Na.focus&&this.Na.focus.play();a.Lo();this.uQ(a)}},W0a:function(a){if(this.Qa.y!=a){this.elements[this.Qa.x][this.Qa.y]&&this.elements[this.Qa.x][this.Qa.y].ai();this.Qa.y=a%this.elements[this.Qa.x].length;a=this.elements[this.Qa.x][this.Qa.y];a.yk&&!this.OO?a.Yc||this.Na.focus&&this.Na.focus.play():this.Na.focus&&this.Na.focus.play();
a.Lo();this.uQ(a)}},Sg:function(a,b,c,d,f,i){if(!this.Z||!this.Z.eg)if(i||this.oY())if(!f||!(this.Qa.x==a&&this.Qa.y==b)){this.elements[this.Qa.x][this.Qa.y]&&this.elements[this.Qa.x][this.Qa.y].ai();this.Qa.x=a%this.elements.length;this.Qa.y=b%this.elements[this.Qa.x].length;d=d!=g?d:y;a=this.elements[this.Qa.x][this.Qa.y];a.yk&&!this.OO?a.Yc||!d&&this.Na.focus&&this.Na.focus.play():!d&&this.Na.focus&&this.Na.focus.play();a.Lo();c||this.uQ(a)}},AIb:function(a){this.Sg(this.Qa.x,this.Qa.y,a||y,h)},
pva:function(){var a=this.elements[this.Qa.x][this.Qa.y];a&&a.ai()},Gzb:function(){return this.Qa.x},M1a:function(){return this.Qa.y},EU:function(a){this.ft&&this.ft.ff(y);a.ff(h);if(!this.Bca)this.ft=a},Tsb:L("Sk"),uQ:function(a){for(var b=this.iha.length;b--;)this.iha[b](a)},qWa:function(a,b){for(var c=this.Rsa.length;c--;)this.Rsa[c](a,b||y)}});ig.$s=ig.tRa.extend({n3:[],dga:[],ue:[],Yda:[],eg:q,BZ:y,qra:y,hh:function(a){this.n3.push(a);a.Z=this;if(this.wc()){a.DUa();ig.input.Id&&(this.qra&&this.eg)&&
a.uQ(this.eg)}},sl:function(a){this.n3.ye(a);a.Z=this;a.qVa()},Jd:function(a,b,c){if(!(c&&this.ue.indexOf(a)!=-1)){this.Yda.push(b||q);this.ue.push(a);a.Z=this;a.ua=q}},Te:function(a){a.Z=q;var b=this.ue.indexOf(a);if(b!=-1){this.ue.splice(b,1);this.Yda.splice(b,1);a.ai()}},KQ:function(a){if(a){a.Tza=h;a.Z=this;this.dga.push(a)}},lU:function(a){if(a){a.Tza=y;a.Z=q;this.dga.ye(a)}},Aba:function(){for(var a=this.ue.length,b=q;a--;){b=this.ue[a];b.Z=q;b.ai()}this.ue=[];this.Yda=[]},pause:function(a){this.wK=
a||BUTTON_GROUP_DEFAULT_PAUSE_TIME},q7a:function(){var a=this.yda();a&&a.DUa()},s7a:function(){var a=this.yda();a&&a.qVa();if(this.eg){this.eg.ai();this.eg=q;this.BZ=y}},Uvb:function(){if(this.eg){this.eg.ai();this.eg=q;this.BZ=y}},update:function(){var a=this.yda();if(a&&a.Jr())ig.input.Id=y;if(ig.input.Id){if(a&&!this.Mga){this.Mga=h;var b=a.oY();if(b&&this.eg!=b){b.focus&&!this.eg&&this.pWa();b.ai()}}if(this.eg&&sc.ba.iAb())this.BZ=h;if(this.BZ&&this.eg&&sc.ba.e2a()&&!ig.La.zh()){a=this.eg.ua;
if(this.eg.Aa){if(this.eg.yk){if(!this.eg.Yc){this.eg.kB();this.eg.ff(h)}}else this.eg.kB();a&&a.qWa(this.eg,h);if(a){a.ft&&(!a.ft.iHa(this.eg)&&a.ft.yk)&&a.ft.ff(y);if(!a.Bca)a.ft=this.eg}}else this.eg.fo&&this.eg.fo.play()}if(!this.qra&&this.eg&&this.eg.OBa()){this.eg.ai();this.eg=q;this.BZ=y;this.pWa()}this.qra=y}else if(a){if(this.Mga){b=a.oY();if(this.eg==b)this.Mga=y;if(this.eg){this.eg.ai();this.eg=q;this.BZ=y}if(b&&!a.CS){b.Lo();a.uQ(b)}}a.xJ(this.Mga);this.Mga=y}for(a=this.ue.length;a--;)if(this.Yda[a]&&
this.Yda[a]()){if(!this.ue[a].dg)ig.input.Id=y;this.ue[a].Aa?this.ue[a].kB(h):this.ue[a].fo&&this.ue[a].fo.play()}},qMa:function(a){var b=a.ua||this.yda();if(b.wc()&&ig.input.Id){if(this.eg!=a&&(this.eg?this.eg.OBa():1)){this.eg&&this.eg.ai();a.PBa()&&(a.yk?b.OO?b.Na.focus&&b.Na.focus.play():a.Yc||b.Na.focus&&b.Na.focus.play():b.Na.focus&&b.Na.focus.play());a.Lo();this.eg=a;this.BZ=y;b.uQ(this.eg)}this.qra=h}},yda:function(){return this.n3.length>0?this.n3[this.n3.length-1]:q},pWa:function(){var a=
this.yda();a&&a.pfa&&a.pfa();for(a=this.dga.length;a--;)this.dga[a].pfa&&this.dga[a].pfa()}})});ig.J=h;ig.N("impact.feature.interact.press-repeater").K(function(){ig.c$=ig.Ca.extend({LCa:q,Q5a:q,n:0,R0a:0.3,B9a:0.1,f:function(a,b){this.R0a=a||0.3;this.B9a=b||0.1},hw:L("LCa"),sda:function(){var a=this.LCa;this.LCa=q;if(a!=this.Q5a){this.n=this.R0a;return this.Q5a=a}if(a){this.n=this.n-ig.i.Sa;if(this.n<=0){this.n=this.B9a;return a}}return q}})});ig.J=h;
ig.N("impact.feature.interact.gui.focus-gui").O("impact.feature.gui.gui").K(function(){ig.vn=ig.da.extend({focus:y,ua:q,Z:q,Aa:h,yk:y,Yc:y,dg:y,f:function(a,b){this.parent();this.a.BU(h);this.Aa=a==g?h:a;this.yk=b==g?y:b},$y:function(a){a&&(this.ua&&this.ua.Z?this.ua.Z.qMa(this):this.Z&&this.Z.qMa(this))},Lo:function(){this.focus=h},ai:function(){this.focus=y},kB:function(){this.cc()},cc:J(),PBa:N(h),OBa:N(h),ff:L("Yc"),setActive:L("Aa"),iHa:function(a){return this==a}})});ig.J=h;
ig.N("impact.feature.interact.plug-in").O("impact.feature.interact.interact","impact.feature.interact.button-interact","impact.feature.interact.press-repeater","impact.feature.interact.gui.focus-gui").K(J());ig.J=h;
ig.N("impact.feature.env-particles.env-particles").O("impact.base.game","impact.base.loader").K(function(){ig.Xf.FJ=h;ig.Pm={};ig.Pm.WHITE_DUST={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:0},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:30,jp:5,dir:{x:1,y:0},so:{x:h,y:y},Sr:0.2,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.DARK_DUST={mb:{sheet:{src:"media/env/particle.png",
width:8,height:8,offY:8},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:30,jp:5,dir:{x:1,y:0},so:{x:h,y:y},Sr:0.2,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.LEAVES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:24},SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:90,jp:20,
dir:{x:1,y:0.8},so:{x:y,y:y},Sr:0.1,Dta:0.375,qE:0.1,rz:1.3,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.GREEN_LEAVES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:24,offY:8},SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:90,jp:20,dir:{x:1,y:0.8},so:{x:y,y:y},Sr:0.1,Dta:0.375,qE:0.1,rz:1.3,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},
{scale:1.5,bb:"big"}]};ig.Pm.JUNGLE_LEAVES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:24,offY:32},SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:90,jp:20,dir:{x:1,y:0.8},so:{x:y,y:y},Sr:0.1,Dta:0.375,qE:0.1,rz:1.3,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.BLUE_SQUARES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:48},renderMode:"lighter",
SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:30,jp:10,dir:{x:0,y:-1},so:{x:y,y:y},time:2,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.RED_SQUARES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:72},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:80,jp:20,dir:{x:0,y:-1},so:{x:y,
y:y},time:1.2,mp:0.3,Ko:0.3,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.SNOW_FLAKES={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offX:96},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:120,jp:20,dir:{x:0.4,y:1},so:{x:y,y:y},qE:0.05,rz:0.5,time:2.5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.COLD_CRYSTALS={mb:{sheet:{src:"media/env/particle.png",
width:8,height:8,offX:96,offY:8},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:30,jp:5,dir:{x:1,y:0},so:{x:h,y:y},Sr:0.2,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.SAND_OUTSIDE={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:24},SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},
speed:160,jp:20,dir:{x:1,y:0.2},so:{x:y,y:y},Sr:0.1,qE:0.05,rz:4,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.SANDSTORM={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:24},SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:320,jp:20,dir:{x:1,y:0.2},so:{x:y,y:y},Sr:0.1,qE:0.05,rz:4,time:2,mp:0.5,Ko:0.2,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};
ig.Pm.SAND={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:20,jp:5,dir:{x:0,y:1},so:{x:h,y:y},Sr:1,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.COAL_SPARKS={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:24},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},
{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:120,jp:20,dir:{x:0,y:-1},so:{x:y,y:y},Sr:0.1,qE:0.05,rz:4,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.COAL_SPARKS_FAST={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:24,offX:24},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:240,jp:40,dir:{x:0,y:-1},so:{x:y,y:y},
Sr:0.1,qE:0.05,rz:4,time:2,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.INFESTED_DUST={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:48},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:20,jp:5,dir:{x:0,y:1},so:{x:h,y:y},Sr:1,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.WAVE_DUST={mb:{sheet:{src:"media/env/particle.png",
width:8,height:8,offY:24,offX:48},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:20,jp:5,dir:{x:0,y:1},so:{x:h,y:y},Sr:1,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.SPOOKY_DUST={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:72},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",
frames:[2],time:0.1}]},speed:20,jp:5,dir:{x:0,y:1},so:{x:h,y:y},Sr:1,time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.ARID_DUST_1={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:96},renderMode:"lighter",repeat:h,SUB:[{name:"small",frames:[0,1,2,3],time:0.2},{name:"medium",frames:[4,5,6,7],time:0.2},{name:"big",frames:[8,9,10,11],time:0.2}]},speed:10,jp:2,dir:{x:0,y:-1},so:{x:y,y:y},Sr:0,qE:0,rz:2,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,
bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.ARID_DUST_FAST={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:96},renderMode:"lighter",repeat:h,SUB:[{name:"small",frames:[0,1,2,3],time:0.2},{name:"medium",frames:[4,5,6,7],time:0.2},{name:"big",frames:[8,9,10,11],time:0.2}]},speed:100,jp:2,dir:{x:0,y:-1},so:{x:y,y:y},Sr:0,qE:0,rz:2,time:5,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.ARID_DUST_ELEVATOR_UP={mb:{sheet:{src:"media/env/particle.png",
width:8,height:8,offY:16,offX:96},renderMode:"lighter",repeat:h,SUB:[{name:"small",frames:[0,1,2,3],time:0.2},{name:"medium",frames:[4,5,6,7],time:0.2},{name:"big",frames:[8,9,10,11],time:0.2}]},speed:350,jp:2,dir:{x:0,y:1},so:{x:y,y:y},Sr:0,qE:0,rz:2,time:0.5,mp:0.2,Ko:0.2,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.ARID_DUST_ELEVATOR_DOWN={mb:{sheet:{src:"media/env/particle.png",width:8,height:8,offY:16,offX:96},renderMode:"lighter",repeat:h,SUB:[{name:"small",
frames:[0,1,2,3],time:0.2},{name:"medium",frames:[4,5,6,7],time:0.2},{name:"big",frames:[8,9,10,11],time:0.2}]},speed:-350,jp:2,dir:{x:0,y:1},so:{x:y,y:y},Sr:0,qE:0,rz:2,time:0.5,mp:0.2,Ko:0.2,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.RHOMBUS={mb:{sheet:{src:"media/env/particle.png",width:16,height:16,offY:40,offX:0},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:20,jp:5,
dir:{x:0,y:-1},so:{x:y,y:y},time:3,mp:0.5,Ko:0.5,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};ig.Pm.HACKING={mb:{sheet:{src:"media/env/particle.png",width:16,height:16,offY:40,offX:48},renderMode:"lighter",SUB:[{name:"small",frames:[0],time:0.1},{name:"medium",frames:[1],time:0.1},{name:"big",frames:[2],time:0.1}]},speed:120,jp:5,dir:{x:0,y:-1},so:{x:y,y:y},Sr:1,time:0.7,mp:0.2,Ko:0.2,rb:[{scale:1,bb:"small"},{scale:1.2,bb:"medium"},{scale:1.5,bb:"big"}]};var a=Vec2.create();
ig.zwa=ig.qP.extend({Wi:"EnvParticleSpawner",name:q,mb:q,fd:q,rb:[],f:function(a){this.parent();this.name=a;var b=ig.Pm[a];b||ig.warn("Unknown environment particles '"+a+"'");if(this.fd=b){this.mb=new ig.Al(b.mb);this.Trb()}},NJ:aa(),Wo:function(){this.mb&&this.mb.Ka()},Trb:function(){if(this.fd)for(var a=this.fd.rb,b=0;b<a.length;++b){var f=a[b];this.rb.push({scale:f.scale,bb:f.bb,PK:0,It:0,gc:[]})}},lab:function(a,b){if(this.fd){for(var f=0,i=0;i<this.rb.length;++i)f=f+1/this.rb[i].scale;for(i=
0;i<this.rb.length;++i){var j=this.rb[i],k=a*(1/j.scale)/f;j.PK=this.fd.time/k;j.It=Math.random()*j.PK;if(b)for(var l=j.gc.length=0;l<k;++l){this.Rdb(j,j.PK);this.Xp(j)}}}},update:function(){if(this.fd){for(var a=h,b=this.rb.length;b--;){var f=this.rb[b],i=ig.i.ja;this.Rdb(f,i);if(f.PK){a=y;for(f.It=f.It+i;f.It>=f.PK;){f.It=f.It-f.PK;this.Xp(f)}}else f.gc.length>0&&(a=y)}return a}},Xp:function(a){if(this.fd){var b=this.fd.time+(Math.random()-0.5)*2*this.fd.mp,f=Vec2.vc(ig.FJ.width,ig.FJ.height);Vec2.UN(f,
Math.random(),Math.random());var i=Vec2.create(this.fd.dir);if(this.fd.so.x&&Math.random()>=0.5)i.x=i.x*-1;if(this.fd.so.y&&Math.random()>=0.5)i.y=i.y*-1;if(this.fd.Sr>0){var j=(Math.random()-0.5)*this.fd.Sr*2*Math.PI;Vec2.rotate(i,j)}j=this.fd.speed+(Math.random()-0.5)*2*this.fd.jp*a.scale;Vec2.length(i,j);a.gc.push({duration:b,n:0,Nv:0,g:f,V:i,b$a:-1})}},Rdb:function(a,d){for(var f=a.gc,i=f.length;i--;){var j=f[i];j.n=j.n+d;if(j.n>=j.duration)f.splice(i,1);else{if(this.fd.rz){var k=Math.sin(Math.PI*
2*j.n/this.fd.rz+Math.PI*0.52)*this.fd.qE*ig.i.ja*22/this.fd.rz,l=Vec2.assign(b,j.V),m=Vec2.length(j.V);Vec2.hz(l);Vec2.Bk(l,k);Vec2.add(j.V,l);Vec2.length(j.V,m)}Vec2.Tm(j.g,j.V,d)}}},nb:function(){if(this.fd)for(var a=this.rb.length;a--;)this.AJ(this.rb[a])},AJ:function(b){var d=ig.r.to,f=this.mb.Ba[b.bb].bda(),i=b.gc,j=i.length,k=0,l=b.scale,b=(l-1)*(ig.i.zoom-1),m=0,n=0;if(l!=1)var o=ig.i.npa(a,ig.i.width/2,ig.i.height/2),m=ig.r.screen.x+ig.i.width/2-o.x,n=ig.r.screen.y+ig.i.height/2-o.y;for(var o=
ig.FJ.width,t=ig.FJ.height,m=(ig.r.screen.x-m)*l+m,l=(ig.r.screen.y-n)*l+n,n=this.fd.Ko;j--;){var p=i[j],r=p.g.x-m,u=p.g.y-l,r=(r%o+o)%o,u=(u%t+t)%t,w=(r>o/2?1:0)+(u>t/2?2:0),z=w!=p.b$a;p.b$a=w;if(b){r=r+(r-o/2)*b;u=u+(u-t/2)*b}if(!ig.iC.UZ&&ig.r.GDb(r+ig.r.screen.x,u+ig.r.screen.y))p.Nv=z?0.3:Math.min(0.3,p.Nv+ig.i.ja);else if(p.Nv>0)p.Nv=z?0:Math.max(0,p.Nv-ig.i.ja);if(!(p.Nv>=0.3)){this.fd.Dta!=g&&(k=Vec2.Wm(p.V)-this.fd.Dta*2*Math.PI);w=1-p.Nv/0.3;p.n<n?w=w*(p.n/n):p.n>p.duration-n&&(w=w*((p.duration-
p.n)/n));for(z=f.length;z--;)d.rxb(f[z],r,u,p.n,w,k)}}}});var b=Vec2.create();ig.fhb=ig.Uf.extend({WI:[],width:0,height:0,f:function(){this.parent("EnvParticles");this.width=ig.i.width+32;this.height=ig.i.height+32},bBa:function(a,b,f){this.WI.indexOf(a)==-1&&this.WI.push(a);a.lab(b,f)},clear:function(a){for(var b=this.WI.length;b--;)this.WI[b].lab(0,a);if(a)this.WI.length=0},QM:0,Eu:function(){if(!ig.r.paused)for(var a=this.WI.length;a--;)this.WI[a].update()&&this.WI.splice(a,1)},lfa:101,Mfa:function(){if(ig.Xf.FJ&&
sc.options.get("env-particles")){for(var a=this.WI.length;a--;)this.WI[a].nb();ig.i.context.globalCompositeOperation="source-over"}}});ig.Vf(function(){return ig.FJ=new ig.fhb})});ig.J=h;
ig.N("impact.feature.env-particles.env-particles-steps").O("impact.feature.env-particles.env-particles","impact.base.action","impact.base.event").K(function(){ig.oa.SET_ENV_PARTICLES=ig.qa.extend({$_:0,Bc:0,t:new ig.u({attributes:{Ns:{c:"String",d:"Type of Env Particles",U:ig.Pm},Bc:{c:"NumberExpression",d:"Quantity of particles (average number of visible particles)",ab:10},Bs:{c:"Boolean",d:"If true: make change immediate",I:h}}}),f:function(a){this.$_=new ig.zwa(a.particleType);this.Bc=a.quantity;
this.Bs=a.immediately||y},Ka:function(){this.$_.Tc()},start:function(){var a=ig.Ja.eh(this.Bc)||0;ig.FJ.bBa(this.$_,a,this.Bs)}});ig.oa.CLEAR_ENV_PARTICLES=ig.qa.extend({$_:0,t:new ig.u({attributes:{Ns:{c:"String",d:"Type of Env Particles",U:ig.Pm},Bs:{c:"Boolean",d:"If true: make change immediate",I:h}}}),f:function(a){this.$_=new ig.zwa(a.particleType);this.Bs=a.immediately||y},Ka:function(){this.$_.Tc()},start:function(){ig.FJ.bBa(this.$_,0,this.Bs)}})});ig.J=h;
ig.N("impact.feature.env-particles.plug-in").O("impact.feature.env-particles.env-particles","impact.feature.env-particles.env-particles-steps").K(J());ig.J=h;ig.N("impact.feature.storage.plug-in").O("impact.feature.storage.storage").K(function(){window.Ed&&wm.yu&&(wm.yu.saveMode={c:"String",U:ig.Uxa,d:"Save Mode of the map (Enabled = can save at any time, disable = only on savepoints)",ok:h})});ig.J=h;
ig.N("impact.feature.weather.weather-steps").O("impact.feature.weather.weather","impact.base.action","impact.base.event").K(function(){ig.oa.SET_WEATHER=ig.qa.extend({iC:0,t:new ig.u({attributes:{iC:{c:"String",d:"Type of Weather",U:ig.G$},Bs:{c:"Boolean",d:"If true, change weather immediately with no transition"}}}),f:function(a){this.iC=new ig.Tka(a.weather||"NONE");this.Bs=a.immediately},Ka:function(){this.iC.Tc()},start:function(){ig.iC.Hab(this.iC,this.Bs)}});ig.oa.RESTORE_WEATHER_PARTICLES=
ig.qa.extend({t:new ig.u({attributes:{Bs:{c:"Boolean",d:"If true: make change immediate",I:h}}}),f:function(a){this.Bs=a.immediately||y},start:function(){ig.iC.T9a(this.Bs)}})});ig.J=h;ig.N("impact.feature.weather.plug-in").O("impact.feature.weather.weather","impact.feature.weather.weather-steps").K(function(){window.Ed&&wm.yu&&(wm.yu.weather={c:"String",U:ig.G$,d:"Weather to be displayed"})});ig.J=h;
ig.N("impact.feature.map-sounds.map-sounds").O("impact.base.game").K(function(){ig.mg={};ig.mg.CARGO_SHIP_OUTSIDE={loop:[{path:"media/sound/background/cargo/cargo-ambient-out.ogg",volume:1},{path:"media/sound/background/cargo/ocean-ambient.ogg",volume:0.5}],segments:[[{wait:1},{path:"media/sound/background/cargo/seagull-a.ogg",volume:0.8},{wait:10}],[{wait:2},{path:"media/sound/background/cargo/seagull-a.ogg",volume:0.4},{wait:8}],[{wait:2},{path:"media/sound/background/cargo/seagull-b.ogg",volume:0.5},
{wait:15}],[{wait:2},{path:"media/sound/background/cargo/seagull-b.ogg",volume:0.7},{wait:17}],[{wait:1},{path:"media/sound/background/cargo/seagull-c.ogg",volume:0.7},{wait:11}]]};ig.mg.CARGO_SHIP_OUTSIDE_RAIN={loop:[{path:"media/sound/background/cargo/cargo-ambient-out.ogg",volume:1},{path:"media/sound/background/cargo/ocean-ambient.ogg",volume:0.5}],segments:[]};ig.mg.CARGO_SHIP_INSIDE={loop:[{path:"media/sound/background/ship-outside.ogg",volume:1}],segments:[]};ig.mg.STRONG_RAIN={loop:[{path:"media/sound/background/rain.ogg",
volume:0.7}],segments:[]};ig.mg.LIGHT_WIND={loop:[{path:"media/sound/background/wind.ogg",volume:0.8}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_A={loop:[{path:"media/sound/background/cargo/cargo-ambient-a.ogg",volume:0.2}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_B={loop:[{path:"media/sound/background/cargo/cargo-ambient-b.ogg",volume:0.6}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_C={loop:[{path:"media/sound/background/cargo/cargo-ambient-c.ogg",volume:0.6}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_D={loop:[{path:"media/sound/background/cargo/cargo-ambient-d.ogg",
volume:0.6}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_E={loop:[{path:"media/sound/background/cargo/cargo-ambient-e.ogg",volume:0.6}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_F={loop:[{path:"media/sound/background/cargo/cargo-ambient-f.ogg",volume:0.5}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_G={loop:[{path:"media/sound/background/cargo/cargo-ambient-g.ogg",volume:0.6}],segments:[]};ig.mg.CARGO_SHIP_AMBIENT_H={loop:[{path:"media/sound/background/cargo/cargo-ambient-h.ogg",volume:0.6}],segments:[]};ig.mg.HIDEOUT_AMBIENT=
{loop:[{path:"media/sound/background/hideout/hideout-ambient.ogg",volume:0.8}],segments:[]};ig.mg.HIDEOUT_INNER_AMBIENT={loop:[{path:"media/sound/background/hideout/hideout-inner-ambient.ogg",volume:1}],segments:[]};ig.mg.SAPPHIRE_RIDGE_AMBIENT={loop:[{path:"media/sound/background/sapphire-ridge/sapphire-ridge-ambient.ogg",volume:1}],segments:[]};ig.mg.HIDEOUT_OFFICE_AMBIENT={loop:[{path:"media/sound/background/hideout/hideout-office-ambient.ogg",volume:0.8}],segments:[]};ig.mg.CROSS_CENTRAL_INNER=
{loop:[{path:"media/sound/background/rhombus-square/cross-central-inner.ogg",volume:1}],segments:[]};ig.mg.NEWCOMERS_BRIDGE={loop:[{path:"media/sound/background/rhombus-square/bridge-wind-ambient.ogg",volume:0.7}],segments:[]};ig.mg.BERGEN_TRAIL_WIND={loop:[{path:"media/sound/background/bergen-trail/bergen-wind.ogg",volume:1}],segments:[]};ig.mg.BERGEN_TRAIL_WIND_SUBTLE={loop:[{path:"media/sound/background/bergen-trail/bergen-wind-subtle.ogg",volume:1}],segments:[]};ig.mg.ROOKIE_HARBOR_TELEPORTER=
{loop:[{path:"media/sound/background/cargo/ocean-ambient.ogg",volume:0.5}],segments:[[{wait:1},{path:"media/sound/background/cargo/seagull-a.ogg",volume:0.8},{wait:10}],[{wait:2},{path:"media/sound/background/cargo/seagull-a.ogg",volume:0.4},{wait:8}],[{wait:2},{path:"media/sound/background/cargo/seagull-b.ogg",volume:0.5},{wait:15}],[{wait:2},{path:"media/sound/background/cargo/seagull-b.ogg",volume:0.7},{wait:17}],[{wait:1},{path:"media/sound/background/cargo/seagull-c.ogg",volume:0.7},{wait:11}]]};
ig.mg.ROOKIE_HARBOR_OCEAN={loop:[{path:"media/sound/background/cargo/ocean-ambient.ogg",volume:0.5}],segments:[]};ig.mg.CROWD={loop:[{path:"media/sound/background/crowd-ambient.ogg",volume:0.5}],segments:[]};ig.mg.ROOKIE_HARBOR_CROWD={loop:[{path:"media/sound/background/crowd-ambient.ogg",volume:0.5}],segments:[]};ig.mg.HEAT_AREA_DESERT={loop:[{path:"media/sound/background/desert/desert-ambient.ogg",volume:0.5}],segments:[]};ig.mg.HEAT_AREA_WIND={loop:[{path:"media/sound/background/desert/sandstorm-ambient.ogg",
volume:0.2}],segments:[]};ig.mg.HEAT_AREA_OASIS={loop:[{path:"media/sound/background/desert/oasis-ambient.ogg",volume:1}],segments:[]};ig.mg.CAVE={loop:[{path:"media/sound/background/cave-ambient.ogg",volume:0.8}],segments:[]};ig.mg.CAVE_WATER_DROPS={loop:[{path:"media/sound/background/cave-water-drops.ogg",volume:1}],segments:[]};ig.mg["BAKI-KUM"]={loop:[{path:"media/sound/background/baki-kum/baki-kum-ambient.ogg",volume:0.8}],segments:[]};ig.mg.HEAT_DUNGEON_OUTSIDE={loop:[{path:"media/sound/background/strong-wind.ogg",
volume:0.5}],segments:[]};ig.mg.DREAM={loop:[{path:"media/sound/background/dreams/dream-atmo.ogg",volume:0.5}],segments:[]};ig.mg.JUNGLE={loop:[{path:"media/sound/background/jungle/jungle-atmo.ogg",volume:0.5}],segments:[]};ig.mg.JUNGLE_INFESTED={loop:[{path:"media/sound/background/jungle/jungle-atmo-infested.ogg",volume:0.5}],segments:[]};ig.mg.JUNGLE_CITY_INNER={loop:[{path:"media/sound/background/rain-inside.ogg",volume:1}],segments:[]};ig.mg.JUNGLE_CITY_OUTER={loop:[{path:"media/sound/background/basin-keep/basin-keep-ambient.ogg",
volume:0.5}],segments:[]};ig.mg.COLD_DUNGEON={loop:[{path:"media/sound/background/dungeons/cold-ambient.ogg",volume:1}],segments:[]};ig.mg.HEAT_DUNGEON={loop:[{path:"media/sound/background/dungeons/heat-ambient.ogg",volume:1}],segments:[]};ig.mg.HEAT_DUNGEON_WATER={loop:[{path:"media/sound/background/dungeons/heat-ambient-water.ogg",volume:1}],segments:[]};ig.mg.SHOCK_DUNGEON={loop:[{path:"media/sound/background/dungeons/shock-ambient.ogg",volume:1}],segments:[]};ig.mg.WAVE_DUNGEON={loop:[{path:"media/sound/background/dungeons/wave-ambient.ogg",
volume:1}],segments:[]};ig.mg.TREE_DUNGEON={loop:[{path:"media/sound/background/dungeons/tree-ambient.ogg",volume:0.65}],segments:[]};ig.mg.SPOOKY_INNER={loop:[{path:"media/sound/background/dreams/dream-atmo.ogg",volume:0.5},{path:"media/sound/scenes/halloween/spooky-ambience.ogg",volume:1}],segments:[]};ig.mg.ARID_OUTSIDE={loop:[{path:"media/sound/background/arid/arid-atmo.ogg",volume:1}],segments:[]};ig.mg.ARID_INSIDE={loop:[{path:"media/sound/background/arid/arid-atmo-inside.ogg",volume:1}],segments:[]};
ig.mg.SERIOUS_AMBIENT={loop:[{path:"media/sound/background/serious-ambient.ogg",volume:0.7}],segments:[]};ig.SRa=ig.Ca.extend({name:q,$ea:[],E_:[],Uqa:[],rna:-1,ml:0,n:0,f:function(a){this.name=a;var b=ig.mg[a];b||e(Error('Map Sounds of name "'+a+'" not found.'));for(var c=b.loop,a=0;a<c.length;++a)this.$ea.push(new ig.ka(c[a].path,c[a].volume));b=b.segments;for(a=0;a<b.length;++a)this.E_.push(this.Rqb(b[a]))},Ka:function(){for(var a=this.$ea.length;a--;)this.$ea[a].Ka();for(a=this.E_.length;a--;)for(var b=
this.E_[a].xb.length;b--;)this.E_[a].xb[b].$b.Ka()},start:function(){for(var a=this.$ea.length;a--;)this.Uqa.push(this.$ea[a].play(h));this.rna=-1;this.n=this.ml=0},update:function(){if(this.E_.length&&ig.i.ja){this.rna==-1&&this.hXa();var a=this.E_[this.rna];this.n=this.n+ig.i.Sa;for(var b=a.xb;this.ml<b.length&&b[this.ml].time<=this.n;){b[this.ml].$b.play();this.ml++}if(this.n>=a.Fa){this.n=this.n-a.Fa;this.hXa()}}},stop:function(){for(var a=this.Uqa.length;a--;)this.Uqa[a].stop();this.Uqa.length=
0},Rqb:function(a){for(var b={Fa:0,xb:[]},c=0,d=0;d<a.length;++d){var f=a[d];f.wait?c=c+f.wait:b.xb.push({time:c,$b:new ig.ka(f.path,f.volume)})}b.Fa=c;return b},hXa:function(){this.rna=Math.floor(Math.random()*this.E_.length);this.ml=0}});ig.$jb=ig.Uf.extend({Z5:q,ml:q,f:function(){this.parent("MapSounds")},nha:function(a){if(a!=this.ml){this.ml&&this.ml.stop();(this.ml=a)&&this.ml.start()}},fj:function(){this.nha(q)},PG:100,Ms:function(a){if(!this.Z5||!(a.attributes&&this.Z5.name==a.attributes["map-sounds"])){this.Z5&&
this.Z5.Ka();this.Z5=a.attributes&&a.attributes["map-sounds"]?new ig.SRa(a.attributes["map-sounds"]):q}},dK:100,qx:function(){this.nha(this.Z5)},QM:0,Eu:function(){ig.r.paused||this.ml&&this.ml.update()}});ig.Vf(function(){return ig.s6a=new ig.$jb})});ig.J=h;
ig.N("impact.feature.map-sounds.map-sounds-steps").O("impact.feature.map-sounds.map-sounds","impact.base.action","impact.base.event").K(function(){ig.oa.SET_MAP_SOUNDS=ig.qa.extend({tua:q,t:new ig.u({attributes:{s6a:{c:"String",d:"Type of Map Sounds",U:ig.mg,ok:h}}}),f:function(a){if(a.mapSounds)this.tua=new ig.SRa(a.mapSounds)},Ka:function(){this.tua&&this.tua.Ka()},start:function(){ig.s6a.nha(this.tua)}})});ig.J=h;
ig.N("impact.feature.map-sounds.plug-in").O("impact.feature.map-sounds.map-sounds","impact.feature.map-sounds.map-sounds-steps").K(function(){window.Ed&&wm.yu&&(wm.yu["map-sounds"]={c:"String",U:ig.mg,d:"Map sounds to be played in the background",ok:h})});ig.J=h;
ig.N("impact.feature.nwf.nwf-errors").K(function(){function a(a){if(!(a.fyb===0||a.errorCode===0))switch(a.fyb){case nwf.i.X1.SPb:case nwf.i.X1.M1:b(a.errorCode,a.Gb);break;case nwf.i.X1.hPb:case nwf.i.X1.jPb:k&&b(evt.errorCode,function(a){a.eYb!==f.YQb&&console.log("[NWF] Error ignored. WARNING: SAMPLE WILL NOT WORK PROPERLY")});break;case nwf.i.X1.$Qb:switch(a.errorCode){case i.aRb:var c=nwf.input.$pb.zzb(0);if(!c.zSb){c.addEventListener(nwf.vi.agb.yfb,d);b(a.errorCode)}break;default:console.log("[NWF] Unhandled VPAD: "+
a.ooa)}break;case nwf.i.X1.xPb:switch(a.errorCode){case i.yPb:b(a.errorCode,a.Gb,f.owa);break;case i.APb:b(a.errorCode,a.Gb,f.owa);break;case i.zPb:b(a.errorCode,a.Gb,f.owa);break;default:console.log("[NWF] Unhandled CMN_MSG: "+a.ooa)}break;case nwf.i.X1.ZRa:var c="UNKNOWN",j;for(j in i)i[j]==a.errorCode&&(c=j);switch(a.errorCode){default:console.log("[NWF] Unhandled NWF ("+a.errorCode+" = "+c+"):"+a.ooa)}break;case 115:switch(a.errorCode){default:console.log("[NWF] MIIVERSE: "+a.ooa);b(a.errorCode,
a.Gb,f.owa)}break;default:ig.log("[NWF] Unhandled error: ("+a.errorCode+") "+a.ooa)}}function b(a,b,c){var d;typeof b!=="function"&&(b=l);if(typeof c==="undefined")c=f.IPb;typeof d==="undefined"&&(d=y);f.JSb(b,a,c,d)}function c(){ig.log("******** [NWF] CRASH IMMINENT ********")}function d(){nwf.input.$pb.zzb(0).removeEventListener(nwf.vi.agb.yfb,d);f.uSb()}if(window.nwf){var f=nwf.UXb.MPb,i=nwf.i.QQb,j=nwf.vi.RQb,k=y,l=J(),m=nwf.i.fRb.OTb();m.addEventListener(j.PPb,a);m.addEventListener(j.BPb,c)}});
ig.J=h;ig.N("impact.feature.nwf.plug-in").O("impact.feature.nwf.nwf-errors").K(J());ig.J=h;
ig.N("impact.feature.video.video").O("impact.base.loader","game.config").K(function(){var a=[{ANb:"webm",type:"video/webm"}];ig.Upb=ig.LV.extend({Wi:"Video",Bo:q,AT:q,ym:0,vza:0,Vza:0,CVa:q,f:function(a){this.parent(a)},wu:function(){this.Bo=document.createElement("video");this.Bo.addEventListener("canplaythrough",this.onload.bind(this));this.Bo.addEventListener("error",this.onerror.bind(this));this.Bo.addEventListener("ended",this.Fsb.bind(this));console.log("LOAD VIDEO!");this.Bo.className="igVideo";
this.Bo.BWb=h;for(var b=ig.root+this.path.match(/^(.*)\.[^\.]+$/)[1],c=a.length;c--;){var d=a[c],f=document.createElement("source");f.type=d.type;f.src=b+"."+d.ANb+ig.Kn();this.Bo.appendChild(f)}},onload:function(){console.log("LOADED!");this.Xl(h)},onerror:function(a){console.log("NOPE!",a);this.Xl(y)},play:function(a){this.AT=a;this.Bo.currentTime=0;this.Bo.volume=1;this.Bo.play()},pause:function(){this.Bo.pause()},reset:function(){this.Bo.currentTime=0},qyb:function(a){this.ym=this.vza=a;this.Vza=
Date.now();this.CVa=window.setInterval(this.prb.bind(this),10)},prb:function(){var a=Date.now(),c=(a-this.Vza)/1E3;this.Vza=a;this.ym=this.ym-c;if(this.ym<0)this.ym=0;this.Bo.volume=this.ym/this.vza;this.ym==0&&window.clearInterval(this.CVa)},nb:function(a,c,d,f){if(!this.Bo.paused){var i=ig.i.scale,a=ig.i.qf(a),c=ig.i.qf(c);ig.i.context.drawImage(this.Bo,a,c,d*i,f*i)}},Fsb:function(){this.AT&&this.AT()}})});ig.J=h;
ig.N("impact.feature.video.video-gui").O("impact.feature.video.video","impact.feature.gui.gui").K(function(){ig.Vpb=ig.da.extend({Bo:q,$o:y,f:function(a,b,c){this.parent();this.Bo=a;this.a.size.x=b||ig.i.width;this.a.size.y=c||ig.i.height},play:function(a){this.$o=1;this.Bo.play(a)},pause:function(){this.$o=0;this.Bo.pause()},reset:function(){this.Bo.currentTime=0},Da:function(a){this.$o&&this.$o<=4?this.$o++:this.$o==5&&a.tub(this.Bo,0,0,this.a.size.x,this.a.size.y)}});ig.bRb=ig.da.extend({cI:q,
R:{DEFAULT:{state:{},time:1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:1,p:KEY_SPLINES.LINEAR}},AT:q,Kf:q,f:function(a,b,c){this.parent(a);this.cI=new ig.Vpb(a,b,c);this.cI.a.R.DEFAULT={state:{},time:0,p:KEY_SPLINES.LINEAR};this.cI.a.R.HIDDEN={state:{alpha:0},time:1,p:KEY_SPLINES.LINEAR};this.m(this.cI);this.j("HIDDEN",h);this.Kf=new sc.Xx(this,h);Vec2.assign(this.a.size,this.cI.a.size)},start:function(a){this.AT=a;this.j("DEFAULT",y,y,this.mtb.bind(this))},mtb:function(){this.cI.j("DEFAULT");
this.cI.play(this.GXa.bind(this));ig.La.De(this.Kf)},GXa:function(){this.cI.j("HIDDEN",y,y,this.wsb.bind(this));this.cI.Bo.qyb(1);ig.La.$e(this.Kf)},Km:function(){this.GXa()},wsb:function(){this.j("HIDDEN");this.cI.reset();this.cI.pause();this.AT&&this.AT();this.AT=q},Da:function(a){a.nc("black",0,0,this.a.size.x,this.a.size.y)}})});ig.J=h;ig.N("impact.feature.video.plug-in").O("impact.feature.video.video","impact.feature.video.video-gui").K(J());ig.J=h;
ig.N("impact.feature.influencer.influencer").K(function(){ig.Rwa={kX:[],I2:function(a){this.kX.push(a)},f:function(a){for(var b=0;b<this.kX.length;++b)a.kX[b]=new this.kX[b](a,a.Q)}};ig.tib=ig.Ca.extend({Q:q,xb:[],kX:[],f:function(a){this.Q=a;ig.Rwa.f(this)},lCb:function(){for(var a=this.xb.length;a--;)if(this.xb[a].push)return h},L2:function(a){this.xb.indexOf(a)==-1&&this.xb.push(a)},p_:function(a){this.xb.ye(a);if(a.Eia==this)a.Eia=q},NIb:function(){for(var a=this.xb.length;a--;)this.xb[a].Ftb&&
this.p_(this.xb[a])},qOb:function(){for(var a=0;a<this.kX.length;++a)this.kX[a].am(this,this.Q)},am:function(){this.qOb();this.Mdb(y)},Mdb:function(b){for(var f=this.Q.b,i=1,j=1,k=1,l=1,m=this.xb.length,n=0,o=c;m--;){var t=this.xb[m];if(!t.Eia)t.Eia=this;var p=1;if(t.state==a.K1)this.xb.splice(m,1);else{if(t.Eia==this){if(!t.Ay.Xb()){t.state=a.OQa;if(!b){t.Ay.ja();if(t.Ay.Xb()){this.xb.splice(m,1);t.state=a.K1;continue}}p=t.cx()}}else t.state==a.OQa&&(p=t.cx());i=i*(1-p+p*t.B8);j=Math.max(j,1-p+p*
t.vbb);k=k*(1-p+p*t.WHa);l=l*(1-p+p*t.l6);if(t.push)if(t=t.bBb(f,p)){n=Math.max(n,Vec2.length(t));Vec2.add(o,t)}}}f.time.yh=i*j;f.time.Tqa=k;f.time.S6a=l;if(n){Vec2.length(o)>n&&Vec2.length(o,n);Vec2.add(f.Ku,o)}},SGb:function(){for(var b=0,c=this.xb.length;c--;){var i=this.xb[c];i.state=a.mj;var j=i.cx(),b=b+i.e3a*j}if(b=Math.round(b)){i=this.Q.Ua;for(c=i.length;c--;)i[c].g.z=i[c].g.z-b}}});var a={mj:0,OQa:1,K1:2};sc.Mwa={wSa:function(a,b,c,j,k,l,m){b.tb(a);Vec2.sub(a,c);Vec2.Lc(a);b=Vec2.length(a);
c=1;j&&(b>j+k?c=0:b>=j&&(c=1-(b-j)/k));b<2&&(c=0);Vec2.length(a,c*m*l)},olb:function(a,b,c,j,k,l,m){b.tb(a);Vec2.sub(a,c);b=Vec2.length(a);c=1;j&&(b>j+k?c=0:b>=j&&(c=1-(b-j)/k));b<2&&(c=0);Vec2.length(a,c*m*l)},HPb:function(a,b,c,j,k,l,m){Vec2.sub(a,c);Vec2.length(l*m)}};var b=Vec2.create(),c=Vec2.create();ig.CV=ig.Ca.extend({Ay:q,B8:1,vbb:1,WHa:1,l6:1,e3a:0,Eia:q,state:a.mj,push:q,f:function(){this.Ay=new ig.Vt(y)},kab:function(a,b,c,j){this.push={type:a,ri:b,ryb:c,speed:j,YOa:Vec2.create()}},rLb:function(a){this.push&&
a.tb(this.push.YOa)},qLb:function(a){Vec2.assign(this.push.YOa,a)},bBb:function(a,c){if(!this.push)return q;this.push.type(b,a,this.push.YOa,this.push.ri,this.push.ryb,this.push.speed,c);return b},oha:function(a){this.Ay.set(a,ig.Ol.br)},cx:function(){return this.Ay.Xb()?1:1-this.Ay.get()}});ig.Qwa=ig.Ca.extend({f:function(a,b){this.Aq=a;this.DS=b;b.Ftb=h;this.Aq.L2(this.DS)},wOb:function(){this.Aq.Mdb(h)},clear:function(){this.Aq.p_(this.DS)},Zl:function(){this.clear()}})});ig.J=h;
ig.N("impact.feature.influencer.influencer-steps").O("impact.base.action","impact.base.event","impact.base.entity","impact.feature.influencer.influencer").K(function(){function a(a){return a instanceof ig.Qwa}var b={SELF:aa(),TARGET:function(a){return a.Qd()},OWNER:function(a){return a.te()}};ig.la.ADD_TEMP_INFLUENCE=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"On what target to apply influence",U:b},B8:{c:"Number",d:"Scale general time of target",ab:1},WHa:{c:"Number",d:"Scale logic time of target (won't slow down physics)",
ab:1},l6:{c:"Number",d:"Scale XY movement speed of target",ab:1}}}),f:function(a){this.target=b[a.target]||b.SELF;this.DS=new ig.CV;this.DS.B8=a.timeScale===g?1:a.timeScale;this.DS.WHa=a.logicTimeScale===g?1:a.logicTimeScale;this.DS.l6=a.moveXYScale||0},start:function(a){var b=this.target(a);if(b&&b.Aq){b=new ig.Qwa(b.Aq,this.DS);a.Hj(b)}}});ig.la.CLEAR_TEMP_INFLUENCE=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(b){b.rX(a)}})});ig.J=h;
ig.N("impact.feature.influencer.plug-in").O("impact.feature.influencer.influencer","impact.feature.influencer.influencer-steps").K(J());ig.J=h;
ig.N("game.feature.version.version").O("impact.base.game","impact.feature.storage.storage").K(function(){sc.Spb=ig.UL.extend({$qa:1,nra:0,psa:0,S3a:10,Nm:q,y7:2,gJa:0,hJa:0,iJa:0,mJ:q,f:function(){if(ig.NPa){this.parent();var a=JSON.parse(localStorage.getItem("cc.version"));if(a){this.gJa=a.major||0;this.hJa=a.minor||0;this.iJa=a.patch||0}if(ig.platform!=ig.Mk.BROWSER)document.title=document.title+" "+this.toString()}else ig.warn("Can't load changelog because no ig.CHANGE_LOG is given!")},UJb:function(){localStorage.setItem("cc.version",
JSON.stringify(this.qtb()))},wAb:function(a){a=a?a:[];a.length=0;for(var b=this.$Va(this.gJa,this.hJa,this.iJa),c=0;c<this.mJ.length;c++)if(this.mJ[c].version==b)break;else a.push(this.mJ[c]);return a},toString:function(){return this.cva()},cva:function(){return"v"+this.$qa+"."+this.nra+"."+this.psa+(this.S3a>0?"-"+this.S3a:"")},sCb:function(){return this.$qa!=this.gJa||this.nra!=this.hJa||this.psa!=this.iJa},wu:function(){$.ajax({dataType:"json",url:ig.root+ig.NPa+ig.Kn(),context:this,success:this.onload.bind(this),
error:this.onerror.bind(this)})},onerror:function(a){this.mJ=q;this.Xl(h);ig.error("Could not load Changelog json file! Event: %O",a)},onload:function(a){this.mJ=a.changelog;window.Ed&&ig.Yh.Lg("changelog","ChangelogList","Changelog",{path:"data/changelog.json",data:this.mJ});var b=this.$Va(this.$qa,this.nra,this.psa);b!=this.mJ[0].version&&e(Error("Version collision! Inlined: "+b+", Json: "+this.mJ[0].version+", missing entry?"));this.Xl(h);ig.EV&&ig.log("%cLOADABLE: %cLoaded Changelog: \n%O","color:blue",
"",a)},TTb:function(){return ig.zd.n2a({version:this.cva(),saveVersion:this.y7})},IOb:function(a){a.SEb({version:this.cva(),saveVersion:this.y7})},$Va:function(a,b,c){return a+"."+b+"."+c},qtb:function(){var a={};a.major=this.$qa;a.minor=this.nra;a.patch=this.psa;return a}});sc.version=new sc.Spb;sc.Tpb=ig.Uf.extend({THa:q,Qqa:q,f:function(){ig.zd.Lg(this);this.fj()},fj:function(){this.THa=sc.version.cva();this.Qqa=sc.version.y7},Fu:function(a){a.version=this.THa;a.saveVersion=this.Qqa},Bt:function(a){this.THa=
a.version;this.Qqa=a.saveVersion||0;this.Qqa<sc.version.y7&&ig.r.cBa(ig.lang.get("sc.gui.loading.versionOutdated"))}});ig.Vf(function(){return new sc.Tpb})});ig.J=h;
ig.N("game.feature.control.control").O("impact.base.game","impact.feature.interact.press-repeater","impact.feature.gui.gui").K(function(){function a(){var a=ig.r.cb;if(!a||!sc.options.get("close-combat-input"))return 9999;a=a.b;ig.i.Jy(c,a.g.x+a.size.x/2,a.g.y+a.size.y/2-a.g.z-Constants.gI-Constants.kC/2);return Vec2.eb(c,ig.input.Ak)/ig.i.zoom}var b=Vec2.create();ig.Ow=h;sc.Phb=ig.Uf.extend({f:function(){this.parent("GlobalInput");ig.X.DKb(sc.ba)},aU:5,fH:function(){var b=!ig.r.paused&&sc.q.ko()&&
sc.q.BN()&&ig.r.cb&&!ig.r.cb.CD();if(ig.input.qb==ig.Yb.Wc)ig.i.I_("none");else if(b){var b=sc.q.T.ki(sc.ng.CLOSE_COMBAT),c=sc.q.T.ki(sc.ng.THROWING);!b&&!c?ig.i.I_(q):c?b?a()<sc.nP?ig.i.I_("melee"):ig.i.I_("throw"):ig.i.I_("throw"):ig.i.I_("melee")}else ig.i.I_(q);sc.ba.GOb()},xK:8999,az:function(){if(!ig.Wv){if((sc.ba.pause()||sc.q.Kr()&&sc.ba.Cq())&&ig.Ow)if(sc.q.Kr()){sc.q.Zw();sc.gd.back.play()}else sc.q.t0a()&&sc.gd.submit.play();(sc.q.oe()&&sc.q.ko()||sc.q.message.rB)&&!ig.i.Un&&ig.Ow&&!sc.q.WBb()&&
!sc.q.Ss&&sc.ba.oua()&&sc.q.oua();!sc.q.oe()&&sc.ba.oua()&&sc.IU.YNb();if(sc.ba.e()&&sc.q.T.ki(sc.ng.MENU))if(sc.q.Oo()){if(sc.e.oDb()){sc.q.Zw();sc.gd.back.play()}}else sc.q.ko()&&(sc.q.IG()?sc.q.qba():sc.q.Es()?sc.gd.Dv.play():sc.q.uy()&&sc.gd.submit.play());sc.q.T.ki(sc.ng.QUEST_SWITCH)&&(sc.q.ko()&&sc.q.BN())&&(sc.ba.kIb()?sc.dc.OCa(-1):sc.ba.lIb()&&sc.dc.OCa(1));if(!ig.r.CD()&&sc.q.BN()&&(sc.q.ko()||sc.q.MS())&&ig.r.cb&&!ig.r.cb.uDb()&&!sc.q.T.Py&&!sc.ba.Ac()){var a=sc.ba.ADa();if(a!==y){if(!a||
a==sc.q.T.sg)a=sc.ha.NEUTRAL;a!=sc.q.T.sg&&sc.q.T.GK(a)}(a=sc.ba.Dxb())&&sc.q.T.ZJb(a)}if(sc.q.T.ki(sc.ng.QUICK_MENU)){a=sc.options.get("quick-menu-access");if(a==sc.kka.fRa)if(sc.ba.pIb()){if(!sc.Kb.vF&&sc.q.loa()){sc.Kb.vF=h;sc.gd.c9a.play()}}else{if(sc.Kb.vF){sc.Kb.vF=y;if(sc.Kb.visible){sc.q.Zw();sc.gd.d9a.play()}}}else if(a==sc.kka.uSa&&sc.ba.qIb())if(sc.q.jx()){sc.q.Zw();sc.gd.d9a.play()}else sc.q.loa()&&sc.gd.c9a.play()}if(ig.platform==ig.Mk.DESKTOP&&ig.input.Yc("fullscreen")){sc.options.set("fullscreen",
!sc.options.get("fullscreen"));sc.options.x8a()}if(ig.input.Yc("snapshot")){a=ig.i.canvas.toDataURL("image/png");ig.platform==ig.Mk.DESKTOP?window.open(a,"_blank"):window.SHOW_SCREENSHOT(a)}}}});sc.nP=48;sc.$fb=ig.Ca.extend({dm:new ig.c$,nLa:y,jb:q,gla:function(){return sc.options.get("gamepad-attack")?ig.od.ZV:ig.od.YV},Hrb:function(){return sc.options.get("gamepad-attack")?ig.od.YV:ig.od.ZV},Aza:function(){return sc.options.get("gamepad-dash")?ig.od.HV:ig.od.GV},TVa:function(){return sc.options.get("gamepad-dash")?
ig.od.GV:ig.od.HV},Erb:function(){return ig.od.yja},v$a:L("jb"),Kp:function(){return this.jb?this.jb.get("mouseX"):ig.input.Ak.x},Ln:function(){return this.jb?this.jb.get("mouseY"):ig.input.Ak.y},iAb:function(){return this.jb?h:ig.input.Yc("aim")},e2a:function(){return this.jb?ig.input.qb==ig.Yb.xm&&this.jb.get("menuConfirm"):ig.input.F5a("aim")},nda:function(){return this.jb?y:ig.input.Yc("aim")},fFa:function(){return this.jb?y:ig.input.state("aim")},Cf:function(a){if(this.jb){if(a==ig.Nd.wn)return this.jb.get("axisLeftX");
if(a==ig.Nd.xn)return this.jb.get("axisLeftY");if(a==ig.Nd.bA)return this.jb.get("axisRightX");if(a==ig.Nd.Dw)return this.jb.get("axisRightY");e(Error("Unknown Axis: "+a))}return ig.Xc.Cf(a)},tqa:function(){return this.jb?this.jb.get("leftStickDown"):ig.Xc.tqa()},ED:function(){return this.jb?this.jb.get("rightStickDown"):ig.Xc.ED()},GOb:function(){ig.Xc.uu(ig.od.GV)?this.dm.hw("scrollUp"):ig.Xc.uu(ig.od.YV)&&this.dm.hw("scrollDown");this.nLa=this.dm.sda()},Wla:function(){return this.jb?this.jb.get("aimStart"):
ig.input.Yc("aim")||ig.Xc.ED()},pv:function(){return this.jb?this.jb.get("aiming"):ig.input.state("aim")||ig.Xc.ED()},Kub:function(){return this.jb?this.jb.get("attacking"):ig.input.Yc("aim")&&a()<sc.nP||!ig.Xc.ED()&&ig.Xc.Nj(this.gla())},g1a:function(){return this.jb?this.jb.get("attacking"):ig.input.Yc("aim")||ig.Xc.Nj(this.gla())},tvb:function(){return this.jb?y:ig.input.state("aim")&&a()>=sc.nP||ig.Xc.ED()},svb:function(){return this.jb?y:ig.input.Yc("aim")&&a()<sc.nP||ig.input.qb==ig.Yb.Wc&&
!ig.Xc.ED()},A8:function(){return this.jb?this.jb.get("thrown"):ig.input.F5a("aim")||ig.Xc.ED()&&ig.Xc.Nj(this.gla())},h6:function(){return this.jb?this.jb.get("melee"):ig.input.Yc("melee")||ig.Xc.Nj(this.Erb())},Ac:function(){return this.jb?this.jb.get("charge"):ig.input.state("special")||ig.Xc.uu(this.Hrb())},Nub:function(){return this.jb?y:ig.Xc.ED()&&ig.Xc.uu(this.gla())},RCa:function(){return this.jb?this.jb.get("dashing"):ig.input.Yc("dash")||ig.input.Yc("dash2")||ig.Xc.Nj(this.Aza())},Qwb:function(){return this.jb?
this.jb.get("dashHold"):ig.input.state("dash")||ig.input.state("dash2")||ig.Xc.uu(this.Aza())},st:function(){return this.jb?this.jb.get("guarding"):(ig.input.state("dash")||ig.input.state("guard")||ig.Xc.uu(ig.od.xja)||ig.Xc.uu(this.Aza()))&&!ig.La.zh()},Nh:function(a,c,i){if(this.jb){a.x=this.jb.get("moveDirX");a.y=this.jb.get("moveDirY");return 1}if(ig.Xc.tqa()){a.x=ig.Xc.Cf(ig.Nd.wn,h);a.y=ig.Xc.Cf(ig.Nd.xn,h);if(!i)if(Vec2.ug(a,b)>=0){var i=Vec2.length(a),j=i>0.8?1:i*i/0.64;c>j&&(j=c*0.8+0.2*
j)}else{Vec2.Oa(a,0,0);j=0}Vec2.assign(b,a);return j}a.x=a.y=0;if(ig.input.state("left"))a.x=-1;else if(ig.input.state("right"))a.x=1;if(ig.input.state("up"))a.y=-1;else if(ig.input.state("down"))a.y=1;return a.x||a.y?1:0},pause:function(){return this.jb?this.jb.get("pause"):ig.input.Yc("pause")||ig.Xc.Nj(ig.od.im)},e:function(){return this.jb?this.jb.get("menu"):ig.input.Yc("menu")||ig.Xc.Nj(ig.od.Vxa)},pIb:function(){return this.jb?this.jb.get("quickmenu"):ig.input.state("quick")||ig.Xc.uu(this.TVa())},
qIb:function(){return this.jb?this.jb.get("quickmenu"):ig.input.Yc("quick")||ig.Xc.Nj(this.TVa())},oua:function(){return this.jb?this.jb.get("skipCutscene"):ig.input.Yc("skip-cutscene")||ig.Xc.Nj(ig.od.zja)},Au:function(){return this.jb?ig.input.qb==ig.Yb.Wc&&this.jb.get("menuConfirm"):(ig.input.Yc("confirm")||ig.input.Yc("special")||ig.Xc.Nj(ig.od.r9))&&!ig.La.zh()},Cq:function(){return this.jb?this.jb.get("menuBack"):ig.input.Yc("pause")||ig.input.Yc("back")||ig.input.Yc("dash")||ig.Xc.Nj(ig.od.xja)},
Hs:function(){return this.jb?this.jb.get("menuHotkeyHelp"):ig.input.Yc("help")||ig.Xc.Nj(ig.od.im)},ND:function(){return this.jb?this.jb.get("menuHotkeyHelp2"):ig.input.Yc("help2")||ig.Xc.Nj(ig.od.yja)},ON:function(){return this.jb?this.jb.get("menuHotkeyHelp3"):ig.input.Yc("help3")||ig.Xc.Nj(ig.od.zja)},rIa:function(){return this.jb?this.jb.get("menuHotkeyHelp4"):ig.input.Yc("help4")||ig.Xc.Nj(ig.od.nka)},D6a:function(a){if(this.jb)return this.jb.get("menuSkillLeft");a=a!=g?a:0.8;return ig.input.state("left")||
ig.Xc.Cf(ig.Nd.bA)<-a},E6a:function(a){if(this.jb)return this.jb.get("menuSkillRight");a=a!=g?a:0.8;return ig.input.state("right")||ig.Xc.Cf(ig.Nd.bA)>a},F6a:function(a){if(this.jb)return this.jb.get("menuSkillUp");a=a!=g?a:0.8;return ig.input.state("up")||ig.Xc.Cf(ig.Nd.Dw)<-a},C6a:function(a){if(this.jb)return this.jb.get("menuSkillDown");a=a!=g?a:0.8;return ig.input.state("down")||ig.Xc.Cf(ig.Nd.Dw)>a},aw:function(){return this.jb?this.jb.get("menuCircleLeft"):ig.input.Yc("circle-left")||ig.Xc.Nj(ig.od.GV)},
bw:function(){return this.jb?this.jb.get("menuCircleRight"):ig.input.Yc("circle-right")||ig.Xc.Nj(ig.od.YV)},REb:function(){return this.jb?this.jb.get("menuListUp"):ig.input.Yc("left")||ig.Xc.Nj(ig.od.HV)},QEb:function(){return this.jb?this.jb.get("menuListDown"):ig.input.Yc("right")||ig.Xc.Nj(ig.od.ZV)},kIb:function(){return this.jb?this.jb.get("questCircleLeft"):ig.input.Yc("circle-left")||ig.Xc.Nj(ig.od.Vwa)},lIb:function(){return this.jb?this.jb.get("questCircleRight"):ig.input.Yc("circle-right")||
ig.Xc.Nj(ig.od.nka)},RVb:function(a){a=a!=g?a:0.8;return ig.input.state("left")||ig.Xc.Cf(ig.Nd.wn)<-a||ig.Xc.Cf(ig.Nd.bA)<-a},SVb:function(a){a=a!=g?a:0.8;return ig.input.state("right")||ig.Xc.Cf(ig.Nd.wn)>a||ig.Xc.Cf(ig.Nd.bA)>a},TVb:function(a){a=a!=g?a:0.8;return ig.input.state("up")||ig.Xc.Cf(ig.Nd.xn)<-a||ig.Xc.Cf(ig.Nd.Dw)<-a},QVb:function(a){a=a!=g?a:0.8;return ig.input.state("down")||ig.Xc.Cf(ig.Nd.xn)>a||ig.Xc.Cf(ig.Nd.Dw)>a},yZ:function(){return this.jb?this.jb.get("menuScrollUp"):ig.input.Yc("scrollUp")},
xZ:function(){return this.jb?this.jb.get("menuScrollDown"):ig.input.Yc("scrollDown")},$Jb:function(){return this.jb?this.jb.get("scrollUp"):ig.input.Yc("scrollUp")||this.nLa=="scrollUp"},YJb:function(){return this.jb?this.jb.get("scrollDown"):ig.input.Yc("scrollDown")||this.nLa=="scrollDown"},y4a:function(a,b){return!b&&this.jb?this.jb.get("interactPressed"):ig.input.Yc("aim")||ig.Xc.Nj(ig.od.r9)||ig.input.Yc("confirm")||(a?this.Cq():y)},eDb:function(){return this.jb?this.jb.get("interactDown"):ig.input.state("aim")||
ig.Xc.uu(ig.od.r9)},Lea:function(){return this.jb?this.jb.get("leftPressed"):ig.input.Yc("left")||ig.Xc.Nj(ig.od.pV)},Yga:function(){return this.jb?this.jb.get("rightPressed"):ig.input.Yc("right")||ig.Xc.Nj(ig.od.qV)},ZXb:function(){return this.jb?this.jb.get("upPressed"):ig.input.Yc("up")||ig.Xc.Nj(ig.od.rV)},MSb:function(){return this.jb?this.jb.get("downPressed"):ig.input.Yc("down")||ig.Xc.Nj(ig.od.oV)},AVb:function(){return this.jb?this.jb.get("leftPressedSticks"):ig.input.Yc("left")||ig.Xc.Nj(ig.od.pV)||
ig.Xc.Cf(ig.Nd.wn)<-0.8||ig.Xc.Cf(ig.Nd.bA)<-0.8},TWb:function(){return this.jb?this.jb.get("rightPressedSticks"):ig.input.Yc("right")||!sc.q.MS()&&ig.Xc.Nj(ig.od.qV)||ig.Xc.Cf(ig.Nd.wn)>0.8||ig.Xc.Cf(ig.Nd.bA)>0.8},$Xb:function(){return this.jb?this.jb.get("upPressedSticks"):ig.input.Yc("up")||!sc.q.MS()&&ig.Xc.uu(ig.od.rV)||ig.Xc.Cf(ig.Nd.xn)<-0.8||ig.Xc.Cf(ig.Nd.Dw)<-0.8},NSb:function(){return this.jb?this.jb.get("downPressedSticks"):ig.input.Yc("down")||!sc.q.MS()&&ig.Xc.uu(ig.od.oV)||ig.Xc.Cf(ig.Nd.xn)>
0.8||ig.Xc.Cf(ig.Nd.Dw)>0.8},OG:function(){return this.jb?this.jb.get("menuLeft"):ig.input.state("left")||!sc.q.MS()&&ig.Xc.uu(ig.od.pV)||ig.Xc.Cf(ig.Nd.wn)<-0.8},CH:function(){return this.jb?this.jb.get("menuRight"):ig.input.state("right")||!sc.q.MS()&&ig.Xc.uu(ig.od.qV)||ig.Xc.Cf(ig.Nd.wn)>0.8},Zu:function(){return this.jb?this.jb.get("menuUp"):ig.input.state("up")||!sc.q.MS()&&ig.Xc.uu(ig.od.rV)||ig.Xc.Cf(ig.Nd.xn)<-0.8},gu:function(){return this.jb?this.jb.get("menuDown"):ig.input.state("down")||
!sc.q.MS()&&ig.Xc.uu(ig.od.oV)||ig.Xc.Cf(ig.Nd.xn)>0.8},EEb:function(){return this.jb?this.jb.get("loreDown"):ig.input.state("right")||ig.Xc.Cf(ig.Nd.Dw)>0.8||ig.Xc.uu(ig.od.qV)},GEb:function(){return this.jb?this.jb.get("loreDown"):ig.input.state("left")||ig.Xc.Cf(ig.Nd.Dw)<-0.8||ig.Xc.uu(ig.od.pV)},Dxb:function(){if(this.jb||!sc.options.get("element-wheel"))return 0;if(ig.input.Yc("scrollUp"))return-1;if(ig.input.Yc("scrollDown"))return 1},ADa:function(){return this.jb?this.jb.get("heatMode")?sc.ha.HEAT:
this.jb.get("coldMode")?sc.ha.COLD:this.jb.get("shockMode")?sc.ha.SHOCK:this.jb.get("waveMode")?sc.ha.WAVE:y:ig.input.Yc("neutral")?sc.ha.NEUTRAL:ig.input.Yc("heat")||ig.Xc.Nj(ig.od.oV)?sc.ha.HEAT:ig.input.Yc("cold")||ig.Xc.Nj(ig.od.rV)?sc.ha.COLD:ig.input.Yc("shock")||ig.Xc.Nj(ig.od.qV)?sc.ha.SHOCK:ig.input.Yc("wave")||ig.Xc.Nj(ig.od.pV)?sc.ha.WAVE:y}});var c=Vec2.create();sc.ba=new sc.$fb;ig.Vf(function(){return sc.qUb=new sc.Phb})});ig.J=h;
ig.N("game.feature.combat.stat-change").O("impact.base.game").K(function(){window.FOR_THE_HACKERS="I see you are browsing through the code of our game! Hope you having a good time around here. I thought I adda little extra for you here, since you took the effort to check out the optimized/obfuscated code of CrossCode.If you happen to have a particular question about a feature, you can write us a mail and will be happy to answer it!Simply check out our homepage over at www.radicalfishgames.com! Also don't tell Lachsen you found this, or he will throw evil looks at me all day! - R.D.";
sc.$mb={"stat-default":[0,0],"stat-hp":[0,0],"stat-attack":[0,1],"stat-defense":[0,2],"stat-focus":[0,3],"stat-heat":[0,4],"stat-cold":[0,5],"stat-shock":[0,6],"stat-wave":[0,7],"stat-rank-1":[0,8],"stat-rank-2":[0,9],"stat-rank-3":[0,10],"stat-level-1":[0,11],"stat-level-2":[0,12],"stat-level-3":[0,13],"stat-regen":[0,14],"stat-overheat":[0,15],"stat-sp-regen":[0,16],"stat-cond-healing":[0,18],"stat-stun-threshold":[0,19],"stat-spike-dmg":[0,20],"stat-cross-counter":[0,21],"stat-break-dmg":[0,22],
"stat-hack":[0,23],"stat-rank-down-1":[0,24],"stat-rank-down-2":[0,25],"stat-rank-down-3":[0,26],"stat-rank-4":[0,27]};sc.anb={"stat-default":[4,0],"stat-hp":[4,0],"stat-attack":[4,1],"stat-defense":[4,2],"stat-focus":[4,3],"stat-heat":[4,4],"stat-cold":[4,5],"stat-shock":[4,6],"stat-wave":[4,7],"stat-rank-1":[4,8],"stat-rank-2":[4,9],"stat-rank-3":[4,10],"stat-level-1":[4,11],"stat-level-2":[4,12],"stat-level-3":[4,13],"stat-regen":[4,14],"stat-overheat":[4,15],"stat-sp-regen":[4,16],"stat-cond-healing":[4,
18],"stat-stun-threshold":[4,19],"stat-spike-dmg":[4,20],"stat-cross-counter":[4,21],"stat-break-dmg":[4,22],"stat-hack":[0,23],"stat-rank-down-1":[0,24],"stat-rank-down-2":[0,25],"stat-rank-down-3":[0,26],"stat-rank-4":[0,27]};var a=[0,0,0,0],b=["hp","attack","defense","focus"];sc.PTa=ig.Ca.extend({W:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1,1,1,1]},So:{},qGa:"\\i[stat-default]",f:function(a){var b=a.length,f=q;for(this.qGa="";b--;)if((f=sc.Qe[a[b]])&&f.change!=sc.ce.HEAL)if(f.change==sc.ce.STATS)f.type.key!=
"elemFactor"?this.W[f.type.key]=this.W[f.type.key]*(f.value||1):this.W.elemFactor[f.type.index]=this.W.elemFactor[f.type.index]*(f.value||1);else{this.So[f.type.key]||(this.So[f.type.key]=0);this.So[f.type.key]=this.So[f.type.key]+f.value}this.qGa=sc.yb.M4(-1,h,a)},multiply:function(b,d){var f=this.W[d];if(f){if(b instanceof Array){for(var i=f.length;i--;)a[i]=b[i]*f[i];return a}return b*f}return b},add:function(a,b){return a+(this.So[b]||0)},clear:J(),iUb:function(a){return this.W[a]},WFa:y,wpa:N(0),
FS:function(a){for(var d=b.length;d--;){var f=b[d];if(this.W[f]!=1&&a.W[f]!=1)return h}for(d=4;d--;)if(this.W.elemFactor[d]!=1&&a.W.elemFactor[d]!=1)return h;for(f in this.So)if(a.So[f])return h;return y}});sc.zib=sc.PTa.extend({n:0,time:0,hZ:-1,f:function(a,b,f){this.parent(a);this.n=this.time=b||0;this.hZ=f||-1},update:function(){if(this.n>0){this.n=this.n-ig.i.Sa;if(this.n<=0){this.n=0;return h}}return y},clear:function(){this.n=0},reset:function(a){this.n=this.time=a+this.n},WFa:h,wpa:function(){return this.time<=
0?0:this.n/this.time}});sc.sPa=sc.PTa.extend({Aa:h,name:q,Ida:y,f:function(a,b,f){this.parent(a);this.name=b;this.Ida=f||y},update:function(){return!this.Aa},Zl:function(){this.Aa=y},dw:function(){this.Aa=y},clear:function(){this.Aa=y},reset:function(a){this.n=this.time=a+this.n},WFa:y,wpa:function(){return this.Aa?1:0}});sc.ce={};sc.ce.STATS=0;sc.ce.MODIFIER=1;sc.ce.HEAL=2;sc.ie={};sc.ie.HP_REGEN={key:"HP_REGEN"};sc.ie.HP={key:"hp"};sc.ie.HEAL={key:"heal"};sc.ie.ATTACK={key:"attack"};sc.ie.DEFENSE=
{key:"defense"};sc.ie.FOCUS={key:"focus"};sc.ie.HEAT={key:"elemFactor",index:0};sc.ie.COLD={key:"elemFactor",index:1};sc.ie.SHOCK={key:"elemFactor",index:2};sc.ie.WAVE={key:"elemFactor",index:3};sc.ie.OVERHEAT={key:"OVERHEAT_REDUCTION"};sc.ie.SP_REGEN={key:"SP_REGEN"};sc.ie.COND_HEALING={key:"COND_HEALING"};sc.ie.STUN_THRESHOLD={key:"STUN_THRESHOLD"};sc.ie.SPIKE_DMG={key:"SPIKE_DMG"};sc.ie.CROSS_COUNTER={key:"CROSS_COUNTER"};sc.ie.BREAK_DMG={key:"BREAK_DMG"};sc.ie.MELEE_DMG={key:"MELEE_DMG"};sc.Q1=
{};sc.Q1.NORMAL=1;sc.Q1.SLOW=2;sc.Q1.FAST=3;sc.Qe={};sc.Qe["HP-1"]={change:sc.ce.STATS,type:sc.ie.HP,value:1.1,icon:"stat-hp",grade:"stat-rank-1"};sc.Qe["HP-2"]={change:sc.ce.STATS,type:sc.ie.HP,value:1.15,icon:"stat-hp",grade:"stat-rank-2"};sc.Qe["HP-3"]={change:sc.ce.STATS,type:sc.ie.HP,value:1.2,icon:"stat-hp",grade:"stat-rank-3"};sc.Qe["ATTACK-1"]={change:sc.ce.STATS,type:sc.ie.ATTACK,value:1.1,icon:"stat-attack",grade:"stat-rank-1"};sc.Qe["ATTACK-2"]={change:sc.ce.STATS,type:sc.ie.ATTACK,value:1.15,
icon:"stat-attack",grade:"stat-rank-2"};sc.Qe["ATTACK-3"]={change:sc.ce.STATS,type:sc.ie.ATTACK,value:1.2,icon:"stat-attack",grade:"stat-rank-3"};sc.Qe.HACK={change:sc.ce.STATS,type:sc.ie.ATTACK,value:1,icon:"stat-hack",grade:"stat-rank-3"};sc.Qe["DEFENSE-1"]={change:sc.ce.STATS,type:sc.ie.DEFENSE,value:1.1,icon:"stat-defense",grade:"stat-rank-1"};sc.Qe["DEFENSE-2"]={change:sc.ce.STATS,type:sc.ie.DEFENSE,value:1.15,icon:"stat-defense",grade:"stat-rank-2"};sc.Qe["DEFENSE-3"]={change:sc.ce.STATS,type:sc.ie.DEFENSE,
value:1.2,icon:"stat-defense",grade:"stat-rank-3"};sc.Qe["FOCUS-1"]={change:sc.ce.STATS,type:sc.ie.FOCUS,value:1.1,icon:"stat-focus",grade:"stat-rank-1"};sc.Qe["FOCUS-2"]={change:sc.ce.STATS,type:sc.ie.FOCUS,value:1.15,icon:"stat-focus",grade:"stat-rank-2"};sc.Qe["FOCUS-3"]={change:sc.ce.STATS,type:sc.ie.FOCUS,value:1.2,icon:"stat-focus",grade:"stat-rank-3"};sc.Qe["ATTACK-4"]={change:sc.ce.STATS,type:sc.ie.ATTACK,value:1.4,icon:"stat-attack",grade:"stat-rank-4"};sc.Qe["FOCUS-4"]={change:sc.ce.STATS,
type:sc.ie.FOCUS,value:1.4,icon:"stat-focus",grade:"stat-rank-4"};sc.Qe["DEFENSE-MINUS-1"]={change:sc.ce.STATS,type:sc.ie.DEFENSE,value:0.5,negative:h,icon:"stat-defense",grade:"stat-rank-down-3"};sc.Qe["HEAT-RES-1"]={change:sc.ce.STATS,type:sc.ie.HEAT,value:0.9,icon:"stat-heat",grade:"stat-rank-1"};sc.Qe["HEAT-RES-2"]={change:sc.ce.STATS,type:sc.ie.HEAT,value:0.8,icon:"stat-heat",grade:"stat-rank-2"};sc.Qe["HEAT-RES-3"]={change:sc.ce.STATS,type:sc.ie.HEAT,value:0.7,icon:"stat-heat",grade:"stat-rank-3"};
sc.Qe["COLD-RES-1"]={change:sc.ce.STATS,type:sc.ie.COLD,value:0.9,icon:"stat-cold",grade:"stat-rank-1"};sc.Qe["COLD-RES-2"]={change:sc.ce.STATS,type:sc.ie.COLD,value:0.8,icon:"stat-cold",grade:"stat-rank-2"};sc.Qe["COLD-RES-3"]={change:sc.ce.STATS,type:sc.ie.COLD,value:0.7,icon:"stat-cold",grade:"stat-rank-3"};sc.Qe["SHOCK-RES-1"]={change:sc.ce.STATS,type:sc.ie.SHOCK,value:0.9,icon:"stat-shock",grade:"stat-rank-1"};sc.Qe["SHOCK-RES-2"]={change:sc.ce.STATS,type:sc.ie.SHOCK,value:0.8,icon:"stat-shock",
grade:"stat-rank-2"};sc.Qe["SHOCK-RES-3"]={change:sc.ce.STATS,type:sc.ie.SHOCK,value:0.7,icon:"stat-shock",grade:"stat-rank-3"};sc.Qe["WAVE-RES-1"]={change:sc.ce.STATS,type:sc.ie.WAVE,value:0.9,icon:"stat-wave",grade:"stat-rank-1"};sc.Qe["WAVE-RES-2"]={change:sc.ce.STATS,type:sc.ie.WAVE,value:0.8,icon:"stat-wave",grade:"stat-rank-2"};sc.Qe["WAVE-RES-3"]={change:sc.ce.STATS,type:sc.ie.WAVE,value:0.7,icon:"stat-wave",grade:"stat-rank-3"};sc.Qe["HEAL-1"]={change:sc.ce.HEAL,type:sc.ie.HEAL,value:1.15,
icon:"stat-default"};sc.Qe["HEAL-2"]={change:sc.ce.HEAL,type:sc.ie.HEAL,value:1.25,icon:"stat-default"};sc.Qe["HEAL-3"]={change:sc.ce.HEAL,type:sc.ie.HEAL,value:1.5,icon:"stat-default"};sc.Qe["HEAL-4"]={change:sc.ce.HEAL,type:sc.ie.HEAL,value:1.7,icon:"stat-default"};sc.Qe["HEAL-5"]={change:sc.ce.HEAL,type:sc.ie.HEAL,value:1.8,icon:"stat-default"};sc.Qe["REGEN-1"]={change:sc.ce.MODIFIER,type:sc.ie.HP_REGEN,value:0.15,icon:"stat-regen",grade:"stat-rank-1"};sc.Qe["REGEN-2"]={change:sc.ce.MODIFIER,type:sc.ie.HP_REGEN,
value:0.2,icon:"stat-regen",grade:"stat-rank-2"};sc.Qe["REGEN-3"]={change:sc.ce.MODIFIER,type:sc.ie.HP_REGEN,value:0.25,icon:"stat-regen",grade:"stat-rank-3"};sc.Qe["OVERHEAT-1"]={change:sc.ce.MODIFIER,type:sc.ie.OVERHEAT,value:0.15,icon:"stat-overheat",grade:"stat-rank-1"};sc.Qe["OVERHEAT-2"]={change:sc.ce.MODIFIER,type:sc.ie.OVERHEAT,value:0.25,icon:"stat-overheat",grade:"stat-rank-2"};sc.Qe["OVERHEAT-3"]={change:sc.ce.MODIFIER,type:sc.ie.OVERHEAT,value:0.35,icon:"stat-overheat",grade:"stat-rank-3"};
sc.Qe["SP_REGEN-1"]={change:sc.ce.MODIFIER,type:sc.ie.SP_REGEN,value:0.15,icon:"stat-sp-regen",grade:"stat-rank-1"};sc.Qe["SP_REGEN-2"]={change:sc.ce.MODIFIER,type:sc.ie.SP_REGEN,value:0.25,icon:"stat-sp-regen",grade:"stat-rank-2"};sc.Qe["SP_REGEN-3"]={change:sc.ce.MODIFIER,type:sc.ie.SP_REGEN,value:0.35,icon:"stat-sp-regen",grade:"stat-rank-3"};sc.Qe["COND_HEALING-1"]={change:sc.ce.MODIFIER,type:sc.ie.COND_HEALING,value:0.3,icon:"stat-cond-healing",grade:"stat-rank-1"};sc.Qe["COND_HEALING-2"]={change:sc.ce.MODIFIER,
type:sc.ie.COND_HEALING,value:0.5,icon:"stat-cond-healing",grade:"stat-rank-2"};sc.Qe["COND_HEALING-3"]={change:sc.ce.MODIFIER,type:sc.ie.COND_HEALING,value:0.75,icon:"stat-cond-healing",grade:"stat-rank-3"};sc.Qe["STUN_THRESHOLD-3"]={change:sc.ce.MODIFIER,type:sc.ie.STUN_THRESHOLD,value:0.1,icon:"stat-stun-threshold",grade:"stat-rank-3"};sc.Qe["SPIKE_DMG-3"]={change:sc.ce.MODIFIER,type:sc.ie.SPIKE_DMG,value:0.5,icon:"stat-spike-dmg",grade:"stat-rank-3"};sc.Qe["CROSS_COUNTER-1"]={change:sc.ce.MODIFIER,
type:sc.ie.CROSS_COUNTER,value:0.15,icon:"stat-cross-counter",grade:"stat-rank-1"};sc.Qe["CROSS_COUNTER-2"]={change:sc.ce.MODIFIER,type:sc.ie.CROSS_COUNTER,value:0.25,icon:"stat-cross-counter",grade:"stat-rank-2"};sc.Qe["CROSS_COUNTER-3"]={change:sc.ce.MODIFIER,type:sc.ie.CROSS_COUNTER,value:0.35,icon:"stat-cross-counter",grade:"stat-rank-3"};sc.Qe["BREAK_DMG-3"]={change:sc.ce.MODIFIER,type:sc.ie.BREAK_DMG,value:0.35,icon:"stat-break-dmg",grade:"stat-rank-3"};sc.Qe["MELEE_DMG-1"]={change:sc.ce.MODIFIER,
type:sc.ie.MELEE_DMG,value:0.1,icon:"stat-default",grade:"stat-rank-1"};sc.Qe["MELEE_DMG-2"]={change:sc.ce.MODIFIER,type:sc.ie.MELEE_DMG,value:0.2,icon:"stat-default",grade:"stat-rank-2"};sc.Qe["MELEE_DMG-3"]={change:sc.ce.MODIFIER,type:sc.ie.MELEE_DMG,value:0.3,icon:"stat-default",grade:"stat-rank-3"}});ig.J=h;
ig.N("game.feature.font.font-system").O("impact.base.font","impact.base.game","game.feature.combat.stat-change").K(function(){sc.Do={Nl:1,zw:2,E1:3,wm:4,bF:5};var a={o:[0,0],x:[0,1],"<":[0,2],">":[0,3],tech:[0,4],general:[0,7],"interface":[0,8],video:[0,9],audio:[0,10],gamepad:[0,81],controls:[0,11],lea:[0,12],lea2:[0,15],li:[0,13],"item-news":[0,14],lea3:[0,16],quest:[0,17],"quest-solve":[0,18],"quest-fav":[0,19],"quest-all":[0,20],"quest-elite":[0,78],"quest-elite-solve":[0,79],exp:[0,21],cp:[0,
92],credit:[0,22],landmark:[0,23],lore:[0,24],loreNew:[0,25],"lore-story":[0,26],"lore-people":[0,27],"lore-cross-lore":[0,28],"lore-earth-lore":[0,29],"lore-memories":[0,30],"lore-others":[0,31],"enemy-mecha":[0,33],"enemy-avatars":[0,32],"enemy-animals":[0,34],"enemy-abstract":[0,35],"enemy-mecha-boss":[0,37],"enemy-avatars-boss":[0,36],"enemy-animals-boss":[0,38],"enemy-abstract-boss":[0,39],"enemy-boss":[0,40],"social-close":[0,42],"social-contacts":[0,41],"social-3":[0,43],"stats-general":[0,
44],"stats-combat":[0,45],"stats-items":[0,46],"stats-exploration":[0,47],"stats-misc":[0,48],"stats-quests":[0,49],"arrow-percent":[0,50],"element-neutral":[0,51],"element-heat":[0,52],"element-cold":[0,53],"element-shock":[0,54],"element-wave":[0,55],"element-all":[0,93],slash:[0,56],"slash-highlight":[0,57],"stats-log":[0,58],"logs-TROPHY":[0,59],"logs-LANDMARK":[0,60],"logs-LORE":[0,64],"logs-TRADER":[0,62],"logs-QUEST":[0,61],"logs-DROP":[0,80],"area-rookie-harbor":[0,67],"area-autumn-area":[0,
68],"area-autumn-fall":[0,69],"area-bergen":[0,71],"area-bergen-trails":[0,70],"area-heat-area":[0,72],"area-heat-village":[0,73],"area-rhombus-sqr":[0,74],"area-jungle":[0,76],"area-jungle-city":[0,77],"area-cold-dng":[0,94],"area-forest":[0,99],"area-arid":[0,100],"area-other":[0,31],"toggle-item-off":[0,101],"toggle-item-on":[0,102],"toggle-item-off-radio":[0,114],"toggle-item-on-radio":[0,115],"trophies-GENERAL":[0,96],"trophies-COMBAT":[0,97],"trophies-EXPLORATION":[0,98],"party-TARGET-0":[0,
82],"party-TARGET-1":[0,83],"party-TARGET-2":[0,84],"party-BEHAVIOUR-0":[0,85],"party-BEHAVIOUR-1":[0,86],"party-BEHAVIOUR-2":[0,87],"party-ARTS-0":[0,88],"party-ARTS-1":[0,89],"party-ARTS-2":[0,90],"questHub-open":[0,17],"questHub-active":[0,95],"questHub-finished":[0,18],"help-icon":[0,91],"status-stun-1":[0,107],"status-stun-2":[0,108],"status-cond-1":[0,103],"status-cond-2":[0,104],"status-cond-3":[0,105],"status-cond-4":[0,106],"ancient-code-1":[0,109],"ancient-code-2":[0,110],"ancient-code-3":[0,
111],"ancient-code-4":[0,112],"ancient-code-5":[0,113],twitter:[0,116]},b={"arrow-n":[0,0],"arrow-e":[0,1],"arrow-s":[0,2],"arrow-w":[0,3],"arrow-ne":[0,4],"arrow-se":[0,5],"arrow-sw":[0,6],"arrow-nw":[0,7],"quest-no":[0,8],"quest-ok":[0,9],"quest-mini-no":[0,10],"quest-mini-ok":[0,11],"break":[0,12],"rank-up":[0,13],lore:[0,14],loreNew:[0,15],insetArrow:[0,16],burn:[0,17],chill:[0,18],jolt:[0,19],mark:[0,20],"stun-cancel":[0,21],"star-icon":[0,22]},c={};c[ig.ub.wPa]=4;c[ig.ub.TTa]=93;c[ig.ub.EQa]=
10;c[ig.ub.lTa]=16;c[ig.ub.Ijb]=40;c[ig.ub.AQa]=41;c[ig.ub.C1]=42;c[ig.ub.pfb]=43;c[ig.ub.VSa]=44;c[ig.ub.elb]=45;c[ig.ub.dlb]=46;c[ig.ub.Dgb]=47;c[ig.ub.Zhb]=48;c[ig.ub.oPa]=49;c[ig.ub.hlb]=50;c[ig.ub.jgb]=51;c[ig.ub.wfb]=51;c[ig.ub.kgb]=65;c[ig.ub.jib]=66;c[ig.ub.bQa]=81;c[ig.ub.nPa]=82;c[ig.ub.dnb]=83;c[ig.ub.mgb]=84;c[ig.ub.Kjb]=85;c[ig.ub.lUa]=77;c[ig.ub.PSa]=78;c[ig.ub.yRa]=79;c[ig.ub.mQa]=80;c[ig.ub.uUa]=55;c[ig.ub.vUa]=56;c[ig.ub.wUa]=57;c[ig.ub.xUa]=58;c[ig.ub.yUa]=59;c[ig.ub.zUa]=60;c[ig.ub.hqb]=
61;c[ig.ub.AUa]=62;c[ig.ub.BUa]=63;c[ig.ub.iqb]=64;c[ig.ub.xkb]=67;c[ig.ub.ykb]=68;c[ig.ub.zkb]=69;c[ig.ub.Akb]=70;c[ig.ub.Bkb]=71;c[ig.ub.Ckb]=72;c[ig.ub.Dkb]=73;c[ig.ub.Ekb]=74;c[ig.ub.Fkb]=75;c[ig.ub.Gkb]=76;c[ig.ub.Web]=87;c[ig.ub.Veb]=88;c[ig.ub.EQUAL]=89;c[ig.ub.Xeb]=86;c[ig.ub.Nmb]=90;c[ig.ub.Kmb]=52;c[ig.ub.$Qa]=91;c[ig.ub.Omb]=92;c[ig.ub.kPa]=0;c[ig.ub.vPa]=13;c[ig.ub.MPa]=17;c[ig.ub.gQa]=2;c[ig.ub.E]=12;c[ig.ub.uhb]=18;c[ig.ub.YQa]=19;c[ig.ub.dRa]=14;c[ig.ub.iRa]=20;c[ig.ub.Pib]=21;c[ig.ub.Wib]=
22;c[ig.ub.Twa]=23;c[ig.ub.Vja]=24;c[ig.ub.XRa]=25;c[ig.ub.Okb]=26;c[ig.ub.clb]=27;c[ig.ub.GSa]=11;c[ig.ub.MSa]=28;c[ig.ub.oka]=1;c[ig.ub.STa]=29;c[ig.ub.Opb]=30;c[ig.ub.mUa]=31;c[ig.ub.pUa]=3;c[ig.ub.I$]=32;c[ig.ub.e2]=33;c[ig.ub.gqb]=34;var d={},f;for(f in c)d["keyCode-"+f]=[1,c[f]];var i={"key-left":[1,0],"key-down":[1,1],"key-right":[1,2],"key-up":[1,3],"key-throw":[1,5],"key-dash":[1,6],mousewheel:[1,7],"key-menu":[1,9],"key-pause":[1,10],"key-melee":[1,31],"mouse-guard":[1,6]},j={left:[1,0],
down:[1,1],right:[1,2],up:[1,3],aim:[1,5],"throw":[1,5],dash:[1,6],guard:[1,6],pause:[1,7],back:[1,4],special:[1,16],select:[0,0],help:[1,14],help2:[1,13],help3:[1,17],help4:[1,19],menu:[1,9],quick:[1,44],cold:[1,56],shock:[1,57],heat:[1,58],wave:[1,59],"arrow-left":[0,5],"arrow-right":[0,6],"arrow-left-off":[0,65],"arrow-right-off":[0,66],"circle-left":[1,11],"circle-right":[1,12],"list-up":[1,0],"list-down":[1,2],"page-left":[1,0],"page-right":[1,2],"skip-cutscene":[1,19]},k={"left-stick":[2,0],
"right-stick":[2,1],"gamepad-left":[2,8],"gamepad-down":[2,9],"gamepad-right":[2,10],"gamepad-up":[2,11],"gamepad-l1":[2,2],"gamepad-r1":[2,3],"gamepad-l2":[2,4],"gamepad-r2":[2,5],"gamepad-pause":[2,7],"gamepad-select":[2,6],"gamepad-a":[2,12],"gamepad-b":[2,13],"gamepad-x":[2,14],"gamepad-y":[2,15],"left-stick-left":[2,16],"left-stick-right":[2,17],"left-stick-press":[2,18],"right-stick-press":[2,19],"gamepad-l1-off":[2,20],"gamepad-r1-off":[2,21]},l={"left-stick":[2,24],"right-stick":[2,25],"gamepad-left":[2,
32],"gamepad-down":[2,33],"gamepad-right":[2,34],"gamepad-up":[2,35],"gamepad-l1":[2,26],"gamepad-r1":[2,27],"gamepad-l2":[2,28],"gamepad-r2":[2,29],"gamepad-pause":[2,31],"gamepad-select":[2,30],"gamepad-a":[2,36],"gamepad-b":[2,37],"gamepad-x":[2,38],"gamepad-y":[2,39],"left-stick-left":[2,40],"left-stick-right":[2,41],"left-stick-press":[2,42],"right-stick-press":[2,43],"gamepad-l1-off":[2,44],"gamepad-r1-off":[2,45]},m={},n={left:"gamepad-left",down:"gamepad-down",right:"gamepad-right",up:"gamepad-up",
aim:"right-stick","throw":"gamepad-r1",dash:"gamepad-l1",guard:"gamepad-l1",pause:"gamepad-pause",back:"gamepad-b",special:"gamepad-r2",help:"gamepad-pause",help2:"gamepad-x",help3:"gamepad-y",help4:"right-stick-press",menu:"gamepad-select",quick:"gamepad-l2",heat:"gamepad-down",shock:"gamepad-right",cold:"gamepad-up",wave:"gamepad-left","arrow-left":"gamepad-l1","arrow-right":"gamepad-r1","arrow-left-off":"gamepad-l1-off","arrow-right-off":"gamepad-r1-off","circle-left":"gamepad-l1","circle-right":"gamepad-r1",
"page-left":"gamepad-left","page-right":"gamepad-right","list-up":"gamepad-l2","list-down":"gamepad-r2","skip-cutscene":"gamepad-y"},o={};sc.lib={"item-default":[3,0],"item-helm":[3,1],"item-sword":[3,2],"item-belt":[3,3],"item-shoe":[3,4],"item-items":[3,5],"item-key":[3,6],"item-trade":[3,7],"item-toggle":[3,8]};sc.QPb={"feat-default":[3,0]};sc.xI={};for(f=0;f<5;f++){var t=(f+1)*9,p="";switch(f){case 0:p="normal";break;case 1:p="rare";break;case 2:p="legend";break;case 3:p="unique";break;case 4:p=
"backer"}sc.xI["item-default-"+p]=[3,t++];sc.xI["item-helm-"+p]=[3,t++];sc.xI["item-sword-"+p]=[3,t++];sc.xI["item-belt-"+p]=[3,t++];sc.xI["item-shoe-"+p]=[3,t++];sc.xI["item-items-"+p]=[3,t++];sc.xI["item-key-"+p]=[3,t++];sc.xI["item-trade-"+p]=[3,t++];sc.xI["item-toggle-"+p]=[3,t++]}sc.Khb={XBOX:0,PS3:1};sc.cjb={"language-0":[5,1],"language-1":[5,0],"language-2":[5,3],"language-3":[5,2],"language-4":[5,4]};sc.Jhb=ig.Uf.extend({ZR:y,Hr:{global:new ig.$g("media/font/icons.png",16,ig.$q.Vz),HBb:new ig.$g("media/font/icons-small.png",
14,ig.$q.Vz),hEb:new ig.$g("media/font/icons-keyboard.png",16,ig.$q.Vz),Xc:new ig.$g("media/font/icons-gamepad.png",16,ig.$q.Vz),Rc:new ig.$g("media/font/icons-items.png",16,ig.$q.Vz),pa:new ig.$g("media/font/icons-buff.png",8,ig.$q.Vz),qNb:new ig.$g("media/font/icons-buff-large.png",16,ig.$q.Vz),lEb:new ig.$g("media/font/languages.png",16,ig.$q.Vz)},nt:{red:new ig.ia("media/font/colors/hall-fetica-bold-red.png",16),green:new ig.ia("media/font/colors/hall-fetica-bold-green.png",16),eIb:new ig.ia("media/font/colors/hall-fetica-bold-purple.png",
16),NBb:new ig.ia("media/font/colors/hall-fetica-bold-grey.png",16),EHb:new ig.ia("media/font/colors/hall-fetica-small-orange.png",13),FHb:new ig.ia("media/font/colors/tiny-orange.png",7),fIb:new ig.ia("media/font/colors/hall-fetica-small-purple.png",13),OBb:new ig.ia("media/font/colors/hall-fetica-small-grey.png",13),PBb:new ig.ia("media/font/colors/tiny-grey.png",7),wIb:new ig.ia("media/font/colors/hall-fetica-small-red.png",13),xIb:new ig.ia("media/font/colors/tiny-red.png",7),LBb:new ig.ia("media/font/colors/hall-fetica-small-green.png",
13),MBb:new ig.ia("media/font/colors/tiny-green.png",7)},font:new ig.$q("media/font/hall-fetica-bold.png",16,0),he:new ig.$q("media/font/hall-fetica-small.png",13,1),Ib:new ig.$q("media/font/tiny.png",7,2,"#cccccc"),EXb:1,m1a:sc.Khb.XBOX,f:function(){this.parent("FontSystem");this.font.cU(this.Hr.global);this.font.cU(this.Hr.hEb);this.font.cU(this.Hr.Xc);this.font.cU(this.Hr.Rc);this.font.cU(this.Hr.qNb);this.font.cU(this.Hr.lEb);this.Ib.cU(this.Hr.pa);this.he.cU(this.Hr.HBb);this.MOa();this.font.Pu(a);
this.font.Pu(i);this.font.Pu(m);this.font.Pu(j);this.font.Pu(d);this.font.Pu(sc.lib);this.font.Pu(sc.xI);this.font.Pu(sc.anb);this.font.Pu(sc.cjb);this.he.Pu(b);this.Ib.Pu(sc.$mb);this.font.CB(sc.Do.Nl,this.nt.red,"#ff6969");this.font.CB(sc.Do.zw,this.nt.green,"#65ff89");this.font.CB(sc.Do.E1,this.nt.eIb,"#ffe430");this.font.CB(sc.Do.wm,this.nt.NBb,"#808080");this.he.CB(sc.Do.wm,this.nt.OBb,"#808080");this.he.CB(sc.Do.Nl,this.nt.wIb,"#ff6969");this.he.CB(sc.Do.zw,this.nt.LBb,"#65ff89");this.he.CB(sc.Do.E1,
this.nt.fIb,"#ffe430");this.he.CB(sc.Do.bF,this.nt.EHb,"#ff8932");this.Ib.CB(sc.Do.wm,this.nt.PBb,"#808080");this.Ib.CB(sc.Do.Nl,this.nt.xIb,"#ff6969");this.Ib.CB(sc.Do.zw,this.nt.MBb,"#65ff89");this.Ib.CB(sc.Do.E1,this.nt.FHb,"#ffe430");this.ZR=y},UBa:function(a,b){var d=i["key-"+a];d&&(d[1]=c[b]);(d=j[a])&&(d[1]=c[b]);this.font.Pu(c);this.ZR||this.font.Pu(j);this.font.aZa()},wba:function(a,b){n[a]=b;this.MOa();this.font.Pu(m);this.ZR&&this.font.Pu(o);this.font.aZa()},XKb:function(a){this.m1a=a;
this.MOa()},MOa:function(){var a=this.m1a?l:k,b;for(b in a)m[b]=a[b];for(b in n)o[b]=a[n[b]]},x3a:function(b){return a[b]},TZ:function(){var a=ig.input.qb==ig.Yb.Wc;if(this.ZR!=a)(this.ZR=a)?this.font.Pu(o):this.font.Pu(j)}});sc.Ea=new sc.Jhb;ig.Vf(function(){return sc.Ea})});ig.J=h;
ig.N("game.feature.gui.base.text").O("impact.base.font","impact.feature.gui.gui","game.feature.font.font-system").K(function(){sc.ea=ig.da.extend({font:q,text:"",gg:q,HC:q,lba:0,qH:y,bl:y,f:function(a,b){this.parent();var b=b||{},c=b.font;this.font=c?c:sc.Ea.font;this.text=a;this.gg=new ig.Rd(this.font,a,b);b.drawCallback&&this.gg.Ou(b.drawCallback);this.lba=0;this.a.size.x=this.gg.size.x;this.a.size.y=this.gg.size.y;this.a.Db.x=Math.floor(this.a.size.x/2);this.a.Db.y=Math.floor(this.a.size.y/2)},
JT:function(a){a?this.gg.Qsa():this.gg.iR()},x$a:function(a){(this.HC=a)&&this.gg.On()&&this.HC.play()},pMa:function(a){this.gg.maxWidth=a||0;this.ga(this.text)},Dha:function(a){this.gg.align=a},MLb:function(a){this.gg.speed=a},pha:function(a,b){if(a&&a!=this.font){this.font=a;this.gg.font=a;if(b!=g)this.gg.SG=b||0;this.ga(this.text)}},Ou:function(a){this.gg.Ou(a)},ga:function(a){this.text=a;this.gg.ga(a);this.a.lm&&this.gg.Qsa();this.a.size.x=this.gg.size.x;this.a.size.y=this.gg.size.y;this.a.Db.x=
Math.floor(this.a.size.x/2);this.a.Db.y=Math.floor(this.a.size.y/2);this.bl=y},clear:function(){this.gg.iR()},finish:function(){this.gg.finish()},update:function(){if(!this.bl){var a=Math.floor(this.gg.nl/1);this.gg.update();if(Math.floor(this.gg.nl/1)!=a)this.qH=h;if(!sc.q.gZ()&&this.HC&&this.qH&&this.lba<=0){this.HC.play();this.qH=y;this.lba=Math.ceil(this.gg.speed*120)/60-0.005}this.lba=this.lba-ig.i.Sa}},stop:function(){this.bl=h},reset:function(){this.gg.reset()},sO:function(){this.bl=y},lUb:function(){return this.gg.vFa()},
lXb:function(a){this.gg.HH(a)},Da:function(a){a.dy().ga(this.gg,0,0)},Vo:function(){this.a.lm&&this.gg.Qsa()},pi:function(){this.gg.iR()}})});ig.J=h;
ig.N("game.feature.interact.button-group").O("impact.feature.interact.button-interact").K(function(){sc.R9=ig.wh.extend({Na:{focus:new ig.ka("media/sound/menu/menu-hover.ogg",0.9)},$ka:0,f:function(){this.parent()},jd:function(a){this.parent(a,0,this.$ka);a.Jyb=this.$ka;this.$ka++},clear:function(){this.$ka=0;this.parent()},$l:q,xJ:function(a){sc.ba.Cq()&&this.pea();this.$l&&this.$l(a)},Jr:N(y)});sc.wh=ig.wh.extend({Na:{focus:new ig.ka("media/sound/menu/menu-hover.ogg",0.9)},dm:q,f:function(a,b,c){this.parent(b,
c);if(a)this.Na.focus=q;this.dm=new ig.c$},zha:function(){this.tl(this.Qa.x,this.Qa.y)},l7:function(a,b,c){this.Sg(this.Qa.x,this.Qa.y,a,b,c)},Jr:function(){return sc.ba.Au()||sc.ba.CH()||sc.ba.OG()||sc.ba.gu()||sc.ba.Zu()},$l:q,xJ:function(a){sc.ba.Cq()&&this.pea();var b=this.nD();if(!a){sc.ba.Au()&&this.LGa();switch(b){case "right":this.Eua();break;case "left":this.Dua();break;case "up":this.KNa();break;case "down":this.INa()}}this.$l&&this.$l(a)},nD:function(){sc.ba.CH()?this.dm.hw("right"):sc.ba.OG()?
this.dm.hw("left"):sc.ba.gu()?this.dm.hw("down"):sc.ba.Zu()&&this.dm.hw("up");return this.dm.sda()},Pf:function(){this.parent();this.nD()}});sc.SSa=sc.wh.extend({rowIndex:[],Ih:-1,VOa:y,qla:0,Mea:q,f:function(){this.parent()},jd:function(a,b,c){if(!this.elements[c]){this.elements[c]=[];this.rowIndex[c]=0}if(this.Ih==-1){this.Ih=c;this.Qa.x=c}this.elements[c][b]=a;a.ua=this;a.Z=q},NRb:function(a){if(!this.elements[a]){this.elements[a]=[];this.rowIndex[a]=0}},Y$a:function(a){if(a)this.Mea=a},CTb:function(){return this.rowIndex[this.Ih]},
l7:function(a,b,c){this.Sg(this.Ih,this.rowIndex[this.Ih],a,b,c)},$Wb:function(a,b,c,d,f,i){if(this.elements[a].length==0){for(var j=a;this.elements[j].length==0;)j=(j+1)%this.elements.length;this.Ih=j=j%this.elements.length}else this.Ih=a;this.rowIndex[a]=b;c&&this.Sg(this.Ih,this.rowIndex[this.Ih],d,f,i)},$4a:function(a,b){return this.elements[a]&&this.elements[a][b]!=g},clear:function(){this.parent();this.rowIndex.length=0;this.Ih=-1},Eua:function(){if(!(this.tt()||this.Ih==-1)){var a=this.rowIndex[this.Ih]+
1;if(a>=this.elements[this.Ih].length)a=this.elements[this.Ih].length-1;else for(var b=a;b<this.elements[this.Ih].length;b++)if(this.elements[this.Ih][b]!==g){a=b;break}this.qla=a=a%this.elements[this.Ih].length;this.rowIndex[this.Ih]=a;this.Mea&&this.Mea(h,this.Ih)&&this.Sg(this.Ih,this.rowIndex[this.Ih],y,y,h)}},Dua:function(){if(!(this.tt()||this.Ih==-1)){var a=this.rowIndex[this.Ih]-1;if(a<0)a=0;else for(var b=a;b>=0;b--)if(this.elements[this.Ih][b]!==g){a=b;break}this.qla=a=a%this.elements[this.Ih].length;
this.rowIndex[this.Ih]=a;this.Mea&&this.Mea(y,this.Ih)&&this.Sg(this.Ih,this.rowIndex[this.Ih],y,y,h)}},INa:function(){if(!(this.tt()||this.Ih==-1)){var a=this.Qa.x+1;for(a>=this.elements.length&&(a=0);!this.elements[a]||this.elements[a].length==0;){a++;a>=this.elements.length&&(a=0)}this.Ih=a=a%this.elements.length;this.Sg(this.Ih,this.VOa?this.qla:this.rowIndex[this.Ih],y,y,h)}},KNa:function(){if(!(this.tt()||this.Ih==-1)){var a=this.Qa.x-1;for(a<0&&(a=this.elements.length-1);!this.elements[a]||
this.elements[a].length==0;){a--;a<0&&(a=this.elements.length-1)}this.Ih=a=a%this.elements.length;this.Sg(this.Ih,this.VOa?this.qla:this.rowIndex[this.Ih],y,y,h)}},oY:function(){return this.elements[this.Ih]&&this.elements[this.Ih][this.rowIndex[this.Ih]]},Gzb:function(){return this.rowIndex[this.Ih]},M1a:M("Ih")})});ig.J=h;
ig.N("game.feature.gui.base.button").O("impact.feature.gui.base.box","game.feature.gui.base.text","impact.feature.interact.gui.focus-gui","game.feature.interact.button-group").K(function(){sc.Zs=144;sc.$0=128;sc.a1=66;sc.Mc={};sc.gd={submit:new ig.ka("media/sound/menu/menu-submit.ogg"),back:new ig.ka("media/sound/menu/menu-cancel.ogg"),sb:new ig.ka("media/sound/menu/equip-sound.ogg",0.8),Dv:new ig.ka("media/sound/menu/menu-blocked.ogg",0.9),c9a:new ig.ka("media/sound/menu/quick-menu-appear.ogg",0.8),
d9a:new ig.ka("media/sound/menu/quick-menu-hide.ogg",0.8),Oab:new ig.ka("media/sound/menu/shop/shop-menu-up.ogg",1),Nab:new ig.ka("media/sound/menu/shop/shop-menu-down.ogg",1),Fha:new ig.ka("media/sound/menu/shop/shop-kashing.ogg",0.8),oIb:new ig.ka("media/sound/menu/stamp-scifi.ogg",1),RNb:new ig.ka("media/sound/menu/item-toggle-on.ogg",0.8),QNb:new ig.ka("media/sound/menu/item-toggle-off.ogg",0.8)};sc.nfb=ig.Ue.extend({f:function(a,c){this.parent(a,c.height,y,c.gb)}});sc.ofb=ig.da.extend({Sca:q,
s:q,pattern:q,We:q,f:function(a,c){this.parent();this.a.size.x=a;this.a.size.y=c.height;this.We=c.We;this.pattern=c.We.pattern;this.s=c.We.s},Da:function(a){if(this.Sca>0){var c=this.We,d=this.We.offsetY,f=c.S5,i=c.u7;if(this.Sca>=1)a.Qk(this.pattern,f,0,0,0,this.a.size.x-i-f,this.a.size.y);else{var j=Math.floor(this.Sca*this.a.size.x/2),f=Math.min(f,j),i=Math.min(i,j);j>f&&a.Qk(this.pattern,f,0,0,0,j-f,this.a.size.y);j>i&&a.Qk(this.pattern,this.a.size.x-j,0,0,0,j-i,this.a.size.y)}a.na(this.s,0,0,
c.VK,d,f,this.a.size.y);a.na(this.s,this.a.size.x-i,0,c.p4-i,d,i,this.a.size.y)}}});sc.mc=ig.vn.extend({text:q,$t:q,As:q,s:new ig.ia("media/gui/buttons.png"),yr:0,fr:0,jX:q,ac:q,fo:q,data:q,zfa:y,xYa:y,R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN}},re:q,f:function(a,c,d,f,i,j,k){this.parent(d,j);this.jX=f||sc.Mc.qja;this.F(0,24);this.Eb(72,14);this.a.size.y=this.jX.height;this.text=a;this.ac=i||sc.gd.submit;this.fo=k||sc.gd.Dv;
this.re=new sc.ea(this.N4(),{speed:ig.Rd.se.zg});this.re.H(this.jX.qv||ig.k.Ia,ig.k.vb);this.re.l(this.jX.wub||0,0);this.a.size.x=Math.ceil(c/2)*2||Math.ceil(this.re.a.size.x/2+12)*2;this.$t=new sc.nfb(this.a.size.x,this.jX);this.m(this.$t);if(this.jX.We){this.As=new sc.ofb(this.a.size.x,this.jX);this.m(this.As)}this.m(this.re)},kB:function(a){this.ac&&this.ac.play();this.cc(a)},setData:function(a){if(a!=g)this.data=a},mE:function(a){this.a.size.x=a;this.a.Db.x=a/2;this.$t.a.size.x=a;if(this.As)this.As.a.size.x=
a},tha:function(a){this.a.size.y=a;this.a.Db.y=a/2;this.$t.a.size.y=a;if(this.As)this.As.a.size.y=a},ga:function(a,c){this.text=a;this.re.ga(a);if(!c){var d=Math.ceil(this.re.a.size.x/2+12)*2;this.a.size.x=d;this.a.Db.x=d/2;this.$t.a.size.x=d;if(this.As)this.As.a.size.x=d}},O9a:function(){this.re.ga(this.N4());var a=Math.ceil(this.re.a.size.x/2+12)*2;this.a.size.x=a;this.a.Db.x=a/2;this.$t.a.size.x=a;if(this.As)this.As.a.size.x=a},yia:function(){this.focus=y;if(this.As){this.As.a.nd=1;this.As.Sca=
0}this.yr=this.fr=0},update:function(){this.parent();if(this.yk&&this.Yc&&this.xYa)if(this.focus)this.fr=(this.fr+ig.i.Sa)%1;else{this.fr=0;this.yr=0.1}else if(this.yk&&this.Yc&&!this.zfa){this.yr=this.yr+ig.i.Sa;if(this.yr>0.1)this.yr=0.1;this.fr=0}else if(this.focus&&this.yr<0.1){this.yr=this.yr+ig.i.Sa;this.fr=0}else if(!this.focus&&this.yr>0){this.yr=this.yr-ig.i.Sa;this.fr=0}else this.fr=(this.fr+ig.i.Sa)%1;this.yr.Rb(0,0.1);this.$t.ii=this.yk&&this.Yc?"pressed":this.focus?"focus":"default";
if(this.As){this.As.Sca=this.yr/0.1;var a=this.fr/1,a=KEY_SPLINES.EASE_IN_OUT.get(1-(a>0.5?1-(a-0.5)*2:a*2)),a=0.8*a+0.2;this.Aa||(a=a*0.5);this.As.a.nd=a}},N4:function(){return this.Aa?"\\c[0]"+this.text:"\\c["+sc.Do.wm+"]"+this.text},setActive:function(a){this.parent(a);this.re.ga(this.N4())}});var a={"default":{x:160,y:0},pressed:{x:180,y:0}};sc.Cfb=sc.mc.extend({Xda:q,f:function(b,c,d){this.parent("",c,d,sc.Mc.Rkb,q,y);c=(b=b==g?y:b)?"pressed":"default";this.Xda=new ig.ec(this.s,a[c].x,a[c].y,
20,18);this.Xda.H(ig.k.Ia,ig.k.vb);this.DG(this.Xda,this.a.children.length-2);this.ff(b)},ff:function(b){this.parent(b);b=b?"pressed":"default";this.Xda.offsetX=a[b].x;this.Xda.offsetY=a[b].y},kB:function(){this.ac&&this.ac.play();this.ff(!this.Yc);this.cc()}});sc.Mc.qja={height:24,gb:new ig.jc("media/gui/buttons.png",{width:16,height:0,left:8,top:24,right:8,bottom:0,Vb:{"default":{x:0,y:0},focus:{x:32,y:0},pressed:{x:32,y:0}}}),We:{VK:64,p4:96,S5:9,u7:8,offsetY:0,s:new ig.ia("media/gui/buttons.png"),
pattern:new ig.nf("media/gui/buttons.png",73,0,15,24,ig.nf.Eg.Yn)}};sc.Mc.$c={height:21,gb:new ig.jc("media/gui/buttons.png",{width:16,height:0,left:8,top:21,right:8,bottom:0,Vb:{"default":{x:0,y:24},focus:{x:32,y:24},pressed:{x:32,y:24}}}),We:{VK:64,p4:96,S5:9,u7:8,offsetY:24,s:new ig.ia("media/gui/buttons.png"),pattern:new ig.nf("media/gui/buttons.png",73,24,15,21,ig.nf.Eg.Yn)}};sc.Mc.rI={height:39,gb:new ig.jc("media/gui/buttons.png",{width:13,height:6,left:9,top:9,right:9,bottom:9,Vb:{"default":{x:0,
y:65},focus:{x:32,y:65},pressed:{x:32,y:65}}}),We:q};sc.Mc.wI={height:20,gb:new ig.jc("media/gui/buttons.png",{width:2,height:0,left:8,top:20,right:8,bottom:0,Vb:{"default":{x:0,y:45},focus:{x:44,y:45},pressed:{x:44,y:45}}}),We:q,qv:ig.k.hb,wub:5};sc.Mc.Rkb={height:21,gb:new ig.jc("media/gui/buttons.png",{width:16,height:0,left:8,top:21,right:8,bottom:0,Vb:{"default":{x:96,y:0},focus:{x:96,y:0},pressed:{x:96,y:0}}}),We:{VK:128,p4:160,S5:9,u7:8,offsetY:0,s:new ig.ia("media/gui/buttons.png"),pattern:new ig.nf("media/gui/buttons.png",
137,0,15,21,ig.nf.Eg.Yn)}};sc.Mc.wL={height:21,gb:new ig.jc("media/gui/buttons.png",{width:8,height:0,left:4,top:21,right:4,bottom:0,Vb:{"default":{x:184,y:24},focus:{x:184,y:24},pressed:{x:168,y:24}}}),We:{VK:200,p4:216,S5:4,u7:4,offsetY:24,s:new ig.ia("media/gui/buttons.png"),pattern:new ig.nf("media/gui/buttons.png",204,24,8,21,ig.nf.Eg.Yn)}};sc.Mc.Dja={height:21,gb:new ig.jc("media/gui/buttons.png",{width:8,height:0,left:8,top:21,right:8,bottom:0,Vb:{"default":{x:120,y:24},focus:{x:120,y:24},
pressed:{x:96,y:24}}}),We:{VK:144,p4:168,S5:9,u7:4,offsetY:24,s:new ig.ia("media/gui/buttons.png"),pattern:new ig.nf("media/gui/buttons.png",153,24,11,21,ig.nf.Eg.Yn)}};sc.Mc.Eja={height:21,gb:new ig.jc("media/gui/buttons.png",{width:8,height:0,left:8,top:21,right:8,bottom:0,Vb:{"default":{x:120,y:48},focus:{x:120,y:48},pressed:{x:96,y:48}}}),We:{VK:144,p4:168,S5:4,u7:9,offsetY:48,s:new ig.ia("media/gui/buttons.png"),pattern:new ig.nf("media/gui/buttons.png",147,48,13,21,ig.nf.Eg.Yn)}}});ig.J=h;
ig.N("game.feature.gui.base.boxes").O("impact.feature.gui.base.box","impact.feature.gui.gui").K(function(){sc.ymb=ig.Ue.extend({gb:new ig.jc("media/gui/message.png",{width:16,height:16,left:8,top:16,right:8,bottom:8,Vb:{"default":{x:0,y:0}}}),NP:8,OP:4,f:function(a){this.parent(0,0,a,this.gb);this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2},ih:function(a){this.F(a.a.size.x+this.NP*2,a.a.size.y+this.OP*2);this.m(a);a.l(this.NP,this.OP)}});sc.Zpb=ig.Ue.extend({R:{DEFAULT:{state:{alpha:1},time:0.15,
p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.15,p:KEY_SPLINES.EASE_IN}},gb:new ig.jc("media/gui/message.png",{width:14,height:14,left:1,top:1,right:1,bottom:1,Vb:{"default":{x:16,y:96}}}),f:function(a,b){this.parent(a,b,y,this.gb);this.gb.th[0]=this.gb.th[2]=1;this.gb.th[4]=1;this.gb.th[6]=this.gb.th[8]=1;this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2}});var a=[{x:8,y:4},{x:10,y:6}];sc.sw=ig.Ue.extend({R:{DEFAULT:{state:{alpha:0.8},time:0,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/message.png"),
gb:new ig.jc("media/gui/message.png",{width:16,height:16,left:8,top:16,right:8,bottom:8,Vb:{"default":{x:0,y:0},dream:{x:224,y:0}}}),NP:8,OP:4,tQb:8,pointerType:0,f:function(b,c,i){var j=a[sc.options.get("message-padding")];this.NP=j.x;this.OP=j.y;this.parent(b+this.NP*2,c+this.OP*2,y,this.gb);if(ig.Xw.wc()){this.ii="dream";this.a.nd=0.5}if(this.a.size.x%2==1)this.a.size.x=this.a.size.x+1;this.pointerType=i||sc.sw.aA.NONE;this.a.Db.x=this.pointerType>2?this.a.size.x:0;this.a.Db.y=this.a.size.y},resize:function(a,
b){this.F(a+this.NP*2,b+this.OP*2)},Vta:function(){if(this.pointerType==sc.sw.aA.zya)this.pointerType=sc.sw.aA.BPa;else if(this.pointerType==sc.sw.aA.Aya)this.pointerType=sc.sw.aA.CPa},Da:function(a){this.gb.th[0]=this.pointerType;this.pointerType>2&&a.ks().MB(-1,1).bua(this.a.size.x,0);this.parent(a);if(this.pointerType){var b=ig.Xw.wc()?224:0,c=Math.min(this.gb.Vj.top,this.a.size.y-this.gb.Vj.bottom);a.na(this.s,-8,0,b+(this.pointerType%2==0?16:0),40,16,c)}this.pointerType>2&&a.Xs()}});sc.sw.aA=
{NONE:0,zya:1,BPa:2,Aya:3,CPa:4};sc.BQb=ig.Ue.extend({R:{HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0,p:KEY_SPLINES.EASE_IN},DEFAULT:{state:{alpha:1},time:0,p:KEY_SPLINES.EASE_OUT}},s:new ig.ia("media/gui/message.png"),gb:new ig.jc("media/gui/message.png",{width:16,height:16,left:8,top:16,right:8,bottom:8,Vb:{"default":{x:0,y:0}}}),direction:0,f:function(){this.parent(width+this.NP*2,height+this.OP*2,y,this.gb);if(this.a.size.x%2==1)this.a.size.x=this.a.size.x+1;this.pointerType=pointerType||ig.Ue.aA.NONE;
this.a.Db.x=this.pointerType>2?this.a.size.x:0;this.a.Db.y=this.a.size.y},Vta:function(){if(this.pointerType==sc.sw.aA.zya)this.pointerType=sc.sw.aA.BPa;else if(this.pointerType==sc.sw.aA.Aya)this.pointerType=sc.sw.aA.CPa},Da:function(a){this.gb.th[0]=this.pointerType;this.pointerType>2&&a.ks().MB(-1,1).bua(this.a.size.x,0);this.parent(a);if(this.pointerType){var b=Math.min(this.gb.Vj.top,this.a.size.y-this.gb.Vj.bottom);a.na(this.s,-8,0,this.pointerType%2==0?16:0,40,16,b)}this.pointerType>2&&a.Xs()}});
sc.FL=ig.Ue.extend({gb:new ig.jc("media/gui/message.png",{width:12,height:2,left:2,top:0,right:0,bottom:0,Vb:{"default":{x:0,y:80}}}),f:function(a){this.parent(a,2,y,this.gb)}});sc.$eb=ig.Ue.extend({text:q,gb:new ig.jc("media/gui/message.png",{width:16,height:16,left:8,top:16,right:8,bottom:8,Vb:{"default":{x:0,y:0}}}),f:function(a,b,c){this.parent(a,b,c)}});sc.KPa=ig.Ue.extend({text:q,gb:new ig.jc("media/gui/message.png",{width:22,height:22,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:48,y:0}}}),
f:function(a,b,c){this.parent(a,b,c);this.a.nd=0.8}});sc.BTa=ig.Ue.extend({text:q,R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},FLIPPED:{state:{Xa:-1,Va:-1},time:0,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/message.png",{width:12,height:20,left:0,top:7,right:0,bottom:5,Vb:{"default":{x:32,y:0}}}),f:function(a,b){this.parent(12,a,y);b&&this.j("FLIPPED",h)},tha:function(a){this.F(12,a)}});sc.qya=ig.da.extend({R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{},time:0.3,p:KEY_SPLINES.EASE_IN}},
xl:q,ae:[],right:y,f:function(a,b){this.parent();this.a.nd=1;this.right=a;this.xl=new sc.Rnb(b,a,75);this.xl.a.nd=this.a.nd;this.xl.H(this.right?ig.k.ra:ig.k.hb,ig.k.$);this.xl.j("HIDDEN",h);this.m(this.xl);this.F(this.xl.a.size.x,this.xl.a.size.y)},Rr:function(a,b){var c=new sc.Pnb(a,this.right,8,2,80);this.right&&c.H(ig.k.ra,ig.k.$);this.ae.push(c);c.j("HIDDEN",h);b&&c.j("DEFAULT");this.m(c);this.j7(c)},Qga:function(a,b){this.ae[a].ih(b);this.j7()},m7:function(a){a=this.ae.splice(a,1)[0];a.j("HIDDEN",
y,h);this.j7();return a},x3:function(){for(;this.ae.length;)this.ae.pop().j("HIDDEN",y,h)},yWb:function(){this.ae.pop().j("HIDDEN",y,h);this.j7()},j7:function(a){for(var b=this.xl.a.size.x,c=this.xl.a.size.y,j=0;j<this.ae.length;++j){var k=this.ae[j];j&&(c=c+1);k==a?k.l(0,c):k.kd(0,c,0.3,KEY_SPLINES.EASE_OUT);c=c+k.a.size.y;b=Math.max(b,k.a.size.x)}this.F(b,c)},hide:function(a,b){if(!this.a.al){this.xl.j("HIDDEN",a);for(var c=0;c<this.ae.length;++c)this.ae[c].j("HIDDEN",a);this.j("HIDDEN",y,y,b)}},
show:function(a,b){if(!this.a.al){this.xl.j("DEFAULT",a,y,q,b||0);for(var c=0;c<this.ae.length;++c)this.ae[c].j("DEFAULT",a,y,q,b||0);this.j("DEFAULT")}},remove:function(){this.xl.j("HIDDEN");for(var a=0;a<this.ae.length;++a)this.ae[a].j("HIDDEN");this.j("HIDDEN",y,h)}});sc.kI=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.3,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN:{state:{alpha:0.5,Xa:1,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN_OUT}},KUb:new ig.ia("media/gui/message.png"),wra:q,RF:q,pma:q,qma:q,f:function(a){this.parent();
this.wra=a;this.RF=new sc.KPa(a.a.size.x+16,a.a.size.y+10);this.m(this.RF);this.RF.l(5,3);this.F(this.RF.a.size.x+10,this.RF.a.size.y+6);this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2;this.m(this.wra);this.wra.l(13,8);this.pma=new sc.BTa(this.a.size.y-1);this.pma.H(ig.k.hb,ig.k.Cb);this.m(this.pma);this.qma=new sc.BTa(this.a.size.y-1,h);this.qma.H(ig.k.ra,ig.k.$);this.m(this.qma);this.j("HIDDEN",h);this.j("DEFAULT")},remove:function(){this.j("HIDDEN",y,h)},resize:function(){var a=this.wra;
this.RF.F(a.a.size.x+16,a.a.size.y+10);this.F(this.RF.a.size.x+10,this.RF.a.size.y+6);this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2;this.pma.tha(this.a.size.y-1);this.qma.tha(this.a.size.y-1)}});var b=Vec2.create(),c=2/60;sc.YP={BOTTOM:function(a,b){a.x=b.size.x/2;a.y=b.size.y},CENTER:function(a,b){a.x=b.size.x/2;a.y=b.size.y/2-b.size.z/2},TOP:function(a,b){a.x=b.size.x/2;a.y=-b.size.z}};sc.gW=ig.da.extend({gb:new ig.jc("media/gui/message.png",{width:16,height:0,left:16,top:11,right:16,
bottom:0,Vb:{"default":{x:96,y:64}}}),R:{DEFAULT:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_IN_OUT},START:{state:{alpha:0.5,Xa:0.8,Va:0},time:0.15,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN:{state:{alpha:0.5,Xa:2,Va:0},time:0.15,p:KEY_SPLINES.EASE_IN_OUT}},Q:q,ob:q,n:0,FLa:0,Jp:y,cN:Vec2.create(),bi:0,kEa:q,f:function(a,b,c,j,k){this.parent();this.Q=a;this.ob=new sc.ea(b,{font:sc.Ea.he});this.ob.H(ig.k.Ia,ig.k.vb);this.ob.l(0,1);this.m(this.ob);this.F(this.ob.a.size.x+16,11);this.a.nd=0.5;this.Eb(this.a.size.x/
2,this.a.size.y/2);this.j("START",h);this.j("DEFAULT");this.n=c;this.FLa=c/2;j=j||sc.YP.TOP;j(this.cN,a.b);this.bi=k||0},SKb:function(){this.kEa=Vec3.create();Vec3.assign(this.kEa,this.Q.b.g)},gcb:function(){this.FLa=this.n},update:function(){this.qj();this.n=this.n-ig.i.Sa;this.n<=0&&this.remove()},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,"default")},qj:function(){if(this.Q){var a=this.Q.b,a=this.kEa||a.g;ig.i.Jy(b,Math.round(a.x+this.cN.x),Math.round(a.y-a.z+this.cN.y-this.bi));a=
0;if(this.n>this.FLa){var f=Math.floor(this.n/c);f%4==1&&(a=2);f%4==3&&(a=-2)}this.a.g.x=b.x-this.a.size.x/2+a;this.a.g.y=b.y-this.a.size.y/2-4+0}},remove:function(){this.Jp=h;this.j("HIDDEN",y,h)},On:M("Jp")});sc.wjb=ig.da.extend({gb:new ig.jc("media/gui/message.png",{width:16,height:0,left:16,top:26,right:16,bottom:0,Vb:{"default":{x:48,y:32}}}),R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN:{state:{alpha:0.5,Xa:1,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN_OUT}},content:q,fO:0,
f:function(a,b){this.parent();this.content=a;this.fO=b||16;this.a.nd=0.8;this.m(this.content);this.content.H(ig.k.Ia,ig.k.vb);this.F(ig.i.width,26);this.Eb(this.a.size.x/2,this.a.size.y/2);this.j("HIDDEN",h);this.j("DEFAULT")},Da:function(a){var b=this.content.a.size.x+this.fO*2,c=ig.i.width/2-b/2;this.gb.nb(a,b,this.a.size.y,"default",c,0);a.nc("black",0,12,c,2);a.nc("black",c+b,12,c,2)}});sc.Tnb=ig.Ue.extend({text:q,R:{DEFAULT:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.EASE_IN_OUT}},gb:new ig.jc("media/gui/message.png",
{width:8,height:0,left:4,top:15,right:4,bottom:0,Vb:{"default":{x:24,y:80}}}),f:function(a){this.parent(a,15,y)}})});ig.J=h;
ig.N("game.feature.gui.base.numbers").O("impact.feature.gui.gui").K(function(){function a(a,b){for(a.QX=0;b;){a.QX++;b=Math.floor(b/10)}if(a.qZ>a.QX)a.QX=a.qZ;a.a.size.x=(a.QX+(a.Jha||a.KK))*a.OD.width;if(a.nDa)a.a.size.x=a.a.size.x+(Math.ceil(a.QX/3)-1)*a.OD.Yna;a.a.size.y=a.OD.height;a.a.Db.x=Math.floor(a.a.size.x/2)}sc.Od={$n:0,Nl:1,zw:2,wm:3,bF:4};sc.Ff={mj:{x:0,y:0,width:8,height:8,Yna:3,WZa:2,oxb:3},jF:{x:136,y:0,width:6,height:6},Uh:{x:0,y:40,width:12,height:14},hv:{x:160,y:32,width:8,height:10},
$c:{x:0,y:56,width:6,height:8,Yna:2,oxb:2,WZa:1}};var b=g;sc.Tb=ig.da.extend({s:new ig.ia("media/gui/basic.png"),lx:9999,QX:0,Jha:y,KK:y,OD:q,color:sc.Od.$n,$O:0,iqa:0,Afa:0,aJa:0,n:q,VIa:y,qZ:0,QMa:y,zx:y,nDa:y,f:function(c,d){this.parent();this.F(0,7);this.Eb(0,4);b===g&&(b=!(ig.Xn[ig.dh]&&ig.Xn[ig.dh].Jba));this.lx=c;this.Jha=d&&d.signed||y;this.Afa=d&&d.transitionTime||0;this.aJa=d&&d.transitionScale||0;this.color=d&&d.color||this.color;this.KK=d&&d.showPlus||y;this.OD=d&&d.size||sc.Ff.mj;this.VIa=
d&&d.noZero||y;this.qZ=d&&d.leadingZeros||0;this.zx=d&&d.scramble||y;this.nDa=d&&d.dots||y;this.n=new ig.Vt(h);c&&a(this,c)},F:function(b){this.OD=b||sc.Ff.mj;a(this,this.lx)},za:function(b,d){d=d!=g?d:y;b=b*1;isNaN(b)&&(b=0);this.lx?b=b.Rb(this.Jha?-this.lx:0,this.lx):a(this,b);if(this.$O!=b){this.iqa=d?b:this.zza();this.$O=b;var f=d?0:this.Afa,i=Math.abs(this.iqa-this.$O);this.aJa?f=f*(i/this.aJa):f/i>0.066&&(f=i*0.066);this.n.set(f)}},ZTb:M("$O"),vha:function(b){this.lx=b;a(this,this.lx)},pe:L("color"),
update:function(){this.n.ja()},Da:function(a){var d=this.OD,f=d.x,i=d.y+this.color*d.height,j=d.width,k=d.height,l=this.a.size.x,m=y,n=this.zza(),o=n,t=0;if(n<0){m=h;n=-n}else if(n==0&&this.VIa)return;var p=this.qZ;do{var l=l-j,r=n%10;a.na(this.s,l,0,f+(this.zx?15:r)*j,i,j,k);n=Math.floor(n/10);p--;if(this.nDa&&n>0){t++;if(t>=3){t=0;l=l-this.OD.Yna;a.na(this.s,l,b?d.WZa||3:0,f+(b?16:14)*j,i,d.Yna||3,k)}}}while(this.qZ?p>0||this.QX>=this.qZ&&n:n);l=l-j;m?a.na(this.s,l,0,f+10*j,i,j,k):this.KK&&(this.QMa||
o!=0)&&a.na(this.s,l-1,0,f+11*j,i,j,k)},zza:function(){if(this.n.Xb())return this.$O;var a=this.n.get();return Math.floor((1-a)*this.iqa+a*this.$O)}});sc.dkb=ig.da.extend({s:new ig.ia("media/gui/basic.png"),MM:q,Ki:q,f:function(a,b){this.parent();this.MM=new sc.Tb(a,{transitionTime:b});this.Ki=new sc.Tb(a);this.Ki.l(this.MM.a.size.x+12,0);this.Ki.za(a);this.m(this.MM);this.m(this.Ki);this.F(this.MM.a.size.x+this.Ki.a.size.x+12,7)},EAb:function(){return this.Ki.$O},vha:function(a,b){this.MM.vha(a);
this.Ki.vha(a);this.Ki.za(a,b);this.F(this.MM.a.size.x+this.Ki.a.size.x+12,7);this.Ki.l(this.MM.a.size.x+12,0)},za:function(a,b){this.MM.za(a,b)},Da:function(a){a.bYa(this.s,this.MM.a.size.x+2,0,12,8)}})});ig.J=h;
ig.N("game.feature.menu.gui.menu-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.gui.focus-gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui","game.feature.gui.base.button","game.feature.combat.stat-change").K(function(){sc.Zn={};sc.Zn.Z0=0;sc.Zn.vC=1;sc.Zn.Tya=2;sc.rg={};sc.rg.jW=0;sc.rg.ds=1;sc.rg.Uob=2;sc.rg.Bya=3;sc.rg.pTa=4;sc.rg.$ia=5;sc.rg.WTa=6;sc.rg.Xva=7;var a=KEY_SPLINES.EASE;sc.Cw={I$:620,e2:219,l$:11,Yja:5};var b=Vec2.vc(0,
0);sc.aSa=sc.mc.extend({s:new ig.ia("media/gui/menu.png"),Ud:q,f:function(a,b,c,d,l,m,n){this.parent(a,b,c,d,l,m,n);this.Ud=new sc.T9;this.Ud.l(4,4);this.m(this.Ud)},OAa:function(a){this.Ud.Pf(a)},Z3:function(){this.Ud.ui()}});sc.T9=ig.ec.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/menu.png"),bKa:y,small:y,n:0,alpha:1,f:function(){this.parent(this.s,464,488,11,11);this.H(ig.k.ra,ig.k.$);this.Eb(5.5,5.5)},
update:function(){this.parent();if(this.bKa){this.n=(this.n+ig.i.Sa)%1.6;var a=this.n/1.6,a=KEY_SPLINES.EASE_IN_OUT.get(1-(a>0.5?1-(a-0.5)*2:a*2)),a=0.7*a+0.3;this.Aa||(a=a*0.7);this.alpha=Math.min(1,a+0.3);this.a.nd=this.alpha}},Da:function(a){a.ks().Eb(this.a.Db.x,this.a.Db.y).MB(this.alpha,this.alpha);this.parent(a);a.Xs()},Pf:function(){this.bKa=h;this.j("DEFAULT",h)},ui:function(a,b){this.bKa=y;this.j("HIDDEN",a?b||y:h,a)}});sc.cwa=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},
FADE_OUT:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/status-gui.png",{width:4,height:0,left:11,top:12,right:11,bottom:0,Vb:{"default":{x:216,y:144}}}),text:q,lv:0,f:function(){this.parent();this.a.size.x=100;this.a.size.y=21;this.l(2,0);this.text=new sc.ea("",{font:sc.Ea.Ib,speed:ig.Rd.se.zg});this.text.H(ig.k.hb,ig.k.vb);this.text.l(13,0);this.text.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},FADE_OUT:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}};this.text.j("DEFAULT",h);this.text.we={D_a:"buff",size:{x:"dyn",y:16,oi:3},offset:{x:0,y:ig.i.height-25},content:{},index:{x:0,y:"last"}};this.text.UGa=function(){return sc.e.JC>=0};this.m(this.text);this.j("HIDDEN",h)},ga:function(a,b){b=b||0;if(b>0)this.j("FADE_OUT",y,y,q,b);else{this.a.hi=="FADE_OUT"&&this.j("DEFAULT",h);this.text.ga(a);a==""&&this.j("FADE_OUT",h);this.lv=a?this.text.a.size.x+21:0}},Da:function(a){this.lv&&
this.gb.nb(a,this.lv,12,"default",2,4)}});sc.B9=ig.da.extend({text:q,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21},time:0.2,p:KEY_SPLINES.LINEAR}},tc:q,SB:q,alpha:0.5,f:function(a,b,c){this.parent();this.a.size.x=a||ig.i.width;this.a.size.y=b||21;this.FU("HIDDEN","offsetY",-this.a.size.y);this.SB=c||y;this.text=new sc.ea("",{speed:ig.Rd.se.zg});this.text.H(ig.k.ra,ig.k.vb);this.text.l(8,0);this.text.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},FADE_OUT:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}};this.text.j("HIDDEN",h);this.m(this.text);this.j("HIDDEN",h)},update:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);this.a.size.x=Math.round(this.tc.QH*(1-a)+this.tc.width*a);this.a.size.y=Math.round(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},Da:function(a){this.SB||a.nc("#000000",0,0,this.a.size.x,this.a.size.y).ge(this.alpha)},Ym:function(a,
b,c,d,l){if(c)this.tc={QH:this.a.size.x,width:a||0,Tu:this.a.size.y,height:b||0,time:c,p:d||KEY_SPLINES.EASE,n:0-(l||0)};else{this.a.size.x=a;this.a.size.y=b}},ga:function(a,b){b=b||0;if(b>0)this.text.j("FADE_OUT",y,y,q,b);else{this.text.a.hi=="FADE_OUT"&&this.text.j("DEFAULT",h);this.text.ga(a)}}});sc.uQa=ig.da.extend({f:function(a){this.parent();this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);this.a.clip=h;this.m(a)}});sc.IP=ig.vn.extend({Ls:new ig.ia("media/gui/menu.png"),s:new ig.ia("media/gui/buttons.png"),
button:q,data:q,hQ:0,lv:0,fo:sc.gd.Dv,aa:0,f:function(a,b,c,d,l,m,n,o){this.parent(h,y);b=b||1;c=c||1;l=l!=g?l:"";if(m||y){this.hQ=-1;b=b+c}else this.hQ=Math.max(0,c-22);this.lv=b;this.F(b+c,sc.Mc.wI.height);this.button=new sc.mc(a,b,h,sc.Mc.wI,o);this.button.a.BU(y);if(n){this.button.re.H(ig.k.Ia,ig.k.vb);this.button.re.l(0,0)}l!=g&&this.setData({id:d,description:l});this.m(this.button);if(!this.constructor.nSa)this.constructor.nSa=this.s.createPattern(62,45,4,1,ig.nf.Eg.Yn);if(!this.constructor.oSa)this.constructor.oSa=
this.s.createPattern(18,45,4,1,ig.nf.Eg.Yn)},XWb:function(a){this.button.ga(a,h)},GH:function(a){this.aa=a||0;this.aa>0?this.Ou(function(a,b){sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(this)):this.Ou(q)},mE:function(a,b){a=a||1;b=b||1;this.hQ=Math.max(0,b-22);this.lv=a;this.a.size.x=a+b;this.button.a.size.x=a},setData:function(a){if(a)this.data=a},Ou:function(a){this.button.re.Ou(a)},Da:function(a){if(!(this.hQ<0)){var b=this.button.a.size.x;if(this.focus||this.yk&&this.Yc){a.Qk(this.constructor.nSa,b,0,
0,0,this.hQ,1);a.na(this.s,b+this.hQ,0,66,45,22,1)}else{a.Qk(this.constructor.oSa,b,0,0,0,this.hQ,1);a.na(this.s,b+this.hQ,0,22,45,22,1)}}},Lo:function(){this.focus=h;this.button.focus=h},ga:function(a){this.button.ga(a);this.button.mE(this.lv)},ai:function(){this.focus=y;this.button.focus=y},setActive:function(a){this.parent(a);this.button.setActive(a)},kB:function(){this.button.kB()}});sc.WE=sc.IP.extend({zc:q,f:function(a,b,c,d,l,m,n,o,t,p,r){this.parent(a,b,c,l,m,n,o,t);if(d>=0){this.zc=new sc.Tb(p||
99);this.zc.za(d,h);this.zc.H(ig.k.ra,ig.k.$);this.zc.l(5,7);this.m(this.zc)}this.GH(r)}});sc.gpb=ig.da.extend({Bg:q,background:q,xa:[],set:q,f:function(a,b,c){this.parent();this.F(337,9);this.set=a;this.background=new ig.mf(a.color||"darkblue");this.background.a.nd=0.2;this.background.l(-1,0);this.m(this.background);this.Bg=new sc.ea(ig.Ra.ic(a.name),{font:sc.Ea.Ib});this.Bg.l(0,1);this.m(this.Bg);this.fe=new ig.mf("#545454",this.a.size.x+2,1);this.fe.l(-1,9);this.m(this.fe);for(var d=a.items,l=
0,m=0,b=b.ua(),n=sc.q.T,o=0;o<d.length;o++){var t=sc.yb.getItem(d[o]);if(!(n.Dr(d[o])<1)){var p=q,p=a.type==sc.Lka.SINGLE?"\\i["+(n.PJ(d[o])?"toggle-item-on-radio":"toggle-item-off-radio")+"]":"\\i["+(n.PJ(d[o])?"toggle-item-on":"toggle-item-off")+"]",p=p+ig.Ra.ic(t.name),t=ig.Ra.ic(t.description),p=new sc.WE(p,142,24,-1,d[o],t,h);p.set=a;p.S$a=this;p.feb=function(){var a=q,a=n.PJ(this.data.id),a=this.set.type==sc.Lka.SINGLE?"\\i["+(a?"toggle-item-on-radio":"toggle-item-off-radio")+"]":"\\i["+(a?
"toggle-item-on":"toggle-item-off")+"]",a=a+sc.yb.pda(this.data.id);this.ga(a)};p.button.ac=q;p.l(l*168,m*20+11);this.m(p);this.xa.push(p);b.jd(p,l,m+c);l++;if(l>=2){l=0;m++}}}this.a.size.y=Math.max(m,1)*20+15;this.background.F(this.a.size.x+2,Math.max(m,1)*20+15)},geb:function(a){for(var b=this.xa.length;b--;)a!=this.xa[b]&&this.xa[b].feb();if(a){b=new sc.Iib(function(){a.feb()}.bind(this),a.set.type==sc.Lka.SINGLE);a.m(b)}}});var c=[0,1,2,3,4],d=[5,6,7,8,9];sc.Iib=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
n:0,index:0,Gb:q,f9a:y,frames:q,f:function(a,b){this.parent();this.l(5,1);this.F(16,16);this.n=0.02;this.Gb=a;this.frames=(this.f9a=b||y)?d:c},update:function(){this.n=this.n-ig.i.Sa;if(this.n<=0){this.n=0.02;if(this.index==this.frames.length-1){this.Gb&&this.Gb();this.remove()}else this.index=(this.index+1)%this.frames.length}},Da:function(a){a.na(this.s,0,0,656,352+this.frames[this.index]*16,16,15)}});sc.u$=ig.da.extend({s:new ig.ia("media/gui/menu.png"),name:"nope.",fK:0,TY:0,sn:y,vN:Vec2.vc(0,
0),aca:q,Jo:q,gf:q,nM:q,tsa:q,nH:q,JH:y,r6:y,bcb:y,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},width:0,f:function(a,b,c,d,l,m,n,o){this.parent();this.F(n||169,11);this.width=this.a.size.x;this.name=a||"nope.";this.fK=b||0;this.TY=c||0;this.sn=d||y;this.JH=m||y;this.r6=o||y;this.vN.x=this.TY%sc.Cw.Yja;this.vN.y=Math.floor(this.TY/sc.Cw.Yja);this.gf=new sc.ea(a,{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.gf.l(sc.Cw.l$+2,3);this.m(this.gf);
if(this.r6){this.Jo=new ig.ec(this.s,112,320,24,8);this.Jo.H(ig.k.ra,ig.k.$);this.Jo.l(3,1);this.Jo.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},FADE:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Jo.j("DEFAULT",h);this.m(this.Jo)}else{if(!this.JH){this.aca=new sc.Tb(l,{signed:h,transitionTime:0.2});this.aca.H(ig.k.ra,ig.k.$);this.aca.l(this.sn?63:54,4);this.m(this.aca);if(this.sn){this.tsa=new sc.ASa;this.tsa.H(ig.k.ra,ig.k.$);
this.tsa.l(54,4);this.m(this.tsa)}this.nM=new ig.ec(this.s,1,321,4,6);this.nM.H(ig.k.ra,ig.k.$);this.nM.l(47,5);this.nM.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},FADE:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.nM.j("HIDDEN",h);this.m(this.nM)}this.Jo=new sc.Tb(l,{signed:h,showPlus:h,transitionTime:0});this.Jo.H(ig.k.ra,ig.k.$);this.Jo.l(this.sn?12:3,4);this.Jo.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},FADE:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Jo.j("HIDDEN",h);this.m(this.Jo);if(this.sn){this.nH=new sc.ASa;this.nH.H(ig.k.ra,ig.k.$);this.nH.l(3,4);this.m(this.nH);this.nH.j("HIDDEN",h)}}},vo:function(a,b){if(!this.r6&&!this.JH){a=a||0;a=this.sn?Math.round(a*100)-100:a;this.aca.za(a,b)}},sh:function(a,b,c){if(this.r6)this.Jo.offsetY=a<=-1?312:a>=1?304:320;else if(a){a=a||0;a=this.sn?Math.round(a*100):a;c=0;this.bcb||(c=a>0?sc.Od.zw:a<0?sc.Od.Nl:sc.Od.$n);
this.Jo.za(a,b);this.Jo.pe(c);this.Jo.j("DEFAULT",h);this.JH||this.nM.j("DEFAULT",h);if(this.sn){this.nH.state=c;this.nH.j("DEFAULT",h)}}else if(c){this.Jo.j("DEFAULT",h);this.Jo.za(0,b);this.Jo.pe(0);if(this.sn){this.nH.state=0;this.nH.j("DEFAULT",h)}}else{this.Jo.j("HIDDEN",h);this.JH||this.nM.j("HIDDEN",h);this.sn&&this.nH.j("HIDDEN",h)}},fTb:function(a){if(!this.r6){a=a||0;this.Jo.j("FADE",y,y,q,a);this.JH||this.nM.j("FADE",y,y,q,a);this.sn&&this.nH.j("FADE",y,y,q,a)}},Da:function(a){var c=0,
d=this.fK*12;if(this.r6){b.x=this.JH?144:0;b.y=(this.JH?408:329)+d;a.na(this.s,0,0,b.x,b.y,72,11);a.na(this.s,72,0,b.x+11,b.y,9,11);a.na(this.s,81,10,b.x+81,b.y,this.JH?46:89,11)}else a.na(this.s,0,0,this.JH?144:0,(this.JH?408:329)+d,this.width,11);c=this.vN.x*(sc.Cw.l$+1);d=this.vN.y*(sc.Cw.l$+1);a.na(this.s,0,0,sc.Cw.I$+c,sc.Cw.e2+d,sc.Cw.l$,sc.Cw.l$)}});sc.ASa=ig.da.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},FADE:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/menu.png"),state:0,f:function(){this.parent();this.F(8,8)},Da:function(a){a.na(this.s,0,0,this.state*9,407,8,8)}});sc.Bl=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:5,height:5,left:5,top:5,right:5,bottom:5,Vb:{"top-left":{x:100,y:425},"top-right":{x:116,y:425},"bottom-left":{x:544,y:465},"top-left-dark":{x:100,y:441},"top-right-dark":{x:116,y:441},"top-right-darker":{x:33,y:288},square:{x:88,y:496}}}),tc:q,f:function(a){this.parent();
a=a||sc.rg.jW;switch(a){case sc.rg.jW:this.ii="top-left";break;case sc.rg.ds:this.ii="top-right";break;case sc.rg.Uob:this.ii="top-left-dark";break;case sc.rg.Bya:this.ii="top-right-dark";break;case sc.rg.WTa:this.ii="top-right-darker";break;case sc.rg.$ia:this.ii="bottom-left";break;case sc.rg.Xva:this.ii="bottom-left";this.JJ=h;break;case sc.rg.pTa:this.ii="square"}},update:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);
this.a.size.x=Math.ceil(this.tc.QH*(1-a)+this.tc.width*a);this.a.size.y=Math.ceil(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},Ym:function(a,b,c,d,l){this.tc={QH:this.a.size.x,width:a||0,Tu:this.a.size.y,height:b||0,time:c,p:d||KEY_SPLINES.LINEAR,n:0-(l||0)}}});sc.vI=sc.Bl.extend({YFa:new ig.jc("media/gui/menu.png",{width:2,height:0,left:1,top:9,right:5,bottom:0,Vb:{"default":{x:96,y:408}}}),Bg:q,title:"",f:function(a,b){this.parent(b);this.title=a||"";this.Bg=new sc.ea(this.title,{font:sc.Ea.Ib,
speed:ig.Rd.se.zg});this.Bg.l(2,1);this.m(this.Bg)},Da:function(a){this.parent(a);this.YFa.nb(a,this.a.size.x,9,"default")},rh:function(){this.a.rh();this.m(this.Bg)}});sc.$E=ig.da.extend({s:new ig.ia("media/gui/menu.png"),f:function(){this.parent();if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(88,475,16,16,ig.nf.Eg.OL)},Da:function(a){a.dy().hab(this.constructor.oj,0,0,0,0,this.a.size.x,this.a.size.y)}});sc.TL=ig.da.extend({Gc:q,HB:sc.Zn.vC,Bx:q,Ax:q,Hha:h,O7:h,f:function(a){this.parent();
this.HB=a||sc.Zn.Z0;this.Gc=new sc.TL.Zfb;this.Gc.l(0,1);this.m(this.Gc);if(this.HB!=sc.Zn.Tya){this.Bx=new sc.v$;this.Bx.H(ig.k.ra,ig.k.$);this.Bx.l(1,2);this.Bx.F(2,this.a.size.y-4-(this.HB==sc.Zn.Z0?3:0));this.m(this.Bx)}if(this.HB!=sc.Zn.vC){this.Ax=new sc.v$(y);this.Ax.H(ig.k.hb,ig.k.Cb);this.Ax.l(1,2);this.Ax.F(this.a.size.x-(this.HB==sc.Zn.Z0?5:0),2);this.m(this.Ax)}},ih:function(a){this.Gc.rh();this.Gc.m(a);this.fw()},scrollX:function(b,c){if(this.HB!=sc.Zn.vC){this.Ax.ov(b,c);this.Gc.Hl(-this.Ax.value,
this.Bx?-this.Bx.value:0,c?0:0.1,a)}},scrollY:function(b,c,d,k){if(this.HB!=sc.Zn.Tya){this.Bx.ov(b,c);this.Gc.Hl(this.Ax?-this.Ax.value:0,-this.Bx.value,c?0:d||0.1,k||a)}},BO:function(b,c,d,k){this.Bx.ip(b,c);this.Gc.Hl(this.Ax?-this.Ax.value:0,-this.Bx.value,c?0:d||0.1,k||a)},fw:function(a){if(!(this.Gc.a.children.length<=0))if(this.HB==sc.Zn.Z0){this.kta(this.Gc.a.size.x,this.Gc.E1a(),this.Ax,a);this.kta(this.Gc.a.size.y,this.Gc.fda(),this.Bx,a)}else this.HB==sc.Zn.vC?this.kta(this.Gc.a.size.y,
this.Gc.fda(),this.Bx,a):this.kta(this.Gc.a.size.x,this.Gc.E1a(),this.Ax,a)},kta:function(a,b,c,d){c&&c.wha(0,Math.max(0,b-a),d)},Da:function(a){this.Hha&&a.nc("#7E7E7E",0,0,this.a.size.x*ig.i.scale,1);this.O7&&a.nc("#7E7E7E",0,this.a.size.y-1,this.a.size.x*ig.i.scale,1)},F:function(a,b){this.parent(a,b);this.Gc.a.size.x=this.a.size.x-(this.HB!=sc.Zn.Tya?3:0);this.Gc.a.size.y=this.a.size.y-2-(this.HB!=sc.Zn.vC?4:0);this.Bx&&this.Bx.F(2,this.a.size.y-4-(this.HB==sc.Zn.Z0?3:0));this.Ax&&this.Ax.F(this.a.size.x-
(this.HB==sc.Zn.Z0?5:0),2);this.fw()},qG:function(){return-this.Gc.a.scroll.y}});sc.v$=ig.da.extend({offset:Vec2.vc(0,0),ql:{top:0,right:0,bottom:0,left:0},sB:0,fh:0,value:0,gC:h,i$a:h,uga:0,Psa:0,Xr:q,f:function(a,b,c){this.parent();this.gC=a!=g?a:h;this.Xr=b||new sc.v$.Xob;this.i$a=c==g?h:c;this.m(this.Xr)},Da:function(a){a.nc("#1A1A1A",0,0,this.a.size.x*ig.i.scale,this.a.size.y*ig.i.scale)},ri:function(a){if(this.sB<this.fh)if(a<this.sB)a=this.sB;else{if(a>this.fh)a=this.fh}else if(a>this.sB)a=
this.sB;else if(a<this.fh)a=this.fh;return a},Xub:function(){return this.gC?Math.max(1,this.a.size.y-(this.Psa||4)):Math.max(1,this.a.size.x-(this.uga||4))},$ta:function(b){var c=this.fh-this.sB,d=(this.gC?this.Psa:this.uga)||4;if(this.i$a)var k=Math.max(1,this.gC?this.f2a():this.U2a()),d=Math.floor(Math.max(d,k*(k/(k+c))));k=Math.max(1,(this.gC?this.f2a():this.U2a())-d);c=(c!=0?Math.floor((this.value-this.sB)*k/c):0)+(this.gC?this.ql.top:this.ql.left);if(this.gC){this.Xr.F(this.uga||this.a.size.x,
d);this.Xr.kd(this.offset.x,c,b?0:0.1,a)}else{this.Xr.F(d,this.Psa||this.a.size.y);this.Xr.kd(c,this.offset.y,b?0:0.1,a)}},Xta:function(a,b){this.uga=a||4;this.Psa=b||4},ov:function(a,b){this.ip(this.value+a,b)},ip:function(a,b){a=this.ri(a);if(this.value!=a||b){this.value=a;this.$ta(b)}},wha:function(a,b,c){b<a&&e(Error("max value can never less then min in ScrollBar!"));this.sB=a;this.fh=b;this.value=this.ri(this.value);this.$ta(c)},hBb:function(){return Math.abs(this.fh-this.sB)},U2a:function(){return this.a.size.x-
this.ql.right-this.ql.left},f2a:function(){return this.a.size.y-this.ql.bottom}});sc.v$.Xob=ig.da.extend({Da:function(a){a.nc("#7E7E7E",0,0,this.a.size.x*ig.i.scale,this.a.size.y*ig.i.scale)}});sc.TL.Zfb=ig.da.extend({k$a:0,f:function(){this.parent();this.a.clip=h},E1a:function(){return this.a.children.length<=0?0:this.a.children[this.k$a].size.x},fda:function(){return this.a.children.length<=0?0:this.a.children[this.k$a].size.y}});sc.$ob=sc.Bl.extend({s:new ig.ia("media/gui/message.png"),Ncb:new ig.ia("media/gui/basic.png"),
R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},DEFAULT_FAST:{state:{},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{offsetX:-136},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_FAST:{state:{offsetX:-136},time:0.1,p:KEY_SPLINES.EASE_OUT}},df:q,nia:q,mia:q,lia:q,DWa:-1,CWa:-1,AWa:-1,f:function(){this.parent(sc.rg.ds);this.F(136,33);this.H(ig.k.hb,ig.k.Cb);sc.P.Wa(sc.q.T,this);var a=new sc.ea(ig.lang.get("sc.gui.menu.credits"),{font:sc.Ea.Ib});a.l(5,8);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.playtime"),
{font:sc.Ea.Ib});a.l(5,21);this.m(a);this.df=new sc.Tb(9999999);this.df.za(sc.q.T.df);this.df.H(ig.k.ra,ig.k.$);this.df.l(24,7);this.m(this.df);this.nia=new sc.Tb(99,{leadingZeros:2});this.nia.H(ig.k.ra,ig.k.$);this.nia.l(8,20);this.m(this.nia);this.mia=new sc.Tb(99,{leadingZeros:2});this.mia.H(ig.k.ra,ig.k.$);this.mia.l(32,20);this.m(this.mia);this.lia=new sc.Tb(999,{leadingZeros:3});this.lia.H(ig.k.ra,ig.k.$);this.lia.l(56,20);this.m(this.lia);this.j("HIDDEN",h)},sOb:function(){this.df.za(sc.q.T.df)},
update:function(){var a=sc.pa.Qf("player","playtime"),b=Math.floor(a)%60;if(b!=this.DWa){this.nia.za(b,h);this.DWa=b}b=Math.floor(a/60)%60;if(b!=this.CWa){this.mia.za(b,h);this.CWa=b}b=Math.floor(a/60/60);if(b!=this.AWa){this.lia.za(b,h);this.AWa=b}},Da:function(a){this.parent(a);a.na(this.s,this.a.size.x-10-8,7,0,88,10,8);a.na(this.Ncb,107,21,107,1,3,7);a.na(this.Ncb,82,21,107,1,3,7)},Ab:function(a,b){a==sc.q.T&&b==sc.dd.kja&&this.df.za(sc.q.T.df)}})});ig.J=h;
ig.N("game.feature.version.gui.changelog-gui").O("impact.base.image","impact.base.event","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.button-interact","game.feature.control.control","game.feature.gui.base.button","game.feature.gui.base.boxes","game.feature.gui.base.numbers","game.feature.menu.gui.menu-misc").K(function(){function a(a){return a.indexOf("+")==0?0:a.indexOf("~")==0?3:a.indexOf("-")==0?6:9}sc.Afb=ig.da.extend({Mm:q,content:q,f:function(){this.parent();
this.content=new ig.da;this.Mm=new sc.TL(sc.Zn.vC);this.Mm.ih(this.content);this.Mm.Hha=y;this.Mm.O7=y;this.m(this.Mm)},$La:function(a){this.content.rh();this.content.a.size.y=0;this.Mm.Gc.Hl(0,0,0);this.Mm.fw(h);this.content.m(a);this.EAa()},scroll:function(a,c){this.Mm.scrollY(a,c,0.05)},qG:function(){return this.Mm.qG()},clear:function(){this.content.rh();this.content.a.size.y=0;this.Mm.Gc.Hl(0,0,0);this.Mm.fw(h)},F:function(a,c){this.parent(a,c);this.Mm.F(a,c)},EAa:function(){var a=this.content.a.children,
a=a[a.length-1];this.content.a.size.y=a.g.y+a.size.y;this.Mm.fw()}});sc.DSa=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Y:q,text:q,Aa:h,f:function(a,c,d){this.parent();this.Y=new sc.ea(c);this.text=new sc.ea(a,{font:sc.Ea.Ib});this.text.H(ig.k.hb,ig.k.Cb);this.Y.l(d?this.text.a.size.x+2:0,0);this.text.l(d?0:this.Y.a.size.x,2);this.F(this.Y.a.size.x+this.text.a.size.x+(d?2:0),17);this.m(this.Y);this.m(this.text)}});
sc.Bfb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},Ef:q,content:q,back:q,jJ:q,kJ:q,ci:q,Bg:q,nR:q,Z:q,ua:q,Lba:y,jwb:[],Tma:q,aT:[],nl:q,f:function(){this.parent();this.a.nd=0.8;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Z=new ig.$s;this.ua=new sc.wh(y,ig.tw.Ija);this.Z.hh(this.ua);this.content=new ig.da;this.content.F(300,240);this.twb();this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);
this.Ef.l(0,-10);this.m(this.Ef);this.back=new sc.mc("\\i[back]Back",sc.Zs);this.back.H(ig.k.Ia,ig.k.vb);this.back.l(sc.Zs/2+4,122+this.back.a.size.y-10);this.back.ac=sc.gd.back;this.back.cc=function(){this.BCb()}.bind(this);this.m(this.back);this.Z.Jd(this.back,this.pJa.bind(this));this.nR=new sc.mc("\\i[help]Show Newest",sc.Zs);this.nR.H(ig.k.Ia,ig.k.vb);this.nR.l(-sc.Zs/2-4,122+this.back.a.size.y-10);this.nR.cc=function(){this.oHb()}.bind(this);this.m(this.nR);this.Z.Jd(this.nR,this.OFb.bind(this));
this.j("HIDDEN",h)},lMb:function(){ig.La.De(this.Z);ig.La.Md(0.2);this.Lba=y;this.Awb();this.j("DEFAULT")},BCb:function(){ig.La.$e(this.Z);ig.La.Md(0.2);this.j("HIDDEN")},Mma:function(){this.Tma=q;this.ci.clear()},ZKb:function(a,c){this.Lba?this.Bg.ga("Updates since last Login - "+c):this.Bg.ga("Changelog - v"+c+" ["+a+"]")},update:function(){if(!ig.La.zh()){sc.ba.yZ()?this.ci.scroll(-20):sc.ba.xZ()&&this.ci.scroll(20);sc.ba.gu()?this.ci.scroll(200*ig.i.ja):sc.ba.Zu()&&this.ci.scroll(-200*ig.i.ja)}},
Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},pJa:function(){return sc.ba.Cq()},OFb:function(){return sc.ba.Hs()},oHb:function(){if(this.Lba){this.Lba=y;this.nR.re.ga("\\i[help]Show Newest");this.nl=0;this.uha(this.aT[0])}else{this.nR.re.ga("\\i[help]Show History");this.Lba=h;this.BKb();this.jJ.j("HIDDEN",h);this.kJ.j("HIDDEN",h)}},EGb:function(){var a=this.nl;this.nl++;if(this.nl>=this.aT.length-1)this.nl=this.aT.length-1;a!=this.nl&&this.uha(this.aT[this.nl])},bHb:function(){var a=
this.nl;this.nl--;if(this.nl<=0)this.nl=0;a!=this.nl&&this.uha(this.aT[this.nl])},BKb:function(){var b=sc.version.wAb(this.jwb);if(!this.Tma){var c={};if(b.length==0){b.push(sc.version.mJ[0]);c.version="[v"+b[0].version+"]"}else c.version=b.length==1?"[v"+b[0].version+"]":"[v"+b[b.length-1].version+" - v"+b[0].version+"]";c.fixes=[];c.changes=[];for(var d=q,f=0,i=0,i=0;i<b.length;i++){if(d=b[i].fixes)for(f=0;f<d.length;f++)c.fixes.push(d[f]);if(d=b[i].changes)for(f=0;f<d.length;f++)c.changes.push(d[f])}c.changes.length==
0?c.changes=q:c.changes.sort(function(b,c){return a(b)-a(c)}.bind(this));this.Tma=c}this.uha(this.Tma)},uha:function(a){if(a){var c=new ig.da;c.a.size.x=296;var d=q,f=0,i=0;this.ZKb(a.name,a.version);if(a.fixes){f=this.l_a(c,f,"Bug Fixes",sc.Do.Nl);d=a.fixes;for(i=0;i<d.length;i++)f=this.o_a(c,f,d[i],h)}if(a.changes){f=this.l_a(c,f,"Changes",sc.Do.E1);d=a.changes;for(i=0;i<d.length;i++)f=this.o_a(c,f,d[i])}c.a.size.y=f;this.ci.$La(c);this.nl>=this.aT.length-1?this.jJ.j("HIDDEN",h):this.jJ.j("DEFAULT",
h);this.nl==0?this.kJ.j("HIDDEN",h):this.kJ.j("DEFAULT",h)}},l_a:function(a,c,d,f,i){d=new sc.ea("\\c["+f+"]"+d+"\\c[0]");i&&d.H(ig.k.Ia,ig.k.$);i=new ig.mf("#7E7E7E",296,1);d.l(2,c);c=c+(d.a.size.y+2-2);i.l(0,c);c=c+3;a.m(d);a.m(i);return c},o_a:function(a,c,d,f){var i=0,j="+";if(f)j="~";else if(d.indexOf("+")==0)i=sc.Do.zw;else if(d.indexOf("~")==0){j="~";i=sc.Do.E1}else if(d.indexOf("-")==0){j="-";i=sc.Do.Nl}else{f=h;j="~"}j=new sc.ea("\\c["+i+"]"+j+"\\c[0]");j.l(4,c);d=new sc.ea("\\c["+i+"]"+
(f?d:d.substring(2))+"\\c[0]",{maxWidth:280});d.l(15,c);a.m(j);a.m(d);return c=c+d.a.size.y},Awb:function(){this.nl=0;this.uha(this.aT[0])},twb:function(){var a=2;this.aT=sc.version.mJ;this.Bg=new sc.ea("Changelog - "+sc.version.toString());this.Bg.H(ig.k.Ia,ig.k.$);this.Bg.l(0,a);this.content.m(this.Bg);var a=a+(this.Bg.a.size.y+2),c=new sc.FL(300);c.H(ig.k.Ia,ig.k.$);c.l(0,a);this.content.m(c);a=a+1;this.jJ=new sc.DSa("Previous Log","\\i[circle-left]",y);this.jJ.H(ig.k.hb,ig.k.Cb);this.jJ.l(-2,
-2);this.jJ.j("HIDDEN",h);this.jJ.kB=this.EGb.bind(this);this.content.m(this.jJ);this.kJ=new sc.DSa("Next Log","\\i[circle-right]",h);this.kJ.H(ig.k.ra,ig.k.Cb);this.kJ.l(-4,-2);this.kJ.j("HIDDEN",h);this.kJ.kB=this.bHb.bind(this);this.content.m(this.kJ);this.Z.Jd(this.jJ,function(){return sc.ba.aw()});this.Z.Jd(this.kJ,function(){return sc.ba.bw()});this.ci=new sc.Afb;this.ci.l(0,a);this.ci.F(301,202);a=a+this.ci.a.size.y;c=new sc.FL(300);c.H(ig.k.Ia,ig.k.$);c.l(0,a);this.content.m(c);this.content.m(this.ci)}})});
ig.J=h;ig.N("game.feature.version.plug-in").O("game.feature.version.version","game.feature.version.gui.changelog-gui").K(function(){window.Ed&&wm.Ek.push("game.feature.version.editors.changelog-editor")});ig.J=h;
ig.N("game.feature.model.base-model").K(function(){sc.P={Wa:function(a,b){b||e(Error("Given Observer is null!"));a.Uo.indexOf(b)==-1&&a.Uo.push(b)},Hc:function(a,b){a.Uo.ye(b)},Ga:function(a,b,c){for(var d=0;d<a.Uo.length;++d)a.Uo[d].Ab(a,b,c)},gVb:function(a,b){return a.Uo.indexOf(b)!=-1},XTb:function(a,b){for(var c in a)if(a[c]==b)return c;return"INVALID"}}});ig.J=h;
ig.N("game.feature.gui.hud.right-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image","game.feature.gui.base.boxes").K(function(){sc.Emb=ig.da.extend({Bcb:q,d6:0,WC:0,uc:q,R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{},time:0.3,p:KEY_SPLINES.EASE_IN},HALF:{state:{Xa:0.5,Va:0.5,offsetX:-1},time:0.3,p:KEY_SPLINES.EASE_OUT}},Di:[],iDa:y,f:function(){this.parent();this.H(ig.k.ra,ig.k.$);this.a.zIndex=101;this.a.xf=h;sc.P.Wa(sc.q,this);sc.P.Wa(sc.options,
this);this.Wdb()},update:function(){if(this.iDa){this.iDa=y;for(var a=4,b=0;b<this.Di.length;++b){if(!this.Di[b].hidden){this.Di[b].iZ?this.Di[b].l(0,a):this.Di[b].kd(0,a,0.3,KEY_SPLINES.EASE_OUT);a=a+(this.Di[b].a.size.y+8)}this.Di[b].iZ=y}}},wF:function(a,b){a.OT=this;a.iZ=h;a.a.align.x=ig.k.ra;this.Di.ye(a);if(b===g){this.Di.push(a);this.m(a)}else{this.Di.splice(b,0,a);this.DG(a,b)}this.q_()},dYa:function(a,b){var c=this.QEa(b);this.wF(a,c==-1?g:c)},YIb:function(a){a.OT=q;this.Di.ye(a);this.q_()},
q_:function(){this.iDa=h},Ab:function(a,b){if(a==sc.q){var c=sc.q.Es(),d=sc.q.oe();this.kd(0,d?21:c?16:0,0.2,KEY_SPLINES.EASE_IN_OUT,!c&&!d?0.5:0)}else a==sc.options&&b==sc.ct.$z&&this.Wdb()},Wdb:function(){sc.options.get("pixel-size")==sc.yxa.ONE?this.j("DEFAULT",h):sc.options.get("min-sidebar")?this.j("HALF",h):this.j("DEFAULT",h)}});sc.rC=sc.qya.extend({hidden:h,iZ:y,OT:q,f:function(a){this.parent(h,a);this.j("HIDDEN",h)},show:function(a,b){this.parent(a,b);if(this.hidden)this.iZ=h;this.hidden=
y;this.OT&&this.OT.q_()},hide:function(a,b){this.parent(a,b);this.hidden=h;this.OT&&this.OT.q_()},remove:function(){this.parent();this.OT&&this.OT.YIb(this)}})});ig.J=h;
ig.N("game.feature.timers.gui.timers-hud").O("game.feature.gui.hud.right-hud").K(function(){sc.bpb=ig.da.extend({s:new ig.ia("media/gui/basic.png"),Bu:q,jE:q,XG:q,AS:q,PY:q,n:q,f:function(a){this.parent();this.F(80,8);this.n=a;var a=2,b=q;if(this.n.Bu){this.Bu=new sc.Tb(99,{leadingZeros:2});this.Bu.H(ig.k.ra,ig.k.$);this.Bu.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.Bu);this.Bu.l(a,0);a=a+16;b=new ig.ec(this.s,112,0,3,
8);b.H(ig.k.ra,ig.k.$);b.l(a,0);a=a+3;this.m(b)}this.jE=new sc.Tb(99,{leadingZeros:2});this.jE.H(ig.k.ra,ig.k.$);this.jE.l(a,0);a=a+17;this.m(this.jE);b=new ig.ec(this.s,107,0,3,8);b.H(ig.k.ra,ig.k.$);b.l(a,0);a=a+4;this.m(b);this.XG=new sc.Tb(99,{leadingZeros:2});this.XG.H(ig.k.ra,ig.k.$);this.XG.l(a,0);a=a+17;this.m(this.XG);this.PY=new ig.ec(this.s,107,0,3,8);this.PY.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.PY.H(ig.k.ra,
ig.k.$);this.PY.l(a,0);a=a+4;this.m(this.PY);this.AS=new sc.Tb(999,{leadingZeros:2});this.AS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.AS.H(ig.k.ra,ig.k.$);this.AS.l(a,0);a=a+18;this.m(this.AS);this.a.size.x=a;this.Jia()},update:function(){!sc.q.Kr()&&(!sc.q.Oo()&&!this.hidden)&&this.Jia()},Jia:function(){var a=0,a=this.n.mode==sc.HI.COUNTDOWN?this.n.iS():this.n.n,b=Math.floor(a*100)%100,c=Math.floor(a%60),d=Math.floor(a/60)%
60,a=Math.floor(a/60/60)%60;this.Bu&&this.Bu.za(b);this.jE.za(c);this.XG.za(d);if(a>0){this.AS.za(a);this.AS.j("DEFAULT",h);this.PY.j("DEFAULT",h)}else{this.AS.j("HIDDEN",h);this.PY.j("HIDDEN",h)}}});sc.apb=sc.rC.extend({cG:q,f:function(a){var b="";switch(a.mode){case sc.HI.COUNTER:b=ig.lang.get("sc.gui.timer-hud.counter");break;case sc.HI.COUNTDOWN:b=ig.lang.get("sc.gui.timer-hud.countdown")}this.parent(b);this.cG=new sc.bpb(a);this.Rr(this.cG,!sc.q.oe());sc.P.Wa(sc.q,this);sc.P.Wa(sc.Th,this);this.hidden&&
!sc.q.oe()&&this.show()},update:function(){!this.hidden&&this.ae.length==0&&this.hide()},YCa:function(){sc.P.Hc(sc.q,this);sc.P.Hc(sc.Th,this);this.remove()},Ab:function(a,b,c){a==sc.q?a.DD()?this.YCa():a.oe()||a.jx()||sc.dc.iq?this.hide():!a.oe()&&(!a.jx()&&this.ae.length>0&&!sc.dc.iq)&&this.show():a==sc.Th&&(b==sc.iF.k9?this.cG.n.name==c&&this.YCa():b==sc.iF.$Pa&&this.cG.n.name==c.name&&c.cL&&this.YCa())}})});ig.J=h;
ig.N("game.feature.timers.timers-model").O("impact.base.game","game.feature.model.base-model","game.feature.timers.gui.timers-hud").K(function(){function a(a){var c="0000"+Math.floor(a);return c.length>=6?Math.floor(a):c.substr(c.length-2)}sc.HI={COUNTER:0,COUNTDOWN:1};sc.cpb=ig.Uf.extend({Uo:[],Th:{},f:function(){this.parent("Timers");ig.zd.Lg(this);ig.ma.Up("timers",this,"VarTimersEditor")},az:function(){if((sc.q.BN()||!sc.q.oe())&&!sc.q.Kr()&&!sc.q.Oo()&&!sc.q.jx()&&(sc.q.ko()||sc.q.Oo()))for(var a in this.Th){var c=
this.Th[a];if(c.mode==sc.HI.COUNTDOWN&&c.Xb())break;c.ja();if(c.mode==sc.HI.COUNTDOWN&&c.Xb()){ig.r.Yj();c.cL&&delete this.Th[a];sc.P.Ga(this,sc.iF.$Pa,c)}}},fj:function(){for(var a in this.Th)sc.P.Ga(this,sc.iF.k9,a);this.Th={}},Ms:function(){for(var a in this.Th){var c=this.Th[a];if(c.cL){delete this.Th[a];c.Jb&&sc.dc.tLa(c.Jb.quest,c.Jb.index);sc.P.Ga(this,sc.iF.k9,a);ig.r.Yj()}}},mub:function(a,c,d,f,i,j,k,l){this.Th[a]&&e(Error("Timer with name "+a+" is already in use!"));c=new sc.bUa(a,c,d,
f,i,k,l);this.Th[a]=c;if(j){sc.X.FB.wF(new sc.apb(c),1);sc.P.Ga(this,sc.iF.Jeb,c)}ig.r.Yj()},wNb:function(a){if(this.Th[a]){this.Th[a].stop();ig.r.Yj()}},LJb:function(a){if(this.Th[a]){this.Th[a].sO();ig.r.Yj()}},Ft:function(a,c,d){if(this.Th[a]){this.Th[a].reset(c,d);ig.r.Yj()}},hJb:function(a){if(!this.Th[a])return q;var c=this.Th[a];delete this.Th[a];sc.P.Ga(this,sc.iF.k9,a);ig.r.Yj();return c},tFa:function(a,c){return!this.Th[a]?c?0:q:this.Th[a].iS()},y2a:function(a){return!this.Th[a]?q:this.Th[a].n},
e1a:function(b,c){var d=Math.floor(b*100)%100,f=Math.floor(b/60/60)%60;return(f>0?a(f)+":":"")+a(Math.floor(b/60)%60)+":"+a(Math.floor(b%60))+(c?"."+d:"")},bm:function(a,c){if(c[0]=="timers"&&c[1])switch(c[2]){case "time":return this.y2a(c[1]);case "remainingTime":return this.tFa(c[1]);case "remainingTimeNotNull":return this.tFa(c[1],h);case "formatTime":return!this.Th[c[1]]?"????":this.e1a(this.y2a(c[1]),this.Th[c[1]].Bu);case "formatRemainingTime":return!this.Th[c[1]]?"????":this.e1a(this.tFa(c[1]),
this.Th[c[1]].Bu)}e(Error("Unsupported var access path: "+a))},Fu:function(a){var c={},d;for(d in this.Th){var f=this.Th;if(f.cL){f.Jb&&sc.dc.tLa(f.Jb.quest,f.Jb.index);sc.P.Ga(this,sc.iF.k9,d)}else c[d]=this.Th[d].oD()}a.timers=c},Bt:function(a){this.fj();var a=a.timers||{},c;for(c in a){var d=a[c];this.Th[c]=new sc.bUa(d.name||q,d.mode||sc.HI.COUNTER,d.duration||0,d.area||q,d.temp||y,d.millis||h,d.quest||q);this.Th[c].n=d.timer||0;this.Th[c].bl=d.stopped||y}}});sc.bUa=ig.Ca.extend({name:q,mode:sc.HI.COUNTER,
n:0,duration:0,cL:y,Bu:h,Lb:q,Jb:q,bl:y,f:function(a,c,d,f,i,j,k){this.name=a||"";this.mode=c||0;this.duration=d||0;this.Lb=f||q;this.cL=i||y;this.Bu=j;this.Jb=k||q},ja:function(){if(!this.bl&&!(this.Lb&&this.Lb!=sc.map.uj.path)){if(ig.r.mu)this.n=this.n+ig.i.gz;if(this.duration&&this.n>=this.duration){this.n=this.duration;this.bl=h}}},stop:function(){this.bl=h},sO:function(){this.bl=y},reset:function(a,c){if(a!=g)this.mode=a;if(c!=g)this.duration=c;this.n=0;this.bl=y},iS:function(){return!this.duration?
0:Math.max(this.duration-this.n,0)},Xb:function(){return!this.duration?y:this.n>=this.duration},oD:function(){var a={};a.name=this.name;a.mode=this.mode;a.timer=this.n;a.duration=this.duration;a.millis=this.Bu;a.temp=this.cL;a.stopped=this.bl;if(this.Lb)a.area=this.Lb;this.Jb&&(a.quest={quest:this.Jb.quest,index:this.Jb.index});return a}});sc.iF={};sc.iF.$Pa=0;sc.iF.k9=1;sc.iF.Jeb=2;ig.Vf(function(){return sc.Th=new sc.cpb})});ig.J=h;
ig.N("game.feature.timers.timers-steps").O("impact.base.action","impact.base.entity","impact.base.event","game.feature.timers.timers-model").K(function(){ig.oa.ADD_TIMER=ig.qa.extend({name:q,mode:q,duration:0,Lb:q,cL:q,Uab:y,Bu:h,Jb:q,t:new ig.u({attributes:{name:{c:"Timer",d:"Name of the timer to access it. Must be unique"},mode:{c:"Select",d:"Mode the timer should use",U:sc.HI},Bu:{c:"Boolean",d:"Set false if millis should be shown",ab:h},X:{c:"Boolean",d:"True if a gui should be added to the top-right",
I:h,ab:h},duration:{c:"NumberExpression",d:"Time in seconds the timer should update. Only applicable for COUNTDOWN mode.",I:h},Lb:{c:"String",d:"Only update timer when inside this area.",U:"areas",I:h},cL:{c:"Boolean",d:"True if the timer should be deleted once a map has been switched",I:h,ab:h},Jb:{c:"QuestResetSelect",d:"If the timer hits the duration on COUNTDOWN mode or your leave the map and the temp property is set to true.",I:h}}}),f:function(a){this.name=a.name;this.mode=sc.HI[a.mode]||0;
this.duration=a.duration||0;this.Lb=a.area||q;this.cL=a.temp||q;this.Uab=a.gui||y;this.Bu=a.millis!=g?a.millis:h;this.Jb=a.quest||q},start:function(){var a=ig.Ja.eh(this.duration);sc.Th.mub(this.name,this.mode,a,this.Lb,this.cL,this.Uab,this.Bu,this.Jb)}});ig.oa.REMOVE_TIMER=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"Timer",d:"Name of the timer to remove."}}}),f:function(a){this.name=a.name},start:function(){sc.Th.hJb(this.name)}});ig.oa.RESET_TIMER=ig.qa.extend({name:q,mode:q,duration:q,
t:new ig.u({attributes:{name:{c:"Timer",d:"Name of the timer to access it. Must be unique"},mode:{c:"Select",d:"New timer mode",I:h},duration:{c:"Number",d:"New duration time if any. Only valid when timer is COUNTDOWN",I:h}}}),f:function(a){this.name=a.name;this.mode=a.mode?sc.HI[a.mode]:g;this.duration=a.duration||g},start:function(){sc.Th.Ft(this.name,this.mode,this.duration)}});ig.oa.PAUSE_TIMER=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"Timer",d:"Name of the timer to pause."}}}),f:function(a){this.name=
a.name},start:function(){sc.Th.wNb(this.name)}});ig.oa.RESUME_TIMER=ig.qa.extend({name:q,t:new ig.u({attributes:{name:{c:"Timer",d:"Name of the timer to pause."}}}),f:function(a){this.name=a.name},start:function(){sc.Th.LJb(this.name)}})});ig.J=h;ig.N("game.feature.timers.plug-in").O("game.feature.timers.timers-steps","game.feature.timers.gui.timers-hud","game.feature.timers.timers-model").K(function(){if(window.Ed){wm.Ek.push("game.feature.timers.editors.timers-editors");wm.Um(/TIMER/,"cyan")}});
ig.J=h;
ig.N("game.feature.achievements.stats-model").O("impact.base.game","impact.feature.storage.storage").K(function(){sc.pob=ig.Uf.extend({Uo:[],Dc:{},rW:[],lQ:0,xz:y,f:function(){this.parent("Stats");if(window.Ri)this.xz=h;ig.zd.Lg(this);ig.ma.Up("stat",this,"VarStatEditor");this.GOa(h)},xK:-100,az:function(){if((sc.q.BN()||sc.q.oe())&&(!sc.q.Kr()&&(sc.q.ko()||sc.q.Oo()))&&ig.r.mu)if(this.xz)this.bc("player","playtime",ig.i.gz);else{this.Dc.player||(this.Dc.player={});this.Dc.player.playtime||(this.Dc.player.playtime=
0);this.Dc.player.playtime=this.Dc.player.playtime+ig.i.gz}if(this.lQ>0){this.lQ=this.lQ-ig.i.Sa;if(this.lQ<=0){this.lQ=0;window.Ri&&sc.pL&&sc.pL.RRb(this.rW);sc.P.Ga(this,sc.s$.DEFERRED_STAT_CHANGED,this.rW);this.rW.length=0}}},fj:function(){this.Dc={};this.lQ=this.rW.length=0;this.GOa(y)},bm:function(a,b){if(b[0]=="stat"){if(b[1]&&b[2]){for(var c=b[2],d=3;b[d];)c=c+("."+b[d++]);return this.Qf(b[1],c)}if(b[1])return this.get(b[1])}e(Error("Unsupported var access path: "+a))},set:function(a,b){if(this.xz){this.Dc[a]=
b;this.dM(a)}},aab:function(a,b){if(this.xz){this.Dc[a]=Math.max(this.Dc[a],b);this.dM(a)}},hXb:function(a,b){if(this.xz){this.Dc[a]=Math.min(this.Dc[a],b);this.dM(a)}},add:function(a,b){if(this.xz){this.Dc[a]=this.Dc[a]?this.Dc[a]+b:b;this.dM(a)}},CXb:function(a,b){if(this.xz){this.Dc[a]=this.Dc[a]?this.Dc[a]-b:b;this.dM(a)}},Ni:function(a,b,c){if(this.xz){this.Dc[a]||(this.Dc[a]={});this.Dc[a][b]=c;this.dM(a,b)}},bc:function(a,b,c){if(this.xz){this.Dc[a]||(this.Dc[a]={});this.Dc[a][b]=this.Dc[a][b]?
this.Dc[a][b]+c:c;this.dM(a,b)}},RH:function(a,b,c){if(this.xz){this.Dc[a]||(this.Dc[a]={});this.Dc[a][b]=this.Dc[a][b]?this.Dc[a][b]-c:c;this.dM(a,b)}},gXb:function(a,b,c){if(this.xz){this.Dc[a]||(this.Dc[a]={});this.Ni(a,b,this.Dc[a][b]==g?c:Math.min(this.Dc[a][b],c))}},Uta:function(a,b,c){if(this.xz){this.Dc[a]||(this.Dc[a]={});this.Ni(a,b,this.Dc[a][b]==g?c:Math.max(this.Dc[a][b],c));this.dM(a,b)}},get:function(a){return this.Dc[a]},Qf:function(a,b){this.Dc[a]||(this.Dc[a]={});return this.Dc[a][b]},
CWb:function(){for(var a in this.Dc)if(this.Dc[a]=={})for(var b in a)console.log("  "+b+": "+this.Dc[a][b]);else console.log(a+": "+this.Dc[a])},setActive:function(a){this.xz=a||y},GOa:function(a){var b=parseInt(localStorage.getItem("ccLocalStatBoots"))||0;a&&b++;localStorage.setItem("ccLocalStatBoots",b);this.Dc.gameBoots=b},Fu:function(a){a.playtime=this.Qf("player","playtime");a.stats=ig.copy(this.Dc)},Bt:function(a){this.Dc=a.stats||{};this.xz=h;this.GOa(y)},dM:function(a,b){if(!this.zqb(a,b)){this.rW.push({key:a,
LEb:b});if(this.lQ<=0)this.lQ=1}},zqb:function(a,b){for(var c=this.rW.length;c--;){var d=this.rW[c];if(d.key==a&&d.LEb==b)return h}return y}});sc.s$={};sc.s$.STAT_CHANGED=0;sc.s$.DEFERRED_STAT_CHANGED=1;ig.Vf(function(){return sc.pa=new sc.pob})});ig.J=h;
ig.N("game.feature.achievements.achievements").O("impact.base.game","impact.base.loader","impact.base.vars","impact.feature.database.database","game.config","game.feature.achievements.stats-model").K(function(){var a=new ig.de("");sc.Eya={GENERAL:"GENERAL",COMBAT:"COMBAT",EXPLORATION:"EXPLORATION"};sc.$Ta={GENERAL:{PROGRESS:"PROGRESS",PLAYER:"PLAYER",ITEMS:"ITEMS",SPECIAL:"SPECIAL"},COMBAT:{ACTIONS:"ACTIONS",ENEMIES:"ENEMIES",CIRCUITS:"CIRCUITS",CUMULATIVE:"CUMULATIVE"},EXPLORATION:{DISCOVERY:"DISCOVERY",
AREAS:"AREAS",CHESTS:"CHESTS",QUESTS:"QUESTS"}};sc.VQb={VALUE:"VALUE",VALUE_HIDDEN:"VALUE_HIDDEN",PERCENT:"PERCENT",NONE:"NONE",TIME:"TIME",CONDITION:"CONDITION",ENEMY:"ENEMY"};sc.ZTa={DEFAULT:{index:1,Za:"GENERAL"},KILL:{index:2,Za:"COMBAT"},DAMAGE:{index:3,Za:"COMBAT"},STREAK:{index:4,Za:"COMBAT"},STREAK_KILL:{index:5,Za:"COMBAT"},HEAL:{index:6,Za:"COMBAT"},THROW:{index:7,Za:"COMBAT"},MELEE:{index:8,Za:"COMBAT"},DASH:{index:9,Za:"COMBAT"},GUARD:{index:10,Za:"COMBAT"},CRITS:{index:11,Za:"COMBAT"},
ARTS:{index:111,Za:"COMBAT"},BOSS_MISC:{index:13,Za:"COMBAT",hidden:h},QUESTS:{index:14,Za:"EXPLORATION"},QUEST_TASKS:{index:15,Za:"EXPLORATION"},TRADER:{index:16,Za:"EXPLORATION"},BOTANICS:{index:17,Za:"EXPLORATION"},DASH_PLUS:{index:18,Za:"COMBAT"},GUARD_PLUS:{index:19,Za:"COMBAT"},ENEMIES:{index:20,Za:"COMBAT"},ENEMIES_REPORTS:{index:21,Za:"COMBAT"},PLAY_TIME:{index:22,Za:"GENERAL"},LEVEL:{index:23,Za:"GENERAL"},PLATIN_TROPHY:{index:66,Za:"GENERAL"},MONEY:{index:107,Za:"GENERAL"},STEPS:{index:108,
Za:"GENERAL"},JUMPS:{index:62,Za:"GENERAL"},KEY:{index:63,Za:"GENERAL"},KEY_SILVER:{index:64,Za:"GENERAL"},KEY_GOLD:{index:65,Za:"GENERAL"},CHEST_PERCENT:{index:104,Za:"EXPLORATION"},CHESTS:{index:104,Za:"EXPLORATION"},CHESTS_AUTUMN:{index:67,Za:"EXPLORATION"},CHESTS_BERGEN:{index:68,Za:"EXPLORATION"},CHESTS_MAROON:{index:69,Za:"EXPLORATION"},CHESTS_JUNGLE:{index:70,Za:"EXPLORATION"},CHESTS_RIDGE:{index:71,Za:"EXPLORATION"},CHESTS_SQUARE:{index:72,Za:"EXPLORATION"},CHESTS_COLD:{index:73,Za:"EXPLORATION"},
CHESTS_HEAT:{index:74,Za:"EXPLORATION"},CHESTS_SHOCKWAVE:{index:75,Za:"EXPLORATION"},CHESTS_VERMILLION:{index:76,Za:"EXPLORATION"},LORE:{index:77,Za:"EXPLORATION"},LANDMARK_PERCENT:{index:78,Za:"EXPLORATION"},LANDMARK:{index:78,Za:"EXPLORATION"},LANDMARK_AUTUMN:{index:79,Za:"EXPLORATION"},LANDMARK_BERGEN:{index:80,Za:"EXPLORATION"},LANDMARK_MAROON:{index:81,Za:"EXPLORATION"},LANDMARK_JUNGLE:{index:82,Za:"EXPLORATION"},LANDMARK_RIDGE:{index:83,Za:"EXPLORATION"},LANDMARK_RHOMBUS:{index:112,Za:"EXPLORATION"},
CIRCUIT_COLD:{index:85,Za:"COMBAT"},CIRCUIT_HEAT:{index:84,Za:"COMBAT"},CIRCUIT_SHOCK:{index:86,Za:"COMBAT"},CIRCUIT_WAVE:{index:87,Za:"COMBAT"},CIRCUIT_LEVEL_3:{index:110,Za:"COMBAT"},GUARD_COUNTER:{index:92,Za:"COMBAT"},LOW_HEALTH_WINS:{index:93,Za:"COMBAT"},ENVIRONMENT_KILLS:{index:94,Za:"COMBAT"},APOLLO_PERFECT:{index:95,Za:"GENERAL"},ONE_PUNCH:{index:96,Za:"COMBAT"},ONE_SHOT:{index:114,Za:"COMBAT"},STORY:{index:97,Za:"GENERAL"},ITEMS_USED:{index:98,Za:"GENERAL"},METAL_GEARS:{index:100,Za:"GENERAL"},
OLD_DRILL:{index:101,Za:"GENERAL"},ITEMS_FOUND:{index:102,Za:"GENERAL"},ALL_IS_NORMAL:{index:103,Za:"GENERAL"},MONK_TRIALS:{index:105,Za:"GENERAL"},ITEM_EXPO:{index:106,Za:"GENERAL"},SPIDERS:{index:109,Za:"GENERAL"},EMILIE_RACES:{index:116,Za:"GENERAL"},BOSS_CRAB:{index:24,Za:"COMBAT",hidden:h},BOSS_TURRET:{index:25,Za:"COMBAT",hidden:h},BOSS_DRILLER:{index:26,Za:"COMBAT",hidden:h},BOSS_TIM:{index:27,Za:"COMBAT",hidden:h},BOSS_MOTH:{index:28,Za:"COMBAT",hidden:h},BOSS_FROBBIT:{index:29,Za:"COMBAT",
hidden:h},BOSS_PHANTOM:{index:30,Za:"COMBAT",hidden:h},BOSS_BLOB:{index:31,Za:"COMBAT",hidden:h},BOSS_APE:{index:32,Za:"COMBAT",hidden:h},BOSS_APE_WHALE:{index:33,Za:"COMBAT",hidden:h},BOSS_SLOTH:{index:37,Za:"COMBAT",hidden:h},BOSS_SNAIL:{index:38,Za:"COMBAT",hidden:h},BOSS_APOLLO:{index:34,Za:"COMBAT",hidden:h},BOSS_APOLLO_2:{index:35,Za:"COMBAT",hidden:h},BOSS_APOLLO_3:{index:36,Za:"COMBAT",hidden:h},BOSS_SAMURAI:{index:39,Za:"COMBAT",hidden:h},BOSS_SHIZUKA:{index:40,Za:"COMBAT",hidden:h},BOSS_DESIGNER:{index:41,
Za:"COMBAT",hidden:h},BOSS_ELEPHANT:{index:42,Za:"COMBAT",hidden:h}};sc.Zx={ORDER:0,UNLOCKED:1,NAME:2,POINTS:3};sc.a2={1:1,2:2,3:3,4:4,5:5};sc.Dpb=ig.Uf.extend({Uo:[],Ke:q,gva:0,version:4,Az:q,EHa:[],f:function(){this.parent("Achievements");sc.P.Wa(sc.pa,this);this.Urb();if(window.Ed)ig.Yh.Lg("achievements","FeatEnumList","Achievements");else{ig.zd.Lg(this);this.NJa(ig.zd.GFa)}for(var a in sc.ZTa);ig.ma.Up("trophies",this,"VarTrophyEditor")},AFa:function(a,c,d){var f=0,i=0,j;for(j in this.Ke){var k=
this.Ke[j];if(k.track&&!(c&&c!=k.category)&&!(d&&d!=k.section)){k.triggered&&f++;i++}}return a?f/i:f},zFa:function(a,c,d){var f=0,i=0,j;for(j in this.Ke){var k=this.Ke[j];if(k.track&&!(a&&a!=k.category)&&!(c&&c!=k.section)){k.triggered&&f++;i++}}d||(d={count:0,total:0});d.count=f;d.total=i;return d},Dva:1E4,TZ:function(){sc.q.xe==sc.yw.Kka||(sc.q.om==sc.Dg.Tja||sc.q.om==sc.Dg.LOADING)||this.Az.varConditions&&this.JAa(this.Az.varConditions)},bm:function(a,c){if(c[0]=="trophies")switch(c[1]){case "triggered":var d=
this.uG(c[2]);return!d?y:d.triggered||y;case "name":return this.ypa(c[2]);case "version":return this.version+""}e(Error("Unsupported var access path: "+a))},ZNb:function(a){if(this.Ke[a]&&!this.Ke[a].triggered){this.Ke[a].triggered=h;this.N8();this.OWa(a);ig.zd.Gta()}},rSb:function(){for(var a in this.Ke)this.Ke[a].triggered=y;sc.e.jCa(sc.Fc.WL);ig.zd.Gta()},N8:function(){var a=this.gva=0,c;for(c in this.Ke){var d=this.Ke[c];if(d.track&&d.triggered){this.gva=this.gva+(d.points||0);a++}}sc.pa.Ni("player",
"trophies",a)},yBb:function(){this.N8();return this.gva},uG:function(a){return this.Ke[a]},ypa:function(a){return!this.Ke[a]?"???":ig.Ra.ic(this.Ke[a].name)},XDb:function(a){return this.Ke[a].triggered||y},rqb:function(a){this.EHa.push(a);this.EHa.length>=3&&this.EHa.shift()},Urb:function(){this.Az={};this.Ke=ig.Yh.get("achievements");var a=q,c=q,d=0,f;for(f in this.Ke){a=this.Ke[f];a.key=f;if(!a.stats||a.stats.length==0){if(a.condition){this.Az.varConditions||(this.Az.varConditions=[]);this.Az.varConditions.push(a)}}else for(d=
a.stats.length;d--;){c=a.stats[d];this.Az[c.key]||(this.Az[c.key]=[]);this.Az[c.key].push(a)}}ig.EV&&ig.log("%cDATABASE: %cLoaded Achievements: \n%O","color:orange","",this.Az)},JAa:function(b){for(var c=b.length,d=0,f=sc.pa,i=q,j,k,l=y,m=y;c--;){i=b[c];if(!i.triggered){d=i.stats.length;for(l=h;d--;){j=i.stats[d];k=j.mapKey?f.Qf(j.key,j.mapKey):f.get(j.key);var n=ig.Ja.eh(j.value);if(!this.Fqb(j.compare,k,n)){l=y;break}}if(i.condition&&l){a.lz(i.condition);l=a.evaluate()}if(l){m=i.triggered=h;this.OWa(i.key)}}}if(m){this.N8();
ig.zd.Gta()}},OWa:function(a){this.rqb(this.Ke[a]);this.Ke[a].triggered=h;sc.P.Ga(this,sc.Mka.Dya,a);sc.e.xF({type:"TROPHY",trophy:a});sc.e.YAa(sc.Fc.WL,a)},Fqb:function(a,c,d){if(a=="min")return c>=d;if(a=="max")return c<=d;if(a=="equal")return c==d},OJa:function(a){var c={},d;for(d in this.Ke)this.Ke[d].triggered&&(c[d]=h);a.featVersion=this.version;a.feats=c},NJa:function(a){var a=a.feats,c;for(c in a)this.Ke[c]&&a[c]==h&&(this.Ke[c].triggered=h);this.N8()},Ab:function(a,c,d){if(c==sc.s$.STAT_CHANGED)this.Az[d.key]&&
this.JAa(this.Az[d.key]);else if(c==sc.s$.DEFERRED_STAT_CHANGED)for(a=d.length;a--;)this.Az[d[a].key]&&this.JAa(this.Az[d[a].key])}});sc.Mka={};sc.Mka.Dya=0;ig.Vf(function(){return sc.Ke=new sc.Dpb})});ig.J=h;
ig.N("game.feature.achievements.stat-steps").O("impact.base.action","impact.base.entity").K(function(){ig.oa.ENABLED_STATS=ig.qa.extend({t:new ig.u({attributes:{},label:N("<i style='color: orange'>ENABLED STATS</i>")}),f:J(),start:function(){sc.pa.setActive(h)}});ig.oa.DISABLE_STATS=ig.qa.extend({t:new ig.u({attributes:{},label:N("<i style='color: orange'>DISABLE STATS</i>")}),f:J(),start:function(){sc.pa.setActive(y)}});ig.oa.UNLOCK_TROPHY=ig.qa.extend({nva:q,t:new ig.u({attributes:{nva:{c:"TrophySelect",
d:"The Trophy to unlock, if already unlocked, nothing will happen."}}}),f:function(a){this.nva=a.trophy||q},start:function(){this.nva&&sc.Ke.ZNb(this.nva)}});ig.oa.ADD_STAT_MAP_NUMBER=ig.qa.extend({map:q,Qc:q,value:0,t:new ig.u({attributes:{map:{c:"String",d:"The map of the stat."},Qc:{c:"String",d:"The stat name"},value:{c:"Number",d:"The number to add"}}}),f:function(a){this.map=a.map||q;this.Qc=a.stat||q;this.value=a.value||0},start:function(){this.map&&this.Qc&&sc.pa.bc(this.map,this.Qc,this.value)}});
ig.oa.SET_STAT_MAP_NUMBER=ig.qa.extend({map:q,Qc:q,value:0,t:new ig.u({attributes:{map:{c:"String",d:"The map of the stat."},Qc:{c:"String",d:"The stat name"},value:{c:"NumberExpression",d:"The number to add"}}}),f:function(a){this.map=a.map||q;this.Qc=a.stat||q;this.value=a.value||0},start:function(){this.map&&this.Qc&&sc.pa.Ni(this.map,this.Qc,ig.Ja.eh(this.value))}})});ig.J=h;
ig.N("game.feature.achievements.plug-in").O("game.feature.achievements.achievements","game.feature.achievements.stats-model","game.feature.achievements.stat-steps").K(function(){if(window.Ed){wm.Ek.push("game.feature.achievements.editors.feat-editors");wm.Um(/STAT/,"orange");wm.Um(/TROPHY/,"orange")}});ig.J=h;
ig.N("game.feature.auto-control.auto-control").O("impact.base.game").K(function(){sc.Oeb=["left","right"];sc.Xia={MOUSE:ig.Yb.xm,GAMEPAD:ig.Yb.Wc};sc.rPa=["menu","quickmenu","menuConfirm","menuBack","menuDown","menuUp","menuLeft","menuRight","menuHotkeyHelp","menuHotkeyHelp2","menuHotkeyHelp3","menuCircleLeft","menuCircleRight","questCircleLeft","questCircleRight","heatMode","coldMode","shockMode","waveMode","moveDirX","moveDirY","aiming","thrown","charge","melee","dashing","guarding"];sc.Teb=ig.Uf.extend({Ak:{Qa:Vec2.create(),
start:Vec2.create(),target:Vec2.create(),n:0,duration:0},axis:{left:{x:0,y:0,n:0},right:{x:0,y:0,n:0}},Pg:{},f:function(){this.parent("AutoControl")},get:function(a){return a=="mouseX"?this.Ak.Qa.x:a=="mouseY"?this.Ak.Qa.y:a=="axisLeftX"?this.axis.left.x:a=="axisLeftY"?this.axis.left.y:a=="axisRightX"?this.axis.right.x:a=="axisRightY"?this.axis.right.y:a=="leftStickDown"?this.axis.left.x||this.axis.left.y:a=="rightStickDown"?this.axis.right.x||this.axis.right.y:!this.Pg[a]?y:this.Pg[a].value},wc:M("Aa"),
setActive:function(a){if(this.Aa=a){sc.ba.v$a(this);sc.q.uJb();Vec2.assign(this.Ak.Qa,ig.input.Ak)}else{sc.ba.v$a(q);this.Pg={};this.BMa("left",0,0,0);this.BMa("right",0,0,0)}},aU:0,fH:function(){if(this.Aa){if(this.Ak.n){this.Ak.n=this.Ak.n-ig.i.Sa;if(this.Ak.n<0)this.Ak.n=0;var a=1-this.Ak.n/this.Ak.duration,a=KEY_SPLINES.EASE_IN_OUT.get(a);Vec2.an(this.Ak.start,this.Ak.target,a,this.Ak.Qa)}for(var b in this.Pg){a=this.Pg[b];if(a.target){a.value=a.target;a.target=q}else a.Wda||delete this.Pg[b]}for(b in this.axis){a=
this.axis[b];if(a.n){a.n=a.n-ig.i.Sa;if(a.n<=0){a.n=0;a.x=a.y=0}}}}},iLb:function(a,b,c){if(c){Vec2.assign(this.Ak.start,this.Ak.Qa);Vec2.Oa(this.Ak.target,a,b)}else Vec2.Oa(this.Ak.Qa,a,b);this.Ak.duration=c;this.Ak.n=c},BMa:function(a,b,c,d){this.axis[a].x=b;this.axis[a].y=c;this.axis[a].n=d},Zf:function(a,b,c){this.Pg[a]={target:b,value:q,Wda:c||y}},Nvb:function(a){delete this.Pg[a]}});ig.Vf(function(){return sc.jb=new sc.Teb})});ig.J=h;
ig.N("game.feature.auto-control.auto-control-steps").O("impact.base.event","game.feature.auto-control.auto-control").K(function(){ig.oa.START_AUTO_CTRL=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a,b){sc.q.dY();b.hga=h;b.y_=ig.Qm.PARALLEL;sc.jb.setActive(h)}});ig.oa.END_AUTO_CTRL=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a,b){b.hga=y;b.y_=ig.Qm.BLOCKING;sc.jb.setActive(y);sc.q.Cca()}});ig.oa.SET_AUTO_CTRL_MOUSE=ig.qa.extend({g:Vec2.create(),duration:0,t:new ig.u({attributes:{g:{c:"Vec2",
d:"Position of mouse in screen pixels. 0,0 = top left"},duration:{c:"Number",d:"Duration to move mouse to this position"}}}),f:function(a){Vec2.assign(this.g,a.pos);this.duration=a.duration||0},start:function(){sc.jb.wc()||e(Error("Use Auto Ctrl Step outside of 'AUTO_CONTROL' event"));ig.input.qb==ig.Yb.xm&&sc.jb.iLb(this.g.x,this.g.y,this.duration)}});ig.oa.SET_AUTO_CTRL_STICK=ig.qa.extend({SU:q,value:Vec2.create(),duration:0,t:new ig.u({attributes:{SU:{c:"String",d:"Type of Stick",U:sc.Oeb},value:{c:"Vec2",
d:"Type of value for the axis"},duration:{c:"Number",d:"Time in seconds to hold the stick in that direction. If 0 = hold forever."}}}),f:function(a){this.SU=a.stick||"left";Vec2.assign(this.value,a.value);this.duration=a.duration||0},start:function(){sc.jb.wc()||e(Error("Use Auto Ctrl Step outside of 'AUTO_CONTROL' event"));ig.input.qb==ig.Yb.Wc&&sc.jb.BMa(this.SU,this.value.x,this.value.y,this.duration)}});ig.oa.SET_AUTO_CTRL_ACTION=ig.qa.extend({action:q,value:q,Wda:y,TM:q,t:new ig.u({attributes:{action:{c:"String",
d:"Kind of action",U:sc.rPa},value:{c:"Number",d:"Value for action. 1 usually makes sense",ab:1},Wda:{c:"Boolean",d:"True if action should be hold"},TM:{c:"String",d:"Only do action for a specific device",U:sc.Xia,ok:h}}}),f:function(a){this.action=a.action||q;this.value=a.value||0;this.Wda=a.hold||y;this.TM=sc.Xia[a.deviceFilter]||q},start:function(){sc.jb.wc()||e(Error("Use Auto Ctrl Step outside of 'AUTO_CONTROL' event"));this.TM&&ig.input.qb!=this.TM||sc.jb.Zf(this.action,this.value,this.Wda)}});
ig.oa.CLEAR_AUTO_CTRL_ACTION=ig.qa.extend({action:q,TM:q,t:new ig.u({attributes:{action:{c:"String",d:"Kind of action",U:sc.rPa},TM:{c:"String",d:"Only do action for a specific device",rrb:sc.Xia,ok:h}}}),f:function(a){this.action=a.action||q;this.TM=sc.Xia[a.deviceFilter]||q},start:function(){sc.jb.wc()||e(Error("Use Auto ntrl Step outside of 'AUTO_CONTROL' event"));this.TM&&ig.input.qb!=this.TM||sc.jb.Nvb(this.action)}})});ig.J=h;
ig.N("game.feature.auto-control.plug-in").O("game.feature.auto-control.auto-control","game.feature.auto-control.auto-control-steps").K(J());ig.J=h;
ig.N("game.feature.inventory.inventory").O("impact.base.loader","game.config").K(function(){sc.kh={CONS:"CONS",EQUIP:"EQUIP",TRADE:"TRADE",KEY:"KEY",TOGGLE:"TOGGLE"};sc.Ng={HEAD:"HEAD",ARM:"ARM",TORSO:"TORSO",FEET:"FEET"};sc.Wz={LOW:0,NORMAL:1,RARE:2,LEGENDARY:3,UNIQUE:4,BACKER:5};sc.Of={ORDER:0,NAME:1,AMOUNT:2,RARITY:3,HP:4,ATTACK:5,DEFENSE:6,FOCUS:7,LEVEL:8};sc.bQb={ENEMY:{c:"EnemySearch"},PLANT:{c:"DropSelect"},TRADER:{c:"TraderSelect"},QUEST:{c:"Quest"},CHEST:{c:"Select",U:"areas"},OTHER:{c:"TradeCustomEditor"}};
sc.yib=ig.UL.extend({Rc:[],f:function(){if(!ig.oRa)return ig.warn("Can't initialize item database because no ig.ITEM_DATABASE was provided!");this.parent()},getItem:function(a){return a<0?q:this.Rc[a]},pda:function(a){a=this.getItem(a);return!a?q:ig.Ra.ic(a.name)},PTb:function(a){a=this.nAb(a);return a==-1?q:this.Rc[a]},mN:function(a){return a<0?0:this.Rc[a].level||0},nAb:function(a){for(var a=a.trim().toLowerCase(),b=this.Rc.length;b--;)if(this.Rc[b].name.en_US.toLowerCase()==a)return b;return-1},
M4:function(a,b,c){if(c||this.tea(a)){for(var c=c||this.Rc[a].stats,d=c.length,f=q,i="",j=this.Dub(c);d--;)if((f=sc.Qe[c[d]])&&f.change!=sc.ce.HEAL){i=i+("\\i["+(f.icon||"stat-default")+"]");j||(i=i+("\\i["+f.grade+"]"||""))}j&&(i=i+("\\i["+j+"]"||""));return i+(b?"":" "+(this.Rc[a].time||0)+"sec")}},Dub:function(a){for(var b=a.length,c=sc.Qe[a[b-1]],d=c.grade;b--;){c=sc.Qe[a[b]];if(!c||c.change==sc.ce.HEAL||c.grade!=d)return;d=c.grade}return d},tea:function(a){return this.Rc[a].isBuff},A5:function(a){return this.Rc[a].type==
sc.kh.EQUIP},Er:function(a){switch(a){case sc.Wz.LOW:return"";case sc.Wz.NORMAL:return"-normal";case sc.Wz.RARE:return"-rare";case sc.Wz.LEGENDARY:return"-legend";case sc.Wz.UNIQUE:return"-unique";case sc.Wz.BACKER:return"-backer"}},hFa:function(a){a=this.Rc[a];return!a?"":"\\i["+(a.icon+this.Er(a.rarity||0)||"item-default")+"]"+ig.Ra.ic(a.name)},oAb:function(a){if(a<=0)return q;a=this.Rc[a];return!a?"item-default":"\\i["+(a.icon+this.Er(a.rarity||0)||"item-default")+"]"},gFa:function(a){return this.Rc[a]?
ig.Ra.ic(this.Rc[a].description):""},i2a:function(a){a=this.Rc[a];return!a?q:a.rarity},j2a:function(a){a=this.Rc[a];return!a?q:a.equipType},rDb:function(a){a=this.Rc[a];return!a?y:a.type==sc.kh.CONS},RJ:function(a,b,c){for(var d=this.Rc.length,f=sc.yb,i=0,j=0,k=q;d--;){k=f.getItem(d);if(!k.name.en_US.QU("-")&&!(k.type=="KEY"||k.type=="TOGGLE"||k.noTrack))if(b)if(c){k=f.getItem(d);if(k.type==b&&k.equipType==c){sc.pa.Qf("items",d)&&i++;j++}}else{if(f.getItem(d).type==b){sc.pa.Qf("items",d)&&i++;j++}}else{sc.pa.Qf("items",
d)&&i++;j++}}return a?i/j:i},wu:function(){$.ajax({dataType:"json",url:ig.root+ig.oRa+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(a){this.Rc={};this.Xl(h);ig.error("Could not load Inventory json file! Event: %O",a)},onload:function(a){this.Rc=a.items;for(var b=this.Rc.length,c=q;b--;){c=this.Rc[b];c.effect&&(c.effect.sheet&&c.effect.name)&&(c.effect=new ig.Bi(this.Rc[b].effect));this.$rb(c)&&(c.isBuff=h)}this.Xl(h);ig.EV&&ig.log("%cLOADABLE: %cLoaded Inventory: \n%O",
"color:blue","",a)},$rb:function(a){if(a.stats)for(var b=a.stats.length;b--;)if(sc.Qe[a.stats[b]].change!=sc.ce.HEAL)return h;return y}});sc.yb=new sc.yib});ig.J=h;
ig.N("game.feature.combat.model.combat-params").O("game.feature.model.base-model").K(function(){sc.ha={NEUTRAL:0,HEAT:1,COLD:2,SHOCK:3,WAVE:4};sc.Cgb=4;sc.n9={};sc.n9[sc.ha.HEAT]=sc.ha.COLD;sc.n9[sc.ha.COLD]=sc.ha.HEAT;sc.n9[sc.ha.SHOCK]=sc.ha.WAVE;sc.n9[sc.ha.WAVE]=sc.ha.SHOCK;sc.Smb={4:1,8:1.2,12:1.4,16:1.6};sc.dW=0.25;sc.z9=0.33;var a={LINEAR:function(a,b){return a*2-b},PERCENTAGE:function(a,b){return a>b?a*(1+Math.pow(1-b/a,0.5)*0.2):a*Math.pow(a/b,1.5)}};ig.Xf.aNa=y;sc.mja=ig.Ca.extend({pb:q,
Uo:[],Ub:{hp:100,attack:10,defense:5,focus:5,elemFactor:[1,1,1,1],statusInflict:[1,1,1,1],statusEffect:[1,1,1,1]},So:q,ns:[],Sc:100,Qo:12,nm:6,c8:0,rR:0,KNb:[1,1,1,1],LNb:[1,1,1,1],Yi:1,qBa:1,$F:y,XK:[],FCb:5,j5:0,ICa:1.5,ZS:[],f:function(a){if(a)for(var b in this.Ub)this.Ub[b]=a[b]||this.Ub[b];this.Sc=this.Td("hp");for(b=0;b<4;++b)this.XK[b]=new sc.g9[b]},$Fa:function(){for(var a=0;a<4;++a)this.XK[a].clear(this.pb)},tO:function(a){this.$F=y;if(this.Sc<0)this.Sc=0;this.cqa(Math.round(this.Td("hp")*
(a||1)));this.$Fa()},WLa:L("pb"),o4a:function(){if(this.pb)for(var a=0;a<4;++a)this.XK[a].ES(this.pb)},xha:L("So"),Tbb:function(a){if(a.ed&&a.kl.indexOf(this)==-1){a.Hj(this);this.ZS.push(a)}},Ixb:function(a){a.dE(this)&&this.rVa(a)},Tvb:function(){for(var a=this.ZS.length;a--;)this.ZS[a].kl.ye(this);this.ZS.length=0},C5:function(){return this.ZS.length>0},FDb:function(a){return this.ZS.indexOf(a)!=-1},Zl:function(a){this.rVa(a)},rVa:function(a){this.ZS.ye(a);this.ZS.length==0&&this.pb.lHb()},reset:function(a){this.rR=
this.ns.length=0;this.Sc=this.Td("hp");this.c8=0;this.$F=y;this.Yi=1;this.Qo=a||16;this.nm=this.Qo*sc.dW;this.wJb();sc.P.Ga(this,sc.ei.mka)},wJb:function(){for(var a=this.XK.length;a--;)this.XK[a].clear()},nMa:function(a){this.Qo=a||0;this.nm=this.Qo*sc.dW;sc.P.Ga(this,sc.ei.dxa)},E7:function(a,b){var c=this.Td("hp")-this.Sc,d;for(d in this.Ub)this.Ub[d]=a[d]||this.Ub[d];this.Sc=this.Td("hp")-c;sc.P.Ga(this,sc.ei.bs,b)},Td:function(a,b){for(var c=this.Ub[a],d=this.ns.length;d--;)if(!b||!this.ns[d].Ida)c=
this.ns[d].multiply(c,a);typeof c=="number"&&(c=Math.round(c));return c},oBb:function(a){for(var b=1,c=this.ns.length;c--;)b=this.ns[c].multiply(b,a);return b},Ag:function(a){if(this.pb&&this.pb.Ah&&!sc.q.T.ki(sc.ng.MODIFIER))return 0;for(var b=this.So&&this.So[a]||0,c=this.ns.length;c--;)b=this.ns[c].add(b,a);return b},N1a:function(f,j,k,l,m){var n=f.Yi,o=f.Y6a||y,t=k.te(),k=k.Re||t.Re;if(k.Cv){var p=Math.max(1-(k.Cv.bia[this.pb.id]||0)/k.Cv.max,0);p<0.5&&(n=Math.max(n*2*p,0.01))}k=n;if(!ig.Xf.aNa){f.Kha&&
(n=n*(1+f.sv.Ag(f.Kha)));var r=f.sv.Ag("BERSERK");r&&f.sv.Gy()<=sc.z9&&(n=n*(1+r))}var j=this.Yi*(j===g?1:j),u=1,w=f.sv.Td("focus",o)/this.Td("focus",o),r=(Math.pow(w,0.35)-0.9)*f.p_a,r=Math.random()<=r;if(!ig.Xf.aNa){f.element&&(u=this.Td("elemFactor")[f.element-1]*this.KNb[f.element-1]);j=j*u;f.a3&&(j=j*(this.qBa+this.XK[3].DY(this)));(p=f.sv.Ag("CROSS_COUNTER"))&&sc.tn.sDb(this.pb)&&(j=j*(1+p));(p=f.sv.Ag("BREAK_DMG"))&&sc.tn.Bea(this.pb)&&(j=j*(1+p));r&&(n=n*f.sv.ICa)}t=sc.Ta.$1a(t.sa);p=0;if(f.element&&
f.GNa&&j>0&&!m)var m=f.element-1,p=k*f.GNa,z=(Math.pow(1+(w>=1?w-1:1-w)*d,b)-1)*c,w=w>=1?1+z:Math.max(0,1-z),p=p*w*this.Td("statusInflict")[m]*this.LNb[m]*u,p=this.XK[m].kAb(p,this,f,l);l=f.sv.Td("attack",o);o=f.Dna*this.Td("defense",o);o=Math.max(1,a.PERCENTAGE(l,o));o=o*j;l=a.PERCENTAGE(l,0)-o;o=o*n*t;l=l*n*t;if(!ig.Xf.aNa){o=o*(0.95+Math.random()*0.1);l=l*(0.95+Math.random()*0.1)}if(f.QG.xfa)l=o=0;o=Math.round(o);return{me:o,Xwb:l,t6:n,hba:k,Ena:j,uJ:r,status:p}},Bub:function(a,b,c){var d=c.te(),
c=c.Re||d.Re;if(c.Cv){d=this.pb.id;c.Cv.bia[d]||(c.Cv.bia[d]=0);c.Cv.bia[d]=c.Cv.bia[d]+a.hba}a.status&&this.XK[b.element-1].NCb(a.status,this,b);this.o_(a.me)},jAb:function(a){a=!a.jM?this.Td("hp")*a.value:a.value;a=a*(0.95+Math.random()*0.1);return a=Math.round(a)},o_:function(a){if(a<0)return this.cqa(-a);if(a>0){if(!this.$F&&this.Sc<=a){var b=this.Ag("ONCE_MORE");this.Sc>0&&b?sc.Ta.yJ(this.pb,this.pb,sc.QE.ONCE_MORE):this.$F=h}this.Sc=this.Sc-a}if(this.pb.sa==sc.pd.PLAYER)this.j5=2;sc.P.Ga(this,
sc.ei.uI)},tLb:function(a){this.Sc=Math.round(this.Td("hp")*a);sc.P.Ga(this,sc.ei.uI)},IKb:function(){this.Sc=0;sc.P.Ga(this,sc.ei.uI)},cqa:function(a){this.Sc=Math.min(this.Td("hp"),this.Sc+a);if(this.Sc>0)this.$F=y;sc.P.Ga(this,sc.ei.uI)},Gy:function(){return this.Sc/this.Td("hp")},Ula:function(a,b){if(a>0)this.c8=5;var b=b||(a>0?this.Qo:0),c=(sc.Smb[this.Qo]||1)*(1+this.Ag("SP_REGEN"));this.nm=this.nm+a*c;if(a>0&&this.nm>b)this.nm=b;if(a<0&&this.nm<b)this.nm=b;sc.P.Ga(this,sc.ei.p$,h)},cna:function(a){this.nm=
this.nm-a;if(this.nm<0)this.nm=0;sc.P.Ga(this,sc.ei.p$)},xMa:function(a){this.c8=5;this.nm=Math.round(this.Qo*a);sc.P.Ga(this,sc.ei.p$)},rpa:function(){return Math.floor(this.nm)},iBb:function(){return Math.floor(this.nm)/this.Qo},g7a:function(a){sc.P.Ga(this,sc.ei.oTa,a)},KKb:function(){this.Sc=0;this.$F=h;sc.P.Ga(this,sc.ei.uI)},Wf:function(){return this.$F&&!this.C5()},Ztb:function(a,b,c){b=b*(1+this.Ag("ITEM_BOOST"));a=new sc.zib(a,b,c);this.$Ib(a);for(b=this.xY();this.rR>=b;){for(b=0;!this.ns[b].hZ;)b++;
this.iLa(this.ns[b]);b=this.xY()}this.rR++;return this.Qla(a)},$Ib:function(a){for(var b=this.ns.length;b--;){var c=this.ns[b];c.hZ&&c.FS(a)&&this.iLa(c)}},Qla:function(a){var b=this.Td("hp")-this.Sc;this.ns.push(a);this.Sc=this.Td("hp")-b;sc.P.Ga(this,sc.ei.Zva,a);sc.P.Ga(this,sc.ei.bs);return h},ZEb:function(a,b,c){var d=this.Sc/this.Td("hp");a.W[b]=c;this.Sc=Math.round(this.Td("hp")*d);sc.P.Ga(this,sc.ei.bs);return h},iLa:function(a){var b=this.Td("hp")-this.Sc;this.ns.ye(a);a.hZ&&this.rR--;this.Sc=
this.Td("hp")-b;a.clear();sc.P.Ga(this,sc.ei.Yeb,a);sc.P.Ga(this,sc.ei.bs)},xY:function(){return 2+this.Ag("APPETITE")},zUb:N(y),update:function(a){if(!this.$F){var b=this.Qo*sc.dW,c=a?0.05:0.25;if(sc.qi.wc()){c=c*3;b=this.Qo}var d=ig.i.Ir;if(this.nm<b)this.Ula(d*c,b);else if(this.nm>b&&!a)this.c8>0?this.c8=this.c8-d:this.Ula(d*-0.05,b);if(!a&&this.Gy()<1){if(this.j5<=0){this.j5=1;b=Math.round(this.Td("hp")*1/this.FCb);this.cqa(b)}this.j5=this.j5-d}else this.j5=1;if(sc.q.ko()){for(d=this.XK.length;d--;)this.XK[d].update(this.pb,
this,a);if(!sc.q.oe())for(d=this.ns.length;d--;)this.ns[d].update()&&this.iLa(this.ns[d])}}}});var b=0.25,c=1.5,d=3;sc.ei={uI:1,p$:2,bs:3,Zva:4,Yeb:5,mka:6,dxa:7,oTa:8};sc.Wb={NONE:0,LIGHT:1,MEDIUM:2,HEAVY:3,MASSIVE:4,BREAK:5};sc.Neb={BLUNT:0,SLASH:1};sc.v9={AUTO:0,NEVER:1,FROM_ABOVE:2,ALWAYS:3};var f={};sc.Meb={NO_DAMAGE:{xfa:h},ONLY_HIT_PROXY:{vHb:h},SIGNAL:{xfa:h,Bra:h},NO_EFFECT:{xfa:h,Bra:h,NIa:h}};sc.oPb={MELEE_DMG:1,RANGED_DMG:2};sc.mL=ig.Ca.extend({type:sc.Wb.LIGHT,reb:q,NO:sc.Neb.SLASH,sv:q,
reverse:h,a3:y,iGa:q,Yi:1,Dna:1,GNa:0,element:sc.ha.NONE,p_a:1,b8:0,Abb:1,Gg:q,lw:[],Kha:q,Epa:q,QG:q,Q3a:y,$6a:y,Y6a:y,f:function(a,b,c){this.sv=a;if(b.type!=g)this.type=typeof b.type=="string"?sc.Wb[b.type]:b.type;this.reb=b.visualType?typeof b.visualType=="string"?sc.Wb[b.visualType]:b.visualType:this.type;if(b.damageFactor!=g)this.Yi=b.damageFactor*1;if(b.defenseFactor!=g)this.Dna=b.defenseFactor*1;if(b.element)this.element=typeof b.element=="string"?sc.ha[b.element]:b.element;this.b8=b.spFactor||
0;this.Gg=b.fly||q;this.reverse=b.reverse||y;if(b.critFactor!=g)this.p_a=b.critFactor;if(b.stunSteps)for(var a=b.stunSteps,d=a.length;d--;)this.lw.push(new sc.jI[a[d].type](a[d]));this.Epa=sc.v9[b.guardable]||sc.v9.AUTO;this.GNa=b.status||0;this.iGa=b.hints||q;this.Kha=b.skillBonus||q;this.QG=sc.Meb[b.limiter]||f;this.Q3a=b.hitInvincible||y;this.$6a=b.noIronStance||y;this.Y6a=b.noHack||y;if(this.Kha=="MELEE_DMG")this.a3=y;else if(this.Kha=="RANGED_DMG"||c)this.a3=h},wi:function(a){return this.iGa&&
this.iGa.indexOf(a)!=-1},AUb:function(){return this.QG.NIa}});sc.Kja=ig.Ca.extend({I3a:q,value:0,jM:y,f:function(a,b){this.I3a=a;this.value=b.value||0;this.jM=b.absolute||y},clone:function(){return new sc.Kja(this.I3a,{value:this.value,absolute:this.jM})}})});ig.J=h;
ig.N("game.feature.combat.entities.projectile").O("game.constants","impact.feature.effect.effect-sheet","impact.base.entity").K(function(){ig.Y9={qUa:1,Keb:2,iSa:3};ig.wa.Projectile=ig.Wd.extend({uXb:{c:"Number",d:"Speed variance. Value will be applied +- 50%"},pb:q,UJ:q,kU:3,kIa:3,Vaa:[],$Ma:y,QIa:y,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.PROJECTILE;this.b.Vm=1;this.b.ht=0;this.b.Ze.Am=0;this.b.Ze.vg=0;this.b.V.x=d.vel.x;this.b.V.y=d.vel.y;this.pb=d.combatant||q;this.Ya.Qb=Vec3.Wm(this.b.V);
this.UJ=this.pb.Re.UJ},Y_:function(a,b,c){this.UJ&&this.UJ.Vn(a,this.pb,this.b.V,b,c)},update:function(){this.Ya.Qb=this.QIa?0:Vec3.Wm(this.b.V);this.parent()},oS:function(a){if(!this.Ve){if(a.KA){this.Vaa.length=0;var b=this.tb();b.x=b.x+a.Cm.x*this.b.size.x/2.05;b.y=b.y+a.Cm.y*this.b.size.y/2.05;if(!this.kU){this.GT&&this.GT(ig.Y9.qUa,b,a);this.ze();return}this.kU--;this.rJa&&this.rJa(b,a)}this.$Ma?this.$Ma=y:this.parent(a)}},Ge:function(a){this.parent(a)},oq:function(a){if(!(a.b.qn.length>0)){var b=
a.b.xi?a.b.xi.Q:a;if(this.Vaa.indexOf(b.id)==-1){var c=y;this.KJa&&(c=!this.KJa(a,this.b.Nc&&this.b.Nc.Cm));c||this.Vaa.push(b.id)}}},Svb:function(){this.Vaa.length=0},K2:function(a){this.Vaa.push(a.id)},aj:function(a,b){return this.zY(a,b)},qu:function(a,b){var c=b||{};Vec2.assign(c,this.b.V);return c},Gf:function(){return sc.ha.NEUTRAL},tq:M("pb"),te:function(){return this.pb.te()},cda:M("zb")})});ig.J=h;
ig.N("game.feature.combat.model.ball-behavior").K(function(){sc.bja=ig.Ca.extend({E7a:J(),am:J()});sc.V8={};var a=Vec2.create(),b=Vec2.create();sc.V8.FOLLOW_TARGET=sc.bja.extend({j0:0,UW:0,t:new ig.u({attributes:{j0:{c:"Number",d:"How much does the entity steer in per second? 0 = not at all, 1 = a full circle"},UW:{c:"Number",d:"steerDegree is linearly scaled from 0 to max during adjustTime at beginning"}}}),f:function(a){this.j0=a.steerDegree||1;this.UW=a.adjustTime||0},am:function(a){var b=a.Qd();
b&&sc.awa.pYa(a,b,a.Fa-a.n,this.UW,this.j0)}});sc.V8.CLOSE_SELF_DESTRUCT=sc.bja.extend({eb:0,t:new ig.u({attributes:{eb:{c:"Number",d:"Min Distance to target when to self destruct"}}}),f:function(a){this.eb=a.distance||1},am:function(a){var b=a.Qd();b&&ig.qd.Fy(a.b,b.b)<this.eb&&a.oh()}});var c=Vec2.create();sc.V8.WIRL_SIDEWAYS=sc.bja.extend({cLa:0.2,dPa:0.5,delay:0,t:new ig.u({attributes:{cLa:{c:"Number",d:"How much to wirl sideways",ab:0.2},dPa:{c:"Number",d:"How long one whirling takes",ab:0.5},
delay:{c:"Number",d:"Delay before wirling starts",ab:0}}}),f:function(a){this.cLa=a.relWirl||0.2;this.dPa=a.wirlTime||0.5;this.delay=a.delay||0},am:function(a){var b=a.Fa-a.n;if(!(b<this.delay)){var b=b-this.delay,b=Math.sin(Math.PI*2*b/this.dPa+Math.PI*0.52)*this.cLa*ig.i.ja*60,i=Vec2.assign(c,a.b.V);Vec2.hz(i);Vec2.Bk(i,b);Vec2.add(a.b.V,i)}}});sc.V8.SLOW_DOWN=sc.bja.extend({nn:0,yNa:0,fadeOut:0,cEa:0,pause:0,fadeIn:0,t:new ig.u({attributes:{nn:{c:"Number",d:"How much to slowdown",ab:0.05},yNa:{c:"Number",
d:"How long to wait at before slowdown",ab:0},fadeOut:{c:"Number",d:"How quickly speed will be faded out.",ab:0},cEa:{c:"Number",d:"Variation added to fadeOut. Total = fadeOut +- fadeOutVary",ab:0},pause:{c:"Number",d:"How long slow down stays after fadeOut",ab:0},v8a:{c:"Number",d:"Variation to pause. Total = pause +- pauseVary",ab:0},fadeIn:{c:"Number",d:"fadeIn time after slowdown.",ab:0}}}),f:function(a){this.nn=a.speedFactor||0.05;this.yNa=a.startWait||0;this.fadeOut=a.fadeOut||0;this.cEa=a.fadeOutVary||
0;this.pause=a.pause||0;this.v8a=a.pauseVary||0;this.fadeIn=a.fadeIn||0},E7a:function(a){var b=Math.random();a.c3.gY=this.fadeOut+(0.5-b)*2*this.cEa;a.c3.JHb=this.pause+(0.5-b)*2*this.v8a},am:function(a){var b=a.c3.gY,c=a.c3.JHb,j=a.Fa-a.n,j=j-this.yNa,k=1;j>=0&&(j<b?k=1-j/b:j<b+c?k=0:j<b+c+this.fadeIn&&(k=k*((j-c-b)/this.fadeIn)));Vec2.length(a.b.V,a.speed*(k+(1-k)*this.nn))}});sc.awa={};sc.awa.pYa=function(c,f,i,j,k){i=i<j?k*i/j:k;f=f.tb(a);j=c.tb(b);f=Vec2.sub(f,j);j=Vec2.length(c.b.V);Vec2.GB(c.b.V,
f,Math.PI*2*i*ig.i.ja);Vec2.length(c.b.V,j)}});ig.J=h;
ig.N("game.feature.combat.model.proxy").K(function(){sc.Fxa=ig.Ca.extend({Vn:J()});sc.D1={};sc.dq={bU:function(a){return typeof a=="object"?new sc.D1[a.type](a):a},hS:function(a,b){if(typeof a=="object")return a;var c=b.te();return c.ro&&c.ro[a]},qpa:function(a){Vec3.Oa(a,0,0,0);return a},Oga:function(a){typeof a=="object"&&a.Ka()}};sc.ewa={SELF:function(a,b,c,d){b.lc(d,a)},TARGET:function(a,b,c,d){return c.lc(d,a)},HIT_POS:function(a,b,c,d,f){return Vec3.assign(a,f)}};sc.ML={NEVER:1,ACTION:2,COMBATANT:3,
COLLABORATION:4};sc.eib=ig.Ca.extend({proxy:q,g:q,align:0,offset:Vec3.create(),f:function(a,b,c,d){this.proxy=a;this.g=b||sc.ewa.SELF;this.align=c||ig.Pa.BOTTOM;d&&Vec3.assign(this.offset,d)},Vn:function(a,b,c,d,f){var i=Vec3.create();this.g(i,b,a,this.align,f);Vec3.add(i,this.offset);b=this.proxy.Vn(i.x,i.y,i.z,b,c);b.target=a;d&&b.setAttribute&&b.setAttribute("damage",d.me)}})});ig.J=h;
ig.N("game.feature.combat.entities.ball").O("game.feature.combat.entities.projectile","game.feature.combat.model.ball-behavior","game.feature.combat.model.proxy","game.constants","impact.feature.effect.effect-sheet","impact.base.entity","impact.feature.light.light").K(function(){sc.$va=sc.D1.BALL=sc.Fxa.extend({data:q,t:new ig.u({attributes:{zYa:{c:"AnimSheet",d:"Animation sheet of ball. Needs one entry with name 'default'",xc:h},size:{c:"Offset",d:"Size of projectile",I:h},G:{c:"String",d:"Effect sheet for effects",
U:"effects",ok:h},ts:{c:"EffectKets",d:"What keys to use in the effect sheet",I:h},speed:{c:"Number",d:"Speed of ball",ab:300},OEb:{c:"Integer",d:"Number of times the ball can bounce on walls"},n:{c:"Number",d:"The time until ball will disappear"},Cn:{c:"AttackInfo",d:"How the ball will hit its target"},x0:{c:"BallBoni",d:"Damage boni depending on time the ball is alive"},eJ:{c:"BallBehaviors",d:"Additional Behaviors of the ball"},I8:{c:"Boolean",d:"True if ball should show a trail"},VN:{c:"Boolean",
d:"True if ball can hit multiple targets"},pg:{c:"String",d:"Size of light shown for this ball",I:h,U:ig.mk},oFb:{c:"Boolean",d:"If true, don't make light glow for ball"},FSb:{c:"ProxyRef",d:"Proxy to be spawned when ball is destroyed",I:h},gSb:{c:"ProxyRef",d:"Proxy to be spawned when ball bounces on wall",I:h},LXb:{c:"Boolean",d:"If true: connect proxy to time of owner.",I:h},mGa:{c:"Boolean",d:"If true: Make combatant fly sideways when hit",I:h},QIa:{c:"Boolean",d:"If true: Do not rotate sprite along movement direction",
I:h},Cd:{c:"Number",d:"Size of shadow. Otherwise will be 4. Set 0 to hide shadow.",I:h}}}),f:function(a){this.data=a;a.animation.shapeType||(a.animation.shapeType="YZ_EXPAND");a.animation.wallY=1;a.animation=new ig.Al(a.animation);a.effects&&(a.effects=new ig.ud(a.effects));if(a.timeBoni)for(var b=a.timeBoni.length;b--;){var c=ig.copy(a.attack);ig.merge(c,a.timeBoni[b]);a.timeBoni[b]=c}if(a.behaviors)for(b=a.behaviors.length;b--;)a.behaviors[b]=new sc.V8[a.behaviors[b].type](a.behaviors[b])},qpa:function(a){this.data.size?
Vec3.assign(a,this.data.size):Vec3.Oa(a,8,8,8);return a},Ka:function(){this.data.effects&&this.data.effects.Tc();this.data.animation&&this.data.animation.Ka()},Vn:function(a,b,c,d,l){l={dir:l,ballInfo:this.data,params:d.te().W,party:d.sa,combatant:d};d.te().Ah&&sc.pa.bc("player","throws",1);return ig.r.Pe(ig.wa.Ball,a,b,c,l)}});var a=Vec2.create(),b=Vec3.create(),c=Vec3.create();ig.wa.Ball=ig.wa.Projectile.extend({Nn:h,sa:0,target:q,W:q,zb:q,VN:y,Fa:0,n:1.5,x0:[],G:q,ts:q,speed:0,nn:1,zj:q,My:q,bDa:q,
tma:q,eJ:q,c3:q,mGa:y,f:function(a,b,c,d){this.parent(a,b,c,{vel:d.dir,combatant:d.combatant});this.sa=d.party;this.W=d.params;this.w$a(d.ballInfo);this.kU=this.kIa;this.n=this.Fa;this.rOa=0},Qd:function(){return this.target&&this.target.EB?this.target.EB[0]:this.target},w$a:function(a,c){var d=this.b;this.speed=a.speed;Vec2.length(d.V,this.speed);var k=a.size;this.mGa=a.hitSideways;var l=Vec3.assign(b,d.size);k?d.F(k.x,k.y,k.z):d.F(8,8,8);d.l(d.g.x-(this.b.size.x-l.x)/2,d.g.y-(this.b.size.y-l.y)/
2,d.g.z);this.b.Cd.size=a.shadow!==g?a.shadow:4;this.b.type=ig.ca.PROJECTILE;if(this.pb)this.target=this.pb.Qd(h);this.eJ=a.behaviors||q;this.mb=a.animation;this.Bd(a.animation);this.b.Ch=a.speed;this.G=a.effects;this.ts=a.effectKeys||q;this.VN=a.multiHit||y;this.kIa=a.maxBounce;this.Fa=a.timer;this.QIa=a.noMoveRotate||y;if(a.destroyProxy)this.bDa=sc.dq.bU(a.destroyProxy);if(a.bounceProxy)this.tma=sc.dq.bU(a.bounceProxy);if(a.timeConnect)this.b.time.parent=this.pb.b;if(a.attack){d=new sc.mL(this.W,
a.attack,h);if(c&&this.zb){d.Yi=this.zb.Yi;d.Dna=this.zb.Dna;d.b8=this.zb.b8}this.zb=d}this.x0.length=0;if(a.timeBoni)for(d=0;d<a.timeBoni.length;++d)this.x0[d]={time:a.timeBoni[d].time,zb:new sc.mL(this.W,a.timeBoni[d],h)};ig.bt.Pw(this,"trail");a.trail&&this.G.va(this.ts&&this.ts.trail||"ballTrail",this,{duration:-1,group:"trail"});this.zj&&this.zj.stop();d=ig.mk[a.light||"XS"];if(d!=ig.mk.NONE){this.zj=new ig.Bw(this,d,0,0,-1,1,!a.noLightGlow);ig.pg.ey(this.zj)}if(this.eJ){this.c3={};for(d=this.eJ.length;d--;)this.eJ[d].E7a(this)}},
b3a:function(a,b){this.My&&Vec3.assign(this.b.V,this.My.jJa);var b=b||1,d=Vec3.sub(a,this.b.g,c),k=Vec3.length(d)/(this.speed*b);this.My={g:Vec3.create(a),zT:Vec3.create(this.b.g),n:new ig.Vt(y,k,ig.Ol.br),jJa:Vec3.create(this.b.V)};Vec3.assign(this.b.V,d);Vec3.length(this.b.V,5);return k},VBa:function(a,b){this.speed=this.speed*a;this.b.Ch=this.speed;Vec2.length(this.b.V,this.speed);this.n=this.n/a;this.Fa=this.Fa/a;if(b)this.nn=this.nn*a},vJb:function(){if(this.nn!=1){this.VBa(1/this.nn);this.nn=
1;return h}return y},pvb:function(a){Vec2.assign(this.b.V,a);Vec2.length(this.b.V,this.speed)},rJa:function(a,b){if(this.tma)this.xXa(a,b);else if(this.G){var c=this.G.Cg(this.ts&&this.ts.bounce||"ballBounce",a.x,a.y,this.b.g.z,q,{angle:Vec2.Wm(b.Cm)});c&&this.b.time.parent&&c.aua(this.b.time.parent.Q)}},oh:function(){this.GT(ig.Y9.iSa);this.ze()},xXa:function(b,c){var d=this.tq(),k=sc.dq.hS(this.tma,d);if(k){Vec2.assign(a,c.Cm);Vec2.Lc(a);k.Vn(b.x,b.y,this.b.g.z,d,a)}},GT:function(a,b,d){if(this.bDa){var k=
this.tq();if(b=sc.dq.hS(this.bDa,k)){d=this.b.V;a=this.lc(ig.Pa.CENTER,c);b.Vn(a.x,a.y,a.z,k,d)}}else if(b&&this.tma)this.xXa(b,d);else if(a!=ig.Y9.iSa&&this.G){if(a==ig.Y9.qUa){a=this.ts&&this.ts.wall||"ballWallKill";this.G.Jpa(a)&&(k=this.G.Cg(a,b.x,b.y,this.b.g.z,q,{angle:Vec2.Wm(d.Cm)}))}else{b=this.tb();a=this.ts&&this.ts.air||"ballAirKill";this.G.Jpa(a)&&(k=this.G.Cg(a,b.x,b.y,this.b.g.z))}k&&this.b.time.parent&&k.aua(this.b.time.parent.Q)}},KJa:function(a,b){var c=y;if(!this.zb||!this.zb.QG.NIa){if(a.sj){var d=
a.sj(this,b);(c=d)&&!this.VN&&this.oh();if(a.b.type==ig.ca.IGNORE&&this.VN)this.$Ma=h}if(this.zb&&a.me&&a.sa!=this.sa){d=this.zb;this.sa==sc.pd.ENEMY&&(c=h);for(var l=0;l<this.x0.length&&this.x0[l].time>this.n;)++l;if(l<this.x0.length)d=this.x0[l].zb;if(a.me(this,d)){c=h;this.VN||this.oh()}}}c&&this.pb.te().Ah&&sc.pa.bc("player","throwHits",1);return c},update:function(){if(this.My){this.My.n.ja();var a=this.My.n.get();Vec3.an(this.My.zT,this.My.g,a,c);this.b.l(c.x,c.y,c.z);if(this.My.n.Xb()){Vec3.assign(this.b.V,
this.My.jJa);this.My=q}}else if(this.eJ)for(a=this.eJ.length;a--;)this.eJ[a].am(this);if(this.n>0){this.n=this.n-ig.i.ja;if(this.n<=0){this.GT(ig.Y9.Keb);this.ze()}}this.rOa=this.rOa+ig.i.ja;this.parent()},Gf:function(){return this.zb&&this.zb.element||sc.ha.NEUTRAL},qu:function(a,b){var c=b||{};this.My?Vec2.assign(c,this.My.jJa):Vec2.assign(c,this.b.V);if(this.mGa){Vec2.hz(c);var k=ig.qd.Wk(this.b,a.b,d);Vec2.Tm(k,a.b.V,-ig.i.ja);Vec2.ug(k,c)<0&&Vec2.Lc(c)}return c},I9a:function(){this.kU=this.kIa},
zta:function(a){this.n=a||this.Fa},dCa:function(a){Vec2.round(this.b.V,Math.PI*2*a)}});var d=Vec2.create()});ig.J=h;
ig.N("game.feature.player.player-config").K(function(){sc.vQb={};sc.xQb={SPHEROMANCER:0,TRIBLADER:1,QUADROGUARD:2,PENTAFIST:3,HEXACAST:4,UNKNOWN:5};sc.hl={AIM_START:1,THROW_NORMAL:2,THROW_NORMAL_REV:3,THROW_CHARGED:4,THROW_CHARGED_REV:5,ATTACK:6,ATTACK_REV:7,ATTACK_FINISHER:8,DASH:9,DASH_SLOW:10,CHARGING:11,GUARD:12,PERFECT_GUARD:13,THROW_SPECIAL1:21,THROW_SPECIAL2:22,THROW_SPECIAL3:23,ATTACK_SPECIAL1:24,ATTACK_SPECIAL2:25,ATTACK_SPECIAL3:26,DASH_SPECIAL1:27,DASH_SPECIAL2:28,DASH_SPECIAL3:29,GUARD_SPECIAL1:30,
GUARD_SPECIAL2:31,GUARD_SPECIAL3:32};var a={AIM_START:h,THROW_NORMAL:y,THROW_NORMAL_REV:y,THROW_CHARGED:y,THROW_CHARGED_REV:y,ATTACK:y,ATTACK_REV:y,ATTACK_FINISHER:y,DASH:y,DASH_SLOW:y,GUARD:h,CHARGING:y};sc.RP=[1,3,6];sc.VV=ig.XE.extend({Wi:"PlayerConfig",name:q,nJ:q,Ad:q,Xi:{Iba:4,eOa:4,Kcb:0.5,jbb:1,nK:120,oIa:24,iK:48},mb:q,ro:{},MY:0,pa:q,cma:q,tv:[],$i:{},lua:[],f:function(a){this.name=a;this.parent(a.toLowerCase())},oG:function(){return ig.root+this.path.vm("data/players/",".json")+ig.Kn()},
onload:function(a){var b;(b=ig.yqa.Tga(a))||e(Error("Can't find data of player '"+i+"'"));for(var f in b.proxies){a=b.proxies[f];this.ro[f]=new sc.D1[a.type||"BALL"](a)}this.nJ=b["class"];this.Ad=new sc.i9(b.character);this.mb=new ig.Al(b.sheet);this.pa=b.stats;a=b.combatStyle||{};this.Xi.Iba=a.comboCount||4;this.Xi.eOa=a.throwCount||4;this.Xi.Kcb=a.throwProb||0;this.Xi.jbb=a.sidewaySpeed||1;this.Xi.nK=a.normDistance||120;this.Xi.oIa=a.meleeDistance||24;this.Xi.iK=a.minDistance||48;this.Xi.c1a=a.foodSprites||
q;this.Xi.Myb=a.foodOffset||q;this.Xi.Lyb=a.foodBubbleOffset||q;this.ad=b.walkAnims;this.cma=b.autoequip;this.MY=b.headIdx||0;this.tv=new sc.CSa("BASE",b.actions.BASE);for(var i in sc.ha)this.$i[sc.ha[i]]=new sc.CSa(i,b.actions[i]);if(b=b.skillRanking)for(i=0;i<b.length;++i)this.lua.push(b[i].skill)},NJ:aa(),Wo:function(){this.Ad.Tc();this.tv.Ka();for(var a in this.$i[a])this.$i[a].Ka();for(var b in this.ro)this.ro[b].Ka()}});sc.VV.U1a=function(a,b,f){f=f?"charged":"default";b==sc.ha.NEUTRAL?f=f+
"Neutral":b==sc.ha.HEAT?f=f+"Heat":b==sc.ha.COLD?f=f+"Cold":b==sc.ha.WAVE?f=f+"Wave":b==sc.ha.SHOCK&&(f=f+"Shock");return a.ro[f]};var b={NEUTRAL:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1,1,1,1]},HEAT:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1,1.5,1,1]},COLD:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1.5,1,1,1]},SHOCK:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1,1,1,1.5]},WAVE:{hp:1,attack:1,defense:1,focus:1,elemFactor:[1,1,1.5,1]}};sc.Feb={MELEE:1,RANGED:2,NONE:3,MIXED:4};sc.Geb={INTERRUPT:1,
LOCK:2};sc.ylb=ig.Ca.extend({action:q,key:q,name:q,description:q,TX:q,YO:y,status:y,f:function(b,d,f){this.key=b;if(d&&d.steps){this.action=new ig.Xe(b,d.steps,a[b]);this.name=d.name?new ig.Ra(d.name):q;this.description=d.description?new ig.Ra(d.description):q;this.TX=sc.Feb[d.dmgType]||q;this.YO=sc.Geb[d.stunType]||y;this.status=d.status||y;this.Y=sc.uzb(f,this.key)}else this.action=new ig.Xe(b,d,a[b])}});sc.CSa=ig.Ca.extend({L6:q,wo:{},Pg:{},Ub:{},So:{},QAa:{},HQ:{},f:function(a,d){this.L6=b[a]||
q;var f=a=="BASE"?-1:sc.ha[a],i;for(i in d)this.Pg[i]=new sc.ylb(i,d[i],f);this.wKa()},Ka:function(){for(var a in this.Pg)this.Pg[a].Ka()},wKa:function(){this.wo.hp=0;this.wo.attack=0;this.wo.defense=0;this.wo.focus=0;this.wo.elemFactor||(this.wo.elemFactor=[]);this.wo.elemFactor[sc.ha.HEAT-1]=0;this.wo.elemFactor[sc.ha.COLD-1]=0;this.wo.elemFactor[sc.ha.SHOCK-1]=0;this.wo.elemFactor[sc.ha.WAVE-1]=0;for(var a in sc.Af)this.wo[a]=0;this.QAa={};for(var b in this.ro)this.QAa[b]=this.ro[b];this.HQ={};
for(var f in sc.hl)this.Pg[f]&&(this.HQ[sc.hl[f]]=this.Pg[f])},update:function(a,b){if(this.L6){for(var f in a)this.Ub[f]=Math.floor(a[f]*(this.L6[f]+this.wo[f]));this.Ub.elemFactor=this.Ub.elemFactor||[];var i=a.elemFactor;for(f=0;f<this.L6.elemFactor.length;++f)this.Ub.elemFactor[f]=(2-i[f])*(this.L6.elemFactor[f]+this.wo.elemFactor[f]);for(var j in sc.Af){f=0;b&&b[j]!==g&&(f=b[j]-1);f=f+this.wo[j];this.So[j]=f}}},fS:function(a){return this.Ub[a]},SAb:function(a){return this.L6[a]},XAb:function(a){return this.Pg[a]},
n1a:function(a){return this.HQ[a]&&this.HQ[a].name},xs:function(a){return this.HQ[a]&&this.HQ[a].action},KEa:function(a){for(var b=0;b<3;++b)if(!this.xs(sc.hl[a+(b+1)]))break;return b},Soa:M("QAa")})});ig.J=h;
ig.N("game.feature.player.player-level").K(function(){function a(a,c){var d=c-a,f=1;switch(d){case -5:f=0.01;break;case -4:f=0.0625;break;case -3:f=0.125;break;case -2:f=0.25;break;case -1:f=0.5;break;case 0:f=1;break;case 1:f=1.1;break;case 2:f=1.3;break;case 3:f=1.5;break;case 4:f=1.7;break;case 5:f=1.9;break;case 6:f=2.1;break;case 7:f=2.3;break;case 8:f=2.5;break;default:f=d<0?0.01:2.5}return f}sc.IV={XV:{cx:function(b,c){return a(b,c)*(100/(99+b))}},Zmb:{cx:function(b,c){return a(b,c)},Z3a:h},
WV:{cx:function(a,c){if(a<=c)return 1;switch(c-a){case -1:return 1;case -2:return 1;case -3:return 1;case -4:return 0.8;case -5:return 0.6;case -6:return 0.4;case -7:return 0.2;case -8:return 0.1;default:return 0.05}},Z3a:h}};sc.dF={YZa:function(a,c,d){for(var f in c){var i=c[f].base,j=c[f].increase,k=Math.sin(Math.PI*2*(d/4+c[f].variance)),l,m;l=(Math.pow(1.25,d/10)-1)/(Math.pow(1.25,10)-1);m=Math.log(1.25)/10*Math.pow(1.25,d/10)/(Math.pow(1.25,10)-1);m=m*j*0.5;a[f]=i+Math.floor(j*l+k*m)}},Wma:function(a,
c,d,f,i,j){j=j||sc.IV.XV;c=j.cx(c,d);return i?0:Math.max(1,Math.floor(a*c*(f!=g?f:1)))},Idb:function(a,c,d){for(var f in a)if(a[f]>=0){var i=sc.yb.getItem(a[f]),j=i.params;c.hp=c.hp+Math.floor(j.hp||0);c.attack=c.attack+Math.floor(j.attack||0);c.defense=c.defense+Math.floor(j.defense||0);c.focus=c.focus+Math.floor(j.focus||0);if(j.elemFactor)for(var k=4;k--;){var l=Math.round(c.elemFactor[k]*100)+Math.round((j.elemFactor[k]||1)*100-100);c.elemFactor[k]=Math.min(sc.K9,l)/100}var i=i.properties,m;for(m in i)if(sc.Af[m])if(d[m]){j=
d[m];j=Math.round(j*100)+Math.round(i[m]*100-100);d[m]=Math.min(sc.K9,j)/100}else d[m]=i[m]}},cma:function(a,c,d,f,i,j){if(c){for(var k=0,l=0;l<c.length;++l)if(c[l].level)if(c[l].level<=d)k=l;else break;for(l=k;l<c.length;++l){k=c[l];if(!j&&k.condition&&!k.condition.evaluate())break;if(k.level&&k.level<=f){var d=k.level,m;for(m in sc.cd){var n=sc.cd[m],o=k[m];if(o){i&&a.sA(o,1,h);a.mz(n,o)}}}else if(k.level>f)break}return d}},sb:function(a,c,d){var f;switch(c){case sc.cd.HEAD:f=a.head;a.head=d;break;
case sc.cd.LEFT_ARM:f=a.Bh;a.Bh=d;break;case sc.cd.RIGHT_ARM:f=a.Fh;a.Fh=d;break;case sc.cd.TORSO:f=a.uh;a.uh=d;break;case sc.cd.FEET:f=a.ph;a.ph=d}return f}}});ig.J=h;
ig.N("game.feature.player.player-model").O("game.feature.model.base-model","game.feature.combat.model.combat-params","game.feature.combat.entities.ball","game.feature.player.player-config","game.feature.achievements.stats-model","game.feature.player.player-level").K(function(){var a={id:0,Iv:0,zc:0,Nq:y,J8:y},b=q,c=q,d,f,i=[0,2,3,1,4];sc.mib=10;sc.qRa=12;sc.dd={wP:1,kja:2,vV:3,DL:4,uja:5,aQa:6,PL:7,m$:8,L1:9,Pja:10,k$:11,hja:12,A9:13,bs:14,Owa:15,Nja:16,Nwa:17,pRa:18,nRa:19,mRa:20,ZPa:21,u1:22};sc.ng=
{MOVE:1,CHARGE:2,DASH:3,CLOSE_COMBAT:4,GUARD:5,CREDITS:6,MENU:7,ELEMENT_NEUTRAL:8,ELEMENT_HEAT:9,ELEMENT_COLD:10,ELEMENT_SHOCK:11,ELEMENT_WAVE:12,QUICK_MENU:13,THROWING:14,ELEMENT_LOAD:15,ELEMENT_CHANGE:16,SPECIAL:17,COMBAT_RANK:18,QUEST_SWITCH:19,EXP:20,MENU_CIRCUIT:21,MENU_SYNOPSIS:22,MENU_SOCIAL:23,MENU_SOCIAL_INVITE:24,MENU_BOTANICS:25,ITEMS:26,MONEY:27,MODIFIER:28};sc.yP=1E3;sc.HQa=99;sc.lQb=16;sc.q$=[0,4,8,12,16];var j=[];j[sc.hl.THROW_NORMAL]=1;j[sc.hl.THROW_NORMAL_REV]=1;j[sc.hl.THROW_NORMAL_CHARGED]=
3;j[sc.hl.THROW_NORMAL_CHARGED_REV]=3;j[sc.hl.ATTACK]=1;j[sc.hl.ATTACK_REV]=1;j[sc.hl.ATTACK_FINISHER]=2;j[sc.hl.THROW_SPECIAL1]=4;j[sc.hl.THROW_SPECIAL2]=6;j[sc.hl.THROW_SPECIAL3]=12;j[sc.hl.ATTACK_SPECIAL1]=4;j[sc.hl.ATTACK_SPECIAL2]=6;j[sc.hl.ATTACK_SPECIAL3]=12;sc.Dxa=ig.Ca.extend({Uo:[],Gp:{},fd:q,Vea:q,sb:{head:-1,Bh:-1,Fh:-1,uh:-1,ph:-1},Rc:[],Fs:[],vt:[],Rv:{},mb:q,pa:q,Ub:{elemFactor:[1,1,1,1]},xy:{},wy:{},W:q,name:q,Ad:q,df:0,aa:1,exp:0,qe:[],Qs:[],IO:[],du:0,W_:2,tv:q,$i:{},$X:0,LN:{level:0,
cp:0,hp:0,attack:0,defense:0,focus:0},sg:0,Hv:0,coa:0,Py:y,kx:0,r3:q,dva:q,f:function(){this.W=new sc.mja;this.DO(2);for(var a in sc.ng)this.Gp[sc.ng[a]]=h;for(var b in sc.ha){this.Qs[sc.ha[b]]=0;this.IO[sc.ha[b]]=0}if(window.Ed){ig.Yh.Lg("chapters","ChapterList","Chapters");ig.Yh.Lg("toggle-sets","ToggleSetsList","Toggle Sets")}this.r3=ig.Yh.get("chapters");this.dva=ig.Yh.get("toggle-sets");ig.ma.Up("item",this,"VarItemEditor");ig.ma.Up("equip",this,"VarEquipEditor");ig.ma.Up("player",this,"VarPlayerEditor");
ig.ma.Up("chapter",this,"VarChapterEditor")},G7:function(a){this.fd&&this.fd.Tc();this.fd=a;this.fd.yGa();this.name=a.name;this.Ad=a.Ad;this.yna&&this.yna.Tc();this.yna=new sc.lI(a.Ad.name,"DEFAULT");this.mb=a.mb;this.pa=a.pa;this.tv=a.tv;this.$i=a.$i;this.pw();sc.P.Ga(this,sc.dd.hja)},wdb:function(a){for(var b=ig.ma.get("plot.line"),c=this.r3.length;c--;)if(b>=this.r3[c].plotline){this.du=c;break}b=sc.Oe.y1a(sc.BI.STORY,sc.Sx.ORDER);for(c=0;c<this.du+1;c++)a?sc.Oe.xia(b[c],y,h,!sc.Oe.uqa(b[c])):
sc.Oe.uqa(b[c])||sc.Oe.xia(b[c],h)},reset:function(){for(var a in sc.ng)this.Gp[sc.ng[a]]=h;for(var b in sc.ha){this.Qs[sc.ha[b]]=0;this.IO[sc.ha[b]]=0}this.aa=1;this.exp=0;this.hCa();this.DO(1);this.W.reset(sc.q$[2]);this.W_=2;for(b in this.sb)this.sb[b]=-1;this.Rc.length=0;this.Fs.length=0;this.vt.length=0;this.Hv=this.sg=this.df=this.qe.length=0;this.Py=y;this.du=0;this.Rv={};this.pw();sc.P.Ga(this,sc.dd.L1)},zOb:function(a){this.coa=this.coa+ig.i.Ir;ig.r.mu&&sc.pa.bc("element","time"+this.sg,
ig.i.gz);if(this.$X){this.$X=this.$X-ig.i.Sa;if(this.$X<0)this.$X=0}var b=0;this.coa>1&&(b=1);a||(b=b*8);!this.Py&&!this.sg&&(b=b*3);this.Py&&(b=b*4);b&&this.Hv>0&&this.Paa(-b*ig.i.Ir);if(this.kx>0){this.kx=sc.Ta.WGa(ig.r.cb)?this.kx-ig.i.Ir:this.kx-ig.i.Ir*10;if(this.kx<=0){this.kx=0;sc.P.Ga(this,sc.dd.Nja)}}},Paa:function(a){if(this.Gp[sc.ng.ELEMENT_LOAD]){var b=50*(1+this.W.Ag("OVERHEAT_REDUCTION"));this.Hv=this.Hv+a/b;if(this.Hv<0){this.Py=y;this.Hv=0}else if(this.Hv>=1){this.r0a();this.Hv=1}}},
OKb:function(a){this.Hv=a;if(a<1&&this.Py)this.Py=y;else if(a>=1&&!this.Py){this.r0a();this.Hv=1}},r0a:function(){if(!this.Py){sc.pa.bc("element","overload",1);sc.Ta.yJ(ig.r.cb,ig.r.cb,sc.QE.OVERLOAD);var a=ig.lang.get("sc.gui.combat.element-overload"),a=new sc.gW(ig.r.cb,a,1);ig.X.vd(a);this.Py=h;this.GK(sc.ha.NEUTRAL,h)}},Sfa:function(a,b,c){this.sg==sc.ha.NEUTRAL&&this.Paa(-(c.t6*c.Ena))},LCb:function(a){if(this.sg!=sc.ha.NEUTRAL)if(a=j[a]){this.Paa(a);this.coa=0}},kG:function(){return this.Ad&&
ig.Ra.ic(this.Ad.data.name)||"???"},Oua:function(a,b,c){for(var d=y,b=b?1:-1,f=3,c=c!=g?c:-1;f--;){if(c==a){this.P5(c);d=h;break}if(this.qe[a+b]){this.qe[a+b]=q;this.qe[a]=sc.xo.qe[a];ig.debug("SWITCH SKILL: "+a);d=h}a=a+2}sc.pa.bc("player","branches",1);this.pw();d&&sc.P.Ga(this,sc.dd.m$)},P5:function(a,b){if(!b){var c=sc.xo.Ky(a);ig.debug("LEARN SKILL: "+a+" ["+c.HU+"]");window.Ri&&sc.pL.PRb(a);var d=c.element,c=c.jN();if(c!=g&&d!=g){this.Qs[d]=this.Qs[d]-c;sc.pa.bc("player","skillPoints",c);sc.pa.bc("player",
"skillPoints"+d,c);this.Qs[d]<0&&e(Error("Skillpoints can never be below zero!"))}}this.qe[a]=sc.xo.qe[a];sc.pa.bc("player","skills",1);this.qe[a].R_?sc.pa.bc("player","skillsActive",1):sc.pa.bc("player","skillsPassive",1);this.pw();sc.P.Ga(this,sc.dd.PL,a)},gOb:function(a){a!=g&&(this.qe[a]=q);sc.P.Ga(this,sc.dd.PL)},ee:function(a){return this.qe[a]},Oda:function(a){a=sc.xo.Ky(a);return this.Qs[a.element]-a.jN()>=0},oCb:function(a,b){return this.Qs[b]-a>=0},PW:function(a,b,c,d){if(c)for(b=this.Qs.length;b--;){this.Qs[b]=
Math.min(this.Qs[b]+a,200);d&&(this.IO[b]=(this.IO[b]||0)+a)}else{this.Qs[b]=Math.min(this.Qs[b]+a,200);d&&(this.IO[b]=(this.IO[b]||0)+a)}sc.P.Ga(this,sc.dd.aQa)},fE:function(a){if(!(a==g||a<0)){for(var b=q,c=this.qe.length;c--;)(b=this.qe[c])&&b.element==a&&(this.qe[c]=q);this.Qs[a]=this.p2a(a);this.pw();sc.P.Ga(this,sc.dd.PL)}},DO:function(a){if(!(a<0||a>=sc.q$.length)){this.W_=a;this.W.nMa(sc.q$[a])}},sA:function(b,c,d,f){if(!(b<0)){this.Rc[b]=this.Rc[b]?Math.min(this.Rc[b]+(c|0),99):c|0;this.pqb(b);
sc.pa.bc("items","total",c);sc.pa.bc("items",b,c);a.id=b;a.zc=c;a.Nq=d;a.Kwb=f;sc.P.Ga(this,sc.dd.Pja,a)}},eNb:function(){sc.P.Ga(this,sc.dd.nRa)},j0a:function(a){sc.P.Ga(this,sc.dd.mRa,a)},UOa:function(a){if(!(a<0)){if(this.Rc[a]){this.kx=sc.mib;this.Rc[a]=this.Rc[a]-1;if(this.Rc[a]<=0){this.fZ(a)&&this.LOa(a);this.YWa(a)}sc.pa.bc("items","used",1);sc.pa.bc("items","used-"+a,1);sc.pa.Ni("items","usedTotal",this.wFa(h));sc.P.Ga(this,sc.dd.A9,a);return h}return y}},wFa:function(a){for(var b=this.Rc.length,
c=0,d=0;b--;){var f=sc.yb.getItem(b);if(!f.noTrack&&f.type==sc.kh.CONS){sc.pa.Qf("items","used-"+b)>=1&&c++;d++}}return a?c/d:c},removeItem:function(b,c,d,f){if(!(b<0||c<=0)){if(f&&this.Rc[b]<c&&sc.yb.getItem(b).type==sc.kh.EQUIP){if(c-this.Rc[b]>=2){b==this.sb.Bh&&this.mz(sc.cd.RIGHT_ARM,-1E3);b==this.sb.Fh&&this.mz(sc.cd.LEFT_ARM,-1E3)}else b==this.sb.Fh?this.mz(sc.cd.RIGHT_ARM,-1E3):b==this.sb.Bh&&this.mz(sc.cd.LEFT_ARM,-1E3);b==this.sb.head&&this.mz(sc.cd.HEAD,-1E3);b==this.sb.uh&&this.mz(sc.cd.TORSO,
-1E3);b==this.sb.ph&&this.mz(sc.cd.FEET,-1E3)}if(this.Rc[b]){c=Math.min(this.Rc[b],c);this.Rc[b]=this.Rc[b]-c;if(this.Rc[b]<=0){this.YWa(b);this.fZ(b)&&this.LOa(b);if(this.Rv[b]&&this.Rv[b].state){this.Rv[b].state=y;sc.P.Ga(this,sc.dd.u1)}}a.id=b;a.zc=c;d||sc.P.Ga(this,sc.dd.Owa,a);return h}return y}},Dr:function(a){if(!(a<0))return this.Rc[a]||0},wq:function(a){return this.Dr(a)>0},OJ:function(a){if(!(a<0)){var b=this.Rc[a]||0,c=sc.yb.getItem(a);if(c.type==sc.kh.EQUIP){var d=-1,f=-1;switch(c.equipType){case sc.Ng.HEAD:d=
this.sb.head;break;case sc.Ng.ARM:d=this.sb.Bh;f=this.sb.Fh;break;case sc.Ng.TORSO:d=this.sb.uh;break;case sc.Ng.FEET:d=this.sb.ph}d>=0&&d==a&&b++;f>=0&&f==a&&b++}return b}},ONb:function(a,b){var c=sc.yb.getItem(a);if(c&&c.type==sc.kh.TOGGLE){this.Rv[a]||(this.Rv[a]={state:y});this.Rv[a].state=!this.Rv[a].state}if(b&&b.type==sc.Lka.SINGLE)for(var c=b.items,d=c.length;d--;)c[d]!=a&&this.Ryb(c[d],y);sc.P.Ga(this,sc.dd.u1);ig.r.Yj();return this.Rv[a].state},Ryb:function(a,b){this.Rv[a]||(this.Rv[a]=
{state:y});this.Rv[a].state=b},PJ:function(a){var b=sc.yb.getItem(a);if(b&&b.type==sc.kh.TOGGLE)return this.Rv[a]?this.Rv[a].state:y;e(Error("Item ist not toggle type: "+a+" ( Type Found: "+b.type+")"))},$Bb:function(a){for(var a=a.items,b=a.length;b--;)if(this.Rc[a[b]]>=1)return h;return y},l3a:function(){for(var a=this.Rc.length;a--;)if(this.Rc[a]&&sc.yb.getItem(a).type==sc.kh.TOGGLE)return h;return y},iFa:function(a,b,c){if(!a)return[];for(var d=[],f=this.Rc.length,i=q;f--;)if(this.Rc[f])(i=sc.yb.getItem(f))&&
i.type==a&&d.push(f);b!=g&&this.ybb(d,b,c);return d},YTb:M("vt"),pY:function(a,b,c){if(!a)return[];var d=[],f=this.Rc.length,i=q,j=-10,r=-10;if(b)switch(a){case sc.Ng.ARM:j=this.sb.Bh;r=this.sb.Fh;break;case sc.Ng.HEAD:j=this.sb.head;break;case sc.Ng.TORSO:j=this.sb.uh;break;case sc.Ng.FEET:j=this.sb.ph}for(;f--;){if(b){if(f!=j&&f!=r&&!this.Rc[f])continue}else if(!this.Rc[f])continue;(i=sc.yb.getItem(f))&&(i.type==sc.kh.EQUIP&&i.equipType==a)&&d.push(f)}c!=g&&this.ybb(d,c);return d},ybb:function(a,
b,c){switch(b){case sc.Of.ORDER:c?a.sort(this.jtb.bind(this)):a.sort(this.Cla.bind(this));break;case sc.Of.NAME:a.sort(this.itb.bind(this));break;case sc.Of.AMOUNT:a.sort(this.ftb.bind(this));break;case sc.Of.RARITY:a.sort(this.ktb.bind(this));break;case sc.Of.LEVEL:a.sort(this.htb.bind(this));break;case sc.Of.HP:this.Dla(a,"hp");break;case sc.Of.ATTACK:this.Dla(a,"attack");break;case sc.Of.DEFENSE:this.Dla(a,"defense");break;case sc.Of.FOCUS:this.Dla(a,"focus")}},pqb:function(a){for(var b=this.vt.length;b--;)if(this.vt[b]==
a){this.vt.splice(b,1);break}this.vt.splice(0,0,a);if(this.vt.length>=22)this.vt.length=22},YWa:function(a){for(var b=this.vt.length;b--;)if(this.vt[b]==a){this.vt.splice(b,1);break}},jtb:function(a,d){var f=sc.yb;b=f.getItem(a).order||0;c=f.getItem(d).order||0;this.fZ(a)&&(b=b-1E6);this.fZ(d)&&(c=c-1E6);return b-c},Cla:function(a,b){var c=sc.yb;return(c.getItem(a).order||0)-(c.getItem(b).order||0)},itb:function(a,d){var f=sc.yb;b=ig.Ra.ic(f.getItem(a).name);c=ig.Ra.ic(f.getItem(d).name);return b<
c?-1:b>c?1:0},ftb:function(a,b){var c=sc.yb;return this.Rc[a]==this.Rc[b]?(c.getItem(a).order||0)-(c.getItem(b).order||0):(this.Rc[a]||0)-(this.Rc[b]||0)},ktb:function(a,d){var f=sc.yb;b=f.getItem(a);c=f.getItem(d);return b.rarity==c.rarity?(b.order||0)-(c.order||0):(b.rarity||0)-(c.rarity||0)},htb:function(a,d){var f=sc.yb;b=f.getItem(a);c=f.getItem(d);return b.level==c.level?(b.order||0)-(c.order||0):(c.level||0)-(b.level||0)},Dla:function(a,i){a.sort(function(a,j){var k=sc.yb;b=k.getItem(a);c=
k.getItem(j);if(!b.params)return-1;if(!c.params)return 1;if(!c.params||!c.params)return 0;d=b.params||{};f=c.params||{};return f[i]==d[i]?(c.order||0)-(b.order||0):(f[i]||0)-(d[i]||0)}.bind(this))},$ub:function(){return this.Fs.length<12},fZ:function(a){for(var b=this.Fs.length;b--;)if(this.Fs[b]==a)return h;return y},LOa:function(a){for(var b=this.Fs.length;b--;)if(this.Fs[b]==a){this.Fs.splice(b,1);this.Fs.sort(this.Cla.bind(this));sc.P.Ga(this,sc.dd.Nwa);return y}this.Fs.push(a);this.Fs.sort(this.Cla.bind(this));
sc.P.Ga(this,sc.dd.Nwa);return h},mz:function(b,c){var d=sc.dF.sb(this.sb,b,c);if(c==d)return y;this.pw();if(c>0){this.Rc[c]--;this.Rc[c]<0&&(this.Rc[c]=q);a.id=c;a.zc=-1;sc.P.Ga(this,sc.dd.pRa,a)}if(d&&d>0){this.Rc[d]?this.Rc[d]++:this.Rc[d]=1;a.id=d;a.zc=1;sc.P.Ga(this,sc.dd.pRa,a)}a.J8=c<0;a.Iv=c;sc.P.Ga(this,sc.dd.uja,a);return h},J4a:function(a){for(var b in this.sb)if(this.sb[b]!=-1&&this.sb[b]==a)return h;return y},w1a:function(){var a=sc.yb.mN(this.sb.head),a=a+sc.yb.mN(this.sb.Bh),a=a+sc.yb.mN(this.sb.Fh),
a=a+sc.yb.mN(this.sb.uh),a=a+sc.yb.mN(this.sb.ph);return a/5},EKb:function(a,b){this.Gp[a]=b;sc.P.Ga(this,sc.dd.ZPa)},FKb:function(a){for(var b in sc.ng)this.Gp[sc.ng[b]]=a?h:y},ki:function(a){return this.Gp[a]},C1a:function(){return sc.q.pqa()?10:0},xG:function(a){switch(a){case sc.ha.NEUTRAL:return this.Gp[sc.ng.ELEMENT_NEUTRAL];case sc.ha.HEAT:return this.Gp[sc.ng.ELEMENT_HEAT];case sc.ha.COLD:return this.Gp[sc.ng.ELEMENT_COLD];case sc.ha.SHOCK:return this.Gp[sc.ng.ELEMENT_SHOCK];case sc.ha.WAVE:return this.Gp[sc.ng.ELEMENT_WAVE]}return y},
GH:function(a){this.aa=a;this.pw();this.fE(sc.ha.NEUTRAL);this.fE(sc.ha.HEAT);this.fE(sc.ha.COLD);this.fE(sc.ha.SHOCK);this.fE(sc.ha.WAVE);sc.P.Ga(this,sc.dd.DL,q)},MW:function(a,b,c,d,f){if(this.ki(sc.ng.EXP)){var i=sc.sa.MW(a,b,c,d,f);if(!(this.aa>=99)){var j=0,a=a*i,j=d?sc.dF.Wma(a,this.aa,b,g,g,f):sc.dF.Wma(a,this.aa,b,1+this.W.Ag("XP_PLUS"),this.W.Ag("XP_ZERO"),f),j=j+(c||0);if(j==0)return 0;this.exp=this.exp+j;sc.pa.bc("player","exp",j);if(this.exp>=1E3){a=Math.floor(this.exp/1E3);this.aa=this.aa+
a;sc.pa.Ni("player","level",this.aa);this.PW(a,q,h);this.exp=this.aa>=99?0:this.exp%1E3;b=ig.copy(this.Ub);this.pw();this.Paa(-1E3);for(var r in b)b[r]=this.Ub[r]-b[r];b.level=a;b.cp=a;for(r in b)this.LN[r]=this.LN[r]+b[r];sc.P.Ga(this,sc.dd.DL,b)}sc.P.Ga(this,sc.dd.vV,j);return j}}},Rla:function(a,b,c){if(this.ki(sc.ng.CREDITS)){c&&(a=Math.round(a*(1+this.W.Ag("MONEY_PLUS"))));this.df=this.df+a;if(this.df>=9999999)this.df=9999999;sc.pa.bc("player","money",a);sc.pa.bc("player","moneyHold",this.df);
sc.P.Ga(this,sc.dd.kja,a)}},kLa:function(a,b){this.df=Math.max(this.df-a,0);b||sc.P.Ga(this,sc.dd.kja,-a)},sFa:function(a,b,c){return sc.dF.Wma(a,this.aa,b,g,g,c)},pta:function(){this.W.tO(1)},GK:function(a,b,c){if(!b&&!this.Gp[sc.ng.ELEMENT_CHANGE]||!b&&!this.xG(a))return y;if(!c&&ig.r.cb&&this.sg!=a)ig.r.cb.qcb=h;this.sg=a;sc.pa.bc("element","used"+a,1);this.W.E7(this.$i[a].Ub);this.W.xha(this.$i[this.sg].So);sc.P.Ga(this,sc.dd.wP);return h},ZJb:function(a,b,c){if(!b&&!this.Gp[sc.ng.ELEMENT_CHANGE]||
this.$X)return y;for(var d=i.indexOf(this.sg)+a;d>=0&&d<=i.length;){var f=i[d];if(this.xG(f)){this.$X=0;return this.GK(f,b,c)}d=d+a}return y},H1a:function(){return this.$i[this.sg]},SEa:function(a,b){return this.$i[a].XAb(b)},TEa:function(a){return this.$i[this.sg].n1a(a)},dzb:function(a,b){return this.$i[a].xs(b)},xs:function(a){return this.$i[this.sg].xs(a)||this.tv.xs(a)},bzb:function(a,b){return this.$i[a].xs(b)||this.tv.xs(b)},Soa:function(){return this.fd.ro},$Tb:N("DEFAULT"),pw:function(){if(this.$i[sc.ha.NEUTRAL]){sc.dF.YZa(this.Ub,
this.pa,this.aa);this.xy=ig.copy(this.Ub);this.wy={};sc.dF.Idb(this.sb,this.xy,this.wy);for(var a in sc.ha)this.$i[sc.ha[a]].wKa();for(var b=0;b<this.qe.length;b++)this.qe[b]&&this.qe[b].cX(this.$i);this.tv.update(this.xy,this.wy);for(a in sc.ha)this.$i[sc.ha[a]].update(this.xy,this.wy);this.W.E7(this.$i[this.sg].Ub);this.W.xha(this.$i[this.sg].So);sc.P.Ga(this,sc.dd.bs)}},O4:function(a,b){for(var c=0,d=this.qe.length;d--;)this.qe[d]&&this.qe[d].O4&&(c=Math.max(c,this.qe[d].O4(a,b)));return c},oUb:function(a){var b=
g,c=0,d;for(d in sc.ha){var f=sc.ha[d],i=this.O4(a,f);if(i>c){c=i;b=f}}return b},Nda:function(){return this.LN.level>0},hCa:function(){for(var a in this.LN)this.LN[a]=0},bm:function(a,b){if(b[0]=="item"){var c=b[1];if(b[2]=="amount")return this.Rc[c]||0;if(b[2]=="name")return sc.yb.pda(c);if(b[2]=="toggled")return this.PJ(c);if(b[2]=="amountEquipped")return this.OJ(c)}else if(b[0]=="equip")switch(b[1]){case "head":return this.sb.head;case "feet":return this.sb.ph;case "leftArm":return this.sb.Bh;
case "rightArm":return this.sb.Fh;case "torso":return this.sb.uh}else if(b[0]=="player")switch(b[1]){case "money":return this.df+"";case "level":return this.aa+"";case "hasLevelUp":return this.Nda();case "exp":return this.exp+"";case "element":return this.sg+"";case "hasElement":return this.xG(b[2]*1);case "elementLoad":return this.Hv+"";case "param":return this.W.Td(b[2])+"";case "paramAvg":return(this.W.Td("attack")+this.W.Td("defense")+this.W.Td("focus"))/3+"";case "paramElementFactor":return this.W.Td("elemFactor")[b[2]]+
"";case "modifier":return this.W.Ag(b[2])+"";case "hp":return this.W.Sc+"";case "sp":return this.W.nm+"";case "maxSp":return this.W.Qo+"";case "core":return this.ki(b[2]);case "artLevel":return this.O4(b[2]);case "itemsUsed":return this.wFa(h);case "hasAnyToggleItems":return this.l3a()}else if(b[0]=="chapter")switch(b[1]){case "current":return this.du;case "name":return this.r3[b[2]]?ig.Ra.ic(this.r3[b[2]].name):"No Title"}e(Error("Unsupported var access path: "+a))},VOb:function(){for(var a=0;a<
this.Qs.length;++a)if(this.Qs[a]<this.p2a(a))return h;return y},p2a:function(a){var b=this.aa-1;return b=b+(this.IO[a]||0)},oD:function(){var a={};a.playerConfig=this.fd.name;a.credit=this.df;a.level=this.aa;a.exp=this.exp;a.currentElementMode=this.sg;a.elementLoad=this.Hv;a.hasOverload=this.Py;a.hp=this.W.Sc;a.core=ig.copy(this.Gp);a.skills=[];a.chapter=this.du||0;for(var b=0;b<this.qe.length;++b)this.qe[b]&&(a.skills[b]=h);a.skillPoints=ig.copy(this.Qs);a.skillPointsExtra=ig.copy(this.IO);a.items=
ig.copy(this.Rc);a.equip={head:this.sb.head,leftArm:this.sb.Bh,rightArm:this.sb.Fh,torso:this.sb.uh,feet:this.sb.ph};a.levelUpDelta=ig.copy(this.LN);a.spLevel=this.W_;a.itemFavs=ig.copy(this.Fs);a.itemNew=ig.copy(this.vt);a.itemToggles=ig.copy(this.Rv);a.skillVersion=sc.xo.version;return a},WHb:function(a){this.hCa();this.Fs=a.itemFavs||[];this.vt=a.itemNew||[];this.Rv=a.itemToggles||{};for(var b=this.Fs.length;b--;){var c=this.Fs[b];if(this.Rc[c]<=0||!sc.yb.rDb(c)){this.Fs.length=0;break}}this.df=
Math.round(a.credit||0);this.aa=a.level||1;this.exp=a.exp||0;this.du=a.chapter||0;this.sg=a.currentElementMode||0;this.Hv=a.elementLoad||0;this.Py=a.hasOverload||y;this.W.reset();this.W.Sc=a.hp||1;this.Gp=a.core;if(this.kx){this.kx=0;sc.P.Ga(this,sc.dd.Nja)}if(a.levelUpDelta)for(var d in this.LN)this.LN[d]=a.levelUpDelta[d]||0;for(var f in sc.ng){d=sc.ng[f];this.Gp[d]==g&&(this.Gp[d]=h)}for(b=this.qe.length=0;b<a.skills.length;++b)a.skills[b]&&(this.qe[b]=sc.xo.qe[b]);this.Qs=ig.copy(a.skillPoints);
this.IO=ig.copy(a.skillPointsExtra)||[0,0,0,0];this.Rc=ig.copy(a.items);if(a.equip.leftArm===g){ig.log("Apply fix for outdated equipment structure");for(d in a.equip)a.equip[d]!=-1&&a.equip[d]!==g&&this.Rc[a.equip[d]]++;this.sb.head=this.sb.ph=this.sb.Bh=this.sb.Fh=this.sb.uh=-1}else{this.sb.head=a.equip.head;this.sb.ph=a.equip.feet;this.sb.Bh=a.equip.leftArm;this.sb.Fh=a.equip.rightArm;this.sb.uh=a.equip.torso}if(this.xba(this.sb.head))this.sb.head=-1;if(this.xba(this.sb.ph))this.sb.ph=-1;if(this.xba(this.sb.Bh))this.sb.Bh=
-1;if(this.xba(this.sb.Fh))this.sb.Fh=-1;if(this.xba(this.sb.uh))this.sb.uh=-1;this.DO(a.spLevel||0);this.pw();this.wdb(h);if(a.playerConfig)this.Vea=new sc.VV(a.playerConfig);this.W.Sc=Math.min(this.W.Sc,this.W.Td("hp"));if(a.skillVersion!=sc.xo.version&&this.VOb()){this.fE(sc.ha.NEUTRAL);this.fE(sc.ha.HEAT);this.fE(sc.ha.COLD);this.fE(sc.ha.SHOCK);this.fE(sc.ha.WAVE);ig.r.cBa(ig.lang.get("sc.gui.loading.skillUpdate"))}for(b=this.vt.length;b--;)this.Rc[this.vt[b]]<=0&&!this.J4a(this.vt[b])&&this.vt.splice(b,
1);sc.pa.Ni("items","usedTotal",this.wFa(h));sc.P.Ga(this,sc.dd.k$)},xba:function(a){if(a<0)return y;if(sc.yb.getItem(a).type!=sc.kh.EQUIP){this.Rc[a]++;return h}return y},UHb:function(){if(this.Vea){this.G7(this.Vea);this.Vea.Tc();this.Vea=q}}})});ig.J=h;
ig.N("game.feature.msg.message-model").O("impact.base.game","impact.feature.storage.storage","game.feature.model.base-model","impact.feature.interact.interact","impact.feature.interact.button-interact").K(function(){var a=new ig.$s;sc.TRa=ig.Uf.extend({Uo:[],QB:[],NK:[],jua:[],VMa:y,g4:0,Gl:{},j8:[],jy:y,lna:q,R5a:q,Bp:y,loaded:y,Kf:q,vx:0,f3:y,hX:q,rB:y,BBa:0,f:function(){this.parent("MessageModel");ig.zd.Lg(this);this.Kf=new sc.Xx(this);ig.ma.Up("msg",this,"VarMsgEditor")},HG:M("jy"),FM:function(){ig.La.$e(this.Kf);
this.jy=y},eHb:function(){if(this.vx==1)this.vx=2;this.FM()},$9a:function(a){this.vx=1;if(!ig.i.Un){this.jy=h;ig.La.De(this.Kf);ig.La.Md(0.1)}sc.P.Ga(this,sc.cf.Qxa,a)},a5a:function(){return this.vx==2||this.vx==1},ODb:function(){return this.vx==3},Ubb:function(){if(this.vx!=3){this.zba();this.vx=3;this.jy=h;sc.P.Ga(this,sc.cf.qTa)}},k0a:function(a){if(this.vx!=0){var c=h;if(this.vx==3){c=y;this.zba();this.GM()}this.vx=0;this.jy=h;sc.P.Ga(this,c?sc.cf.oQa:sc.cf.wQa,a)}},bab:function(b){if(this.rB!=
b){(this.rB=b)?ig.La.De(a):ig.La.$e(a);sc.P.Ga(this,sc.cf.IRa,this.rB);sc.q.YK()}},y$a:function(a){if(a!=this.BBa){this.BBa=a;sc.P.Ga(this,sc.cf.APa,a)}},eVb:M("rB"),HO:function(a,c,d){this.hX||this.GM();this.SUa(a);this.jy=h;this.Bp=d;ig.La.De(this.Kf);ig.La.Md(0.1);sc.P.Ga(this,sc.cf.mxa,{name:a,text:c});if(a=this.Gl[a]){sc.$Oa.play(a.Me,c);this.fbb(a.Me,c,h)}},oMb:function(a,c,d){this.hX||this.GM();this.jy=h;this.Bp=d;ig.La.De(this.Kf);ig.La.Md(0.1);sc.P.Ga(this,sc.cf.mxa,{name:q,text:c,left:a})},
$Lb:function(a,c,d,f){sc.q.nCa();!this.f3&&!d&&this.BNa();this.jy=h;ig.La.De(this.Kf);ig.La.Md(0.1);this.f3=h;this.hX=d;this.Bp=f;sc.P.Ga(this,sc.cf.YRa,{text:a,mq:c,mn:d})},tUb:M("f3"),bMb:function(a,c,d,f){this.hX||this.GM();if(ig.Ae)for(var i=c.length;i--;)ig.Ae.yE("Choice "+i,c[i].label);this.SUa(a);this.jy=h;this.lna=c;sc.q.YK();sc.P.Ga(this,sc.cf.$Sa,{name:a,options:c,nh:d,Vca:f})},tWa:function(){return sc.q.LS()||sc.dc.iq||sc.dc.E3a()||!sc.q.Qv()&&!sc.q.oe()&&sc.q.T.Nda()},fbb:function(a,c,
d){a={Me:a.clone(),message:ig.Ra.ema(c),bfa:d||y};!d&&this.tWa()?this.jua.push(a):this.vXa(a)},vXa:function(a){this.VMa||this.Cba();this.VMa=h;this.NK.push(a);a.bfa?this.s2a():sc.P.Ga(this,sc.cf.nxa)},dKb:function(a){this.R5a=a;this.lna=q;this.FM()},Cba:function(){for(this.uIb=this.NK.length;this.NK.length>0;){var a=this.NK.shift();this.QB.push(a)}for(;this.QB.length>50;)this.QB.shift().Me.Tc();sc.P.Ga(this,sc.cf.SPa)},kYa:function(a,c,d,f){this.hX||this.GM();var i=a.Ad.name;if(this.Gl[i]){this.Gl[i].mn=
c;this.Gl[i].Li=d;this.Gl[i].Me=a;this.Gl[i].Zi=f||q;sc.P.Ga(this,sc.cf.rSa,i)}else{this.Gl[i]={Me:a,mn:c,Li:d,Zi:f||q};sc.P.Ga(this,sc.cf.qSa,i)}},setExpression:function(a,c){if(this.Gl[a]){this.Gl[a].Me=c;sc.P.Ga(this,sc.cf.GQa,a)}},fJb:function(a){this.hX||this.GM();if(this.Gl[a]){delete this.Gl[a];sc.P.Ga(this,sc.cf.sSa,a)}},jR:function(a){for(var c in this.Gl)(!a||this.Gl[c].mn==a)&&delete this.Gl[c];a==sc.N9.ALL&&this.GM();sc.P.Ga(this,sc.cf.RPa,a)},zba:function(){this.jR(sc.N9.ALL)},GM:function(){if(this.f3){this.f3=
y;this.hX=q;sc.P.Ga(this,sc.cf.TPa,q);this.RMa()}},csa:function(a){this.zba();this.GM();ig.La.Md(0.3);this.vx&&this.k0a(a)},BNa:function(){this.j8.length=0;for(var a in this.Gl){var c=this.Gl[a];this.j8.push({Me:c.Me,mn:c.mn,Li:c.Li,Zi:c.Zi})}this.zba()},RMa:function(){if(this.j8.length!=0){this.zba();for(var a=0;a<this.j8.length;++a){var c=this.j8[a];this.kYa(c.Me,c.mn,c.Li,c.Zi)}this.j8.length=0}},Npa:function(){for(var a in this.Gl)return h;return y},clear:function(){this.csa(h);for(var a=this.QB.length;a--;)this.QB[a].Me.Tc();
this.QB=[];this.Cba()},NEa:function(a){return this.Gl[a]?this.Gl[a].Me:q},ATb:function(a){return this.Gl[a]?this.Gl[a].Me.Ad:q},getExpression:function(a){return this.Gl[a]?this.Gl[a].Me.IJ:q},jS:function(a){return this.Gl[a]?this.Gl[a].mn:0},qFa:function(a){return this.Gl[a]?this.Gl[a].Li:0},S1a:function(a){return this.Gl[a]?this.Gl[a].Zi:q},s2a:function(){var a=this.NK.shift();this.QB.push(a);this.QB.length>50&&this.QB.shift().Me.Tc();return a},F3a:function(){return this.NK.length>0},i5a:function(){return this.g4>
0},Km:function(){if(this.vx==1){this.vx=2;this.FM()}else sc.P.Ga(this,sc.cf.KRa,q)},Ms:function(){sc.q.message.Cba()},qx:function(){if(this.loaded){sc.P.Ga(this,sc.cf.aTa);this.loaded=y}},fj:function(){this.lna=q;this.clear();this.y$a(0)},fH:function(){if(this.jua.length>0&&!this.tWa())for(;this.jua.length>0;){var a=this.jua.shift();this.vXa(a)}this.VMa=y},Fu:function(a){var c={};c.sideMessages=this.aVa(this.QB);c.sideMessageStack=this.aVa(this.NK);c.displayedSideMessages=this.g4;a.message=c},aVa:function(a){for(var c=
[],d=0;d<a.length;++d){var f=a[d];c.push({"char":f.Me.Ad.name,expression:f.Me.IJ,message:f.message?f.message.data||f.message:"",main:f.bfa})}return c},Bt:function(a){this.loaded=h;a=a.message;this.QB=this.ZUa(a.sideMessages||[]);this.NK=this.ZUa(a.sideMessageStack||[]);this.g4=a.displayedSideMessages},ZUa:function(a){for(var c=[],d=0;d<a.length;++d){var f=a[d];if(f["char"]){var i=f.message;i&&typeof i!=="string"&&(i=new ig.Ra(i));c.push({Me:new sc.lI(f["char"],f.expression),message:i,bfa:f.main||
y})}}return c},u3a:function(){return!!this.lna},SUa:function(a){this.Gl[[a]]||e(Error("Character of name '"+a+'" is currently not in conversation!'))},bm:function(a,c){if(c[0]=="msg"){var d=c[1];return d=="hasSideMsg"?this.F3a():d=="stackCount"?this.NK.length:d=="recentlyClearedSideMsg"?this.uIb:q}}});sc.cf={};sc.cf.qSa=0;sc.cf.sSa=1;sc.cf.rSa=2;sc.cf.GQa=3;sc.cf.mxa=4;sc.cf.nxa=5;sc.cf.RPa=6;sc.cf.SPa=7;sc.cf.$Sa=8;sc.cf.aTa=9;sc.cf.KRa=10;sc.cf.Qxa=11;sc.cf.qTa=12;sc.cf.wQa=13;sc.cf.oQa=14;sc.cf.YRa=
15;sc.cf.TPa=16;sc.cf.IRa=17;sc.cf.APa=18;sc.Zz={RIGHT:1,LEFT:2};sc.N9={RIGHT:1,LEFT:2,ALL:0};ig.Vf(function(){return sc.message=new sc.TRa})});ig.J=h;
ig.N("game.feature.menu.area-loadable").O("impact.base.game","impact.base.loader").K(function(){function a(b,d,f,i,j){if(i<0||f<0||i>=d.length||f>=d[0].length?0:d[i][f]==j){d[i][f]=d[i][f]+1E4;b.min.x=Math.min(b.min.x,f);b.min.y=Math.min(b.min.y,i);b.max.x=Math.max(b.max.x,f);b.max.y=Math.max(b.max.y,i);a(b,d,f-1,i,j);a(b,d,f+1,i,j);a(b,d,f,i-1,j);a(b,d,f,i+1,j)}}sc.T8={S8:1};sc.pPa={arrow_up:{index:0,R6:6},arrow_down:{index:1,R6:-5},floor_down:{index:4,R6:-5},arrow_left:{index:2,R6:-2},arrow_right:{index:3,
R6:-2},shop:{index:14},trader:{index:15},pub:{index:3},weapons:{index:5},quest:{index:6},quest_hub:{index:16},entrance:{index:7},chest:{index:8},area_up:{index:10,R6:6,type:sc.T8.S8,t:{Lb:{c:"Select",d:"Area this leads to",U:"areas"},map:{c:"Maps",d:"The map this points to"},offset:{c:"Vec2",d:"optional offset",I:h}}},area_down:{index:11,R6:-6,type:sc.T8.S8,t:{Lb:{c:"Select",d:"Area this leads to",U:"areas"},map:{c:"Maps",d:"The map this points to"},offset:{c:"Vec2",d:"optional offset",I:h}}},area_left:{index:12,
MHb:6,type:sc.T8.S8,t:{Lb:{c:"Select",d:"Area this leads to",U:"areas"},map:{c:"Maps",d:"The map this points to"},offset:{c:"Vec2",d:"optional offset",I:h}}},area_right:{index:13,MHb:-6,type:sc.T8.S8,t:{Lb:{c:"Select",d:"Area this leads to",U:"areas"},map:{c:"Maps",d:"The map this points to"},offset:{c:"Vec2",d:"optional offset",I:h}}}};sc.Leb={VERTICAL:{first:{x:304,y:416,Vc:8,sd:2,J6:0,K6:6,Oia:4,Hda:2},Ur:{x:304,y:418,Vc:8,sd:3,J6:0,K6:8,Oia:4,Hda:3},step:{x:4,y:0,P0:8,Q0:0}},HORIZONTAL:{first:{x:296,
y:416,Vc:3,sd:8,J6:5,K6:0,Oia:3,Hda:4},Ur:{x:299,y:416,Vc:2,sd:8,J6:8,K6:0,Oia:2,Hda:4},step:{x:0,y:4,P0:0,Q0:8}}};sc.Reb=ig.Ca.extend({Pz:0,Oz:0,min:{x:0,y:0},max:{x:0,y:0},offset:{x:0,y:0},name:"default_empty",text:"???",id:1,f:function(b,d,f,i,j){this.name=b.path||"default_empty";this.text=b.name?ig.Ra.ic(b.name)||"???":"???";this.id=d||1;this.offset.x=b.offset?b.offset.x:0;this.offset.y=b.offset?b.offset.y:0;this.min.x=this.max.x=f||0;this.min.y=this.max.y=i||0;this.Pz=b.zMin;this.Oz=b.zMax;a(this,
j,f,i,this.id);this.max.x++;this.max.y++}});var b=[];sc.Sva=ig.LV.extend({Wi:"AreaMap",data:q,Yqa:0,f:function(a){this.parent(a)},wu:function(a){$.ajax({dataType:"json",url:ig.root+a.vm("data/areas/",".json")+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(){this.data=q;this.Xl(y)},onload:function(a){this.data=a;this.lza();this.Xl(h)},lza:function(){for(var a=this.data.floors,d=q,f=q,i=[],j=a.length;j--;){f=a[j];if(f.level<this.Yqa)this.Yqa=f.level;
b.length=0;i=[];if((d=f.tiles)&&d[0][0]!=g){for(var k=0;k<d.length;k++)for(var l=0;l<d[k].length;l++){d[k][l]>1E4&&(d[k][l]=d[k][l]-1E4);if(d[k][l]!=0&&!b[d[k][l]]){b[d[k][l]]=1;i.push(new sc.Reb(f.maps[d[k][l]-1],d[k][l],l,k,d));d[k][l]>1E4&&(d[k][l]=d[k][l]-1E4)}}f.rooms=i}else console.error("Tiles must by a two dimensional Array! Tiles: %O",d)}}})});ig.J=h;
ig.N("game.feature.menu.gui.base-menu").O("impact.feature.gui.gui").K(function(){sc.uw=ig.da.extend({visible:y,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.xf=h;this.j("HIDDEN",h)},Oc:J(),Ic:J(),Yd:J(),pl:J(),Gd:J()});sc.U1=sc.uw.extend({Hb:q,$d:q,kb:q,list:q,info:q,yc:q,f:function(a,b){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;if(a){this.list=a;this.list.l(8,29);this.m(this.list);
this.list.j("HIDDEN",h)}if(b){this.info=b;this.info.l(8,29);this.m(this.info);this.info.j("HIDDEN",h)}this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.$d=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.$d.dg=h;this.$d.a.R={DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.$d.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.$d.cc=this.gH.bind(this);this.yc=new sc.hW(this.PZ.bind(this));this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.list&&this.list.Oc&&this.list.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.list&&this.list.Ic&&this.list.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);ig.La.Md(0.2);this.list&&this.list.show();this.info&&this.info.show();this.fn()},pl:function(){this.Ic();
this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.$d);this.list&&this.list.hide();this.info&&this.info.hide();this.kb=q;this.yc.Aa&&this.yc.xk()},rn:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.$d.ga(b+("\\c[3]"+a+"\\c[0]"));sc.e.$u()},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();if(this.kb){ig.X.vd(this.kb);this.kb.Dt&&this.kb.Dt()}},eH:function(){return sc.ba.ON()},gH:function(){if(this.yc.Aa)this.yc.xk();else{ig.X.vd(this.yc);
this.yc.R7(this.$d)}},PZ:function(a){if(a.data){this.yc.xk();sc.e.kw(a)}},ck:J(),fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.$d,this.eH.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:J()})});ig.J=h;
ig.N("game.feature.menu.gui.list-boxes").O("impact.feature.gui.gui","game.feature.menu.gui.menu-misc").K(function(){sc.E9={ONE:1,Gya:2};sc.kV=sc.TL.extend({ua:q,Fl:q,paddingTop:0,LT:0,tCa:0,JBa:0,dYb:y,uEa:y,Z:q,lsa:0,Vb:{x:0,y:0},nh:sc.E9.ONE,Go:0,gM:y,wRb:0,f:function(a,b,c,d,f,i,j){this.parent(sc.Zn.vC);this.Z=j||sc.e.Z;this.Fl=new ig.da;this.ih(this.Fl);this.paddingTop=a||0;this.LT=b||0;this.lsa=c||0;this.nh=d||sc.E9.ONE;this.tCa=this.nh>1?f||0:0;this.JBa=this.nh>1?i||0:0;this.ua=new sc.wh(y,
this.nh>1?ig.tw.fI:ig.tw.dQ);this.Rk(this.Z7a.bind(this))},Lta:function(a){if(a){if(this.ua.wc()){sc.e.Z.sl(this.ua);this.ua.clear();this.ua.Yvb()}this.ua=a;this.ua.Rk(this.Z7a.bind(this))}},Pf:function(a){a?a.hh(this.ua):sc.e.Z.hh(this.ua)},ui:function(a){a?a.sl(this.ua):sc.e.Z.sl(this.ua)},Rk:function(a){a&&this.ua.Rk(a)},ydb:function(){this.qAa(this.hla())},Sd:function(a,b,c,d){var f=this.Fl.a.children.length,i=f%this.nh,j=Math.floor(f/this.nh);a.l(f%this.nh*this.JBa+this.tCa+(c||0),this.hla(f%
this.nh!=0)+this.LT+(d||0));a.H(ig.k.hb,ig.k.$);b||this.ua.jd(a,i,j+this.Vb.y);this.Fl.m(a);this.qAa(this.hla())},ORb:function(a){a.l(0,this.hla(this.Fl.a.children.length%this.nh!=0)+this.LT)},IGa:function(a,b,c,d,f,i){this.Fl.DG(a,b);a.H(ig.k.hb,ig.k.$);var j=b%this.nh,b=Math.floor(b/this.nh);f||this.ua.t4a(a,j,b);this.cXa(c,d,g,i)},PIb:function(a,b,c,d,f){b?this.Fl.PEa(a).j(b,y,h):this.Fl.jLa(a);var b=a%this.nh,i=Math.floor(a/this.nh);f||this.ua.lLa(b,i);this.cXa(c,d,a)},$Eb:function(a,b,c,d,f,
i){if(a!=b){var j=this.Fl.a.children,k=q,l=j[a],m=0;if(a>b)for(m=b;m<a;m++){k=j[m];k.kd(l.g.x,k.g.y+l.size.y,c,d||KEY_SPLINES.EASE,0,h);i&&i(k.X,1)}else if(a<b)for(m=a;m<b;m++){k=j[m];k.kd(l.g.x,k.g.y-l.size.y,c,d||KEY_SPLINES.EASE,0,h);i&&i(k.X,-1)}l.kd(0,j[b].g.y,c,d||KEY_SPLINES.EASE,0,h,function(){var c=this.Fl.jLa(a);this.Fl.DG(c,b)}.bind(this));if(!f){c=a%this.nh;d=Math.floor(a/this.nh);f=this.ua.lLa(c,d);c=b%this.nh;d=Math.floor(b/this.nh);this.ua.t4a(f,c,d)}}},MTb:function(a){if(!a)return-1;
for(var b=this.Fl.a.children,c=b.length,a=a.a;c--;)if(a==b[c])return c;return-1},Ar:function(){return this.Fl.a.children},tY:function(a){if(this.nh>=2){for(var b=this.Fl.a.children,a=Math.min(a+1,b.length),c=0;a--;)c=c+(b[a].size.y+this.LT);return c+this.paddingTop}b=this.Fl.a.children;c=b[a]?b[a].g.y+b[a].size.y:this.paddingTop;this.uEa&&a==b.length-1&&(c=c+200);return c},mBb:function(a){a=this.tY(a);return Math.max(a-(this.Gc.a.size.y+this.Gc.a.scroll.y*-1),0)},vab:function(){var a=this.tY(this.ua.Qa.y-
1)-this.paddingTop;this.BO(a,h,h)},clear:function(a){this.Go=0;this.gM=a||y;this.Fl.rh();this.Fl.a.size.y=0;this.Gc.Hl(0,0,0);this.fw()},FK:function(a,b){this.gM=y;this.Gc.Hl(0,0,0);this.scrollY(a,b)},BO:function(a,b,c){this.gM=y;c||this.Gc.Hl(0,0,0);this.parent(a,b)},update:function(){this.parent();this.Z.wc()&&this.ua.wc()&&(sc.ba.yZ()?this.scrollY(-this.lsa):sc.ba.xZ()&&this.scrollY(this.lsa))},Z7a:function(){var a=this.ua.M1a();if(ig.input.Id)this.Go=-1;else{var b=this.Go;if(b<a){var b=this.tY(a),
c=this.Gc.a.size.y+this.Gc.a.scroll.y*-1,c=Math.max(b-c,0);if(c>0)this.scrollY(c,this.gM);else{c=this.Gc.a.scroll.y*-1;if(b<=c){b=this.tY(a-1)-this.paddingTop;this.scrollY(-(c-b),this.gM)}}}else if(b>a){b=this.tY(a-1)-this.paddingTop;c=this.Gc.a.scroll.y*-1;c=Math.max(c-b,0);if(c>0)this.scrollY(-c,this.gM);else{c=this.Gc.a.size.y+this.Gc.a.scroll.y*-1;b=this.tY(a);c<=b&&this.scrollY(b-c,this.gM)}}this.gM=y;this.Go=a}},cXa:function(a,b,c,d){for(var f=this.Fl.a.children,i=0,j=this.paddingTop,k=q,l=
0;l<f.length;l++)if(!(c!=g&&c==l)){k=f[l];i=l%this.nh*this.JBa+this.tCa;if(a)k.kd(i,j,a,b||KEY_SPLINES.EASE,0,h);else{if(!d)k.g.x=i;k.g.y=j}(l+1)%this.nh==0&&(j=j+(k.size.y+this.LT))}this.qAa(j)},hla:function(a){var b=this.Fl.a.children;if(this.nh>=2){var c=b.length;a&&(c=c-1);for(a=0;c--;){a=a+(b[c].size.y+this.LT);c=c-(this.nh-1);if(c<0)break}return a+this.paddingTop}if(b.length==0)return this.paddingTop;b=b[b.length-1];return a=b.g.y+b.size.y},qAa:function(a){this.Fl.a.size.y=a;this.fw()}});sc.C9=
ig.da.extend({list:q,select:q,Bc:q,Kd:q,f:function(a,b,c){this.parent();this.Kd=new sc.$E;this.Kd.H(ig.k.hb,ig.k.Cb);this.Kd.a.size.x=this.a.size.x;this.list=new sc.kV(a,0,20,g,g,g,c);this.list.H(ig.k.hb,ig.k.Cb);this.list.a.size.x=this.a.size.x;this.m(this.Kd);if(!b){this.Bc=new sc.ea(ig.lang.get("sc.gui.menu.quantity"),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.Bc.H(ig.k.ra,ig.k.$);this.Bc.l(1,0);this.m(this.Bc)}this.m(this.list)},F:function(a,b){this.parent(a,b);this.Kd.a.size.x=this.a.size.x;this.Kd.a.size.y=
this.a.size.y-7;this.list.F(this.a.size.x,this.a.size.y-7)},clear:function(a){this.list.clear(a)},Sd:function(a){this.list.Sd(a)},Ar:function(){return this.list.Ar()}});sc.okb=ig.da.extend({list:q,OLa:[],NKa:[],Kd:q,nh:sc.E9.ONE,f:function(a,b,c,d){this.parent();this.nh=c||sc.E9.ONE;this.Kd=new sc.$E;this.Kd.H(ig.k.hb,ig.k.Cb);this.Kd.a.size.x=this.a.size.x;this.m(this.Kd);for(var f,b=b||0,d=d||0,i=b+d,j=0,k=0;k<this.nh;k++){f=new sc.ea(ig.lang.get("sc.gui.menu.select"),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});
f.l(7+k*i,0);f.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.OLa[k]=f;this.m(f);j=this.nh*i-(k+1)*i;f=new sc.ea(ig.lang.get("sc.gui.menu.quantity"),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});f.H(ig.k.ra,ig.k.$);f.l(j+4,0);f.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:4},time:0.1,p:KEY_SPLINES.LINEAR}};this.NKa[k]=f;this.m(f)}this.list=new sc.kV(a,0,20,c,d,b);this.list.H(ig.k.hb,ig.k.Cb);this.list.a.size.x=
this.a.size.x;this.m(this.list)},Sd:function(a,b){this.list.Sd(a,b)},clear:function(a){this.list.clear(a)},FK:function(a,b){this.list.scrollY(a,b)},zLb:function(a,b){for(var c=this.OLa.length;c--;)this.OLa[c].j(a,b)},mab:function(a,b){for(var c=this.NKa.length;c--;)this.NKa[c].j(a,b)},ua:function(){return this.list.ua},Pf:function(){sc.e.Z.hh(this.list.ua)},ui:function(){sc.e.Z.sl(this.list.ua)},F:function(a,b){this.parent(a,b);this.Kd.a.size.x=this.a.size.x;this.Kd.a.size.y=this.a.size.y-7;this.list.F(this.a.size.x,
this.a.size.y-7)}})});ig.J=h;
ig.N("game.feature.menu.gui.main-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes").K(function(){sc.St=ig.da.extend({gha:h,s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Gx:{},Tq:q,tN:q,X7:q,US:q,U_:q,SN:q,wZ:q,Sk:q,info:q,jr:q,BXb:0,f:function(){this.parent();this.a.zIndex=1200;this.a.xf=h;this.a.size.x=ig.i.width;
this.a.size.y=ig.i.height;this.a.gha=h;sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.e,this);this.j("HIDDEN",h);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(0,0,32,320,ig.nf.Eg.Yn);this.Gx.start=new sc.Gka;var c=new sc.mc("\\i[back]"+ig.lang.get("sc.gui.menu.back"),sc.a1,h,sc.Mc.$c,sc.gd.back);c.dg=h;c.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-sc.a1},time:0.2,p:KEY_SPLINES.LINEAR}};c.H(ig.k.ra,ig.k.$);c.cc=function(){sc.e.jDb()}.bind(this);c.setData(ig.lang.get("sc.gui.menu.description.back"));
this.Sk=c;c=new ig.mf("#000000",this.a.size.x,21);c.H(ig.k.hb,ig.k.$);c.a.R={DEFAULT:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21,alpha:0.5},time:0.2,p:KEY_SPLINES.LINEAR}};c.j("HIDDEN",h);this.Tq=c;c=new sc.St.hpb(this.a.size.x);c.j("HIDDEN",h);this.tN=c;c=new sc.St.Unb;c.H(ig.k.hb,ig.k.$);this.X7=c;this.info=new sc.B9(this.a.size.x,21);this.info.H(ig.k.ra,ig.k.Cb);this.jr=new sc.cwa;this.SN=new sc.$ob;this.US=new sc.St.njb;this.US.H(ig.k.Ia,ig.k.vb);this.US.l(0,101);
this.U_=new sc.St.uob;this.U_.l(a,b);this.wZ=new sc.St.ggb;this.wZ.H(ig.k.hb,ig.k.$);this.m(this.X7);this.m(this.U_);this.m(this.US);this.m(this.Gx.start);this.m(this.Tq);this.m(this.tN);this.m(this.info);this.info.m(this.jr);this.m(this.SN);this.m(this.wZ);this.m(this.Sk);sc.e.NFa=this},update:function(){this.parent()},Da:function(a){a.Qk(this.constructor.oj,0,0,0,0,this.a.size.x,this.a.size.y)},TUa:function(){return sc.ba.Cq()},tsb:function(){sc.q.u0a()},tza:function(){this.Hsb();sc.Ke.N8();this.tN.uy();
if(sc.e.qca&&sc.e.ER){this.LXa(sc.e.ER,0);this.KWa(sc.e.ER,q,h);this.wZ.JKa(sc.e.q2a(sc.e.ER));sc.e.qq=sc.e.ER}else{sc.e.qca=y;this.Gx.start.Yd();this.wZ.JKa(ig.lang.get("sc.gui.menu.menu-titles.start"));this.US.reset();this.US.j("DEFAULT");this.info.Ym(431,21);this.SN.j("DEFAULT");this.X7.j("DEFAULT");this.U_.GO()}sc.e.uy();sc.e.Z.Jd(this.Sk,this.TUa.bind(this));sc.e.rl(this.tsb.bind(this));this.Sk.j("DEFAULT");this.Tq.j("DEFAULT");this.info.j("DEFAULT")},bM:function(){this.Fza(sc.e.qq).Gd();this.Gx.start.Gd();
sc.e.Z.Aba();sc.e.Gd();ig.La.Md(0.2);this.Sk.j("HIDDEN");this.Tq.j("HIDDEN");this.tN.Gd();this.X7.j("HIDDEN");this.info.j("HIDDEN");this.SN.j("HIDDEN");this.U_.eGa();this.US.M3a();this.wZ.vCb()},Hsb:function(){this.jr.ga("");this.info.ga("");this.wZ.reset();this.SN.sOb();this.RWa()},RWa:function(){for(var a in this.Gx)if(a!="start"&&this.Gx[a]){this.yH(this.Gx[a]);this.Gx[a]&&this.Gx[a].Ic();this.Gx[a]=q}this.tN.Mvb()},LXa:function(a,b){this.Pqb(a);var f=this.Fza(b),i=this.Fza(a);if(f!=q){f.pl(i,
a);i.Yd(f,b)}},Pqb:function(a){if(a!=sc.Fc.im&&!this.Gx[sc.jm[a].name]){this.Gx[sc.jm[a].name]=new sc.jm[a].Xq;this.DG(this.Gx[sc.jm[a].name],4)}},Fza:function(a){return this.Gx[sc.jm[a].name]},KWa:function(a,b,f){switch(a){case sc.Fc.im:this.X7.j("DEFAULT",f);this.U_.GO(0.1);break;default:this.X7.j("HIDDEN",f);this.U_.ACb()}if(a==sc.Fc.im||a==sc.Fc.gA&&sc.e.Wu==0&&!sc.e.yG){this.info.Ym(431,21,0.1,KEY_SPLINES.EASE_OUT);this.SN.j("DEFAULT_FAST")}else{this.info.Ym(ig.i.width,21,0.1,KEY_SPLINES.EASE_OUT);
this.SN.j("HIDDEN_FAST")}},Ab:function(a,b,f){if(a==sc.q)if(b==sc.zf.cs){(a=sc.q.Oo())?this.j("DEFAULT",y,y,function(){sc.e.Yyb()}.bind(this)):this.j("HIDDEN",y,y,function(){this.RWa();sc.e.iDb()}.bind(this));a?this.tza():this.bM()}else b==sc.zf.OSa&&this.Gx.start.mJb();else if(a==sc.e)if(b==sc.fa.oC)this.info.ga(sc.e.iB,f||y?0.5:0);else if(b==sc.fa.p9||b==sc.fa.D9){this.tN.L3a();this.LXa(sc.e.qq,sc.e.AB);this.KWa(sc.e.qq,sc.e.AB)}else if(b==sc.fa.NSa)this.tN.L3a();else if(b==sc.fa.yya)this.tN.Wtb(f);
else if(b==sc.fa.VTa)this.tN.$u(f);else if(b==sc.fa.Xxa)this.jr.ga(sc.e.OF,f||y?0.5:0);else if(b==sc.fa.Aka)if(sc.e.Wu==0&&!sc.e.yG){this.info.Ym(431,21,0.1,KEY_SPLINES.EASE_OUT);this.SN.j("DEFAULT_FAST")}else{this.info.Ym(ig.i.width,21,0.1,KEY_SPLINES.EASE_OUT);this.SN.j("HIDDEN_FAST")}}});sc.St.hpb=ig.da.extend({Ii:[],R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},FWa:y,cM:0.2,zW:0.2,f:function(a){this.parent();this.F(a,
21)},update:function(){this.parent();if(this.cM<this.zW){this.cM=this.cM+ig.i.Sa;if(this.cM>=this.zW){this.cM=this.zW;this.a.rh();this.FWa&&this.GUa()}}},uy:function(){this.a.rh();this.zW=this.cM=0.2;this.j("DEFAULT")},Gd:function(){this.j("HIDDEN",y,y,function(){this.a.rh()}.bind(this))},Mvb:function(){this.a.rh()},GUa:function(){if(this.a.children.length>0){ig.warn("At this point there should be no children, but there are: "+this.a.children.length);this.a.rh()}this.QWa(h);for(var a=sc.e.OY,b=66+
(sc.options.Hi?7:5),f=a.length;f--;){var i=a[f]();if(i){i.H(ig.k.ra,ig.k.$);i.a.g.x=b;b=b+(i.a.size.x+(sc.options.Hi?7:5));i.a.j("HIDDEN",h);i.h8||i.a.j("DEFAULT");this.a.TAa(i.a)}}},QWa:function(a,b){for(var f=sc.e.OY,i=66+(sc.options.Hi?7:5),j=f.length;j--;){var k=f[j]();if(k){b&&k.O9a&&k.O9a();k.H(ig.k.ra,ig.k.$);k.a.g.x=i;i=i+(k.a.size.x+(sc.options.Hi?7:5));if(a){k.a.j("HIDDEN",h);k.h8||k.a.j("DEFAULT");this.a.TAa(k.a)}}}},L3a:function(){var a=this.a.children;if(a.length>0){this.cM=0;this.zW=
0.2;for(var b=a.length;b--;)a[b].j("HIDDEN")}},Wtb:function(a){if(a){this.cM=0;this.zW=0.2}this.cM<this.zW?this.FWa=h:this.GUa()},$u:function(a){this.QWa(y,a)}});sc.St.ggb=ig.da.extend({Di:[],f:function(){this.parent();this.F(120,21);sc.P.Wa(sc.q.e,this)},reset:function(){this.Di=[];this.rh()},vCb:function(){if(this.Di.length>0){var a=this.Di[this.Di.length-1];a.a.hi!="HIDDEN_TOP"&&a.j("HIDDEN")}},JKa:function(a){this.Di.length>0&&this.Di[this.Di.length-1].j("HIDDEN_TOP");a=new sc.St.Nob(a);this.Di.push(a);
this.m(a);a.j("DEFAULT")},RHb:function(){if(this.Di.length>1){var a=this.Di[this.Di.length-2];this.m(a);a.j("DEFAULT");a=this.Di[this.Di.length-1];a.j("HIDDEN",y,y,J().bind(this));this.Di.pop()}else if(this.Di.length>0){a=this.Di[this.Di.length-1];a.j("HIDDEN",y,y,function(){this.Di.pop()}.bind(this))}},Ab:function(a,b){b==sc.fa.p9?this.JKa(a.Dzb()):b==sc.fa.D9&&this.RHb()}});sc.St.Nob=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:2,height:21,left:2,top:0,right:7,bottom:0,Vb:{"default":{x:88,
y:436}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-120},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_TOP:{state:{offsetY:-21},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,f:function(a){this.parent(120,21);this.H(ig.k.Ia,ig.k.vb);this.text=new sc.ea(a,{speed:ig.Rd.se.zg});this.text.H(ig.k.Ia,ig.k.vb);this.m(this.text);this.j("HIDDEN",h)}});var a=64,b=85;sc.St.uob=ig.da.extend({Sh:q,fe:q,f:function(){this.parent();this.a.size.x=200;this.a.size.y=30;this.a.clip=h;this.Sh=
new sc.Eka(19);this.Sh.hide();this.fe=new ig.mf("white",sc.options.Hi?174:128,1);this.fe.l(19,19);this.fe.Eb(0,0);this.fe.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:0},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN_FADE:{state:{Xa:0,alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.fe.j("HIDDEN",h);this.m(this.Sh);this.m(this.fe)},GO:function(a){a=a!=g?a:0;this.Sh.j("DEFAULT");this.Sh.show(0.1,a);this.fe.j("DEFAULT",y,y,q,0.1+a)},eGa:function(){this.fe.j("HIDDEN");this.Sh.hide(0.1,
0.11)},ACb:function(){this.fe.j("HIDDEN_FADE");this.Sh.j("HIDDEN");this.Sh.hide(0.1,0.11)}});sc.St.ojb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),JO:q,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},FADE_TO_SMALL:{state:{Xa:0.69,Va:0.69,alpha:1},time:0.2,p:KEY_SPLINES.EASE},FADE_IN_ALPHA:{state:{Xa:0.69,Va:0.69,alpha:0},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.size.x=138;this.a.size.y=380;this.a.Db.x=this.a.size.x/
2;this.a.Db.y=this.a.size.y/2;this.j("DEFAULT")},Da:function(a){this.JO?a.dy().qha(this.JO,-6,-18,0,0,144,400):a.dy().qha(this.s,0,0,173,0,138,380)}});sc.St.pjb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),JO:q,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.size.x=97;this.a.size.y=263;this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2;this.j("DEFAULT")},Da:function(a){this.JO?a.dy().qha(this.JO,
-8,-18,144,0,112,288):a.na(this.s,0,0,311,0,97,263)}});sc.St.njb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetY:20},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_NO_OFFSET:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Tv:q,small:q,f:function(){this.parent();this.a.size.x=138;this.a.size.y=380;this.Tv=new sc.St.ojb;this.Tv.H(ig.k.Ia,ig.k.vb);this.small=new sc.St.pjb;this.small.H(ig.k.Ia,ig.k.vb);this.small.l(1,0);this.m(this.Tv);this.m(this.small);this.j("HIDDEN",
h);this.reset();sc.P.Wa(sc.q.e,this);sc.P.Wa(sc.UT,this)},cFb:function(a,b,f,i){if(this.a.hi=="HIDDEN"||this.a.hi=="HIDDEN_NO_OFFSET"){i&&this.a.j("HIDDEN_NO_OFFSET",h);this.a.j("DEFAULT")}i?this.l(a,101+b):this.kd(0+a,101+b,i?0:0.3,KEY_SPLINES.EASE);if(f&&!this.jHa())if(i){this.Tv.j("FADE_IN_ALPHA",h);this.small.j("DEFAULT",h)}else this.tyb();else!f&&this.jHa()&&this.syb()},M3a:function(){this.jHa()?this.j("HIDDEN_NO_OFFSET",y,y,function(){this.reset();this.j("HIDDEN",h)}.bind(this)):this.j("HIDDEN",
y,y,function(){this.reset()}.bind(this))},reset:function(){this.Tv.j("DEFAULT",h);this.small.j("HIDDEN",h);this.l(0,101)},tyb:function(){this.Tv.j("FADE_TO_SMALL",y,y,function(){this.Tv.j("FADE_IN_ALPHA")}.bind(this));this.small.j("DEFAULT",y,y,q,0.2)},syb:function(){this.small.j("HIDDEN");this.Tv.j("FADE_TO_SMALL",y,y,function(){this.Tv.j("DEFAULT")}.bind(this))},jHa:function(){return this.small.a.hi=="DEFAULT"},Ab:function(a,b,f){if(a==sc.e)b==sc.fa.xRa&&(sc.e.GHa==sc.Si.Aw?this.M3a():this.cFb(f.x,
f.y,sc.e.GHa,f.Nq));else if(a==sc.UT)if((a=sc.UT.J1a("Appearance"))&&a.loaded){this.small.JO=a.IY;this.Tv.JO=a.IY}else{this.small.JO=q;this.Tv.JO=q}}});sc.St.Unb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{alpha:0.5,offsetY:21},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-87,alpha:0.5},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.size.x=87;this.a.size.y=87},Da:function(a){a.na(this.s,0,0,0,425,87,87)}})});ig.J=h;
ig.N("game.feature.menu.gui.start-menu").O("impact.feature.gui.gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.main-menu","game.feature.menu.gui.menu-misc").K(function(){var a=[{x:4,y:43},{x:12,y:73},{x:20,y:103},{x:28,y:133},{x:28,y:163},{x:20,y:193},{x:12,y:223},{x:4,y:253}];sc.Gka=sc.uw.extend({s:new ig.ia("media/gui/menu.png"),xa:{Jb:q,qe:q,TDa:q,Rc:q,status:q,KO:q,$K:q,save:q},Dqa:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},
ua:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.ua=new sc.wh;this.xa.Jb=this.Cl("quests",0,function(){sc.e.uH(sc.Fc.d$)}.bind(this));this.xa.qe=this.Cl("skills",1,function(){sc.e.uH(sc.Fc.Ye)}.bind(this),sc.q.T.ki("MENU_CIRCUIT"));this.xa.TDa=this.Cl("equipment",2,function(){sc.e.uH(sc.Fc.nC)}.bind(this));this.xa.Rc=this.Cl("items",3,function(){sc.e.uH(sc.Fc.VE)}.bind(this));this.xa.KO=this.Cl("social",4,function(){sc.e.uH(sc.Fc.jTa)}.bind(this),sc.q.T.ki("MENU_SOCIAL"));
this.xa.status=this.Cl("status",5,function(){sc.e.uH(sc.Fc.gA)}.bind(this));this.xa.$K=this.Cl("synopsis",6,function(){sc.e.uH(sc.Fc.lya)}.bind(this),y,h);this.xa.save=this.Cl("save",7,function(){sc.e.uH(sc.Fc.M1)}.bind(this));this.xa.KO.setActive(y);var a=new sc.Gka.mjb;a.H(ig.k.ra,ig.k.vb);this.Dqa=a;this.m(this.Dqa);for(var c in this.xa)this.m(this.xa[c]);this.ua.jd(this.xa.Jb,0,0);this.ua.jd(this.xa.qe,0,1);this.ua.jd(this.xa.TDa,0,2);this.ua.jd(this.xa.Rc,0,3);this.ua.jd(this.xa.KO,0,4);this.ua.jd(this.xa.status,
0,5);this.ua.jd(this.xa.$K,0,6);this.ua.jd(this.xa.save,0,7);this.ua.Rk(function(a){a.Aa||a==this.xa.save?sc.e.Cc(a.data):sc.e.Cc("???")}.bind(this));this.ua.jn(function(){sc.e.Cc("",h)});this.j("DEFAULT")},Yd:function(){if(sc.q.T.ki(sc.ng.MENU_SYNOPSIS)){this.xa.$K.ga(ig.lang.get("sc.gui.menu.menu-titles.synopsis"),h);this.xa.$K.setActive(h);(sc.e.Mpa(sc.Fc.EL)||sc.e.Mpa(sc.Fc.WL))&&sc.q.T.wq(135)?this.xa.$K.OAa():this.xa.$K.Z3()}else{this.xa.$K.Z3();this.xa.$K.ga("???",h);this.xa.$K.setActive(y)}if(sc.q.T.ki(sc.ng.MENU_CIRCUIT)){this.xa.qe.ga(ig.lang.get("sc.gui.menu.menu-titles.skills"),
h);this.xa.qe.setActive(h)}else{this.xa.qe.ga("???",h);this.xa.qe.setActive(y)}if(sc.q.T.ki(sc.ng.MENU_SOCIAL)){this.xa.KO.ga(ig.lang.get("sc.gui.menu.menu-titles.social"),h);this.xa.KO.setActive(h)}else{this.xa.KO.ga("???",h);this.xa.KO.setActive(y)}if(!sc.q.Aea()&&!sc.jb.wc()){this.xa.save.setActive(y);this.xa.KO.setActive(y)}else this.xa.save.setActive(h);this.xa.Jb.j("DEFAULT");this.xa.qe.j("DEFAULT",y,y,q,0.016);this.xa.TDa.j("DEFAULT",y,y,q,0.032);this.xa.Rc.j("DEFAULT",y,y,q,0.048);this.xa.KO.j("DEFAULT",
y,y,q,0.048);this.xa.status.j("DEFAULT",y,y,q,0.032);this.xa.$K.j("DEFAULT",y,y,q,0.016);this.xa.save.j("DEFAULT");this.Dqa.j("DEFAULT",y,y,q,0.016);sc.e.Z.hh(this.ua)},pl:function(){var a=q,c;for(c in this.xa)(a=this.xa[c])&&a.j("HIDDEN");this.Dqa.j("HIDDEN");sc.e.Z.sl(this.ua)},Gd:function(){this.pl(q)},mJb:function(){this.ua.tl(0,0)},Cl:function(b,c,d,f,i){var j=q,j=i?new sc.aSa(f?"???":ig.lang.get("sc.gui.menu.menu-titles."+b),sc.$0):new sc.mc(f?"???":ig.lang.get("sc.gui.menu.menu-titles."+b),
sc.$0);j.H(ig.k.ra,ig.k.$);j.l(a[c].x,a[c].y);j.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-(sc.$0+a[c].x)},time:0.2,p:KEY_SPLINES.LINEAR}};j.setData(ig.lang.get("sc.gui.menu.description."+b));j.cc=d;j.j("HIDDEN",h);return j}});sc.Gka.mjb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-141,alpha:0.5},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.size.x=141;this.a.size.y=
279},Da:function(a){a.na(this.s,0,0,32,0,141,279)}})});ig.J=h;
ig.N("game.feature.gui.base.slick-box").O("impact.feature.gui.base.box","impact.feature.gui.gui").K(function(){sc.Rnb=ig.Ue.extend({text:q,R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:1,offsetX:-32},time:0.3,p:KEY_SPLINES.EASE_IN}},gb:new ig.jc("media/gui/message.png",{width:16,height:9,left:0,top:0,right:8,bottom:0,Vb:{"default":{x:0,y:64}}}),f:function(a,b,c){a=new sc.ea(a,{font:sc.Ea.Ib});c=c||a.a.size.x+this.Vj.right+8;this.parent(c,9,b);this.a.Db.y=this.a.size.y;
a.l(1,0);b&&a.H(ig.k.ra,ig.k.$);this.m(a)}});sc.rya=ig.Ue.extend({gb:new ig.jc("media/gui/message.png",{width:12,height:12,left:0,top:4,right:4,bottom:0,Vb:{"default":{x:24,y:64}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0.5,Xa:1,Va:0,offsetX:0},time:0.2,p:KEY_SPLINES.EASE_IN}},f:function(a,b,c){this.parent(a,b,c);this.a.nd=0.5}});sc.Pnb=sc.rya.extend({fO:0,VZ:0,minWidth:0,Ik:q,f:function(a,b,c,d,f){this.fO=c||0;this.VZ=d||0;this.minWidth=f||0;this.parent(0,0,b);
this.ih(a)},ih:function(a){this.Ik=a;a.a.align.x=this.JJ?ig.k.ra:ig.k.hb;a.l(2,this.VZ);var b=a.a.size.x+this.fO+2;if(this.minWidth&&b<this.minWidth)b=this.minWidth;this.F(b,a.a.size.y+this.VZ*2);this.rh();this.m(a)}});sc.Onb=ig.Ue.extend({gb:new ig.jc("media/gui/message.png",{width:16,height:16,left:0,top:16,right:0,bottom:16,Vb:{"default":{x:40,y:64}}}),f:function(a,b){this.parent(16,a,b);this.a.nd=0.5}});sc.Qnb=ig.Ue.extend({gb:new ig.jc("media/gui/message.png",{width:8,height:32,left:0,top:8,
right:0,bottom:8,Vb:{"default":{x:40,y:64}}}),f:function(a,b){this.parent(8,a,b);this.a.nd=0.5}})});ig.J=h;
ig.N("game.feature.gui.base.misc").O("impact.feature.interact.gui.focus-gui","impact.feature.gui.gui").K(function(){sc.KPb=ig.vn.extend({color:"#00FF00",GHb:"#FF0000",Iyb:"#0000FF",f:function(a,b){this.parent();this.a.size.x=a||20;this.a.size.y=b||20;this.a.Db.x=this.a.size.x/2;this.a.Db.y=this.a.size.y/2},Da:function(a){var b=q,b=this.focus?this.Iyb:this.a.sra?this.GHb:this.color;a.nc(b,0,0,this.a.size.x,this.a.size.y).ge(0.5)}});sc.ZP={$n:{x:88,y:458},Vva:{x:105,y:458},bF:{x:122,y:458},wm:{x:576,
y:0},hgb:{x:592,y:0}};sc.Eka=ig.da.extend({s:new ig.ia("media/gui/menu.png"),nga:0,right:h,bD:h,height:0,n:0,time:0,visible:h,A2:0,jQ:0,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},f:function(a,b,c,d){this.parent();this.color=d||sc.ZP.$n;this.A2=this.nga=a;this.right=b!=g?b:h;this.bD=c!=g?c:h},update:function(){if(this.n<this.time){this.n=this.n+ig.i.Sa;if(this.n>=this.time){this.n=this.time;if(this.jQ==2)this.visible=y;this.jQ=0}}if(this.jQ==
0)this.A2=this.nga;else if(this.jQ==1)this.A2=Math.ceil(Math.max(0,this.n)/this.time*this.nga);else if(this.jQ==2)this.A2=Math.ceil((1-Math.max(0,this.n)/this.time)*this.nga)},Da:function(a){if(this.visible){var b=0,c=Math.ceil(Math.abs(this.A2)/16),d=this.A2,f=16;if(!this.right||!this.bD)a.ks().MB(this.right?1:-1,this.bD?1:-1);for(;c--;){d<16&&(f=d);a.na(this.s,b,b,this.color.x,this.color.y,f,f);b=b+16;d=Math.max(0,d-16)}(!this.right||!this.bD)&&a.Xs()}},show:function(a,b){if(a){this.n=0-(b||0);
this.time=a||0.3}else this.time=this.n=0.1;this.jQ=1;this.visible=h},hide:function(a,b){if(a){this.n=0-(b||0);this.time=a||0.3;this.jQ=2}else{this.n=this.time=0;this.visible=y;this.jQ=0}}});sc.hjb=ig.da.extend({Jf:q,f:function(a,b,c,d){this.parent();a=new sc.ea(a);this.m(a);this.Jf=new sc.Tb(c,d);this.Jf.H(ig.k.ra,ig.k.Cb);this.Jf.l(0,3);this.m(this.Jf);this.F(b+this.Jf.a.size.x,Math.max(a.a.size.y,this.Jf.a.size.y))},za:function(a,b){this.Jf.za(a,b)}})});ig.J=h;
ig.N("game.feature.gui.base.compact-choice-box").O("impact.feature.gui.base.box","impact.feature.gui.gui").K(function(){sc.Xfb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN_OUT}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:480,y:304}}}),options:q,Gb:q,f:function(a,b,c){this.parent();this.options=a;this.Gb=c;this.Z=new ig.$s;this.ua=new sc.wh;this.ua.Ql(this.cc.bind(this));
this.Z.hh(this.ua);for(var c=b-6,d=3,f=0;f<a.length;++f){var i=a[f],j=new sc.mc(i.label,c,h,sc.Mc.wI);j.re.H(ig.k.Ia,ig.k.vb);j.re.l(0,0);j.l(3,d);j.setData(f);d=d+20;this.m(j);this.ua.jd(j,0,f,i.backButton||y)}this.F(b,d+2);ig.La.De(this.Z);sc.q.YK()},pi:function(){ig.La.$e(this.Z)},cc:function(a){a=this.options[a.data];this.Gb&&this.Gb(a.key)}})});ig.J=h;
ig.N("game.feature.gui.hud.combat-hud").O("impact.feature.gui.gui","impact.feature.gui.base.box").K(function(){sc.Pfb=ig.da.extend({Kz:q,pB:q,Oq:q,gK:0,y5:y,gHa:y,f:function(){this.parent();this.a.zIndex=100;this.a.xf=h;this.F(ig.i.width,ig.i.height);this.Kz=new sc.Tfb;this.m(this.Kz);this.pB=new sc.Qfb;this.m(this.pB);this.Oq=new sc.Rfb;this.m(this.Oq);sc.P.Wa(sc.q,this)},update:function(){if(sc.q.IG())this.gK=0.7*sc.q.vzb();else if(this.gK){this.gK=this.gK-ig.i.Sa;if(this.gK<=0){this.gK=0;if(!this.y5){this.Ju=
0;this.Kz.j("HIDDEN");this.pB.j("HIDDEN")}}}},mpa:function(){return this.y5?1-this.gK/0.7:this.gK/0.7},Ab:function(a,c){if(c==sc.zf.e9){var d=sc.q.Qv();if(this.y5!=d){this.y5=d;this.gHa=sc.q.pqa();d=sc.qi.wc();this.gK=0.7-this.gK;this.Kz.uCa(this.y5,this.gHa,d);this.pB.uCa(this.y5,this.gHa,d)}if(sc.q.IG()){this.Oq.l(this.Kz.BBb(),3);this.Oq.show()}else this.Oq.hide()}}});sc.Rfb=ig.Ue.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Va:0,alpha:0},time:0.2,p:KEY_SPLINES.EASE_OUT}},
gb:new ig.jc("media/gui/message.png",{width:16,height:0,left:16,top:14,right:16,bottom:0,Vb:{"default":{x:48,y:38}}}),f:function(){var a="\\i[menu]"+ig.lang.get("sc.gui.combat-hud.skip"),a=new sc.ea(a);this.parent(a.a.size.x+24,14);this.a.nd=0.5;a.H(ig.k.Ia,ig.k.vb);this.m(a);this.H(ig.k.ra,ig.k.$);this.j("HIDDEN",h)},show:function(){this.j("DEFAULT")},hide:function(){this.j("HIDDEN")}});sc.Tfb=ig.da.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:16},time:0.1,
p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/status-gui.png"),gb:new ig.jc("media/gui/status-gui.png",{width:16,height:0,left:16,top:14,right:0,bottom:0,Vb:{battle:{x:128,y:80},cooldown:{x:160,y:80}}}),sub:{},ZF:q,f:function(){this.parent();this.F(ig.i.width,20);this.j("HIDDEN",h);this.sub.empty=new a.EMPTY;this.sub.sIb=new a.wmb;this.sub.qi=new a.qlb},Da:function(a){var c=this.a,d=c.yB.X;if(this.ZF){var f=this.ZF.a.size.x+13,d=Math.ceil(c.size.x*d.mpa()),i=c.size.x-f,c=c.size.x-d,j=!sc.q.Es()||
sc.q.IG(),k=j?"#006d7d":"#b0001d";c<i-1&&a.nc(k,c,0,i-1-c,2).yi("lighter");c=Math.max(0,f+1-d);c<13&&a.na(this.s,i-1+c,0,128+(j?16:0)+c,96,13-c,16).yi("lighter");var l=f-13+1,c=Math.max(0,l-d);c<l&&a.nc(k,i-1+13+c,13,l-c,2).yi("lighter");a.ks().ge(0.5);this.gb.nb(a,f,16,j?"cooldown":"battle",i,0);a.Xs()}},POb:function(a,c){if(this.ZF){this.ZF.end();this.yH(this.ZF)}this.ZF=c?this.sub.qi:a?this.sub.sIb:this.sub.empty;this.m(this.ZF);this.ZF.H(ig.k.ra,ig.k.$);this.ZF.start()},uCa:function(a,c,d){if(a){this.j("DEFAULT");
this.POb(c,d)}},BBb:function(){return(this.ZF&&this.ZF.a.size.x||0)+13}});var a={};sc.Qfb=ig.da.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.F(ig.i.width,2);this.H(ig.k.hb,ig.k.Cb);this.j("HIDDEN",h)},Da:function(a){var c=this.a,d=c.size.x,f=c.yB.X.mpa();a.nc(!sc.q.Es()||sc.q.IG()?"#006d7d":"#b0001d",0,0,d-Math.ceil(d*(1-f)),c.size.y).yi("lighter")},uCa:function(a){a&&this.j("DEFAULT")}});a.EMPTY=
ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),f:function(){this.parent();this.F(17,20)},Da:function(a){a.na(this.s,this.a.size.x-18,0,160+(!sc.q.Es()||sc.q.IG()?16:0),96,13,13)},start:J(),end:J()});a.wmb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),gta:q,h7:q,Ju:0,f:function(){this.parent();this.F(49,20);this.gta=new sc.ea("Rank",{font:sc.Ea.Ib});this.gta.H(ig.k.ra,ig.k.$);this.gta.l(28,1);this.h7=new sc.ea("A");this.h7.H(ig.k.ra,ig.k.$);this.h7.l(18,-2);this.m(this.gta);this.m(this.h7)},
update:function(){var a=sc.q.wzb();if(this.Ju!=a){this.Ju=0.2*a+0.8*this.Ju;if(Math.abs(this.Ju-a)<0.05)this.Ju=a}},Da:function(a){var c=this.a,d=!sc.q.Es()||sc.q.IG();a.na(this.s,c.size.x-18,0,160+(d?16:0),96,13,13);var f=Math.floor(21*this.Ju);a.na(this.s,c.size.x-50,8,128,112,24,3);f&&a.na(this.s,c.size.x-50,8,128,112+(d?8:4),1+f,3)},start:function(){sc.P.Wa(sc.q,this);this.h7.ga(sc.q.UEa());this.Ju=0},end:function(){sc.P.Hc(sc.q,this)},Ab:function(a,c){if(c==sc.zf.WPa){this.Ju=1;this.h7.ga(sc.q.UEa())}}});
a.qlb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),d5:new ig.ia("media/gui/severed-heads.png"),f:function(){this.parent();var a;a=110+sc.qi.GE*10;a=a+(sc.sa.He.length+1)*16;a=a+sc.qi.Rg.length*16;this.F(a,20)},Da:function(a){var c=this.a.size.x/2;a.na(this.s,c-8,0,136,160,16,16);var d=sc.qi.GE;this.bXa(a,c-12-4,-1,d,sc.qi.Mb[sc.pd.PLAYER],0);this.bXa(a,c+12,1,d,sc.qi.Mb[sc.pd.ENEMY],8);for(var d=12+d*5,f=[0],i=0;i<sc.sa.He.length;++i)f.push(sc.sa.w2a(i).sY());this.aXa(a,c-d,h,f);f=[];for(i=
0;i<sc.qi.Rg.length;++i)f.push(sc.qi.Rg[i].sY());this.aXa(a,c+d,y,f)},bXa:function(a,c,d,f,i,j){for(var k=0;k<f;++k){a.na(this.s,c,2,(f-k>i?124:120)+j,160,4,12);c=c+5*d}},aXa:function(a,c,d,f){d&&(c=c-24);for(var i=0;i<f.length;++i){a.na(this.d5,c,-10,f[i]*24,0,24,24,d);c=c+(d?-16:16)}},start:J(),end:J()})});ig.J=h;
ig.N("game.feature.model.options-model").O("impact.base.game","impact.feature.storage.storage","impact.base.input","game.feature.model.base-model").K(function(){function a(a){if(ig.platform==ig.Mk.DESKTOP){var b=window.require("nw.gui").Window.get();if(b.isFullscreen!=a){ig.log("%cChanging Fullscreen: "+a,"color:#CC0000");a?b.enterFullscreen():b.leaveFullscreen()}}}sc.Rx={};sc.Rx[ig.ub.bQa]=h;sc.Rx[ig.ub.vhb]=h;sc.Rx[ig.ub.xhb]=h;sc.Rx[ig.ub.yhb]=h;sc.Rx[ig.ub.zhb]=h;sc.Rx[ig.ub.Ahb]=h;sc.Rx[ig.ub.Bhb]=
h;sc.Rx[ig.ub.MQa]=h;sc.Rx[ig.ub.NQa]=h;sc.Rx[ig.ub.Chb]=h;sc.Rx[ig.ub.KQa]=h;sc.Rx[ig.ub.LQa]=h;sc.Rx[ig.ub.whb]=h;sc.lgb={vPb:0,mj:1,WPb:2,CPb:3};sc.QPa={$c:0,Gjb:1,Uh:2};sc.eja={SHORT:0,gjb:1};sc.m1={Skb:0,Imb:1,QQa:2,cnb:3};sc.yxa={ONE:0,Gya:1,SQb:2,RPb:3};sc.NPb={jQb:0,Gjb:1,YPb:2};sc.i$={rxa:0,Qya:1,mj:2,Bka:3};sc.kka={fRa:0,uSa:1};sc.BL={yQa:0,Mhb:1,qfb:2,Qib:3,Zib:4};sc.Oja={mj:0,$c:1};sc.LRa={mj:0,eRb:1};sc.CQb={zg:0,uSa:1};sc.Qka={Uh:0,$c:1,NONE:2};sc.C$={Uh:0,$c:1,NONE:2};sc.D$={Uh:0,$c:1,
NONE:2};sc.Rka={Uh:0,$c:1,NONE:2};sc.Kya={Uh:0,$c:1,NONE:2};sc.Jja={fjb:0,PP:1,NONE:2};sc.dka={VQa:0,pQb:1,NONE:2};sc.Bja={EPa:0,UQb:1};sc.ZQa={tUa:0,zQb:1};sc.e$={I1:0,$j:1,NONE:2};var b={};b[sc.BL.yQa]="en_US";b[sc.BL.Mhb]="de_DE";b[sc.BL.qfb]="zh_CN";b[sc.BL.Qib]="ja_JP";b[sc.BL.Zib]="ko_KR";sc.SV={BUTTON_GROUP:0,ARRAY_SLIDER:1,OBJECT_SLIDER:2,CHECKBOX:3,CONTROLS:4,LANGUAGE:5};sc.Zc={Uz:0,lk:1,eQ:2,pPb:3,Wc:4,Ej:5};var c=window.IG_GAME_DEBUG||ig.platform!=ig.Mk.DESKTOP?y:h;sc.nj={language:{type:"LANGUAGE",
data:sc.BL,f:sc.BL.yQa,Za:sc.Zc.Uz,IJb:h},"pause-unfocused":{type:"CHECKBOX",f:h,Za:sc.Zc.Uz},"volume-music":{type:"ARRAY_SLIDER",data:[0,1],f:0.8,Za:sc.Zc.Uz,fill:h,wG:h,Bg:"sound"},"volume-sound":{type:"ARRAY_SLIDER",data:[0,1],f:1,Za:sc.Zc.Uz,fill:h},"web-audio":{type:"CHECKBOX",f:!window.aQb||h,Za:sc.Zc.Uz,IJb:h},"skip-tutorials":{type:"CHECKBOX",f:y,Za:sc.Zc.Uz,wG:h,Bg:"cutscenes"},"skip-confirm":{type:"CHECKBOX",f:h,Za:sc.Zc.Uz},"text-speed":{type:"OBJECT_SLIDER",data:ig.Rd.se,f:ig.Rd.se.Bwa,
Za:sc.Zc.Uz,fill:h},"message-padding":{type:"BUTTON_GROUP",data:sc.LRa,f:sc.LRa.mj,Za:sc.Zc.Uz,fill:h},"circuit-text-size":{type:"BUTTON_GROUP",data:sc.QPa,f:sc.QPa.Uh,Za:sc.Zc.lk,wG:h,Bg:"main"},"circuit-display-time":{type:"BUTTON_GROUP",data:sc.eja,f:sc.eja.SHORT,Za:sc.Zc.lk},"equip-level-display":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"level-letter-display":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"buff-help":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"update-trophy-style":{type:"BUTTON_GROUP",data:sc.Rka,f:sc.Rka.$c,
Za:sc.Zc.lk,wG:h,Bg:"updates"},"update-quest-style":{type:"BUTTON_GROUP",data:sc.Qka,f:sc.Qka.Uh,Za:sc.Zc.lk},"update-landmark-style":{type:"BUTTON_GROUP",data:sc.C$,f:sc.C$.Uh,Za:sc.Zc.lk},"update-lore-style":{type:"BUTTON_GROUP",data:sc.D$,f:sc.D$.$c,Za:sc.Zc.lk},"update-drop-style":{type:"BUTTON_GROUP",data:sc.Kya,f:sc.Kya.Uh,Za:sc.Zc.lk},"min-sidebar":{type:"CHECKBOX",f:y,Za:sc.Zc.lk},"item-hud-size":{type:"BUTTON_GROUP",data:sc.Oja,f:sc.Oja.mj,Za:sc.Zc.lk,wG:h,Bg:"field"},"show-items":{type:"CHECKBOX",
f:h,Za:sc.Zc.lk},"show-money":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"min-quest":{type:"CHECKBOX",f:y,Za:sc.Zc.lk},"quest-show-current":{type:"CHECKBOX",f:y,Za:sc.Zc.lk},"xeno-pointer":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"hud-display":{type:"CHECKBOX",f:h,Za:sc.Zc.lk,wG:h,Bg:"combat"},"close-combat-input":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"close-circle":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"sp-bar":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"element-overload":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"low-health-warning":{type:"CHECKBOX",
f:h,Za:sc.Zc.lk},"combat-art-name":{type:"CHECKBOX",f:y,Za:sc.Zc.lk},"damage-numbers":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"damage-numbers-crit":{type:"CHECKBOX",f:y,Za:sc.Zc.lk},"hp-bars":{type:"BUTTON_GROUP",data:sc.Jja,f:sc.Jja.PP,Za:sc.Zc.lk,wG:h,Bg:"party"},"party-combat-arts":{type:"BUTTON_GROUP",data:sc.dka,f:sc.dka.VQa,Za:sc.Zc.lk},"quick-menu-access":{type:"BUTTON_GROUP",data:sc.kka,f:sc.kka.fRa,Za:sc.Zc.lk,wG:h,Bg:"quick"},"quick-location":{type:"BUTTON_GROUP",data:sc.e$,f:sc.e$.I1,Za:sc.Zc.lk},
"quick-element":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"quick-cursor":{type:"CHECKBOX",f:h,Za:sc.Zc.lk},"display-type":{type:"BUTTON_GROUP",data:sc.m1,f:sc.m1.QQa,Za:sc.Zc.eQ},fullscreen:{type:"CHECKBOX",f:c,Za:sc.Zc.eQ,nFb:h},"pixel-size":{type:"BUTTON_GROUP",data:sc.yxa,f:sc.yxa.Gya,Za:sc.Zc.eQ},"rumble-strength":{type:"BUTTON_GROUP",data:sc.i$,f:sc.i$.Bka,Za:sc.Zc.eQ},"env-particles":{type:"CHECKBOX",f:h,Za:sc.Zc.eQ},weather:{type:"CHECKBOX",f:h,Za:sc.Zc.eQ},lighting:{type:"CHECKBOX",f:h,Za:sc.Zc.eQ},
"gamepad-attack":{type:"BUTTON_GROUP",data:sc.Bja,f:sc.Bja.EPa,Za:sc.Zc.Wc,IEa:h},"gamepad-dash":{type:"BUTTON_GROUP",data:sc.Bja,f:sc.Bja.EPa,Za:sc.Zc.Wc,IEa:h},"gamepad-icons":{type:"BUTTON_GROUP",data:sc.ZQa,f:sc.ZQa.tUa,Za:sc.Zc.Wc,IEa:h},"element-wheel":{type:"CHECKBOX",f:h,Za:sc.Zc.Ej},"keys-confirm":{type:"CONTROLS",f:{key1:ig.ub.AQa,key2:g},Za:sc.Zc.Ej,wG:h,Bg:"menu"},"keys-back":{type:"CONTROLS",f:{key1:ig.ub.wPa,key2:g},Za:sc.Zc.Ej},"keys-menu":{type:"CONTROLS",f:{key1:ig.ub.TTa,key2:g},
Za:sc.Zc.Ej},"keys-pause":{type:"CONTROLS",f:{key1:ig.ub.EQa,key2:g},Za:sc.Zc.Ej},"keys-help":{type:"CONTROLS",f:{key1:ig.ub.dRa,key2:g},Za:sc.Zc.Ej},"keys-help2":{type:"CONTROLS",f:{key1:ig.ub.vPa,key2:g},Za:sc.Zc.Ej},"keys-help3":{type:"CONTROLS",f:{key1:ig.ub.XRa,key2:g},Za:sc.Zc.Ej},"keys-skip-cutscene":{type:"CONTROLS",f:{key1:ig.ub.YQa,key2:g},Za:sc.Zc.Ej},"keys-help4":{type:"CONTROLS",f:{key1:ig.ub.iRa,key2:g},Za:sc.Zc.Ej},"keys-circle-left":{type:"CONTROLS",f:{key1:ig.ub.GSa,key2:g},Za:sc.Zc.Ej},
"keys-circle-right":{type:"CONTROLS",f:{key1:ig.ub.E,key2:g},Za:sc.Zc.Ej},"keys-up":{type:"CONTROLS",f:{key1:ig.ub.pUa,key2:ig.ub.lUa},Za:sc.Zc.Ej,wG:h,Bg:"gameplay"},"keys-right":{type:"CONTROLS",f:{key1:ig.ub.gQa,key2:ig.ub.PSa},Za:sc.Zc.Ej},"keys-down":{type:"CONTROLS",f:{key1:ig.ub.oka,key2:ig.ub.mQa},Za:sc.Zc.Ej},"keys-left":{type:"CONTROLS",f:{key1:ig.ub.kPa,key2:ig.ub.yRa},Za:sc.Zc.Ej},"keys-melee":{type:"CONTROLS",f:{key1:ig.ub.mUa,key2:g},Za:sc.Zc.Ej},"keys-guard":{type:"CONTROLS",f:{key1:ig.ub.MPa,
key2:g},Za:sc.Zc.Ej},"keys-quick":{type:"CONTROLS",f:{key1:ig.ub.VSa,key2:g},Za:sc.Zc.Ej},"keys-special":{type:"CONTROLS",f:{key1:ig.ub.lTa,key2:g},Za:sc.Zc.Ej},"keys-dash2":{type:"CONTROLS",f:{key1:ig.ub.oPa,key2:g},Za:sc.Zc.Ej},"keys-cold":{type:"CONTROLS",f:{key1:ig.ub.vUa,key2:g},Za:sc.Zc.Ej},"keys-shock":{type:"CONTROLS",f:{key1:ig.ub.wUa,key2:g},Za:sc.Zc.Ej},"keys-heat":{type:"CONTROLS",f:{key1:ig.ub.xUa,key2:g},Za:sc.Zc.Ej},"keys-wave":{type:"CONTROLS",f:{key1:ig.ub.yUa,key2:g},Za:sc.Zc.Ej},
"keys-neutral":{type:"CONTROLS",f:{key1:ig.ub.$Qa,key2:ig.ub.zUa},Za:sc.Zc.Ej}};ig.YN&&ig.YN[1]>=3E3&&delete sc.nj["web-audio"];if(window.Ri){sc.nj["keys-jump"]={type:"CONTROLS",f:{key1:ig.ub.e2,key2:g},Za:sc.Zc.Ej,eZ:h,wG:h,Bg:"debug"};sc.nj["keys-time"]={type:"CONTROLS",f:{key1:ig.ub.STa,key2:g},Za:sc.Zc.Ej,eZ:h};sc.nj["keys-rumble"]={type:"CONTROLS",f:{key1:ig.ub.MSa,key2:g},Za:sc.Zc.Ej,eZ:h};sc.nj["keys-debug"]={type:"CONTROLS",f:{key1:ig.ub.AUa,key2:g},Za:sc.Zc.Ej,eZ:h};sc.nj["keys-debug2"]=
{type:"CONTROLS",f:{key1:ig.ub.BUa,key2:g},Za:sc.Zc.Ej,eZ:h};sc.nj["keys-addBuff"]={type:"CONTROLS",f:{key1:ig.ub.uUa,key2:g},Za:sc.Zc.Ej,eZ:h};sc.nj["keys-levelUp"]={type:"CONTROLS",f:{key1:ig.ub.nPa,key2:g},Za:sc.Zc.Ej,eZ:h}}var d={},f;for(f in sc.nj)sc.nj[f].type=="CONTROLS"&&f.indexOf("keys")==0&&(d[f.substr(5)]=f);var i=c;if(localStorage.getItem("IG_FULLSCREEN")){i=localStorage.getItem("IG_FULLSCREEN")=="true";console.log("INIT FULLSCREEN VALUE",i);a(i)}sc.$ib=ig.Ca.extend({f:J(),h4a:function(){var a=
sc.options.Dc,b;for(b in d){if(a[d[b]].key1!=g){ig.input.bind(a[d[b]].key1,b);sc.Ea.UBa(b,a[d[b]].key1)}a[d[b]].key2!=g&&ig.input.bind(a[d[b]].key2,b)}this.Kdb()},unbind:function(a,b){ig.input.GF[b.f.key1!=g]&&ig.input.unbind(b.f.key1);ig.input.GF[b.f.key2]!=g&&ig.input.unbind(b.f.key2)},Kdb:function(){sc.Ea.XKb(sc.options.get("gamepad-icons"));var a=sc.options.get("gamepad-attack")?"gamepad-r2":"gamepad-r1",b=sc.options.get("gamepad-attack")?"gamepad-r1":"gamepad-r2";sc.Ea.wba("throw",a);sc.Ea.wba("special",
b);a=sc.options.get("gamepad-dash")?"gamepad-l2":"gamepad-l1";b=sc.options.get("gamepad-dash")?"gamepad-l1":"gamepad-l2";sc.Ea.wba("dash",a);sc.Ea.wba("guard",a);sc.Ea.wba("quick",b)},nvb:function(a,b,c,f){var i=sc.options.Dc;sc.options.b5=h;c?ig.input.GF[i[a].key2]&&ig.input.unbind(i[a].key2):ig.input.unbind(i[a].key1);if(c&&f)i[a].key2=g;else{var o=a.substr(5),f=ig.input.GF[b];ig.input.bind(b,o);sc.Ea.UBa(o,b);if(f){var t=i[d[f]],o=c?i[d[o]].key2:i[d[o]].key1;t.key2==b?t.key2=o:t.key1=o;ig.input.bind(o,
f);sc.Ea.UBa(f,o);sc.options.exb()}c?i[a].key2=b:i[a].key1=b}}});sc.Ukb=ig.Uf.extend({Uo:[],Hi:y,b5:y,$J:new sc.$ib,Dc:{},jsb:y,f:function(){this.parent("OptionsModel");ig.zd.Lg(this);if(ig.i.width>480)this.Hi=h;if(!window.Ed){var a=q,c;for(c in sc.nj){a=sc.nj[c];if(a.pS){this.Dc[c+"-global"]=ig.copy(a.browser&&ig.platform==ig.Mk.BROWSER?a.browser:a.f);this.Dc[c+"-local"]=ig.copy(a.browser&&ig.platform==ig.Mk.BROWSER?a.browser:a.f)}else this.Dc[c]=ig.copy(a.browser&&ig.platform==ig.Mk.BROWSER?a.browser:
a.f);c=="fullscreen"&&(this.Dc[c]=i);if(c=="language")for(var d in b)ig.dh==b[d]&&(this.Dc[c]=d);this.R$(c)}this.NJa(ig.zd.GFa)}ig.ma.Up("option",this,"VarOptionEditor")},bm:function(a,b){if(b[0]=="option"){var c=b[1];if(sc.nj[c]!==g)return this.Dc[c]}e(Error("Unsupported var access path: "+a))},x8a:function(){if(this.b5){this.b5=y;ig.zd.Gta()}},oJb:function(a){this.b5=h;for(var b in sc.nj){var c=sc.nj[b];c.pS?a?this.Dc[b+"-local"]=ig.copy(c.browser&&ig.platform==ig.Mk.BROWSER?c.browser:c.f):this.Dc[b+
"-global"]=ig.copy(c.browser&&ig.platform==ig.Mk.BROWSER?c.browser:c.f):this.Dc[b]=ig.copy(c.browser&&ig.platform==ig.Mk.BROWSER?c.browser:c.f);c.type=="CONTROLS"&&this.$J.unbind(b,c);this.R$(b)}this.$J.h4a();sc.P.Ga(this,sc.ct.$z);sc.P.Ga(this,sc.ct.wxa)},exb:function(){sc.P.Ga(this,sc.ct.wxa)},set:function(a,b,c){if(sc.nj[a]){if(!this.b5)this.b5=h;sc.nj[a].pS?c?this.Dc[a+"-local"]=b:this.Dc[a+"-global"]=b:this.Dc[a]=b;this.R$(a);sc.nj[a].IEa&&this.$J.Kdb();sc.P.Ga(this,sc.ct.$z)}},get:function(a,
b){return sc.nj[a]?sc.nj[a].pS?b?this.Dc[a+"-local"]:this.Dc[a+"-global"]:this.Dc[a]:q},pS:function(a){if(sc.nj[a]){if(sc.nj[a].pS)return h}else ig.warn("Can't find option because of invalid key: "+a);return y},R$:function(a){if(!window.IG_IGNORE_OPTIONS)if(a=="fullscreen")this.Wsb();else if(a=="volume-master")ig.i.setMasterVolume(this.Dc[a]);else if(a=="language"){a=b[this.Dc[a]];localStorage.setItem("IG_LANG",a);ig.log("%cOPTION SET LANG: "+a,"color:#CC0000")}else if(a=="volume-music"){window.IG_MUSIC_VOLUME=
this.Dc[a];ig.i.setMusicVolume(this.Dc[a]);localStorage.setItem("options.soundVolume",this.Dc[a])}else if(a=="volume-sound"){window.IG_SOUND_VOLUME=this.Dc[a];ig.i.setSoundVolume(this.Dc[a]);localStorage.setItem("options.soundVolume",this.Dc[a])}else if(a=="display-type"){this._setDisplaySize();localStorage.setItem("options.screenMode",window.IG_SCREEN_MODE)}else if(a=="web-audio"){window.IG_USE_WEBAUDIO=this.Dc[a];localStorage.setItem("options.useWebAudio",this.Dc[a])}else if(a=="pixel-size"){window.IG_GAME_SCALE=
(this.Dc[a]||0)+1;localStorage.setItem("options.scale",window.IG_GAME_SCALE)}else if(a=="double-pixels"){window.IG_GAME_SCALE=this.Dc[a]?2:1;localStorage.setItem("options.scale",window.IG_GAME_SCALE)}else a=="pause-unfocused"&&(window.IG_KEEP_WINDOW_FOCUS=!this.Dc[a])},Aqb:function(){var a=y,b;for(b in sc.nj){var c=sc.nj[b];if(c.type=="CONTROLS"&&this.Dc[b].key1===g){a=h;break}}if(a){console.log("KEY BINDING FAILURE. RESET TO DEFAULT CONFIG");for(b in sc.nj){c=sc.nj[b];c.type=="CONTROLS"&&(this.Dc[b]=
ig.copy(c.f))}}},_setDisplaySize:function(){var a=0,b=0,c=window.IG_WIDTH,d=window.IG_HEIGHT,b=$(window).width(),f=$(window).height(),i=y,t=y;switch(this.Dc["display-type"]){case sc.m1.Skb:a=c;b=d;break;case sc.m1.Imb:a=c*2;b=d*2;break;case sc.m1.QQa:t=h;if(b/f>c/d){b=f;a=c*f/d}else{a=b;b=d*b/c}i=h;break;case sc.m1.cnb:t=h;a=b;b=f;i=h;break;default:a=c;b=d}if(t)for(f=1;f<4;++f)if(Math.abs(a-c*f)<20){a=c*f;b=d*f}window.IG_SCREEN_MODE=this.Dc["display-type"];if(window.Ov&&window.Ov.i)ig.i.setCanvasSize(a,
b,i);else{$("#canvas").width(a);$("#canvas").height(b);$("#canvas")[0].className=i?"borderHidden":""}},Wsb:function(){if(ig.platform==ig.Mk.DESKTOP){var b=this.Dc.fullscreen;localStorage.setItem("IG_FULLSCREEN",b);a(b)}},Fu:function(a){var b={},c=q,d;for(d in sc.nj){c=sc.nj[d];c.pS&&(b[d]=this.Dc[d+"-local"])}a.options=b},Bt:function(a){var a=a.options,b;for(b in a)if(sc.nj[b]){this.Dc[b+"-local"]=a[b];this.R$(b)}sc.P.Ga(this,sc.ct.$z)},OJa:function(a){var b={},c=q,d;for(d in sc.nj){c=sc.nj[d];b[d]=
c.pS?this.Dc[d+"-global"]:this.Dc[d]}a.options=b},NJa:function(a){var a=a.options,b;for(b in a)if(sc.nj[b]){sc.nj[b].pS?this.Dc[b+"-global"]=a[b]:this.Dc[b]=a[b];this.R$(b)}this.Aqb();this.jsb=h;sc.P.Ga(this,sc.ct.$z)}});sc.ct={};sc.ct.$z=0;sc.ct.wxa=1;ig.Vf(function(){return sc.options=sc.options=new sc.Ukb})});ig.J=h;
ig.N("game.feature.gui.hud.item-hud").O("game.feature.gui.hud.right-hud","game.feature.model.options-model").K(function(){sc.Cib=ig.da.extend({n:0,id:-1,zc:0,ob:q,mM:q,f:function(a,b){this.parent();this.id=a==g?-1:a;this.zc=b||1;this.n=3;var c=sc.yb.Rc[a],c="\\i["+((c.icon||"item-default")+sc.yb.Er(c.rarity||0))+"]"+ig.Ra.ic(c.name)+" x",d=sc.options.get("item-hud-size")==sc.Oja.mj;this.ob=new sc.ea(c,{speed:ig.Rd.se.zg,font:d?sc.Ea.font:sc.Ea.he});this.ob.H(ig.k.hb,ig.k.vb);this.mM=new sc.Tb(99,
{size:d?sc.Ff.hv:sc.Ff.$c});this.mM.H(ig.k.ra,ig.k.vb);this.mM.za(this.zc);this.m(this.ob);this.m(this.mM);this.d4a(0);this.F(this.ob.a.size.x+this.mM.a.size.x+4,d?18:8);this.a.Db.x=this.a.size.x;this.a.Db.y=0},BOb:function(a){if(a){if(this.ob.font==sc.Ea.font)return;this.ob.pha(sc.Ea.font);this.mM.F(sc.Ff.hv)}else{if(this.ob.font==sc.Ea.he)return;this.ob.pha(sc.Ea.he);this.mM.F(sc.Ff.$c)}this.F(this.ob.a.size.x+this.mM.a.size.x+4,a?18:8)},aI:function(){if(this.n>0)this.n=this.n-ig.i.ja},d4a:function(a,
b){this.zc=this.zc+(a||0);this.mM.za(this.zc,b);this.n=3}});sc.Gib=sc.rC.extend({Kh:[],size:0,f:function(){this.parent(ig.lang.get("sc.gui.item-hud.title"));this.size=sc.options.get("item-hud-size");sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q,this);sc.P.Wa(sc.options,this)},De:function(a,b){var c=q;if((c=this.vQ(a))!=q)c.d4a(b,this.ae.length<=5);else{c=new sc.Cib(a,b);this.ae.length>=5?this.Kh.push(c):this.Rr(c,h);this.hidden&&this.show()}},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=
this.ae.length,b=q;a--;){b=this.ae[a].Ik;b.aI();if(b.n<=0){b=this.m7(a);if(a==0&&this.ae.length==0)b.a.Db.y=b.a.size.y/2;else{b.a.Db.y=0;b.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&this.ae.length==0&&this.hide()}},vQ:function(a){for(var b=this.ae.length;b--;)if(this.ae[b].Ik.id==a)return this.ae[b].Ik;for(b=this.Kh.length;b--;)if(this.Kh[b].id==a)return this.Kh[b];return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},ytb:function(a){for(var b=this.ae.length,
c=q;b--;){c=this.ae[b];c.Ik.BOb(a);c.ih(c.Ik)}this.j7()},Ab:function(a,b,c){if(a==sc.q.T)b==sc.dd.Pja&&sc.options.get("show-items")&&!c.Nq&&this.De(c.id,c.zc,c.Kwb);else if(a==sc.q)if(a.DD()){this.x3();this.Kh.length=0;this.hide()}else a.oe()||a.lB()||sc.dc.iq?this.hide():!a.oe()&&(!a.lB()&&this.ae.length>0&&!sc.dc.iq)&&this.show();else if(a==sc.options&&b==sc.ct.$z){a=sc.options.get("item-hud-size");if(a!=this.size){this.ytb(a==sc.Oja.mj);this.size=a}}}})});ig.J=h;
ig.N("game.feature.gui.hud.element-hud").O("impact.feature.gui.gui","game.feature.combat.model.combat-params","game.feature.model.options-model").K(function(){var a=[sc.ha.HEAT,sc.ha.COLD,sc.ha.SHOCK,sc.ha.WAVE],b=Vec2.vc(0,0);sc.Jgb=ig.da.extend({R:{DEFAULT:{state:{},time:0.15,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.15,p:KEY_SPLINES.EASE_IN}},n:0,Hr:[],f:function(){this.parent();this.F(64,64);this.a.zIndex=1181;this.a.xf=h;for(var b=0;b<a.length;++b){var c=new sc.Kgb(i[a[b]]);this.Hr.push(c);
this.m(c)}this.j("HIDDEN",h);sc.P.Wa(sc.q.T,this)},Ab:function(a,b){b==sc.dd.wP&&sc.options.get("element-select")},oXb:function(b){for(var c=0;c<a.length;++c)this.Hr[c].show(b,b==a[c]);this.n=0.5;this.j("DEFAULT")},hide:function(){for(var b=0;b<a.length;++b)this.Hr[b].hide();this.j("HIDDEN")},update:function(){if(this.n){this.n=this.n-ig.i.Sa;this.n<=0&&this.hide()}this.qj(h)},qj:function(){var a=ig.r.cb;if(a){a=a.b;ig.i.Jy(b,Math.round(a.g.x+a.size.x/2),Math.round(a.g.y-a.g.z-a.size.z/2+a.size.y/
2));this.a.g.x=b.x-this.a.size.x/2;this.a.g.y=b.y-this.a.size.y/2}}});var c={qv:ig.k.Ia,fy:ig.k.$,Vj:0,rotate:0,$fa:16,aga:32,Yfa:16,Zfa:0},d={qv:ig.k.ra,fy:ig.k.vb,Vj:1,rotate:0.25,$fa:0,aga:16,Yfa:32,Zfa:16},f={qv:ig.k.hb,fy:ig.k.vb,Vj:3,rotate:0.75,$fa:32,aga:16,Yfa:0,Zfa:16},i={};i[sc.ha.HEAT]={qv:ig.k.Ia,fy:ig.k.Cb,Vj:2,rotate:0.5,$fa:16,aga:0,Yfa:16,Zfa:32};i[sc.ha.COLD]=c;i[sc.ha.SHOCK]=d;i[sc.ha.WAVE]=f;sc.Kgb=ig.da.extend({R:{DEFAULT:{state:{},time:0.15,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:0,
Va:0},time:0.15,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/status-gui.png"),AD:q,ps:0,gma:y,f:function(a){this.parent();this.AD=a;this.F(32,32);this.H(a.qv,a.fy);this.j("HIDDEN",h)},show:function(a,b){this.ps=a;this.gma=b;a!=sc.ha.NEUTRAL?this.Eb(this.AD.$fa,this.AD.aga):this.Eb(this.AD.Yfa,this.AD.Zfa);this.j("HIDDEN",h);this.j("DEFAULT")},hide:function(){this.ps!=sc.ha.NEUTRAL?this.Eb(this.AD.Yfa,this.AD.Zfa):this.Eb(this.AD.$fa,this.AD.aga);this.j("HIDDEN")},Da:function(a){!this.gma&&this.AD.rotate&&
a.ks().Eb(16,16).L7(this.AD.rotate*2*Math.PI);var b=i[this.ps],c,d=0,f;if(this.gma){b=128+b.Vj*32;c=224;f=32}else{b=b?136+(1+b.Vj)*24:136;c=200;f=24;d=4}a.na(this.s,d,0,b,c,f,f);!this.gma&&this.AD.rotate&&a.Xs()}})});ig.J=h;
ig.N("game.feature.gui.hud.money-hud").O("game.feature.gui.hud.right-hud").K(function(){sc.VRa=ig.da.extend({s:new ig.ia("media/gui/message.png"),oc:q,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(a){this.parent();this.oc=new sc.Tb(9999999,{showPlus:!a,signed:h,transitionTime:0.5});this.oc.l(0,2);this.m(this.oc);this.a.size.x=this.oc.a.size.x+10+4;this.a.size.y=this.oc.a.size.y+4;this.a.Db.x=this.a.size.x;this.a.Db.y=a?this.a.size.y:
0},Da:function(a){a.na(this.s,this.a.size.x-10,2,0,88,10,8)}});sc.jkb=ig.da.extend({VT:q,cia:q,f:function(){this.parent();this.VT=new sc.VRa(y);this.cia=new sc.VRa(h);this.m(this.VT);this.m(this.cia);this.a.size.x=this.VT.a.size.x;this.a.size.y=this.VT.a.size.y},KK:function(a){this.cia.j("HIDDEN",h);this.VT.j("DEFAULT",h);this.VT.oc.za(a)},SMa:function(a){this.VT.j("HIDDEN");this.cia.j("DEFAULT");this.cia.oc.za(a)},clear:function(){this.VT.oc.za(0,h)}});sc.kkb=sc.rC.extend({Fm:q,M2:0,n:0,f:function(){this.parent(ig.lang.get("sc.gui.money-hud.title"));
this.Fm=new sc.jkb;this.Rr(this.Fm);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q,this)},update:function(){if(this.n>0){var a=this.n;this.n=this.n-ig.i.Sa;if(this.n<=0){this.M2=0;this.Fm.clear();this.hide()}a>2&&this.n<=2&&this.SMa()}},Ab:function(a,b,c){if(a==sc.q.T)b==sc.dd.kja&&sc.options.get("show-money")&&this.cub(c);else if(a==sc.q&&b==sc.zf.cs&&sc.q.nO!=sc.Dg.Hxa){this.n=this.M2=0;this.Fm.clear();this.hide()}},cub:function(a){this.M2=this.M2+a;this.Fm.KK(this.M2);this.n=5;this.show()},SMa:function(){this.Fm.SMa(sc.q.T.df)}})});
ig.J=h;
ig.N("game.feature.gui.hud.task-hud").O("game.feature.gui.hud.right-hud").K(function(){sc.Vob=sc.rC.extend({Fm:q,M2:0,n:0,f:function(){this.parent(ig.lang.get("sc.gui.task-hud.title"));this.Fm=new sc.ea("",{bestRatio:12,maxWidth:240});this.Rr(this.Fm);sc.P.Wa(sc.q,this)},update:function(){if(!ig.r.paused&&!this.hidden&&!sc.q.H5&&this.n>0){this.n=this.n-ig.i.Sa;this.n<=0&&this.hide()}},Ab:function(a,b){if(a==sc.q){var c=a.ef||a.kga||"";if(b==sc.zf.UTa){a.ef&&!this.hidden&&this.hide(h);if(a.ef){this.Fm.ga(c);this.Qga(0,
this.Fm);this.show();this.n=7}else{this.n=0;this.hide()}}else if(b==sc.zf.pSa){this.Fm.ga(c);this.Qga(0,this.Fm)}else if(b==sc.zf.cs)if(a.Kr()&&c){this.Fm.ga(c);this.Qga(0,this.Fm);this.show()}else if((a.Oo()||a.jx())&&c)this.hide();else if(!a.H5&&a.oe())this.hide();else if(c&&(this.n>0||a.H5)){this.Fm.ga(c);this.Qga(0,this.Fm);this.show()}else this.hide();else if(b==sc.zf.Ew&&a.gZ())this.n=0}}})});ig.J=h;
ig.N("game.feature.gui.hud.hp-hud").O("impact.feature.gui.gui","game.feature.gui.base.numbers","game.feature.model.options-model").K(function(){sc.fib=ig.da.extend({R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/status-gui.png"),O3:q,zD:q,Lh:q,uJ:y,P3:0,f:function(a){this.parent();this.F(68,16);this.Eb(36,16);this.zD=new sc.Tb(9999,{signed:h,transitionTime:0.5});this.zD.l(12,1);this.m(this.zD);this.O3=new sc.ea("\\c[1]CRITICAL",
{font:sc.Ea.Ib});this.O3.l(20,0);this.m(this.O3);this.O3.a.nd=0;a=sc.q.T.W;this.Lh=new sc.hRa(a,48,3);this.Lh.l(12,9);this.m(this.Lh);sc.P.Wa(a,this);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.options,this);this.zD.za(a.Sc,h)},update:function(){if(this.uJ){this.zD.a.nd=0;this.P3=this.P3-ig.i.Sa;if(this.P3<=0)this.P3=0.1;this.O3.a.nd=this.P3<0.05?0:1}else{this.zD.a.nd=1;this.P3=this.O3.a.nd=0}var a=sc.q.T.Nda()?1:(sc.q.T.exp/sc.yP).Rb(0,1);this.Lh.aMa(a)},Da:function(a){a.na(this.s,0,0,0,0,this.a.size.x,this.a.size.y)},
Ab:function(a,b){if(a==sc.q.T.W){var c=Math.max(0,a.Sc);b==sc.ei.uI?this.zD.za(c):b==sc.ei.bs?this.zD.za(c,!this.a.lm):b==sc.ei.mka&&this.zD.za(c,h);if(b==sc.ei.uI||b==sc.ei.bs)if(a.Gy()<=sc.z9){this.zD.pe(sc.Od.Nl);sc.options.get("low-health-warning")&&ig.Ud.EH("RED",1,0.4,0.5)}else{this.zD.pe(sc.Od.$n);sc.options.get("low-health-warning")&&ig.Ud.EH("RED",0,0.4)}this.uJ=a.Sc<=0&&!a.$F}else if(a==sc.q.T){if(b==sc.dd.k$||b==sc.dd.hja){c=sc.q.T.W;this.zD.za(Math.max(0,c.Sc),h);this.Lh.qJb();this.uJ=
c.Sc<=0&&!c.$F}}else a==sc.options&&b==sc.ct.$z&&(this.Cj/this.$v<=sc.z9?sc.options.get("low-health-warning")?ig.Ud.EH("RED",1,0.4,0.5):ig.Ud.EH("RED",0,0.4):ig.Ud.EH("RED",0,0.4))}});sc.hRa=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),$v:0,Sc:0,Cj:0,n:0,XDa:0,W:q,width:0,height:0,roa:0,f:function(a,b,c){this.parent();this.W=a;this.width=b||48;this.height=c||3;this.$v=a.Td("hp");this.Sc=this.Cj=a.Sc},Vo:function(){sc.P.Wa(this.W,this)},pi:function(){sc.P.Hc(this.W,this)},update:function(){if(this.Cj<
0){this.Sc=-1;this.n=(this.n+ig.i.Sa)%0.2}else if(this.n>0)this.n=this.n-ig.i.Sa;else if(this.Cj!=this.Sc){var a=ig.i.Sa*this.$v/2;if(this.Sc>this.Cj)this.Sc=Math.max(this.Cj,this.Sc-a);else if(this.Sc<this.Cj)this.Sc=Math.min(this.Cj,this.Sc+a)}if(this.roa>=1)this.XDa=(this.XDa+ig.i.Sa)%0.2},aMa:L("roa"),qJb:function(){this.$v=this.W.Td("hp");this.Sc=this.Cj=this.W.Sc},Da:function(a){var b,c,d,f,i=1;if(this.Cj>0){if(this.Cj<this.Sc){c=this.Sc/this.$v;b=this.Cj/this.$v;f=49}else{c=this.Cj/this.$v;
b=this.Sc/this.$v;f=51}d=b>sc.z9?48:50}else{b=1;d=50;i=this.n/0.2;i=(i<0.5?i:1-i)*2}for(var j=0;j<this.height;j++){c&&this.Cj!=this.Sc&&a.na(this.s,j,j,0,f,c.Rb(0,1)*this.width,1).ge(i);b>0&&a.na(this.s,j,j,0,d,b.Rb(0,1)*this.width,1).ge(i)}b=this.XDa>0.1;c=this.roa;d=this.roa>=1;c&&a.na(this.s,this.height+1,this.height+1,0,48+(d&&b?6:4),c.Rb(0,1)*this.width,1)},Ab:function(a,b){if(b==sc.ei.uI){this.n=0.5;if((this.Cj-this.Sc)*(a.Sc-this.Cj)<0)this.Sc=this.Cj;this.Cj=a.Sc;this.$v=a.Td("hp")}else if(b==
sc.ei.bs){this.$v=a.Td("hp");this.Cj=a.Sc;this.Sc=this.Sc-(this.Cj-a.Sc)}else if(b==sc.ei.mka){this.$v=a.Td("hp");this.Sc=this.Cj=a.Sc}if(this.Sc<-1)this.Sc=-1}})});ig.J=h;
ig.N("game.feature.gui.hud.sp-hud").O("impact.feature.gui.gui","game.feature.gui.base.numbers","game.feature.combat.model.combat-params").K(function(){function a(a,b,d,j,k,o,t){var p=f,I=i;o||(I=I+r);t||(I=I+u);o=l*2+m*4;t=o-n;if(j!=g){p=p+(l+j*m);o=o-(l+j*m);t=o-n}if(k!=g)t=o=o-(l+(4-k)*m);a.na(b,d.ew,0,p,I,o,c);d.ew=d.ew+t}function b(b,d,f,i,l,m,n){f.Lf&&f.Lf%4==0&&a(b,d,f,g,0,n!=w.K1,i<=l);var K=i<=l,I=6,m=KEY_SPLINES.EASE_IN_OUT.get(m),I=Math.round(m*I+(1-m)*3),G=Math.floor(I*(i-Math.floor(i))),
m=1+G,G=1+I-G,D=o,E=t;if(n==w.V0){D=j;E=k}else if(n==w.K1){D=j;E=k+8}else K||(E=E+u);b.na(d,f.ew,0,D,E,m,c);n||(E=E+r);D=D+(p-G);b.na(d,f.ew+m,0,D,E,G,c);f.ew=f.ew+(I+2);f.Lf++;f.Rl++;if(f.Lf%4==0){a(b,d,f,4,g,n==w.V0,i<=l);f.Rl=0;f.qh=(l-f.Lf).Rb(0,4)}}var c=7,d={Lf:0,ew:0,Rl:0,qh:0};sc.fob=ig.da.extend({xA:0,qM:0,qS:y,zE:0,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/status-gui.png"),f:function(){this.parent();this.F(142,
c);this.Eb(71,3);var a=sc.q.T.W;sc.P.Wa(a,this);sc.P.Wa(sc.q.T,this);a.Qo==0&&this.j("HIDDEN",h)},update:function(){var a=sc.q.T.W.nm,b=this.zE!=Math.floor(this.zE);if(a>this.zE){if(!this.qS&&!b){this.qS=y;this.qM=0.2}if(Math.floor(this.zE)<Math.floor(a)){this.qS=y;this.xA=0.2;if(Math.floor(a)<a)this.qM=0.2}}else if(a<this.zE){if(Math.floor(a)==a&&b){this.qS=h;this.xA=0.2}if(Math.floor(this.zE)>Math.floor(a)){this.qS=h;this.qM=0.2;if(b)this.xA=0.2}}this.zE=a;if(this.qM){this.qM=this.qM-ig.i.Sa;if(this.qM<
0)this.qM=0}if(this.xA){this.xA=this.xA-ig.i.Sa;if(this.xA<0)this.xA=0}},Da:function(f){var i=sc.q.T.W,j=i.Qo||4,k=j*sc.dW,i=i.nm,l=Math.floor(i);f.na(this.s,0,0,0,16,19,c);this.xA&&!this.qS&&(l=Math.max(0,l-1));d.ew=19;d.Lf=0;d.Rl=Math.min(4,l);for(d.qh=Math.min(4,k);d.Lf+1<=l;){var m=d.Lf?g:0;if(d.Rl==4&&(d.qh==4||d.qh==0))a(f,this.s,d,m,g,h,d.qh==4);else if(d.qh>0&&d.qh<d.Rl){var n=d.Rl==4?g:d.Rl;a(f,this.s,d,m,d.qh,h,h);a(f,this.s,d,d.qh,n,h,y)}else a(f,this.s,d,m,d.Rl,h,d.qh>0);d.Lf=d.Lf+d.Rl;
if(d.Rl==4){d.Rl=Math.min(4,l-d.Lf);d.qh=(k-d.Lf).Rb(0,4)}}if(this.xA&&!this.qS){m=this.xA/0.2;b(f,this.s,d,d.Lf-0.001,k,m,w.V0);l++}if(i-l>0){m=(0.2-this.qM)/0.2;b(f,this.s,d,i,k,m)}if(this.xA&&this.qS){m=this.xA/0.2;b(f,this.s,d,d.Lf+1,k,m,w.K1)}if(d.Lf==0||d.Lf%4!=0){if(d.qh>d.Rl&&d.qh<4){a(f,this.s,d,d.Rl,d.qh,y,h);d.Rl=d.qh}a(f,this.s,d,d.Rl,g,y,d.qh==4);d.Lf=d.Lf==0?4:Math.ceil(d.Lf/4)*4}for(;d.Lf<j;){d.qh=(k-d.Lf).Rb(0,4);if(d.qh==4||d.qh==0)a(f,this.s,d,g,g,y,d.qh==4);else{a(f,this.s,d,g,
d.qh,y,h);a(f,this.s,d,d.qh,g,y,y)}d.Lf=d.Lf+4}},Ab:function(a,b){if(a==sc.q.T.W){if(b==sc.ei.dxa)if(sc.q.T.W.Qo==0){this.j("HIDDEN");this.zE=0}else this.j("DEFAULT")}else a==sc.q.T&&b==sc.dd.ZPa&&(sc.q.T.ki(sc.ng.SPECIAL)?this.j("DEFAULT"):this.j("HIDDEN"))}});var f=96,i=0,j=40,k=16,l=8,m=5,n=6,o=68,t=0,p=26,r=16,u=8,w={NONE:0,V0:1,K1:2}});ig.J=h;
ig.N("game.feature.gui.hud.param-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box").K(function(){sc.NL=ig.da.extend({R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}},aa:q,Tg:q,gr:q,rr:q,xr:q,pla:y,f:function(){this.parent();this.aa=new sc.NL.qjb;this.aa.H(ig.k.hb,ig.k.$);this.m(this.aa);this.Tg=new sc.NL.hka("maxhp","hp",62,9999,0);this.Tg.H(ig.k.hb,ig.k.$);this.Tg.l(52,0);this.m(this.Tg);this.gr=
new sc.NL.hka("atk","attack",54,999,1);this.gr.H(ig.k.hb,ig.k.$);this.gr.l(100,0);this.m(this.gr);this.rr=new sc.NL.hka("def","defense",54,999,2);this.rr.H(ig.k.hb,ig.k.$);this.rr.l(140,0);this.m(this.rr);this.xr=new sc.NL.hka("foc","focus",54,999,3);this.xr.H(ig.k.hb,ig.k.$);this.xr.l(180,0);this.m(this.xr);this.hGa(h);this.j("DEFAULT")},PMa:function(a){a?this.Mv()||this.pla?this.kd(54,26,0.2,KEY_SPLINES.EASE):this.l(54,26):this.Mv()||this.pla?this.kd(52,5,0.2,KEY_SPLINES.LINEAR):this.l(52,5);this.pla=
h;this.aa.j("DEFAULT",y,y,q,0.048);this.Tg.j("DEFAULT",y,y,q,0.048);this.gr.j("DEFAULT",y,y,q,0.048);this.rr.j("DEFAULT",y,y,q,0.048);this.xr.j("DEFAULT",y,y,q,0.048)},hGa:function(a){a=a!=g?a:y;this.aa.j("HIDDEN",a);this.Tg.j("HIDDEN",a);this.gr.j("HIDDEN",a);this.rr.j("HIDDEN",a);this.xr.j("HIDDEN",a);this.pla=y}});sc.NL.AQb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),param:"",offsetX:0,offsetY:0,Le:0,Eaa:1,EXa:1,f:function(a){this.parent();this.param=a;this.F(8,8);sc.P.Wa(sc.q.T,this);
this.Le=0.2;this.OUa(1)},update:function(){if(this.Le<0.2){this.Le=this.Le+ig.i.Sa;if(this.Le>=0.2)this.Le=0.2;this.OUa(this.yrb())}},Da:function(a){a.na(this.s,0,0,1+this.offsetX,146+this.offsetY,this.a.size.x,this.a.size.y)},yrb:function(){if(this.Le>=0.2)return this.Eaa;var a=this.Le/0.2;return(1-a)*this.EXa+a*this.Eaa},OUa:function(a){var b=a<1?(a-1)*-1+1:a,c=(Math.abs(b)-1)*10%6;this.offsetX=(a<1?Math.ceil(c):Math.floor(c))*9;this.offsetY=(a<1?18:0)+(Math.abs(b)-1>=0.6?9:0)},Ab:function(a,b){if(a==
sc.q.T&&(b==sc.dd.wP||b==sc.dd.DL||b==sc.dd.PL)){var c=sc.q.T.H1a().SAb(this.param);if(this.Eaa!=c){this.Le=0;this.EXa=this.Eaa;this.Eaa=c}}}});sc.NL.hka=ig.Ue.extend({gb:new ig.jc("media/gui/status-gui.png",{width:3,height:0,left:17,top:17,right:17,bottom:0,Vb:{"default":{x:0,y:128}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{Va:0,alpha:0,Xa:0.8},time:0.2,p:KEY_SPLINES.LINEAR}},wla:q,iM:q,jq:q,fAa:"",f:function(a,b,c,d,f){this.parent(c,17);this.a.Db.x=0;this.a.Db.y=0;this.fAa=
b;sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q.T.W,this);this.iM=new sc.ea(ig.lang.get("sc.gui.status-hud."+a),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.iM.H(ig.k.hb,ig.k.$);this.iM.l(19,0);this.m(this.iM);this.wla=new ig.ec(this.gb.s,f*8,232,8,8);this.wla.H(ig.k.hb,ig.k.$);this.wla.l(9,0);this.m(this.wla);this.jq=new sc.Tb(d,{signed:h,transitionTime:0.2});this.jq.H(ig.k.ra,ig.k.Cb);this.jq.l(10,1);this.Ala(h);this.m(this.jq);this.j("HIDDEN",h)},Ala:function(a){var b=sc.q.T.W.Td(this.fAa);this.jq.za(b,a);a=sc.q.T.W.oBb(this.fAa);
b=sc.Od.$n;if(a<1)b=sc.Od.Nl;if(a>1)b=sc.Od.zw;this.jq.pe(b)},Ab:function(a,b){a==sc.q.T?b==sc.dd.wP||b==sc.dd.DL?this.Ala():(b==sc.dd.uja||b==sc.dd.L1||b==sc.dd.hja||b==sc.dd.k$||b==sc.dd.PL)&&this.Ala(!this.a.lm):a==sc.q.T.W&&b==sc.ei.bs&&this.Ala(!this.a.lm)}});sc.NL.qjb=ig.Ue.extend({gb:new ig.jc("media/gui/status-gui.png",{width:3,height:0,left:17,top:17,right:17,bottom:0,Vb:{"default":{x:0,y:128}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{Va:0,alpha:0,Xa:0.8},time:0.2,
p:KEY_SPLINES.LINEAR}},iM:q,BW:q,f:function(){this.parent(66,17);this.a.Db.x=0;this.a.Db.y=0;sc.P.Wa(sc.q.T,this);this.iM=new sc.ea(ig.lang.get("sc.gui.status-hud.lvl"),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.iM.H(ig.k.hb,ig.k.$);this.iM.l(10,1);this.m(this.iM);this.BW=new sc.Tb(99,{signed:h,transitionTime:0.2,size:sc.Ff.Uh});this.BW.H(ig.k.ra,ig.k.Cb);this.BW.l(17,1);this.BW.za(sc.q.T.aa,h);this.m(this.BW);this.j("HIDDEN",h)},Ab:function(a,b){a==sc.q.T&&(b==sc.dd.DL?this.BW.za(sc.q.T.aa):b==sc.dd.k$&&
this.BW.za(sc.q.T.aa,h))}})});ig.J=h;
ig.N("game.feature.gui.hud.buff-hud").O("impact.feature.gui.gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui").K(function(){sc.jfb=ig.Ue.extend({gb:new ig.jc("media/gui/status-gui.png",{width:2,height:0,left:2,top:10,right:2,bottom:0,Vb:{"default":{x:241,y:128}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:20},time:0.2,p:KEY_SPLINES.LINEAR},REMOVE:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},SCALED:{state:{Xa:0},time:0.2,p:KEY_SPLINES.EASE}},
$Q:q,id:0,f:function(a,b,c){this.parent(10,10);this.$Q=a;this.id=b||0;a=new sc.ea(a.qGa,{font:sc.Ea.Ib,speed:ig.Rd.se.zg});a.H(ig.k.hb,ig.k.$);a.l(1,1);this.m(a);this.F(a.a.size.x+5+1,10);this.l(c,0);this.Eb(0,this.a.size.y/2);this.j(b==0?"HIDDEN":"SCALED",h)},Da:function(a){this.parent(a);if(this.$Q.WFa){var b=Math.ceil(this.$Q.wpa()*8);a.na(this.gb.s,this.a.size.x-4,1,249,129,2,8);b>0&&a.na(this.gb.s,this.a.size.x-4,this.a.size.y-1-b,252,129+(8-b),2,b)}}});sc.kfb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),
SO:q,dD:q,bu:[],f:function(){this.parent();sc.P.Wa(sc.q.T.W,this);this.SO=new ig.ec(this.s,216,128,10,10);this.SO.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:20},time:0.2,p:KEY_SPLINES.LINEAR},REMOVE:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.SO.j("REMOVE",h);this.m(this.SO);this.dD=new ig.ec(this.s,230,129,10,10);this.dD.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:20},time:0.2,p:KEY_SPLINES.LINEAR},REMOVE:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR}};this.dD.j("REMOVE",h);this.m(this.dD)},update:function(){for(var a=this.bu.length,b=y;a--;)if(this.bu[a]&&this.bu[a].$Q.wpa()<=0){a==0&&!this.bu[a+1]?this.bu[a].j("REMOVE",y,h):this.bu[a].j("SCALED",y,h);this.bu.splice(a,1);b=h}if(b&&this.EMb()){this.SO.j("REMOVE");this.dD.j("REMOVE")}},EMb:function(){for(var a=10,b=h,c=q,d=0;d<this.bu.length;d++)if(c=this.bu[d]){b=y;c.kd(a,0,0.2,KEY_SPLINES.EASE);c.id=d;a=a+c.a.size.x}b||this.dD.kd(a,0,0.2,KEY_SPLINES.EASE);return b},
Qla:function(a){for(var b=10,c=0,d=0;d<this.bu.length;d++)if(this.bu[d]){b=b+this.bu[d].a.size.x;c++}a=new sc.jfb(a,c,b);a.j("DEFAULT");this.m(a);this.bu[c]=a;if(c==0){this.SO.j("HIDDEN",h);this.dD.j("HIDDEN",h);this.dD.l(b+a.a.size.x,0)}else this.dD.kd(b+a.a.size.x,0,0.2,KEY_SPLINES.EASE);this.SO.j("DEFAULT");this.dD.j("DEFAULT")},OIb:function(){this.a.rh();for(var a=0;a<this.bu.length;a++)this.bu[a]&&this.bu[a].j("REMOVE",h,h);this.bu.length=0;this.SO.j("REMOVE",h);this.dD.j("REMOVE",h);this.m(this.SO);
this.m(this.dD)},Ab:function(a,b,c){b==sc.ei.Zva?this.Qla(c):b==sc.ei.mka&&this.OIb()}})});ig.J=h;
ig.N("game.feature.gui.hud.item-timer-hud").O("impact.feature.gui.gui","impact.feature.gui.base.box").K(function(){sc.Nib=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0},time:0.2,p:KEY_SPLINES.EASE_IN}},Jf:q,T:q,Fa:q,f:function(){this.parent();this.F(44,10);this.Eb(0,5);sc.P.Wa(sc.q.T,this);this.T=sc.q.T;this.Jf=new sc.Tb(60,{leadingZeros:2,size:sc.Ff.jF,color:sc.Od.$n});this.Jf.H(ig.k.hb,ig.k.vb);this.Jf.za(0);
this.Jf.l(18,0);this.m(this.Jf);this.j("HIDDEN",h)},update:function(){this.a.lm&&this.Jf.za(Math.ceil(this.T.kx))},Da:function(a){a.na(this.s,0,0,216,160,this.a.size.x,this.a.size.y);a.nc("white",16,8,Math.ceil(this.T.kx/this.Fa*13),1)},Ab:function(a,b){if(a==sc.q.T)if(b==sc.dd.A9){this.Fa=this.T.kx;this.Jf.za(this.T.kx);this.j("DEFAULT")}else b==sc.dd.Nja?this.j("HIDDEN"):b==sc.dd.L1&&this.j("HIDDEN",h)}})});ig.J=h;
ig.N("game.feature.quick-menu.quick-menu-model").O("impact.base.game","impact.feature.interact.button-interact","impact.feature.database.database","game.feature.model.base-model").K(function(){sc.hm={};sc.hm.NONE=0;sc.hm.VE=1;sc.hm.c9=2;sc.hm.PP=3;sc.hm.$j=4;sc.smb=ig.Uf.extend({Uo:[],Z:q,vF:y,xe:sc.hm.NONE,Bga:sc.hm.NONE,visible:y,bca:y,cursor:Vec2.vc(0,0),co:q,cEb:0,iB:q,OF:q,JC:q,ZMa:y,Js:[],$ca:y,Kea:0,f:function(){this.parent("QuickMenuModel");this.Z=new ig.$s;window.Ed&&ig.Yh.Lg("names","NPCNamesList",
"NPC Names");this.Js=ig.Yh.get("names")},loa:function(){ig.La.De(this.Z);this.visible=h},jyb:function(){ig.La.$e(this.Z);this.visible=y;this.Bga=this.xe=sc.hm.NONE;this.cEb=0;this.bca=y;this.co=q;this.cursor.x=0;this.cursor.y=0;this.ZMa?this.ZMa=y:this.vF=y;sc.P.Ga(this,sc.il.uV)},Sxb:function(){this.Jla(sc.hm.VE)},Yxb:function(){this.Jla(sc.hm.PP)},Oxb:function(){this.Jla(sc.hm.c9)},HDa:function(){this.Jla(sc.hm.NONE)},Cc:function(a,b){this.iB=a;sc.P.Ga(this,sc.il.oC,b)},Rj:function(a,b,c){this.OF=
a;this.JC=c>=0?c:q;sc.P.Ga(this,sc.il.Y8,b)},NNb:function(){sc.P.Ga(this,sc.il.lRa)},J9a:function(){this.bca=y;if(this.co)this.co.focus=y;this.co=q},Y0a:function(a,b,c,d){if(this.co==c){if(ig.input.qb==ig.Yb.Wc){this.cursor.x=a;this.cursor.y=b;sc.P.Ga(this,sc.il.zQa)}}else{this.cursor.x=a;this.cursor.y=b;this.co&&this.co.focus&&this.co.ai();(this.co=c)&&!this.co.focus&&this.co.Lo();sc.P.Ga(this,sc.il.RQa,d)}},qva:function(a){if(this.co==a){this.co&&this.co.ai();this.co=q;sc.P.Ga(this,sc.il.jUa)}},
tDb:function(){return this.Kea==ig.input.qb},Jla:function(a){if(this.xe!=a){this.Bga=this.xe;this.xe=a;sc.P.Ga(this,sc.il.eW)}},d5a:function(){return this.xe==sc.hm.NONE},eHa:function(){return this.xe==sc.hm.VE},fHa:function(){return this.xe==sc.hm.PP},yea:function(){return this.xe==sc.hm.c9}});sc.il={};sc.il.uV=0;sc.il.eW=1;sc.il.oC=2;sc.il.Y8=3;sc.il.lRa=4;sc.il.RQa=5;sc.il.jUa=6;sc.il.zQa=7;ig.Vf(function(){return sc.Kb=new sc.smb})});ig.J=h;
ig.N("game.feature.menu.map-model").O("impact.base.game","impact.base.loader","impact.base.vars","impact.feature.database.database","game.config","game.feature.quick-menu.quick-menu-model","game.feature.model.options-model").K(function(){var a={mo:"",Lb:""};sc.fQb={DEFAULT:{Y:q,au:{x:0,y:0,Vc:8,sd:8}}};sc.DRa={DUNGEON:1,NO_DUNGEON:2};sc.gV={};sc.gV.TOWN=0;sc.gV.PATH=1;sc.gV.DUNGEON=2;sc.JE={DUNGEON_KEY:{$la:"keyItem"},DUNGEON_MASTER_KEY:{$la:"masterKeyItem"},BOOSTER:{$la:"boosterItem"}};sc.Yjb=ig.Uf.extend({Uo:[],
Sm:{},areas:q,vA:{},gi:q,uj:q,W3:0,Tk:0,uR:q,WXb:q,bOa:q,LAa:[],f:function(){this.parent("MapModel");ig.zd.Lg(this);window.Ed&&ig.Yh.Lg("areas","AreaList","Areas");this.PCb();ig.ma.Up("area",this,"VarAreaEditor");ig.ma.Up("location",this,"VarLocationEditor")},xpa:function(a){var c=0,d=0,f;for(f in this.areas)if(this.areas[f].track){this.vA[f.np()]&&c++;d++}return a?c/d:c},Ada:function(a){var c=0,d=0,f;for(f in this.areas)for(var i in this.areas[f].landmarks)if(this.areas[f].track){this.Sm[f]&&this.Sm[f][i]&&
c++;d++}return a?c/d:c},T4:function(a){var c=0,d=0,f;for(f in this.areas)if(this.areas[f].track){var i=sc.pa.Qf("chests",f)||0;i>this.areas[f].chests&&(i=this.areas[f].chests);c=c+i;d=d+(this.areas[f].chests||0)}return a?c/d:c},wBb:function(){var a=0,c;for(c in this.areas)this.areas[c].track&&(a=a+(this.areas[c].chests||0));return a},i3a:function(){for(var a in this.areas)if(this.areas[a].track&&!this.vA[a.np()])return y;return h},xFa:function(a){if(a=this.Sm[a]){var c=0,d;for(d in a)c++;return c||
0}},PG:10,Ms:function(a){this.uR=a.name.MNb();a=a.attributes&&a.attributes.area||"fallback";this.ROb(a);var c=y;this.gi&&this.gi.path!=a?c=h:this.gi||(c=h);if(c){this.gi=new sc.Sva(a);this.gi.Yt(this);this.uj=this.gi}else{this.uj=this.gi;this.Eq()}},dK:150,qx:function(){var a=ig.r.entities,c=a.length;Math.seedrandomSeed(ig.r.uZ);this.LAa.length=0;for(var d=sc.Kb.Js,f=0,i=sc.aF.BOTH;c--;){var j=a[c];if(j&&j instanceof ig.wa.NPC&&!j.Zi&&!j.Ad.data.name){for(var i=sc.aF[j.Ad.data.gender]||sc.aF.BOTH,
k=Math.floor(Math.randomSeed()*d.length),f=0;!this.cvb(i,sc.aF[d[k].gender])||this.LAa[k];){k=Math.floor(Math.randomSeed()*d.length);f++;if(f>=3)break}this.LAa[k]=h;j.Pna=ig.Ra.ic(d[k].name)}}sc.P.Ga(sc.map,sc.JP.ERa)},cvb:function(a,c){switch(c||0){case sc.aF.BOTH:return a==sc.aF.MALE||a==sc.aF.FEMALE;case sc.aF.MALE:return a==sc.aF.MALE;case sc.aF.FEMALE:return a==sc.aF.FEMALE}return y},fj:function(){this.vA={};this.Sm={}},bm:function(a,c){if(c[0]=="area"){var d=c[1];if(this.areas[d])switch(c[2]){case "name":return ig.Ra.ic(this.areas[d].name);
case "isCurrent":return this.gi&&this.gi.path==d;case "isBoosted":return this.Roa(sc.JE.BOOSTER,d);case "chests":return(this.areas[d].chests||0)+"";case "landmark":switch(c[3]){case "name":return ig.Ra.ic(this.areas[d].landmarks[c[4]].name);case "active":return this.Sm[c[1]][c[4]]?h:y}break;case "unlocked":return this.vA[d.np()]?h:y}}if(c[0]=="location")switch(c[1]){case "current":return this.gi&&this.gi.path;case "isMapDungeon":return this.z5();case "isAreaDungon":return this.z5(h)}e(Error("Unsupported var access path: "+
a))},PCb:function(){this.areas=ig.Yh.get("areas")},PHa:function(a,c){if(a==this.gi.path){this.uj=this.gi;c.Eq(h,this.uj)}else{this.uj=new sc.Sva(a);this.uj.Yt(c)}},hOb:function(){if(this.uj.path!=this.gi.path){this.uj.Tc();this.uj=q}},ROb:function(a){if(!this.vA[a.np()]){this.areas[a].track&&sc.pa.bc("exploration","areas",1);this.vA[a.np()]={}}},eOb:function(a,c){if(this.vA[a.np()]){this.areas[a].track&&sc.pa.RH("exploration","areas",1);delete this.vA[a.np()]}if(c)for(var d=c.data.floors,f=d.length;f--;)for(var i=
d[f],j=i.maps.length;j--;)ig.ma.set("maps."+i.maps[j].path.np().vm("",""),q)},peb:function(){var a=this.gi.data;if(a){var c=a.floors.length,d=0,f=q,i=q;this.W3=this.Tk=0;for(var j=y;c--;){f=a.floors[c];for(d=f.maps.length;d--;){i=f.maps[d];j=i.path==this.uR;i.zMin&&(j=j&ig.r.cb.b.aa>=i.zMin);i.zMax&&(j=j&ig.r.cb.b.aa<=i.zMax);if(j){this.Tk=this.W3=f.level||0;return}}}}},WOb:function(){var a=this.uj.data,c=a.floors.length,d=0,f=q,i=q;this.Tk=0;for(var j=a.defaultFloor==g?g:a.defaultFloor,k=y;c--;){f=
a.floors[c];for(d=f.maps.length;d--;){i=f.maps[d];k=ig.ma.get("maps."+i.path.np().vm("",""));i.zMin&&(k=k&ig.r.cb.b.aa>=i.zMin);i.zMax&&(k=k&ig.r.cb.b.aa<=i.zMax);if(k){if(j==g){this.Tk=f.level||0;return}if(j==f.level){this.Tk=j;return}}else f.level==j&&(j=g)}}},restore:function(){this.Tk=this.W3;this.uj&&this.gi&&this.uj.path!=this.gi.path&&this.uj.Tc();this.uj=this.gi},eYa:function(b,c,d){this.CDb(b,c||this.gi.path)||e(Error("invalid Landmark: "+b+"! Maybe missing entry in database?"));c=c||this.gi.path;
this.Sm[c]||(this.Sm[c]={});if(!this.Sm[c][b]||!this.Sm[c][b].active){if(this.Sm[c][b])this.Sm[c][b].active=h;else{this.Sm[c][b]={active:h};sc.pa.bc("exploration","landmarks",1);sc.pa.bc("exploration",c+"-landmarks",1);sc.pa.Ni("exploration","landmarksTotalRate",this.Ada(h));sc.e.xF({type:"LANDMARK",area:c,landmark:b})}a.mo=b;a.Lb=c||this.gi.path;d&&sc.options.get("update-landmark-style")!=sc.C$.NONE&&ig.r.vi.Dp(this.tAb(d),ig.Qm.INTERRUPTABLE);sc.dc.AGb(c);sc.P.Ga(this,sc.JP.Uwa,a)}},vNa:function(a){this.bOa=
this.uBb(a.path);sc.pa.bc("player","teleports",1);sc.q.Zw();sc.$r.TK(this.bOa)},tTb:function(a){return sc.gV[this.areas[a].areaType]},CDb:function(a,c){var d=this.areas[c].landmarks;return d?d[a]:y},Qoa:function(a,c){if(!c){if(!this.gi)return-1;c=this.gi.path}var d=this.areas[c][a.$la];return!d&&d!==0?-1:d},s1a:function(a,c){if(!c){if(!this.gi)return q;c=this.gi.path}var d=this.areas[c],f;for(f in sc.JE)if(a==d[sc.JE[f].$la])return f},Poa:function(a,c){var d=this.Qoa(a,c);return d==-1?0:sc.q.T.Dr(d)},
Roa:function(a,c){var d=this.Qoa(a,c);return d==-1?y:sc.q.T.Dr(d)>0&&sc.q.T.PJ(d)},XGa:function(a,c,d){if(c=c||this.gi&&this.gi.path){this.Sm[c]||(this.Sm[c]={});return!this.Sm[c][a]?y:d?this.Sm[c][a].active||y:this.Sm[c][a]||y}},bLb:function(a,c,d){(d=d||this.gi&&this.gi.path)&&this.Sm[d]&&this.Sm[d][a]&&(this.Sm[d][a].active=c||y)},pKb:function(a,c){var d=this.Sm[a];if(d)for(var f in d)d[f].active=c},z5:function(a){if(!this.gi)return y;if(!a)if(a=this.zAb(this.uR))return a==sc.DRa.DUNGEON;a=this.areas[this.gi.path];
return sc.gV[a&&a.areaType]==sc.gV.DUNGEON},j3a:function(){for(var a in this.areas)if(this.areas[a]&&this.areas[a].track&&this.vA[a.np()])return h;return y},S2a:function(){var a=[],c;for(c in this.areas)this.areas[c]&&(this.areas[c].track&&this.vA[c.np()])&&a.push(c);return a},xbb:function(a){if(a){a.sort(function(a,b){return(this.areas[a].order||0)-(this.areas[b].order||0)}.bind(this));return a}},jFa:function(a,c){var d=(c=this.areas[c])&&c.landmarks&&c.landmarks[a]&&c.landmarks[a].name;return d?
new ig.Ra(d):"???"},STb:function(a,c){return this.areas[c].landmarks[a]},F1a:function(a){return this.areas[this.uj.path].landmarks[a]},XEa:function(){return new ig.Ra(this.areas[this.gi.path].name)},G1a:function(){return new ig.Ra(this.areas[this.uj.path].name)},t1a:function(a){return this.areas[a]?this.areas[a].order||0:0},Kv:function(a,c){if(!a)return"";var d=this.areas[a];return d?new ig.Ra(c?d.shortName?d.shortName:d.name:d.name):q},Xoa:function(a){var c=this.lFa(this.uR);return a&&c==this.uR?
"???":c},lFa:function(a){for(var c=this.uj.data.floors[this.Woa()].maps,d=c.length;d--;){var f=c[d];if(f.path==a&&f.name)return new ig.Ra(f.name)}return this.uR},zAb:function(a){if(!this.uj||!this.uj.data)return q;var c=this.uj.data.floors[this.Woa()];if(!c)return q;for(var c=c.maps,d=c.length;d--;){var f=c[d];if(f.path==a)return sc.DRa[f.dungeon]||q}return q},Woa:function(){return this.Tk-this.uj.Yqa},kN:function(){return this.uj?this.uj.data:q},tAb:function(a){return new ig.Ja({steps:[{type:"SET_CAMERA_BETWEEN",
entity1:a,entity2:ig.r.cb,speed:"NORMAL",wait:h,transition:"EASE_OUT"},{type:"WAIT",time:1},{type:"RESET_CAMERA",speed:"NORMAL",transition:"EASE_IN_OUT"}]})},uBb:function(a){var c=ig.r.cb,d=[];d.push({type:"DO_ACTION",entity:ig.r.cb,action:[{type:"SET_Z_GRAVITY_FACTOR",value:0},{type:"SET_Z_VEL",value:0},{type:"WAIT",time:5}]});d.push({time:0.2,ignoreSlowDown:y,type:"WAIT"});d.push({type:"SET_TELEPORT_COLOR",lighter:h,color:"white"});d.push({color:"white",alpha:1,time:1,lighter:h,type:"SET_OVERLAY"});
d.push({type:"SET_CAMERA_TARGET",entity:c,speed:"NORMAL",transition:"EASE_IN_OUT",zoom:1.5});d.push({time:0.2,ignoreSlowDown:y,type:"WAIT"});d.push({type:"SHOW_EFFECT",entity:c,effect:{sheet:"teleport",name:"hideMapTeleport"}});for(c=sc.sa.He.length;c--;)d.push({type:"SHOW_EFFECT",entity:sc.sa.Xk(c),effect:{sheet:"teleport",name:"hideFast"}});d.push({time:1,ignoreSlowDown:y,type:"WAIT"});d.push({type:"TELEPORT",map:a,marker:"landmark"});d.push({time:3,ignoreSlowDown:y,type:"WAIT"});return new ig.Ja({steps:d})},
Bda:function(a){return this.vA[a.np()]},kUb:M("bOa"),Bzb:function(){return this.areas[this.uj.path].chests||0},tzb:function(a){return this.areas[a].chests||0},Fu:function(a){if(this.gi){a.area=this.areas[this.gi.path].name;if(this.W3!=g)for(var c=this.gi.data.floors,d=c.length;d--;){if(this.W3==c[d].level){a.floor=c[d].name?ig.Ra.ic(c[d].name):"";c=c[d].maps;for(d=c.length;d--;)if(c[d].path==this.uR&&c[d].name){a.specialMap=ig.Ra.ic(c[d].name);a.specialMap=c[d].name}break}}else a.floor="???"}else{a.area=
"???";a.floor=""}a.visitedAreas=ig.copy(this.vA);a.landmarks=ig.copy(this.Sm)},Bt:function(a){this.vA=a.visitedAreas||{};a=a.landmarks||{};this.Sm={};var c,d;for(d in a){c=0;for(var f in a[d]){this.Sm[d]||(this.Sm[d]={});var i=a[d][f];if(!i||i.active===g)i={active:h};this.Sm[d][f]=i;c++}sc.pa.Ni("exploration",d+"-landmarks",c)}sc.pa.Ni("exploration","landmarksTotalRate",this.Ada(h));sc.pa.Ni("chests","totalRate",sc.map.T4(h))},Eq:function(){this.peb()}});sc.JP={};sc.JP.Uwa=1;sc.JP.wQb=2;sc.JP.ERa=
3;ig.Vf(function(){return sc.map=new sc.Yjb})});ig.J=h;
ig.N("game.feature.gui.hud.key-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.menu.map-model").K(function(){sc.bjb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),gb:new ig.jc("media/gui/status-gui.png",{width:6,height:0,left:0,top:11,right:10,bottom:0,Vb:{"default":{x:128,y:128},master:{x:128,y:140}}}),R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0,p:KEY_SPLINES.LINEAR}},CYa:sc.JE.DUNGEON_KEY,
Eub:sc.JE.DUNGEON_MASTER_KEY,Jf:q,Lpa:y,f:function(){this.parent();this.Jf=new sc.Tb(9,{});this.Jf.za(0);this.Jf.l(11,2);this.m(this.Jf);this.j("HIDDEN");this.F(28,11);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q,this);this.a.nd=0.8},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.Lpa?"master":"default");a.na(this.s,1,0,144,this.Lpa?140:128,8,11)},Ab:function(a,b){a==sc.q?b==sc.zf.cs&&sc.q.ko()&&this.Ava():a==sc.q.T&&(b==sc.dd.Pja||b==sc.dd.Owa)&&this.Ndb()},Ava:function(){var a=sc.map.Qoa(this.CYa)!=
-1;sc.map.z5()||(a=y);this.j(a?"DEFAULT":"HIDDEN");this.Ndb()},Ndb:function(){var a=sc.map.Poa(this.CYa);this.Lpa=sc.map.Poa(this.Eub)>0;this.Jf.za(a+(this.Lpa?1:0))}})});ig.J=h;
ig.N("game.feature.gui.hud.status-hud").O("impact.feature.gui.gui","game.feature.gui.hud.hp-hud","game.feature.gui.hud.sp-hud","game.feature.gui.hud.param-hud","game.feature.gui.hud.buff-hud","game.feature.gui.hud.item-timer-hud","game.feature.model.options-model","game.feature.gui.hud.key-hud").K(function(){var a=[{x:20,y:20},{x:20,y:44},{x:20,y:-4},{x:44,y:20},{x:-4,y:20}];sc.tob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},
ZRb:q,aSb:q,Kz:q,pB:q,NR:q,hu:q,MT:q,RT:q,QS:q,UA:0,rB:y,f:function(){this.parent();this.a.zIndex=1201;this.a.xf=h;this.NR=new sc.qob;this.NR.l(3,3);this.m(this.NR);this.hu=new sc.rob;this.hu.l(0,0);this.m(this.hu);this.MT=new sc.NL;this.MT.l(54,26);this.m(this.MT);this.pB=new sc.vob;this.pB.l(29,21);this.m(this.pB);this.Kz=new sc.yob;this.Kz.l(24,3);this.m(this.Kz);this.RT=new sc.slb;this.RT.l(2,39);this.m(this.RT);this.QS=new sc.bjb;this.QS.l(0,53);this.m(this.QS);sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.T,
this);sc.P.Wa(sc.q.e,this);sc.P.Wa(sc.Kb,this);this.j("HIDDEN",h)},update:function(){if(this.UA>0&&!sc.q.LS()&&!sc.q.jx()&&!sc.jb.wc()){this.UA=this.UA-ig.i.Sa;this.UA<=0&&this.bAa()}},Ab:function(a,b,c){if(a==sc.q){if(b==sc.zf.Ew||b==sc.zf.cs)if(sc.q.LS())this.g0a();else if(sc.q.jx())this.nrb();else if(sc.q.Oo()){this.rB=h;sc.e.qca&&sc.e.ER?this.cza(sc.e.ER):this.cza(sc.e.qq)}else{if(this.rB){this.bAa();this.rB=y}this.KAa()}}else if(a==sc.e)(b==sc.fa.p9||b==sc.fa.D9)&&this.cza(sc.e.qq);else if(a==
sc.q.T)if(b==sc.dd.wP)this.g0a();else if(b==sc.dd.nRa)this.UA=100;else{if(b==sc.dd.mRa)this.UA=c?1.5:1E-4}else a==sc.Kb&&b==sc.il.eW&&(sc.Kb.yea()?this.j("HIDDEN"):this.j("DEFAULT"))},ag:function(){this.KAa()},KAa:function(){if(!sc.q.jx()&&!sc.q.Oo()&&!sc.q.LS()&&!sc.q.jx()){var a=ig.ma.get("playerVar.statusHidden"),b=sc.options.get("hud-display"),a=!a&&sc.q.BN()&&sc.q.ko()&&b;if(!a&&this.UA>0){this.UA=0;this.bAa()}this.j(a?"DEFAULT":"HIDDEN")}},bAa:function(){this.UA=0;this.hu.kd(0,0,0.3,KEY_SPLINES.EASE_IN_OUT);
this.hu.B7=y;this.NR.j("HIDDEN");this.Kz.kd(24,3,0.3,KEY_SPLINES.EASE_IN_OUT);this.pB.kd(29,21,0.3,KEY_SPLINES.EASE_IN_OUT);this.RT.kd(2,39,0.3,KEY_SPLINES.EASE_IN_OUT);this.QS.kd(0,53,0.3,KEY_SPLINES.EASE_IN_OUT);this.MT.hGa();this.j("DEFAULT")},msb:function(){this.UA=0;this.hu.kd(0,0,0.2,KEY_SPLINES.EASE_IN_OUT);this.hu.B7=y;this.NR.j("HIDDEN_MENU");this.Kz.kd(24,3,0.2,KEY_SPLINES.EASE_IN_OUT);this.pB.kd(29,21,0.2,KEY_SPLINES.EASE_IN_OUT);this.RT.kd(2,39,0.2,KEY_SPLINES.EASE_IN_OUT);this.QS.kd(0,
53,0.2,KEY_SPLINES.EASE_IN_OUT);this.MT.hGa();this.j("DEFAULT");this.KAa()},nrb:function(){this.UA=0.1;var b=sc.q.T.sg;this.NR.j("QUICKMENU");b=a[b];this.hu.kd(b.x+3,b.y+3,0.2,KEY_SPLINES.EASE);this.hu.j("QUICKMENU");this.hu.B7=h;this.Kz.kd(73,26,0.2,KEY_SPLINES.EASE);this.pB.kd(78,44,0.2,KEY_SPLINES.EASE);this.RT.kd(2,88,0.2,KEY_SPLINES.EASE);this.QS.kd(0,80,0.2,KEY_SPLINES.EASE);this.MT.PMa(y);this.j("DEFAULT")},krb:function(){this.UA=0;var b=sc.q.T.sg;this.NR.j("MENU");b=a[b];this.hu.kd(b.x+3+
2,b.y+3+21,0.2,KEY_SPLINES.EASE);this.hu.j("MENU");this.hu.B7=h;this.Kz.kd(75,47,0.2,KEY_SPLINES.EASE);this.pB.kd(80,65,0.2,KEY_SPLINES.EASE);this.RT.kd(2,109,0.2,KEY_SPLINES.EASE);this.QS.kd(0,110,0.2,KEY_SPLINES.EASE);this.MT.PMa(h);this.j("DEFAULT")},cza:function(a){switch(a){case sc.Fc.im:this.j("DEFAULT");this.krb();break;default:this.msb();this.j("HIDDEN")}},g0a:function(){var b=sc.q.T.sg;this.UA=sc.q.LS()||sc.q.jx()?0.1:2;this.NR.j("DEFAULT");b=a[b];this.hu.l(b.x+3,b.y+3);this.hu.j("ZOOM",
h);this.hu.j("DEFAULT");this.hu.B7=h;this.Kz.kd(73,26,0.1,KEY_SPLINES.LINEAR);this.pB.kd(78,44,0.1,KEY_SPLINES.LINEAR);this.RT.kd(2,88,0.1,KEY_SPLINES.LINEAR);this.QS.kd(0,80,0.1,KEY_SPLINES.LINEAR);this.MT.PMa(y)}});sc.yob=ig.da.extend({f:function(){this.parent();var a=new sc.fib;this.m(a);a=new sc.fob;this.m(a);a.l(55,0);a=new sc.phb;a.l(63,8);this.m(a)}});sc.vob=ig.da.extend({HBa:q,oHa:q,f:function(){this.parent();sc.P.Wa(sc.q.T,this);this.HBa=new sc.kfb;this.m(this.HBa);this.oHa=new sc.Nib;this.oHa.l(0,
0);this.m(this.oHa)},Ab:function(a,b){a==sc.q.T&&(b==sc.dd.A9?this.zIa(h):b==sc.dd.Nja?this.zIa(y):b==sc.dd.L1&&this.zIa(y))},zIa:function(a){this.HBa.kd(a?32:0,0,0.2,KEY_SPLINES.EASE_IN_OUT)}});var b=[{Kaa:0,interval:0.5,PD:0,Bq:0},{Kaa:0.25,interval:1,PD:0.1,Bq:0.2},{Kaa:0.5,interval:0.5,PD:0.2,Bq:0.5},{Kaa:0.75,interval:0.25,PD:0,Bq:1},{Kaa:1,interval:0.125,PD:0,Bq:1}];sc.Lgb=ig.da.extend({s:new ig.ia("media/gui/overload-overlay.png"),lM:q,s_a:-1,f:function(){this.parent();this.a.zIndex=-40;this.F(ig.i.width,
ig.i.height);this.lM=new ig.tPa(h)},update:function(){var a=sc.q.T.Hv;sc.q.T.Py&&(a=1);for(var c=b.length;c--;)if(a>=b[c].Kaa)break;if(c!=this.s_a){this.s_a=c;a=b[c];this.lM.set(a.PD,a.interval,a.Bq)}if(!this.lM.update())this.a.nd=this.lM.aS()},Da:function(a){if(sc.options.get("element-overload")){var b=sc.q.T.Py||sc.q.T.Hv<0.1?160:0;a.na(this.s,0,0,b,0,160,160,y,y).yi("lighter");a.na(this.s,ig.i.width-160,0,b,0,160,160,h,y).yi("lighter");a.na(this.s,ig.i.width-160,ig.i.height-160,b,0,160,160,h,h).yi("lighter");
a.na(this.s,0,ig.i.height-160,b,0,160,160,y,h).yi("lighter")}}});sc.rob=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),n:0,B7:y,R:{DEFAULT:{state:{},time:0.15,p:KEY_SPLINES.LINEAR},QUICKMENU:{state:{},time:0.2,p:KEY_SPLINES.EASE},MENU:{state:{},time:0.2,p:KEY_SPLINES.EASE},ZOOM:{state:{Xa:0.25,Va:0.25},time:0.15,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.F(40,40);this.Eb(20,20)},update:function(){this.n=(this.n+ig.i.Sa)%2},Da:function(a){var b=sc.q.T.sg,c=sc.q.T.Hv,j=Math.ceil(c*
(this.a.size.y-7)),k=2;c>=0.9?k=0.25:c>=0.75?k=0.5:c>=0.5&&(k=1);c=this.n%k/k;c=c<0.5?c*2:(1-c)*2;a.na(this.s,0,0,64,32+this.a.size.x*(this.B7?0:1),this.a.size.x,this.a.size.y);if(j&&c){j=j+4;a.na(this.s,0,this.a.size.x-j,64,32+this.a.size.x*3-j,this.a.size.x,j).ge(c)}a.na(this.s,8,8,104,32+b*24,24,24)}});var c=[{x:32,y:32},{x:32,y:56},{x:32,y:8},{x:56,y:32},{x:8,y:32}];sc.qob=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE_IN_OUT},QUICKMENU:{state:{},
time:0.2,p:KEY_SPLINES.EASE},MENU:{state:{offsetY:21,offsetX:2},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN_MENU:{state:{alpha:0,Xa:0,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN_OUT}},f:function(){this.parent();this.F(80,80);this.Eb(10,10);this.j("HIDDEN",h)},Da:function(a){a.na(this.s,0,0,136,0,80,80);for(var b=sc.q.T.sg,i=0;i<c.length;++i)if(i!=b){var j=c[i],k=(i?i-1:b-1)*16,l=i?96:64;ig.input.qb==ig.Yb.xm&&(l=l+16);!sc.q.T.ki(i+8)&&i&&(l=l-
32);a.na(this.s,j.x,j.y,k,l,16,16)}}});sc.rPb=ig.ec.extend({vBa:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{offsetX:-23,offsetY:-23,alpha:0.6},time:0.3,p:KEY_SPLINES.EASE_IN_OUT},MAXIMIZED:{state:{alpha:0.6},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-44,offsetY:-44,alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN_OUT}},f:function(){this.parent(this.vBa,128,80,88,88)}});sc.sPb=ig.ec.extend({vBa:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{offsetX:0,offsetY:0},time:0.3,p:KEY_SPLINES.EASE_IN_OUT},
MAXIMIZED:{state:{offsetX:6,offsetY:6},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-16,offsetY:-16,alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN_OUT}},f:function(){this.parent(this.vBa,216,80,16,16)}})});ig.J=h;
ig.N("game.feature.gui.hud.exp-hud").O("impact.feature.gui.gui","game.feature.gui.base.numbers").K(function(){sc.JQa=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_IN_OUT},HIDDEN:{state:{alpha:0,offsetX:16},time:0.2,p:KEY_SPLINES.EASE_IN_OUT},MERGE:{state:{alpha:0,offsetX:-32},time:0.3,p:KEY_SPLINES.EASE_IN_OUT}},oc:q,exp:0,Jva:y,f:function(a,b){this.parent();this.Jva=a;this.oc=new sc.Tb(0,{size:sc.Ff.jF,transitionTime:0.3});this.oc.l(a?37:13,
1);this.m(this.oc);this.Ota(b||0);this.a.size.y=7},Ota:function(a){this.oc.za(a);this.a.size.x=this.oc.a.size.x+(this.Jva?37:13)+6;this.exp=a},Da:function(a){var b=this.Jva?37:13,c=this.a.size.y;a.na(this.s,0,0,this.Jva?0:40,32,b,c);a.nc("black",b,0,this.a.size.x-6-b,c);a.na(this.s,this.a.size.x-6,0,53,32,6,c)}});sc.qhb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},uW:q,f:function(){this.parent();
this.a.size.x=88;this.a.size.y=7;sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q.e,this);this.uW=new sc.Tb(1E3,{signed:h,size:sc.Ff.jF});this.uW.H(ig.k.ra,ig.k.$);this.uW.l(35,1);this.uW.za(sc.q.T.exp,h);this.m(this.uW);this.j("HIDDEN",h)},Da:function(a){a.na(this.s,0,0,0,182,88,7)},Ab:function(a,b){if(a==sc.q){if(b==sc.zf.cs){var c=a.Oo();this.uW.za(sc.q.T.exp);this.j(c?"DEFAULT":"HIDDEN")}}else if(a==sc.e&&(b==sc.fa.p9||b==sc.fa.D9))switch(a.qq){case sc.Fc.im:this.j("DEFAULT");break;case sc.Fc.nC:this.j("HIDDEN")}}});
sc.phb=ig.da.extend({EF:q,qIa:q,n:0,RR:0,eN:[],f:function(){this.parent();this.EF=new sc.JQa(h);this.EF.j("HIDDEN",h);this.m(this.EF);this.qIa=new sc.qhb;this.m(this.qIa);sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.T,this)},update:function(){if(this.n>0){this.n=this.n-ig.i.Sa;if(this.n<=0)if(this.eN.length>0){this.sIa();this.n=this.eN.length?1:5}else{this.RR=0;this.EF.j("HIDDEN")}}},Rtb:function(a){if(this.RR){a=new sc.JQa(y,a);a.j("HIDDEN",h);a.j("DEFAULT");this.eN.push(a);this.DG(a,Math.max(this.a.children.length-
2,0));this.n=2}else{this.RR=a;this.EF.j("DEFAULT");this.EF.Ota(a);this.n=5}this.eN.length>3?this.sIa():this.q_()},sIa:function(){var a=this.eN.shift();this.RR=this.RR+a.exp;this.EF.Ota(this.RR);a.j("MERGE",y,h);this.q_()},G6a:function(){for(;this.eN.length>0;)this.sIa()},q_:function(){for(var a=this.EF.a.size.x,b=0;b<this.eN.length;++b){a=a+-3;this.eN[b].kd(a,0,0.3,KEY_SPLINES.EASE_IN_OUT);a=a+this.eN[b].a.size.x}},Ab:function(a,b,c){if(a==sc.q.T)if(b==sc.dd.vV)this.Rtb(c);else{if(b==sc.dd.L1){this.G6a();
this.n=this.RR=0;this.EF.Ota(0);this.qIa.uW.za(0);this.EF.j("HIDDEN")}}else if(a==sc.q&&b==sc.zf.cs&&a.Oo()){this.G6a();this.RR=0;this.EF.j("HIDDEN")}}})});ig.J=h;
ig.N("game.feature.menu.gui.quests.quest-entries").O("impact.feature.gui.base.box","impact.feature.gui.gui").K(function(){sc.y$=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:2,height:0,left:4,top:13,right:4,bottom:0,Vb:{"default":{x:488,y:0}}}),Jb:q,bP:q,jcb:q,Wr:q,ob:q,Xb:y,f:function(a,b,c,d){this.parent(150,13);this.Eb(75,6.5);this.Jb=a||q;this.bP=b||0;this.ob=new sc.ea("",{font:sc.Ea.he});
this.ob.l(6,-1);this.m(this.ob);this.ina&&this.ina();this.Cab(c,d)},Cab:function(a,b){this.jcb=a;(this.Wr=b)&&this.z6&&this.z6()},vFa:function(){return sc.dc.tBb(this.Jb,this.bP,this.jcb)}});sc.W1={};sc.W1.COLLECT=sc.y$.extend({s:new ig.ia("media/gui/basic.png"),Jf:q,Ki:q,brb:y,f:function(a,b,c,d){this.parent(a,b,c,d)},Da:function(a){this.parent(a);a.na(this.s,this.a.size.x-21,2,73,56,4,8)},z6:function(){var a=sc.q.T.Dr(this.Wr.item),b=this.Wr.zc;this.Xb=sc.dc.Lr(this.Jb.id)||sc.dc.lHa(this.Jb,this.bP)||
a>=b;var c=sc.yb.getItem(this.Wr.item||0),d=this.Xb?"\\i[quest-mini-ok]":"\\i[quest-mini-no]",d=this.Wr.gGa&&!this.Xb?a>=1?d+ig.Ra.ic(c.name):d+"???????????????":d+ig.Ra.ic(c.name);this.ob.ga(d);this.Jf.za(this.Xb?b:Math.min(a,b));this.Ki.za(b);if(this.Wr.fGa&&!this.Xb){this.Ki.za(99);this.Ki.zx=h}else this.Ki.zx=y},ina:function(){this.Jf=new sc.Tb(99,{size:sc.Ff.$c});this.Jf.H(ig.k.ra,ig.k.$);this.Jf.l(22,2);this.m(this.Jf);this.Ki=new sc.Tb(99,{size:sc.Ff.$c});this.Ki.H(ig.k.ra,ig.k.$);this.Ki.l(4,
2);this.m(this.Ki)}});sc.W1.LANDMARK=sc.y$.extend({s:new ig.ia("media/gui/basic.png"),Jf:q,Ki:q,brb:y,f:function(a,b,c,d){this.parent(a,b,c,d)},Da:function(a){this.parent(a);a.na(this.s,this.a.size.x-21,2,73,56,4,8)},z6:function(){var a=sc.map.xFa(this.Wr.Lb),b=this.Wr.zc;this.Xb=sc.dc.Lr(this.Jb.id)||sc.dc.lHa(this.Jb,this.bP)||a>=b;var c=sc.map.Kv(this.Wr.Lb);this.ob.ga((this.Xb?"\\i[quest-mini-ok]":"\\i[quest-mini-no]")+c);this.Jf.za(this.Xb?b:Math.min(a,b));this.Ki.za(b)},ina:function(){this.Jf=
new sc.Tb(99,{size:sc.Ff.$c});this.Jf.H(ig.k.ra,ig.k.$);this.Jf.l(22,2);this.m(this.Jf);this.Ki=new sc.Tb(99,{size:sc.Ff.$c});this.Ki.H(ig.k.ra,ig.k.$);this.Ki.l(4,2);this.m(this.Ki)}});sc.W1.KILL=sc.y$.extend({s:new ig.ia("media/gui/basic.png"),Jf:q,Ki:q,f:function(a,b,c,d){this.parent(a,b,c,d)},Da:function(a){this.parent(a);a.na(this.s,this.a.size.x-21,2,73,56,4,8)},z6:function(){var a=this.vFa().killed,b=this.Wr.zc,c=this.Wr.Fe;this.Xb=sc.dc.Lr(this.Jb.id)||sc.dc.lHa(this.Jb,this.bP)||a>=b;this.ob.ga((this.Xb?
"\\i[quest-mini-ok]":"\\i[quest-mini-no]")+sc.Ta.jda(c));this.Jf.za(this.Xb?b:a);this.Ki.za(b)},ina:function(){this.Jf=new sc.Tb(99,{size:sc.Ff.$c});this.Jf.H(ig.k.ra,ig.k.$);this.Jf.l(22,2);this.m(this.Jf);this.Ki=new sc.Tb(99,{size:sc.Ff.$c});this.Ki.H(ig.k.ra,ig.k.$);this.Ki.l(4,2);this.m(this.Ki)}});sc.W1.CONDITION=sc.y$.extend({f:function(a,b,c,d){this.parent(a,b,c,d)},z6:function(){var a=sc.dc.b5a(this.Jb,this.Wr.label);this.Xb=a;var b="",b=this.a.size.x<240&&this.Wr.O_?this.Wr.O_:this.Wr.text;
this.ob.ga((a?"\\i[quest-mini-ok]":"\\i[quest-mini-no]")+b)}});sc.W1.QUEST=sc.y$.extend({f:function(a,b,c,d){this.parent(a,b,c,d)},z6:function(){var a=sc.dc.Lr(this.Wr.Jb);this.Xb=a;var b="",b=this.a.size.x<240&&this.Wr.O_?this.Wr.O_:this.Wr.text;this.ob.ga((a?"\\i[quest-mini-ok]":"\\i[quest-mini-no]")+b)}});sc.z$=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},bP:q,Jb:q,ZU:q,$Na:q,Hla:[],f:function(a,b,c,d){this.parent();this.$Na=
new sc.ea("",{font:sc.Ea.he});this.ZU=new sc.ea("",{font:sc.Ea.he});this.ZU.l(17,0);this.GU(a,b,c,d);this.j("HIDDEN",h)},GU:function(a,b,c,d,f){this.bP=a!=g?a:g;this.Jb=b||q;this.rh();this.Hla.length=0;if(a!=g){var i=this.Jb.ij[this.bP];this.m(this.$Na);this.m(this.ZU);if(i.xE.length!=0){if(f){this.ZU.pMa(260);for(var j=0,k=0,a=0;a<b.ij.length;a++)for(var l=0;l<b.ij[a].xE.length;l++){sc.dc.SDb(b,a,l)&&k++;j++}this.ZU.ga(b.name.toString()+" - "+Math.floor(k/j*100)+"%")}else{this.ZU.pMa(d?240:150);
this.ZU.ga(i.ik)}j=this.ZU.a.size.y+1;k=q;i=i.xE;l=h;if(i.length==1&&i[0].type=="CONDITION")l=sc.dc.b5a(b,i[0].label);else if(i.length==1&&i[0].type=="QUEST")l=sc.dc.Lr(i[0].Jb);else for(a=0;a<i.length;a++){k=new sc.W1[i[a].type](b,this.bP,a);k.l(15,j);d&&k.F(240,13);k.Cab(a,i[a]);k.Xb||(l=y);c&&k.j("HIDDEN",h);if(!f){j=j+14;this.m(k);this.Hla.push(k)}}this.$Na.ga(l?"\\i[quest-ok]":"\\i[quest-no]");this.F(d?260:165,j-13+15)}}},show:function(a,b){for(var c=b||0,d=0;d<this.Hla.length;d++){this.Hla[d].j("DEFAULT",
y,y,q,c);a&&(c=c+0.016)}},gRb:J()})});ig.J=h;
ig.N("game.feature.gui.hud.quest-hud").O("game.feature.gui.hud.right-hud","game.feature.menu.gui.quests.quest-entries").K(function(){var a=/\\c\[\d\]/g;sc.gmb=ig.da.extend({n:0,id:q,ob:q,f:function(b,c){this.parent();this.id=b||q;this.n=5;var d=c.ik.toString().replace(a,""),f=q,f=sc.options.get("quest-show-current")?": \\c[3]"+d+"\\c[0]"+ig.lang.get("sc.gui.quest-hud.taskDone2")+"!":ig.lang.get("sc.gui.quest-hud.nextTask")+": \\c[3]"+d+"\\c[0]";this.ob=new sc.ea(f,{font:sc.Ea.Ib,maxWidth:150});this.m(this.ob);
this.F(this.ob.a.size.x,this.ob.a.size.y)},aI:function(){if(this.n>0)this.n=this.n-ig.i.ja}});sc.hmb=sc.rC.extend({Kh:[],f:function(){this.parent(ig.lang.get("sc.gui.quest-hud.taskUpdated"));sc.P.Wa(sc.q,this);sc.P.Wa(sc.dc,this)},De:function(a,c){var d=q;if((d=this.vQ(c.id))!=q)d.n=5;else{d=Math.max(0,a.ef-(sc.options.get("quest-show-current")?1:0));d=new sc.gmb(c.id+d,c.ij[d]);this.ae.length>=3?this.Kh.push(d):this.Rr(d,!sc.q.oe());this.hidden&&!sc.q.oe()&&this.show()}},vQ:function(a){for(var c=
this.ae.length;c--;)if(this.ae[c].Ik.id==a)return this.ae[c].Ik;for(c=this.Kh.length;c--;)if(this.Kh[c].id==a)return this.Kh[c];return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=this.ae.length,c=q;a--;){c=this.ae[a].Ik;c.aI();if(c.n<=0){c=this.m7(a);if(a==0&&this.ae.length==0)c.a.Db.y=c.a.size.y/2;else{c.a.Db.y=0;c.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&this.ae.length==0&&this.hide()}},
Ab:function(a,c,d){if(a==sc.q)if(a.DD()){this.x3();this.hide()}else a.oe()||a.Oo()||a.lB()||sc.dc.iq||a.KJ?this.hide():!a.oe()&&(!a.lB()&&this.ae.length>0&&!sc.dc.iq)&&this.show();else a==sc.dc&&(c==sc.Nk.Jka&&sc.options.get("update-quest-style")==sc.Qka.$c&&d&&d.state&&!d.state.qbb())&&this.De(d.state,d.Jb)}});sc.Ehb=sc.rC.extend({ik:q,f:function(){this.parent(ig.lang.get("sc.gui.quest-hud.title"));this.ik=new sc.z$;this.ik.j("DEFAULT",h);this.ik.l(40,3);this.Rr(this.ik,y);sc.P.Wa(sc.q,this);sc.P.Wa(sc.dc,
this);sc.P.Wa(sc.options,this)},Pta:function(a){if(a==-1||sc.dc.$Ga())this.hide();else{a=sc.options.get("min-quest");this.ik.GU(sc.dc.I1a(),sc.dc.nFa(),y,y,a);this.ik.a.align.x=a?ig.k.hb:ig.k.ra;this.ae[0].F(this.ik.a.size.x+4+(a?5:0),this.ik.a.size.y+1);this.j7();this.uWa()&&this.show(y,0)}},uWa:function(){return!sc.q.oe()&&!sc.q.lB()&&!sc.q.KJ&&!sc.dc.iq},Ab:function(a,c,d){if(a==sc.q){if((c==sc.zf.cs||c==sc.zf.Ew)&&!a.mHa()&&!a.T4a())if(a.DD()){this.Pta(-1);this.hide()}else!this.uWa()||a.Oo()?
this.hide():sc.dc.Fi!=-1&&!sc.dc.$Ga()&&this.show(y,0.2)}else a==sc.dc?c==sc.Nk.yV||c==sc.Nk.Aja?d!=sc.dc.Fi&&this.Pta(sc.dc.Fi):(c==sc.Nk.Jya||c==sc.Nk.Jka||c==sc.Nk.vya)&&this.Pta(sc.dc.Fi):a==sc.options&&c==sc.ct.$z&&this.Pta(sc.dc.Fi)}})});ig.J=h;
ig.N("game.feature.gui.hud.landmark-hud").O("game.feature.gui.hud.right-hud","game.feature.menu.gui.quests.quest-entries","game.feature.model.options-model").K(function(){sc.ijb=ig.da.extend({n:0,id:q,ob:q,f:function(a,b){this.parent();this.id=a||q;this.n=5;var c=ig.lang.get("sc.gui.landmark-hud.landmark")+" \\c[3]"+sc.map.jFa(a,b)+"\\c[0] "+ig.lang.get("sc.gui.landmark-hud.unlocked")+"!";this.ob=new sc.ea(c,{font:sc.Ea.Ib,maxWidth:180});this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y)},
aI:function(){if(this.n>0)this.n=this.n-ig.i.ja}});sc.jjb=sc.rC.extend({Kh:[],f:function(){this.parent(ig.lang.get("sc.gui.landmark-hud.title"));sc.P.Wa(sc.q,this);sc.P.Wa(sc.map,this)},De:function(a,b){var c=q;if((c=this.vQ(a))!=q)c.n=5;else{c=new sc.ijb(a,b);this.ae.length>=3?this.Kh.push(c):this.Rr(c,!sc.q.oe());this.hidden&&!sc.q.oe()&&this.show()}},vQ:function(a){for(var b=this.ae.length;b--;)if(this.ae[b].Ik.id==a)return this.ae[b].Ik;for(b=this.Kh.length;b--;)if(this.Kh[b].id==a)return this.Kh[b];
return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=this.ae.length,b=q;a--;){b=this.ae[a].Ik;b.aI();if(b.n<=0){b=this.m7(a);if(a==0&&this.ae.length==0)b.a.Db.y=b.a.size.y/2;else{b.a.Db.y=0;b.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&this.ae.length==0&&this.hide()}},Ab:function(a,b,c){if(a==sc.q)if(a.DD()){this.x3();this.hide()}else a.oe()||a.lB()||sc.dc.iq?this.hide():!a.oe()&&(!a.lB()&&
this.ae.length>0&&!sc.dc.iq)&&this.show();else a==sc.map&&b==sc.JP.Uwa&&c&&c.mo&&c.Lb&&sc.options.get("update-landmark-style")==sc.C$.$c&&this.De(c.mo,c.Lb)}})});ig.J=h;
ig.N("game.feature.menu.lore-model").O("impact.base.game","game.feature.model.base-model","impact.feature.storage.storage").K(function(){sc.BI={STORY:0,CHARACTERS:1,CROSS_LORE:2,EARTH_LORE:3};sc.Sx={ORDER:0,NAME:1,UNLOCKED:2};sc.Wwa={LEFT:0,CENTER:1,RIGHT:2};var a={Oe:q,cG:q,bI:y};sc.Djb=ig.Uf.extend({Uo:[],no:q,op:{},loaded:y,f:function(){this.parent("LoreModel");ig.zd.Lg(this);window.Ed&&ig.Yh.Lg("lore","LoreEnumEditor","Lore");ig.ma.Up("lore",this,"VarLoreEditor");this.no=ig.Yh.get("lore")},fj:function(){this.op=
{};this.loaded=y},bm:function(a,c){if(c[0]=="lore")switch(c[1]){case "unlock":var d=this.Xqb(c[2],c[3]);c[3]?this.odb(c[2],c[3],h):this.xia(c[2],h);return d;case "title":return this.kFa(c[2]);case "unlocked":return c[3]?this.ZGa(c[2],c[3]):this.uqa(c[2])}e(Error("Unsupported var access path: "+a))},Xqb:function(a,c){return c?!this.ZGa(a,c)?"\\i[loreNew]":"\\i[lore]":!this.uqa(a)?"\\i[loreNew]":"\\i[lore]"},iOb:function(){for(var a in this.no)this.xia(a,y,h)},xia:function(b,c,d,f){f=f==g?h:f;if(this.no[b]){if(!this.op[b]||
d){this.op[b]={};a.cG=q;a.Oe=b;a.bI=y;var i=this.no[b].content,j;for(j in i){this.op[b][j]=h;!d&&f&&sc.pa.bc("exploration","loreEntry",1)}!d&&f&&sc.e.YAa(sc.Fc.EL,b);!d&&f&&sc.pa.bc("exploration","lore",1);!d&&f&&sc.e.xF({type:"LORE",lore:b});sc.pa.Ni("exploration","loreTotalRate",this.yFa(h));c&&sc.q.T.wq(135)&&sc.P.Ga(this,sc.FP.Pka,a);ig.r.Yj()}}else ig.warn("LOCK NOT FOUND: "+b)},odb:function(b,c,d){if(this.no[b]){var f=this.no[b].content;if(!this.op[b]||!this.op[b][c]){a.Oe=b;a.cG=c;a.bI=y;if(this.op[b]){sc.e.xF({type:"LORE",
lore:b,update:h});a.bI=h}else{this.op[b]={};sc.pa.bc("exploration","lore",1);sc.e.xF({type:"LORE",lore:b});a.bI=y}for(var i in f){if(!this.op[b][i]){this.op[b][i]=h;sc.pa.bc("exploration","loreEntry",1)}if(i==c)break}sc.e.YAa(sc.Fc.EL,b);d&&sc.q.T.wq(135)&&sc.P.Ga(this,sc.FP.Pka,a);ig.r.Yj()}}else e(Error("No such lore found: "+b))},sFb:function(){sc.P.Ga(this,sc.FP.lPa)},qda:function(a){return this.no[a]},kFa:function(a){return ig.Ra.ic(this.no[a].title)},UTb:function(a,c){return this.no[a]?this.no[a].content[c]:
q},uqa:function(a){if(!this.op[a])return y;var c=this.no[a].content,d;for(d in c)if(!this.op[a][d])return y;return h},o3a:function(a){if(!this.op[a])return y;var c=this.no[a].content,d;for(d in c)if(this.op[a][d])return h;return y},xea:function(a){return this.op[a]?h:y},ZGa:function(a,c){return this.op[a]&&this.op[a][c]},y1a:function(a,c){var d=[],f=q,i;for(i in this.no){f=this.no[i];sc.BI[f.category]==a&&d.push(i)}c!=g&&this.fNa(d,c);return d},fNa:function(a,c){switch(c){case sc.Sx.ORDER:a.sort(function(a,
b){return(this.no[a].order||0)-(this.no[b].order||0)}.bind(this));break;case sc.Sx.NAME:a.sort(function(a,b){var c=ig.Ra.ic(this.no[a].title),j=ig.Ra.ic(this.no[b].title);return c.localeCompare(j)}.bind(this));break;case sc.Sx.UNLOCKED:a.sort(function(a,b){var c=this.xea(a),j=this.xea(b);return c==j?(this.no[a].order||0)-(this.no[b].order||0):c===j?0:c?-1:1}.bind(this))}},xzb:function(a){if(!this.op[a])return 0;var c=this.no[a].content,d=0,f=0,i;for(i in c){this.op[a][i]&&f++;d++}return!d&&!f?100:
d?f/d:0},yFa:function(a,c){var d=0,f=0,i;for(i in this.no)if(c){if(c==this.no[i].category){this.o3a(i)&&d++;f++}}else{this.o3a(i)&&d++;f++}return a?d/f:d},BY:function(a,c){return this.yFa(a,c)},Fu:function(a){a.lories=ig.copy(this.op)},Bt:function(a){this.op=a.lories||{};for(var c in this.op)this.no[c]||delete this.op[c];sc.pa.Ni("exploration","loreTotalRate",this.yFa(h));this.loaded=h}});sc.FP={};sc.FP.Pka=0;sc.FP.lPa=1;ig.Vf(function(){return sc.Oe=new sc.Djb})});ig.J=h;
ig.N("game.feature.gui.hud.lore-hud").O("game.feature.gui.hud.right-hud","game.feature.menu.lore-model").K(function(){sc.Ejb=ig.da.extend({n:0,ob:q,f:function(a){this.parent();this.n=5;var b="\\c[3]"+sc.Oe.kFa(a.Oe)+"\\c[0] ",b=a.bI?b+ig.lang.get("sc.gui.lore-hud.updated"):b+ig.lang.get("sc.gui.lore-hud.unlocked");this.ob=new sc.ea(b,{font:sc.Ea.Ib});this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y)},aI:function(){if(this.n>0)this.n=this.n-ig.i.ja}});sc.Fjb=sc.rC.extend({Kh:[],f:function(){this.parent(ig.lang.get("sc.gui.lore-hud.title"));
sc.P.Wa(sc.q,this);sc.P.Wa(sc.Oe,this)},De:function(a){a=new sc.Ejb(a);this.ae.length>=3?this.Kh.push(a):this.Rr(a,!sc.q.oe());this.hidden&&!sc.q.oe()&&this.show()},vQ:function(a){for(var b=this.ae.length;b--;)if(this.ae[b].Ik.id==a)return this.ae[b].Ik;for(b=this.Kh.length;b--;)if(this.Kh[b].id==a)return this.Kh[b];return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=this.ae.length,b=q;a--;){b=
this.ae[a].Ik;b.aI();if(b.n<=0){b=this.m7(a);if(a==0&&this.ae.length==0)b.a.Db.y=b.a.size.y/2;else{b.a.Db.y=0;b.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&this.ae.length==0&&this.hide()}},Ab:function(a,b,c){if(a==sc.q)if(a.DD()){this.x3();this.hide()}else a.oe()||a.lB()||sc.dc.iq?this.hide():!a.oe()&&(!a.lB()&&this.ae.length>0&&!sc.dc.iq)&&this.show();else a==sc.Oe&&(b==sc.FP.Pka&&sc.options.get("update-lore-style")==sc.D$.$c&&c)&&this.De(c)}})});ig.J=h;
ig.N("game.feature.gui.hud.drop-hud").O("game.feature.gui.hud.right-hud").K(function(){sc.Agb=ig.da.extend({n:0,ob:q,f:function(a){this.parent();this.n=5;a="\\c[3]"+sc.e.$oa(a)+"\\c[0] ";a=a+ig.lang.get("sc.gui.drop-hud.completed");this.ob=new sc.ea(a,{font:sc.Ea.Ib});this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y)},aI:function(){if(this.n>0)this.n=this.n-ig.i.ja}});sc.Bgb=sc.rC.extend({Kh:[],f:function(){this.parent(ig.lang.get("sc.gui.drop-hud.title"));sc.P.Wa(sc.q,this);sc.P.Wa(sc.e,
this)},De:function(a){a=new sc.Agb(a);this.ae.length>=3?this.Kh.push(a):this.Rr(a,!sc.q.oe());this.hidden&&!sc.q.oe()&&this.show()},vQ:function(a){for(var b=this.ae.length;b--;)if(this.ae[b].Ik.id==a)return this.ae[b].Ik;for(b=this.Kh.length;b--;)if(this.Kh[b].id==a)return this.Kh[b];return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=this.ae.length,b=q;a--;){b=this.ae[a].Ik;b.aI();if(b.n<=0){b=
this.m7(a);if(a==0&&this.ae.length==0)b.a.Db.y=b.a.size.y/2;else{b.a.Db.y=0;b.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&this.ae.length==0&&this.hide()}},Ab:function(a,b,c){if(a==sc.q)if(a.DD()){this.x3();this.hide()}else a.oe()||a.lB()||sc.dc.iq?this.hide():!a.oe()&&(!a.lB()&&this.ae.length>0&&!sc.dc.iq)&&this.show();else a==sc.e&&(sc.q.T.ki("MENU_BOTANICS")?b==sc.fa.sja&&sc.options.get("update-drop-style")==sc.Kya.$c&&c&&this.De(c):this.hide())}})});ig.J=h;
ig.N("game.feature.gui.hud.member-hud").O("impact.feature.gui.gui","impact.feature.gui.base.box").K(function(){var a={};sc.slb=ig.da.extend({q:q,hra:[],R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:-32},time:0.2,p:KEY_SPLINES.EASE_IN}},f:function(){this.parent();sc.P.Wa(sc.sa,this);sc.P.Wa(sc.q,this);this.Sdb()},Ab:function(a,c){a==sc.sa?c==sc.LL.W9?this.Sdb():c==sc.LL.tja&&this.Ava():a==sc.q&&this.Ava()},Ava:function(){this.j(!sc.q.LS()&&!sc.sa.sy?"DEFAULT":
"HIDDEN")},Sdb:function(){for(var a=this.hra.length;a--;)this.hra[a].remove(!this.a.lm);this.hra.length=0;for(var c=sc.sa.He.length,d=0,a=0;a<c;++a){var f=new sc.fkb(sc.sa.w2a(a));f.l(0,d);this.m(f);this.hra.push(f);d=d+26}}});sc.fkb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),d5:new ig.Vh("media/gui/severed-heads.png",24,24),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:-32},time:0.2,p:KEY_SPLINES.EASE_IN}},q:q,pGa:q,f:function(a){this.parent();this.F(25,
25);this.Eb(12,12);this.q=a;this.pGa=new sc.ekb(this.q);this.pGa.l(16,2);this.m(this.pGa);this.j("HIDDEN",h);this.j("DEFAULT")},update:J(),Da:function(b){b.na(this.s,0,0,231,175,this.a.size.x,this.a.size.y);this.d5.Ly(a,this.q.sY());b.na(this.d5.wd,0,-2,a.x,a.y,24,24,h)},Ab:J(),remove:function(a){this.j("HIDDEN",a,h)}});sc.ekb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),q:q,Lh:q,yo:q,f:function(a){this.parent();this.F(39,10);this.q=a;sc.P.Wa(this.q,this);this.Lh=new sc.hRa(a.W,26,2);this.Lh.l(7,
5);this.m(this.Lh);this.Lh.aMa(this.q.exp/sc.yP);this.yo=new sc.MTa(a.W);this.yo.l(6,1);this.m(this.yo)},pi:function(){sc.P.Hc(this.q,this)},Da:function(a){a.na(this.s,0,0,64,160,this.a.size.x,this.a.size.y)},Ab:function(a,c){c==sc.QP.vV&&this.Lh.aMa(this.q.exp/sc.yP)}})});ig.J=h;
ig.N("game.feature.gui.hud.sp-change-hud").O("impact.feature.gui.gui","game.feature.combat.model.combat-params","game.feature.model.options-model").K(function(){var a=Vec2.vc(0,0),b={Vc:10,x:4,start:2,end:2},c={Vc:18,x:14,start:2,end:0};sc.eob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},BIG:{state:{Va:2,Xa:2},time:0.1,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{Va:0,Xa:1.5},time:0.1,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/status-gui.png"),nm:0,e_a:0,n:0,f:function(){this.parent();
this.F(100,7);this.Eb(50,3.5);this.zIndex=10;this.j("HIDDEN",h);sc.P.Wa(sc.q.T.W,this)},Ab:function(a,b,c){if(sc.q.oe())this.hide();else if(sc.q.T.ki(sc.ng.SPECIAL)&&!ig.ma.get("playerVar.statusHidden")&&sc.options.get("sp-bar"))if(b==sc.ei.p$){a=sc.q.T.W.rpa();if(c&&this.nm<a){this.n=1;this.qj(h);this.j("BIG",h);this.j("DEFAULT")}this.nm=a}else if(b==sc.ei.oTa)if(this.e_a=c){this.n=-1;this.qj(h);this.j("BIG",h);this.j("DEFAULT")}else{this.n=0;this.hide()}},hide:function(){this.j("HIDDEN")},update:function(){if(this.n>
0){this.n=this.n-ig.i.Sa;if(this.n<=0){this.n=0;this.hide()}}this.qj(h)},Da:function(a){var f=sc.q.T.W,i=f.Qo,f=f.rpa(),j=f-this.e_a,k=this.a,i=Math.max(4,Math.ceil(f/4)*4),l=8+c.Vc;i>4&&(l=l+(Math.floor(i/4)-1)*b.Vc);l=Math.floor((k.size.x-l)/2);k=k.size.y;a.na(this.s,l,0,152,128,4,k);for(var l=l+4,m=0;m<i;){var n=m<f&&f-m<=4;m==0&&f==0&&(n=h);var n=n?c:b,o=((j-m)/4).Rb(0,1),t=((f-m)/4).Rb(0,1),p=n.Vc-n.start-n.end,o=Math.floor(o*p),t=Math.floor(t*p)-o,p=p-o-t;o?o=o+n.start:t?t=t+n.start:p=p+n.start;
p?p=p+n.end:t?t=t+n.end:o=o+n.end;var r=0;if(o){a.na(this.s,l,0,152+n.x+r,128,o,k);l=l+o;r=r+o}if(t){a.na(this.s,l,0,152+n.x+r,136,t,k);l=l+t;r=r+t}if(p){a.na(this.s,l,0,152+n.x+r,144,p,k);l=l+p}m=m+4}a.na(this.s,l,0,184,128,4,k)},qj:function(){var b=ig.r.cb;if(b){var c=this.a,i=b.tb(a);ig.i.Jy(a,Math.round(i.x),Math.round(i.y-b.b.g.z+b.b.size.y/2));this.a.g.x=a.x-c.size.x/2;this.a.g.y=a.y-c.size.y/2}}})});ig.J=h;
ig.N("game.feature.gui.hud.sp-mini-hud").O("impact.feature.gui.gui","game.feature.gui.base.numbers").K(function(){sc.MTa=ig.da.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/status-gui.png"),W:q,zE:0,f:function(a){this.parent();this.F(22,3);this.W=a;sc.P.Wa(a,this)},pi:function(){sc.P.Hc(this.W,this)},update:function(){this.zE=this.W.nm},Da:function(a){for(var b=this.W.Qo,c=Math.floor(this.zE),d=b>8,f=0,i,j=0;j<
b;j=j+4)if(d&&j+4<c){a.na(this.s,f,0,104,164,4,3);f=f+5}else if(d&&j>=c){a.na(this.s,f,0,104,160,4,3);f=f+5}else{var k=(c-j).Rb(0,4);if(k){i=k*2;a.na(this.s,f,0,108,164,i,3);f=f+i}if(k<4){i=(4-k)*2;a.na(this.s,f,0,108,160,i,3);f=f+i}d||(f=f+1)}},Ab:function(a,b){if(b==sc.ei.dxa&&sc.q.T.W.Qo==0)this.zE=0}})});ig.J=h;
ig.N("game.feature.gui.hud.top-msg-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.model.options-model").K(function(){var a={Y:0,mh:"landmark"},b={Y:1,$b:new ig.ka("media/sound/hud/quest-task-solved.ogg",0.5)},c={Y:2},d={Y:3},f={Y:4};sc.ipb=ig.da.extend({sia:q,MF:q,No:q,visible:y,n:0,Fa:0,Qa:q,zt:[],mh:{},f:function(){this.parent();this.a.zIndex=51;this.a.xf=h;this.H(ig.k.Ia,ig.k.$);this.sia=new sc.mpb;this.sia.H(ig.k.Ia,ig.k.$);this.m(this.sia);this.MF=new sc.lpb;
this.MF.H(ig.k.Ia,ig.k.$);this.MF.l(0,14);this.m(this.MF);this.No=new sc.jpb;this.No.H(ig.k.Ia,ig.k.$);this.No.l(0,0);this.m(this.No);this.mh.landmark=ig.mh.sZ("landmark");this.AYa=this.Aub.bind(this);sc.P.Wa(sc.q,this);sc.P.Wa(sc.map,this);sc.P.Wa(sc.dc,this);sc.P.Wa(sc.Oe,this);sc.P.Wa(sc.e,this);sc.P.Wa(sc.Ke,this);this.F(222,64)},ih:function(a,b,c,d){this.MF.ih(b,c,d);this.No.nz(a.Y);a.$b&&a.$b.play();a.mh&&ig.mh.dea(this.mh[a.mh],1,"FAST")},HO:function(a,b,c,d,f){this.zt.push({Y:a,Ez:b,zNb:c,
yNb:d,id:f||q});this.visible?this.Fa=3:this.a7()},a7:function(){var a=this.zt.pop();this.ih(a.Y,a.Ez,a.zNb,a.yNb);this.visible=h;this.sia.j("DEFAULT");this.No.j("DEFAULT");this.MF.j("DEFAULT",y,y,this.AYa);this.n=0;this.Fa=this.zt.length>0?3:4;this.Qa=a},update:function(){if(!ig.r.paused&&this.Fa>0){this.n=this.n+ig.i.Sa;this.n>=this.Fa&&this.hide()}},clear:function(){this.zt.length=0;this.Qa=q;this.hide()},hide:function(){this.lIa=0;this.No.j("HIDDEN");if(this.zt.length>0)this.MF.hide(this.AYa);
else{this.Qa=q;this.visible=y;this.MF.hide();this.sia.j("HIDDEN")}},Aub:function(){this.MF.a.hi=="DEFAULT"?this.MF.qMb():this.MF.a.hi=="HIDDEN"&&this.zt.length>0&&this.a7()},wvb:function(a){if(this.Qa&&this.Qa.id==a)return h;for(var b=this.zt.length;b--;)if(this.zt.id==a)return h;return y},Ab:function(i,j,k){if(i==sc.q)j==sc.zf.cs?i.DD()&&this.clear():j==sc.zf.UPa&&this.clear();else if(i==sc.map)j==sc.JP.Uwa&&k&&k.mo&&k.Lb&&sc.options.get("update-landmark-style")==sc.C$.Uh&&this.HO(a,ig.lang.get("sc.gui.landmark-hud.title-new"),
sc.map.jFa(k.mo,k.Lb),sc.Ea.font);else if(i==sc.dc){if(j==sc.Nk.Jka&&k&&k.state&&!k.state.qbb()&&sc.options.get("update-quest-style")==sc.Qka.Uh&&!this.wvb(k.Jb.id)){i=sc.options.get("quest-show-current");j=Math.max(0,k.state.ef-(i?1:0));j=k.Jb.ij[j];this.HO(b,ig.lang.get("sc.gui.quest-hud."+(i?"taskDoneCurrent":"taskDoneCenter")),j.ik.toString(),sc.Ea.he,k.Jb.id)}}else if(i==sc.Oe)if(j==sc.FP.Pka){if(k&&sc.options.get("update-lore-style")==sc.D$.Uh){i="\\c[3]"+sc.Oe.kFa(k.Oe)+"\\c[0] ";i=i+(k.bI?
ig.lang.get("sc.gui.lore-hud.updated"):ig.lang.get("sc.gui.lore-hud.unlocked"));this.HO(c,ig.lang.get("sc.gui.lore-hud.top-title"),i,sc.Ea.font)}}else j==sc.FP.lPa&&this.HO(c,ig.lang.get("sc.gui.lore-hud.top-first-title"),ig.lang.get("sc.gui.lore-hud.top-first"),sc.Ea.font);else if(i==sc.e){if(j==sc.fa.sja&&k&&sc.options.get("update-drop-style")==sc.D$.Uh){i="\\c[3]"+sc.e.$oa(k)+"\\c[0] ";i=i+ig.lang.get("sc.gui.drop-hud.completed");this.HO(d,ig.lang.get("sc.gui.drop-hud.title"),i,sc.Ea.he)}}else if(i==
sc.Ke&&(j==sc.Mka.Dya&&k)&&sc.options.get("update-trophy-style")==sc.Rka.Uh){i=ig.lang.get("sc.gui.feats.unlocked")+" \\c[3]"+new ig.Ra(sc.Ke.ypa(k))+"\\c[0]";this.HO(f,ig.lang.get("sc.gui.feats.hud-title"),i,sc.Ea.he)}}});sc.jpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/message.png"),Y:0,f:function(){this.parent();this.F(24,24);this.Eb(12,12);this.j("HIDDEN",h)},nz:L("Y"),Da:function(a){a.na(this.s,
0,0,96+this.Y*24,128,24,24,y,y)}});sc.mpb=ig.ec.extend({R:{DEFAULT:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/message.png"),f:function(){this.parent(this.s,48,148,32,12);this.Eb(this.a.size.x/2,0);this.j("HIDDEN",h)}});sc.lpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN}},C8:q,Bz:q,s:new ig.ia("media/gui/message.png"),
Ara:{left:new ig.jc("media/gui/message.png",{width:4,height:0,left:12,top:4,right:0,bottom:0,Vb:{"default":{x:0,y:144}}}),qEb:new ig.jc("media/gui/message.png",{width:8,height:0,left:8,top:11,right:0,bottom:0,Vb:{"default":{x:16,y:136}}}),NJb:new ig.jc("media/gui/message.png",{width:8,height:0,left:0,top:11,right:8,bottom:0,Vb:{"default":{x:64,y:136}}}),right:new ig.jc("media/gui/message.png",{width:4,height:0,left:0,top:4,right:12,bottom:0,Vb:{"default":{x:80,y:144}}})},f:function(){this.parent();
this.C8=new sc.ea("",{font:sc.Ea.Ib});this.C8.H(ig.k.Ia,ig.k.$);this.C8.l(0,8);this.m(this.C8);this.Bz=new sc.kpb;this.Bz.H(ig.k.Ia,ig.k.$);this.Bz.l(0,17);this.m(this.Bz);this.F(222,22);this.Eb(111,9);this.j("HIDDEN",h)},ih:function(a,b,c){this.C8.ga(a);this.Bz.ih(b,c)},qMb:function(){this.Bz.j("DEFAULT")},hide:function(a){this.j("HIDDEN",y,y,a);this.Bz.j("HIDDEN")},Da:function(a){var b=this.a.size.x,c=Math.max(64,this.C8.a.size.x+20),c=Math.ceil(c/2)*2,b=(b-c)/2,c=(c-32)/2,d=0;this.Ara.left.nb(a,
b,8,"default",d,14);d=d+b;this.Ara.qEb.nb(a,c,11,"default",d,6);d=d+c;a.na(this.s,d,0,32,130,32,17,y,y);d=d+32;this.Ara.NJb.nb(a,c,11,"default",d,6);this.Ara.right.nb(a,b,8,"default",d+c,14)}});sc.kpb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/message.png",{width:24,height:4,left:8,top:5,right:8,bottom:3,Vb:{"default":{x:8,y:148}}}),f:function(){this.parent();this.a.nd=0.7;this.Bz=new sc.ea("",
{maxWidth:206,textAlign:ig.$g.zl.at,bestRatio:8});this.Bz.H(ig.k.Ia,ig.k.vb);this.Bz.l(0,0);this.m(this.Bz);this.Eb(109,0);this.j("HIDDEN",h)},ih:function(a,b){this.Bz.pha(b);this.Bz.ga(a);this.F(218,this.Bz.a.size.y);this.Eb(109,0)}})});ig.J=h;
ig.N("game.feature.gui.hud.feat-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image","impact.base.lang","game.feature.gui.hud.right-hud","game.feature.achievements.achievements").K(function(){sc.Hhb=ig.da.extend({n:0,eEa:q,ob:q,f:function(a){this.parent();this.eEa=a||q;this.n=3;a=ig.lang.get("sc.gui.feats.unlocked")+" \\c[3]"+new ig.Ra(sc.Ke.ypa(a))+"\\c[0]";this.ob=new sc.ea(a,{font:sc.Ea.Ib});this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y)},aI:function(){if(this.n>
0)this.n=this.n-ig.i.ja}});sc.Ghb=sc.rC.extend({Kh:[],f:function(){this.parent(ig.lang.get("sc.gui.feats.hud-title"));sc.P.Wa(sc.Ke,this);sc.P.Wa(sc.q,this)},De:function(a){a=new sc.Hhb(a);this.ae.length>=3?this.Kh.push(a):this.Rr(a,!sc.q.oe());this.hidden&&!sc.q.oe()&&this.show()},update:function(){if(!sc.q.Kr()&&!sc.q.Oo()&&!this.hidden){for(var a=this.ae.length,b=q;a--;){b=this.ae[a].Ik;b.aI();if(b.n<=0){b=this.m7(a);if(a==0&&this.ae.length==0)b.a.Db.y=b.a.size.y/2;else{b.a.Db.y=0;b.a.bb.p=KEY_SPLINES.EASE_OUT}this.qF()}}!this.hidden&&
this.ae.length==0&&this.hide()}},vQ:function(a){for(var b=this.ae.length;b--;)if(this.ae[b].Ik.eEa==a)return this.ae[b].Ik;for(b=this.Kh.length;b--;)if(this.Kh[b].eEa==a)return this.Kh[b];return q},qF:function(){if(this.Kh.length!=0){var a=this.Kh.splice(0,1)[0];this.Rr(a,h)}},Ab:function(a,b,c){if(a==sc.q)if(a.DD()){this.x3();this.hide()}else a.oe()||a.lB()||sc.dc.iq?this.hide():!a.oe()&&(!a.lB()&&this.ae.length>0&&!sc.dc.iq)&&this.show();else a==sc.Ke&&b==sc.Mka.Dya&&sc.options.get("update-trophy-style")==
sc.Rka.$c&&this.De(c)}})});ig.J=h;
ig.N("game.feature.gui.screen.loading-screen").O("impact.feature.gui.gui","impact.base.image").K(function(){sc.yjb=ig.da.extend({s:new ig.ia("media/gui/loading.png"),n:0,R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.LINEAR}},gg:q,f:function(){this.parent();this.a.zIndex=2E3;this.a.xf=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.gg=new ig.Rd(sc.Ea.font,"",{});sc.P.Wa(sc.q,this);this.j("HIDDEN",h)},update:function(){ig.r.H3a&&this.j("HIDDEN")},
Da:function(a){this.n=this.n+ig.i.Sa;a.bYa(this.s,ig.i.width-56,ig.i.height-56,Math.floor(this.n/0.05)%16,48);if(window.Ri)if(ig.r.tR instanceof ig.r.r6a||ig.r.tR instanceof ig.F9){this.gg.ga("LOADING: "+ig.r.tR.Eqa);a.QW(this.gg,5,5)}else if(ig.r.tR!=""){this.gg.ga(ig.r.tR);a.QW(this.gg,5,5)}},Ab:function(a,b){b==sc.zf.cs&&this.j(a.T4a()?"DEFAULT":"HIDDEN")}})});ig.J=h;
ig.N("game.feature.gui.screen.intro-screen").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.button","impact.base.image").K(function(){ig.lj.IntroScreen=ig.oya.extend({s:{rfgLogo:new ig.ia("media/gui/rfg-fish.png"),rfgText:new ig.ia("media/gui/rfg-text.png"),techBG:new ig.ia("media/gui/tech-intro-bg.png"),html5Logo:new ig.ia("media/gui/html5-logo.png"),impactLogo:new ig.ia("media/gui/impact-logo.png")},X:{baseBG:{color:"black",R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},
HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}}},rfgLogo:{s:"rfgLogo",g:{x:0,y:-32},align:{x:ig.k.Ia,y:ig.k.vb},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetY:-16},time:0.3,p:KEY_SPLINES.EASE_IN}}},rfgText:{s:"rfgText",g:{x:0,y:32},align:{x:ig.k.Ia,y:ig.k.vb},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.LINEAR}}},whiteBG:{color:"white",R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},
time:0.3,p:KEY_SPLINES.LINEAR}}},techBG:{s:"techBG",g:{x:0,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},time:0.6,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetY:64,Va:2},time:0.3,p:KEY_SPLINES.LINEAR}}},html5Logo:{s:"html5Logo",g:{x:0,y:14},align:{x:ig.k.Ia,y:ig.k.$},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetY:-16},time:0.3,p:KEY_SPLINES.LINEAR}}},impactLogo:{s:"impactLogo",g:{x:0,y:25},align:{x:ig.k.Ia,y:ig.k.Cb},R:{DEFAULT:{state:{},time:0.3,
p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetY:-16},time:0.1,p:KEY_SPLINES.LINEAR}}},blackBG:{color:"black",R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}}}},dl:[{time:0,X:"baseBG",state:"DEFAULT"},{time:0,X:"rfgLogo",state:"DEFAULT",$b:new ig.ka("media/sound/menu/radicalfish-bubbles.ogg",1)},{time:0.3,X:"rfgText",state:"DEFAULT"},{time:2,X:"whiteBG",state:"DEFAULT"},{time:2.5,X:"html5Logo",state:"DEFAULT"},{time:2.7,X:"techBG",state:"DEFAULT"},
{time:2.9,X:"impactLogo",state:"DEFAULT"},{time:4.5,X:"blackBG",state:"DEFAULT"},{time:5,end:h}],R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}},Kf:q,f:function(a){this.parent(a);this.a.BU(h);this.a.zIndex=1E3;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.j("HIDDEN",h);this.Kf=new sc.Xx(this)},Km:function(){if(this.n<2)this.n=2;else if(this.n<4.5)this.n=4.5},Da:function(a){a.nc("black",ig.i.TC,ig.i.RC)},start:function(){this.parent();
this.j("HIDDEN",h);this.j("DEFAULT");ig.La.De(this.Kf)},end:function(){this.parent();this.j("HIDDEN");ig.La.$e(this.Kf)}})});ig.J=h;
ig.N("game.feature.gui.screen.title-logo").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.button","impact.base.image").K(function(){ig.lj.TitleLogo=ig.oya.extend({s:{logo:new ig.ia("media/gui/title-logo.png")},X:{logoBG:{s:"logo",src:{x:0,y:128,Vc:192,sd:64},g:{x:0,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:1.3,Va:1.3},time:0.3,p:KEY_SPLINES.EASE_IN}}},logoC1:{s:"logo",src:{x:0,y:0,Vc:48,sd:64},
g:{x:0,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{HIDDEN:{state:{alpha:0,offsetX:64},time:0.3,p:KEY_SPLINES.EASE_IN},STATE1:{state:{offsetX:64},time:0.2,p:KEY_SPLINES.EASE_IN},STATE2:{state:{},time:0.5,p:KEY_SPLINES.EASE_IN_OUT}}},logoC2:{s:"logo",src:{x:0,y:64,Vc:48,sd:64},g:{x:136,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{HIDDEN:{state:{alpha:0,offsetX:-72},time:0.3,p:KEY_SPLINES.EASE_IN},STATE1:{state:{offsetX:-72},time:0.2,p:KEY_SPLINES.EASE_IN},STATE2:{state:{},time:0.5,p:KEY_SPLINES.EASE_IN_OUT}}},logoRoss:{s:"logo",
src:{x:48,y:0,Vc:112,sd:64},g:{x:31,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN}}},logoOde:{s:"logo",src:{x:48,y:64,Vc:96,sd:64},g:{x:173,y:0},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN}}},logoTechDemo:{s:"logo",src:{x:0,y:192,Vc:96,sd:32},g:{x:263,y:16},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},
time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN}}},logoTechDemo2:{s:"logo",src:{x:0,y:224,Vc:108,sd:58},g:{x:420,y:30},align:{x:ig.k.hb,y:ig.k.$},R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Va:0},time:0.3,p:KEY_SPLINES.EASE_IN}}}},dl:[{time:0,X:"logoC1",state:"STATE1"},{time:0,X:"logoC2",state:"STATE1"},{time:0.3,X:"logoC1",state:"STATE2"},{time:0.3,X:"logoC2",state:"STATE2"},{time:0.8,X:"logoRoss",state:"DEFAULT"},{time:0.8,
X:"logoOde",state:"DEFAULT"},{time:0.8,X:"logoBG",state:"DEFAULT"},{time:0.8,X:"logoTechDemo2",state:"DEFAULT"},{time:1.2,X:"logoTechDemo",state:"DEFAULT"},{time:1.6,end:h}],f:function(a){this.parent(a);this.F(465,64);this.a.zIndex=1E3}})});ig.J=h;
ig.N("game.feature.gui.screen.title-preset").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){sc.Iya=sc.vI.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0.5,offsetX:-204},time:0.2,p:KEY_SPLINES.LINEAR}},Z:q,md:q,Sk:q,ac:q,kg:[],pF:q,DW:q,tW:y,gaa:-1,n2:y,f:function(a,b){this.parent(ig.lang.get("sc.gui.title-screen.preset-title"),sc.rg.Bya);this.F(204,257);this.a.zIndex=2001;this.a.xf=h;this.pF=a;this.DW=
b;this.ac=sc.gd.submit;this.Z=new ig.$s;this.Sk=new sc.mc("\\i[back]"+ig.lang.get("sc.gui.menu.back"),204,h,sc.Mc.$c);this.Sk.H(ig.k.hb,ig.k.Cb);this.Sk.l(0,1);this.Sk.ac=sc.gd.back;this.Sk.cc=function(){this.ui()}.bind(this);this.m(this.Sk);this.md=new sc.C9(1,h,this.Z);this.md.list.Hha=y;this.md.F(204,231);this.md.H(ig.k.hb,ig.k.$);this.md.list.ua.Ql(function(a){if(a.jh>=0){this.ac.play();this.tW=h;this.gaa=a.jh}}.bind(this));this.md.l(0,2);this.m(this.md);this.Z.hh(this.md.list.ua);this.Z.Jd(this.Sk,
function(){return sc.ba.Cq()}.bind(this));this.j("HIDDEN",h)},update:function(){if(this.a.lm&&(!ig.La.zh()&&!ig.Ow)&&sc.ba.Cq()){sc.gd.back.play();this.ui()}if(this.tW){this.tW=y;this.pF&&this.pF(this.gaa)}},l:function(a,b){this.parent(a,b);this.FU("HIDDEN","offsetX",-(204+a));this.j("DEFAULT",h);this.j("HIDDEN",h)},Pf:function(){ig.Ow=y;ig.La.De(this.Z);this.HCa();this.j("DEFAULT")},ui:function(){this.DW&&this.DW();ig.Ow=h;ig.La.$e(this.Z);this.j("HIDDEN")},HCa:function(){var a=0,b=0,c=ig.input.Id,
a=this.md.list.ua.Qa.y,b=-this.md.list.Gc.a.scroll.y;this.md.list.ua.clear();this.md.list.clear(y);this.kg.length=0;for(var d=sc.HLa.kg,f=q,f=q,i=0;i<d.length;i++)if(f=d[i]){f=new sc.Iya.nya(i,f);f.F(201,44);this.md.Sd(f);this.kg[i]=f}a=Math.max(0,Math.min(a,this.md.list.Ar().length));this.md.list.Go=a;c?this.md.list.ua.tl(0,a):this.md.list.ua.Sg(0,a,y,h);this.md.list.FK(b,h)}});sc.Iya.nya=ig.vn.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},
gb:new ig.jc("media/gui/buttons.png",{width:13,height:6,left:9,top:9,right:9,bottom:9,Vb:{"default":{x:0,y:65},focus:{x:32,y:65},"delete":{x:64,y:65}}}),aa:q,location:q,Zqa:q,position:q,jh:-1,f:function(a,b){this.parent();this.jh=a;var c=b.dha.getData();if(c){var d=new sc.Tb(99,{leadingZeros:2,size:sc.Ff.jF});d.za(a);d.l(8,8);this.m(d);c=c.player;this.aa=new sc.Tb(99,{size:sc.Ff.hv});this.aa.za(c.level);this.aa.H(ig.k.ra,ig.k.$);this.aa.l(8,8);this.m(this.aa);c=new sc.ea("LV: ",{speed:ig.Rd.se.zg});
c.H(ig.k.ra,ig.k.$);c.l(26,4);this.m(c);this.location=new sc.ea(b.sub.toString(),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.location.H(ig.k.hb,ig.k.$);this.location.l(8,29);this.m(this.location);this.Zqa=new sc.ea(b.title.toString(),{speed:ig.Rd.se.zg,font:sc.Ea.he});this.Zqa.H(ig.k.hb,ig.k.$);this.Zqa.l(8,16);this.m(this.Zqa)}},Lo:function(){this.parent()},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"focus":"default")}})});ig.J=h;
ig.N("game.feature.gui.widget.modal-dialog").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.gui.focus-gui","game.feature.interact.button-group").K(function(){sc.dv={};sc.dv.NONE=0;sc.dv.INFO=1;sc.dv.WARNING=2;sc.dv.ERROR=3;sc.dv.QUESTION=4;sc.ikb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},Ef:q,ob:q,aC:y,Y:0,Kf:q,Gb:q,
f:function(a,b,c,d){this.parent();this.a.zIndex=9999999;this.a.nd=0.8;this.a.Nt=h;this.a.xf=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Gb=d;this.Y=b||sc.dv.NONE;this.ob=new sc.ea(a,{maxWidth:300+(!c?15:0)});a=new ig.da;a.m(this.ob);if(c){b=Math.max(16,this.ob.a.size.y);if(this.Y){d=new ig.ec(this.s,416+16*(this.Y-1),464,15,15);a.m(d);c=Math.max(16,this.ob.a.size.x+15+4);d.l(0,1);this.ob.l(19,0)}else c=Math.max(16,this.ob.a.size.x)}else{c=Math.max(16,this.ob.a.size.x);if(this.Y){d=new ig.ec(this.s,
416+16*(this.Y-1),464,15,15);a.m(d);b=Math.max(16,this.ob.a.size.y+15+4);d.l(c/2-7.5,2);this.ob.l(0,19)}else b=Math.max(16,this.ob.a.size.y)}a.F(c,b);this.Ef=new sc.kI(a);this.Ef.H(ig.k.Ia,ig.k.vb);this.m(this.Ef);this.j("HIDDEN",h);this.j("DEFAULT");this.ob.gg.dH=this.raa.bind(this);this.aC=this.ob.gg.On();this.Kf=new sc.Xx(this);ig.i.Un||ig.La.De(this.Kf)},update:function(){!this.a.al&&(this.aC&&ig.i.Un)&&this.km();this.parent()},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},raa:function(){this.aC=
h},km:function(){this.Ef.j("HIDDEN");this.j("HIDDEN",y,h);this.Gb&&this.Gb()},Km:function(){if(this.aC){ig.La.$e(this.Kf);this.km()}else this.ob.finish()}});sc.URa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},Ef:q,ob:q,content:q,xa:[],Y:0,Z:q,Ha:q,Gb:q,back:q,D5a:y,f:function(a,b,c,d,f){this.parent();this.a.zIndex=9999999;this.a.nd=0.8;this.a.Nt=h;this.a.xf=h;this.a.size.x=ig.i.width;
this.a.size.y=ig.i.height;this.Gb=d;this.Z=new ig.$s;this.Ha=new sc.wh;this.Z.hh(this.Ha);this.Ha.Ql(function(a){this.D5a||this.hide();this.Gb&&a.data!=g&&this.Gb(a,this)}.bind(this));this.back=new sc.mc("",sc.Zs);this.back.data=-1;this.back.ac=sc.gd.back;this.back.cc=function(){this.hide();this.Gb&&this.Gb(this.back)}.bind(this);this.Z.Jd(this.back,this.pJa.bind(this));this.Y=b||sc.dv.NONE;this.ob=new sc.ea(a,{maxWidth:315});this.content=new ig.da;this.content.m(this.ob);b=a=0;d=q;if(c){var i=new ig.da;
i.H(ig.k.Ia,ig.k.Cb);for(var j=c.length>=4,k=0;k<c.length;k++){d=new sc.mc(c[k],sc.a1,h,sc.Mc.$c);if(f)d.ac=q;if(j){d.l(0,b);b=b+(sc.Mc.$c+1);if(d.a.size.x>a)a=d.a.size.x;this.Ha.jd(d,0,k)}else{d.l(a,0);a=a+(d.a.size.x+1);if(d.a.size.y>b)b=d.a.size.y;this.Ha.jd(d,k,0)}d.data=k;this.xa.push(d);i.m(d)}i.F(a,b);this.content.m(i)}if(this.Y){f=new ig.ec(this.s,416+16*(this.Y-1),464,15,15);this.content.m(f);c=Math.max(16,this.ob.a.size.x+15+4);f.l(0,1);this.ob.l(19,0)}else c=Math.max(16,this.ob.a.size.x);
if(a>c){c=a;this.ob.H(ig.k.Ia,ig.k.$)}f=Math.max(16,this.ob.a.size.y+b+4);this.content.F(c,f);this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);this.m(this.Ef);this.j("HIDDEN",h)},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},show:function(){ig.La.De(this.Z);ig.La.Md(0.2);this.Ef.j("DEFAULT");this.j("DEFAULT");this.xa.length>1&&sc.q.$Xa(this)},hide:function(){ig.La.$e(this.Z);ig.La.Md(0.2);this.Ef.j("HIDDEN");this.j("HIDDEN",y,h);sc.q.t9a(this)},pJa:function(){return sc.ba.Cq()},
pi:J()});sc.aq={P7:function(a,b,c,d){a=new sc.ikb(a,b,c,d);ig.X.vd(a)},jMb:function(a,b,c){this.P7(a,sc.dv.INFO,b,c)},qXb:function(a,b,c){this.P7(a,sc.dv.WARNING,b,c)},Sab:function(a,b,c){this.P7(a,sc.dv.ERROR,b,c)},pXb:function(a,b,c){this.P7(a,sc.dv.QUESTION,b,c)},KMa:function(a,b,c,d,f){c instanceof Array||e(Error("options must be an array!"));a=new sc.URa(a,b,c,d,f);ig.X.vd(a);a.show()},nXb:function(a,b,c,d){this.KMa(a,b,[c],d)},Dx:function(a,b,c,d){this.KMa(a,b,[ig.lang.get("sc.gui.dialogs.yes"),
ig.lang.get("sc.gui.dialogs.no")],c,d)}}});ig.J=h;
ig.N("game.feature.menu.gui.save.save-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.version.version","game.feature.gui.widget.modal-dialog","game.feature.menu.gui.menu-misc","impact.feature.interact.gui.focus-gui").K(function(){sc.nnb=ig.vn.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/buttons.png",{width:28,height:0,left:8,top:40,right:8,bottom:0,Vb:{"default":{x:0,
y:114},focus:{x:45,y:114}}}),jh:-1,TB:q,text:q,f:function(a){this.parent();this.F(448,40);this.jh=a==g?-1:a;this.text=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.new-slot"));this.text.H(ig.k.Ia,ig.k.vb);this.m(this.text);this.TB=new sc.yTa;this.m(this.TB);this.TB.CO(this.jh)},Lo:function(){this.focus=h;this.TB.focus=h},ai:function(){this.focus=y;this.TB.focus=y},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"focus":"default")}});sc.Cka=ig.vn.extend({R:{DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.LINEAR},MOVE:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DELETE:{state:{alpha:0.5,Va:0},time:0.2,p:KEY_SPLINES.EASE}},s:new ig.ia("media/gui/menu.png"),gb:new ig.jc("media/gui/buttons.png",{width:28,height:0,left:8,top:40,right:8,bottom:0,Vb:{"default":{x:0,y:114},focus:{x:45,y:114}}}),jh:-1,TB:q,aa:q,location:q,time:q,df:q,du:q,sa:q,elements:q,X2:q,kL:q,content:q,ne:q,f:function(a,c){this.parent();this.F(448,40);this.kL=new ig.da;this.kL.F(448,
40);this.kL.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.kL.j("DEFAULT",h);this.content=new ig.da;this.content.F(448,40);this.content.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.content.j("DEFAULT",h);this.du=new sc.knb;this.content.m(this.du);var d=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.level"),{font:sc.Ea.Ib});d.l(ig.dh=="ja_JP"?150:154,5);this.content.m(d);
this.aa=new sc.Tb(99,{size:sc.Ff.Uh});this.aa.l(170,6);this.content.m(this.aa);this.location=new sc.mnb;this.content.m(this.location);this.sa=new sc.onb;this.content.m(this.sa);this.elements=new sc.lnb;this.content.m(this.elements);var f=new ig.da;f.l(313,5);f.F(47,18);d=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.playtime"),{font:sc.Ea.Ib});d.H(ig.k.ra,ig.k.$);d.l(0,0);f.m(d);d=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.credit"),{font:sc.Ea.Ib});d.H(ig.k.ra,ig.k.$);d.l(0,11);f.m(d);this.content.m(f);
this.time=new sc.Dka;this.content.m(this.time);this.df=new sc.Tb(9999999);this.df.l(368,15);this.content.m(this.df);this.kL.m(this.content);this.TB=new sc.yTa;this.kL.m(this.TB);this.X2=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.noAuto"));this.X2.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.X2.H(ig.k.Ia,ig.k.vb);this.m(this.X2);this.X2.j("HIDDEN",h);this.m(this.kL);this.ne=new sc.pnb;this.m(this.ne);this.tab(a,c)},tab:function(a,
c,d){d=d==g?h:d;this.jh=c==g?-1:c;this.TB.CO(this.jh);if(a){c=a.vars&&a.vars.storage&&a.vars.storage.plot&&a.vars.storage.plot.metaSpace;if(a.player){this.du.wKb(a.player.chapter||0,c,d);this.aa.za(a.player.level||0,d);this.df.za(a.player.credit||0,d);this.elements.PKb(a.player)}this.location.lMa(a);this.sa.lLb(a,d);this.time.setTime(a,d)}else{this.content.j("HIDDEN",h);this.X2.j("DEFAULT",h)}},nxb:function(){this.kL.j("HIDDEN",h);this.ne.NHb(function(){this.kL.j("DEFAULT",h)}.bind(this))},V_a:function(a,
c){this.ne.PHb(c,function(){this.tab(a,this.jh,h)}.bind(this))},CO:function(a){this.jh=a==g?-1:a;this.TB.CO(this.jh)},BLb:function(a){this.TB.CO(a)},Lo:function(){this.focus=h;this.TB.focus=h},ai:function(){this.focus=y;this.TB.focus=y},Da:function(a){if(this.kL.a.hi!="HIDDEN"){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"focus":"default");this.content.a.hi!="HIDDEN"&&a.na(this.s,430,15,490,224,10,8)}}});sc.Dka=ig.da.extend({s:new ig.ia("media/gui/basic.png"),yD:q,QN:q,Ur:q,color:0,f:function(a,
c,d){this.parent();this.H(ig.k.ra,ig.k.$);this.F(72,13);this.l(8,4);this.yD=new sc.Tb(c||999,{leadingZeros:d||3,size:a||q});this.yD.H(ig.k.ra,ig.k.$);this.yD.l(48,0);this.m(this.yD);this.QN=new sc.Tb(99,{leadingZeros:2,size:a||q});this.QN.H(ig.k.ra,ig.k.$);this.QN.l(24,0);this.m(this.QN);this.Ur=new sc.Tb(99,{leadingZeros:2,size:a||q});this.Ur.H(ig.k.ra,ig.k.$);this.Ur.l(0,0);this.m(this.Ur);this.F(48+this.yD.a.size.x,13)},pe:function(a){this.color=a||sc.Od.$n;this.yD.pe(this.color);this.QN.pe(this.color);
this.Ur.pe(this.color)},setTime:function(a,c){var d=a.playtime;this.Ur.za(Math.floor(d)%60,c);this.QN.za(Math.floor(d/60)%60,c);this.yD.za(Math.floor(d/60/60),c)},DMa:function(a,c){this.Ur.za(Math.floor(a)%60,c);this.QN.za(Math.floor(a/60)%60,c);this.yD.za(Math.floor(a/60/60),c)},Da:function(a){a.na(this.s,this.a.size.x-21,this.yD.OD==sc.Ff.hv?2:1,107,1+this.color*8,3,7);a.na(this.s,this.a.size.x-46,this.yD.OD==sc.Ff.hv?2:1,107,1+this.color*8,3,7)}});sc.mnb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",
{width:4,height:4,left:13,top:13,right:4,bottom:0,Vb:{"default":{x:459,y:224}}}),location:q,version:q,f:function(){this.parent(305,13);this.H(ig.k.ra,ig.k.Cb);this.l(3,3);this.location=new sc.ea("",{font:sc.Ea.he});this.location.l(26,0);this.m(this.location);this.version=new sc.ea("",{font:sc.Ea.Ib});this.version.H(ig.k.ra,ig.k.vb);this.version.l(5,1);this.m(this.version)},lMa:function(a){var c="",c=a.area&&a.area.langUid?c+(a.area?ig.Ra.ic(a.area):"???"):c+(a.area?a.area:"???"),c=a.specialMap&&a.specialMap.langUid?
c+(" - "+(a.specialMap?ig.Ra.ic(a.specialMap):a.map||"???")):c+(" - "+(a.specialMap?a.specialMap:a.map||"???"));this.location.ga(c);c=a.version||"V0.2.2";if((a.saveVersion||0)<sc.version.y7)c="\\c[1]"+c;this.version.ga(c)},Da:function(a){this.parent(a);a.na(this.gb.s,13,1,481,224,8,11)}});sc.onb=ig.Ue.extend({ZFa:new ig.ia("media/gui/severed-heads.png"),gb:new ig.jc("media/gui/menu.png",{width:4,height:0,left:19,top:19,right:19,bottom:0,Vb:{"default":{x:416,y:224}}}),sa:[],f:function(){this.parent(94,
19);this.l(215,4);this.sa.push(0)},lLb:function(a){this.sa.length=1;if(a.party)for(var a=a.party.currentParty,c=0;c<a.length;c++){var d=sc.sa.$k[a[c]];d&&this.sa.push(d.sY())}},Da:function(a){this.parent(a);for(var c=0;c<this.sa.length;c++)a.na(this.ZFa,14+c*21,2,this.sa[c]*24,8,24,16)}});sc.lnb=ig.da.extend({gb:new ig.jc("media/gui/menu.png",{width:4,height:0,left:19,top:19,right:19,bottom:0,Vb:{"default":{x:416,y:224}}}),elements:[],f:function(){this.parent(43,19);this.l(198,5)},PKb:function(a){if(a.core[sc.ng.ELEMENT_CHANGE]){this.elements[sc.ha.HEAT]=
a.core[sc.ha.HEAT+8];this.elements[sc.ha.COLD]=a.core[sc.ha.COLD+8];this.elements[sc.ha.SHOCK]=a.core[sc.ha.SHOCK+8];this.elements[sc.ha.WAVE]=a.core[sc.ha.WAVE+8]}else{this.elements[sc.ha.HEAT]=y;this.elements[sc.ha.COLD]=y;this.elements[sc.ha.SHOCK]=y;this.elements[sc.ha.WAVE]=y}},Da:function(a){a.na(this.gb.s,-1,-1,656,0,18,18);this.elements[sc.ha.HEAT]&&a.na(this.gb.s,4,8,640,0,8,8);this.elements[sc.ha.COLD]&&a.na(this.gb.s,4,0,648,0,8,8);this.elements[sc.ha.SHOCK]&&a.na(this.gb.s,8,4,640,8,8,
8);this.elements[sc.ha.WAVE]&&a.na(this.gb.s,0,4,648,8,8,8)}});sc.knb=ig.da.extend({s:new ig.ia("media/gui/chapters.png"),TEb:new ig.ia("media/gui/menu.png"),du:q,ob:q,eR:q,kT:q,f:function(){this.parent();this.F(147,34);this.l(4,2);this.ob=new sc.ea(ig.lang.get("sc.gui.menu.save-menu.chapter"),{font:sc.Ea.Ib});this.ob.H(ig.k.hb,ig.k.Cb);this.ob.l(68,0);this.m(this.ob);this.eR=new sc.Tb(10,{leadingZeros:2});this.eR.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,
p:KEY_SPLINES.LINEAR}};this.eR.l(106,25);this.m(this.eR);this.kT=new ig.ec(this.TEb,544,496,11,10);this.kT.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.kT.H(ig.k.ra,ig.k.Cb);this.kT.l(12,1);this.kT.l(-15,14);this.m(this.kT)},wKb:function(a,c){this.du=Math.min(sc.q.T.r3.length,(a||0)+1);this.eR.za(this.du,h);if(this.du==0){this.ob.ga(ig.lang.get("sc.gui.menu.save-menu.chapter0"));this.eR.j("HIDDEN",h)}else if(this.du==11){this.ob.ga(ig.lang.get("sc.gui.menu.save-menu.chapterLast"));
this.eR.j("HIDDEN",h)}else{this.ob.ga(ig.lang.get("sc.gui.menu.save-menu.chapter"));this.eR.j("DEFAULT",h)}c>=1?this.kT.j("DEFAULT",h):this.kT.j("HIDDEN",h)},Da:function(a){a.na(this.s,0,0,this.du%2*147,Math.floor(this.du/2)*34,147,34)}});var a={"default":{top:"#525B68",bottom:"#2D343C"},focus:{top:"#faac49",bottom:"#c73a24"}};sc.yTa=ig.da.extend({gb:new ig.jc("media/gui/buttons.png",{width:12,height:0,left:6,top:37,right:7,bottom:0,Vb:{"default":{x:91,y:115},focus:{x:134,y:115}}}),jh:-1,focus:y,
tE:q,f:function(){this.parent();this.l(2,1);this.F(446,38)},CO:function(a){if(this.jh!=a&&this.tE){this.tE.remove();this.tE=q}this.jh=a==g?-1:a;if(this.jh<=-2){if(!this.tE){this.tE=new sc.ea("auto");this.tE.l(5,-2);this.m(this.tE)}}else{if(!this.tE){this.tE=new sc.Tb(99,{leadingZeros:2});this.tE.l(4,3);this.m(this.tE)}this.tE.za(this.jh+1,h)}},Da:function(b){var c=this.jh<=-2?37:25,d=this.focus?"focus":"default";this.gb.nb(b,c,39,d);var f=this.a.size.x-c-7;b.nc(a[d].top,c,0,f,1);b.nc(a[d].bottom,
c,36,f,1);b.na(this.gb.s,this.a.size.x-7,0,this.focus?169:126,115,5,37)},F:function(a){a=Math.max(a,50);this.parent(a,39)}});sc.pnb=ig.da.extend({gb:new ig.jc("media/gui/buttons.png",{width:28,height:0,left:8,top:40,right:8,bottom:0,Vb:{"default":{x:175,y:114}}}),R:{DEFAULT:{state:{alpha:1},time:0.5,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Va:0},time:0.5,p:KEY_SPLINES.EASE},HIDDEN_UPDATE:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE},DEFAULT_UPDATE:{state:{alpha:1},time:0.3,p:KEY_SPLINES.EASE},NEW_HIDDEN:{state:{alpha:0.5,
Xa:0},time:0.5,p:KEY_SPLINES.EASE},NEW_HIDDEN_END:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE}},f:function(){this.parent();this.F(448,40);this.Eb(0,20);this.j("HIDDEN",h)},NHb:function(a){this.j("NEW_HIDDEN",h);this.Eb(0,20);this.j("DEFAULT",y,y,function(){this.Eb(448,20);a&&a();this.j("NEW_HIDDEN_END",y,y,q,0.05)}.bind(this),0.2)},PHb:function(a,c){this.j("HIDDEN_UPDATE",h);this.Eb(0,20);this.j("DEFAULT_UPDATE",y,y,function(){this.Eb(448,20);c&&c();this.j("HIDDEN_UPDATE",y,y,q,0.05)}.bind(this),
a)},Da:function(a){this.gb.X_a(a,this.a.size.x,this.a.size.y,"default","lighter")}})});ig.J=h;
ig.N("game.feature.menu.gui.save.save-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.save.save-misc").K(function(){sc.fnb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:10,height:7,left:8,top:8,right:8,bottom:8,
Vb:{"default":{x:545,y:441}}}),button:q,f:function(){this.parent();var a=new sc.ea("- This is where you will find your auto save soon -",{font:sc.Ea.Ib});a.H(ig.k.Ia,ig.k.vb);a.l(0,1);this.m(a)}});sc.gnb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),list:q,Ha:q,kg:[],ac:q,yU:q,kt:q,f:function(){this.parent();var a=sc.e.JD;this.F(452,246);this.H(ig.k.Ia,ig.k.vb);this.l(0,a?0:2);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:226},time:0.2,p:KEY_SPLINES.LINEAR}};
this.ac=sc.gd.submit;if(!a){this.kt=new sc.fnb;this.kt.H(ig.k.Ia,ig.k.$);this.kt.F(448,41);this.kt.l(0,-2);this.m(this.kt);var b=new sc.Cka(ig.zd.kt?ig.zd.kt.getData():q,-2);b.l(0,1);this.kt.m(b)}var b=203+(a?40:0),c=new sc.$E;c.F(452,b);c.l(0,45-(a?40:0));this.m(c);this.list=new sc.kV(1,0,40);this.list.F(452,b);this.list.l(0,45-(a?40:0));this.m(this.list);this.Ha=this.list.ua;this.Ha.Rk(function(a){this.yU=a.jh!=g&&a.jh>=0?a:q;a.data&&sc.e.Cc(a.data)}.bind(this));this.Ha.jn(function(){this.yU=q;
sc.e.JD?sc.e.Cc(ig.lang.get("sc.gui.menu.save-menu.description-load")):sc.e.Cc(ig.lang.get("sc.gui.menu.save-menu.description-save"))}.bind(this));this.Ha.Ql(function(a){if(a.jh!=g&&a.jh>=-2){this.ac.play();a.jh==-1?ig.zd.kg.length>=99?sc.aq.Sab(ig.lang.get("sc.gui.dialogs.slotsOverflow"),y):this.OGb():sc.e.JD?sc.aq.Dx(ig.lang.get("sc.gui.dialogs.loadConfirm"),q,function(b){b.data==0&&this.fHb(a)}.bind(this)):sc.aq.Dx(ig.lang.get("sc.gui.dialogs.overrideConfirm"),q,function(b){b.data==0&&this.gHb(a)}.bind(this))}}.bind(this));
this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.Uea();this.list.Pf();sc.e.JD?sc.e.Cc(ig.lang.get("sc.gui.menu.save-menu.description-load")):sc.e.Cc(ig.lang.get("sc.gui.menu.save-menu.description-save"));ig.input.Id?this.Ha.tl(0,this.Ha.Qa.y):this.Ha.Sg(0,this.Ha.Qa.y,y,h);this.j("DEFAULT")},Gd:function(){this.list.ui();sc.e.Cc("",h);this.j("HIDDEN")},OGb:function(){sc.aq.Dx(ig.lang.get("sc.gui.dialogs.newConfirm"),q,function(a){a.data==0&&
sc.e.T6a()})},gHb:function(a){sc.pa.bc("player","saves",1);ig.zd.save(a.jh);this.kg.splice(a.jh,1);this.kg.unshift(a);if(a.jh!=0){a.BLb(0);this.list.$Eb(a.jh+1,1,0.2,q,y,function(a,c){a.CO(a.jh+c)}.bind(this));a.CO(0);a.V_a(ig.zd.vda(0).getData(),0.1)}else a.V_a(ig.zd.vda(0).getData());this.list.Go=1;if(ig.input.Id){if(this.Ha.Z.eg){this.Ha.Z.eg.ai();this.Ha.Z.eg=q}this.Ha.tl(0,1)}else this.Ha.Sg(0,1,y,h);this.list.BO(0,y,h);ig.La.Md(ig.input.Id?0.2:0.4)},fHb:function(a){sc.e.RHa(a.jh==-2?-1:a.jh);
sc.q.u0a()},TFb:function(){if(this.yU&&this.yU.jh>=0)sc.aq.Dx(ig.lang.get("sc.gui.dialogs.deleteConfirm"),q,function(a){if(a.data==0){sc.e.c4(this.yU.jh);this.c4(this.yU)}}.bind(this));else{var a=ig.lang.get("sc.gui.menu.save-menu.delete-info-title")+"\n\n"+ig.lang.get("sc.gui.menu.save-menu.delete-info-content"),a=new sc.rP(a,{maxWidth:300,speed:ig.Rd.se.zg},"black",0.9);a.a.zIndex=15E4;a.a.xf=h;ig.X.vd(a)}},Uea:function(a,b){var c=ig.input.Id,d=a?1:this.Ha.Qa.y||1,f=a?0:-this.list.Gc.a.scroll.y||
0;this.kg.length=0;this.Ha.clear();this.list.clear();var i=ig.zd.kg,j=q;if(sc.e.JD){if(ig.zd.kt){j=new sc.Cka(ig.zd.kt.getData(),-2);this.list.Sd(j)}}else{j=new sc.nnb(-1);this.list.Sd(j)}for(var k=0;k<i.length;k++){j=new sc.Cka(i[k].getData(),k);this.list.Sd(j,y);this.kg[k]=j}d=Math.max(0,Math.min(d,this.list.Ar().length));this.list.Go=d;c?this.Ha.tl(0,d):this.Ha.Sg(0,d,y,h);this.list.FK(f,!b)},bDb:function(){var a=new sc.Cka(ig.zd.kg[0].getData(),0);this.list.IGa(a,1,0.2);this.kg.splice(0,0,a);
for(a=0;a<this.kg.length;a++)this.kg[a].CO(a);this.list.Go=1;ig.input.Id?this.Ha.tl(0,1):this.Ha.Sg(0,1,y,h);this.list.BO(0,y);ig.La.Md(ig.input.Id?0.5:1)},c4:function(a,b){var c=this.Ha.Qa.y||0,d=-this.list.Gc.a.scroll.y||0;this.list.PIb(a.jh+1,b?"MOVE":"DELETE",0.2);this.kg.splice(a.jh,1);for(var f=0;f<this.kg.length;f++)this.kg[f].CO(f);c=c+1>=this.list.Ar().length?c-1:Math.max(0,Math.min(c,this.list.Ar().length-1));this.list.Go=c;if(a==this.yU)this.yU=q;ig.input.Id?this.Ha.tl(0,c):this.Ha.Sg(0,
c,y,h,y,h);c=this.list.tY(c);-d!=c-1?this.list.BO(d,y,h):this.list.BO(c-1,y,h);ig.La.Md(0.2)},Ab:function(a,b){if(a==sc.e&&b==sc.fa.TSa){this.bDb();this.kg[0].nxb()}}})});ig.J=h;
ig.N("game.feature.menu.gui.save.save-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.widget.modal-dialog","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.control.control","game.feature.menu.gui.save.save-list").K(function(){function a(a,c){var d="0000"+Math.floor(a);return d.length>=4+c?Math.floor(a):d.substr(d.length-c)}sc.hnb=sc.uw.extend({Hb:q,uS:q,wS:q,kb:q,list:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=
ig.i.height;this.list=new sc.gnb;this.m(this.list);this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.uS=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.deleteSlot"),g,h,sc.Mc.$c);this.uS.dg=h;this.uS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.uS.a.size.y},
time:0.2,p:KEY_SPLINES.LINEAR}};this.uS.cc=this.SFb.bind(this);this.wS=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.hotkeys.newSlot"),g,h,sc.Mc.$c);this.wS.dg=h;this.wS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.wS.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.wS.cc=this.NGb.bind(this);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.list.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.list.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,
0,sc.Si.Aw);ig.La.Md(0.2);this.list.Yd();this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.uS);sc.e.Z.Te(this.wS);this.list.Gd();this.kb=q},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},kGb:function(){return sc.ba.ND()},SFb:function(){this.list.TFb()},oGb:function(){return sc.ba.ON()},NGb:function(){ig.zd.kg.length>=100?sc.aq.Sab(ig.lang.get("sc.gui.dialogs.slotsOverflow"),y):sc.aq.Dx(ig.lang.get("sc.gui.dialogs.newConfirm"),
q,function(a){a.data==0&&sc.e.T6a()})},ck:function(){if(!this.kb){this.kb=sc.e.JD?new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.load.title"),ig.lang.get("sc.gui.menu.help-texts.load.pages"),function(){this.xh(h)}.bind(this),h):new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.save.title"),ig.lang.get("sc.gui.menu.help-texts.save.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.uS,this.kGb.bind(this));
sc.e.JD||sc.e.Z.Jd(this.wS,this.oGb.bind(this));this.xh(a)},xh:function(a){sc.e.JD||sc.e.bk(M("wS").bind(this));sc.e.bk(M("uS").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:J()});sc.pQa=sc.vI.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0.5,offsetX:-204},time:0.2,p:KEY_SPLINES.LINEAR}},Z:q,md:q,o6:q,SM:q,Sk:q,load:y,ac:q,kg:[],AQ:q,mQ:y,pF:q,DW:q,tW:y,gaa:-1,n2:y,f:function(a,c,d){this.parent(a?ig.lang.get("sc.gui.menu.save-menu.load"):
ig.lang.get("sc.gui.menu.save-menu.save"),sc.rg.Bya);this.F(204,283);this.a.zIndex=2001;this.a.xf=h;this.load=a||y;this.pF=c;this.DW=d;this.ac=sc.gd.submit;this.Z=new ig.$s;this.AQ=new ig.mf("red",204,273);this.AQ.l(0,9);this.AQ.a.R={DEFAULT:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.AQ.j("HIDDEN",h);this.m(this.AQ);this.SM=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.save-menu.delete"),!a?101:204,h,sc.Mc.$c);this.SM.H(ig.k.hb,
ig.k.$);this.SM.l(!a?102:0,12);this.SM.cc=function(){this.Vcb()}.bind(this);this.m(this.SM);this.Sk=new sc.mc("\\i[back]"+ig.lang.get("sc.gui.menu.back"),204,h,sc.Mc.$c);this.Sk.H(ig.k.hb,ig.k.Cb);this.Sk.l(0,1);this.Sk.ac=sc.gd.back;this.Sk.cc=function(){this.ui()}.bind(this);this.m(this.Sk);if(!a){this.o6=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.save-menu.new-save"),101,h,sc.Mc.$c);this.o6.H(ig.k.hb,ig.k.$);this.o6.l(0,12);this.o6.cc=function(){this.mQ&&this.Vcb();ig.zd.save(ig.zd.kg.length);
this.Uea(h,h)}.bind(this);this.m(this.o6)}this.md=new sc.C9(1,h,this.Z);this.md.F(204,230);this.md.H(ig.k.hb,ig.k.$);this.md.list.ua.Ql(function(a){if(a.jh!=g&&a.jh>=0){this.ac.play();if(this.mQ)sc.aq.Dx(ig.lang.get("sc.gui.dialogs.deleteConfirm"),q,function(b){if(b.data==0){ig.zd.c4(a.jh);this.Uea(h,q,ig.input.Id)}}.bind(this));else if(this.load){this.tW=h;this.gaa=a.jh}else sc.aq.Dx(ig.lang.get("sc.gui.dialogs.overrideConfirm"),q,function(b){if(b.data==0){ig.zd.save(a.jh);a.f$a();for(b=this.kg.length;b--;)a==
this.kg[b]&&this.kg[b].xOb()}}.bind(this))}}.bind(this));this.md.l(0,28);this.m(this.md);this.Z.hh(this.md.list.ua);a||this.Z.Jd(this.o6,function(){return sc.ba.ND()}.bind(this));this.Z.Jd(this.SM,function(){return sc.ba.Hs()}.bind(this));this.Z.Jd(this.Sk,function(){return sc.ba.Cq()}.bind(this));this.j("HIDDEN",h)},update:function(){if(this.a.lm&&(!ig.La.zh()&&!ig.Ow)&&sc.ba.Cq()){sc.gd.back.play();this.ui()}if(this.tW){this.tW=y;this.pF&&this.pF(this.gaa)}},l:function(a,c){this.parent(a,c);this.FU("HIDDEN",
"offsetX",-(204+a));this.j("DEFAULT",h);this.j("HIDDEN",h)},Vcb:function(){if(this.mQ=!this.mQ){this.SM.re.ga("\\i[help]"+ig.lang.get("sc.gui.menu.save-menu.exit-del"));this.AQ.j("DEFAULT")}else{this.SM.re.ga("\\i[help]"+ig.lang.get("sc.gui.menu.save-menu.delete"));this.AQ.j("HIDDEN")}for(var a=this.kg.length;a--;)this.kg[a].ZCa=this.mQ},Pf:function(){ig.Ow=y;ig.La.De(this.Z);this.SM.re.ga("\\i[help]"+ig.lang.get("sc.gui.menu.save-menu.delete"));this.Uea(h,y,ig.input.Id);this.j("DEFAULT")},ui:function(){this.DW&&
this.DW();ig.Ow=h;ig.La.$e(this.Z);this.mQ=y;this.AQ.j("HIDDEN");this.j("HIDDEN")},Uea:function(a,c,d){var f=0,i=0;if(a){f=this.md.list.ua.Qa.y;i=-this.md.list.Gc.a.scroll.y}this.md.list.ua.clear();this.md.list.clear(y);this.kg.length=0;for(var j=ig.zd.kg,k=q,l=q,m=0;m<j.length;m++)if(l=j[m].getData()){k=new sc.pQa.nya(m,this.mQ);k.F(201,44);this.md.Sd(k);this.kg[m]=k}if(a){if(this.n2)f=Math.max(0,Math.min(f,this.md.list.Ar().length));else{f=Math.max(0,Math.min(ig.zd.cK,this.md.list.Ar().length));
i=this.md.list.mBb(f);this.n2=h}this.md.list.Go=f;d?this.md.list.ua.tl(0,f):this.md.list.ua.Sg(0,f,y,h);this.md.list.FK(i,h)}c&&k.f$a()}});sc.pQa.nya=ig.vn.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/buttons.png",{width:13,height:6,left:9,top:9,right:9,bottom:9,Vb:{"default":{x:0,y:65},focus:{x:32,y:65},"delete":{x:64,y:65}}}),aa:q,location:q,oga:q,position:q,jh:-1,ZCa:y,f:function(b,c){this.parent();this.jh=
b==g?-1:b;this.ZCa=c||y;if(this.jh>=0){var d=ig.zd.vda(this.jh).getData();if(d){var f=new sc.Tb(99,{leadingZeros:2,size:sc.Ff.jF});f.za(b);f.l(8,8);this.m(f);f=d.player;this.aa=new sc.Tb(99,{size:sc.Ff.hv});this.aa.za(f.level);this.aa.H(ig.k.ra,ig.k.$);this.aa.l(8,8);this.m(this.aa);f=new sc.ea("LV: ",{speed:ig.Rd.se.zg});f.H(ig.k.ra,ig.k.$);f.l(26,4);this.m(f);f=q;f=d.specialMap?d.area+" - "+d.specialMap:d.area+(d.floor?" - "+d.floor:"");this.location=new sc.ea(f,{speed:ig.Rd.se.zg,font:sc.Ea.Ib});
this.location.H(ig.k.hb,ig.k.$);this.location.l(8,28);this.m(this.location);f=this.aWa(d);this.version=new sc.ea(f,{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.version.H(ig.k.hb,ig.k.$);this.version.l(28,7);this.m(this.version);d=d.playtime;f=ig.lang.get("sc.gui.menu.save-menu.time")+": "+a(d/60/60,3)+":"+a(Math.floor(d/60)%60,2)+":"+a(Math.floor(d)%60,2);this.oga=new sc.ea(f,{speed:ig.Rd.se.zg,font:sc.Ea.he});this.oga.H(ig.k.hb,ig.k.$);this.oga.l(8,16);this.m(this.oga);this.z7=new sc.ea(" - Saved!",{speed:ig.Rd.se.zg,
font:sc.Ea.Ib});this.z7.l(76,7);this.z7.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}};this.z7.j("HIDDEN",h);this.m(this.z7)}}},Lo:function(){this.parent()},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?this.ZCa?"delete":"focus":"default")},f$a:function(){this.z7.j("DEFAULT",h,y,function(){this.z7.j("HIDDEN",y,y,q,0.1)}.bind(this))},xOb:function(){var b=ig.zd.vda(this.jh).getData();this.aa.za(b.player.level);var c=
q,c=b.specialMap?b.area+" - "+b.specialMap:b.area+(b.floor?" - "+b.floor:"");this.location.ga(c);c=b.playtime;c=ig.lang.get("sc.gui.menu.save-menu.time")+": "+a(c/60/60,3)+":"+a(Math.floor(c/60)%60,2)+":"+a(Math.floor(c)%60,2);this.oga.ga(c);c=this.aWa(b);this.version.ga(c)},aWa:function(a){var c=a.version||"V0.2.2";if((a.saveVersion||0)<sc.version.y7)c="\\c[1]"+c;return c}})});ig.J=h;
ig.N("game.feature.gui.screen.title-screen").O("impact.feature.gui.gui","game.feature.gui.base.button","impact.feature.parallax.parallax","game.feature.gui.screen.intro-screen","game.feature.gui.screen.title-logo","impact.base.image","game.feature.gui.screen.title-preset","game.feature.menu.gui.save.save-menu","game.feature.version.version","game.feature.control.control").K(function(){function a(){ig.mh.play(ig.c1.Ybb,1,"MEDIUM_OUT")}function b(){ig.mh.clear("MEDIUM_OUT");d&&d.stop();d=q}sc.ckb=ig.da.extend({R:{DEFAULT:{state:{},
time:0.5,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.zIndex=900;this.a.xf=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;sc.P.Wa(sc.q,this);this.j("HIDDEN",h)},Da:function(a){a.nc("rgb("+ig.r.NM.Fk+","+ig.r.NM.tk+","+ig.r.NM.qk+")",0,0,this.a.size.x,this.a.size.y)},Ab:function(a,b){if(b==sc.zf.Ew||b==sc.zf.cs)!a.Kr()&&(!a.Oo()&&!a.LS()&&!a.jx()&&!a.X4a()&&!a.Lr())&&this.j(a.gZ()||!a.ko()?"DEFAULT":"HIDDEN")}});var c=new ig.ka("media/sound/background/title-ambient.ogg",
0.6),d=q;sc.epb=ig.da.extend({background:new ig.ia("media/gui/title-bg.png"),R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}},xB:new ig.ySa("title"),$t:q,Aua:q,xa:q,KGa:q,Kf:q,Lz:q,f:function(){this.parent();this.a.zIndex=1E3;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Kf=new sc.Xx(this);this.$t=new ig.zSa({parallax:"title"},this.xqb.bind(this));this.m(this.$t);this.Aua=new sc.fpb;this.m(this.Aua);this.xa=new sc.dpb;this.m(this.xa);
this.Lz=new sc.ea(sc.version.toString(),{font:sc.Ea.Ib});this.Lz.H(ig.k.ra,ig.k.Cb);this.Lz.l(2,0);this.Lz.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Lz.j("HIDDEN",h);this.m(this.Lz);this.KGa=new ig.lj.IntroScreen(this.Yrb.bind(this));this.m(this.KGa);sc.P.Wa(sc.q,this);sc.P.Wa(sc.e,this);this.j("HIDDEN",h)},Ab:function(c,d){if(c==sc.q&&d==sc.zf.Ew){var f=c.gZ()?"DEFAULT":"HIDDEN";if(this.a.hi!=f)if(f=="DEFAULT"){this.xa.hide(h);
ig.mh.clear("MEDIUM");if(window.Ri){a();this.j(f,h);this.AXa()}else{this.KGa.start();this.$t.j("HIDDEN",h);this.j(f,h)}}else{this.xa.hide();this.Lz.j("HIDDEN");this.$t.Lda()?this.j(f):sc.q.EDb()?this.$t.zqa("QUICK_END"):this.$t.zqa("SLOW_END")}}else if(c==sc.e&&d==sc.fa.uV){sc.e.xO(y);sc.e.YJa=h;sc.e.JD=y;if(ig.input.Id){this.xa.DIa.setOptions.yia();this.xa.DIa.loadGame.yia()}}else if(c==sc.e&&d==sc.fa.tSa&&sc.e.Oqa>=-1){this.xa.oX.Mma();b();ig.La.$e(this.xa.Z);ig.r.Pqa(sc.e.Oqa);sc.e.Oqa=-2}},Km:function(){if(this.$t.BDb("IDLE")){sc.gd.submit.play();
this.xa.show();this.Aua.hide();ig.La.$e(this.Kf)}else this.$t.Nq()},AXa:function(){this.$t.start(h);ig.La.De(this.Kf)},Yrb:function(){a();this.AXa()},xqb:function(a,b){if(a==ig.qka.wRa){if(b=="IDLE"){this.Aua.show();this.Lz.j("DEFAULT")}if(b=="SOUND_START"||b=="INTRO_SKIP")d||(d=c.play(h,{fadeDuration:1}))}else a==ig.qka.mC&&this.j("HIDDEN")}});var f={x:0,y:192,Vc:40,sd:24},i={x:40,y:192,Vc:64,sd:24};sc.fpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,
Va:0.5},time:0.2,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/buttons.png"),n:q,f:function(){this.parent();this.H(ig.k.Ia,ig.k.vb);this.l(0,-8);var a=new sc.ea(ig.lang.get("sc.gui.title-screen.pressStart"),{font:sc.Ea.font});a.H(ig.k.Ia,ig.k.vb);a.l(0,-a.a.size.y/2);this.m(a);a=new sc.FL(176);a.H(ig.k.Ia,ig.k.vb);a.l(0,a.a.size.y/2);this.m(a);var a=0,b=f,c;if(ig.browser=="Chrome"){a=a-32;c=new ig.ec(this.s,b.x,b.y,b.Vc,b.sd);c.H(ig.k.Ia,ig.k.vb);c.l(a,b.sd/2+1);this.m(c);a=a+64}b=i;c=new ig.ec(this.s,
b.x,b.y,b.Vc,b.sd);c.H(ig.k.Ia,ig.k.vb);c.l(a,b.sd/2+1);this.m(c);this.n=new ig.Vt(h,3,ig.Ol.bTa);this.j("HIDDEN",h)},show:function(){this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},update:function(){this.n.ja();for(var a=0.6+this.n.get()*0.4,b=this.a.children,c=b.length;c--;)b[c].nd=a}});sc.dpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.LINEAR}},Z:q,ua:q,nTb:q,iXb:q,DIa:{},d7:q,zXb:q,oTb:q,b9a:q,tSb:q,DA:q,dz:q,oX:q,MJ:q,
background:q,YZ:q,xa:[],Jsb:0,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Z=new ig.$s;this.ua=new sc.wh;this.Z.hh(this.ua);var a=j;ig.platform==ig.Mk.DESKTOP&&(a=a+this.Cl("close",a,5,function(){ig.La.$e(this.Z);window.setTimeout(function(){var a=window.require("nw.gui").Window.get();a.isFullscreen&&a.leaveFullscreen();a.close()},300);this.hide()}.bind(this),"setOptions"));a=a+this.Cl("options",a,4,function(){this.mrb()}.bind(this),"setOptions");a=a+this.Cl("load",
a,3,function(){this.jrb()}.bind(this),"loadGame");this.Jsb=a=a+k*3;var c=ig.zd.nCb()&&!window.Ri,a=a+this.Cl("start",a,c?1:0,function(){this.oX.Mma();b();ig.La.$e(this.Z);ig.r.start(sc.r$.jya,1)}.bind(this),"start");c&&(a=a+this.Cl("continue",a,0,function(){this.oX.Mma();b();ig.La.$e(this.Z);ig.r.Pqa(ig.zd.cK)}.bind(this),"continue"));this.MJ=new sc.mc(ig.lang.get("sc.gui.title-screen.gamecode"),sc.Zs-8);this.MJ.H(ig.k.Ia,ig.k.Cb);this.MJ.l(-20,j);this.MJ.cc=function(){window.SHOW_GAMECODE&&window.SHOW_GAMECODE()};
this.MJ.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-40,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.MJ.j("HIDDEN",h);this.ua.jd(this.MJ,1,4);this.m(this.MJ);this.gG=new sc.mc("\\i[twitter]",32);this.gG.re.a.g.y=this.gG.re.a.g.y+1;this.gG.H(ig.k.Ia,ig.k.Cb);this.gG.l(sc.Zs/2+12,j);this.gG.cc=function(){window.SHOW_TWITTER&&window.SHOW_TWITTER()};this.gG.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-40,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};
this.gG.j("HIDDEN",h);this.ua.jd(this.gG,2,4);this.m(this.gG);this.Hvb();if(this.YZ){this.dz=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.title-screen.perform-warn"),q,h,sc.Mc.rI);this.dz.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-30},time:0.2,p:KEY_SPLINES.LINEAR}};this.dz.H(ig.k.hb,ig.k.$);this.dz.tha(26);this.dz.re.l(0,-1);this.dz.l(2,2);this.dz.j("HIDDEN",h);this.dz.cc=function(){this.ebb()}.bind(this);this.m(this.dz);this.Z.Jd(this.dz,function(){return sc.ba.Hs()}.bind(this))}this.oX=
new sc.Bfb;this.DA=new sc.mc("\\i[menu]Changelog",q,h,sc.Mc.rI);this.DA.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-(this.DA.a.size.x+2)},time:0.2,p:KEY_SPLINES.LINEAR}};this.DA.H(ig.k.ra,ig.k.$);this.DA.tha(26);this.DA.re.l(0,-1);this.DA.l(2,2);this.DA.j("HIDDEN",h);this.DA.cc=function(){this.oX.lMb()}.bind(this);this.m(this.DA);this.m(this.oX);this.Z.Jd(this.DA,function(){return sc.ba.e()}.bind(this));this.background=new ig.mf("#000",ig.i.width,ig.i.height);this.background.a.R=
{DEFAULT:{state:{alpha:0.8},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.background.j("HIDDEN");this.m(this.background);this.d7=new sc.Iya(function(a){this.d7.ui();this.background.j("HIDDEN");this.oX.Mma();b();ig.La.$e(this.Z);sc.HLa.load(a)}.bind(this),function(){this.background.j("HIDDEN")}.bind(this));this.d7.H(ig.k.ra,ig.k.Cb);this.d7.l(10,8);this.m(this.d7);this.j("DEFAULT",h)},hide:function(a){this.background.j("DEFAULT");this.d7.ui();this.j("DEFAULT",
a);for(var b=this.xa.length;b--;)this.xa[b].j("HIDDEN",a);this.DA.j("HIDDEN");this.dz&&this.dz.j("HIDDEN");this.MJ.j("HIDDEN",a);this.gG.j("HIDDEN",a)},show:function(){this.background.j("HIDDEN");this.j("DEFAULT");for(var a=0,b=this.xa.length;b--;){this.xa[b].j("DEFAULT",y,y,q,a);a=a+0.016}this.DA.j("DEFAULT");this.dz&&this.dz.j("DEFAULT");ig.La.Md(0.3);ig.La.De(this.Z);ig.input.Id?this.ua.tl(0,0):this.ua.Sg(0,0,y,h);this.MJ.j("DEFAULT");this.gG.j("DEFAULT");this.YZ&&this.YZ!=localStorage.getItem("ccPerfWarning")&&
this.ebb();localStorage.setItem("ccPerfWarning",this.YZ)},Hvb:function(){var a=q;if(ig.ke.uda()>96E3){a=ig.lang.get("sc.gui.title-screen.perform-warn-text.sample-rate");a=a.replace("[X]",ig.ke.uda())}else ig.YN&&ig.YN[1]<3E3&&(a=ig.lang.get("sc.gui.title-screen.perform-warn-text.old-nwjs"));this.YZ=a},ebb:function(){if(this.YZ){var a=new sc.rP(this.YZ,{maxWidth:300,speed:ig.Rd.se.zg,textAlign:ig.$g.zl.at},"black",0.9);a.a.zIndex=1500;ig.X.vd(a)}},Cl:function(a,b,c,d,f){a=new sc.mc(ig.lang.get("sc.gui.title-screen."+
a),sc.Zs);a.l(j,b);a.H(ig.k.hb,ig.k.Cb);a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-(sc.Zs+j)},time:0.2,p:KEY_SPLINES.LINEAR}};a.cc=d;a.j("DEFAULT",h);this.ua.jd(a,0,c);this.m(a);f&&(this.DIa[f]=a);this.xa.push(a);return a.a.size.y+k},jrb:function(){sc.e.JD=h;sc.e.xO(h,sc.Fc.M1);sc.q.uy(h)},mrb:function(){sc.e.xO(h,sc.Fc.cka);sc.e.YJa=y;sc.q.uy(h)}});var j=12,k=4});ig.J=h;
ig.N("game.feature.gui.screen.pause-screen").O("impact.feature.gui.gui","impact.base.image","game.feature.gui.base.button","game.feature.menu.gui.save.save-menu","game.feature.gui.widget.modal-dialog").K(function(){sc.wlb=ig.da.extend({Z:q,ua:q,oU:q,T_:q,xM:q,dL:q,DH:q,dO:q,Lz:q,fqa:q,s:new ig.ia("media/gui/scanlines.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},FRb:y,f:function(){this.parent();this.a.nd=0.8;this.a.zIndex=100;this.a.xf=
h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Z=new ig.$s;this.ua=new sc.wh;this.Z.hh(this.ua);this.dL=new sc.mc(ig.lang.get("sc.gui.pause-screen.to-title"),sc.Zs);this.dL.H(ig.k.ra,ig.k.Cb);this.dL.cc=function(){ig.Ow=y;sc.aq.Dx(ig.lang.get("sc.gui.dialogs.titleConfirm"),q,function(a){ig.Ow=h;if(a.data==0){ig.La.$e(this.Z);ig.r.a3a()}}.bind(this))}.bind(this);this.T_=new sc.mc(ig.lang.get("sc.gui.pause-screen.skip"),sc.Zs);this.T_.H(ig.k.ra,ig.k.Cb);this.T_.cc=function(){sc.q.uNa();sc.q.Zw()}.bind(this);
this.xM=new sc.mc("CANCEL BUTTON",sc.Zs);this.xM.H(ig.k.ra,ig.k.Cb);this.xM.cc=function(){ig.Ow=y;sc.aq.Dx(ig.lang.get("sc.gui.dialogs.cancelConfirm"),q,function(a){ig.Ow=h;if(a.data==0){ig.La.$e(this.Z);sc.q.Zw();ig.r.MIb()}}.bind(this))}.bind(this);this.oU=new sc.mc(ig.lang.get("sc.gui.pause-screen.resume"),sc.Zs,g,g,sc.gd.back);this.oU.H(ig.k.ra,ig.k.Cb);this.oU.cc=function(){sc.q.Zw()}.bind(this);this.dL.l(3,3);this.DH=new sc.mc(ig.lang.get("sc.gui.pause-screen.save-game"),sc.Zs);this.DH.H(ig.k.ra,
ig.k.Cb);this.DH.cc=function(){sc.e.xO(h,sc.Fc.M1);sc.q.uy(h)}.bind(this);this.dO=new sc.mc(ig.lang.get("sc.gui.menu.menu-titles.options"),sc.Zs);this.dO.H(ig.k.ra,ig.k.Cb);this.dO.cc=function(){sc.e.xO(h,sc.Fc.cka);sc.q.uy(h)}.bind(this);this.Lz=new sc.ea(sc.version.toString(),{font:sc.Ea.Ib});this.Lz.H(ig.k.Ia,ig.k.Cb);this.Lz.l(2,1);this.Lz.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.Lz);var a=ig.lang.get("sc.gui.pause-screen.lang-fix");
this.fqa=new sc.ea(a,{font:sc.Ea.he});this.fqa.H(ig.k.hb,ig.k.$);this.fqa.l(2,1);this.fqa.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.dL);this.m(this.oU);this.m(this.DH);this.m(this.dO);sc.P.Wa(sc.q,this);sc.P.Wa(sc.e,this);this.j("HIDDEN",h);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(0,0,64,64,ig.nf.Eg.eF)},Da:function(a){a.Qk(this.constructor.oj,0,0,0,0,this.a.size.x,this.a.size.y)},Ab:function(a,b){if(a==
sc.q){if(b==sc.zf.cs&&!sc.q.DD()&&sc.q.om!=sc.Dg.L9){var c=sc.e.qca?h:sc.q.Kr();this.j(c?"DEFAULT":"HIDDEN");if(c){this.pOb(sc.q.nO==sc.Dg.L9);ig.La.De(this.Z);ig.La.Md(0.2)}else ig.La.$e(this.Z)}}else if(a==sc.e&&b==sc.fa.WQa)this.a.jB=y},pOb:function(a){this.yH(this.T_);this.yH(this.xM);var b=this.ua.Qa.y,c=ig.input.Id,a=a?a:y;this.ua.clear();this.ua.jd(this.oU,0,0,h);this.ua.jd(this.dO,0,1);this.ua.jd(this.DH,0,2);this.dL.l(3,3);var d=this.dL.a.size.y;if(sc.q.xe==sc.yw.k1&&!sc.q.Ss){this.m(this.T_);
this.ua.jd(this.T_,0,3);this.ua.jd(this.dL,0,4);this.T_.l(3,3+d+4);this.DH.l(3,d*2+11);this.dO.l(3,d*3+15);this.oU.l(3,d*4+19)}else if(sc.q.yma){this.m(this.xM);this.xM.ga("\\c[1]"+sc.q.yma.toString()+"\\c[0]");this.xM.mE(sc.Zs);this.ua.jd(this.xM,0,3);this.ua.jd(this.dL,0,4);this.xM.l(3,3+d+4);this.DH.l(3,d*2+11);this.dO.l(3,d*3+15);this.oU.l(3,d*4+19)}else{this.ua.jd(this.dL,0,3);this.DH.l(3,3+d+4);this.dO.l(3,d*2+11);this.oU.l(3,d*3+15)}if(window.Ri){d=ig.lang.get("sc.gui.pause-screen.save-game");
sc.q.Aea()||(d="\\c[4]"+d);this.DH.ga(d);this.DH.mE(sc.Zs)}else this.DH.setActive(sc.q.Aea());b>this.ua.elements[0].length&&(b=0);a||(b=0);if(c){this.ua.tl(0,b);this.ua.pva();this.dO.yia()}else this.ua.Sg(0,b,y,h)}});ig.lj.PauseScreenLabel=ig.da.extend({n:0,jOa:1,s:new ig.ia("media/gui/pause_word.png"),R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.a.nd=1;this.a.zIndex=0;this.a.size.x=this.s.width;this.a.size.y=
this.s.height},update:function(){this.n=this.n+ig.i.Sa;if(this.n>=this.jOa)this.n=this.n-this.jOa;var a=this.n/this.jOa;this.a.nd=0.4+(a>0.5?1-a:a)*1.6;if(this.a.nd>1)this.a.nd=1},Da:function(a){a.na(this.s,0,0,0,0,this.a.size.x,this.a.size.y)}})});ig.J=h;
ig.N("game.feature.gui.screen.credits-screen").O("impact.feature.gui.gui").K(function(){ig.lj.CreditsScreen=ig.da.extend({t:new ig.u({width:200,attributes:{uc:{c:"VarName",d:"Variable that will be set to true when the credits are finished"}},label:function(){return"<b>Credits</b> and set <b>"+this.uc+"</b> to true"}}),pq:{ideaConcept:{title:"sc.gui.credits.ideaConcept",Js:["Felix 'Lachsen' Klein","Stefan 'R.D.' Lange"]},mainProgramming:{title:"sc.gui.credits.programming",Js:["Felix 'Lachsen' Klein",
"Stefan 'R.D.' Lange"]},graphics:{title:"sc.gui.credits.spriteart",Js:["Felix 'Lachsen' Klein","Thomas 'T-Free' Fr\u00f6se","Martina Brodehl","Daniel 'The_question' Tillmann"]},conceptart:{title:"sc.gui.credits.conceptart",Js:["Fabrice 'Frece' Magdanz","Solacy","Felix 'Lachsen' Klein","Stefan 'R.D.' Lange"]},leveldesign:{title:"sc.gui.credits.leveldesign",Js:["Stefan 'R.D.' Lange","Henning 'GFl\u00fcgel' Hartmann","Felix 'Lachsen' Klein"]},sound:{title:"sc.gui.credits.sound",Js:["Florian 'Teflo' Valentin Valerius Ben \n Abdeslam Ben Modeslam Ben Omar Mohammed Abdeslam",
"Airon","Deniz 'Intero' Akbulut"]},music:{title:"sc.gui.credits.music",Js:["Deniz 'Intero' Akbulut "]},betatesters:{title:"sc.gui.credits.betatesters",Js:["Jens Meisters","Stefan Links","Lobby","Maximilian Malek","ChronoMoogle","IHeartPieGaming"]},thanks:{title:"sc.gui.credits.thanks",Js:["Anna M. Geudert - Lead Mental Support","Josephine Rettig - Cubic Environment Architect","Itaju - High-Level Complaining","FamilyJules7X - Musical Coffee Substitute","FlareShard","Steven Sch\u00e4fer","That guy named Steve",
"Friends and Family","Our Supporters and Fans (You are great!)"]}},dl:[],n:0,CE:0,Xb:y,Obb:y,uc:q,R:{DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR},ROLL:{state:{offsetY:0},time:0,p:KEY_SPLINES.LINEAR}},XHa:q,f:function(a){this.parent();this.a.zIndex=80;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.uc=a.variable;var b=a=0,c;for(c in this.pq){var d=this.pq[c],f=new sc.ea(ig.lang.get(d.title),{speed:ig.Rd.se.zg});f.H(ig.k.Ia,ig.k.$);f.a.R=
{HIDDEN:{state:{Va:0},time:0,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{Va:1},time:0.7,p:KEY_SPLINES.LINEAR}};f.a.g.y=a+ig.i.height;f.j("HIDDEN",h);this.m(f);this.dl[b]={};this.dl[b].X=f;this.dl[b].time=a/35+3;b++;var i=new ig.mf("#989898",f.a.size.x+10,1);i.H(ig.k.Ia,ig.k.$);i.a.R={HIDDEN:{state:{Xa:0},time:0,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{Xa:1},time:1,p:KEY_SPLINES.EASE_OUT}};i.j("HIDDEN",h);a=a+(3+f.a.size.y);i.a.g.y=a+ig.i.height;this.m(i);a=a+4;this.dl[b]={};this.dl[b].X=i;this.dl[b].time=
a/35+3;b++;for(f=0;f<d.Js.length;f++){c=d.Js[f].indexOf("sc.gui.credits")==0?ig.lang.get(d.Js[f]):d.Js[f];i=new sc.ea(c,{speed:ig.Rd.se.zg,textAlign:ig.$g.zl.at,linePadding:0});i.a.R={HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{alpha:1},time:2,p:KEY_SPLINES.LINEAR}};i.H(ig.k.Ia,ig.k.$);i.j("HIDDEN",h);i.a.g.y=a+ig.i.height;this.m(i);a=a+(i.a.size.y+2);this.dl[b]={};this.dl[b].X=i;this.dl[b].time=a/35+3;b++}a=a+105}a=a+ig.i.height;this.a.R.ROLL.state.offsetY=-a;this.a.R.ROLL.time=
a/35;c=new ig.zSa({parallax:"logo"},this.ksb.bind(this));c.H(ig.k.Ia,ig.k.vb);this.m(c);this.XHa=c},Ka:function(){this.XHa.Ka()},Vo:function(){this.XHa.start(h)},update:function(){if(this.Obb)for(this.n=this.n+ig.i.Sa;this.CE<this.dl.length&&this.dl[this.CE].time<=this.n;){this.dl[this.CE].X.j("DEFAULT");this.CE++}},ksb:function(){this.Obb=h;this.j("ROLL",y,h,this.ctb.bind(this))},ctb:function(){this.uc&&ig.ma.set(this.uc,h)}})});ig.J=h;
ig.N("game.feature.gui.widget.click-box").O("impact.base.image","impact.feature.interact.gui.focus-gui","game.feature.interact.button-group").K(function(){sc.rP=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},bgColor:q,Ef:q,ob:q,aC:y,Kf:q,Gb:q,f:function(a,b,c,d,f){this.parent();this.a.nd=d;this.a.zIndex=90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.ob=new sc.ea(a,b);this.bgColor=c;this.Ef=
new sc.kI(this.ob);this.Ef.H(ig.k.Ia,ig.k.vb);this.m(this.Ef);this.j("HIDDEN",h);this.j("DEFAULT");this.ob.gg.dH=this.raa.bind(this);this.aC=this.ob.gg.On();this.Gb=f;this.Kf=new sc.Xx(this);ig.i.Un||ig.La.De(this.Kf)},z$a:function(a,b){this.Ef.a.g.x=a;this.Ef.a.g.y=b},raa:function(){this.aC=h},Km:function(){if(this.aC){ig.La.$e(this.Kf);this.km()}else this.ob.finish()},km:function(){this.Ef.j("HIDDEN");this.j("HIDDEN",y,h);this.Gb&&this.Gb()},update:function(){!this.a.al&&(this.aC&&ig.i.Un)&&this.km();
this.parent()},Da:function(a){this.bgColor&&a.nc(this.bgColor,0,0,this.a.size.x,this.a.size.y)}})});ig.J=h;
ig.N("game.feature.gui.widget.gamepad-box").O("impact.base.image","impact.feature.gui.gui").K(function(){ig.lj.GamepadBox=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:1},time:0.3,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/buttons.png"),s5:q,text:q,$ca:y,f:function(a,b,c){this.parent();this.F(180,26);this.a.zIndex=90;this.s5=new sc.mc("?",28);this.s5.l(1,1);this.s5.H(ig.k.ra,ig.k.Cb);this.s5.cc=function(){var a=ig.lang.get("sc.gui.gamepad-box.info-title")+
"\n\n"+ig.lang.get("sc.gui.gamepad-box.info-text"),a=new sc.rP(a,{maxWidth:300,speed:ig.Rd.se.zg},"black",0.9);a.a.zIndex=1500;ig.X.vd(a)}.bind(this);a.jd(this.s5,b,c);this.m(this.s5);this.text=new sc.ea(ig.lang.get("sc.gui.gamepad-box.not-connected"),{maxWidth:105,speed:ig.Rd.se.n$});this.text.H(ig.k.Ia,ig.k.vb);this.text.l(4,0);this.m(this.text)},ag:function(){if(!this.$ca&&ig.input.qb==ig.Yb.Wc){this.$ca=h;this.text.ga(ig.lang.get("sc.gui.gamepad-box.connected"))}},Da:function(a){a.na(this.s,0,
0,0,160,this.a.size.x,this.a.size.y)}})});ig.J=h;
ig.N("game.feature.gui.widget.counter-hud").O("game.feature.gui.hud.right-hud","impact.feature.gui.base.basic-gui","impact.base.image").K(function(){ig.lj.CounterHud=sc.rC.extend({d6:0,WC:0,uc:q,zIndex:101,t:new ig.u({width:500,attributes:{Bcb:{c:"LangLabel",d:"Text to describe task"},d6:{c:"NumberExpression",d:"Maximum count to reach"},uc:{c:"VarName",d:"Variable that stores current hit count"}}}),Ki:q,f:function(a){this.parent(new ig.Ra(a.taskTitle));this.d6=a.maxCount;this.uc=a.variable;this.WC=
ig.ma.get(this.uc);this.Ki=new sc.dkb(ig.Ja.eh(this.d6),0);this.Ki.za(this.WC);this.Rr(this.Ki,h)},ag:function(){this.Pdb()},Pdb:function(){var a=ig.Ja.eh(this.d6);a!=this.Ki.EAb&&this.Ki.vha(a);if(a>0){a=ig.ma.get(this.uc);if(a!=this.WC){this.WC=a;this.Ki.za(this.WC)}}},remove:function(){sc.P.Hc(sc.q,this);this.parent()},Ab:function(a,b){if(b==sc.zf.cs||b==sc.zf.Ew)a.jx()||a.oe()?this.hide():this.show()},Pfa:function(){sc.P.Wa(sc.q,this);this.Pdb()}});ig.lj.CounterHud.iNa=function(a){sc.X.FB.dYa(a,
sc.X.wIa);a.Pfa&&a.Pfa();a.show()};ig.lj.ScoreHud=sc.rC.extend({WC:0,uc:q,zIndex:101,t:new ig.u({width:500,attributes:{Bcb:{c:"LangLabel",d:"Text to describe score"},uc:{c:"VarName",d:"Variable that stores value"},fh:{c:"Number",d:"Max Number to display (value can still be higher)"},time:{c:"Number",d:"Transition time for the score value when counting up and down",I:h,ab:0.2},Jha:{c:"Boolean",d:"If true, also allow negative numbers",I:h,ab:h},cYb:{c:"Boolean",d:"If true, use dots every 3 digits of the number",
I:h,ab:h}}}),Jf:q,f:function(a){this.parent(new ig.Ra(a.taskTitle));this.uc=a.variable;this.WC=ig.ma.get(this.uc);this.Jf=new sc.Tb(a.maxValue||9999999,{transitionTime:a.time||0,signed:a.signed||y,dots:a.useDots||y});this.Jf.za(this.WC);this.Rr(this.Jf,h)},ag:function(){var a=ig.ma.get(this.uc);if(a!=this.WC){this.WC=a;this.Jf.za(this.WC)}},remove:function(){sc.P.Hc(sc.q,this);this.parent()},Ab:function(a,b){if(b==sc.zf.cs||b==sc.zf.Ew)a.jx()||a.oe()?this.hide():this.show()},Pfa:function(){sc.P.Wa(sc.q,
this)}});ig.lj.ScoreHud.iNa=function(a){sc.X.FB.dYa(a,sc.X.wIa);a.Pfa&&a.Pfa();a.show()}});ig.J=h;
ig.N("game.feature.gui.widget.information").O("game.feature.gui.base.boxes","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image","impact.base.lang","game.feature.gui.base.boxes").K(function(){ig.lj.Information=sc.qya.extend({text:q,gBa:q,Xla:q,t:new ig.u({width:500,attributes:{text:{c:"LangLabel",d:"Text to display in information.",gs:h},gBa:{c:"LangLabel",d:"Alternative text to display",gs:h,I:h},Xla:{c:"VarCondition",d:"Condition for alternative text",ab:"false"}}}),
Bva:y,ob:q,hidden:y,f:function(a){this.parent(h,ig.lang.get("sc.gui.information.title"));this.a.zIndex=99;this.a.xf=h;this.text=new ig.Ra(a.text);if(a.altText){this.gBa=new ig.Ra(a.altText);this.Xla=new ig.de(a.altCondition)}this.ob=new sc.ea(this.text,{maxWidth:200});this.Rr(this.ob);this.deb();this.l(0,3);this.H(ig.k.ra,ig.k.Cb)},Vo:function(){sc.P.Wa(sc.q,this);this.show()},pi:function(){sc.P.Hc(sc.q,this)},deb:function(){if(this.Xla&&this.Xla.evaluate()!=this.Bva){this.Bva=!this.Bva;this.ob.ga(this.Bva?
this.gBa:this.text);this.Qga(0,this.ob);this.hide(h);this.show()}},Ab:function(a,b){if(b==sc.zf.Ew||b==sc.zf.cs)!this.hidden&&a.BN()&&!a.Kr()&&!a.Oo()&&!a.jx()&&!a.LS()&&!a.Lr()?this.show():this.hide()},ag:function(){this.deb()},remove:function(){this.parent()}})});ig.J=h;
ig.N("game.feature.combat.gui.hp-bar-boss").O("impact.feature.gui.gui","impact.feature.gui.base.box").K(function(){function a(a,b){return a.sBa-b.sBa}function b(a){for(var b=d.length,j=(ig.i.width-c*2)/b,k=c,l=0;l<b;++l){var m=d[l];m.COb(k,j,a==m);k=k+j}sc.q.message.y$a(b?14:0)}var c=2;Vec2.create();sc.HPa=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),lFb:new ig.jc("media/gui/status-gui.png",{width:12,height:0,left:10,top:11,right:10,bottom:0,Vb:{"default":{x:0,y:213}}}),kFb:new ig.jc("media/gui/status-gui.png",
{width:12,height:0,left:6,top:7,right:6,bottom:0,Vb:{"default":{x:32,y:215}}}),Jh:0,Jk:0,VR:0,fh:0,n:0,b0:[],HHa:q,f:function(a,b,c){this.parent();this.HHa=a;this.HEb=c;this.TOb=b;this.a.zIndex=0;this.a.jB=h},oMa:function(a){this.fh=a;if(this.Jh>this.fh)this.Jh=this.fh},ip:function(a,b,c){if(a>this.fh)a=this.fh;if(this.Jk!=a){this.n=0.75;if((this.Jk-this.Jh)*(a-this.Jk)<0)this.VR=a;this.Jk=a;if(this.Jk<0)this.Jk=0;if(b){this.VR=this.Jk;this.n=0}if(c)this.Jh=this.Jk}},update:function(){if(this.n>0){this.n=
this.n-ig.i.ja;if(this.n<=0)this.VR=this.Jk}if(this.VR!=this.Jh){var a=ig.i.Sa*this.fh/4;if(this.Jh>this.VR)this.Jh=Math.max(this.VR,this.Jh-a);else if(this.Jh<this.VR)this.Jh=Math.min(this.VR,this.Jh+a)}},Da:function(a){var b=this.a;this.lFb.nb(a,b.size.x,b.size.y,"default");var c=this.fh,d=b.size.y-4,l=this.HHa+12,b=b.size.x-l-12-d+1;this.kFb.nb(a,b+d-1,d,"default",l,2);var m=Math.round(b*Math.min(this.Jk,this.Jh)/c),n=Math.round(b*Math.max(this.Jk,this.Jh)/c);m&&this.sdb(a,l,m,this.TOb,this.HEb,
d);n!=m&&this.sdb(a,l+m,n-m,"white","white",d);c=Math.max(this.Jk,this.Jh)/c;for(d=this.b0.length;d--;){m=Math.round(this.b0[d]*b)-10;a.na(this.s,l+m,0,56+(this.b0[d]>c?24:0),213,24,11)}},sdb:function(a,b,c,d,l,m){for(var n=2,b=b+m-1,o=Math.ceil(m/2);m--;){a.nc(m>=o?d:l,b,n,c,1);n++;b--}}});sc.IPa=sc.HPa.extend({R:{DEFAULT:{state:{},time:0.25,p:KEY_SPLINES.EASE_OUT},CUTSCENE:{state:{offsetY:20},time:0.25,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:1,Va:0},time:0.25,p:KEY_SPLINES.EASE_IN},HIDDEN_CUTSCENE:{state:{Xa:1,
Va:0,offsetY:20},time:0.25,p:KEY_SPLINES.EASE_IN}},target:q,f:function(a,b){this.parent(b,"#ff7a7a","#d71112");this.target=a;sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.message,this);this.j("HIDDEN",h);this.Rza()&&(sc.q.oe()?this.j("CUTSCENE"):this.j("DEFAULT"))},jea:function(){this.oMa(this.target.W.Td("hp"));this.ip(this.target.W.Sc,h);this.Xdb();sc.P.Wa(this.target.W,this)},Rza:function(){return this.target.visibility.Lh==sc.tL.VISIBLE?h:this.target.visibility.Lh==sc.tL.HIDDEN?y:this.target.kM!=sc.pI.PEACEFUL},
Ab:function(a){if(!this.a.al)if(a instanceof sc.w9||a instanceof sc.TRa)this.Rza()&&(sc.q.oe()?this.j(sc.q.message.Npa()?"HIDDEN_CUTSCENE":"CUTSCENE"):this.j("DEFAULT"));else{this.oMa(this.target.W.Td("hp"));this.gMa(this.target.W.Sc)}},gMa:function(a){this.ip(a);this.Xdb()},Xdb:function(){if(this.target){var a=this.target.hc.RY,b=a.length;for(this.b0.length=0;b-- >this.target.Ry;)this.b0.push(a[b].Tg)}},update:function(){if(!this.a.al)if(this.Rza())sc.q.oe()?this.j(sc.q.message.Npa()?"HIDDEN_CUTSCENE":
"CUTSCENE"):this.j("DEFAULT");else{this.j("HIDDEN");return}this.parent()},remove:function(){this.target.W&&sc.P.Hc(this.target.W,this);sc.P.Hc(sc.q,this);sc.P.Hc(sc.q.message,this);this.j("HIDDEN",y,h)},vEa:function(){this.target.W&&sc.P.Hc(this.target.W,this);sc.P.Hc(sc.q,this);this.j("HIDDEN",h,h)}});sc.kya={};var d=[];sc.kya.BOSS=sc.IPa.extend({MG:q,W5:y,sBa:0,f:function(a){this.MG=new sc.ea("Boss",{font:sc.Ea.Ib});this.MG.l(12,2);this.parent(a,this.MG.a.size.x+4);this.m(this.MG);this.F(ig.i.width-
c*2,11);this.Eb(this.a.size.x/2,5.5);this.H(ig.k.hb,ig.k.Cb);this.l(c,4)},jea:function(){var a=ig.Ra.ic(this.target.hc.Tub);this.sBa=this.target.hc.Uub;this.MG.ga(a);this.HHa=this.MG.a.size.x+4;this.parent()},update:function(){if(this.a.hi!="HIDDEN"&&!this.W5){this.W5=h;d.push(this);d.sort(a);b(this)}else if(this.a.hi=="HIDDEN"&&this.W5){this.W5=y;d.ye(this);b()}this.parent()},pi:function(){if(this.W5){this.W5=y;d.ye(this);b()}},COb:function(a,b){this.F(b,11);this.Eb(b/2,5.5);this.l(a,4)}});sc.kya.PVP=
sc.IPa.extend({d5:new ig.ia("media/gui/severed-heads.png"),FMb:new ig.jc("media/gui/status-gui.png",{width:13,height:0,left:7,top:7,right:7,bottom:0,Vb:{"default":{x:0,y:128}}}),f:function(a){this.parent(a,4);this.F(ig.i.width/3,9);this.Eb(this.a.size.x/2,this.a.size.y/2);this.H(ig.k.ra,ig.k.Cb);this.l(c,4);this.yo=new sc.MTa(a.W);this.yo.l(12,-6);this.m(this.yo)},Da:function(a){this.parent(a);this.FMb.nb(a,36,7,"default",4,-8);a.na(this.s,-15,-13,231,175,25,25);a.na(this.d5,-14,-16,this.target.sY()*
24,0,24,24)}})});ig.J=h;
ig.N("game.feature.gui.widget.bar-widget").O("game.feature.gui.base.boxes","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image","impact.base.lang","game.feature.gui.base.boxes","game.feature.combat.gui.hp-bar-boss").K(function(){var a={FILL:1,EMPTY:2},b={RED:{upper:"#ff7a7a",lower:"#d71112"},GREEN:{upper:"#96f766",lower:"#25b000"},BLUE:{upper:"#66bef7",lower:"#0057b0"}};ig.lj.BarWidget=sc.HPa.extend({R:{DEFAULT:{state:{},time:0.25,p:KEY_SPLINES.EASE_OUT},CUTSCENE:{state:{offsetY:20},
time:0.25,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:1,Va:0},time:0.25,p:KEY_SPLINES.EASE_IN}},t:new ig.u({width:500,attributes:{text:{c:"LangLabel",d:"Text to display infront of widget.",gs:h},uc:{c:"VarName",d:"Variable from which to fetch the value"},fh:{c:"Number",d:"Maximum value of bar"},tBa:{c:"String",d:"Type of Bar. EMPTY => is empty when value=maxValue",U:a},color:{c:"String",d:"Color of Bar",U:b},position:{c:"Number",d:"Position of bar. 0 = bottom most bar. 1= one bar above",ab:0},b0:{c:"NumberArray",
d:"Splits added to the bar. Each value a number between 0-1.",I:h},Upa:{c:"Boolean",d:"True if the bar should not have the white total damage bar",I:h},TUb:{c:"Boolean",d:"True if the value should be the max value immediately",I:h}}}),MG:q,uc:q,tBa:q,prevValue:-1,Upa:y,f:function(c){var d=new ig.Ra(c.text);this.MG=new sc.ea(d.toString(),{font:sc.Ea.Ib});this.MG.l(12,2);d=b[c.color]||b.RED;this.parent(this.MG.a.size.x+4,d.upper,d.lower);this.m(this.MG);this.F(ig.i.width/2,11);this.Eb(this.a.size.x/
2,5.5);this.H(ig.k.ra,ig.k.Cb);this.l(2,4+16*(c.position||0));this.uc=c.variable;this.tBa=a[c.barType];this.Upa=c.hideWhite||y;if(c.splits)this.b0=c.splits;this.oMa(c.maxValue);c.instant&&this.ip(c.maxValue,h)},Vo:function(){sc.P.Wa(sc.q,this);this.j("HIDDEN",h);this.j(sc.q.oe()?"CUTSCENE":"DEFAULT");this.zva(h)},pi:function(){sc.P.Hc(sc.q,this)},Ab:function(a,b){a instanceof sc.w9&&b==sc.zf.Ew&&(a.oe()?this.j("CUTSCENE"):this.j("DEFAULT"))},zva:function(b,d){var f=ig.ma.get(this.uc);if(f!=this.prevValue){this.prevValue=
f;this.tBa==a.EMPTY&&(f=this.fh-f);this.ip(f,b,d)}},ag:function(){this.zva(this.Upa,this.Upa)},remove:function(){this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.gui.widget.indiegogo-gui").O("impact.feature.gui.gui","impact.feature.interact.gui.focus-gui","impact.feature.gui.base.box").K(function(){sc.hib="http://www.cross-code.com/page/api/get-indiegogo-data.php";sc.cQb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{alpha:0,offsetY:-20},time:0.2,p:KEY_SPLINES.EASE_OUT}},button:q,FY:q,KBb:q,Aa:y,f:function(){this.parent();this.F(158,93);this.button=new sc.oib(this.yFb.bind(this));this.m(this.button);this.FY=
new sc.sib;this.FY.H(ig.k.hb,ig.k.Cb);this.FY.l(0,94);this.m(this.FY)},setData:function(a){this.KBb=a.goals;this.button.setData(a);this.FY.setData(a.goals);this.Aa&&this.j("DEFAULT")},yFb:function(a){this.FY.sLb(a)},update:function(){this.FY.TLb(this.button.focus)},show:function(){this.Aa=h;$.ajax({url:sc.hib,type:"GET",dataType:"json",async:h,success:this.$qb.bind(this)})},$qb:function(a){this.setData(a)},hide:function(a){this.Aa=y;this.j("HIDDEN",a)}});sc.oib=ig.vn.extend({s:new ig.ia("media/gui/indiegogo.png"),
We:q,fca:q,Yca:q,Laa:q,f:function(a){this.parent();this.F(158,93);this.We=new sc.pib;this.m(this.We);var b=new sc.ea("days\nleft!",{font:sc.Ea.Ib});b.H(ig.k.ra,ig.k.$);b.l(10,8);this.m(b);this.fca=new sc.Tb(99,{size:sc.Ff.Uh,transitionTime:3});this.fca.H(ig.k.ra,ig.k.$);this.fca.l(37,9);this.m(this.fca);b=new sc.ea("fund-o-meter",{font:sc.Ea.Ib});b.H(ig.k.ra,ig.k.Cb);b.l(9,27);this.m(b);this.Yca=new sc.qib(a);this.Yca.H(ig.k.hb,ig.k.Cb);this.Yca.l(5,23);this.m(this.Yca);this.Laa=new sc.ea("",{font:sc.Ea.font,
speed:ig.Rd.se.mj});this.Laa.H(ig.k.Ia,ig.k.Cb);this.Laa.l(0,3);this.m(this.Laa)},setData:function(a){this.Yca.setData(a.goals,a.current);this.fca.za(a.days,h);this.Laa.ga(a.callToAction||"Make it happen!")},update:function(){this.We.j(this.focus?"DEFAULT":"HIDDEN")},Da:function(a){var b=this.a;a.na(this.s,0,0,0,0,b.size.x,b.size.y)},cc:function(){sc.gd.submit.play();window.SHOW_INDIEGOGO&&window.SHOW_INDIEGOGO()}});sc.pib=ig.Ue.extend({gb:new ig.jc("media/gui/indiegogo.png",{width:8,height:8,left:8,
top:8,right:8,bottom:8,Vb:{"default":{x:184,y:0}}}),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},f:function(){this.parent(158,93,y)}});sc.qib=ig.da.extend({s:new ig.ia("media/gui/indiegogo.png"),N0a:q,hN:q,value:0,fh:0,fG:0,Ay:0,HC:new ig.ka("media/sound/hud/dialog-beep-2.ogg",0.5),jba:0,f:function(a){this.parent();this.F(148,5);this.N0a=a},setData:function(a,b){this.hN=a;this.fh=b;this.fG=this.value=0},update:function(){if(this.hN){var a=
this.hN[this.fG].money-(this.fG?this.hN[this.fG-1].money:0);if(this.value<this.fh){this.value=this.value+Math.min(a*1,4E4)*ig.i.Sa;if(this.value>=this.fh){this.value=this.fh;this.HC.play(q)}else{this.jba=this.jba+ig.i.Sa;if(this.jba>0.05){this.jba=this.jba-0.05;a=0.2+0.8*(Math.log(this.value/5)/13);this.HC.play(q,{speed:a})}}}for(a=this.hN.length;a--;)if(this.hN[a].money<=this.value)break;a++;if(a>this.fG){this.fG=a;this.N0a(a);this.Ay=0.4}if(this.Ay>0)this.Ay=this.Ay-ig.i.Sa}},Da:function(a){if(this.hN){var b=
this.fG?this.hN[this.fG-1].money:0,c=this.a,j=Math.floor(c.size.x*((this.value-b)/(this.hN[this.fG].money-b)%1));if(this.Ay>0){b=this.fG%2?112:120;a.na(this.s,0,0,0,b,c.size.x,c.size.y).ge(this.Ay/0.4)}b=this.fG%2?120:112;a.na(this.s,0,0,0,b,j,c.size.y)}}});var a={x:160,y:16},b={x:160,y:24},c={x:160,y:32};sc.rib=ig.Ue.extend({s:new ig.ia("media/gui/indiegogo.png"),gb:new ig.jc("media/gui/indiegogo.png",{width:16,height:8,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:160,y:0}}}),R:{DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},FADE_1:{state:{alpha:0.9},time:0.2,p:KEY_SPLINES.LINEAR},FADE_2:{state:{alpha:0.75},time:0.2,p:KEY_SPLINES.LINEAR},FADE_3:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.LINEAR},FADE_4:{state:{alpha:0.2},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Wl:1,Y:q,f:function(b){b=new sc.ea(b,{font:sc.Ea.Ib,maxWidth:138});b.l(16,2);this.parent(158,4+b.a.size.y-1,y);this.m(b);this.Y=new ig.ec;this.Y.H(ig.k.hb,ig.k.vb);this.Y.l(4,0);this.m(this.Y);
this.R$a(a);this.a.nd=0.9},R$a:function(a){this.Y.hMa(this.s,a.x,a.y,10,8)}});sc.sib=ig.da.extend({Bpa:[],Fva:y,fU:0,f:function(){this.parent();this.F(158,0)},setData:function(a){this.rh();for(var b=this.fU=this.Bpa.length=0;b<a.length;++b){var c=new sc.rib(a[b].text);this.Bpa.push(c);c.H(ig.k.Ia,ig.k.Cb);this.m(c)}this.Fia()},Fia:function(){for(var d=this.Bpa.length,f=0;d--;){var i=this.Bpa[d];i.kd(0,f,0.2);var j=a;d<this.fU?j=c:d==this.fU&&(j=b);i.R$a(j);if(this.Fva||d<=this.fU)f=f+(i.a.size.y+
1);j="DEFAULT";if(!this.Fva)if(d>this.fU)j="HIDDEN";else if(d<this.fU-5){j=this.fU-5-d;j=j>4?"HIDDEN":"FADE_"+j}i.j(j)}},TLb:function(a){if(this.Fva!=a){this.Fva=a;this.Fia()}},sLb:function(a){this.fU=a;this.Fia()}})});ig.J=h;
ig.N("game.feature.gui.widget.level-up-hud").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.boxes","impact.base.image").K(function(){var a=["level","cp","hp","attack","defense","focus"];sc.rjb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),U2:0,f:function(){this.parent();this.F(136,20)},update:function(){if(this.U2<1.5){this.U2=this.U2+ig.i.Sa;if(this.U2>1.5)this.U2=1.5}},Da:function(a){a.na(this.s,1,0,0,192,112,20);var c=this.U2/1.5,c=KEY_SPLINES.EASE_OUT.get(c),
c=c*12%1,d=0,d=0,f=20,d=Math.round(c*20);(f=f-d)&&a.na(this.s,113,0,112,192+d,23,f);f=20;d=Math.round((1-c)*20);(f=f-d)&&a.na(this.s,113,d,112,192,23,f)}});sc.sjb=sc.qya.extend({mca:q,f:function(b){this.parent(h,ig.lang.get("sc.gui.levelup.title"));this.a.zIndex=99;this.a.xf=h;this.mca=b.deltaValues;for(var b=178,c=a.length;c--;)this.mca[a[c]]||(b=b+22);this.l(0,b);this.H(ig.k.ra,ig.k.$);this.show()},Qtb:function(a){if(!this.mca[a])return y;var c=ig.lang.get("sc.gui.levelup."+a),d=Math.min(0.5,this.mca[a]*
0.07),c=new sc.hjb(c,60,9999,{signed:h,showPlus:h,transitionTime:d});c.za(this.mca[a],y);this.Rr(c,h);return h}});ig.lj.LevelUpHud=ig.t$.extend({R:{DEFAULT:{state:{alpha:1},time:0.5,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:1},time:0.5,p:KEY_SPLINES.EASE_IN}},Kf:q,ml:0,n:0,kua:q,Lqa:q,f:function(a){this.parent(h,ig.lang.get("sc.gui.levelup.title"));this.F(ig.i.width,ig.i.height);this.kua=new sc.sjb(a);this.m(this.kua);a=new sc.rjb;this.Lqa=new sc.wjb(a,32);this.Lqa.l(0,100);this.m(this.Lqa);this.Kf=
new sc.Xx(this);ig.La.De(this.Kf);ig.ma.set("tmp._levelUpFinished",y)},update:function(){if(this.ml<a.length){this.n=this.n-ig.i.Sa;if(this.n<=0){do{var b=this.kua.Qtb(a[this.ml]);this.ml++}while(this.ml<a.length&&!b);this.n=0.5}}},Km:function(){if(this.ml<a.length)this.n=0;else{ig.ma.set("tmp._levelUpFinished",h);ig.La.$e(this.Kf);this.remove()}},remove:function(){this.Lqa.j("HIDDEN",y,h);this.kua.remove();this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.gui.widget.social").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image").K(function(){ig.lj.Social=ig.t$.extend({R:{DEFAULT:{state:{alpha:1},time:0,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},t:new ig.u({width:500,attributes:{},label:N("Social Gui! FOLLOW US FFS!!!")}),f:function(){this.parent();this.F(200,32);this.H(ig.k.Ia,ig.k.Cb);this.a.zIndex=100;$("#socialPopup").css({display:"block",height:0});$("#socialPopup").animate({height:110},
400)},remove:function(){this.parent();$("#socialPopup").animate({height:0},400,"swing",function(){$("#socialPopup").hide()})}})});ig.J=h;
ig.N("game.feature.gui.widget.timer-gui").O("impact.base.event","game.feature.gui.base.boxes","game.feature.gui.base.numbers","game.feature.gui.base.slick-box").K(function(){ig.lj.TimerGui=sc.rya.extend({g:{x:4,y:50},size:{x:80,y:18},Db:{x:40,y:6},align:{x:ig.k.hb,y:ig.k.$},t:new ig.u({width:100,attributes:{start:{c:"Boolean",d:"True if the timer should start right aways"}}}),R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-100},time:0.3,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/basic.png"),
q3:q,jE:q,XG:q,time:0,Ps:y,zIndex:1001,f:function(a){this.parent(y,"Timer");this.F(80,16);this.l(0,60);this.a.zIndex=1E6;this.q3=new sc.Tb(99,{padZeros:h});this.jE=new sc.Tb(99,{padZeros:h});this.XG=new sc.Tb(99,{padZeros:h});this.q3.H(ig.k.ra,ig.k.$);this.jE.H(ig.k.ra,ig.k.$);this.XG.H(ig.k.ra,ig.k.$);var b=8;this.q3.l(b,3);var b=b+this.q3.a.size.x,c=new ig.ec(this.s,104,0,8,8);c.H(ig.k.ra,ig.k.$);c.l(b,3);this.m(c);b=b+8;this.jE.l(b,3);b=b+this.jE.a.size.x;c=new ig.ec(this.s,104,0,8,8);c.H(ig.k.ra,
ig.k.$);c.l(b,3);this.m(c);this.XG.l(b+8,3);this.m(this.q3);this.m(this.jE);this.m(this.XG);if(a)this.Ps=a.start||y;this.j("HIDDEN",h);this.j("DEFAULT")},update:function(){if(this.Ps)this.time=this.time+ig.i.ja;var a=Math.floor(this.time*100);this.q3.za(a%100);a=Math.floor(a/100);this.jE.za(a%60);a=Math.floor(a/60);this.XG.za(a);this.parent()},start:function(){this.Ps=h},stop:function(){this.Ps=y},remove:function(){this.j("HIDDEN",y,h)}});ig.oa.STOP_TIMER=ig.qa.extend({hide:q,t:new ig.u({attributes:{hide:{c:"Boolean",
d:"True if the timer should be hidden and removed."}}}),f:function(a){this.hide=a.hide},start:function(){var a=ig.X.ox.timer;if(a){a.stop();this.hide&&a.remove()}}})});ig.J=h;
ig.N("game.feature.gui.widget.sergey-mode").O("impact.feature.gui.gui").K(function(){ig.lj.SergeyMode=ig.da.extend({t:new ig.u({width:100,attributes:{}}),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},M3:q,Rp:q,Vbb:q,l0a:q,scroll:0,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.a.zIndex=49;this.a.nd=0.4;this.M3=new ig.ia("media/gui/sergey-mode-corner.png");this.Rp=new ig.Xz("media/gui/sergey-mode-corner.png",ig.nf.Eg.eF,
64,64,64,0,1,1);this.Vbb=new ig.ka("media/sound/scenes/sergey-mode-start.ogg",0.8);this.l0a=new ig.ka("media/sound/scenes/sergey-mode-end.ogg",0.8)},Ka:function(){this.M3.Tc();this.Rp.Tc()},Vo:function(){this.j("HIDDEN",h);this.j("DEFAULT");ig.ke.Fga();this.Vbb.play()},update:function(){this.scroll=this.scroll-ig.i.Sa*32},Da:function(a){a.Qk(this.Rp.Iy(0),0,0,this.scroll,this.scroll,ig.i.width,ig.i.height).yi("lighter");a.na(this.M3,0,20,0,0,64,64,y,y).yi("lighter");a.na(this.M3,ig.i.width-64,20,
0,0,64,64,h,y).yi("lighter");a.na(this.M3,ig.i.width-64,ig.i.height-64-20,0,0,64,64,h,h).yi("lighter");a.na(this.M3,0,ig.i.height-64-20,0,0,64,64,y,h).yi("lighter")},remove:function(){this.l0a.play();ig.ke.pga();this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.gui.widget.chest-items").O("impact.base.image","impact.feature.gui.gui","game.feature.inventory.inventory").K(function(){var a=Vec2.vc(),b=Vec2.vc(),c=Vec2.vc(),d=[0,30,-30,45,-45,15,-15];sc.Fib=ig.da.extend({R:{HIDDEN:{state:{Xa:0,Va:0,Qb:-(Math.PI/2)},time:0.3,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},END:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}},Y:q,n:0,target:q,dn:0.4,TN:0.4,Kna:Vec2.create(0,0),f:function(a,b,c,d,l){this.parent();this.F(14,
16);this.Eb(7,8);this.l(c.x,c.y);this.Kna.x=d.x-c.x;this.Kna.y=d.y-c.y;this.target=a;this.Y=new ig.Rd(sc.Ea.font,"\\i["+b+"]",{speed:ig.Rd.se.zg});this.j("HIDDEN",h);this.start(d,l)},start:function(a,b){this.j("DEFAULT",y,y,q,b);this.n=1;this.TN=0.4;this.dn=0},update:function(){if(this.n>0){this.n=this.n-ig.i.Sa;this.n<=0&&this.j("END",y,h)}var b=this.a,c=this.target.b;ig.i.Jy(a,Math.round(c.g.x+c.size.x/2),Math.round(c.g.y-c.g.z-c.size.z/2+c.size.y/2));b.g.x=a.x-b.size.x/2;b.g.y=a.y-b.size.y/2;if(this.dn<
this.TN){this.dn=this.dn+ig.i.Sa;if(this.dn>=this.TN)this.dn=this.TN}c=Math.min(1,Math.max(0,this.dn)/this.TN);c=KEY_SPLINES.EASE_OUT.get(c);b.g.x=b.g.x+this.Kna.x*c;b.g.y=b.g.y+this.Kna.y*c},Da:function(a){a.dy().ga(this.Y,0,0)}});sc.dQb=ig.da.extend({f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.a.zIndex=5},sA:function(f,i,j){var k=q,k=-1E6,k=k=0,i=sc.yb.getItem(i),i=(i.icon||"item-default")+sc.yb.Er(i.rarity||0),l=0,m=f.b;ig.i.Jy(a,Math.round(m.g.x+m.size.x/2),Math.round(m.g.y-
m.g.z-m.size.z/2+m.size.y/2));Vec2.o0(a,7,8);for(m=0;m<j;m++){k=d[m%d.length];k=k+(-2+Math.random()*4);k=k*(Math.PI/180);b.x=Math.sin(k);b.y=Math.cos(k);k=Math.floor(20+Math.random()*20);c.x=Math.floor(a.x-b.x*k);c.y=Math.floor(a.y-b.y*k);k=new sc.Fib(f,i,a,c,l);this.m(k);l=l+0.08}}})});ig.J=h;
ig.N("game.feature.gui.widget.demo-stats").O("impact.base.event","game.feature.gui.base.boxes","game.feature.gui.base.numbers").K(function(){function a(){var a=sc.pa.Qf("player","playtime");return b(a/60/60,3)+":"+b(Math.floor(a/60)%60,2)+":"+b(Math.floor(a)%60,2)}function b(a,b){var f="0000"+Math.floor(a);return f.length>=4+b?Math.floor(a):f.substr(f.length-b)}sc.sgb=ig.da.extend({gf:q,Mg:q,QXb:q,name:q,value:q,IOa:q,f:function(a,b,f,i){this.parent();this.a.size.x=200;this.a.size.y=20;this.gf=new sc.ea(ig.lang.get("sc.gui.stats."+
a)+":");this.gf.H(ig.k.hb,ig.k.vb);this.gf.l(10,0);this.m(this.gf);this.Mg=new sc.ea(b+"");this.Mg.H(ig.k.ra,ig.k.vb);this.m(this.Mg);f&&this.rub(f);i&&this.oub(i)},update:function(){this.IOa&&this.IOa(this)},ip:function(a){this.Mg.ga(a+"")},rub:function(a){this.IOa=a||q},oub:function(a){a=new sc.ea(" / "+a);a.H(ig.k.ra,ig.k.vb);this.m(a);this.Mg.l(a.a.size.x+5,0)}});sc.LPb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},
bgColor:q,Ef:q,content:q,Gb:q,Kf:q,f:function(a){this.parent();this.a.nd=0.8;this.a.zIndex=90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Gb=a;this.Kf=new sc.Xx(this);this.content=new ig.da;this.content.F(210,160);this.mF();this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);this.m(this.Ef);this.j("HIDDEN",h);this.j("DEFAULT");ig.i.Un||ig.La.De(this.Kf)},update:function(){!this.a.al&&ig.i.Un&&this.km();this.parent()},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},
Km:function(){ig.La.$e(this.Kf);this.km()},mF:function(){var b=2,d=new sc.ea(ig.lang.get("sc.gui.stats.stats"));d.H(ig.k.Ia,ig.k.$);d.l(0,b);this.content.m(d);b=b+(d.a.size.y+2);d=new sc.FL(200);d.H(ig.k.Ia,ig.k.$);d.l(0,b);this.content.m(d);b=this.l2(b+4,"time",a(),function(b){b.ip(a())}.bind(this));d=sc.pa.Qf("chests","autumn-area");b=this.l2(b,"chests",d,q,Math.max(27,d));b=this.l2(b,"level",sc.q.T.aa||0);b=this.l2(b,"exp",sc.pa.Qf("player","exp")||0);b=this.l2(b,"money",sc.pa.Qf("player","money")||
0);b=this.l2(b,"kills",sc.pa.Qf("combat","totalKilled")||0)},l2:function(a,b,f,i,j){b=new sc.sgb(b,f,i,j);b.l(0,a);this.content.m(b);return a+b.a.size.y+2},km:function(){this.Ef.j("HIDDEN");this.j("HIDDEN",y,h);this.Gb&&this.Gb()}})});ig.J=h;
ig.N("game.feature.gui.widget.demo-highscore").O("impact.base.event","impact.feature.gui.base.basic-gui","game.feature.gui.base.boxes","game.feature.gui.base.numbers").K(function(){function a(a){return b(a/60/60)+":"+b(a/60)+":"+b(Math.floor(a)%60)+"."+b(a*100%100)}function b(a){var b="0000"+Math.floor(a);return b.length>=6?Math.floor(a):b.substr(b.length-2)}sc.qgb=ig.da.extend({gf:q,Mg:q,name:q,value:q,f:function(c,d,f){this.parent();this.a.size.x=200;this.a.size.y=18;this.gf=new sc.ea((f?"\\c[3]":
"")+b(c));this.gf.H(ig.k.hb,ig.k.vb);this.gf.l(10,0);this.m(this.gf);this.Mg=new sc.ea((f?"\\c[3]":"")+a(d));this.Mg.H(ig.k.ra,ig.k.vb);this.m(this.Mg);d=new ig.mf("#222222",200,1);d.H(ig.k.Ia,ig.k.Cb);d.l(5,0);this.m(d);if(c%2==1&&!f){this.gf.a.nd=0.6;this.Mg.a.nd=0.6}}});sc.pgb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},Ef:q,content:q,Gb:q,Kf:q,Ur:y,f:function(a,b){this.parent();this.a.nd=0.8;this.a.zIndex=
90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Gb=a;this.Ur=b!=g?b:y;this.Kf=new sc.Xx(this);this.content=new ig.da;this.content.F(210,218);this.mF();this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);this.m(this.Ef);this.j("HIDDEN",h);this.j("DEFAULT");ig.i.Un||ig.La.De(this.Kf)},update:function(){!this.a.al&&ig.i.Un&&this.km();this.parent()},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},Km:function(){ig.La.$e(this.Kf);this.km()},mF:function(){var a=
2,b=new sc.ea(ig.lang.get("sc.gui.highscore.header"+(this.Ur?"2":"")));b.H(ig.k.Ia,ig.k.$);b.l(0,a);this.content.m(b);a=a+(b.a.size.y+2);b=new sc.FL(200);b.H(ig.k.Ia,ig.k.$);b.l(0,a);this.content.m(b);for(var a=a+4,b=this.Ur?sc.q.Uda:sc.q.Tda,f=0;f<10;f++)a=b[f]!=g?this.jVa(a,f+1,b[f],f==0):this.jVa(a,f+1,0,f==0)},jVa:function(a,b,f,i){b=new sc.qgb(b,f,i);b.l(0,a);this.content.m(b);return a+b.a.size.y+1},km:function(){this.Ef.j("HIDDEN");this.j("HIDDEN",y,h);this.Gb&&this.Gb()}});sc.rgb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},
time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},Ef:q,content:q,Gb:q,Kf:q,vfa:y,gU:q,Ur:y,f:function(a,b){this.parent();this.a.nd=0.8;this.a.zIndex=90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.l(0,80);this.Gb=a;this.Ur=b!=g?b:y;this.Kf=new sc.Xx(this);this.content=new ig.da;this.content.F(180,60);this.mF();this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);this.Ef.RF.a.nd=0.9;this.m(this.Ef);this.j("HIDDEN",h);this.j("DEFAULT");
ig.i.Un||ig.La.De(this.Kf)},update:function(){!this.a.al&&(this.vfa&&ig.i.Un)&&this.km();this.parent()},Km:function(){if(this.vfa){ig.La.$e(this.Kf);this.km()}else this.gU.finish()},mF:function(){var b=2,d=new sc.ea(ig.lang.get("sc.gui.highscore.last-time"+(this.Ur?"2":"")));d.H(ig.k.Ia,ig.k.$);d.l(0,b);this.content.m(d);b=b+(d.a.size.y+2);d=new sc.FL(170);d.H(ig.k.Ia,ig.k.$);d.l(0,b);this.content.m(d);var b=b+4,d=sc.q,f=new sc.ea("\\c[3]"+a(d.l5));f.H(ig.k.Ia,ig.k.$);f.l(0,b);this.content.m(f);b=
b+(f.a.size.y+2);this.vfa=h;f=this.Ur?d.Uda:d.Tda;if(f[0]!=g&&d.l5==f[0]){this.gU=new sc.ea("\\c[3]"+ig.lang.get("sc.gui.highscore.new-record"),{speed:ig.Rd.se.mj});this.gU.a.R={DEFAULT:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.EASE_IN}};this.vfa=y;this.gU.H(ig.k.Ia,ig.k.$);this.gU.l(0,b);this.gU.j("HIDDEN",h);this.gU.j("DEFAULT",y,y,function(){this.vfa=h}.bind(this),0.3);this.content.m(this.gU)}},km:function(){this.Ef.j("HIDDEN");this.j("HIDDEN",
y,h);this.Gb&&this.Gb()}})});ig.J=h;
ig.N("game.feature.gui.widget.tutorial-marker").O("impact.base.image","game.feature.gui.base.boxes").K(function(){sc.cQ={BOTTOM_RIGHT:{qv:ig.k.hb,fy:ig.k.$,JJ:y,Xa:1,Va:1},BOTTOM_LEFT:{qv:ig.k.ra,fy:ig.k.$,JJ:h,Xa:-1,Va:1},TOP_RIGHT:{qv:ig.k.hb,fy:ig.k.Cb,JJ:h,Xa:1,Va:-1},TOP_LEFT:{qv:ig.k.ra,fy:ig.k.Cb,JJ:y,Xa:-1,Va:-1}};sc.Jpb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.15,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.15,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/message.png"),
f:function(a,b){this.parent();var a=a||sc.cQ.TOP_LEFT,c=new sc.ymb(a.JJ),b=new sc.ea(b,{maxWidth:200});c.ih(b);c.H(a.qv,a.fy);c.l(18,18);this.m(c);var d=new ig.ec(this.s,56,64,32,32);d.a.MB(a.Xa,a.Va);d.H(a.qv,a.fy);this.m(d);this.F(c.a.size.x+18,c.a.size.y+18);this.Eb(this.a.size.x*(1-(a.Xa+1)/2),this.a.size.y*(1-(a.Va+1)/2));this.j("HIDDEN",h)}});sc.Kpb=ig.da.extend({x:0,y:0,width:0,height:0,R:{DEFAULT:{state:{alpha:0.7},time:0.15,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:1,Va:1},time:0.15,
p:KEY_SPLINES.EASE_IN}},f:function(a,b,c,d){this.parent();this.x=a;this.y=b;this.width=c;this.height=d;this.F(ig.i.width,ig.i.height);this.Eb(this.x+this.width/2,this.y+this.height/2);this.j("HIDDEN",h)},Da:function(a){var b=this.a.size.x,c=this.a.size.y;a.nc("black",0,0,b,this.y);a.nc("black",0,this.y,this.x,this.height);a.nc("black",this.x+this.width,this.y,b-this.x-this.width,this.height);a.nc("black",0,this.y+this.height,b,c-this.y-this.height)}});sc.iUa=ig.da.extend({R:{DEFAULT:{state:{alpha:1},
time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_IN}},Kab:q,As:q,F8a:q,Gb:q,Kf:q,Na:{start:new ig.ka("media/sound/hud/popup-2.ogg",1)},f:function(a,b,c,d,f,i,j,k,l){this.parent();this.a.xf=h;this.F(ig.i.width,ig.i.height);this.a.zIndex=2E3;this.TU=k;k=new sc.Kpb(a,b,c,d);this.m(k);this.Kab=k;var m=new sc.Zpb(c+2,d+2);m.l(a-1,b-1);m.j("HIDDEN",h);this.m(m);this.As=m;f=new sc.Jpb(i,f);a=a+c*j;b=i.Va==1?b+d:b-f.a.size.y;i.Xa==-1&&(a=a-f.a.size.x);f.l(a,b);this.m(f);
this.F8a=f;k.j("DEFAULT");m.j("DEFAULT");f.j("DEFAULT",y,y,q,0.1);if(this.TU){ig.Ru.add(0,0,"tutorialMsg");ig.ke.Fga();this.Na.start.play()}this.Gb=l;this.Kf=new sc.Xx(this);this.Kf.FYa=h;ig.La.De(this.Kf)},Km:function(){ig.La.$e(this.Kf);this.km()},km:function(){this.Kab.j("HIDDEN");this.As.j("HIDDEN");this.F8a.j("HIDDEN");this.j("HIDDEN",y,h);if(this.TU){ig.ke.pga();ig.Ru.Bba("tutorialMsg",0)}this.Gb&&this.Gb()}})});ig.J=h;
ig.N("game.feature.gui.widget.tutorial-start-gui").O("impact.base.image","impact.feature.interact.gui.focus-gui","game.feature.interact.button-group","game.feature.gui.base.compact-choice-box").K(function(){sc.Npb=ig.da.extend({f:function(a,b){this.parent();var c=new sc.ea(ig.lang.get(a.title),{font:sc.Ea.Ib});c.H(ig.k.Ia,ig.k.$);this.m(c);var d=new sc.ea(b);d.H(ig.k.Ia,ig.k.$);d.l(0,c.a.size.y);this.m(d);this.F(Math.max(c.a.size.x,d.a.size.x),c.a.size.y+d.a.size.y)}});sc.Lpb=ig.da.extend({f:function(a,
b){this.parent();var c=q,d=0;if(b){c=new ig.ec(b);c.H(ig.k.Ia,ig.k.$);this.m(c);d=d+(c.a.size.y+2)}var f=new sc.ea(a,{maxWidth:c&&c.a.size.x||400,textAlign:ig.$g.zl.at});f.H(ig.k.Ia,ig.k.$);f.l(0,d);this.m(f);d=d+f.a.size.y;this.F(Math.max(c&&c.a.size.x,f.a.size.x),d)}});sc.Mpb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},bgColor:q,z0:q,g_a:q,Pba:q,RF:q,ica:q,Kf:q,kKa:y,Na:{start:new ig.ka("media/sound/hud/popup.ogg",
1)},f:function(a,b,c,d,f){this.parent();this.a.nd=0.5;this.a.zIndex=90;this.a.Nt=h;this.a.xf=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Gb=f;this.z0=new sc.kI(new sc.Npb(a,b));this.z0.H(ig.k.Ia,ig.k.$);this.z0.l(0,24);this.m(this.z0);this.g_a=c;if(d){this.Pba=new ig.ia(d);this.Pba.Yt(this)}else this.XYa();this.ica=new sc.Xfb([{key:"show",label:ig.lang.get(a.Eeb)},{key:"skip",label:ig.lang.get(a.V6a)}],200,this.IFb.bind(this));this.ica.H(ig.k.Ia,ig.k.Cb);this.ica.l(0,24);this.m(this.ica);
this.j("HIDDEN",h);this.j("DEFAULT");this.iNb();sc.q.nCa();sc.q.$Xa(this)},Eq:function(){this.XYa()},XYa:function(){if(this.z0){var a=new sc.Lpb(this.g_a,this.Pba);this.Ef=new sc.kI(a);this.Ef.H(ig.k.Ia,ig.k.vb);this.Ef.l(0,-3);this.m(this.Ef)}},pi:function(){this.LZa();this.Pba&&this.Pba.Tc()},iNb:function(){this.kKa=h;ig.Ru.add(0,0,"tutorial");ig.Ru.XR();this.Na.start.play()},LZa:function(){if(this.kKa){this.kKa=y;ig.Ru.Bba("tutorial",0);ig.Ru.XR()}},km:function(){sc.q.t9a(this);this.z0.j("HIDDEN");
this.Ef&&this.Ef.j("HIDDEN");this.ica.j("HIDDEN");this.j("HIDDEN",y,h);this.LZa();this.z0=q},Da:function(a){a.nc("black",0,0,this.a.size.x,this.a.size.y)},IFb:function(a){this.km();this.Gb&&this.Gb(a=="show")}})});ig.J=h;
ig.N("game.feature.gui.widget.skip-scene").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui").K(function(){sc.Nnb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},ob:q,n:0,f:function(){this.parent();this.a.zIndex=60;this.H(ig.k.ra,ig.k.$);this.l(2,1);sc.P.Wa(sc.q,this);this.ob=new sc.ea(ig.lang.get("sc.gui.dialogs.skipAsk"));this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y);this.j("HIDDEN",
h)},Ab:function(a,b,c){b==sc.zf.h9?c?this.j("DEFAULT"):this.j("HIDDEN"):b==sc.zf.cs&&sc.q.DD()&&this.j("HIDDEN")}})});ig.J=h;
ig.N("game.feature.gui.plug-in").O("game.feature.gui.base.boxes","game.feature.gui.base.slick-box","game.feature.gui.base.button","game.feature.gui.base.numbers","game.feature.gui.base.text","game.feature.gui.base.misc","game.feature.gui.base.compact-choice-box","game.feature.gui.hud.combat-hud","game.feature.gui.hud.right-hud","game.feature.gui.hud.item-hud","game.feature.gui.hud.element-hud","game.feature.gui.hud.money-hud","game.feature.gui.hud.task-hud","game.feature.gui.hud.status-hud","game.feature.gui.hud.hp-hud",
"game.feature.gui.hud.exp-hud","game.feature.gui.hud.param-hud","game.feature.gui.hud.buff-hud","game.feature.gui.hud.item-timer-hud","game.feature.gui.hud.quest-hud","game.feature.gui.hud.landmark-hud","game.feature.gui.hud.lore-hud","game.feature.gui.hud.drop-hud","game.feature.gui.hud.member-hud","game.feature.gui.hud.sp-change-hud","game.feature.gui.hud.sp-mini-hud","game.feature.gui.hud.top-msg-hud","game.feature.gui.hud.feat-hud","game.feature.gui.screen.loading-screen","game.feature.gui.screen.title-screen",
"game.feature.gui.screen.pause-screen","game.feature.gui.screen.credits-screen","game.feature.gui.widget.click-box","game.feature.gui.widget.gamepad-box","game.feature.gui.widget.counter-hud","game.feature.gui.widget.information","game.feature.gui.widget.bar-widget","game.feature.gui.widget.indiegogo-gui","game.feature.gui.widget.level-up-hud","game.feature.gui.widget.social","game.feature.gui.widget.timer-gui","game.feature.gui.widget.sergey-mode","game.feature.gui.widget.chest-items","game.feature.gui.widget.demo-stats",
"game.feature.gui.widget.demo-highscore","game.feature.gui.widget.tutorial-marker","game.feature.gui.widget.tutorial-start-gui","game.feature.gui.widget.modal-dialog","game.feature.gui.widget.skip-scene").K(function(){ig.M5.push("sc.gui")});ig.J=h;
ig.N("game.feature.menu.gui.equip.equip-status").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.plug-in","game.feature.menu.gui.menu-misc").K(function(){var a={params:{elemFactor:[1,1,1,1]},properties:{}};sc.khb=ig.da.extend({WF:y,iwb:y,Ub:{Tg:q,gr:q,rr:q,xr:q,bB:q,IA:q,OB:q,hC:q},An:{},So:{},HNa:q,ofa:q,RN:q,Ee:q,lBa:q,s:new ig.ia("media/gui/menu.png"),mode:h,f:function(){this.parent();this.F(169,264);this.l(sc.options.Hi?25:2,28);this.a.R={DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(169+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};var a=new sc.Bl(sc.rg.ds);a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}};a.F(169,121);a.Eb(0,0);this.m(a);this.HNa=a;this.RN=new sc.ea(ig.lang.get("sc.gui.menu.equip.moreMod"));this.RN.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.RN.H(ig.k.Ia,ig.k.Cb);
this.RN.l(0,0);this.RN.j("DEFAULT",h);var c=5,d=sc.q.T.xy;this.Ub.Tg=this.Dl(0,c,"maxhp",0,0,y,9999,d.hp,g,a);c=c+14;this.Ub.gr=this.Dl(0,c,"atk",0,1,y,999,d.attack,g,a);c=c+14;this.Ub.rr=this.Dl(0,c,"def",0,2,y,999,d.defense,g,a);c=c+14;this.Ub.xr=this.Dl(0,c,"foc",0,3,y,999,d.focus,g,a);c=c+16;this.Ub.bB=this.Dl(0,c,"res",1,4,h,999,d.elemFactor[0],g,a);c=c+14;this.Ub.IA=this.Dl(0,c,"res",2,5,h,999,d.elemFactor[1],g,a);c=c+14;this.Ub.OB=this.Dl(0,c,"res",3,6,h,999,d.elemFactor[2],g,a);this.Ub.hC=
this.Dl(0,c+14,"res",4,7,h,999,d.elemFactor[3],g,a);a=new sc.vI(ig.lang.get("sc.gui.menu.equip.modifiers"),sc.rg.ds);a.l(0,125);a.Eb(0,0);a.F(169,139);this.m(a);this.ofa=a;for(var f in sc.Af){c=sc.Af[f];c=this.Dl(0,0,"modifier."+f,5,c.Y,h,sc.K9,1,c.tB||y,a,f,c.Li);c.j("HIDDEN",h);this.An[f]=c}this.yaa();a=new ig.mf("#7E7E7E",169,1);a.l(0,247);this.m(a);a=new ig.ec(this.s,528,224,13,8);a.l(3,252);this.m(a);this.Ee=a;a=new ig.ec(this.s,528,224,13,8);a.H(ig.k.ra,ig.k.$);a.l(3,252);this.m(a);this.lBa=
a;a=new ig.mf("#2C2D2D",169,1);a.l(0,264);this.m(a);this.m(this.RN);this.j("HIDDEN",h)},Yd:function(){this.rAa();this.j("DEFAULT")},PNb:function(a){if(this.mode=!this.mode){this.RN.ga(ig.lang.get("sc.gui.menu.equip.moreMod"));this.Ee.offsetX=528;this.lBa.offsetX=528;this.aeb(a);this.HNa.j("DEFAULT",y,y,J().bind(this));this.ofa.kd(0,125,0.2,KEY_SPLINES.LINEAR);this.ofa.Ym(169,139,0.2)}else{this.Ee.offsetX=512;this.lBa.offsetX=512;this.RN.ga(ig.lang.get("sc.gui.menu.equip.lessMod"));this.HNa.j("HIDDEN",
y,y,function(){this.aeb(a)}.bind(this));this.ofa.kd(0,0,0.2,KEY_SPLINES.LINEAR);this.ofa.Ym(169,264,0.2)}},aeb:function(a){a?a.data&&a.data.id!=g?this.fM(a.data.id,!this.mode):this.mode?this.EW():this.yaa():this.mode?this.EW():this.yaa()},POa:function(a){if(this.mode){var c="";if(a>(this.mode?7:100))c=" ["+(a-7)+" "+ig.lang.get("sc.gui.menu.equip.hidden")+"]";this.RN.ga(ig.lang.get("sc.gui.menu.equip.moreMod")+c)}},Dl:function(a,c,d,f,i,j,k,l,m,n,o,t){j=new sc.u$(ig.lang.get("sc.gui.menu.equip."+
d),f,i,j,k,q,q,m);j.l(a,c);j.vo(l);if(d=="res"){f==1&&(d="heat");f==2&&(d="cold");f==3&&(d="shock");f==4&&(d="wave")}o||(o=d);j.we={type:"INFO",content:{title:"sc.gui.menu.equip."+d,description:"sc.gui.menu.equip.descriptions."+o},offset:{x:-1,y:-1},index:{x:0,y:t!=g?t+8:i}};n?n.m(j):this.m(j);return j},fM:function(b,c){this.EW(c);c&&this.yaa();if(!(b!=-1E3&&b<0)){var d=q,f=b!=-1E3?sc.yb.getItem(b):a;if(this.WF)switch(f.equipType){case sc.Ng.HEAD:d=sc.q.T.sb.head;break;case sc.Ng.ARM:d=this.iwb?sc.q.T.sb.Bh:
sc.q.T.sb.Fh;break;case sc.Ng.TORSO:d=sc.q.T.sb.uh;break;case sc.Ng.FEET:d=sc.q.T.sb.ph}else switch(sc.e.sk){case sc.cd.NONE:return;case sc.cd.HEAD:d=sc.q.T.sb.head;break;case sc.cd.RIGHT_ARM:d=sc.q.T.sb.Fh;break;case sc.cd.LEFT_ARM:d=sc.q.T.sb.Bh;break;case sc.cd.TORSO:d=sc.q.T.sb.uh;break;case sc.cd.FEET:d=sc.q.T.sb.ph}var i=f.params,f=f.properties,j=q,j=this.Wt(d,"hp",i.hp||0);this.Ub.Tg.sh(j);j=this.Wt(d,"attack",i.attack||0);this.Ub.gr.sh(j);j=this.Wt(d,"defense",i.defense||0);this.Ub.rr.sh(j);
j=this.Wt(d,"focus",i.focus||0);this.Ub.xr.sh(j);j=this.Wt(d,"elemFactor",i.elemFactor?i.elemFactor[0]:1,0);this.Ub.bB.sh(j);j=this.Wt(d,"elemFactor",i.elemFactor?i.elemFactor[1]:1,1);this.Ub.IA.sh(j);j=this.Wt(d,"elemFactor",i.elemFactor?i.elemFactor[2]:1,2);this.Ub.OB.sh(j);j=this.Wt(d,"elemFactor",i.elemFactor?i.elemFactor[3]:1,3);this.Ub.hC.sh(j);var i=11,j=sc.q.T.wy,k=0,l;for(l in this.An)if(f[l]!=g){if(k<(this.mode?7:100)){this.An[l].j("DEFAULT",h);this.An[l].sh(this.N$(d,l,f[l]));this.An[l].l(0,
i);i=i+16}else this.An[l].j("HIDDEN",h);k++}else if(j[l]!=g){if(k<(this.mode?7:100)){this.An[l].j("DEFAULT",h);this.An[l].sh(this.N$(d,l,1));this.An[l].l(0,i);i=i+16}else this.An[l].j("HIDDEN",h);k++}else this.An[l].j("HIDDEN",h);this.POa(k)}},N$:function(a,c,d,f){if(a<0)return d=(Math.round(d*100)-100)/100;if(f){c=a[c]||1;return d=(Math.round(c*100)-Math.round(d*100))/100}a=sc.yb.getItem(a).properties;c=a[c]!=g?a[c]:1;return d=(Math.round(d*100)-Math.round(c*100))/100},Wt:function(a,c,d,f){if(a<
0){f!=g&&(d=(Math.round(d*100)-100)/100);return d}if((a=sc.yb.getItem(a))&&a.params&&a.params[c]){var i=0;if(f!=g){i=a.params[c][f]||0;d=(Math.round(d*100)-Math.round(i*100))/100}else{i=a.params[c]||0;d=d-i}}else f!=g&&(d=(Math.round(d*100)-100)/100);return d},EW:function(a){for(var c in this.Ub)this.Ub[c].sh(0);c=11;var d=sc.q.T.wy,f=0,i;for(i in this.An){this.An[i].sh(0);if(d[i]==g){this.An[i].vo(1,h);this.An[i].j("HIDDEN",h)}else{if(f<(this.mode?7:100)){a&&this.An[i].a.hi=="HIDDEN"&&this.An[i].vo(1,
h);this.An[i].l(0,c);this.An[i].j("DEFAULT",h);c=c+16}else{this.An[i].vo(1,h);this.An[i].j("HIDDEN",h)}f++}}this.POa(f)},rAa:function(){var a=sc.q.T.xy;this.Ub.Tg.vo(a.hp);this.Ub.gr.vo(a.attack);this.Ub.rr.vo(a.defense);this.Ub.xr.vo(a.focus);this.Ub.bB.vo(a.elemFactor[0]);this.Ub.IA.vo(a.elemFactor[1]);this.Ub.OB.vo(a.elemFactor[2]);this.Ub.hC.vo(a.elemFactor[3]);this.yaa()},yaa:function(){var a=sc.q.T.wy,c=11,d=0,f;for(f in this.An)if(a[f]!=g){if(d<(this.mode?7:100)){this.An[f].j("DEFAULT",h);
this.An[f].vo(a[f]);this.An[f].l(0,c);c=c+16}d++}this.POa(d)},Ab:function(a,c,d){a==sc.e&&(c==sc.fa.t1?this.fM(d):c==sc.fa.oC?sc.e.iB==""&&this.EW():c==sc.fa.uwa?this.rAa():c==sc.fa.j$?this.EW():c==sc.fa.Qja?this.EW():c==sc.fa.CQa&&this.rAa())}})});ig.J=h;
ig.N("game.feature.menu.gui.equip.equip-misc").O("impact.feature.gui.gui","game.feature.gui.plug-in").K(function(){sc.ghb=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-195},time:0.2,p:KEY_SPLINES.LINEAR}},U6:q,YA:q,f:function(){this.parent(sc.rg.ds);this.H(ig.k.ra,ig.k.$);this.F(53,28);this.l(200,28);this.we={D_a:"levels",content:{title:"sc.gui.menu.equip.levels",description:"sc.gui.menu.equip.descriptions.levels"},size:{x:55,y:30},offset:{x:-1,
y:-1},index:{x:1,y:0}};var a=new sc.ea("LVL",{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(3,0);this.m(a);a=new ig.mf("#cdcdcd",51,1);a.l(1,7);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.player"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(21,9);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.equip"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(21,19);this.m(a);this.U6=new sc.Tb(99,{transitionTime:0.2});this.U6.H(ig.k.ra,ig.k.$);this.U6.l(2,9);this.m(this.U6);this.YA=new sc.Tb(99,{transitionTime:0.2});
this.YA.H(ig.k.ra,ig.k.$);this.YA.l(2,19);this.m(this.YA);this.j("HIDDEN",h)},show:function(){if(sc.options.get("equip-level-display")){this.Hia(h);this.j("DEFAULT")}},hide:function(a){this.j("HIDDEN",a)},Hia:function(a){var c=sc.q.T,d=c.aa,c=~~c.w1a();this.U6.za(d,a);this.YA.za(c,a);a=c-d;a>=-2?this.wO(sc.Od.zw):a>=-4?this.wO(sc.Od.$n):a>=-8?this.wO(sc.Od.bF):a<-8&&this.wO(sc.Od.Nl)},wO:function(a){this.U6.pe(a);this.YA.pe(a)}});sc.LPa=sc.mc.extend({VD:q,Gb:q,f:function(a,c,d,f,i){this.parent(a,
c,h,d,q,i);this.VD=f||q},Lo:function(){this.parent();if(this.VD)this.VD.focus=h;this.Gb&&this.Gb(this.focus,this.Yc)},ai:function(){this.parent();if(this.VD)this.VD.focus=y;this.Gb&&this.Gb(this.focus,this.Yc)},ff:function(a){this.parent(a);if(this.VD)this.VD.Yc=a;this.Gb&&this.Gb(this.focus,this.Yc)},qz:function(a){this.Yc=a;this.focus=y;if(this.VD){this.VD.focus=y;this.VD.Yc=a}this.Gb&&this.Gb(this.focus,this.Yc)},iHa:function(a){return this==a||a==this.VD}});sc.a9=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
button:q,Sh:q,fe:q,Fp:q,end:q,sb:q,tc:q,G0:1,BA:1,kv:y,yW:y,f:function(a,c,d,f,i,j){this.parent();this.G0=i||0;j=j||0;this.button=new sc.LPa("",39,sc.Mc.rI,q,h);this.button.Gb=this.vrb.bind(this);this.button.mE(39);this.button.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Xa:0,Va:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_FADE:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.button.j("HIDDEN",h);this.m(this.button);this.sb=new sc.ihb;this.sb.l(0,-1);this.button.m(this.sb);
a=a||y;c=c||0;d=d||9;f=f||10;this.Sh=new sc.Eka(d,h,!a,sc.ZP.Vva);this.Sh.l(c,a?2:36+j);this.Sh.hide();this.m(this.Sh);this.fe=new ig.mf("#94CEFF",f,1);this.fe.l(c+d,a?-(d-2):35+d+j);this.fe.Eb(0,0);this.fe.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:0},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN_FADE:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.m(this.fe);this.fe.j("HIDDEN",h);this.Fp=new ig.mf("#94CEFF",1,0);this.Fp.l(c+d+f-1,a?-(d-2):35+d+j);this.Fp.Eb(0,0);this.Fp.a.R=
{DEFAULT:{state:{Va:-1},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:-1},time:0.1,p:KEY_SPLINES.LINEAR}};this.m(this.Fp);this.Fp.j("HIDDEN",h);this.Fp.j("DEFAULT",h);this.end=new ig.ec(this.s,0,403,172,2);this.end.l(d+c+f,a?-(d-2):35+d+j);this.end.Eb(0,0);this.end.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:0},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN_FADE:{state:{alpha:0,Xa:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.BA=this.end.a.g.y;this.m(this.end);this.end.j("HIDDEN",
h)},vrb:function(a,c){if(c||a){if(this.Sh.color!=sc.ZP.bF){this.Sh.color=sc.ZP.bF;this.fe.color="#FF8A34";this.Fp.color="#FF8A34";this.end.offsetY=405}}else if(this.Sh.color!=sc.ZP.Vva){this.Sh.color=sc.ZP.Vva;this.fe.color="#94CEFF";this.Fp.color="#94CEFF";this.end.offsetY=403}},update:function(){this.parent();this.HAa()},HAa:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);this.Fp.a.size.y=Math.round(this.tc.Tu*(1-a)+this.tc.height*
a);if(a==1)this.tc=q}},KB:function(a,c,d,f){this.sb.KB(a,c,d,f)},qz:function(a){this.button.qz(a)},Q6a:function(){if(this.kv){this.kv=y;this.tc={Tu:this.Fp.a.size.y,height:0,time:0.1,p:KEY_SPLINES.EASE,n:0};this.end.kd(this.end.a.g.x,this.BA,0.1,KEY_SPLINES.EASE)}},CZ:function(){if(!this.kv){this.kv=h;this.Fp.j("DEFAULT",h);if(this.Fp.a.size.y!=0)this.Fp.a.size.y=0;var a=this.fe.a.bb.n<this.fe.a.bb.Fa?0.048+(this.fe.a.bb.Fa-this.fe.a.bb.n):0;this.tc={Tu:this.Fp.a.size.y,height:this.G0,time:0.1,p:KEY_SPLINES.EASE,
n:0-a};this.end.kd(this.end.a.g.x,this.end.a.g.y-this.G0,0.1,KEY_SPLINES.EASE,a)}},Pab:function(){this.button.j("HIDDEN",h);this.button.j("DEFAULT");this.Sh.j("DEFAULT");this.Sh.hide();this.Sh.show(0.1,0.2);this.fe.j("HIDDEN",h);this.fe.j("DEFAULT",y,y,q,0.1+0.2);this.end.j("HIDDEN",h);this.Fp.j("DEFAULT",h);this.tc={Tu:this.Fp.a.size.y,height:0,time:0,p:KEY_SPLINES.LINEAR,n:0};this.end.l(this.end.a.g.x,this.BA);this.end.j("DEFAULT",y,y,q,0.4);this.yW=h},bGa:function(){this.button.j("HIDDEN_FADE");
this.fe.a.hi!="HIDDEN"&&this.fe.j("HIDDEN_FADE");this.Sh.j("HIDDEN");this.end.a.hi!="HIDDEN"&&this.end.j("HIDDEN_FADE");this.Fp.a.hi!="HIDDEN"&&this.Fp.j("HIDDEN");this.yW=this.kv=y},GO:function(a){if(!this.yW){this.Sh.show(0.1);this.fe.j("DEFAULT",y,y,q,0.1);this.Fp.j("DEFAULT",h);this.tc={Tu:this.Fp.a.size.y,height:0,time:0,p:KEY_SPLINES.LINEAR,n:0};this.end.l(this.end.a.g.x,this.BA);this.end.j("DEFAULT",y,y,q,0.2);this.yW=h}a&&this.CZ()},eGa:function(a){if(this.yW){if(this.kv){this.kv=y;this.tc=
{Tu:this.Fp.a.size.y,height:0,time:0.1,p:KEY_SPLINES.LINEAR,n:0};this.end.kd(this.end.a.g.x,this.BA,0.1,KEY_SPLINES.LINEAR)}this.fe.j("HIDDEN",a,y,q,0.1);this.Sh.hide(a?0:0.1,a?0:0.2);this.end.j("HIDDEN",a);this.yW=y}},sJb:function(){this.yW?this.kv&&this.Q6a():this.GO()}});var a=[0,1,2,3,4];sc.ihb=ig.da.extend({s:new ig.ia("media/gui/equip-fx.png"),ira:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},dN:q,
ZI:0,$W:a.length,f:function(){this.parent();this.F(38,38);this.dN=new ig.ec(this.s,0,32,11,12);this.dN.a.R={DEFAULT:{state:{},time:0.15,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.2,p:KEY_SPLINES.LINEAR}};this.dN.l(14,14);this.m(this.dN)},KB:function(a,c,d,f){if(c){this.dN.j("HIDDEN",h);this.dN.offsetX=0+a*11;this.dN.offsetY=32+this.ABb(c)*12;if(!f)this.ZI=this.$W=0;this.dN.j("DEFAULT",f)}else this.dN.j("HIDDEN",h)},ABb:function(a){switch(a){case sc.Ng.HEAD:return 0;case sc.Ng.ARM:return 1;
case sc.Ng.TORSO:return 2;case sc.Ng.FEET:return 3}},update:function(){if(this.$W<a.length){this.ZI=this.ZI+ig.i.Sa;if(this.ZI>=0.05){this.ZI=0;this.$W++;if(this.$W>=a.length)this.$W=a.length}}},Da:function(b){this.$W<a.length&&b.na(this.s,3,4,a[this.$W]*32,0,32,32).yi("lighter");b.na(this.s,7,7,96,32,24,25)}})});ig.J=h;
ig.N("game.feature.menu.gui.equip.equip-bodypart").O("impact.feature.gui.gui","game.feature.gui.plug-in","game.feature.menu.gui.equip.equip-misc","game.feature.menu.gui.menu-misc").K(function(){sc.jhb=sc.Bl.extend({YD:q,md:q,LH:[],eaa:y,zWa:y,oA:q,Jw:y,f:function(a){this.parent();this.F(170,264);this.H(ig.k.ra,ig.k.$);this.l(sc.options.Hi?25:2,28);this.oA=a;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(170+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};
this.YD=new sc.Awa(a);this.m(this.YD);this.md=new sc.C9(1);this.md.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:170+(sc.options.Hi?25:3)},time:0.2,p:KEY_SPLINES.LINEAR}};this.md.F(170,210);this.md.l(0,44);this.md.j("HIDDEN",h);this.md.list.ua.Rk(function(a){if(a.data){sc.e.Cc(a.data.description?a.data.description:a.data);if(a.data.id){ig.input.Id||sc.e.q0a();sc.e.iMa(a.data.id)}}}.bind(this));this.md.list.ua.jn(function(){sc.e.Cc("",h)});this.md.list.ua.Ql(function(a,
c){if(a.data&&a.data.id){ig.input.Id||sc.e.q0a();this.orb(a.data.id,c)&&sc.gd.sb.play();ig.input.Id?sc.e.qvb(a.data.id):this.YD.qXa(a.data.id)}}.bind(this));this.m(this.md);this.j("HIDDEN",h)},update:function(){this.parent();this.utb()},orb:function(a,b){var c=sc.q.T.mz(sc.e.sk,a);this.sla(h,b,a);return c},C$a:function(){switch(sc.e.sk){case sc.cd.NONE:for(var a in this.oA)this.xa[a]&&this.xa[a].qz(y);break;case sc.cd.HEAD:this.oA.head.qz(h);break;case sc.cd.RIGHT_ARM:this.oA.Fh.qz(h);break;case sc.cd.LEFT_ARM:this.oA.Bh.qz(h);
break;case sc.cd.TORSO:this.oA.uh.qz(h);break;case sc.cd.FEET:this.oA.ph.qz(h)}},D$a:function(){switch(sc.e.sk){case sc.cd.NONE:for(var a in this.oA)this.xa[a]&&this.xa[a].qz(y);break;case sc.cd.HEAD:this.oA.head.qz(y);break;case sc.cd.RIGHT_ARM:this.oA.Fh.qz(y);break;case sc.cd.LEFT_ARM:this.oA.Bh.qz(y);break;case sc.cd.TORSO:this.oA.uh.qz(y);break;case sc.cd.FEET:this.oA.ph.qz(y)}},utb:function(){if(this.eaa&&this.md.list.ua.wc()){if(sc.ba.Yga()){this.md.list.ua.INa(10);this.md.list.vab()}else if(sc.ba.Lea()){this.md.list.ua.KNa(9);
this.md.list.vab()}if(sc.ba.aw()){this.Jw=h;this.D$a();sc.e.Lwb();this.C$a()}else if(sc.ba.bw()){this.Jw=h;this.D$a();sc.e.Mwb();this.C$a()}}},jqb:function(){if(this.eaa){ig.La.Md(0.2);this.sla(y)}else{this.eaa=h;sc.e.rl(this.AVa.bind(this));this.sla(y);sc.e.Z.hh(this.md.list.ua);this.md.list.ua.eg=this.YD.ua.eg;ig.La.Md(0.2);this.md.j("DEFAULT")}},oza:function(a){if(this.eaa){this.eaa=y;a||sc.e.Dk();this.md.j("HIDDEN",a);sc.e.Z.sl(this.md.list.ua)}},AVa:function(){sc.e.xU(sc.cd.NONE);ig.input.Id||
this.YD.yIb()},sla:function(a,b,c,d,f){a=a||this.Jw||y;b=b||y;d=d||y;this.LH[sc.e.sk]!=g?f==g?f=this.LH[sc.e.sk]:this.LH[sc.e.sk]=f:this.LH[sc.e.sk]=f||sc.Of.ORDER;var i=0,j=0;if(a&&!this.Jw){i=this.md.list.ua.Qa.y;j=-this.md.list.Gc.a.scroll.y}this.Jw=y;this.md.list.ua.clear();this.md.list.clear(a);var k=y,l=q,m=sc.q.T;switch(sc.e.sk){case sc.cd.HEAD:l=m.pY(sc.Ng.HEAD,q,f||sc.Of.ORDER);m.sb.head>0&&(k=h);break;case sc.cd.LEFT_ARM:l=m.pY(sc.Ng.ARM,q,f||sc.Of.ORDER);m.sb.Bh>0&&(k=h);break;case sc.cd.RIGHT_ARM:l=
m.pY(sc.Ng.ARM,q,f||sc.Of.ORDER);m.sb.Fh>0&&(k=h);break;case sc.cd.TORSO:l=m.pY(sc.Ng.TORSO,q,f||sc.Of.ORDER);m.sb.uh>0&&(k=h);break;case sc.cd.FEET:l=m.pY(sc.Ng.FEET,q,f||sc.Of.ORDER);m.sb.ph>0&&(k=h)}var n=q,n=q,o=0,t=0;if(k){n=new sc.WE(ig.lang.get("sc.gui.menu.equip.unequip-name"),140,26,-1,-1E3,ig.lang.get("sc.gui.menu.equip.unequip-des"),h,h,q);n.button.ac=q;this.md.list.Sd(n)}for(var p=0;p<l.length;p++){t=m.Rc[l[p]]||0;n=sc.yb.getItem(l[p]);o++;var r=new ig.Ra(n.name),r="\\i["+(n.icon+sc.yb.Er(n.rarity||
0)||"item-default")+"]"+ig.Ra.ic(n.name),u=ig.Ra.ic(n.description),n=new sc.WE(r,141,26,t,l[p],u,g,g,q,99,n.level||86);n.button.ac=q;this.zDb(l[p])&&n.setActive(y);this.md.list.Sd(n)}if(a){this.md.list.Go=i;if(f)j=i=0;else if(!this.zWa&&k&&c!=g&&sc.q.T.Rc[c]&&sc.q.T.Rc[c]>0){i=Math.min(i,o-1);j=j+this.md.list.lsa}b?this.md.list.ua.tl(0,i):this.md.list.ua.Sg(0,i,y,d);this.md.list.FK(j,h)}this.zWa=k},zDb:function(a){switch(sc.e.sk){case sc.cd.HEAD:return sc.q.T.sb.head==a;case sc.cd.LEFT_ARM:return sc.q.T.sb.Bh==
a;case sc.cd.RIGHT_ARM:return sc.q.T.sb.Fh==a;case sc.cd.TORSO:return sc.q.T.sb.uh==a;case sc.cd.FEET:return sc.q.T.sb.ph==a}},pm:function(){var a="auto";switch(this.LH[sc.e.sk]||sc.Of.ORDER){case sc.Of.ORDER:a="auto";break;case sc.Of.NAME:a="name";break;case sc.Of.AMOUNT:a="amount";break;case sc.Of.RARITY:a="rarity";break;case sc.Of.LEVEL:a="level";break;case sc.Of.HP:a="hp";break;case sc.Of.ATTACK:a="attack";break;case sc.Of.DEFENSE:a="defense";break;case sc.Of.FOCUS:a="focus"}return ig.lang.get("sc.gui.menu.sort."+
a)},Ab:function(a,b,c){a==sc.e&&(b==sc.fa.j$?a.g_!=a.sk&&(a.sk==sc.cd.NONE?this.oza():this.jqb()):b==sc.fa.yp&&this.sla(h,ig.input.Id,q,!ig.input.Id,c.data.vE))},Yd:function(){this.oza(h);this.YD.Yd();this.j("DEFAULT")},pl:function(){this.oza();this.YD.pl();this.j("HIDDEN")},Fcb:function(){sc.e.sk==0&&!this.YD.ua.wc()?this.YD.Yd():sc.e.sk!=0&&sc.e.rl(this.AVa.bind(this));this.j("DEFAULT")},HNb:function(){this.j("HIDDEN")}});sc.Awa=ig.da.extend({ua:q,xa:{head:q,Fh:q,Bh:q,uh:q,ph:q},f:function(a){this.parent();
this.F(169,264);this.ua=new sc.wh(y,ig.tw.dQ);this.ua.Rk(function(a){sc.e.Cc(a.data)});this.ua.jn(function(){sc.e.Cc("",h)});var b=36,c=sc.q.T.sb;this.xa.head=this.Cl("head",c.head,9,b,a.head.button,0,33,function(){sc.e.xU(sc.cd.HEAD)}.bind(this));this.m(this.xa.head);b=b+38;this.xa.Fh=this.Cl("rightarm",c.Fh,9,b,a.Fh.button,1,71,function(){sc.e.xU(sc.cd.RIGHT_ARM)}.bind(this));this.m(this.xa.Fh);b=b+38;this.xa.Bh=this.Cl("leftarm",c.Bh,9,b,a.Bh.button,2,109,function(){sc.e.xU(sc.cd.LEFT_ARM)}.bind(this));
this.m(this.xa.Bh);b=b+38;this.xa.uh=this.Cl("torso",c.uh,9,b,a.uh.button,3,147,function(){sc.e.xU(sc.cd.TORSO)}.bind(this));this.m(this.xa.uh);this.xa.ph=this.Cl("feet",c.ph,9,b+38,a.ph.button,4,185,function(){sc.e.xU(sc.cd.FEET)}.bind(this));this.m(this.xa.ph)},Yd:function(){for(var a in this.xa)this.xa[a]&&this.xa[a].reset();ig.La.Md(0.2);sc.e.Z.hh(this.ua)},pl:function(){sc.e.Z.sl(this.ua)},yIb:function(){switch(sc.e.g_){case sc.cd.NONE:ig.debug("Whoops, Why is this happening?");break;case sc.cd.HEAD:this.ua.Sg(0,
0,y,h);break;case sc.cd.RIGHT_ARM:this.ua.Sg(0,1,y,h);break;case sc.cd.LEFT_ARM:this.ua.Sg(0,2,y,h);break;case sc.cd.TORSO:this.ua.Sg(0,3,y,h);break;case sc.cd.FEET:this.ua.Sg(0,4,y,h)}},Cl:function(a,b,c,d,f,i,j,k){a=ig.lang.get("sc.gui.menu.equip."+a);b=sc.yb.getItem(b);c=new sc.Awa.Tz(a,b,c,d,f,j);c.button.cc=k;f.cc=k;this.ua.jd(c.button,0,i);return c},osb:function(a){switch(a){case sc.cd.NONE:for(var b in this.xa)this.xa[b]&&this.xa[b].fFb();break;case sc.cd.HEAD:this.rF(this.xa.head);this.xa.head.CZ();
break;case sc.cd.RIGHT_ARM:this.rF(this.xa.Fh);this.xa.Fh.CZ();break;case sc.cd.LEFT_ARM:this.rF(this.xa.Bh);this.xa.Bh.CZ();break;case sc.cd.TORSO:this.rF(this.xa.uh);this.xa.uh.CZ();break;case sc.cd.FEET:this.rF(this.xa.ph);this.xa.ph.CZ()}},rF:function(a){var b=q,c;for(c in this.xa)(b=this.xa[c])&&b!=a&&b.bGa()},qXa:function(a){var b=ig.lang.get("sc.gui.menu.equip.nothing"),c="",d="item-default",d=-1;if(a>0){a=sc.yb.getItem(a);d=(a.icon||"item-default")+sc.yb.Er(a.rarity||0);b="\\i["+d+"]"+ig.Ra.ic(a.name);
c=new ig.Ra(a.description);d=a.level||1}switch(sc.e.sk){case sc.cd.HEAD:this.xa.head.setData(b,c,d);break;case sc.cd.RIGHT_ARM:this.xa.Fh.setData(b,c,d);break;case sc.cd.LEFT_ARM:this.xa.Bh.setData(b,c,d);break;case sc.cd.TORSO:this.xa.uh.setData(b,c,d);break;case sc.cd.FEET:this.xa.ph.setData(b,c,d)}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.j$){if(a.sk!=a.g_){ig.La.Md(0.2);this.osb(a.sk)}}else b==sc.fa.uwa&&this.qXa(c)}});sc.Awa.Tz=ig.da.extend({Ls:new ig.ia("media/gui/menu.png"),text:q,button:q,
Ana:Vec2.vc(0,0),kv:y,Og:y,G0:1,BA:1,aa:-1,f:function(a,b,c,d,f,i){this.parent();this.F(150,33);this.H(ig.k.ra,ig.k.$);this.Ana.x=c;this.Ana.y=d;this.G0=i||1;this.l(this.Ana.x,this.Ana.y);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(160+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};c=q;if(b){c="\\i["+((b.icon||"item-default")+sc.yb.Er(b.rarity||0))+"]"+ig.Ra.ic(b.name);this.aa=b.level||1}else{c=ig.lang.get("sc.gui.menu.equip.nothing");this.aa=
-1}this.text=new sc.ea(a,{speed:ig.Rd.se.zg,font:sc.Ea.Ib});this.text.l(2,0);this.m(this.text);this.button=new sc.LPa(c,150,sc.Mc.qja,f,h);this.button.re.Ou(function(a,b){this.aa<=0||sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(this));this.button.Gb=f.Gb;f.VD=this.button;this.button.l(0,10);this.m(this.button);this.BA=this.a.g.y;b&&this.button.setData(new ig.Ra(b.description));this.j("DEFAULT",h)},setData:function(a,b,c){this.aa=c;this.button.re.ga(a);this.button.setData(b)},fFb:function(){this.kv=y;if(this.Og){this.l(this.a.g.x,
this.BA);this.j("DEFAULT");this.Og=y}else this.kd(this.a.g.x,this.BA,0.1,KEY_SPLINES.EASE);this.button.ff(y)},Q6a:function(){if(this.kv){this.kv=y;if(this.Og){this.l(this.a.g.x,this.BA);this.j("DEFAULT");this.Og=y}else this.kd(this.a.g.x,this.BA,0.1,KEY_SPLINES.EASE)}},CZ:function(){if(!this.kv){this.kv=h;if(this.Og){this.l(this.a.g.x,this.BA-this.G0);this.j("DEFAULT");this.Og=y}else this.kd(this.a.g.x,this.a.g.y-this.G0,0.1,KEY_SPLINES.EASE)}},reset:function(){this.j("DEFAULT",h);this.kv=this.Og=
y;this.l(this.a.g.x,this.BA);this.button.ff(y)},bGa:function(){this.j("HIDDEN");this.Og=h;this.kv=y;this.button.ff(y)},Pab:function(){this.j("DEFAULT");this.Og=y}})});ig.J=h;
ig.N("game.feature.menu.gui.help.help-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){sc.Xhb={iib:0};sc.$hb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),Y:0,Pd:y,$h:y,f:function(a,b,c,d){this.parent();this.F(c||13,d||13);this.Y=a||0;this.Pd=b.gTb||y;this.$h=b.hTb||y},Da:function(a){var b=this.a;a.na(this.s,-1,-1,642+(this.focus?7:0),160+(b.size.y<=11?8:0),6,6);a.na(this.s,b.size.x-5,-1,642+(this.focus?7:0),160+(b.size.y<=11?
8:0),6,6,h);a.na(this.s,b.size.x-5,b.size.y-5,642+(this.focus?7:0),160+(b.size.y<=11?8:0),6,6,h,h);a.na(this.s,-1,b.size.y-5,642+(this.focus?7:0),160+(b.size.y<=11?8:0),6,6,y,h)}});sc.eRa={};sc.eRa.INFO=sc.$hb.extend({f:function(a){this.parent(sc.Xhb.iib,a)}});sc.bib=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},title:q,description:q,fe:q,content:q,f:function(){this.parent(sc.rg.WTa);this.F(200,13);this.title=new sc.ea("");
this.title.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.title.l(5,1);this.m(this.title);this.description=new sc.ea("",{font:sc.Ea.he,maxWidth:190});this.description.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.description.l(5,18);this.m(this.description);this.fe=new ig.mf("#545454",196,1);this.fe.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR}};this.fe.l(2,17);this.m(this.fe);this.content=new ig.da;this.m(this.content);this.j("HIDDEN",h);this.a.bb.u0=q},show:function(a,b,c,d,f){var i=a.a.g,j=i.x+a.a.size.x+1;j>=ig.i.width/2+85&&(j=i.x-200-1);var k=i.y;a.a.size.y<30&&(k=k+a.a.size.y);var a=200,l=100;this.content.rh();if(f=="buff"){this.content.a.size.x=200;this.title.j("HIDDEN",h);this.description.j("HIDDEN",h);this.fe.j("HIDDEN",h);(b=sc.yb.getItem(sc.e.JC))||(b=sc.yb.getItem(sc.Fb.JC));c=b.stats;d=c.length;
for(b=0;d--;){f=sc.Qe[c[d]];if(f.type.key!="heal"){f=new sc.aib(f,d,c.length);f.l(0,b);b=b+f.a.size.y;this.content.m(f)}}a=398;l=b}else if(f=="levels"){this.description.j("HIDDEN",h);this.title.j("DEFAULT",h);this.fe.j("DEFAULT",h);this.title.ga("\\c[3]"+this.ic(b,d)+"\\c[0]");this.content.l(0,18);this.content.a.size.x=150;b=0;c=new sc.Lja("green",sc.Do.zw);c.l(5,b);this.content.m(c);b=b+(c.a.size.y+1);c=new sc.Lja("white",0);c.l(5,b);this.content.m(c);b=b+(c.a.size.y+1);c=new sc.Lja("orange",sc.Do.E1);
c.l(5,b);this.content.m(c);b=b+(c.a.size.y+1);c=new sc.Lja("red",sc.Do.Nl);c.l(5,b);this.content.m(c);b=b+(c.a.size.y+1);a=204;l=b+20;j=j-4}else{this.title.j("DEFAULT",h);this.description.j("DEFAULT",h);this.fe.j("DEFAULT",h);this.title.ga("\\c[3]"+this.ic(b,d)+"\\c[0]");this.description.ga(this.ic(c,d));l=18+this.description.a.size.y+4}if(l!=this.a.size.y||a!=this.a.size.x)this.a.hi=="HIDDEN"&&this.a.Mv()?this.Ym(a,l,0.2,KEY_SPLINES.EASE):this.F(a,l);k+l>=310&&(k=i.y-l);this.a.hi=="HIDDEN"&&this.a.Mv()?
this.kd(j,k,0.2,KEY_SPLINES.EASE):this.a.hi=="DEFAULT"?this.kd(j,k,0.2,KEY_SPLINES.EASE):this.l(j,k);this.j("DEFAULT")},hide:function(){this.j("HIDDEN",y,y,q,0.1)},ic:function(a,b){return typeof a=="function"?a(b):ig.lang.get(a)}});sc.Lja=ig.da.extend({color:q,Ina:q,f:function(a,b){this.parent();this.color=new sc.ea("\\c["+b+"]"+ig.lang.get("sc.gui.menu.help.equip.colors."+a)+"\\c[0]:",{font:sc.Ea.he});this.m(this.color);this.Ina=new sc.ea(ig.lang.get("sc.gui.menu.help.equip.colorDesc."+a),{font:sc.Ea.he,
maxWidth:160});this.Ina.l(35,0);this.m(this.Ina);this.a.size.y=Math.max(this.Ina.a.size.y,this.color.a.size.y)}});sc.aib=ig.da.extend({Y:q,f0:q,description:q,f:function(a,b){this.parent();this.Y=new sc.ea("\\i["+a.icon+"]\\i["+a.grade+"]",{font:sc.Ea.Ib});this.Y.l(2,2);this.m(this.Y);var c=this.upa(a.type,a.change),c=a.negative?c+(" \\c[1]- "+-1*this.wda(a.type,a.value,a.change)+"%\\c[0]"):c+(" \\c[2]+ "+this.wda(a.type,a.value,a.change)+"%\\c[0]");this.f0=new sc.ea(c,{font:sc.Ea.he});this.f0.l(19,
0);this.m(this.f0);c=new sc.ea("\\i[insetArrow]",{font:sc.Ea.he});c.l(2,12);this.m(c);this.description=new sc.ea(this.upa(a.type,a.change,h),{font:sc.Ea.he,maxWidth:380});this.description.l(19,11);this.m(this.description);this.F(400,11+this.description.a.size.y);if(b!=0){c=new ig.mf("#545454",400,1);c.H(ig.k.Ia,ig.k.Cb);this.m(c);this.a.size.y=this.a.size.y+1}},upa:function(a,b,c){var d="param";if(b==sc.ce.STATS)if(a.key=="elemFactor")switch(a.index){case 0:d="heat";break;case 1:d="cold";break;case 2:d=
"shock";break;case 3:d="wave"}else a.key=="hp"?d="maxhp":a.key=="attack"?d="atk":a.key=="defense"?d="def":a.key=="focus"&&(d="foc");else if(b==sc.ce.MODIFIER)d=(!c?"modifier.":"")+a.key;else if(b==sc.ce.HEAL)return"ERROR ERROR";return ig.lang.get("sc.gui.menu.equip."+(c?"descriptions.":"")+d)},wda:function(a,b,c){c==sc.ce.STATS&&(b=a.key=="elemFactor"?(b-1)*-1:b-1);return Math.round(b*100)}})});ig.J=h;
ig.N("game.feature.menu.gui.help.help-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.button-interact","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.help.help-misc").K(function(){var a={x:1E5,y:1E5};sc.Yq=ig.da.extend({Hb:q,Qy:q,Tq:q,wv:q,Gc:q,color:q,content:q,info:q,Z:q,ua:q,eX:q,l6a:q,k6a:q,cT:q,Sb:q,tf:[],M0a:y,f:function(a,c,d,f,i){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.M0a=
i||y;this.Sb=a;this.l6a=c;this.k6a=d;this.eX=f||q;this.Z=new ig.$s;this.ua=new sc.wh;this.ua.Rk(function(a){if(a.data)if(a.data.we){var b=a.data.we.content;this.info.show(a,b.title,b.description,b,a.data.we.D_a)}else this.info.hide();else this.info.hide()}.bind(this));this.ua.jn(function(){this.info.hide()}.bind(this));this.Z.hh(this.ua);this.color=new ig.mf("#000",ig.i.width,ig.i.height);this.color.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};
this.color.a.nd=0.5;this.color.j("HIDDEN",h);this.m(this.color);this.Tq=new ig.mf("#151515",this.a.size.x,22);this.Tq.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetY:-23},time:0.2,p:KEY_SPLINES.LINEAR}};this.Tq.j("HIDDEN",h);this.m(this.Tq);a=new sc.ea("\\i[help-icon]"+ig.lang.get("sc.gui.menu.menu-titles.help"));a.l(2,3);this.Tq.m(a);this.wv=new ig.mf("#151515",this.a.size.x,1);this.wv.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,
offsetY:-1},time:0.2,p:KEY_SPLINES.LINEAR}};this.wv.H(ig.k.hb,ig.k.Cb);this.wv.j("HIDDEN",h);this.m(this.wv);this.Gc=new sc.cib;this.m(this.Gc);this.content=new ig.da;this.content.F(ig.i.width,ig.i.height);this.content.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.content.j("HIDDEN",h);this.m(this.content);this.info=new sc.bib;this.m(this.info);this.Qy=new sc.mc("\\i[back]"+ig.lang.get("sc.gui.menu.back"),sc.a1,h,sc.Mc.$c,sc.gd.back);
this.Qy.dg=h;this.Qy.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetY:-this.Qy.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Qy.cc=this.qJa.bind(this);this.Qy.H(ig.k.ra,ig.k.$);this.Qy.setData(ig.lang.get("sc.gui.menu.description.back"));this.Qy.j("HIDDEN",h);this.m(this.Qy);this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.manual"),g,h,sc.Mc.$c);this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};
this.Hb.cc=this.Qn.bind(this);this.Hb.dg=h;this.Hb.H(ig.k.ra,ig.k.$);this.Hb.l(this.Qy.a.size.x+7,0);this.Hb.j("HIDDEN",h);this.m(this.Hb);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Dt:function(b){this.Oc();sc.e.yG=h;ig.La.De(this.Z);this.Hb.j("DEFAULT",y,y,q,0.2);this.Qy.j("DEFAULT",h);Vec2.Oa(a,1E5,1E5);this.ua.clear();this.content.rh();this.CCa(this.Sb.a,0,0,0);for(var c=0;c<this.tf.length;c++)this.CCa(this.tf[c].a,0,0,0);!b&&this.M0a&&this.ua.gEa();
this.ua.tl(a.x,a.y);this.Z.hh(this.ua);this.content.j("DEFAULT");this.color.j("DEFAULT");this.Tq.j("DEFAULT");this.wv.j("DEFAULT");this.Gc.show();ig.La.Md(0.2);this.fn()},Gd:function(){this.Ic();sc.e.yG=y;this.color.j("HIDDEN");this.Tq.j("HIDDEN");this.wv.j("HIDDEN");this.Gc.hide();this.content.j("HIDDEN");this.Hb.j("HIDDEN",y,y,function(){this.Qy.j("HIDDEN",h)}.bind(this));this.info.hide();this.Z.Te(this.Hb);this.Z.Te(this.Qy);this.Z.sl(this.ua);ig.La.$e(this.Z);ig.La.Md(0.2);this.eX&&this.eX()},
CCa:function(a,c,d,f){var i=a.children;f++;if(!(i.length==0||f>=5))for(var j=0;j<i.length;j++){var k=i[j];if((!k.X.UGa||k.X.UGa())&&k.lm){switch(k.align.x){case ig.k.hb:c=c+k.g.x;break;case ig.k.Ia:c=c+(k.g.x+Math.floor(a.size.x/2)-Math.floor(k.size.x/2));break;case ig.k.ra:c=c+(a.size.x-k.size.x-k.g.x)}switch(k.align.y){case ig.k.$:d=d+k.g.y;break;case ig.k.vb:d=d+(k.g.y+Math.floor(a.size.y/2)-Math.floor(k.size.y/2));break;case ig.k.Cb:d=d+(a.size.y-k.size.y-k.g.y)}if(k.X.we){var l=k.X.we;if(l.fb&&
!l.fb())continue;if(l instanceof Array)for(var m=0;m<l.length;m++)this.k_a(k,l[m],c,d);else this.k_a(k,l,c,d)}this.CCa(k,c,d,f);switch(k.align.x){case ig.k.hb:c=c-k.g.x;break;case ig.k.Ia:c=c-(k.g.x+Math.floor(a.size.x/2)-Math.floor(k.size.x/2));break;case ig.k.ra:c=c-(a.size.x-k.size.x-k.g.x)}switch(k.align.y){case ig.k.$:d=d-k.g.y;break;case ig.k.vb:d=d-(k.g.y+Math.floor(a.size.y/2)-Math.floor(k.size.y/2));break;case ig.k.Cb:d=d-(a.size.y-k.size.y-k.g.y)}}}},k_a:function(a,c,d,f){var i=new sc.eRa[c.type||
"INFO"](c);i.data={we:c};c.offset?i.l(d+c.offset.x,f+c.offset.y):i.l(d,f);if(c.size){var j=c.size.x,k=c.size.y;c.size.x=="dyn"&&(j=a.size.x+(c.size.oi||0));c.size.y=="dyn"&&(k=a.size.y+(c.size.bi||0));i.F(j,k)}this.content.m(i);a=Math.floor(d);f=Math.floor(f);if(c.index){a=c.index.x==g?a:c.index.x;f=c.index.y=="last"?this.ua.elements[a]?this.ua.elements[a].length:0:c.index.y==g?f:c.index.y}this.nub(i,a,f)},nub:function(b,c,d){this.ua.jd(b,c,d);a.x=Math.min(a.x,c);a.y=Math.min(a.y,d)},gn:function(){return sc.ba.Hs()},
Qn:function(){if(!this.cT){this.cT=new sc.jxa;this.cT.YLa(this.l6a);this.cT.ZAa(this.k6a);this.cT.a.zIndex=2E5;this.cT.a.xf=h}ig.X.vd(this.cT);this.cT.Dt()},hGb:function(){return sc.ba.Cq()},qJa:function(){this.Gd()},ck:function(){if(!this.kb){this.kb=new sc.jxa;this.kb.YLa(ig.lang.get("sc.gui.menu.help-texts.save.title"));this.kb.ZAa(ig.lang.get("sc.gui.menu.help-texts.save.pages"));this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(){this.Z.Jd(this.Hb,this.gn.bind(this));this.Z.Jd(this.Qy,this.hGb.bind(this))},
Ab:J()});sc.cib=ig.da.extend({gb:new ig.jc("media/gui/menu.png",{width:10,height:10,left:9,top:9,right:9,bottom:9,Vb:{"default":{x:642,y:185}}}),Gc:q,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.Gc=new ig.Ue(ig.i.width+18,ig.i.height+4+18,y,this.gb);this.Gc.l(-9,-11);this.m(this.Gc)},update:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);this.Gc.a.size.x=Math.round(this.tc.QH*(1-a)+this.tc.width*a);this.Gc.a.size.y=
Math.round(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},show:function(){this.Gc.kd(0,22,0.2,KEY_SPLINES.LINEAR);this.Ym(ig.i.width,ig.i.height-23,0.2)},hide:function(){this.Gc.kd(-9,-11,0.2,KEY_SPLINES.LINEAR);this.Ym(ig.i.width+18,ig.i.height+4+18,0.2)},Ym:function(a,c,d,f,i){if(d)this.tc={QH:this.Gc.a.size.x,width:a||0,Tu:this.Gc.a.size.y,height:c||0,time:d,p:f||KEY_SPLINES.LINEAR,n:0-(i||0)};else{this.Gc.a.size.x=a;this.Gc.a.size.y=c}}})});ig.J=h;
ig.N("game.feature.menu.gui.equip.equip-menu").O("impact.feature.gui.gui","game.feature.gui.plug-in","game.feature.menu.gui.base-menu","game.feature.menu.gui.main-menu","game.feature.menu.gui.equip.equip-status","game.feature.menu.gui.equip.equip-bodypart","game.feature.inventory.inventory","game.feature.menu.gui.help.help-menu").K(function(){sc.hhb=sc.uw.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},
ue:{head:q,Bh:q,Fh:q,uh:q,ph:q},g0:q,yx:q,Xo:q,xH:q,Ii:{jo:q,status:q,sort:q,ZK:q},yc:q,kb:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.yc=new sc.uRa;this.yc.Sd("level",sc.Of.LEVEL,4);this.yc.Sd("hp",sc.Of.HP,5);this.yc.Sd("attack",sc.Of.ATTACK,6);this.yc.Sd("defense",sc.Of.DEFENSE,7);this.yc.Sd("focus",sc.Of.FOCUS,8);this.g0=new sc.khb;this.m(this.g0);this.xH=new sc.wh;this.xH.Rk(function(a){sc.e.Cc(a.data)});this.xH.jn(function(){sc.e.Cc("",h)});this.xH.Ql(function(){this.yc.Aa&&
this.yc.xk()}.bind(this));this.ue.head=new sc.a9(y,17,9,sc.options.Hi?81:59,33);this.ue.head.l(sc.options.Hi?264:221,27);this.hea(this.ue.head,sc.q.T.sb.head);this.ue.Fh=new sc.a9(h,17,12,sc.options.Hi?121:99,71);this.ue.Fh.l(sc.options.Hi?221:178,119);this.hea(this.ue.Fh,sc.q.T.sb.Fh);this.ue.Bh=new sc.a9(y,36,5,sc.options.Hi?23:1,109,-12);this.ue.Bh.l(sc.options.Hi?306:263,119);this.hea(this.ue.Bh,sc.q.T.sb.Bh);this.ue.uh=new sc.a9(y,16,26,sc.options.Hi?65:43,147);this.ue.uh.l(sc.options.Hi?264:
221,124);this.hea(this.ue.uh,sc.q.T.sb.uh);this.ue.ph=new sc.a9(h,16,35,sc.options.Hi?42:20,185);this.ue.ph.l(sc.options.Hi?278:235,256);this.hea(this.ue.ph,sc.q.T.sb.ph);this.xH.jd(this.ue.head.button,1,0);this.xH.jd(this.ue.Fh.button,0,1);this.xH.jd(this.ue.uh.button,1,1);this.xH.jd(this.ue.Bh.button,2,1);this.xH.jd(this.ue.ph.button,2,2);this.yx=new sc.jhb(this.ue);this.m(this.yx);for(var a in this.ue)this.ue[a]&&this.m(this.ue[a]);this.j("DEFAULT",h);this.Xo=new sc.ghb;this.m(this.Xo);this.Ii.jo=
new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Ii.jo.dg=h;this.Ii.jo.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Ii.jo.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Ii.jo.cc=this.qaa.bind(this);this.Ii.sort=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.Ii.sort.dg=h;this.Ii.sort.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Ii.sort.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};
this.Ii.sort.cc=this.gH.bind(this);this.Ii.status=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.status"),g,h,sc.Mc.$c);this.Ii.status.dg=h;this.Ii.status.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Ii.status.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Ii.status.cc=this.kHb.bind(this);this.Ii.ZK=new sc.mc("",q,h,sc.Mc.$c);this.Ii.ZK.dg=h;this.Ii.ZK.ac=q;this.Ii.ZK.cc=function(){this.g0.PNb(ig.input.Id?sc.e.Z.eg:this.yx.md.list.ua.oY());ig.La.Md(0.2)}.bind(this)},
hea:function(a,b){a.KB(sc.yb.i2a(b),sc.yb.j2a(b),sc.yb.mN(b),h)},Oc:function(){sc.P.Wa(sc.q.e,this);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q.e,this.g0);sc.P.Wa(sc.q.e,this.yx);sc.P.Wa(sc.q.e,this.yx.YD)},Ic:function(){sc.P.Hc(sc.q.e,this);sc.P.Hc(sc.q.T,this);sc.P.Hc(sc.q.e,this.g0);sc.P.Hc(sc.q.e,this.yx);sc.P.Hc(sc.q.e,this.yx.YD)},paa:function(){return sc.ba.Hs()},qaa:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.equip.title"),
ig.lang.get("sc.gui.menu.help-texts.equip.pages"),function(){this.Wka(h)}.bind(this));this.kb.a.zIndex=15E4;this.kb.a.xf=h}},hHb:function(){return sc.ba.ON()},gH:function(){if(this.yc.Aa)this.yc.xk();else{ig.X.vd(this.yc);this.yc.R7(this.Ii.sort)}},jHb:function(){return ig.La.zh()?y:sc.ba.ND()},kHb:function(){if(sc.e.AB==sc.Fc.im){sc.e.sk!=0&&sc.e.Dk();sc.e.uH(sc.Fc.gA)}else if(sc.e.AB==sc.Fc.gA){sc.e.sk!=0&&sc.e.Dk();this.bM()}},Wra:function(){return sc.ba.rIa()},Wka:function(a){sc.e.bk(function(){return this.Ii.status}.bind(this));
sc.e.bk(function(){return this.Ii.sort}.bind(this));sc.e.bk(function(){return this.Ii.jo}.bind(this));sc.e.Qw(a)},bM:function(){var a=sc.e.AB;sc.e.Dk();sc.e.ez();a==sc.Fc.gA?sc.e.AB=sc.Fc.im:sc.e.y0a()},LWa:function(a,b){switch(a){case sc.cd.NONE:for(var c in this.ue)this.ue[c]&&this.ue[c].sJb(b);break;case sc.cd.HEAD:this.rF(this.ue.head,b);this.ue.head.GO(h);break;case sc.cd.RIGHT_ARM:this.rF(this.ue.Fh,b);this.ue.Fh.GO(h);break;case sc.cd.LEFT_ARM:this.rF(this.ue.Bh,b);this.ue.Bh.GO(h);break;case sc.cd.TORSO:this.rF(this.ue.uh,
b);this.ue.uh.GO(h);break;case sc.cd.FEET:this.rF(this.ue.ph,b);this.ue.ph.GO(h)}},rF:function(a,b){var c=q,d;for(d in this.ue)(c=this.ue[d])&&c!=a&&c.eGa(b)},Haa:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.Ii.sort.ga(b+("\\c[3]"+a+"\\c[0]"));sc.e.$u()},wtb:function(a,b){var c=a.Iv?sc.yb.i2a(a.Iv):q,d=a.Iv?sc.yb.j2a(a.Iv):q,f=a.Iv?sc.yb.mN(a.Iv):q;switch(sc.e.sk){case sc.cd.NONE:this.ue.head.KB(c,d,f,b);this.ue.Fh.KB(c,d,f,b);this.ue.Bh.KB(c,d,f,b);this.ue.uh.KB(c,
d,f,b);this.ue.ph.KB(c,d,f,b);break;case sc.cd.HEAD:this.ue.head.KB(c,d,f,b);break;case sc.cd.RIGHT_ARM:this.ue.Fh.KB(c,d,f,b);break;case sc.cd.LEFT_ARM:this.ue.Bh.KB(c,d,f,b);break;case sc.cd.TORSO:this.ue.uh.KB(c,d,f,b);break;case sc.cd.FEET:this.ue.ph.KB(c,d,f,b)}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.j$){if(a.sk!=a.g_){if(a.sk==sc.cd.NONE)this.Ii.sort.setActive(y);else{this.Haa(this.yx.pm());this.Ii.sort.setActive(h)}this.LWa(a.sk)}}else b==sc.fa.yp&&this.Haa(c.text);else if(a==sc.q.T&&b==
sc.dd.uja){this.Xo.Hia();this.wtb(c,y)}},Yd:function(a,b){this.Oc();sc.e.iT==0&&sc.e.T$a(sc.Fc.nC);this.g0.Yd();this.Xo.show();if(sc.e.iT==sc.Fc.nC)if(b==sc.Fc.gA){sc.e.Wu!=sc.ZE.H9&&sc.e.gk(0,-101,sc.Si.$c,h);this.yx.Fcb()}else{this.Haa(ig.lang.get("sc.gui.menu.sort.auto"));this.Ii.sort.setActive(y);sc.e.rl(this.bM.bind(this));this.yx.Yd()}else{sc.e.rl(this.bM.bind(this));sc.e.gk(0,-101,sc.Si.$c,h);if(sc.e.sk==0&&!this.yx.YD.ua.wc()){this.Haa(ig.lang.get("sc.gui.menu.sort.auto"));this.Ii.sort.setActive(y);
this.yx.Yd()}else this.yx.Fcb()}for(var c in this.ue)this.ue[c]&&this.ue[c].Pab();sc.e.sk!=0&&b==sc.Fc.gA&&this.LWa(sc.e.sk,h);ig.La.Md(0.2);sc.e.Z.KQ(this.xH);sc.e.Z.Jd(this.Ii.jo,this.paa.bind(this));sc.e.Z.Jd(this.Ii.status,this.jHb.bind(this));sc.e.Z.Jd(this.Ii.sort,this.hHb.bind(this));sc.e.Z.Jd(this.Ii.ZK,this.Wra.bind(this));this.Wka();if(b!=q&&b==0){this.Haa(ig.lang.get("sc.gui.menu.sort.auto"));this.Ii.sort.setActive(y);sc.e.gk(sc.options.Hi?0:1,-101,sc.Si.$c)}},pl:function(a,b){b!=sc.Fc.gA&&
sc.e.gk(0,0,sc.Si.Uh);this.Gd(b)},Gd:function(a){this.Ic();this.g0.j("HIDDEN");this.Xo.hide();if(a==sc.Fc.gA)this.yx.HNb();else{this.yx.pl();sc.e.iT=0}this.kb&&ig.X.sta(this.kb);this.kb=q;sc.e.Z.lU(this.xH);sc.e.Z.Te(this.Ii.jo);sc.e.Z.Te(this.Ii.sort);sc.e.Z.Te(this.Ii.status);sc.e.Z.Te(this.Ii.ZK);this.yc.Aa&&this.yc.xk();for(var b in this.ue)this.ue[b]&&this.ue[b].bGa()}})});ig.J=h;
ig.N("game.feature.skills.skills").O("impact.base.game","game.feature.combat.model.combat-params").K(function(){function a(a,b,c){a=i[a]||i.FALLBACK;return c==sc.ha.NEUTRAL?a.hk[b-1]:a.element[b-1]}function b(a,b,c,d){b=j[b];if(!b)return q;b=b[a];if(!b)return q;b=b[c-1];return!b?q:b[d]||q}sc.FTa={jN:function(a,b){return a==sc.ha.NEUTRAL&&b==3?4:b}};sc.XP={mj:0,gSa:1,xxa:2};var c=[0.05,0.09,0.13],d=[0.07,0.13,0.19],f=[0.04,0.08,0.14],i={};i.hp=i.attack=i.defense=i.focus={element:[0.04,0.07,0.09],hk:[0.04,
0.06,0.1]};i.RANGED_DMG={element:[0.06,0.11,0.15],hk:[0.06,0.12,0.22]};i.KNOCKBACK={element:[0.15,0.3,0.45],hk:[0.16,0.3,0.6]};i.MELEE_DMG={element:[0.06,0.11,0.15],hk:[0.06,0.12,0.22]};i.CRITICAL_DMG={element:[0.15,0.3,0.45],hk:[0.15,0.3,0.6]};i.GUARD_STRENGTH={element:[0.08,0.16,0.24],hk:[0.08,0.16,0.32]};i.STUN_THRESHOLD={element:[0.02,0.04,0.06],hk:[0.02,0.04,0.08]};i.DASH_INVINC={element:[0.1,0.2,0.3],hk:[0.1,0.2,0.4]};i.HP_REGEN={element:[0.03,0.05,0.07],hk:[0.03,0.05,0.1]};i.AIM_SPEED={element:[0.1,
0.2,0.3],hk:[0.1,0.2,0.4]};i.ITEM_BOOST={element:[0.12,0.25,0.37],hk:[0.12,0.25,0.5],X8a:1};i.APPETITE={element:[0,0,1],hk:[0,0,1],X8a:1};i.SPIKE_DMG={element:[0.15,0.3,0.45],hk:[0.15,0.3,0.6]};i.CROSS_COUNTER={element:[0.1,0.2,0.3],hk:[0.1,0.2,0.4]};i.BERSERK={element:[0.1,0.2,0.3],hk:[0.1,0.2,0.4]};i.ONCE_MORE={element:[1,1,1],hk:[1,1,1]};i.OVERHEAT_REDUCTION={element:[0.1,0.2,0.3],hk:[0.1,0.2,0.4]};i.AIMING_MOVEMENT={element:[0.08,0.16,0.24],hk:[0.08,0.16,0.32]};i.GUARD_SP={element:[0.1,0.2,0.3],
hk:[0.1,0.2,0.4]};i.COND_HEALING={element:[0.13,0.25,0.35],hk:[0.13,0.3,0.6]};i.AIM_STABILITY={element:[0.2,0.4,0.6],hk:[0.2,0.4,0.8]};i.GUARD_AREA={element:[1,1,1],hk:[1,1,1]};i.DASH_STEP={element:[1,1,1],hk:[1,1,1]};i.ASSAULT={element:[0.1,0.2,0.3],hk:[0.1,0.2,0.3]};i.COND_EFFECT_HEAT={element:[0.13,0.25,0.35],hk:[0.15,0.3,0.6]};i.COND_EFFECT_COLD={element:[0.13,0.25,0.35],hk:[0.15,0.3,0.6]};i.COND_EFFECT_SHOCK={element:[0.13,0.25,0.35],hk:[0.15,0.3,0.6]};i.COND_EFFECT_WAVE={element:[0.13,0.25,
0.35],hk:[0.15,0.3,0.6]};i.COND_GUARD_HEAT={element:[0.2,0.35,0.5],hk:[0.2,0.4,0.8]};i.COND_GUARD_COLD={element:[0.2,0.35,0.5],hk:[0.2,0.4,0.8]};i.COND_GUARD_SHOCK={element:[0.2,0.35,0.5],hk:[0.2,0.4,0.8]};i.COND_GUARD_WAVE={element:[0.2,0.35,0.5],hk:[0.2,0.4,0.8]};i.FALLBACK={element:[0.12,0.24,0.36],hk:[0.12,0.24,0.48]};sc.b1=ig.Ca.extend({id:-1,aa:1,element:sc.ha.NEUTRAL,type:sc.XP.mj,HU:q,Y:2,f:function(a,b){this.id=b.id!=g?b.id:-1;this.aa=b.level!=g?b.level:1;this.element=b.element!=g?b.element:
sc.ha.NEUTRAL;this.type=b.type!=g?b.type:sc.XP.mj;this.HU=a},cX:J(),getName:function(){return ig.lang.get("sc.gui.skills.names."+this.HU)},R4:function(){return ig.lang.get("sc.gui.skills.descriptions."+this.HU)},jN:function(){return sc.FTa.jN(this.element,this.aa)},Y$:function(a){return a[this.element]}});sc.Ye={};sc.Ye.EMPTY=sc.b1.extend({f:function(a,b){this.parent(a,b)},apply:J(),R4:N("This is an empty Skill for testing. Gives 0 on everything!")});sc.Gj=sc.b1.extend({hj:q,cX:function(b){var c=
this.hj;c||e(Error("Stat is not defined!"));var d=a(c,this.aa,this.element);this.Y$(b).wo[c]=this.Y$(b).wo[c]+d;var f=i[c]||i.FALLBACK;if(this.element==sc.ha.NEUTRAL){var f=f.X8a||0.5,j;for(j in b)j!=sc.ha.NEUTRAL&&(b[j].wo[c]=b[j].wo[c]+d*f)}},R4:function(){var b=ig.lang.get("sc.gui.skills.descriptions."+this.HU);return b=b.replace("[xyz]",Math.floor(a(this.hj,this.aa,this.element)*100))}});sc.Ye.MAXHP=sc.Gj.extend({Y:7,hj:"hp"});sc.Ye.ATK=sc.Gj.extend({Y:4,hj:"attack"});sc.Ye.DEF=sc.Gj.extend({Y:5,
hj:"defense"});sc.Ye.FOC=sc.Gj.extend({Y:6,hj:"focus"});sc.zP=sc.b1.extend({MA:y,f:function(a,b){this.parent(a,b)},cX:function(a){var a=this.Y$(a),b=this.MVa(),c=this.element-1;this.MA&&(c=c==0?1:c==1?0:c==2?3:2);a.wo.elemFactor[c]=a.wo.elemFactor[c]-b},MVa:function(){return this.MA?d[this.aa-1]:c[this.aa-1]},R4:function(){var a=ig.lang.get("sc.gui.skills.descriptions."+this.HU);return a=a.replace("[xyz]",Math.floor(this.MVa()*100))}});sc.Ye.OWN_ELEMENT_RES_HEAT=sc.zP.extend({Y:8,MA:y});sc.Ye.COUNTER_ELEMENT_RES_HEAT=
sc.zP.extend({Y:9,MA:h});sc.Ye.OWN_ELEMENT_RES_COLD=sc.zP.extend({Y:9,MA:y});sc.Ye.COUNTER_ELEMENT_RES_COLD=sc.zP.extend({Y:8,MA:h});sc.Ye.OWN_ELEMENT_RES_SHOCK=sc.zP.extend({Y:10,MA:y});sc.Ye.COUNTER_ELEMENT_RES_SHOCK=sc.zP.extend({Y:11,MA:h});sc.Ye.OWN_ELEMENT_RES_WAVE=sc.zP.extend({Y:11,MA:y});sc.Ye.COUNTER_ELEMENT_RES_WAVE=sc.zP.extend({Y:10,MA:h});sc.Ye.ALL_ELEMENT_RES=sc.b1.extend({Y:12,f:function(a,b){this.parent(a,b)},cX:function(a){for(var b=this.Y$(a),c=f[this.aa-1],d=0;d<b.wo.elemFactor.length;d++)b.wo.elemFactor[d]=
b.wo.elemFactor[d]-c;if(this.element==sc.ha.NEUTRAL)for(d in a)if(d!=sc.ha.NEUTRAL)for(var b=a[d].wo.elemFactor,i=0;i<b.length;i++)b[i]=b[i]-c/2},R4:function(){var a=ig.lang.get("sc.gui.skills.descriptions."+this.HU);return a=a.replace("[xyz]",Math.floor(f[this.aa-1]*100))}});sc.Ye.RANGED_DAMAGE=sc.Gj.extend({Y:13,hj:"RANGED_DMG"});sc.Ye.CHARGED_KNOCKBACK=sc.Gj.extend({Y:14,hj:"KNOCKBACK"});sc.Ye.MELEE_DAMAGE=sc.Gj.extend({Y:15,hj:"MELEE_DMG"});sc.Ye.ASSAULT=sc.Gj.extend({Y:16,hj:"ASSAULT"});sc.Ye.CRITICAL_DAMAGE=
sc.Gj.extend({Y:17,hj:"CRITICAL_DMG"});sc.Ye.AIMING_SPEED=sc.Gj.extend({Y:18,hj:"AIM_SPEED"});sc.Ye.AIMING_STABILITY=sc.Gj.extend({Y:19,hj:"AIM_STABILITY"});sc.Ye.AIMING_MOVEMENT_SPEED=sc.Gj.extend({Y:20,hj:"AIMING_MOVEMENT"});sc.Ye.DASH_DISTANCE=sc.Gj.extend({Y:21,hj:"DASH_INVINC"});sc.Ye.ADDITIONAL_DASH_STEP=sc.Gj.extend({Y:22,hj:"DASH_STEP"});sc.Ye.GUARD_STRENGTH=sc.Gj.extend({Y:23,hj:"GUARD_STRENGTH"});sc.Ye.ADDITIONAL_GUARD_AREA=sc.Gj.extend({Y:24,hj:"GUARD_AREA"});sc.Ye.STUN_THRESHOLD=sc.Gj.extend({Y:26,
hj:"STUN_THRESHOLD"});sc.Ye.STATUS_CONDITION_EFFECT_HEAT=sc.Gj.extend({Y:140,hj:"COND_EFFECT_HEAT"});sc.Ye.STATUS_CONDITION_EFFECT_COLD=sc.Gj.extend({Y:141,hj:"COND_EFFECT_COLD"});sc.Ye.STATUS_CONDITION_EFFECT_SHOCK=sc.Gj.extend({Y:142,hj:"COND_EFFECT_SHOCK"});sc.Ye.STATUS_CONDITION_EFFECT_WAVE=sc.Gj.extend({Y:143,hj:"COND_EFFECT_WAVE"});sc.Ye.STATUS_CONDITION_GUARD_HEAT=sc.Gj.extend({Y:144,hj:"COND_GUARD_HEAT"});sc.Ye.STATUS_CONDITION_GUARD_COLD=sc.Gj.extend({Y:145,hj:"COND_GUARD_COLD"});sc.Ye.STATUS_CONDITION_GUARD_SHOCK=
sc.Gj.extend({Y:146,hj:"COND_GUARD_SHOCK"});sc.Ye.STATUS_CONDITION_GUARD_WAVE=sc.Gj.extend({Y:147,hj:"COND_GUARD_WAVE"});sc.Ye.STATUS_CONDITION_HEALING=sc.Gj.extend({Y:35,hj:"COND_HEALING"});sc.Ye.HP_REGENERATION=sc.Gj.extend({Y:36,hj:"HP_REGEN"});sc.Ye.OVERHEAT_REDUCTION=sc.Gj.extend({Y:37,hj:"OVERHEAT_REDUCTION"});sc.Ye.ITEM_BOOST=sc.Gj.extend({Y:38,hj:"ITEM_BOOST"});sc.Ye.APPETITE=sc.Gj.extend({Y:28,hj:"APPETITE"});sc.Ye.SPIKE_DAMAGE=sc.Gj.extend({Y:25,hj:"SPIKE_DMG"});sc.Ye.CROSS_COUNTER=sc.Gj.extend({Y:30,
hj:"CROSS_COUNTER"});sc.Ye.BERSERKER=sc.Gj.extend({Y:31,hj:"BERSERK"});sc.Ye.ONCE_MORE=sc.Gj.extend({Y:32,hj:"ONCE_MORE"});sc.Ye.GUARD_SP=sc.Gj.extend({Y:27,hj:"GUARD_SP"});var j={};j[sc.ha.NEUTRAL]={THROW:[{A:{Y:40},B:{Y:41}},{A:{Y:42},B:{Y:43}}],ATTACK:[{A:{Y:44},B:{Y:45}},{A:{Y:46},B:{Y:47}}],DASH:[{A:{Y:48},B:{Y:49}},{A:{Y:50},B:{Y:51}}],GUARD:[{A:{Y:52},B:{Y:53}},{A:{Y:54},B:{Y:55}}]};j[sc.ha.HEAT]={THROW:[{A:{Y:60}},{A:{Y:61}}],ATTACK:[{A:{Y:62},B:{Y:63}},{A:{Y:64},B:{Y:65}},{A:{Y:66},B:{Y:67}}],
DASH:[{A:{Y:68},B:{Y:69}},{A:{Y:70},B:{Y:71}},{A:{Y:72}}],GUARD:[{A:{Y:73},B:{Y:74}},{A:{Y:75},B:{Y:76}},{A:{Y:77},B:{Y:78}}]};j[sc.ha.COLD]={THROW:[{A:{Y:80},B:{Y:81}},{A:{Y:82},B:{Y:83}},{A:{Y:84}}],ATTACK:[{A:{Y:85},B:{Y:86}},{A:{Y:87},B:{Y:88}},{A:{Y:89},B:{Y:90}}],DASH:[{A:{Y:91}},{A:{Y:92}}],GUARD:[{A:{Y:93},B:{Y:94}},{A:{Y:95},B:{Y:96}},{A:{Y:97},B:{Y:98}}]};j[sc.ha.SHOCK]={THROW:[{A:{Y:100},B:{Y:101}},{A:{Y:102},B:{Y:103}},{A:{Y:104},B:{Y:105}}],ATTACK:[{A:{Y:106},B:{Y:107}},{A:{Y:108},B:{Y:109}},
{A:{Y:110}}],DASH:[{A:{Y:111},B:{Y:112}},{A:{Y:113},B:{Y:114}},{A:{Y:115},B:{Y:116}}],GUARD:[{A:{Y:117}},{A:{Y:118}}]};j[sc.ha.WAVE]={THROW:[{A:{Y:120},B:{Y:121}},{A:{Y:122},B:{Y:123}},{A:{Y:124},B:{Y:125}}],ATTACK:[{A:{Y:126}},{A:{Y:127}}],DASH:[{A:{Y:128},B:{Y:129}},{A:{Y:130},B:{Y:131}},{A:{Y:132},B:{Y:133}}],GUARD:[{A:{Y:134},B:{Y:135}},{A:{Y:136},B:{Y:137}},{A:{Y:138}}]};var k=/(.+)_SPECIAL(\d)_(A|B)/;sc.uzb=function(a,c){var d=k.exec(c);if(d)return(d=b(d[1],a,d[2],d[3]))&&d.Y||0;return 0};sc.Ye.ACTIVE_PLACEHOLDER=
sc.b1.extend({Y:0,f:function(a,b){this.parent(a,b)},cX:J()});sc.hF=sc.b1.extend({R_:q,oba:q,f:function(a,c,d,f){this.parent(a,c);this.R_=d;this.oba=f;this.Y=(a=b(d,this.element,this.aa,f))?a.Y:48},getName:function(){var a=sc.q.T.SEa(this.element,this.R_+"_SPECIAL"+this.aa+"_"+this.oba);return a&&a.name?a.name.toString():ig.lang.get("sc.gui.skills.specials.wip.name")},R4:function(){var a=sc.q.T.SEa(this.element,this.R_+"_SPECIAL"+this.aa+"_"+this.oba);return a&&a.description?a.description.toString():
ig.lang.get("sc.gui.skills.specials.wip.desc")},cX:function(a){var a=this.Y$(a),b=this.R_+"_SPECIAL"+this.aa,c=b+"_"+this.oba,d=b+"_"+(this.oba=="A"?"B":"A");a.Pg[c]?a.HQ[sc.hl[b]]=a.Pg[c]:a.Pg[d]&&(a.HQ[sc.hl[b]]=a.Pg[d])},O4:function(a,b){return a&&a!=this.R_||b!=g&&b!=this.element?0:this.aa},nRb:function(){switch(this.element){case sc.ha.NEUTRAL:return"NEUTRAL";case sc.ha.HEAT:return"HEAT";case sc.ha.COLD:return"COLD";case sc.ha.SHOCK:return"SHOCK";case sc.ha.WAVE:return"WAVE"}}});sc.Ye.THROW_SPECIAL_A=
sc.hF.extend({f:function(a,b){this.parent(a,b,"THROW","A")}});sc.Ye.THROW_SPECIAL_B=sc.hF.extend({f:function(a,b){this.parent(a,b,"THROW","B")}});sc.Ye.ATTACK_SPECIAL_A=sc.hF.extend({f:function(a,b){this.parent(a,b,"ATTACK","A")}});sc.Ye.ATTACK_SPECIAL_B=sc.hF.extend({f:function(a,b){this.parent(a,b,"ATTACK","B")}});sc.Ye.DASH_SPECIAL_A=sc.hF.extend({f:function(a,b){this.parent(a,b,"DASH","A")}});sc.Ye.DASH_SPECIAL_B=sc.hF.extend({f:function(a,b){this.parent(a,b,"DASH","B")}});sc.Ye.GUARD_SPECIAL_A=
sc.hF.extend({f:function(a,b){this.parent(a,b,"GUARD","A")}});sc.Ye.GUARD_SPECIAL_B=sc.hF.extend({f:function(a,b){this.parent(a,b,"GUARD","B")}})});ig.J=h;
ig.N("game.feature.skills.skilltree").O("impact.base.game","game.feature.skills.skills").K(function(){sc.IQb=8;sc.fq={};sc.fq.STRAIGHT=0;sc.fq.CW_45=1;sc.fq.CW_90=2;sc.fq.CW_135=3;sc.fq.CCW_45=4;sc.fq.CCW_90=5;sc.fq.CCW_135=6;sc.Lnb=ig.UL.extend({version:3,by:q,qe:[],II:0,f:function(){ig.gTa?this.parent():ig.warn("Can't initialize skill tree because ig.SKILL_TREE was not provided")},wu:function(){$.ajax({dataType:"json",url:ig.root+ig.gTa+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},
onerror:function(a){this.by=q;this.Xl(h);ig.error("Could not load Skilltree json file! Event: %O",a)},onload:function(a){this.by=[];this.by[sc.ha.NEUTRAL]=a.NEUTRAL;this.by[sc.ha.HEAT]=a.HEAT;this.by[sc.ha.COLD]=a.COLD;this.by[sc.ha.SHOCK]=a.SHOCK;this.by[sc.ha.WAVE]=a.WAVE;this.Xl(h);ig.EV&&ig.log("%cLOADABLE: %cLoaded Skilltree: \n%O","color:blue","",a);this.Sqb()},Sqb:function(){this.qe=[];this.II=-1;var a={id:0,level:0,element:0};this.k2(this.by[sc.ha.NEUTRAL],sc.ha.NEUTRAL,a);this.k2(this.by[sc.ha.HEAT],
sc.ha.HEAT,a);this.k2(this.by[sc.ha.COLD],sc.ha.COLD,a);this.k2(this.by[sc.ha.SHOCK],sc.ha.SHOCK,a);this.k2(this.by[sc.ha.WAVE],sc.ha.WAVE,a)},k2:function(a,b,c){if(a.length!=0){c.element=b;for(var d=0;d<a.length;d++){var f=a[d];if(this.tt(f))ig.warn("Empty Skill detected [element ID: %i]! Please add content for the skill, for now we skip it.",b);else{if(f.orBranch)for(var i=f.orBranch,j=0;j<i.levels.length;j++){c.level=i.levels[j];c.id=++this.II;c.type=j==0?sc.XP.xxa:sc.XP.gSa;this.qe[this.II]=this.mza(i.left[j].type,
c);i.left[j].uid=this.II;c.id=++this.II;c.type=sc.XP.gSa;this.qe[this.II]=this.mza(i.right[j].type,c);i.right[j].uid=this.II}else{c.id=++this.II;c.level=f.level;c.type=sc.XP.mj;f.uid=this.II;this.qe[this.II]=this.mza(f.skill.type,c)}f.children&&this.k2(f.children,b,c)}}}},mza:function(a,b){if(sc.Ye[a])return new sc.Ye[a](a,b);var c=new sc.Ye.EMPTY("EMTPY",b);ig.warn("Unknown or no skill type detected: %c"+a,"color:orange");ig.warn("Creating Empty skill: %O",c);return c},tt:function(a){for(var b in a)return y;
return h},Mub:function(a,b,c){for(var d in sc.ha)this.wqb(a,b-1,this.by[sc.ha[d]],c)},wqb:function(a,b,c,d){var f=[];for(this.EUa(f,c);f.length>0;){for(var c=f.length,i=q,j=0;c--;){var k=f[c];if(k.td.jN()>b)f.splice(c,1);else{var l=d&&d.indexOf(k.td.HU)||0;l==-1&&(l=500);l=l+k.td.aa*1E3;if(!i||l<j){i=k;j=l}}}if(i){b=b-i.td.jN();this.asb(a,i,f)}}},EUa:function(a,b){for(var c=b.length;c--;){var d=b[c];if(d.orBranch){for(var f=d.orBranch,i=f.levels.length,j;i--;){if(f.left[i].type.indexOf("SPECIAL_A")){j=
"left";break}f.right[i].type.indexOf("SPECIAL_A")&&(j="right")}a.push({td:this.qe[f[j][0].uid],WYa:f,VYa:j,step:0,children:d.children})}else a.push({td:this.qe[d.uid],children:d.children})}},asb:function(a,b,c){c.ye(b);a.push(b.td);if(b.VYa&&b.step+1<b.WYa.levels.length){b.step++;b.td=this.qe[b.WYa[b.VYa][b.step].uid];c.push(b)}else b.children&&this.EUa(c,b.children)},R2a:function(a){return a!=g?this.by[a]:q},Ky:function(a){return this.qe[a]}});sc.xo=new sc.Lnb});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.numbers","game.feature.menu.gui.menu-misc","game.feature.skills.skilltree","game.feature.player.player-model").K(function(){sc.yn={xL:1,lW:2,QL:3};sc.es={fv:0,vp:2,eA:4,zp:6,oxa:1,kTa:3,gya:5,pxa:7};sc.Jfb=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),focusOffset:{x:0,y:0},focus:y,lh:0,fi:0,Ui:0,pj:0,Pl:y,D2:y,r2:y,f:function(){this.parent();this.F(49,49);this.D2=
h},nu:function(a,b){this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y);this.focus=h;this.lh=0;this.fi=0.15;this.Ui=0},Om:function(){this.focus=y;this.L9a()},L9a:function(){this.fi=this.lh=0.15;this.Ui=0},moveTo:function(a,b,c,d){c&&ig.input.qb==ig.Yb.Wc?this.kd(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y,d,KEY_SPLINES.EASE):this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y);if(this.focus){this.lh=
0;this.fi=0.15;this.Ui=3;this.focus=y}},update:function(){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}if(this.lh<this.fi){this.lh=this.lh+ig.i.ja;if(this.lh>=this.fi){this.lh=this.fi;this.Ui=this.focus?3:0}else this.Ui=(this.fi?1:-1)*(this.lh/this.fi)*3}},Da:function(a){this.focus?a.na(this.s,0,0,424,168,49,49):this.Pl&&a.na(this.s,0,0,424,223,49,49)},Ab:function(a,b){if(!this.r2&&a==sc.e)if(b==sc.fa.w1){this.Om();if(ig.input.qb==ig.Yb.Wc)this.Pl=h}else if(b==sc.fa.bW){this.fi=
this.lh=0.15;this.Ui=0}else b==sc.fa.vka?this.nu(sc.e.Rh.x,sc.e.Rh.y):b==sc.fa.wka?this.Om():b==sc.fa.cya&&(this.focus||this.nu(sc.e.Rh.x,sc.e.Rh.y))}});sc.lwa=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-86},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_MIN:{state:{alpha:0,offsetX:-145},time:0.2,p:KEY_SPLINES.LINEAR}},tc:q,Mb:[],background:q,Oj:q,Gk:q,ps:-1,PN:y,m2:0,f:function(){this.parent();this.l(10,30);this.F(132,
100);this.H(ig.k.hb,ig.k.Cb);this.background=new sc.Bl(sc.rg.ds);this.background.F(76,100);this.background.H(ig.k.hb,ig.k.Cb);this.m(this.background);for(var a in sc.ha){var b=sc.ha[a];this.Mb[b]=new sc.lwa.Tz(b);this.m(this.Mb[b])}this.Oj=new sc.mc("\\i[arrow-left]",34,h,sc.Mc.$c);this.Oj.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:-5},time:0.2,p:KEY_SPLINES.EASE_IN}};this.Oj.H(ig.k.hb,ig.k.Cb);this.Oj.l(5,0);this.Oj.cc=this.xsb.bind(this);this.Gk=new sc.mc("\\i[arrow-right]",
34,h,sc.Mc.$c);this.Gk.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:-5},time:0.2,p:KEY_SPLINES.EASE_IN}};this.Gk.H(ig.k.ra,ig.k.Cb);this.Gk.l(-20,0);this.Gk.cc=this.ysb.bind(this);this.Oj.j("HIDDEN",h);this.Gk.j("HIDDEN",h);this.background.we={content:{title:"sc.gui.menu.help.circuit.titles.points",description:"sc.gui.menu.help.circuit.description.points"},offset:{x:0,y:0},size:{x:"dyn",y:"dyn"},index:{x:0,y:0},fb:function(){return!this.PN}.bind(this)};this.m(this.Oj);
this.m(this.Gk);this.j("HIDDEN",h)},update:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);this.background.a.size.x=Math.round(this.tc.QH*(1-a)+this.tc.width*a);this.background.a.size.y=Math.round(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},Ym:function(a,b,c,d){this.tc={QH:this.background.a.size.x,width:a||0,Tu:this.background.a.size.y,height:b||0,time:c,p:KEY_SPLINES.EASE,n:0-(d||0)}},oqb:function(){sc.e.Z.Jd(this.Oj,
this.VUa.bind(this));sc.e.Z.Jd(this.Gk,this.VUa.bind(this))},ysb:function(){this.XUa(1)},xsb:function(){this.XUa(0)},VUa:N(y),XUa:function(a){if(a>=0){a=this.Zqb(a);a!=sc.e.Lj&&sc.e.C7(a)}},Zqb:function(a){var b=sc.e.Lj;do if(a>0)b=(b+1)%5;else{b--;b<0&&(b=4)}while(!sc.q.T.xG(b));return b},Rsb:function(a){if(!(this.m2<=1)&&this.ps!=a){if(this.PN){this.Mb[this.ps].j("HIDDEN",h);this.Mb[a].l(42,-2+(this.m2-1)*20);this.Mb[a].j("DEFAULT",h);this.Mb[a].zCb(0,h);this.Mb[a].hMb(0.2,y,this.ps)}else for(var b=
this.Mb.length;b--;)b!=a&&this.Mb[b].j("HIDDEN");this.ps=a;this.nsb(a)}},nsb:function(a){if(!this.PN){this.Mb[a].kd(42,-2+(this.m2-1)*20,0.2,KEY_SPLINES.EASE,0.1);this.background.kd(13,0,0.2,q,0.2);this.Ym(132,21,0.2,0.1);this.Oj.j("DEFAULT",y,y,q,0.3);this.Gk.j("DEFAULT",y,y,q,0.3);this.oqb();this.PN=h}},lsb:function(a){if(this.PN){this.ps=-1;a=this.oXa(y,h,a);this.background.kd(0,0,0.2,q,0.1);this.Ym(76,a,0.2,0.1);this.Oj.j("HIDDEN");this.Gk.j("HIDDEN");this.PN=y;this.Mu()}},dXa:function(){this.PN=
y;this.ps=-1;var a=this.oXa();this.a.size.y=a;this.background.l(0,0);this.background.F(76,a<20?20:a);this.Oj.j("HIDDEN",h);this.Gk.j("HIDDEN",h)},oXa:function(a,b,c){for(var d=-2,f=q,i=sc.q.T,j=this.m2=0;j<this.Mb.length;j++){f=this.Mb[j];if(i.ki(j+8)){if(b&&c!=j){f.j("HIDDEN",h);f.j("DEFAULT",y,y,q,0.3)}else f.j("DEFAULT",!a);this.m2++}else f.j("HIDDEN",!a);c==j&&b?f.kd(2,d,0.2,KEY_SPLINES.EASE,0.1):f.l(2,d);i.ki(j+8)&&(d=d+20)}return this.m2*20},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.q.T,this)},
Ic:function(){sc.P.Hc(sc.q.e,this);sc.P.Hc(sc.q.T,this)},Yd:function(){this.dXa();this.j("DEFAULT")},pl:function(){this.Gd()},Gd:function(){this.PN?this.j("HIDDEN_MIN"):this.j("HIDDEN",y,y,function(){this.dXa()}.bind(this));this.PN=y;this.Mu()},Mu:function(){sc.e.Z.Te(this.Oj);sc.e.Z.Te(this.Gk)},Ab:function(a,b){if(a==sc.e)b==sc.fa.N1&&(sc.e.Lj<0?this.lsb(this.ps):this.Rsb(sc.e.Lj));else if(a==sc.q.T&&(b==sc.dd.aQa||b==sc.dd.PL))for(var c=this.Mb.length;c--;)this.Mb[c].EOb()}});sc.lwa.Tz=ig.da.extend({f0a:new ig.ia("media/gui/status-gui.png"),
s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},oc:q,zF:q,element:0,M8a:0,alpha:1,f:function(a){this.parent();this.F(75,24);this.oc=new sc.Tb(108,{transitionTime:0.2});this.oc.za(sc.q.T.Qs[a],h);this.oc.H(ig.k.ra,ig.k.$);this.oc.l(7,10);this.m(this.oc);this.element=a},update:function(){if(this.zF){this.zF.n=this.zF.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.zF.n)/this.zF.time),a=this.zF.p.get(a);this.alpha=
this.zF.d0*(1-a)+this.zF.alpha*a;if(a==1)this.zF=q}},Da:function(a){this.zF&&a.na(this.f0a,0,0,104,32+this.M8a*24,24,24).ge(1-this.alpha);a.na(this.f0a,0,0,104,32+this.element*24,24,24).ge(this.alpha);a.na(this.s,22,6,368,272,52,11)},EOb:function(){this.oc.za(sc.q.T.Qs[this.element])},zCb:function(a,b){this.R_a(0,a,b)},hMb:function(a,b,c){this.M8a=c;this.R_a(1,a,b)},R_a:function(a,b,c){c?this.alpha=a:this.zF={d0:this.alpha,alpha:a,time:b,p:KEY_SPLINES.EASE,n:0}}});sc.qQa=ig.da.extend({Z:q,button:q,
md:q,PLa:y,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.a.zIndex=2E3;this.a.xf=h;this.Z=new ig.$s;sc.P.Wa(sc.q.T,this);this.button=new sc.mc("+ 2 CP",0,h,sc.Mc.$c);this.button.H(ig.k.hb,ig.k.vb);this.button.l(0,-116);this.button.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-180},time:0.2,p:KEY_SPLINES.LINEAR}};this.button.j("HIDDEN",h);this.button.cc=function(){sc.q.T.PW(2,-1,h)}.bind(this);this.m(this.button);this.md=new sc.C9(1);this.md.F(170,
210);this.md.H(ig.k.hb,ig.k.vb);this.md.Bc.ga("learned");this.md.list.ua.Ql(function(a){this.vtb(a)}.bind(this));this.md.l(0,11);this.md.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-180},time:0.2,p:KEY_SPLINES.LINEAR}};this.Z.hh(this.md.list.ua);this.hsb();this.m(this.md);this.md.j("HIDDEN",h);this.Z.Jd(this.button,N(y).bind(this))},update:function(){if(ig.input.Yc("skills"))if(this.md.a.hi=="DEFAULT"){ig.La.$e(this.Z);this.md.j("HIDDEN");this.button.j("HIDDEN")}else{ig.La.De(this.Z);
this.md.j("DEFAULT");this.button.j("DEFAULT")}},Ab:function(a,b,c){if(a==sc.q.T&&(b==sc.dd.PL||b==sc.dd.m$))if(this.PLa)this.PLa=y;else for(var a=b==sc.dd.m$,b=this.md.list.Ar(),d=b.length,f=q,i=y;d--;){f=b[d].X;if(i=a?h:f.data&&c==f.data.description){sc.q.T.ee(f.data.description)?f.has.ga("YES"):f.has.ga("NO");if(!a)break}}},hsb:function(){this.md.list.ua.clear();this.md.list.clear(y);for(var a=sc.xo.qe,b=q,b=q,c=0;c<Math.floor(a.length/2);c++){b=a[c];b=new sc.qQa.WE(b.getName(),136,31,b.id,c);this.md.list.Sd(b)}},
vtb:function(a){if(a.data){this.PLa=h;if(sc.q.T.ee(a.data.description)){sc.q.T.gOb(a.data.description);a.has.ga("NO")}else{sc.q.T.P5(a.data.description,h);a.has.ga("YES")}}}});sc.qQa.WE=sc.IP.extend({has:q,f:function(a,b,c,d,f){this.parent(a,b,c,f,d);this.has=new sc.ea(sc.q.T.ee(d)?"YES":"NO",{speed:ig.Rd.se.zg});this.has.H(ig.k.ra,ig.k.$);this.has.l(3,2);this.m(this.has)}})});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-detail-elements").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.interact","game.feature.font.font-system","game.feature.menu.gui.circuit.circuit-misc","game.feature.menu.gui.menu-misc","game.feature.model.options-model","game.feature.skills.skills").K(function(){var a=[];a[sc.eja.SHORT]={K3a:0.05,I6a:0.05,NMa:0.1,cGa:0.1,Z6a:h};a[sc.eja.gjb]={K3a:0.3,I6a:0.2,NMa:0.2,cGa:0.2,Z6a:h};sc.Lfb=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),
focus:y,lh:0,fi:0,Ui:0,pj:0,Pl:y,f:function(){this.parent();this.F(31,31)},nu:function(a,b){this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2));this.focus=h;this.lh=0;this.fi=0.2;this.Ui=0},Om:function(){this.focus=y;this.fi=this.lh=0.2;this.Ui=0},moveTo:function(a,b,c,d){c!=g&&ig.input.qb==ig.Yb.Wc?this.kd(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2),d,KEY_SPLINES.EASE):this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2));if(this.focus){this.lh=0;this.fi=
0.2;this.Ui=3;this.focus=y}},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},update:function(){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}if(this.lh<this.fi){this.lh=this.lh+ig.i.Sa;if(this.lh>=this.fi){this.lh=this.fi;this.Ui=this.focus?3:0}else this.Ui=(this.fi?1:-1)*(this.lh/this.fi)*3}},Da:function(a){if(this.Pl||this.focus){a.na(this.s,3-this.Ui,3-this.Ui,36,116,12,12);a.na(this.s,16+this.Ui,3-this.Ui,48,116,12,12);a.na(this.s,3-this.Ui,16+
this.Ui,36,128,12,12);a.na(this.s,16+this.Ui,16+this.Ui,48,128,12,12)}},Ab:function(a,b){if(a==sc.e)if(b==sc.fa.N1){this.Om();if(ig.input.qb==ig.Yb.Wc)this.Pl=h}else if(b==sc.fa.tka)this.nu(sc.e.jg.x,sc.e.jg.y);else if(b==sc.fa.$xa)this.Om();else if(b==sc.fa.bW){this.fi=this.lh=0.2;this.Ui=0}else b==sc.fa.cTa&&(this.focus||this.nu(sc.e.jg.x,sc.e.jg.y))}});var b=Vec2.vc(0,0),c=Vec2.vc(0,0),d=Vec2.vc(0,0);sc.sfb={Heb:0,MQb:1};sc.Ifb=sc.Bl.extend({gb:new ig.jc("media/gui/circuit.png",{width:5,height:5,
left:5,top:5,right:5,bottom:5,Vb:{"top-left":{x:32,y:176},"top-right":{x:48,y:176}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:1,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},F2:new ig.ka("media/sound/menu/circuit/circuit-upgrade-b-2.ogg",1),lr:q,Av:q,LA:q,Pf:q,cancel:q,ua:q,mode:sc.sfb.Heb,wj:Vec2.vc(-1,-1),CQ:q,Ti:q,sRb:0,O$:y,f:function(a){this.parent();this.F(100,63);this.CQ=a;this.a.jB=h;this.a.BU(h);this.ua=new sc.wh(y,ig.tw.dQ);this.lr=new sc.ea(ig.lang.get("sc.gui.menu.skill.cost"),
{speed:ig.Rd.se.zg});this.lr.l(6,2);this.m(this.lr);this.LA=new sc.ea("cp",{speed:ig.Rd.se.zg});this.LA.H(ig.k.ra,ig.k.$);this.LA.l(6,2);this.LA.a.R={DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}};this.m(this.LA);this.Av=new sc.Tb(444,{transitionTime:0,size:sc.Ff.hv});this.Av.H(ig.k.ra,ig.k.$);this.Av.l(this.LA.a.size.x+6,6);this.Av.a.R={DEFAULT:{state:{},time:0,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0,p:KEY_SPLINES.LINEAR}};this.m(this.Av);
this.Pf=new sc.mc(ig.lang.get("sc.gui.menu.skill.activate"),96,h,sc.Mc.wI);this.Pf.l(1,21);this.Pf.ac=q;this.Pf.cc=this.ssb.bind(this);this.m(this.Pf);this.cancel=new sc.mc(ig.lang.get("sc.gui.menu.skill.cancel"),96,h,sc.Mc.wI);this.cancel.l(1,41);this.cancel.cc=this.vsb.bind(this);this.m(this.cancel);this.ua.jd(this.Pf,0,0);this.ua.jd(this.cancel,0,1);this.Xka(1,19,98,1);this.Xka(1,61,98,1);this.Xka(98,20,1,7);this.Xka(98,36,1,25);this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,
this)},update:function(){this.qj()},Da:function(a){this.parent(a);a.na(this.gb.s,99,26,32,148,12,13)},Ab:function(a,b,c){a==sc.e&&(b==sc.fa.bya?this.lrb(c):b==sc.fa.dTa?this.BVa():b==sc.fa.N1&&this.a.hi=="DEFAULT"&&this.BVa())},ssb:function(){if(this.Ti){var a=this.Ti.CA?h:y,b=this.Ti,c=this.Ti.Fq?this.Ti.Fq:q,d=this.Ti.td.uid;if(sc.xo.qe[d]){if(a){a=y;b.cz?sc.q.T.ee(d+1)&&(a=h):sc.q.T.ee(d-1)&&(a=h);if(a){this.F2.play();sc.q.T.Oua(d-b.Gu*2,b.cz);this.tXa(this.Ti)}else{a=y;b.Gu>0?c.cz?sc.q.T.ee(c.td.uid+
1)&&(a=h):sc.q.T.ee(c.td.uid-1)&&(a=h):a=y;if(sc.q.T.Oda(d))if(a){this.F2.play();sc.q.T.Oua(d-b.Gu*2,b.cz,d);this.tXa(this.Ti)}else if(this.O$)this.RUa(this.Ti);else{this.F2.play();sc.q.T.P5(d);sc.e.pE(this.Ti,y)}}}else if(sc.q.T.Oda(d))if(this.O$)this.RUa(this.Ti);else{this.F2.play();sc.q.T.P5(d);sc.e.pE(this.Ti,y)}sc.e.Eca()}else ig.warn("Could not find skill: "+d)}},tXa:function(a){if(a.Gu==0){sc.e.pE(this.Ti,y);sc.e.pE(this.Ti.Yy,y);sc.e.pE(this.Ti.Yy.Yy,y)}else if(a.Gu==1){sc.e.pE(this.Ti.Fq,
y);sc.e.pE(this.Ti,y);sc.e.pE(this.Ti.Yy,y)}else if(a.Gu==2){sc.e.pE(this.Ti.Fq,y);sc.e.pE(this.Ti.Fq.Fq,y);sc.e.pE(this.Ti,y)}},RUa:function(a){var b=0.2,c=[],d=Vec2.vc(0,0);this.YUa(a,c,a);for(var l=c.length;l--;){var m=c[l];m.ZK?sc.q.T.Oua(m.td.uid-m.X.Gu*2,m.X.cz,m.pFb?g:m.td.uid):sc.q.T.P5(m.td.uid);m.X.pFa(d);sc.e.pE(m.X,y,b);b=b+0.1}c=c[c.length-1];sc.e.mZa(c.X,c.X.pFa(),0.2,function(){sc.e.mZa(a,a.pFa(),b)}.bind(this));ig.La.Md(b+0.1)},YUa:function(a,b,c){var d=a.td,l=sc.q.T;if(!l.ee(d.uid)){if(a.td){if(a.C6){var m=
a.C6;if(l.ee(m.td.uid)){if(c.C6&&c.cz!=m.cz){b.push({X:a,td:d,ZK:h,pFb:h});return}if(m.Gu==2)return;if(m.Gu<=1){b[b.length-1]={X:m.Yy,td:m.Yy.td,ZK:h};m.Yy.Yy&&(b[b.length-2]={X:m.Yy.Yy,td:m.Yy.Yy.td,ZK:h});return}}}b.push({X:a,td:d})}a.Fq&&this.YUa(a.Fq,b,c)}},pAa:function(a){this.O$=a||y;var b=this.Ti.CA?h:y,c=this.Ti.td,d=c.uid,l=this.Ti.Fq?this.Ti.Fq:q;this.Pf.re.ga(ig.lang.get("sc.gui.menu.skill.activate"));this.Pf.setActive(h);this.lr.ga(ig.lang.get("sc.gui.menu.skill.cost"));this.LA.j("DEFAULT",
h);this.Av.j("DEFAULT",h);this.Av.pe(0,sc.Od.$n);this.Av.za(0,h);this.ua.tl(0,0);if(sc.q.T.ee(c.uid)){this.lr.ga(ig.lang.get("sc.gui.menu.skill.activated"));this.LA.j("HIDDEN",y);this.Av.j("HIDDEN",y);this.Pf.setActive(y);this.ua.tl(0,1)}else{var m=y;if(b){b=y;this.Ti.cz?sc.q.T.ee(c.uid+1)&&(b=h):sc.q.T.ee(c.uid-1)&&(b=h);if(b){this.Pf.re.ga(ig.lang.get("sc.gui.menu.skill.switch"));this.lr.ga(ig.lang.get("sc.gui.menu.skill.activated"));this.LA.j("HIDDEN",y);this.Av.j("HIDDEN",y);return}this.Ti.Gu>
0&&(l.cz?sc.q.T.ee(l.td.uid+1)&&(b=h):sc.q.T.ee(l.td.uid-1)&&(b=h));b&&this.Pf.re.ga(ig.lang.get("sc.gui.menu.skill.switch"));!b&&a&&(m=h)}else a&&(m=h);if(m){if(!this.kla(l)){sc.e.Cc(ig.lang.get("sc.gui.menu.skill.chain-des"));a=this.XVa(this.Ti,0);this.Av.za(a,h);if(sc.q.T.oCb(a,sc.xo.Ky(c.uid).element)){this.Pf.setActive(h);this.Pf.re.ga(ig.lang.get("sc.gui.menu.skill.chain"));this.Av.pe(sc.Od.zw);this.LA.ga("\\c[2]cp\\c[0]")}else{this.Av.pe(sc.Od.Nl);this.Pf.setActive(y);this.Pf.re.ga("\\c[4]"+
ig.lang.get("sc.gui.menu.skill.chain")+"\\c[0]");this.ua.tl(0,1);this.LA.ga("\\c[1]cp\\c[0]")}return}}else this.O$=y;c=sc.xo.Ky(c.uid);if(!a&&!this.kla(l)){this.Pf.setActive(y);this.ua.tl(0,1)}this.Av.za(c.jN(),h);if(sc.q.T.Oda(d)){this.Av.pe(sc.Od.zw);this.LA.ga("\\c[2]cp\\c[0]")}else{this.Av.pe(sc.Od.Nl);this.Pf.setActive(y);this.ua.tl(0,1);this.LA.ga("\\c[1]cp\\c[0]")}}},XVa:function(a,b){if(!a.td||sc.q.T.ee(a.td.uid)||a.C6&&sc.q.T.ee(a.C6.td.uid))return b;b=b+sc.xo.Ky(a.td.uid).jN();return a.Fq?
this.XVa(a.Fq,b):b},vsb:function(){sc.e.Eca()},lrb:function(a){if(this.Ti=sc.e.Gm){this.j("DEFAULT");sc.e.rl(this.zQ.bind(this));this.pAa(a);sc.e.Z.hh(this.ua)}else this.Ti=q},BVa:function(){sc.e.Z.sl(this.ua);this.Ti=q;this.O$&&sc.e.Cc("",h);this.j("HIDDEN");sc.e.Dk()},zQ:function(){sc.e.Eca()},Xka:function(a,b,c,d){c=new ig.mf("#7E7E7E",c,d);c.l(a,b);this.m(c)},qj:function(){if(sc.e.Gm&&this.Ti){var a=this.a;c.x=a.size.x+11;c.y=a.size.y;b.x=sc.e.jg.x+6;b.y=sc.e.jg.y+54;b.x=this.Ti.a.g.x+6+15+this.Ti.t2a();
b.y=this.Ti.a.g.y+54+15+this.Ti.u2a();var a=b.x+Math.floor(this.CQ.scroll.x),i=b.y+Math.floor(this.CQ.scroll.y);this.wj.x=-1;this.wj.y=-1;d.x=a+this.wj.x*(15.5+c.x/2)-c.x/2;d.y=i+this.wj.y*(15.5+c.y/2)-c.y/2;this.a.g.x=Math.ceil(d.x);this.a.g.y=Math.ceil(d.y)}},kla:function(a){if(a)if(a.CA)if(a.Gu==2){if(!sc.q.T.ee(a.td.uid)&&!sc.q.T.ee(a.td.uid-1))return y}else if(a.cz){if(!sc.q.T.ee(a.td.uid)&&!sc.q.T.ee(a.td.uid+1))return y}else{if(!sc.q.T.ee(a.td.uid)&&!sc.q.T.ee(a.td.uid-1))return y}else if(!sc.q.T.ee(a.td.uid))return y;
return h}});sc.Ffb=sc.Bl.extend({gb:new ig.jc("media/gui/circuit.png",{width:5,height:5,left:5,top:5,right:5,bottom:5,Vb:{"top-left":{x:32,y:176},"top-right":{x:48,y:176}}}),Bg:q,fe:q,text:q,Nm:q,XF:q,Et:Vec2.vc(-1,-1),wj:Vec2.vc(-1,-1),mB:q,SS:Vec2.vc(0,0),TS:0,CQ:q,tc:q,vL:q,f:function(b){this.parent(sc.rg.ds);this.vL=[{font:sc.Ea.Ib,padding:0,offset:1},{font:sc.Ea.he,padding:-1,offset:0},{font:sc.Ea.font,padding:-1,offset:0}];this.CQ=b;this.Bg=new sc.ea("UberSkill 9000gt",{speed:ig.Rd.se.zg,maxWidth:170});
this.Bg.l(8,2);this.m(this.Bg);this.Nm=new sc.ea("Guard Art",{speed:ig.Rd.se.zg,font:sc.Ea.Ib,maxWidth:170});this.Nm.l(7,9);this.Nm.H(ig.k.ra,ig.k.$);this.m(this.Nm);this.Nm.a.nd=0;this.fe=new ig.mf("#FFFFFF",10,1);this.fe.l(4,19);this.m(this.fe);this.XF=new sc.ea("Cost: ",{font:sc.Ea.Ib});this.XF.H(ig.k.ra,ig.k.$);this.m(this.XF);b=sc.options.get("circuit-text-size");b=this.vL[b]?b:0;this.text=new sc.ea("Unlocks Magic Dagger + 5.\nIncreases text by a third line.",{speed:ig.Rd.se.zg,maxWidth:170,
linePadding:this.vL[b].padding,font:this.vL[b].font});this.text.l(8,20+this.vL[b].offset);this.m(this.text);b=a[sc.options.get("circuit-display-time")||0];this.a.R={DEFAULT:{state:{},time:b.NMa,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:1,Va:0,alpha:0},time:b.cGa,p:KEY_SPLINES.LINEAR}};this.a.jB=h;this.Ym(h);this.l(100,100);this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this);var b=sc.options.get("circuit-text-size"),b=this.vL[b]?b:0;this.text.pha(this.vL[b].font,this.vL[b].padding);this.text.l(8,20+
this.vL[b].offset);b=a[sc.options.get("circuit-display-time")||0];this.a.R={DEFAULT:{state:{},time:b.NMa,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:1,Va:0,alpha:0},time:b.cGa,p:KEY_SPLINES.LINEAR}};this.Ym(h)},Ic:function(){sc.P.Hc(sc.e,this);this.mB=q;this.Et.x=0},Ym:function(a){var b;b=30+(this.text.a.size.y+4);if(!(186==this.a.size.x&&b==this.a.size.y)){this.fe.F(178,1);this.fe.l(4,19);this.XF.l(8,this.text.a.size.y+24);a?this.F(186,b):this.tc={QH:this.a.size.x,width:186,Tu:this.a.size.y,height:b||
0,time:0.1,p:KEY_SPLINES.EASE,n:0}}},update:function(){if(sc.e.Q_&&!sc.e.Gm){this.j("HIDDEN",y,y,function(){this.mB=q}.bind(this));this.mB=q}this.qj(h);this.HAa();if(!this.a.Mv()&&this.a.hi=="HIDDEN"){this.mB=q;this.TS=0}},Ab:function(a,b){if(a==sc.e)if(b==sc.fa.tka){this.pAa();this.j("DEFAULT")}else if(b==sc.fa.$xa)this.Qrb();else if(b==sc.fa.N1||b==sc.fa.bW){this.mB=sc.e.Gm=q;this.Et.x=0;this.j("HIDDEN",y,y,function(){this.mB=q}.bind(this))}},qj:function(a){if(sc.e.Gm){if(this.mB&&this.mB!=sc.e.Gm){Vec2.assign(this.SS,
this.a.g);this.TS=0.1}this.mB=sc.e.Gm;var i=this.a;c.x=i.size.x;c.y=i.size.y;if(ig.input.qb==ig.Yb.Wc){i=sc.e.Gm;b.x=i.a.g.x+20+i.t2a();b.y=i.a.g.y+20+i.u2a()}else{b.x=sc.e.jg.x;b.y=sc.e.jg.y}var i=b.x+Math.ceil(this.CQ.scroll.x),j=b.y+Math.ceil(this.CQ.scroll.y),k=i-(ig.i.width-c.x-16),l=k<=0?1:-1;if(a&&this.Et.x!=0){if(sc.e.Rs==sc.Rm.B1)this.Et.x=1;else if(l!=this.Et.x&&Math.abs(k)>16)this.Et.x=l;this.wj.x=this.wj.x*0.8+this.Et.x*0.2;this.wj.y=this.wj.y*0.8+this.Et.y*0.2}else{this.Et.x=this.wj.x=
l;this.Et.y=this.wj.y=-1}d.x=i+this.wj.x*(15.5+c.x/2)-c.x/2;d.y=j+this.wj.y*(15.5+c.y/2)-c.y/2;d.x=d.x.Rb(1,ig.i.width-c.x-1);d.y=d.y.Rb(22,ig.i.height-c.y-22-(d.x<192?Math.min(30,192-d.x):0));if(this.TS>0){this.TS=this.TS-ig.i.Sa;this.TS<=0?this.TS=0:Vec2.an(d,this.SS,this.TS/0.1)}this.a.g.x=Math.ceil(d.x);this.a.g.y=Math.ceil(d.y)}else{if(this.a.hi=="HIDDEN"&&!this.a.Mv())this.mB=q;this.Et.x=0}},HAa:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),
a=this.tc.p.get(a);this.a.size.x=Math.round(this.tc.QH*(1-a)+this.tc.width*a);this.a.size.y=Math.round(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},pAa:function(){var a=sc.e.Gm.td,b=sc.xo.Ky(a.uid);if(b.getName().slice(0,4)=="BS [")this.Bg.ga("UberSkill 9000gt");else if(b instanceof sc.hF){this.Bg.ga("\\c[3]"+b.getName()+"\\c[0]");this.Nm.ga(ig.lang.get("sc.gui.skills.special-types."+b.R_));this.Nm.a.nd=1}else{this.Bg.ga(b.getName());this.Nm.a.nd=0}if(sc.e.Gm.Vi){var c="\\c[3]"+sc.yb.pda(sc.e.Gm.jma)+
"\\c[0]",d=ig.lang.get("sc.gui.menu.skill.shade");this.text.ga(d.replace("[xyz]",c))}else this.text.ga(b.R4());var c=sc.FTa.jN(b.element,b.aa),d=sc.e.Gm,l=sc.q.T;if(d.CA){var m=y;d.cz?l.ee(b.id+1)&&(m=h):l.ee(b.id-1)&&(m=h);m?this.XF.ga("\\c[3]"+ig.lang.get("sc.gui.menu.skill.swappable")+"\\c[0]"):l.ee(a.uid)?this.XF.ga("\\c[3]"+ig.lang.get("sc.gui.menu.skill.activated")+"\\c[0]"):l.Oda(a.uid)?this.XF.ga(ig.lang.get("sc.gui.menu.skill.cost")+" \\c[2]"+c+"cp\\c[0]"):this.XF.ga(ig.lang.get("sc.gui.menu.skill.cost")+
" \\c[1]"+c+"cp\\c[0]")}else l.ee(a.uid)?this.XF.ga("\\c[3]"+ig.lang.get("sc.gui.menu.skill.activated")+"\\c[0]"):l.Oda(a.uid)?this.XF.ga(ig.lang.get("sc.gui.menu.skill.cost")+" \\c[2]"+c+"cp\\c[0]"):this.XF.ga(ig.lang.get("sc.gui.menu.skill.cost")+" \\c[1]"+c+"cp\\c[0]");this.Ym(h)},Qrb:function(){var b=a[sc.options.get("circuit-display-time")||0];this.a.Mv()&&this.a.hi!="DEFAULT"?this.j("HIDDEN",y,y,function(){this.mB=q}.bind(this)):b.Z6a&&this.a.Mv()&&this.a.hi=="DEFAULT"?this.a.WK=function(){this.j("HIDDEN",
y,y,function(){this.mB=q}.bind(this),b.I6a)}.bind(this):this.j("HIDDEN",y,y,function(){this.mB=q}.bind(this),b.K3a)}});sc.Efb=ig.wh.extend({Na:{focus:new ig.ka("media/sound/menu/menu-hover.ogg",0.9)},Jr:function(){return sc.ba.ADa()||sc.ba.bw()||sc.ba.aw()},xJ:function(){ig.input.qb==ig.Yb.Wc&&(sc.ba.Au()&&sc.e.Gm)&&sc.e.Gm.cc();var a=-1;sc.ba.bw()&&(a=1);sc.ba.aw()&&(a=0);if(a>=0){a=this.Nwb(a);a!=sc.e.Lj&&sc.e.C7(a)}a=sc.ba.ADa();a!==y&&(!a||a==sc.e.Lj?sc.e.C7(sc.ha.NEUTRAL):sc.q.T.xG(a)&&sc.e.C7(a))},
Nwb:function(a){var b=sc.e.Lj;do if(a>0)b=(b+1)%5;else{b--;b<0&&(b=4)}while(!sc.q.T.xG(b));return b}})});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-overview").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.circuit.circuit-misc","game.feature.combat.model.combat-params").K(function(){var a=Vec2.vc(0,0),b=Vec2.vc(0,0),c=Vec2.vc(0,0),d=Vec2.vc(0,0),f=Math.PI/2,i=Math.PI/4,j=f+i;sc.fja="menu.circuit.start.";var k={element:sc.ha.NEUTRAL,VB:{x:0,y:-1},Ce:{x:44,y:44},Sb:{x:0,y:0},rotation:0,qo:[{x:24,y:1},{x:1,y:24},{x:47,y:24},{x:24,y:47}]},l={element:sc.ha.HEAT,rotation:f,
Sb:{x:0,y:-149},VB:{x:1,y:0},Ce:{x:72,y:21},qo:[{x:29,y:1},{x:75,y:1},{x:6,y:24},{x:52,y:24},{x:98,y:24},{x:29,y:47},{x:75,y:47},{x:52,y:70}]},m={element:sc.ha.COLD,rotation:-f,Sb:{x:-127,y:0},VB:{x:-1,y:0},Ce:{x:72,y:101},qo:[{x:52,y:12},{x:29,y:35},{x:75,y:35},{x:6,y:58},{x:52,y:58},{x:98,y:58},{x:29,y:81},{x:75,y:81}]},n={rotation:0,element:sc.ha.SHOCK,Sb:{x:0,y:0},VB:{x:0,y:-1},Ce:{x:21,y:72},qo:[{x:1,y:29},{x:1,y:75},{x:24,y:6},{x:24,y:52},{x:24,y:98},{x:47,y:29},{x:47,y:75},{x:70,y:52}]},o=
{element:sc.ha.WAVE,rotation:Math.PI,Sb:{x:-127,y:-149},VB:{x:0,y:1},Ce:{x:101,y:72},qo:[{x:12,y:52},{x:35,y:29},{x:35,y:75},{x:58,y:6},{x:58,y:52},{x:58,y:98},{x:81,y:29},{x:81,y:75}]};sc.Hfb=ig.wh.extend({Na:{focus:new ig.ka("media/sound/menu/menu-hover.ogg",0.9)},dm:q,f:function(){this.parent();this.dm=new ig.c$},TLa:function(a,b,c,d,f){this.jd(a,1,1);this.jd(b,1,2);this.jd(c,1,0);this.jd(d,2,1);this.jd(f,0,1);this.tl(1,1);a.cB&&(ig.input.Id?this.tl(1,1):this.Sg(1,1,h,h,y,h))},Jr:function(){return sc.ba.Au()||
sc.ba.CH()||sc.ba.OG()||sc.ba.gu()||sc.ba.Zu()},xJ:function(a){sc.ba.Cq()&&this.pea();var b=this.nD();if(!a){sc.ba.Au()&&this.LGa();var c=a=0,d=y;if(b=="left"){a=Math.max(0,this.Qa.x-1);c=this.Qa.y;if(a==this.Qa.x)return;if(c==0||c==2)c=1;d=h}else if(b=="right"){a=Math.min(2,this.Qa.x+1);c=this.Qa.y;if(a==this.Qa.x)return;if(c==0||c==2)c=1;d=h}if(b=="up"){a=this.Qa.x;c=Math.max(0,this.Qa.y-1);if(c==this.Qa.y)return;if(a==0||a==2)a=1;d=h}else if(b=="down"){a=this.Qa.x;c=Math.min(2,this.Qa.y+1);if(c==
this.Qa.y)return;if(a==0||a==2)a=1;d=h}d&&this.elements[a][c].cB&&this.Sg(a,c)}},nD:function(){sc.ba.CH()?this.dm.hw("right"):sc.ba.OG()?this.dm.hw("left"):sc.ba.gu()?this.dm.hw("down"):sc.ba.Zu()&&this.dm.hw("up");return this.dm.sda()},Pf:function(){this.parent();this.nD()}});sc.Rz=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},SCALE:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.2,p:KEY_SPLINES.LINEAR}},
Qg:[],elements:[],xa:[],ua:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.a.Db.x=Math.floor(ig.i.width/2);this.a.Db.y=Math.floor(ig.i.height/2);this.ua=new sc.Hfb;this.ua.Rk(function(a){sc.e.Cc(a.data)});this.ua.jn(function(){sc.e.Cc("",h)});this.j("DEFAULT",h)},Vo:function(){this.Wqb();for(var a=this.xa.length;a--;)if(ig.ma.get(sc.fja+""+a))this.xa[a].cB=h;this.ua.TLa(this.xa[0],this.xa[1],this.xa[2],this.xa[3],this.xa[4])},cGb:function(a){this.xa[a].cB=h;a==
0&&(ig.input.Id||this.ua.Na.focus.play())},pi:function(){this.Qg[k.element].BK();this.Qg[l.element].BK();this.Qg[m.element].BK();this.Qg[n.element].BK();this.Qg[o.element].BK()},Ab:function(a,b){if(a==sc.q.T&&(b==sc.dd.PL||b==sc.dd.m$))if(sc.e.Lj==-1)for(var c=this.elements.length;c--;)this.tva(c);else this.elements[sc.e.Lj].HIa=h},Oc:function(){sc.P.Wa(sc.q.T,this)},Ic:function(){sc.P.Hc(sc.q.T,this)},Yd:function(){for(var a=this.elements.length;a--;){this.elements[a].show();this.xa[a].j("DEFAULT",
y,y,q,0.1)}ig.La.Md(0.2);sc.e.Z.hh(this.ua)},Gd:function(a){sc.e.Z.sl(this.ua);for(var b=this.elements.length;b--;){this.elements[b].j("HIDDEN",a);this.xa[b].j("HIDDEN",a)}},Qxb:function(){this.j("SCALE")},nEb:function(){for(var a=this.elements.length;a--;)if(this.elements[a].HIa){this.tva(a);this.elements[a].HIa=y}this.j("DEFAULT");ig.input.qb==ig.Yb.Wc&&this.ua.AIb();ig.La.Md(0.2)},qdb:function(){for(var a=this.elements.length;a--;)this.tva(a)},tva:function(a){this.elements[a].buffer=q;this.Qg[a].BK();
switch(a){case sc.ha.NEUTRAL:this.Qg[a]=ig.Mp.mD(93,93,function(){this.TI(k)}.bind(this));break;case sc.ha.HEAT:this.Qg[a]=ig.Mp.mD(149,127,function(){this.TI(l)}.bind(this));break;case sc.ha.COLD:this.Qg[a]=ig.Mp.mD(149,127,function(){this.TI(m)}.bind(this));break;case sc.ha.SHOCK:this.Qg[a]=ig.Mp.mD(127,149,function(){this.TI(n)}.bind(this));break;case sc.ha.WAVE:this.Qg[a]=ig.Mp.mD(127,149,function(){this.TI(o)}.bind(this))}this.elements[a].buffer=this.Qg[a]},Wqb:function(){var a=k.element,b=l.element,
c=m.element,d=n.element,f=o.element;this.Qg[a]=ig.Mp.mD(93,93,function(){this.TI(k)}.bind(this));this.Qg[b]=ig.Mp.mD(149,127,function(){this.TI(l)}.bind(this));this.Qg[c]=ig.Mp.mD(149,127,function(){this.TI(m)}.bind(this));this.Qg[d]=ig.Mp.mD(127,149,function(){this.TI(n)}.bind(this));this.Qg[f]=ig.Mp.mD(127,149,function(){this.TI(o)}.bind(this));var i=this.stb.bind(this),j=this.cGb.bind(this);this.elements[a]=new sc.Rz.A$(0,0,this.Qg[a],a,i,j);this.elements[b]=new sc.Rz.A$(0,86,this.Qg[b],b,i,j);
this.elements[c]=new sc.Rz.A$(0,-86,this.Qg[c],c,i,j);this.elements[d]=new sc.Rz.A$(86,0,this.Qg[d],d,i,j);this.elements[f]=new sc.Rz.A$(-86,0,this.Qg[f],f,i,j);this.m(this.elements[a]);this.m(this.elements[b]);this.m(this.elements[c]);this.m(this.elements[d]);this.m(this.elements[f]);this.xa[a]=new sc.Rz.t9(0,0,this.Qg[a],a);this.xa[b]=new sc.Rz.t9(0,86,this.Qg[b],b);this.xa[c]=new sc.Rz.t9(0,-86,this.Qg[c],c);this.xa[d]=new sc.Rz.t9(86,0,this.Qg[d],d);this.xa[f]=new sc.Rz.t9(-86,0,this.Qg[f],f);
this.m(this.xa[a]);this.m(this.xa[b]);this.m(this.xa[c]);this.m(this.xa[d]);this.m(this.xa[f])},stb:function(a){this.tva(a)},TI:function(a){var b=a.qo.length,c=80+48*a.element;if(a.rotation!=g)if(a.rotation!=0){ig.i.context.save();ig.i.context.rotate(a.rotation);this.s.nb(a.Sb.x,a.Sb.y,65,160,127,149);ig.i.context.restore()}else a.element==0?this.s.nb(a.Sb.x,a.Sb.y,392,368,93,93):this.s.nb(a.Sb.x,a.Sb.y,65,160,127,149);if(sc.q.T.ki(a.element+8)&&ig.ma.get(sc.fja+a.element)&&sc.q.T.xG(a.element)){for(;b--;){this.s.nb(a.qo[b].x,
a.qo[b].y,c,112,46,46);sc.e.Rs==sc.Rm.R1&&this.s.nb(a.qo[b].x,a.qo[b].y,224+a.element*48,320,45,45)}this.s.nb(a.Ce.x,a.Ce.y,a.element*8,304,5,5);this.Isb(a.element,a.Ce.x+2,a.Ce.y+2,a.VB.x,a.VB.y)}},Isb:function(b,d,f,i,j){var k=sc.xo.R2a(b);c.x=d;c.y=f;a.x=i;a.y=j;for(var l=q,m=0;m<k.length;m++){l=k[m];if(!this.tt(l)){this.uVa(c.x,c.y,i,j,l,b);this.SWa(b,l,d,f,a.x,a.y)}this.uaa("CW_90",i,j);i=a.x;j=a.y}},SWa:function(c,f,i,j,k,l){var m=y;if(f.orBranch){var n=f.orBranch;this.uaa(f.direction,k,l);
m=Math.abs(a.x)==1&&Math.abs(a.y)==1;i=i+((m?4:5)+f.distance)*a.x;j=j+((m?2:5)+f.distance)*a.y;b.x=a.x;b.y=a.y;this.uaa(n.direction,a.x,a.y);if(m)if(b.x<0&&a.x==0){i=i+2;j=j+(a.y>0?2:-2)}else if(b.x>0&&a.x==0){i=i-2;j=j+(a.y>0?2:-2)}(m=Math.abs(a.x)==1&&Math.abs(a.y)==1)&&ig.error("orBranch can't be rendered with a slope direction.");this.wVa(i,j,a,c,y,n);i=i+(m?3:4)*a.x;j=j+(m?3:4)*a.y;for(k=0;k<3;k++){d.x=0+c*8;d.y=256+(sc.q.T.ee(n.left[k].uid)?8:0);a.x!=0?this.s.nb(i-2,j-2+(a.x>0?-3:3),d.x,d.y,
5,5):this.s.nb(i-2+(a.y<0?-3:3),j-2,d.x,d.y,5,5);d.y=256+(sc.q.T.ee(n.right[k].uid)?8:0);a.x!=0?this.s.nb(i-2,j-2+(a.x>0?3:-3),d.x,d.y,5,5):this.s.nb(i-2+(a.y<0?3:-3),j-2,d.x,d.y,5,5);i=i+(m?3:5)*a.x;j=j+(m?3:5)*a.y}this.wVa(i,j,a,c,h,n,f);i=i-a.x;j=j-a.y}else{this.uaa(f.direction,k,l);m=Math.abs(a.x)==1&&Math.abs(a.y)==1;i=i+((m?3:5)+f.distance)*a.x;j=j+((m?3:5)+f.distance)*a.y;d.x=0+c*8;d.y=256+(sc.q.T.ee(f.uid)?8:0);this.s.nb(i-Math.floor(2.5),j-Math.floor(2.5),d.x,d.y,5,5)}f=f.children;if(f.length!=
0){m=q;k=a.x;l=a.y;for(n=0;n<f.length;n++){m=f[n];if(!this.tt(m)){this.uVa(i,j,k,l,m,c);this.SWa(c,m,i,j,k,l)}}}},uVa:function(b,c,i,j,k,l){if(!(k.distance<=0)){var m=y,m=k.orBranch?sc.q.T.ee(k.orBranch.left[0].uid)||sc.q.T.ee(k.orBranch.right[0].uid)?h:y:sc.q.T.ee(k.uid)?h:y;this.uaa(k.direction,i,j);i=this.Arb(a);j=ig.i.context;k=k.distance;if(i==sc.yn.xL){d.x=l*8;d.y=m?276:272;this.vVa(a.x>0?b+3:b-2-(8-(8-k)),c,k)}else{if(i==sc.yn.lW){d.x=l*8;d.y=m?276:272;j.save();j.translate((b+(a.y>0?1:0))*
ig.i.scale,(c+(a.y>0?3:-2))*ig.i.scale);j.rotate(a.y>0?f:-f);this.vVa(0,0,k)}else{d.x=l*8;d.y=m?288:280;j.save();j.translate(b*ig.i.scale,c*ig.i.scale);j.scale(a.x<0?-1:1,a.y<0?-1:1);this.s.nb(a.x<0?1:2,a.y<0?1:2,d.x,d.y,k,k)}j.restore()}}},vVa:function(a,b,c){if(c<=8)this.s.nb(a,b,d.x,d.y,c,1);else for(var f=Math.ceil(c/8),i=8;f--;){c<8&&(i=c);this.s.nb(a,b,d.x,d.y,i,1);a=a+8;c=Math.max(0,c-8)}},wVa:function(a,b,c,d,f,i,j){var k=sc.q.T,l=k.ee(i.left[0].uid),i=k.ee(i.right[0].uid),m=l||i;if(c.x<0||
c.y<0)if(i){l=h;i=y}else if(l){i=h;l=y}var n=y;i&&!l&&(n=h);var o=f;if(c.x<0||c.y<0)o=!o;if(f)if(j.children[0].orBranch){l=k.ee(j.children[0].orBranch.left[0].uid);i=k.ee(j.children[0].orBranch.right[0].uid);m=l||i}else m=k.ee(j.children[0].uid);c.x!=0?this.s.nb(a-(c.x<0?1:2),b-3,d*8+(m?4:0),296,4,7,o,n):c.y!=0&&this.s.nb(a-3,b-(c.y<0?1:2),48,256+(d*8+(m?4:0)),7,4,n,o)},uaa:function(b,c,d){a.x=c;a.y=d;switch(sc.fq[b]){case sc.fq.CW_45:Vec2.rotate(a,-i);a.x=Math.round(a.x);a.y=Math.round(a.y);break;
case sc.fq.CCW_45:Vec2.rotate(a,i);a.x=Math.round(a.x);a.y=Math.round(a.y);break;case sc.fq.CW_90:Vec2.w_(a);break;case sc.fq.CCW_90:Vec2.hz(a);break;case sc.fq.CW_135:Vec2.rotate(a,-j);a.x=Math.round(a.x);a.y=Math.round(a.y);break;case sc.fq.CCW_135:Vec2.rotate(a,j);a.x=Math.round(a.x);a.y=Math.round(a.y)}return a},Arb:function(a){if(a.x==0&&a.y==0){ig.error("Can't get cardinal direction when x and y are zero! Direction: [x: %i, y: %i]",a.x,a.y);return-1}if(a.x>=0){if(a.y<0&&a.x==0||a.y>0&&a.x==
0)return sc.yn.lW;if(a.y==0&&a.x>0)return sc.yn.xL;if(a.y<0&&a.x>0||a.y>0&&a.x>0)return sc.yn.QL}else{if(a.y==0&&a.x<0)return sc.yn.xL;if(a.y<0&&a.x<0||a.y>0&&a.x<0)return sc.yn.QL}return"If this return, you broke something horribly Bro."},tt:function(a){for(var b in a)return y;return h}});var t={"0":{fia:176,gia:368,Vc:92,sd:92,x:1,y:1},1:{fia:272,gia:368,Vc:120,sd:149,x:11,y:-11,Zga:Math.PI/2},2:{fia:272,gia:368,Vc:120,sd:149,x:11,y:-11,Zga:-(Math.PI/2)},3:{fia:272,gia:368,Vc:120,sd:149,x:0,y:0},
4:{fia:272,gia:368,Vc:120,sd:149,x:0,y:0,Zga:Math.PI}};sc.Rz.A$=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),buffer:q,element:0,HIa:y,Ud:q,ieb:q,Xb:q,Le:0,lF:0,n2:y,f:function(a,b,c,d,f,i){this.parent();this.F(c.width,c.height);this.Eb(c.width/2,c.height/2);this.H(ig.k.Ia,ig.k.vb);this.buffer=c;this.element=d||0;this.ieb=f||q;this.Xb=i||q;this.a.R={DEFAULT:{state:{offsetX:a,offsetY:b},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:a+(a?a>0?15:-15:0),offsetY:b+(b?b>0?15:-15:
0)},time:0.2,p:KEY_SPLINES.LINEAR}};this.j("HIDDEN",h)},Da:function(a){this.buffer&&a.na(this.buffer,0,0,0,0);if(this.Le>0){this.Le=this.Le-ig.i.ja;if(this.Le<=0){this.Le=0;this.Xb&&this.Xb(this.element)}else if(this.Le<=1&&!ig.ma.get(sc.fja+this.element)&&!this.n2){ig.ma.set("menu.circuit.start."+this.element,h);this.ieb(this.element);this.n2=h}var b=(this.Le/2).Rb(0,1);this.lF=this.Le>1?2-KEY_SPLINES.LINEAR.get(b*2):KEY_SPLINES.LINEAR.get(b*2);b=t[this.element];b.Zga&&a.ks().Eb(this.buffer.width/
2,this.buffer.height/2).L7(b.Zga);a.na(this.s,b.x,b.y,b.fia,b.gia,b.Vc,b.sd).ge(this.lF);b.Zga&&a.Xs()}},show:function(){this.j("DEFAULT",y,y,function(){if(sc.q.T.ki(this.element+8)&&!ig.ma.get(sc.fja+this.element)){ig.La.Md(2);this.Le=2}}.bind(this),0.1)}});var p=[{x:47,y:47}],r=[{x:52,y:47},{x:75,y:70},{x:98,y:47}],u=[{x:52,y:81},{x:75,y:58},{x:98,y:81}],w=[{x:47,y:52},{x:70,y:75},{x:47,y:98}],z=[{x:81,y:52},{x:58,y:75},{x:81,y:98}];sc.Rz.t9=ig.vn.extend({s:new ig.ia("media/gui/circuit.png"),rotation:0,
hk:y,Q6:Vec2.vc(0,0),Mb:[],element:0,ac:q,cB:y,f:function(a,b,c,d){this.parent();this.F(c.width,c.height);this.H(ig.k.Ia,ig.k.vb);this.element=d;this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{offsetX:a,offsetY:b},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,offsetX:a+(a?a>0?15:-15:0),offsetY:b+(b?b>0?15:-15:0)},time:0.2,p:KEY_SPLINES.LINEAR}};switch(this.element){case sc.ha.NEUTRAL:this.Mb=p;break;case sc.ha.HEAT:this.Mb=r;this.rotation=f;this.Q6.y=-c.width||0;break;case sc.ha.COLD:this.Mb=
u;this.rotation=-f;this.Q6.x=-c.height||0;break;case sc.ha.SHOCK:this.Mb=w;break;case sc.ha.WAVE:this.Mb=z;this.rotation=-Math.PI;this.Q6.y=-c.height||0;this.Q6.x=-c.width||0}this.j("HIDDEN",h)},cc:function(){if(this.cB){this.ac&&this.ac.play();sc.e.C7(this.element)}},Da:function(a){if(sc.e.Rs!=sc.Rm.R1&&(!ig.La.zh()&&this.cB)&&this.focus)if(this.element!=sc.ha.NEUTRAL){a.ks().L7(this.rotation);a.na(this.s,-3+this.Q6.x,2+this.Q6.y,192,160,122,145);a.Xs()}else a.na(this.s,-3,-3,320,168,99,99)},PBa:function(){return!ig.La.zh()||
this.cB},JG:function(){if(!this.cB||ig.input.qb==ig.Yb.Wc)return y;for(var a=Math.floor(this.a.Yf.x),b=Math.floor(this.a.Yf.y),c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln()),f=this.Mb.length;f--;)if(Math.abs(c-(this.Mb[f].x+a))+Math.abs(d-(this.Mb[f].y+b))<=45)return h;return y}})});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-effect-display").O("impact.feature.gui.gui").K(function(){sc.dQa=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT_LARGE:{state:{Xa:1.5,Va:1.5},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_LARGE:{state:{Xa:1.5,Va:1.5,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},lbb:q,td:q,n:0,display:q,fc:q,c0a:y,delay:0,Tv:y,n5:25,f:function(a){this.parent();this.F(128,
128);this.Eb(64,64);this.a.jB=h;if(this.Tv=a)this.n5=48;this.fc=new ig.da;this.fc.a.jB=h;this.fc.a.clip=h;this.fc.F(128,128);this.fc.l(0,0);this.m(this.fc)},show:function(a,b,c){this.lbb=a;this.td=a.td;this.delay=c||0;a=a.a;b=this.a;this.l(~~(a.g.x+a.size.x/2-b.size.x/2)+1,~~(a.g.y+a.size.y/2-b.size.y/2)+1);this.n=0.5+this.delay;this.display=new sc.aka("misc.menu-effect-large",h,q,this.HGb.bind(this),h);this.fc.m(this.display)},hide:function(){this.display.remove(h);this.j("HIDDEN",h,h)},update:function(){if(this.n>
0){this.n=this.n-ig.i.Sa;if(this.n<=0)this.n=0}if(this.n<=0&&this.c0a){this.display.remove(h);this.j("HIDDEN",h,h)}},Da:function(a){var b=this.a;a.na(this.s,~~(b.size.x/2-this.n5/2),~~(b.size.y/2-this.n5/2),this.Tv?512:487,(this.Tv?280:352)+this.n5*this.lbb.element,this.n5,this.n5).ge(this.n>0.5?0:this.n/0.5).yi("lighter")},HGb:function(a){if(a.cj){a.l(this.fc.a.size.x/2-a.a.size.x/2-1,this.fc.a.size.y/2-a.a.size.y/2);this.delay?a.C8a("combat","chargeLevel1Loop",{callback:this,offset:{x:0,y:-16},
duration:this.delay}):a.C8a("combat","chargeLevel1",{callback:this,offset:{x:0,y:-16}})}},Aj:function(a){if(a.state==ig.ev.mC)this.c0a=h}})});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-detail").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.circuit.circuit-misc","game.feature.menu.gui.circuit.circuit-detail-elements","game.feature.menu.gui.circuit.circuit-overview","game.feature.menu.gui.circuit.circuit-effect-display").K(function(){function a(a,b,c){if(b<=1)return y;for(var c=p[c].M7,d=c.$da,f=d.length;f--;)if(a==d[f]&&!sc.q.T.wq(c.rb[b-2]))return c.rb[b-2];return 0}
function b(a,b,i,j,k,l,m,n,o,t,p,F){var B=i&&sc.q.T.ee(i.uid),w=q,X=y;if(!t){v.x=32;v.y=0;x.x=k;x.y=l;A.x=8;A.y=8;z.x=0;z.y=0;r.x=-m;r.y=-n;d(r,t,B,h,o);v.x=p>=0?v.x+Math.max(0,F[p]-1)*8:v.x+Math.max(0,i.level-1)*8;a.na(b,x.x,x.y,v.x,v.y,A.x,A.y)}if(j&&j.length!=0){r.x=m;r.y=n;for(i=0;i<j.length;i++){w=j[i];X=w.orBranch?sc.q.T.ee(w.orBranch.left[0].uid)||sc.q.T.ee(w.orBranch.right[0].uid)?h:y:sc.q.T.ee(w.uid)?h:y;v.x=32;v.y=0;x.x=k;x.y=l;A.x=8;A.y=8;z.x=0;z.y=0;if(!t){r.x=m;r.y=n;f(w.direction,r.x,
r.y)}d(r,t,B,X,o);v.x=p>=0?p+1>=3?w.orBranch?v.x+Math.max(0,w.orBranch.levels[0]-1)*8:v.x+Math.max(0,w.level-1)*8:v.x+Math.max(0,F[p+1]-1)*8:w.orBranch?v.x+Math.max(0,w.orBranch.levels[0]-1)*8:v.x+Math.max(0,w.level-1)*8;a.na(b,x.x,x.y,v.x,v.y,A.x,A.y);if(t){Vec2.assign(u,r);c(a,b,w,o,x.x+z.x,x.y+z.y,r.x,r.y,1,h);Vec2.assign(r,u);f("CW_90",r.x,r.y)}}}}function c(a,b,c,d,i,k,l,m,n,o,t){var p=0,p=t?n:(n!=g?n:c.distance)*8;if(!(p<=0)){r.x=l;r.y=m;var x=c.orBranch?h:y,t=y,t=x?sc.q.T.ee(c.orBranch.left[0].uid)||
sc.q.T.ee(c.orBranch.right[0].uid)?h:y:sc.q.T.ee(c.uid)?h:y,n=0,n=x?c.orBranch.levels[0]:c.level||0,n=Math.max(0,n-1)*16;o&&f(c.direction,l,m);switch(j(r)){case sc.yn.xL:if(p<=16)a.na(b,i,k,(t?80+d*48:32)+n,80,p,8);else{c=Math.ceil(p/16);for(l=16;c--;){p<16&&(l=p);a.na(b,i,k,(t?80+d*48:32)+n,80,l,8);i=i+16;p=Math.max(0,p-16)}}break;case sc.yn.lW:if(p<=16)a.na(b,i,k,t?177+d*8:169,312+n,8,p);else{c=Math.ceil(p/16);for(l=16;c--;){p<16&&(l=p);a.na(b,i,k,t?177+d*8:169,312+n,8,l);k=k+16;p=Math.max(0,p-
16)}}break;case sc.yn.QL:c=t;l=r.x;m=r.y;o=y;if(l>0&&m<0||l<0&&m>0){o=h;k=k+(p-16+1)}else k=k+1;r.x=l;r.y=m;l=Math.ceil(p/16);for(m=16;l--;){p<16&&(m=p);a.na(b,i,k-3,(c?80+d*48:32)+n,88,m,24,o);i=i+16;p=Math.max(0,p-16);k=k+(o?-(p<16?p:16):16)}}}}function d(a,b,c,d,f){if(b||c){v.x=d?80:104;v.x=v.x+f*48}else v.x=32;switch(i(a)){case sc.es.fv:v.y=0;A.y=8;x.x=x.x-3;x.y=x.y-(b?11:19);z.y=-8;break;case sc.es.vp:v.y=8;A.y=8;x.x=x.x+(b?5:13);x.y=x.y-3;z.x=8;break;case sc.es.eA:v.y=16;A.y=8;x.x=x.x-3;x.y=
x.y+(b?5:13);z.y=z.y+8;break;case sc.es.zp:v.y=24;A.y=8;x.x=x.x-(b?11:19);x.y=x.y-3;z.x=-8;break;case sc.es.oxa:v.y=32;A.y=12;x.x=25;x.y=4;break;case sc.es.kTa:v.y=44;A.y=12;x.x=25;x.y=25;break;case sc.es.gya:v.y=56;A.y=12;x.x=9;x.y=25;break;case sc.es.pxa:v.y=68;A.y=12;x.x=9;x.y=5}}function f(a,b,c){r.x=b;r.y=c;switch(sc.fq[a]){case sc.fq.CW_45:Vec2.rotate(r,-m);r.x=Math.round(r.x);r.y=Math.round(r.y);break;case sc.fq.CCW_45:Vec2.rotate(r,m);r.x=Math.round(r.x);r.y=Math.round(r.y);break;case sc.fq.CW_90:Vec2.w_(r);
break;case sc.fq.CCW_90:Vec2.hz(r);break;case sc.fq.CW_135:Vec2.rotate(r,-n);r.x=Math.round(r.x);r.y=Math.round(r.y);break;case sc.fq.CCW_135:Vec2.rotate(r,n);r.x=Math.round(r.x);r.y=Math.round(r.y)}}function i(a){if(a.x>=0){if(a.y<0&&a.x==0)return sc.es.fv;if(a.y>0&&a.x==0)return sc.es.eA;if(a.y==0&&a.x>0)return sc.es.vp;if(a.y<0&&a.x>0)return sc.es.oxa;if(a.y>0&&a.x>0)return sc.es.kTa}else{if(a.y==0&&a.x<0)return sc.es.zp;if(a.y<0&&a.x<0)return sc.es.pxa;if(a.y>0&&a.x<0)return sc.es.gya}return q}
function j(a){if(a.x>=0){if(a.y<0&&a.x==0||a.y>0&&a.x==0)return sc.yn.lW;if(a.y==0&&a.x>0)return sc.yn.xL;if(a.y<0&&a.x>0||a.y>0&&a.x>0)return sc.yn.QL}else{if(a.y==0&&a.x<0)return sc.yn.xL;if(a.y<0&&a.x<0||a.y>0&&a.x<0)return sc.yn.QL}return"If this return, you broke something horribly Bro."}function k(a){for(var b in a)return y;return h}var l=Math.PI/2,m=Math.PI/4,n=l+m,o=Math.floor(20),t=!window.Ri||y,p=[{element:sc.ha.NEUTRAL,VB:{x:0,y:-1},Ce:{x:375,y:375},offset:{x:1095,y:1095},size:{x:751,y:751},
M7:{$da:[7,8,20,21,33,34,46,47],rb:[225,225]}},{element:sc.ha.HEAT,rotation:l,VB:{x:1,y:0},Ce:{x:519,y:199},offset:{x:951,y:1990},size:{x:1039,y:951},M7:{$da:[64,63,89,97,98,118,119,128,127,105,73,72],rb:[230,410]}},{element:sc.ha.COLD,rotation:-l,VB:{x:-1,y:0},Ce:{x:519,y:751},offset:{x:951,y:0},size:{x:1039,y:951},M7:{$da:[176,205,206,214,215,151,150,160,159,184,185,192],rb:[230,410]}},{rotation:0,element:sc.ha.SHOCK,VB:{x:0,y:-1},Ce:{x:199,y:519},offset:{x:1990,y:951},size:{x:951,y:1039},M7:{$da:[7,
8,20,21,33,34,46,47,246,247,279,301,302],rb:[230,410]}},{element:sc.ha.WAVE,rotation:Math.PI,VB:{x:0,y:1},Ce:{x:751,y:519},offset:{x:0,y:951},size:{x:951,y:1039},M7:{$da:[7,8,20,21,33,34,46,47,333,334,366,388,389],rb:[230,410]}}],r=Vec2.vc(0,0),u=Vec2.vc(0,0),w=Vec2.vc(0,0),z=Vec2.vc(0,0),v=Vec2.vc(0,0),x=Vec2.vc(0,0),A=Vec2.vc(0,0),F={225:0,230:40,231:80,410:80},B=Vec2.vc(0,0);sc.Kfb=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,
Xa:0.5,Va:0.5},time:0.2,p:KEY_SPLINES.LINEAR}},Wq:[],cursor:q,pA:Vec2.vc(0,0),aM:0,g2:[],pj:0,Pl:y,Ci:[],sW:y,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(0,192,64,64,ig.nf.Eg.eF);this.a.BU(h);this.cursor=new sc.Lfb;this.m(this.cursor);this.j("HIDDEN",h)},n$a:function(a,b,c,d){var f=q;if(ig.input.qb==ig.Yb.Wc){f=this.Ci[a];this.fWa(f,a);sc.e.jg.x=f.x;sc.e.jg.y=f.y;this.ID(a);this.cursor.moveTo(sc.e.jg.x,
sc.e.jg.y,b!=-1,c);sc.e.bf.x=Math.floor(-f.x+ig.i.width/2);sc.e.bf.y=Math.floor(-f.y+ig.i.height/2)}else{f=this.g2[a];sc.e.bf.x=f.x;sc.e.bf.y=f.y}this.Po(a);this.Hl(sc.e.bf.x,sc.e.bf.y,c,KEY_SPLINES.EASE,d)},Po:function(a){var a=p[a],b=-sc.e.bf.x,c=Math.floor(162);sc.e.bf.x=-b.Rb(a.offset.x-c,a.offset.x+(a.size.x-ig.i.width)+c);b=-sc.e.bf.y;c=Math.floor(42);sc.e.bf.y=-b.Rb(a.offset.y-c,a.offset.y+(a.size.y-ig.i.height)+c)},ID:function(a){var a=p[a],b=sc.e.jg.x;sc.e.jg.x=b.Rb(a.offset.x-32+16-120,
a.offset.x+(a.size.x-16)+32+120);var b=sc.e.jg.y,c=sc.e.jg.x+sc.e.bf.x;sc.e.jg.y=b.Rb(a.offset.y,a.offset.y+a.size.y-(c<181?Math.min(25,181-c):0))},BNb:function(a,b){if(a>=0){this.sqb(a);if(b!=-1){var c=this.g2[b];c.x=sc.e.bf.x;c.y=sc.e.bf.y;if(ig.input.qb==ig.Yb.Wc){c=this.Ci[b];c.x=sc.e.jg.x;c.y=sc.e.jg.y}this.Wq[b].ui(h);this.Wq[a].Pf(y);this.n$a(a,b,0.5,function(){this.Wq[sc.e.Aga].j("HIDDEN",h)}.bind(this));ig.La.Md(0.5)}else{this.Wq[a].Pf(h);this.n$a(a,b);this.j("DEFAULT")}this.Cqb()}else{if(b!=
-1){c=this.g2[b];c.x=sc.e.bf.x;c.y=sc.e.bf.y;if(ig.input.qb==ig.Yb.Wc){c=this.Ci[b];c.x=sc.e.Gqa.x;c.y=sc.e.Gqa.y}}this.j("HIDDEN")}},Gd:function(){for(var a=this.Wq.length;a--;)this.Wq[a]&&this.Wq[a].$A();this.j("HIDDEN")},Oc:function(){sc.P.Wa(sc.e,this);this.cursor.Oc();for(var a=this.Wq.length;a--;)this.Wq[a]&&this.Wq[a].Oc()},Ic:function(){this.cursor.Ic();sc.P.Hc(sc.e,this);for(var a=this.Wq.length;a--;)this.Wq[a]&&this.Wq[a].Ic()},update:function(){sc.e.YMa=y;if(!ig.La.zh()&&!(sc.e.Rs==sc.Rm.B1||
sc.e.Rs==sc.Rm.LP||sc.e.Lj>=0&&!this.Wq[sc.e.Lj].ua.wc())){var a=sc.e.Lj;if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb;var b=q;if(ig.input.qb==ig.Yb.Wc){b=this.Ci[a];this.fWa(b,a);sc.e.jg.x=b.x;sc.e.jg.y=b.y;this.ID(a);sc.e.bf.x=Math.floor(-b.x+ig.i.width/2);sc.e.bf.y=Math.floor(-b.y+ig.i.height/2);this.Po(a);this.Hl(sc.e.bf.x,sc.e.bf.y,0.3,KEY_SPLINES.EASE);this.cursor.moveTo(sc.e.jg.x,sc.e.jg.y)}else if(ig.input.qb==ig.Yb.xm){b=this.Ci[a];if(sc.e.Gm){b.x=sc.e.mua.x;
b.y=sc.e.mua.y}else{b.x=sc.e.jg.x;b.y=sc.e.jg.y}sc.e.K8(sc.e.Gm)}sc.e.eva()}a=y;if(!this.a.uo){if(sc.ba.D6a(0.5)){sc.e.bf.x=Math.floor(sc.e.bf.x+250*ig.i.Sa);this.Po(sc.e.Lj);this.a.scroll.x=sc.e.bf.x;a=h}else if(sc.ba.E6a(0.5)){sc.e.bf.x=Math.floor(sc.e.bf.x-250*ig.i.Sa);this.Po(sc.e.Lj);this.a.scroll.x=sc.e.bf.x;a=h}if(sc.ba.F6a(0.5)){sc.e.bf.y=Math.floor(sc.e.bf.y+250*ig.i.Sa);this.Po(sc.e.Lj);this.a.scroll.y=sc.e.bf.y;a=h}else if(sc.ba.C6a(0.5)){sc.e.bf.y=Math.floor(sc.e.bf.y-250*ig.i.Sa);this.Po(sc.e.Lj);
this.a.scroll.y=sc.e.bf.y;a=h}}if(!a&&ig.input.qb==ig.Yb.Wc){var c=b=0,d=0,a=y;if((d=sc.ba.Cf(ig.Nd.wn))<-0.5){b=(-150+d*100)*ig.i.Sa;a=h}else if((d=sc.ba.Cf(ig.Nd.wn))>0.5){b=(150+d*100)*ig.i.Sa;a=h}if((d=sc.ba.Cf(ig.Nd.xn))<-0.5){c=(-150+d*100)*ig.i.Sa;a=h}else if((d=sc.ba.Cf(ig.Nd.xn))>0.5){c=(150+d*100)*ig.i.Sa;a=h}if(a){sc.e.YMa=h;sc.e.jg.x=b>=0?Math.floor(sc.e.jg.x+b):Math.ceil(sc.e.jg.x+b);sc.e.jg.y=c>=0?Math.floor(sc.e.jg.y+c):Math.ceil(sc.e.jg.y+c);this.ID(sc.e.Lj);this.cursor.moveTo(sc.e.jg.x,
sc.e.jg.y);B.x=sc.e.bf.x;B.y=sc.e.bf.y;sc.e.bf.x=Math.floor(-sc.e.jg.x+ig.i.width/2);sc.e.bf.y=Math.floor(-sc.e.jg.y+ig.i.height/2);this.Po(sc.e.Lj)}a=y;if(Math.abs(sc.e.bf.x-B.x)>=18||Math.abs(sc.e.bf.y-B.y)>=18)a=h;if(this.a.uo){this.a.uo.x=sc.e.bf.x;this.a.uo.y=sc.e.bf.y}else if(a)this.Hl(sc.e.bf.x,sc.e.bf.y,0.3,KEY_SPLINES.LINEAR);else{this.a.scroll.x=sc.e.bf.x;this.a.scroll.y=sc.e.bf.y}}}},Da:function(a){var b=this.a;b.Mv()?a.Qk(this.constructor.oj,-256,-256,-b.scroll.x,-b.scroll.y,1216,704):
a.Qk(this.constructor.oj,0,0,-b.scroll.x,-b.scroll.y,b.size.x,b.size.y)},$y:function(a,b){if(!(ig.La.zh()||this.Wq[sc.e.Gm]&&!this.Wq[sc.e.Lj].ua.wc()))if(sc.e.Lj==-1||sc.e.Rs==sc.Rm.B1)if(a&&sc.ba.nda()){sc.e.Eca();sc.e.K8(sc.e.Gm);this.sW=h}else sc.e.Q_=y;else if(!b){var c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln());if(sc.ba.nda()||this.sW){this.sW=y;Vec2.Oa(this.pA,c,d);sc.e.Q_=h;this.aM=0}else if(sc.ba.fFa()){if(sc.e.Q_){this.aM=this.aM+ig.i.Sa;if(!sc.e.S_)sc.e.S_=(Math.abs(c-this.pA.x)>=
1||Math.abs(d-this.pA.y)>=1)&&this.aM>=0.1;sc.e.bf.x=sc.e.bf.x+(c-this.pA.x);sc.e.bf.y=sc.e.bf.y+(d-this.pA.y);this.Po(sc.e.Lj);this.a.scroll.x=sc.e.bf.x;this.a.scroll.y=sc.e.bf.y;Vec2.Oa(this.pA,c,d)}}else sc.e.Q_=y}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.bya){this.Po(sc.e.Lj);this.Hl(sc.e.bf.x,sc.e.bf.y,0.2)}else if(b==sc.fa.tka){if(ig.input.qb==ig.Yb.Wc){sc.e.bf.x=Math.floor(-sc.e.jg.x+ig.i.width/2);sc.e.bf.y=Math.floor(-sc.e.jg.y+ig.i.height/2);this.Po(sc.e.Lj);this.Hl(sc.e.bf.x,sc.e.bf.y,
0.2,KEY_SPLINES.LINEAR)}}else if(b==sc.fa.PPa){this.Po(sc.e.Lj);this.Hl(sc.e.bf.x,sc.e.bf.y,c?c.time||0.2:0.2,g,c&&c.Gb)}},fWa:function(a,b){if(a.x<=-1E4||a.y<=-1E4){a.x=-this.g2[b].x+ig.i.width/2;a.y=-this.g2[b].y+ig.i.height/2}},Cqb:function(){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}},sqb:function(a){if(!this.Wq[a]){this.Wq[a]=new sc.Ox(a);this.Wq[a].l(p[a].offset.x,p[a].offset.y);var b=Vec2.vc(0,0);b.x=ig.i.width/2-p[a].Ce.x-p[a].offset.x;b.y=ig.i.height/2-p[a].Ce.y-
p[a].offset.y;this.g2[a]=b;this.Ci[a]=Vec2.vc(-1E4,-1E4);this.DG(this.Wq[a],0)}}});sc.Ox=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},eP:q,ua:q,qe:[],rE:0,bG:[],f:function(a){this.parent();this.F(p[a].size.x,p[a].size.y);a==g&&e(Error("Element muss be defined"));this.eP=p[a];this.ua=new sc.Efb;sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.e,this);this.Vqb();this.j("DEFAULT",h)},Da:function(a){window.Ri&&
t&&a.nc("white",0,0,this.a.size.x,this.a.size.y).ge(0.05)},Oc:function(){sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.q.T,this);sc.P.Hc(sc.e,this)},Pf:function(a,b){sc.e.Z.hh(this.ua);sc.e.rl(this.zQ.bind(this));ig.La.Md(0.2);this.j("DEFAULT",a,y,b||q)},ui:function(a){for(var b=this.bG.length;b--;){this.bG[b].hide();this.yH(this.bG[b])}this.bG.length=0;sc.e.Dk();sc.e.Z.sl(this.ua);a||this.j("HIDDEN")},$A:function(){sc.e.Z.sl(this.ua)},Ab:function(a,b,c){if(a==sc.q.T){if(b==sc.dd.PL&&
c>=this.rE&&c<=this.rE+this.qe.length-1)for(a=this.qe.length;a--;)this.qe[a].Ldb()}else a==sc.e&&b==sc.fa.eTa&&this.vAa(c.X,c.UDb,c.delay)},vAa:function(a,b,c){if(a&&this.eP.element==a.element){var d=new sc.dQa;this.m(d);d.show(a,b,c);this.bG.push(d)}},zQ:function(){this.ui();sc.e.C7(-1)},Vqb:function(){var a=sc.xo.R2a(this.eP.element);w.x=this.eP.Ce.x;w.y=this.eP.Ce.y;var b=this.eP.VB.x,c=this.eP.VB.y;r.x=b;r.y=c;var d=q;this.rE=a[0].uid;d=new sc.Ox.OTa(w.x,w.y,b,c,this.eP.element,a);this.m(d);for(var i=
0;i<a.length;i++){d=a[i];k(d)||this.lVa(d,this.eP.element,w.x,w.y,b,c,q);f("CW_90",b,c);b=r.x;c=r.y}},lVa:function(a,b,c,d,i,j,l){var m=y,n=q,o=q;if(a.orBranch){var t=a.orBranch;f(a.direction,i,j);m=Math.abs(r.x)==1&&Math.abs(r.y)==1;c=c+(a.distance+(m?2:3))*8*r.x;d=d+(a.distance+(m?2:3))*8*r.y;u.x=r.x;u.y=r.y;f(t.direction,r.x,r.y);(m=Math.abs(r.x)==1&&Math.abs(r.y)==1)&&ig.error("orBranch can't be rendered with a slope direction.");n=new sc.Ox.kSa(c,d,r.x,r.y,t,a,b,y);this.m(n);for(var c=c+(m?3:
6)*8*r.x,d=d+(m?3:6)*8*r.y,i=n=q,j=l,p=0;p<3;p++){if(p+1>=3)n=i=a.children[0];else{n=t.left[p+1];i=t.right[p+1]}if(r.x!=0){n=new sc.Ox.U9(c,d+(r.x>0?-24:24),r.x,r.y,t.left[p],b,n,this.ua,this.rE,j,p,t.levels,h);if(j)j.Yy=n;j=n;this.m(n);this.qe[t.left[p].uid-this.rE]=n;n=new sc.Ox.U9(c,d+(r.x>0?24:-24),r.x,r.y,t.right[p],b,i,this.ua,this.rE,l,p,t.levels,y)}else{n=new sc.Ox.U9(c+(r.y>0?24:-24),d,r.x,r.y,t.left[p],b,n,this.ua,this.rE,j,p,t.levels,h);if(j)j.Yy=n;j=n;this.m(n);this.qe[t.left[p].uid-this.rE]=
n;n=new sc.Ox.U9(c+(r.y>0?-24:24),d,r.x,r.y,t.right[p],b,i,this.ua,this.rE,l,p,t.levels,y)}if(l)l.Yy=n;l=n;this.m(n);j.C6=l;l.C6=j;this.qe[t.right[p].uid-this.rE]=n;c=c+(m?3:5)*8*r.x;d=d+(m?3:5)*8*r.y;o=n}c=c-(m?1:2)*8*r.x;d=d-(m?1:2)*8*r.y;n=new sc.Ox.kSa(c,d,r.x,r.y,t,a,b,h);this.m(n);c=c+8*r.x;d=d+8*r.y}else{f(a.direction,i,j);m=Math.abs(r.x)==1&&Math.abs(r.y)==1;c=c+(a.distance+(m?3:5))*8*r.x;d=d+(a.distance+(m?3:5))*8*r.y;n=new sc.Ox.U9(c,d,r.x,r.y,a,b,q,this.ua,this.rE,l);this.m(n);o=this.qe[a.uid-
this.rE]=n}a=a.children;if(a.length!=0){m=q;i=r.x;j=r.y;for(t=0;t<a.length;t++){m=a[t];if(!k(m)){d=this.jza(m,b,c,d,i,j);this.lVa(m,b,c,d,i,j,o)}}}},jza:function(a,b,c,d,i,j){if(a.distance<=0)return d;f(a.direction,i,j);r.x==1&&(r.y==-1&&a.orBranch)&&(d=d-1);a=new sc.Ox.ujb(c,d,r.x,r.y,a,b);this.m(a);return d}});sc.Ox.OTa=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),element:0,children:q,RA:0,SA:0,AM:0,f:function(a,b,c,d,f,i){this.parent();this.F(40,40);this.l(a-o,b-o);this.element=f;this.children=
i;this.RA=c;this.SA=d;this.AM=o-6},Da:function(a){window.Ri&&t&&a.nc("red",1,1,39,39).ge(0.2);a.na(this.s,this.AM,this.AM,56,0+this.element*16,13,13);b(a,this.s,q,this.children,o,o,this.RA,this.SA,this.element,h)}});sc.Ox.U9=ig.vn.extend({s:new ig.ia("media/gui/circuit.png"),Hr:new ig.ia("media/gui/circuit-icons.png"),Fq:q,element:0,td:q,CA:q,coords:{x:5,y:5,Vc:31,sd:31},RA:0,SA:0,AM:0,Gu:-1,hsa:q,cz:h,Vi:y,jma:0,ac:q,fo:q,baa:1,eM:q,MUa:q,f:function(b,c,d,f,i,j,k,l,m,n,t,p,r){this.parent();this.F(41,
41);this.l(b-o,c-o);this.Fq=n||q;this.element=j;this.td=i;this.RA=d;this.SA=f;this.AM=o-15;this.ac=sc.gd.submit;this.fo=sc.gd.Dv;this.eM=sc.q.T;this.Ldb();if(k){this.CA=[];this.CA.push(k);this.Gu=t;this.hsa=p;this.cz=r==g?h:r;this.jma=a(this.td.uid,this.hsa[this.Gu],this.element)}else this.jma=a(this.td.uid,this.td.level,this.element);if(this.jma>0)this.Vi=h;(this.MUa=l)&&l.jd(this,i.uid-m||0,0)},Ldb:function(){this.baa=1;if(!this.eM.ee(this.td.uid))this.baa=this.PUa(this.Fq,this.baa)},t2a:function(){return p[this.element].offset.x},
u2a:function(){return p[this.element].offset.y},lG:function(){return Math.floor(Vec2.HR(sc.e.jg.x-p[this.element].offset.x,sc.e.jg.y-p[this.element].offset.y,this.a.g.x+o,this.a.g.y+o))},Da:function(a){if(window.Ri){t&&a.nc(this.CA?"yellow":"green",1,1,39,39).ge(0.2);t&&a.nc(this.CA?"yellow":"green",5,5,31,31).ge(0.2)}a.na(this.s,this.AM,this.AM,0,sc.q.T.ee(this.td.uid)?32+this.element*32:0,31,31);if(this.baa>0){var c=sc.xo.Ky(this.td.uid).Y;a.na(this.Hr,8,8,c%10*24,Math.floor(c/10)*24,24,24).ge(this.baa)}b(a,
this.s,this.td,this.CA?this.CA:this.td.children,o,o,this.RA,this.SA,this.element,y,this.Gu,this.hsa);if(this.Vi){c=p[this.element].M7.rb[(this.CA?this.hsa[this.Gu]:this.td.level)-2];c=F[c];a.na(this.s,this.AM,this.AM,480,168+c,32,40)}},cc:function(){if(sc.e.S_)sc.e.S_=y;else{var a=y;if(this.WUa(this.Fq))this.fo&&this.fo.play();else{this.Fq&&(this.kla(this.Fq)||(a=h));if(ig.input.qb==ig.Yb.xm){var b=Math.floor(sc.ba.Ln());if(b<=21||b>=299)return}this.ac&&this.ac.play();sc.e.mvb(this,a)}}},$y:function(a,
b){ig.input.state("shift")||this.parent(a,b)},JG:function(){if(sc.e.Lj==-1||sc.e.Rs==sc.Rm.B1)return y;if(sc.e.Q_)return sc.e.Gm==this;if(!ig.La.zh()&&this.MUa.wc()){if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(sc.e.YMa){sc.e.K8(this);return y}if(a<=14){sc.e.X0a(this.a.g.x+20+p[this.element].offset.x,this.a.g.y+20+p[this.element].offset.y,this);return h}sc.e.K8(this);return y}var a=Math.floor(sc.ba.Kp()),b=Math.floor(sc.ba.Ln());if(b<=21||b>=299){sc.e.K8(this);return y}this.coords.x=5+this.a.Yf.x;
this.coords.y=5+this.a.Yf.y;(a=this.coords.x<=a&&this.coords.x+this.coords.Vc>a&&this.coords.y<=b&&this.coords.y+this.coords.sd>b)&&!ig.input.state("shift")?sc.e.X0a(this.a.g.x+20+p[this.element].offset.x,this.a.g.y+20+p[this.element].offset.y,this):sc.e.K8(this);return a}},pFa:function(a){a=a||Vec2.vc(0,0);a.x=this.a.g.x+20+p[this.element].offset.x;a.y=this.a.g.y+20+p[this.element].offset.y;return a},kla:function(a){if(a)if(a.CA)if(a.Gu==2){if(!sc.q.T.ee(a.td.uid)&&!sc.q.T.ee(a.td.uid-1))return y}else if(a.cz){if(!sc.q.T.ee(a.td.uid)&&
!sc.q.T.ee(a.td.uid+1))return y}else{if(!sc.q.T.ee(a.td.uid)&&!sc.q.T.ee(a.td.uid-1))return y}else if(!sc.q.T.ee(a.td.uid))return y;return h},WUa:function(a){return this.Vi?h:a?a.Vi?h:a.Fq?a.Fq.Vi?h:this.WUa(a.Fq):y:y},PUa:function(a,b){if(b<=0.2)return 0.2;if(a){if(a.CA)if(a.Gu==2){if(this.eM.ee(a.td.uid)||this.eM.ee(a.td.uid-1))return b}else if(a.cz){if(this.eM.ee(a.td.uid)||this.eM.ee(a.td.uid+1))return b}else{if(this.eM.ee(a.td.uid)||this.eM.ee(a.td.uid-1))return b}else if(this.eM.ee(a.td.uid))return b;
return this.PUa(a.Fq,(b*100-20)/100)}return b}});sc.Ox.kSa=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),Ufa:q,td:q,element:0,RA:0,SA:0,qDa:0,Lc:y,Kqa:0,ldb:0,ndb:0,mdb:-1,xOa:-1,yOa:-1,SFa:y,f:function(a,b,c,d,f,i,k,l){this.parent();this.l(a,b);this.element=k;this.Ufa=f;this.td=i;this.RA=c;this.SA=d;this.Lc=l!=g?l:y;r.x=c;r.y=d;this.Kqa=this.Lc?Math.max(0,i.children[0].level-1)*56:Math.max(0,f.levels[0]-1)*56;this.ldb=this.Ufa.left[0].uid;this.ndb=this.Ufa.right[0].uid;this.xOa=this.td?this.Ufa.left[2].uid:
-1;this.yOa=this.td?this.Ufa.right[2].uid:-1;this.SFa=this.td.children[0].orBranch?h:y;this.mdb=this.td?this.td.children[0].uid:-1;if(this.SFa){this.xOa=this.td?this.td.children[0].orBranch.left[0].uid:-1;this.yOa=this.td?this.td.children[0].orBranch.right[0].uid:-1;if(this.Lc)this.Kqa=Math.max(0,this.td.children[0].orBranch.levels[0]-1)*56}this.qDa=j(r);switch(this.qDa){case sc.yn.xL:this.F(32,56);this.l(a+(c>0?-3:-27),b-27);break;case sc.yn.lW:this.F(56,32);this.l(a-27,b+(d>0?-3:-27));break;case sc.yn.QL:ig.warn("This will lead to an error bro, we can't draw orBranches in slopes: "+
Vec2.print(c,d))}},Da:function(a){window.Ri&&t&&a.nc("yellow",0,0,this.a.size.x,this.a.size.y).ge(0.2);var b=sc.q.T,c=b.ee(this.ldb),d=b.ee(this.ndb),f=c||d;if(this.RA<0||this.SA<0)if(c&&d)c=d=h;else if(d){c=h;d=y}else if(c){d=h;c=y}var i=y;d&&!c&&(i=h);var j=this.Lc;if(this.RA<0||this.SA<0)j=!j;if(this.Lc)if(this.SFa){c=b.ee(this.xOa);d=b.ee(this.yOa);f=c||d}else f=b.ee(this.mdb);switch(this.qDa){case sc.yn.xL:a.na(this.s,0,i?-1:0,f?352+this.element*32:320,this.Kqa,32,56,j,i);break;case sc.yn.lW:a.na(this.s,
i?-1:0,0,this.Kqa,f?344+this.element*32:312,56,32,i,j)}c&&d&&a.na(this.s,this.a.size.x/2-16,this.a.size.y/2-16,480,320,32,32)}});sc.Ox.ujb=ig.da.extend({s:new ig.ia("media/gui/circuit.png"),goa:q,element:0,RA:0,SA:0,r8a:y,f:function(a,b,c,d,f,k){this.parent();this.element=k;this.goa=f;this.RA=c;this.SA=d;r.x=c;r.y=d;c=f.distance*8;d=j(r);k=d==sc.yn.QL;a=a+(k?r.x>0?13:c+11:r.x>0?21:c+19)*r.x;b=b+(k?r.y>0?r.x>0?12:11:c+(r.x>0?13:12):r.y>0?21:c+19)*r.y;r.x==0&&(a=a-3);r.y==0&&(b=b-3);var l=k=0;if(f.orBranch){if(j(r)==
sc.yn.QL){k=3;l=6;this.r8a=h}switch(i(r)){case sc.es.gya:a=a-3;break;case sc.es.oxa:b=b-2;break;case sc.es.pxa:a=a-3;b=b-3}}this.l(a,b);switch(d){case sc.yn.xL:this.F(c,8);break;case sc.yn.lW:this.F(8,c);break;case sc.yn.QL:this.F(c+k,c+l)}},Da:function(a){window.Ri&&t&&a.nc("blue",0,0,this.a.size.x,this.a.size.y).ge(0.2);this.r8a?c(a,this.s,this.goa,this.element,0,0,this.RA,this.SA,this.goa.distance*8+3,y,h):c(a,this.s,this.goa,this.element,0,0,this.RA,this.SA)}})});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-swap-branches").O("impact.feature.gui.base.basic-gui","game.feature.menu.gui.circuit.circuit-misc","game.feature.menu.gui.circuit.circuit-detail-elements").K(function(){var a=new ig.ka("media/sound/menu/circuit/circuit-upgrade-b-2.ogg",1);sc.fwa=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},SCALE:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.2,p:KEY_SPLINES.LINEAR}},ua:q,cursor:q,Pl:y,pj:0,
Ci:Vec2.vc(-1E4,-1E4),xza:y,bG:[],f:function(){this.parent();this.F(274,274);this.l(sc.options.Hi?147:103,23);this.a.Db.x=Math.floor(137);this.a.Db.y=Math.floor(137);var a=c.length,b=q,b=q;this.ua=new sc.R9;this.ua.CS=h;for(this.ua.$l=function(){ig.input.qb==ig.Yb.Wc&&(sc.ba.Au()&&sc.e.sE)&&sc.e.sE.cc()}.bind(this);a--;){b=c[a];if(sc.q.T.xG(b.element))if(sc.xo.Ky(b.xg).type!=sc.XP.xxa)ig.warn("Swap Skill UID is not first branch UID: "+b.xg+" [Panel will be skipped]");else{b=new sc.fwa.mfb(b.g.x-1,
b.g.y,b.xg,b.element);this.m(b);this.ua.jd(b)}}this.cursor=new sc.Jfb;this.m(this.cursor);this.j("HIDDEN",h)},update:function(){sc.e.S7=y;if(!ig.La.zh()&&this.ua.wc()){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb;var a=q;if(ig.input.qb==ig.Yb.Wc){a=this.Ci;this.AW(a);sc.e.Rh.x=a.x;sc.e.Rh.y=a.y;this.yC();sc.e.N9a();this.cursor.moveTo(sc.e.Rh.x,sc.e.Rh.y)}else if(ig.input.qb==ig.Yb.xm){this.Ci.x=sc.e.Rh.x;this.Ci.y=sc.e.Rh.y;this.cursor.Om()}sc.e.eva()}if(ig.input.qb==
ig.Yb.Wc){var b=a=0,c=0,j=y;if((c=sc.ba.Cf(ig.Nd.wn))<-0.5){a=(-100+c*100)*ig.i.Sa;j=h}else if((c=sc.ba.Cf(ig.Nd.wn))>0.5){a=(100+c*100)*ig.i.Sa;j=h}if((c=sc.ba.Cf(ig.Nd.xn))<-0.5){b=(-100+c*100)*ig.i.Sa;j=h}else if((c=sc.ba.Cf(ig.Nd.xn))>0.5){b=(100+c*100)*ig.i.Sa;j=h}if(j){sc.e.S7=h;sc.e.Rh.x=a>=0?Math.floor(sc.e.Rh.x+a):Math.ceil(sc.e.Rh.x+a);sc.e.Rh.y=b>=0?Math.floor(sc.e.Rh.y+b):Math.ceil(sc.e.Rh.y+b);this.yC();this.cursor.moveTo(sc.e.Rh.x,sc.e.Rh.y)}}}},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,
this)},Yd:function(){sc.e.Z.hh(this.ua);sc.e.rl(this.zQ.bind(this));sc.e.N9a();if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}this.urb();if(sc.e.mbb==sc.Rm.l9){this.j("SCALE",h);this.j("DEFAULT")}else this.j("DEFAULT",h)},Gd:function(){this.cursor.Om();sc.e.Z.sl(this.ua);this.ua.pva();sc.e.Dk();for(var a=this.bG.length;a--;){this.bG[a].hide();this.yH(this.bG[a])}this.bG.length=0;this.j("HIDDEN",h)},AW:function(a){if(a.x<=-1E4||a.y<=-1E4){a.x=Math.floor(this.a.size.x/2);
a.y=Math.floor(this.a.size.y/2)}},yC:function(){var a=sc.e.Rh.x;sc.e.Rh.x=a.Rb(0,Math.floor(this.a.size.x));a=sc.e.Rh.y;sc.e.Rh.y=a.Rb(0,this.a.size.y)},urb:function(){if(this.xza){var a=this.Ci;a.x=sc.e.Rh.x;a.y=sc.e.Rh.y;this.yC();this.cursor.moveTo(sc.e.Rh.x,sc.e.Rh.y)}else if(ig.input.qb==ig.Yb.Wc){this.xza=h;a=this.Ci;this.AW(a);sc.e.Rh.x=a.x;sc.e.Rh.y=a.y;this.yC();this.cursor.moveTo(sc.e.Rh.x,sc.e.Rh.y)}},zQ:function(){sc.e.V5a()},vAa:function(a){if(a){var b=new sc.dQa(h);this.m(b);b.show(a,
h,0,h);this.bG.push(b)}},Ab:function(a,b,c){a==sc.e&&(b==sc.fa.aya?this.Yd():b==sc.fa.uka?this.Gd():b==sc.fa.bW?this.ua.wc()&&this.cursor.L9a():b==sc.fa.vka?this.ua.wc()&&this.cursor.nu(sc.e.Rh.x,sc.e.Rh.y):b==sc.fa.wka?this.ua.wc()&&this.cursor.Om():b==sc.fa.cya?this.ua.wc()&&(this.cursor.focus||this.cursor.nu(sc.e.Rh.x,sc.e.Rh.y)):b==sc.fa.fTa&&this.vAa(c))}});var b=Math.floor(22.5);sc.fwa.mfb=ig.vn.extend({s:new ig.ia("media/gui/circuit.png"),ac:q,fo:q,xg:-1,element:-1,f:function(b,c,i,j){this.parent();
this.F(45,45);this.l(b,c);this.xg=i||-1;this.element=j||0;this.ac=a;this.fo=sc.gd.Dv},Da:function(){if(sc.e.Rs!=sc.Rm.R1)return y},cc:function(){if(ig.La.zh())return y;if(this.xg<0)ig.warn("skill UID is not valid: "+this.xg);else{for(var a=sc.xo.Ky(this.xg).type==sc.XP.xxa,b=y,c=0;c<6;c++)if(sc.q.T.ee(this.xg+c)){b=h;break}var j=-1;if(sc.q.T.ee(this.xg)){j=this.xg+1;a=y}else sc.q.T.ee(this.xg+1)?j=this.xg:b=y;if(b&&j>=0){this.ac&&this.ac.play();sc.q.T.Oua(j,a);if(window.Ri){console.Eda("%cSwitched Branch: ",
"color:#00CC00");console.Eda("%cNew BranchIndices: %c[%i, %i, %i]","color:#00CC00","",j,j+2,j+4);for(c=0;c<3;c++)ig.log("%c [%i]: %c"+sc.xo.Ky(j+c*2).getName(),"color:#00CC00",j+c*2,"");console.groupEnd();j=j+(a?1:-1);console.Eda("%cOld BranchIndices: %c[%i, %i, %i]","color:#00CC00","",j,j+2,j+4);for(c=0;c<3;c++)ig.log("%c [%i]: %c"+sc.xo.Ky(j+c*2).getName(),"color:#00CC00",j+c*2,"");console.groupEnd();console.groupEnd()}sc.e.rMb(this)}else this.fo&&this.fo.play()}},JG:function(){if(ig.La.zh()||sc.e.Rs!=
sc.Rm.R1)return y;if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(sc.e.S7){sc.e.BOa(this);return y}if(a<=16){sc.e.$0a(this.a.g.x+22,this.a.g.y+22,this);return h}sc.e.BOa(this)}else if(ig.input.qb==ig.Yb.xm){var a=Math.floor(this.a.Yf.x),c=Math.floor(this.a.Yf.y),i=Math.floor(sc.ba.Kp()),j=Math.floor(sc.ba.Ln());(a=Math.abs(i-(b+a))+Math.abs(j-(b+c))<=b)?sc.e.$0a(this.a.g.x+22,this.a.g.y+22,this):sc.e.BOa(this);return a}return y},lG:function(){return Math.floor(Vec2.HR(sc.e.Rh.x,sc.e.Rh.y,this.a.g.x+
Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))}});sc.lja=ig.da.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Xa:1,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/menu.png"),ua:q,Hp:q,IN:q,EK:q,Ee:q,uf:{left:[q,q,q],right:[q,q,q]},CQ:q,wj:Vec2.vc(-1,-1),f:function(a){this.parent(sc.rg.ds);this.H(ig.k.ra,ig.k.vb);this.l(5,0);this.F(150,209);this.Eb(0,104.5);this.a.jB=h;this.ua=a;this.IN=new sc.Bl(sc.rg.$ia);this.IN.a.R={DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:75},time:0.2,p:KEY_SPLINES.LINEAR}};this.IN.F(150,77);this.IN.j("HIDDEN",h);this.m(this.IN);this.IN.we={content:{title:"sc.gui.menu.help.circuit.titles.branch",description:"sc.gui.menu.help.circuit.description.branch"},offset:{x:0,y:-1},size:{x:150,y:77},index:{x:1,y:1}};this.EK=new sc.Bl(sc.rg.jW);this.EK.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:75},time:0.2,p:KEY_SPLINES.LINEAR}};this.EK.H(ig.k.hb,
ig.k.Cb);this.EK.F(150,77);this.EK.j("HIDDEN",h);this.m(this.EK);this.EK.we={content:{title:"sc.gui.menu.help.circuit.titles.branch",description:"sc.gui.menu.help.circuit.description.branch"},offset:{x:0,y:-1},size:{x:150,y:77},index:{x:1,y:0}};this.Ee=new ig.ec(this.s,576,224,23,20);this.Ee.H(ig.k.Ia,ig.k.vb);this.Ee.a.R={DOWN:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},DOWN_INACTIVE:{state:{},time:0.05,p:KEY_SPLINES.LINEAR},UP:{state:{Qb:Math.PI},time:0.1,p:KEY_SPLINES.LINEAR},UP_INACTIVE:{state:{Qb:Math.PI},
time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Xa:0,Va:0,Qb:-Math.PI/2},time:0.2,p:KEY_SPLINES.LINEAR}};this.Ee.j("HIDDEN",h);this.m(this.Ee);for(var a=2,b=0;b<3;b++){this.uf.left[b]=new sc.lja.ETa;this.uf.left[b].l(0,a);this.uf.right[b]=new sc.lja.ETa;this.uf.right[b].l(0,a);this.IN.m(this.uf.left[b]);this.EK.m(this.uf.right[b]);a=a+24}this.j("DEFAULT",h)},ih:function(a){this.Hp=sc.e.sE;if(!this.Hp||a){a="UP_INACTIVE";this.Ee.a.hi=="DOWN"&&(a="DOWN_INACTIVE");this.Ee.j(a,y,y,function(){for(var a=
0;a<3;a++){this.uf.left[a].ih(q,-1,y,0.05);this.uf.right[a].ih(q,-1,y,0.05)}this.Ee.offsetY=245}.bind(this),0.05)}else{this.Ee.a.WK=q;var a=this.Hp.xg,b=sc.q.T,c=q,j=0,k=this.uf.left,l=this.uf.right,m=b.ee(a)?h:y,n=y;if(!b.ee(a)&&!b.ee(a+1)){this.Ee.offsetY=245;m=h}else{this.Ee.offsetY=224;n=h}for(b=0;b<6;b=b+2){c=sc.xo.Ky(a+b);k[j].ih(c,a+b,m,n);c=sc.xo.Ky(a+(b+1));l[j].ih(c,a+(b+1),!m,n);j++}this.Ee.j(!m?"UP":"DOWN");this.j("DEFAULT")}},Yd:function(){this.ih();this.IN.j("DEFAULT");this.EK.j("DEFAULT");
this.Ee.j("DOWN")},pl:function(){this.IN.j("HIDDEN");this.EK.j("HIDDEN");this.Ee.j("HIDDEN")},Ab:function(a,b){a==sc.e?b==sc.fa.aya?this.Yd():b==sc.fa.uka?this.pl():b==sc.fa.vka?this.ua.wc()&&this.ih():b==sc.fa.wka&&this.ua.wc()&&this.ih(h):a==sc.q.T&&this.ua.wc()&&b==sc.dd.m$&&this.ih()},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.q.T,this)},Ic:function(){sc.P.Hc(sc.e,this);sc.P.Hc(sc.q.T,this)}});sc.lja.ETa=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HALF:{state:{alpha:0.5},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Hr:new ig.ia("media/gui/circuit-icons.png"),text:q,td:-1,f:function(){this.parent();this.F(150,25);this.text=new sc.ea("\\c[4]---------------\\c[0]");this.text.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:10},time:0.2,p:KEY_SPLINES.LINEAR}};this.text.l(32,4);this.m(this.text)},ih:function(a,b,c,j){this.td=b;var k=a?a.getName():"\\c[4]---------------\\c[0]";sc.q.T.ee(b)?a instanceof
sc.hF?k="\\c[3]"+k+"\\c[0]":a||(k="\\c[4]---------------\\c[0]"):k=j&&a instanceof sc.hF?"\\c[3]"+k+"\\c[0]":"\\c[4]"+k+"\\c[0]";this.text.ga(k);a?this.j(c?"DEFAULT":"HALF"):this.j("HALF",h)},Da:function(a){var b=3;if(this.td>=0)b=sc.xo.Ky(this.td).Y;a.na(this.Hr,4,0,b%10*24,Math.floor(b/10)*24,24,24)}});var c=[{element:sc.ha.COLD,g:{x:115,y:0},xg:184},{element:sc.ha.COLD,g:{x:92,y:23},xg:159},{element:sc.ha.COLD,g:{x:138,y:23},xg:214},{element:sc.ha.COLD,g:{x:69,y:46},xg:150},{element:sc.ha.COLD,
g:{x:115,y:46},xg:178},{element:sc.ha.COLD,g:{x:161,y:46},xg:205},{element:sc.ha.COLD,g:{x:92,y:69},xg:143},{element:sc.ha.COLD,g:{x:138,y:69},xg:198},{element:sc.ha.WAVE,g:{x:0,y:115},xg:358},{element:sc.ha.WAVE,g:{x:23,y:92},xg:388},{element:sc.ha.WAVE,g:{x:23,y:138},xg:333},{element:sc.ha.WAVE,g:{x:46,y:69},xg:379},{element:sc.ha.WAVE,g:{x:46,y:115},xg:352},{element:sc.ha.WAVE,g:{x:46,y:161},xg:324},{element:sc.ha.WAVE,g:{x:69,y:92},xg:372},{element:sc.ha.WAVE,g:{x:69,y:138},xg:317},{element:sc.ha.NEUTRAL,
g:{x:115,y:92},xg:3},{element:sc.ha.NEUTRAL,g:{x:115,y:138},xg:29},{element:sc.ha.NEUTRAL,g:{x:92,y:115},xg:42},{element:sc.ha.NEUTRAL,g:{x:138,y:115},xg:16},{element:sc.ha.HEAT,g:{x:115,y:230},xg:97},{element:sc.ha.HEAT,g:{x:92,y:207},xg:127},{element:sc.ha.HEAT,g:{x:138,y:207},xg:72},{element:sc.ha.HEAT,g:{x:69,y:184},xg:118},{element:sc.ha.HEAT,g:{x:115,y:184},xg:91},{element:sc.ha.HEAT,g:{x:161,y:184},xg:63},{element:sc.ha.HEAT,g:{x:92,y:161},xg:111},{element:sc.ha.HEAT,g:{x:138,y:161},xg:56},
{element:sc.ha.SHOCK,g:{x:230,y:115},xg:271},{element:sc.ha.SHOCK,g:{x:207,y:92},xg:246},{element:sc.ha.SHOCK,g:{x:207,y:138},xg:301},{element:sc.ha.SHOCK,g:{x:184,y:69},xg:237},{element:sc.ha.SHOCK,g:{x:184,y:115},xg:265},{element:sc.ha.SHOCK,g:{x:184,y:161},xg:292},{element:sc.ha.SHOCK,g:{x:161,y:92},xg:230},{element:sc.ha.SHOCK,g:{x:161,y:138},xg:285}]});ig.J=h;
ig.N("game.feature.menu.gui.circuit.circuit-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.circuit.circuit-misc","game.feature.menu.gui.circuit.circuit-detail-elements","game.feature.menu.gui.circuit.circuit-detail","game.feature.menu.gui.circuit.circuit-swap-branches","game.feature.menu.gui.circuit.circuit-overview").K(function(){sc.Gfb=sc.uw.extend({Xo:q,Mb:q,detail:q,info:q,Ce:q,dia:q,Kd:q,eia:q,AG:q,Hb:q,kb:q,f:function(){this.parent();
this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Kd=new ig.mf("black",ig.i.width,ig.i.height);this.Kd.a.R={DEFAULT:{state:{alpha:0.2},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Kd.j("HIDDEN",h);this.m(this.Kd);this.Xo=new sc.Rz;this.m(this.Xo);this.detail=new sc.Kfb;this.m(new sc.uQa(this.detail));this.info=new sc.Ffb(this.detail.a);this.m(this.info);this.Mb=new sc.lwa;this.m(this.Mb);this.Ce=new sc.Ifb(this.detail.a);this.Ce.l(100,100);this.m(this.Ce);
this.dia=new sc.fwa;this.m(this.dia);this.eia=new sc.lja(this.dia.ua);this.m(this.eia);this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.qaa.bind(this);this.AG=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.swap-branches"),g,h,sc.Mc.$c);this.AG.dg=h;this.AG.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},
HIDDEN:{state:{offsetY:-this.AG.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.AG.cc=this.Bsb.bind(this);this.j("DEFAULT",h)},zQ:function(){sc.e.Dk();sc.e.ez()},paa:function(){return sc.ba.Hs()},qaa:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.circuit.title"),ig.lang.get("sc.gui.menu.help-texts.circuit.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Asb:function(){return sc.ba.ND()},
Bsb:function(){var a=sc.e.Rs;if(a==sc.Rm.R1){this.AG.ga("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.swap-branches"));sc.e.$u();sc.e.V5a()}else{if(a!=sc.Rm.LP){if(a==sc.Rm.B1){sc.e.Eca();a=sc.Rm.l9}ig.La.Md(0.2);this.detail.Wq[sc.e.Lj].zQ()}sc.e.byb(a);this.Xo.qdb();this.AG.ga("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.swap-exit"));sc.e.$u();this.Kd.j("DEFAULT")}},Wka:function(a){sc.e.Z.Jd(this.Hb,this.paa.bind(this));sc.e.Z.Jd(this.AG,this.Asb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("AG").bind(this));
sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},Oc:function(){sc.P.Wa(sc.q.e,this);this.Xo.Oc();this.Mb.Oc();this.info.Oc();this.Ce.Oc();this.detail.Oc();this.dia.Oc();this.eia.Oc()},Ic:function(){sc.P.Hc(sc.q.e,this);this.Xo.Ic();this.Mb.Ic();this.info.Ic();this.Ce.Ic();this.detail.Ic();this.dia.Ic();this.eia.Ic()},Yd:function(){this.Oc();sc.e.rl(this.zQ.bind(this));sc.e.gk(0,0,sc.Si.Aw);ig.La.Md(0.2);this.Wka();this.Xo.Yd();this.Mb.Yd()},pl:function(){sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){this.Ic();
sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.AG);this.kb=q;if(sc.e.Lj==-1){this.Xo.Gd();this.Mb.Gd();this.eia.pl()}else{this.Xo.Gd(h);this.detail.Gd();this.Mb.Mu()}},Ab:function(a,b){if(a==sc.e)if(b==sc.fa.N1){if(sc.e.Aga!=sc.e.Lj){sc.e.Lj==-1?this.Xo.nEb():this.Xo.Qxb();this.detail.BNb(sc.e.Lj,sc.e.Aga)}}else if(b==sc.fa.uka){this.AG.ga("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.swap-branches"));sc.e.$u();this.Xo.qdb();this.Kd.j("HIDDEN")}}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-status-equip").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){sc.Lib=sc.Bl.extend({Ub:{Tg:q,gr:q,rr:q,xr:q,bB:q,IA:q,OB:q,hC:q},s:new ig.ia("media/gui/menu.png"),f:function(){this.parent(sc.rg.ds);this.F(126,121);this.l(sc.options.Hi?25:2,28);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(126+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};var a=
5;this.Ub.Tg=this.Dl(0,a,"maxhp",0,0,y,9999);a=a+14;this.Ub.gr=this.Dl(0,a,"atk",0,1,y,999);a=a+14;this.Ub.rr=this.Dl(0,a,"def",0,2,y,999);a=a+14;this.Ub.xr=this.Dl(0,a,"foc",0,3,y,999);a=a+16;this.Ub.bB=this.Dl(0,a,"res",1,4,h,999);a=a+14;this.Ub.IA=this.Dl(0,a,"res",2,5,h,999);a=a+14;this.Ub.OB=this.Dl(0,a,"res",3,6,h,999);this.Ub.hC=this.Dl(0,a+14,"res",4,7,h,999);this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.tF();sc.e.KS()&&this.j("DEFAULT")},
Gd:function(){this.j("HIDDEN")},Ab:function(a,b,c){a==sc.e&&(b==sc.fa.t1?this.fM(c):b==sc.fa.oC?sc.e.iB==""&&this.tF():b==sc.fa.yI?sc.e.KS()?this.j("DEFAULT"):this.j("HIDDEN"):b==sc.fa.Qja&&this.tF())},fM:function(a){this.tF();if(!(a<0)&&sc.e.KS())if(a=sc.yb.getItem(a).params){this.Ub.Tg.sh(a.hp||0);this.Ub.gr.sh(a.attack||0);this.Ub.rr.sh(a.defense||0);this.Ub.xr.sh(a.focus||0);if(a.elemFactor){this.Ub.bB.sh(Math.round((a.elemFactor[0]||1)*100-100)/100);this.Ub.IA.sh(Math.round((a.elemFactor[1]||
1)*100-100)/100);this.Ub.OB.sh(Math.round((a.elemFactor[2]||1)*100-100)/100);this.Ub.hC.sh(Math.round((a.elemFactor[3]||1)*100-100)/100)}}},tF:function(){for(var a in this.Ub)this.Ub[a].sh(0)},Dl:function(a,b,c,d,f,i,j){i=new sc.u$(ig.lang.get("sc.gui.menu.equip."+c),d,f,i,j,h,126);i.l(a,b);if(c=="res"){d==1&&(c="heat");d==2&&(c="cold");d==3&&(c="shock");d==4&&(c="wave")}i.we={type:"INFO",content:{title:"sc.gui.menu.equip."+c,description:"sc.gui.menu.equip.descriptions."+c},offset:{x:-1,y:-1},index:{x:0,
y:f}};this.m(i);return i}});sc.Eib=sc.vI.extend({XVb:q,oo:{},f:function(){this.parent(ig.lang.get("sc.gui.menu.equip.modifiers"),sc.rg.ds);this.F(126,139);this.l(sc.options.Hi?25:2,153);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(126+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};for(var a in sc.Af){var b=sc.Af[a],b=this.Dl(0,0,"modifier."+a,5,b.Y,h,sc.K9,b.tB||y,a,b.Li);b.j("HIDDEN",h);this.oo[a]=b}this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,
this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.tF();sc.e.KS()&&this.j("DEFAULT")},Gd:function(){this.j("HIDDEN")},Ab:function(a,b,c){a==sc.e&&(b==sc.fa.t1?this.fM(c):b==sc.fa.oC?sc.e.iB==""&&this.tF():b==sc.fa.yI&&(sc.e.KS()?this.j("DEFAULT"):this.j("HIDDEN")))},fM:function(a){this.tF();if(!(a<0)&&sc.e.KS())if(a=sc.yb.getItem(a).properties){var b=12,c;for(c in this.oo)if(a[c]!=g){this.oo[c].j("DEFAULT",h);this.oo[c].sh(Math.round((a[c]||0)*100-100)/100);this.oo[c].l(0,b);b=b+16}}},tF:function(){for(var a in this.oo){this.oo[a].sh(0);
this.oo[a].j("HIDDEN",h)}},Dl:function(a,b,c,d,f,i,j,k,l,m){c=new sc.u$(ig.lang.get("sc.gui.menu.equip."+c),d,f,i,j,h,126,k);c.l(a,b);c.we={type:"INFO",content:{title:"sc.gui.menu.equip.modifier."+l,description:"sc.gui.menu.equip.descriptions."+l},offset:{x:-1,y:-1},index:{x:0,y:m+8}};this.m(c);return c}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-status-default").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){function a(a,b,c,o,t,p,r,u){var D=d,E=f;p||(E=E+l);r||(E=E+m);var H=i*2+j*4,w=H-k;if(o!=g){D=D+(i+o*j);H=H-(i+o*j);w=H-k}if(t!=g)w=H=H-(i+(4-t)*j);if(r&&!p&&u==0){D=D+i;w=H=H-(i+1)}a.na(b,c.ew,9,D,E,H,n);c.ew=c.ew+w}function b(a,b,c,d,f,i,j,k){var l=o,m=t;i||(m=m+w);j||(m=m+z);var n=p*2+r*4,Q=n-u;if(d!=g){l=l+(p+d*r);n=n-(p+d*r);Q=n-
u}if(f!=g)Q=n=n-(p+(4-f)*r);if(j&&!i&&k==0){l=l+p;Q=n=n-(p+1)}a.na(b,c.ew,9,l,m,n,v);c.ew=c.ew+Q}sc.Ll={yL:0,q1:1,O1:2,oP:3};var c={Lf:0,ew:0,Rl:0,qh:0};sc.zI=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),DC:new ig.jc("media/gui/menu.png",{width:2,height:0,left:4,top:6,right:4,bottom:0,Vb:{"default":{x:128,y:408},sp:{x:112,y:408},spm:{x:112,y:416}}}),LYa:new ig.jc("media/gui/status-gui.png",{width:46,height:0,left:1,top:1,right:1,bottom:0,Vb:{hp:{x:0,y:48},bg:{x:0,y:49},red:{x:0,y:50},fg:{x:0,
y:51},exp:{x:0,y:52},buff:{x:0,y:54}}}),type:0,name:"",fh:0,Jh:-1,Jk:0,n:0,pr:q,lx:q,$Q:q,cJ:0,q:q,f:function(a,b,c,d,f,i){this.parent();this.F(d||126,14);this.cJ=f||0;this.$Q=c||q;this.type=b||sc.Ll.yL;this.q=sc.q.T;a=new sc.ea(a,{font:sc.Ea.Ib,speed:ig.Rd.se.zg});a.l(3,i);this.m(a);if(this.type!=sc.Ll.oP){i=0;switch(this.type){case sc.Ll.yL:i=9999;break;case sc.Ll.q1:i=sc.yP;break;case sc.Ll.O1:i=99}this.lx=new sc.Tb(i);this.lx.H(ig.k.ra,ig.k.$);this.lx.l(6,0);this.m(this.lx);this.pr=new sc.Tb(i,
{transitionTime:0.2});this.pr.H(ig.k.ra,ig.k.$);this.pr.l(48,0)}else{i=new sc.ea(ig.lang.get("sc.gui.menu.seconds"),{font:sc.Ea.Ib,speed:ig.Rd.se.zg});i.H(ig.k.ra,ig.k.$);i.l(3,-1);this.m(i);this.pr=new sc.Tb(60);this.pr.H(ig.k.ra,ig.k.$);this.pr.l(19,0)}this.m(this.pr)},Qi:function(a,b,c,d){this.q=b?b:sc.q.T;switch(this.type){case sc.Ll.yL:b=b?b.W:sc.q.T.W;c=c||b.Sc;if(this.Jh!=c){if((this.Jk-this.Jh)*(c-this.Jk)<0)this.Jh=this.Jk;this.Jk=c;a?this.Jh=this.Jk:this.n=0.2;this.fh=d||b.Td("hp");this.pr.za(c,
a);this.lx.za(this.fh,a)}break;case sc.Ll.q1:b=b?b:sc.q.T;if(this.Jh!=b.exp){this.Jh=this.Jk=Math.floor(b.exp);this.fh=sc.yP;this.pr.za(b.exp,a);this.lx.za(this.fh,a)}break;case sc.Ll.O1:b=b?b.W:sc.q.T.W;this.Jh!=b.nm&&this.pr.za(Math.floor(b.nm),a);this.lx.za(b.Qo,a);break;case sc.Ll.oP:b=Math.ceil(this.$Q.n);if(this.Jh!=b){this.Jh=this.Jk=b;this.fh=this.$Q.time;this.pr.za(b,a)}}},QWb:function(){this.pr.za(0);this.Jk=this.Jh=-1;this.n=0},update:function(){if(this.n>0)this.n=this.n-ig.i.Sa;else if(this.Jk!=
this.Jh){var a=ig.i.Sa*this.fh/2;if(this.Jh>this.Jk)this.Jh=Math.max(this.Jk,this.Jh-a);else if(this.Jh<this.Jk)this.Jh=Math.min(this.Jk,this.Jh+a)}},Da:function(a){if(this.type==sc.Ll.O1)this.erb(a);else{var b,c,d,f;this.type!=sc.Ll.oP?this.DC.nb(a,this.a.size.x-(this.cJ?this.cJ:4),this.cJ?this.cJ:4,"default",2,9):this.DC.nb(a,this.a.size.x-3,3,"default",2,9);this.type!=sc.Ll.oP&&a.na(this.DC.s,this.a.size.x-46,0,80,408,8,8);switch(this.type){case sc.Ll.yL:d="hp";break;case sc.Ll.q1:d="exp";break;
case sc.Ll.oP:d="buff"}if(this.Jk>0){if(this.Jk<this.Jh){c=this.Jh/this.fh;b=this.Jk/this.fh;f="bg"}else{c=this.Jk/this.fh;b=this.Jh/this.fh;f="fg"}this.type==sc.Ll.yL&&(d=b>0.25?"hp":"red")}for(var i=this.cJ||(this.type!=sc.Ll.oP?4:3),j=0;j<i;j++){c&&(this.Jk!=this.Jh&&this.type==sc.Ll.yL)&&this.LYa.nb(a,Math.round(c.Rb(0,1)*(this.a.size.x-7)),1,f,2+j,9+j);b>0&&this.LYa.nb(a,this.type==sc.Ll.oP?Math.round(b.Rb(0,1)*(this.a.size.x-6)):Math.round(b.Rb(0,1)*(this.a.size.x-(this.cJ==3?6:7))),1,d,2+j,
9+j)}}},mRb:function(a){var b=this.DC.s,c=this.q.W.Qo,c=16;this.DC.nb(a,this.a.size.x-4,4,"spm",2,9);a.na(b,this.a.size.x-46,0,80,408,8,8);for(var b=6,d=0;d<c;d++){a.nc(d+1>c/2?SP_REG_COLOR:SP_NORMAL_COLOR,b,10,3,2);b=(d+1)%4==0?b+6:b+4}},erb:function(d){var f=this.DC.s,i=this.q.W,j=i.Qo,k=j*sc.dW,l=i.nm,i=Math.floor(l);this.cJ==3?this.DC.nb(d,this.a.size.x-4,4,"spm",2,9):this.DC.nb(d,this.a.size.x-4,6,"sp",2,9);d.na(f,this.a.size.x-46,0,80,408,8,8);this.cJ==3?d.na(f,2,9,560,160+(l<1?16:0),6,4):d.na(f,
2,9,144,480+(l<1?16:0),6,6);c.ew=8;c.Lf=0;c.Rl=Math.min(4,i);c.qh=Math.min(4,k);for(l=this.cJ==3?b:a;c.Lf+1<=i;){var m=c.Lf?g:0;if(c.Rl==4&&(c.qh==4||c.qh==0))l(d,f,c,m,g,h,c.qh==4);else if(c.qh>0&&c.qh<c.Rl){var n=c.Rl==4?g:c.Rl;l(d,f,c,m,c.qh,h,h);l(d,f,c,c.qh,n,h,y)}else l(d,f,c,m,c.Rl,h,c.qh>0);c.Lf=c.Lf+c.Rl;if(c.Rl==4){c.Rl=Math.min(4,i-c.Lf);c.qh=(k-c.Lf).Rb(0,4)}}if(c.Lf%4!=0){if(c.qh>c.Rl&&c.qh<4){l(d,f,c,c.Rl,c.qh,y,h);c.Rl=c.qh}l(d,f,c,c.Rl,g,y,c.qh==4);c.Lf=Math.ceil(c.Lf/4)*4}for(;c.Lf<
j;){c.qh=(k-c.Lf).Rb(0,4);if(c.qh==4||c.qh==0)l(d,f,c,g,g,y,c.qh==4,i);else{l(d,f,c,g,c.qh,y,h);l(d,f,c,c.qh,g,y,y)}c.Lf=c.Lf+4}}});var d=144,f=480,i=6,j=5,k=2,l=16,m=8,n=6,o=560,t=160,p=6,r=3,u=2,w=10,z=5,v=4;sc.Kib=sc.Bl.extend({ira:new ig.ia("media/gui/menu.png"),FNa:new ig.ia("media/gui/status-gui.png"),aa:q,Lh:q,yo:q,ku:q,f:function(){this.parent(sc.rg.ds);this.F(126,95);this.l(sc.options.Hi?25:2,28);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(126+
(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};this.aa=new sc.Tb(99,{size:sc.Ff.Uh});this.aa.H(ig.k.ra,ig.k.$);this.aa.l(3,2);this.m(this.aa);this.Lh=new sc.zI("HP",sc.Ll.yL);this.Lh.l(0,39);this.m(this.Lh);this.Lh.Qi(h);this.Lh.we={size:{x:this.Lh.a.size.x+2,y:this.Lh.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.hp",description:"sc.gui.menu.help.item.description.hp"},index:{x:0,y:0}};this.yo=new sc.zI("SP",sc.Ll.O1);this.yo.l(0,57);this.m(this.yo);this.yo.Qi(h);
this.yo.we={size:{x:this.yo.a.size.x+2,y:this.yo.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.sp",description:"sc.gui.menu.help.item.description.sp"},index:{x:0,y:1}};this.ku=new sc.zI("EXP",sc.Ll.q1);this.ku.l(0,77);this.m(this.ku);this.ku.Qi(h);this.ku.we={size:{x:this.ku.a.size.x+2,y:this.ku.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.exp",description:"sc.gui.menu.help.item.description.exp"},index:{x:0,y:2}};this.j("HIDDEN",h)},Da:function(a){this.parent(a);
a.na(this.ira,0,0,280,472,126,35);a.na(this.FNa,64,5,104,32+sc.q.T.sg*24,24,24)},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.q.T,this);sc.P.Wa(sc.q.T.W,this)},Ic:function(){sc.P.Hc(sc.e,this);sc.P.Hc(sc.q.T,this);sc.P.Hc(sc.q.T.W,this)},Yd:function(){this.GAa(h);!sc.e.KS()&&sc.e.lo!=6&&this.j("DEFAULT")},Gd:function(){this.j("HIDDEN")},Ab:function(a,b){a==sc.e?b==sc.fa.yI&&(!sc.e.KS()&&sc.e.lo!=6?this.j("DEFAULT"):this.j("HIDDEN")):a==sc.q.T?(b==sc.dd.DL||b==sc.dd.vV||b==sc.dd.wP)&&this.GAa():a==
sc.q.T.W&&(b==sc.ei.Zva||b==sc.ei.uI||b==sc.ei.p$||b==sc.ei.bs)&&this.GAa()},GAa:function(a){this.aa.za(sc.q.T.aa);this.Lh.Qi(a);this.ku.Qi(a);this.yo.Qi(a)}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-status-buffs").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-status-default").K(function(){sc.Jib=sc.vI.extend({s:new ig.ia("media/gui/basic.png"),qB:q,VC:q,$Wa:3,f:function(){this.parent(ig.lang.get("sc.gui.menu.item.buff"),sc.rg.ds);this.F(126,83);this.l(sc.options.Hi?25:2,127);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(126+(sc.options.Hi?
25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};var a=sc.q.T.W,b={size:sc.Ff.jF,color:sc.Od.wm};this.qB=new sc.Tb(4,b);this.qB.H(ig.k.ra,ig.k.$);this.qB.l(6,2);this.qB.za(a.xY());this.m(this.qB);this.VC=new sc.Tb(4,b);this.VC.H(ig.k.ra,ig.k.$);this.VC.l(20,2);this.VC.za(a.rR);this.m(this.VC);a=new ig.ec(this.s,208,18,5,5);a.H(ig.k.ra,ig.k.$);a.l(14,2);this.m(a);this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.q.T.W,this)},Ic:function(){sc.P.Hc(sc.e,this);sc.P.Hc(sc.q.T.W,this)},Yd:function(){this.eVa();
this.qB.za(sc.q.T.W.xY());sc.e.cS()==sc.kh.CONS&&this.j("DEFAULT")},Gd:function(){this.j("HIDDEN")},Ab:function(a,b){if(a==sc.e)b==sc.fa.yI&&(sc.e.cS()==sc.kh.CONS?this.j("DEFAULT"):this.j("HIDDEN"));else if(a==sc.q.T.W&&b==sc.ei.bs){this.qB.za(a.xY());this.VC.za(a.rR);this.eVa()}},eVa:function(){for(var a=this.a.children.slice(this.$Wa,this.a.children.length-this.$Wa),b=a.length;b--;){a[b].pi();a[b].al=y}for(var a=sc.q.T.W.ns,c=q,c=q,d=12,b=0;b<a.length;b++)if(c=sc.yb.getItem(a[b].hZ)){c=new sc.zI(ig.Ra.ic(c.name),
sc.Ll.oP,a[b]);c.l(0,d);c.Qi(h);d=d+18;this.m(c)}}});sc.Aib=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-10},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.H(ig.k.hb,ig.k.Cb);this.l(25,37);var a=new ig.ec(this.s,480,336,10,9);a.l(0,6);this.m(a);a=new sc.ea("\\i[help]");a.l(12,0);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.item.buffHelp"),{font:sc.Ea.he});a.l(26,2);this.m(a);this.j("HIDDEN",h)},
Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.LNa=y;sc.options.get("buff-help")&&this.j("DEFAULT")},Gd:function(a){if(a&&this.a.hi=="DEFAULT")this.LNa=h;this.j("HIDDEN")},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yI)this.j("HIDDEN");else if(b==sc.fa.Xxa)if(sc.e.cS()==sc.kh.CONS&&sc.options.get("buff-help")){c=c||y;sc.e.OF?this.j("DEFAULT"):this.j("HIDDEN",y,y,q,c?0.5:0)}else this.j("HIDDEN")}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-status-favs").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.player.player-model").K(function(){sc.Fhb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),text:q,id:-1,f:function(){this.parent();this.F(19,19);this.text=new sc.ea("");this.text.l(2,1);this.m(this.text)},setItem:function(a){this.id=a||-1;if(this.id>=0){a=sc.yb.getItem(this.id);this.text.ga("\\i["+a.icon+sc.yb.Er(a.rarity)+"]")}else this.text.ga("")},
Da:function(a){this.id>=0?a.na(this.s,0,0,213,480,19,19):a.na(this.s,0,0,192,480,19,19)}});sc.Mib=sc.vI.extend({s:new ig.ia("media/gui/menu.png"),fe:new ig.ia("media/gui/basic.png"),gfa:q,U3:q,wza:[],f:function(){this.parent(ig.lang.get("sc.gui.menu.item.favs"),sc.rg.ds);this.F(126,63);this.l(sc.options.Hi?25:2,214);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(126+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};var a=sc.q.T,b={size:sc.Ff.jF,color:sc.Od.wm};
this.gfa=new sc.Tb(12,b);this.gfa.H(ig.k.ra,ig.k.$);this.gfa.l(6,2);this.gfa.za(sc.qRa);this.m(this.gfa);this.U3=new sc.Tb(12,b);this.U3.H(ig.k.ra,ig.k.$);this.U3.l(24,2);this.U3.za(a.Fs.length);this.m(this.U3);a=new ig.ec(this.fe,208,18,5,5);a.H(ig.k.ra,ig.k.$);a.l(18,2);this.m(a);for(var b=4,c=15,d=0;d<sc.qRa;d++){a=new sc.Fhb;a.l(b,c);b=b+20;if((d+1)%6==0){b=5;c=c+23}this.wza.push(a);this.m(a);var f=d%6,i=Math.floor(d/6)+4;a.we={size:{x:12,y:12},offset:{x:3,y:4},content:{id:d,title:function(a){a=
sc.q.T.Fs[a.id];return a>=-1?sc.yb.pda(a):ig.lang.get("sc.gui.menu.help.item.titles.favs")}.bind(this),description:function(a){a=sc.q.T.Fs[a.id];return a>=-1?sc.yb.gFa(a):ig.lang.get("sc.gui.menu.help.item.description.favs")}.bind(this)},index:{x:f,y:i}}}this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.q.T,this)},Ic:function(){sc.P.Hc(sc.e,this);sc.P.Hc(sc.q.T,this)},Yd:function(){if(sc.e.cS()==sc.kh.CONS){this.Jdb();this.j("DEFAULT")}},Gd:function(){this.j("HIDDEN")},Jdb:function(){var a=
sc.q.T.Fs;this.U3.za(a.length,h);for(var b=0;b<this.wza.length;b++)this.wza[b].setItem(a[b])},Ab:function(a,b){a==sc.e?b==sc.fa.yI&&(sc.e.cS()==sc.kh.CONS?this.j("DEFAULT"):this.j("HIDDEN")):a==sc.q.T&&b==sc.dd.Nwa&&this.Jdb()}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-status-trade").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-status-default").K(function(){sc.AL=sc.vI.extend({s:new ig.ia("media/gui/basic.png"),content:q,f:function(){this.parent(ig.lang.get("sc.gui.menu.item.availability"),sc.rg.ds);this.F(136,264);this.l(sc.options.Hi?25:2,28);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(136+(sc.options.Hi?
25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};this.we={size:{x:this.a.size.x+2,y:this.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.avail",description:"sc.gui.menu.help.item.description.avail"},index:{x:0,y:3}};this.content=new ig.da;this.content.F(124,140);this.content.l(1,10);this.m(this.content);this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){sc.e.cS()==sc.kh.TRADE&&this.j("DEFAULT")},Gd:function(){this.j("HIDDEN")},
Ab:function(a,b,f){a==sc.e&&(b==sc.fa.yI?sc.e.cS()==sc.kh.TRADE?this.j("DEFAULT"):this.j("HIDDEN"):b==sc.fa.t1?this.rXa(f):b==sc.fa.oC&&(a.iB||this.rXa()))},rXa:function(b){this.content.rh();if(b){var d=sc.yb.getItem(b).sources;if(d&&d.length!=0)for(var f=0,i=0;i<d.length;i++){var j=d[i],j=a[j.type]?new a[j.type](j,b):new sc.AL.jV(j,b);j.l(0,f);f=f+(j.a.size.y+1);this.content.m(j)}}}});var a={},b={ENEMY:0,TRADER:1,PLANT:2,QUEST:3,CHEST:5,OTHER:4};sc.AL.jV=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
edb:new ig.ia("media/gui/trade-types.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},type:q,hZ:q,bC:q,UU:q,iva:q,f:function(a,d,f,i){this.parent();this.F(134,18);this.type=a.type||"NONE";this.hZ=d||0;this.iva=new ig.ec(this.edb,b[this.type]*28,0,28,18);this.m(this.iva);a=new ig.ec(this.s,81,389,95,1);a.H(ig.k.hb,ig.k.Cb);a.l(47,0);this.m(a);a=new ig.mf("#C7C7C7",19,1);a.H(ig.k.hb,ig.k.Cb);a.l(28,0);this.m(a);this.bC=new sc.ea("",{font:sc.Ea.Ib,
maxWidth:i?0:103});this.bC.H(ig.k.hb,ig.k.$);this.bC.l(30,0);this.m(this.bC);this.UU=new sc.ea("",{font:sc.Ea.Ib});this.UU.H(ig.k.hb,ig.k.$);this.UU.l(43,9);this.m(this.UU);f&&this.ZXa()},ZXa:function(){var a=new ig.ec(this.s,530,210,9,8);a.l(32,8);this.m(a)},nz:function(a){this.iva.hMa(this.edb,b[a]*28,0,28,18)}});a.ENEMY=sc.AL.jV.extend({f:function(a,b){this.parent(a,b,h);var f=a.value,i=sc.pa.Qf("combat","kill"+f);this.bC.ga(i>=1?sc.Ta.jda(f):"???");this.UU.ga(i>=1?sc.Ta.Pzb(f,h):"???")}});a.TRADER=
sc.AL.jV.extend({f:function(a,b){this.parent(a,b,h);var f=a.value,i=sc.Fb.epa(f);this.bC.ga(i?sc.Fb.Q2a(f):"???");this.UU.ga(i?sc.Fb.zBb(f,h):"???")}});a.PLANT=sc.AL.jV.extend({f:function(a,b){this.parent(a,b,h,h);var f=a.value,i=sc.e.bAb(f);this.bC.ga(i?sc.e.$oa(f):"???");this.UU.ga(i?sc.e.Lzb(f):"???")}});a.QUEST=sc.AL.jV.extend({f:function(a,b){this.parent(a,b);this.bC.ga(sc.dc.B2a(a.value));this.bC.H(ig.k.hb,ig.k.vb)}});a.CHEST=sc.AL.jV.extend({f:function(a,b){this.parent(a,b);var f=sc.map.Bda(a.value)||
y;this.bC.ga(f?sc.map.Kv(a.value):"???");this.bC.H(ig.k.hb,ig.k.vb)}});a.OTHER=sc.AL.jV.extend({f:function(a,b){this.parent(a,b);var f=a.value;this.bC.ga(ig.Ra.ic(f.text));f.icon&&this.nz(f.icon);f.subText?this.UU.ga(ig.Ra.ic(f.subText)):this.bC.H(ig.k.hb,ig.k.vb);f.arrow&&this.ZXa()}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-sort-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box").K(function(){sc.hW=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:480,y:304}}}),R:{HIDDEN:{state:{alpha:0,Xa:0.2,Va:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE}},Ha:q,xa:[],Aa:y,fPa:3,Gb:q,eX:q,r_a:q,f:function(a,b,c){c=c||102;this.parent(c,85);this.Eb(c,
0);this.H(ig.k.ra,ig.k.$);this.Gb=a;this.eX=b;this.a.zIndex=1500;this.a.xf=h;this.a.gha=h;this.Ha=new sc.wh(y,ig.tw.dQ);this.Ha.Ql(function(a){this.r_a=a.name;this.Gb&&this.Gb(a)}.bind(this));this.Ha.Rk(function(a){a.data&&a.data.description&&sc.e.Cc(a.data.description?a.data.description:a.data)}.bind(this));this.Ha.jn(function(){sc.e.Cc("",h)}.bind(this));this.j("HIDDEN",h)},Sd:function(a,b,c){this.fPa=this.Cl(a,b,this.fPa,c);this.a.size.y=this.fPa+2},Mta:function(a,b){this.xa[a].ga(ig.lang.get("sc.gui.menu.sort."+
b),h);this.xa[a].data.description=ig.lang.get("sc.gui.menu.sort.des."+b)},R7:function(a){this.gbb(a.a.g.x,a.a.size.y)},gbb:function(a,b){if(!this.Aa){sc.e.rl(this.ej.bind(this));sc.e.Z.hh(this.Ha);this.l(a,b);this.Aa=h;this.j("DEFAULT")}},xk:function(){if(this.Aa){sc.e.Dk();sc.e.Z.sl(this.Ha);this.Aa=y;this.j("HIDDEN",y,h)}},ej:function(){this.xk();this.eX&&this.eX()},Cl:function(a,b,c,d){var f=new sc.mc(ig.lang.get("sc.gui.menu.sort."+a),this.a.size.x-6,h,sc.Mc.wI);f.re.l(0,0);f.re.H(ig.k.Ia,ig.k.vb);
f.setData({vE:b,description:ig.lang.get("sc.gui.menu.sort.des."+a),name:f.text});f.l(3,c);this.Ha.jd(f,0,d);if(this.xa.length==0)this.r_a=f.text;this.xa[d]=f;this.m(f);return c=c+f.a.size.y}});sc.uRa=sc.hW.extend({f:function(){this.parent(this.cc.bind(this));this.Sd("auto",sc.Of.ORDER,0);this.Sd("name",sc.Of.NAME,1);this.Sd("amount",sc.Of.AMOUNT,2);this.Sd("rarity",sc.Of.RARITY,3)},cc:function(a){if(a.data){this.xk();sc.e.kw(a)}}})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.item.item-sort-menu").K(function(){sc.Yz=ig.da.extend({s:new ig.ia("media/gui/menu.png"),list:q,Uj:{jFb:q,Rc:q,Gub:q,head:q,uh:q,ph:q,Fb:q,keys:q},LH:{},Vd:[],ua:q,Tj:q,ac:q,aB:q,dG:q,Ycb:q,Xcb:q,Pk:q,Jw:-1,SI:[],Hw:q,iv:-1,f:function(){this.parent();
this.F(340,260);this.H(ig.k.ra,ig.k.$);this.l(sc.options.Hi?25:2,27);this.aB=this.ac=sc.gd.submit;this.dG=sc.gd.Dv;this.Ycb=sc.gd.RNb;this.Xcb=sc.gd.QNb;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(340/3+(sc.options.Hi?25:3))},time:0.2,p:KEY_SPLINES.LINEAR}};this.Tj=new sc.wh;this.Tj.Ql(function(a){if(this.Pk!=a){this.ac.play();this.Pk=a;a.ff(h);this.BQ(a);this.sF();sc.e.FN=a.data;for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.X$a(c);break}}}.bind(this));
this.Tj.Rk(function(){sc.e.Cc("");sc.e.Rj("",h)});this.Tj.jn(function(){sc.e.Cc("",h);sc.e.Rj("",h)});var a=new sc.Bl;a.F(340,244);a.l(0,21);this.m(a);this.list=new sc.okb(1,168,sc.E9.Gya,1);this.list.l(0,29);this.list.F(340,230);this.list.zLb("HIDDEN",h);this.m(this.list);this.Hw=this.list.ua();this.Hw.Jr=this.Jr.bind(this);this.Hw.Rk(function(a){if(a.data){this.iv=a;sc.e.Cc(a.data.description?a.data.description:a.data);if(a.data.id){sc.e.iMa(a.data.id);var c=sc.yb.pda(a.data.id)+" [Description]";
ig.Ae.VU(c,new ig.Ra(sc.yb.getItem(a.data.id).description),"data/item-database.json",h);sc.yb.tea(a.data.id)?sc.e.Rj(sc.yb.M4(a.data.id),y,a.data.id):sc.e.Rj("",y)}}}.bind(this));this.Hw.Ql(this.wGb.bind(this));this.Hw.jn(function(){sc.e.Cc("",h);sc.e.Rj("",h);this.iv=q}.bind(this));this.Hw.$l=this.$l.bind(this);a=new ig.ec(this.s,32,408,5,5);a.l(0,21);this.m(a);a=new ig.mf("#FF6D00",335,1);a.l(5,21);this.m(a);this.Uj.jFb=this.fs("news","item-news",0,"NEW");this.Uj.Rc=this.fs("items","item-items",
1,sc.kh.CONS);this.Uj.Gub=this.fs("arms","item-sword",2,sc.kh.EQUIP,sc.Ng.ARM);this.Uj.head=this.fs("head","item-helm",3,sc.kh.EQUIP,sc.Ng.HEAD);this.Uj.uh=this.fs("torso","item-belt",4,sc.kh.EQUIP,sc.Ng.TORSO);this.Uj.ph=this.fs("feet","item-shoe",5,sc.kh.EQUIP,sc.Ng.FEET);this.Uj.Fb=this.fs("trade","item-trade",6,sc.kh.TRADE);this.Uj.keys=this.fs("keys","item-key",7,sc.kh.KEY);if(sc.q.T.l3a())this.Uj.toggle=this.fs("toggle","item-toggle",8,sc.kh.TOGGLE);sc.e.FN=this.Uj.Rc.data;for(a=0;a<this.Vd.length;a++)this.SI[a]=
{x:0,y:0,scroll:0};this.Tj.tl(1,0);this.Uj.Rc.ff(h);this.Pk=this.Uj.Rc;this.sF();this.j("HIDDEN",h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){sc.e.Z.KQ(this.Tj);this.Jw=-1;ig.La.Md(0.2);var a=sc.e.FN;if(a){this.Jw=sc.e.lo;this.kza(a.type,a.Mua,h,ig.input.Id,h)}this.list.Pf();this.j("DEFAULT")},Gd:function(){sc.e.Z.lU(this.Tj);var a=sc.e.lo;this.SI[a].x=this.Hw.Qa.x;this.SI[a].y=this.Hw.Qa.y;this.SI[a].scroll=this.list.list.Gc.a.scroll.y;this.list.ui();sc.e.Cc("",
y);sc.e.Rj("",y);this.j("HIDDEN")},cMa:function(){if(this.iv&&sc.e.lo==1)if(sc.q.T.$ub()||sc.q.T.fZ(this.iv.data.id)){this.aB&&this.aB.play();sc.q.T.LOa(this.iv.data.id)?this.FUa(this.iv):this.Osb(this.iv)}else this.dG.play();else{this.ac.play();var a=ig.lang.get("sc.gui.menu.help-texts.inventory.title-2")+"\n\n"+ig.lang.get("sc.gui.menu.help-texts.inventory.text-2"),a=new sc.rP(a,{maxWidth:300,speed:ig.Rd.se.zg},"black",0.9);a.a.zIndex=15E4;a.a.xf=h;ig.X.vd(a)}},Jr:function(){return sc.ba.Au()||
sc.ba.CH()||sc.ba.OG()||sc.ba.gu()||sc.ba.Zu()||sc.ba.aw()||sc.ba.bw()},$l:function(){if(sc.e.lo==-1)sc.e.lo=1;var a=sc.e.lo,b=this.Vd[a],c=-1;sc.ba.bw()?c=1:sc.ba.aw()&&(c=0);if(c>=0){this.ac.play();b.ff(y);this.SI[a].x=this.Hw.Qa.x;this.SI[a].y=this.Hw.Qa.y;this.SI[a].scroll=this.list.list.Gc.a.scroll.y;if(c==1){a++;a>=this.Vd.length&&(a=0)}else{a--;a<0&&(a=this.Vd.length-1)}this.Jw=a;this.Pk=b=this.Vd[a];b.ff(h);this.BQ(b,h);this.sF();sc.e.FN=b.data;sc.e.X$a(a)}},wGb:function(a){if(sc.e.cS()==
sc.kh.TOGGLE){var b=sc.q.T.ONb(a.data.id,a.set);b?this.Ycb.play():this.Xcb.play();b?a.S$a.geb(a):a.S$a.geb()}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yI){a=sc.e.FN;this.kza(a.type,a.Mua,h,ig.input.Id,!ig.input.Id)}else if(b==sc.fa.yp){a=sc.e.FN;this.kza(a.type,a.Mua,h,ig.input.Id,!ig.input.Id,c.data.vE)}},pm:function(){var a="auto";switch(this.LH[sc.e.FN.Mua||sc.e.FN.type]||sc.Of.ORDER){case sc.Of.ORDER:a="auto";break;case sc.Of.NAME:a="name";break;case sc.Of.AMOUNT:a="amount";break;case sc.Of.RARITY:a=
"rarity"}return ig.lang.get("sc.gui.menu.sort."+a)},kza:function(a,b,c,d,f,i){c=c||y;d=d||y;f=f||y;this.LH[b||a]!=g?i==g?i=this.LH[b||a]:this.LH[b||a]=i:this.LH[b||a]=i||sc.Of.ORDER;var j=0,k=0,l=sc.q.T;this.Hw.clear();this.list.clear(c);var m=q,n=-1,o=-1;if(a=="NEW")m=l.vt;else if(b)if(a==sc.kh.EQUIP){m=l.pY(b,h,i||sc.Of.ORDER);switch(b){case sc.Ng.HEAD:n=l.sb.head;break;case sc.Ng.ARM:n=l.sb.Bh;o=l.sb.Fh;break;case sc.Ng.TORSO:n=l.sb.uh;break;case sc.Ng.FEET:n=l.sb.ph}}else e(Error("Only equip can have a subType! [type: "+
a+", subType: "+b+"]"));else m=l.iFa(a,i||sc.Of.ORDER);var t=q,b=q,p=0,r=a==sc.kh.TOGGLE;if(r){this.list.mab("HIDDEN");a=l.dva;this.list.list.nh=1;var m=this.list.list.paddingTop=0,u;for(u in a){n=a[u];if(l.$Bb(n)){o=new sc.gpb(n,this.list,m);this.list.Sd(o,h);m=m+Math.ceil(n.items.length/2)}}this.list.list.paddingTop=1;this.list.list.nh=2;this.Hw.gEa()}else{this.list.mab("DEFAULT");for(u=0;u<m.length;u++){var p=l.Rc[m[u]]||0,b=sc.yb.getItem(m[u]),t=new ig.Ra(b.name),t=r?"\\i["+(l.PJ(m[u])?"toggle-item-on":
"toggle-item-off")+"]":"\\i["+(b.icon+sc.yb.Er(b.rarity||0)||"item-default")+"]",t=t+ig.Ra.ic(b.name),w=ig.Ra.ic(b.description),z=0;a==sc.kh.EQUIP&&(z=b.level||1);n==m[u]&&(p=p+1);o==m[u]&&(p=p+1);t=r?new sc.WE(t,142,24,-1,m[u],w,h,g,g,g,z):new sc.WE(t,142,26,p,m[u],w,g,g,g,g,z);if(p==0&&a=="NEW"&&b.equipType&&l.J4a(m[u])){p=l.OJ(m[u]);t.zc.za(p,h);this.Vya(t,1)}p==0&&t.setActive(y);t.button.ac=q;if(m[u]==n||m[u]==o){this.Vya(t,n);this.Vya(t,o)}l.fZ(m[u])&&this.FUa(t);this.list.Sd(t)}}if(c){c=0;if(i==
g){if(this.Jw>=0){i=this.SI[this.Jw];this.Jw=-1;if(this.Hw.$4a(i.x,i.y)){c=i.x;j=i.y;k=-i.scroll}else k=j=c=0}}else k=j=0;this.list.list.Go=j;d?this.Hw.tl(c,j):this.Hw.Sg(c,j,y,f);this.list.FK(k,h)}},MRb:J(),fs:function(a,b,c,d,f){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.item."+a),b);a.l(0,2);a.setData({type:d,Mua:f||q,description:q});this.m(a);this.Tj.jd(a,c,0);return this.Vd[c]=a},BQ:function(a,b){for(var c=0;c<this.Vd.length;c++){a!=this.Vd[c]&&this.Vd[c].ff(y);if(b)this.Vd[c].focus=y}},sF:function(){for(var a=
8,b=q,c=0;c<this.Vd.length;c++){b=this.Vd[c];b.a.g.x=a;a=a+b.a.size.x}},Vya:function(a,b){if(b>=0){var c=new ig.ec(this.s,112,480,19,18);a.m(c)}},FUa:function(a){var b=new ig.ec(this.s,256,480,19,17);b.l(0,0);a.m(b)},Osb:function(a){a.jLa(a.a.children.length-1)}});sc.Yz.kF=ig.vn.extend({gb:new ig.jc("media/gui/buttons.png",{width:15,height:0,left:9,top:20,right:4,bottom:0,Vb:{"default":{x:0,y:92},focus:{x:32,y:92},pressed:{x:64,y:92}}}),text:"",Y:"item-default",data:q,OIa:y,re:q,JUb:q,xAa:28,wWa:106,
f:function(a,b,c,d,f){this.parent(h,h);this.xAa=d||28;this.wWa=c||106;this.F(this.xAa,20);this.text=a||"";this.Y=b||"item-default";this.OIa=f||y;this.re=new sc.ea(this.N4(),{speed:ig.Rd.se.zg});this.re.H(ig.k.hb,ig.k.vb);this.re.l(8,0);this.m(this.re)},setData:function(a){if(a!=g)this.data=a},N4:function(){return this.Yc?this.OIa?this.text:"\\i["+this.Y+"]"+this.text:this.OIa?this.Y:"\\i["+this.Y+"]"},Da:function(a){var b="default";this.yk&&this.Yc?b="pressed":this.focus&&(b="focus");this.gb.nb(a,
this.a.size.x,this.a.size.y,b)},ff:function(a){var b=this.Yc;this.parent(a);if(b!=this.Yc){this.re.ga(this.N4());this.a.size.x=this.Yc?this.wWa:this.xAa;this.U7a(this.Yc)}},U7a:J()})});ig.J=h;
ig.N("game.feature.menu.gui.item.item-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.item.item-status-equip","game.feature.menu.gui.item.item-status-default","game.feature.menu.gui.item.item-status-buffs","game.feature.menu.gui.item.item-status-favs","game.feature.menu.gui.item.item-status-trade","game.feature.menu.gui.item.item-list").K(function(){sc.Hib=sc.uw.extend({Hb:q,uN:q,$d:q,m8:q,o8:q,l8:q,UO:q,n8:q,p8:q,Vv:q,sJ:q,yc:q,kb:q,f:function(){this.parent();
this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.$d=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.$d.dg=h;this.$d.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.$d.a.size.y},
time:0.2,p:KEY_SPLINES.LINEAR}};this.$d.cc=this.gH.bind(this);this.yc=new sc.uRa;this.m8=new sc.Lib;this.m(this.m8);this.o8=new sc.Eib;this.m(this.o8);this.l8=new sc.Kib;this.m(this.l8);this.UO=new sc.Jib;this.m(this.UO);this.sJ=new sc.Aib;this.m(this.sJ);this.UO.we={size:{x:this.UO.a.size.x+2,y:this.UO.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.buffs",description:"sc.gui.menu.help.item.description.buffs"},index:{x:0,y:3}};this.n8=new sc.Mib;this.m(this.n8);this.p8=
new sc.AL;this.m(this.p8);this.Vv=new sc.Yz;this.m(this.Vv);this.uN=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.item.set-fav"),g,h,sc.Mc.$c);this.uN.ac=q;this.uN.dg=h;this.uN.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.uN.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.uN.cc=this.aGb.bind(this);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.m8.Oc();this.o8.Oc();this.l8.Oc();this.UO.Oc();this.sJ.Oc();this.n8.Oc();this.p8.Oc();this.Vv.Oc()},Ic:function(){sc.P.Hc(sc.e,
this);this.m8.Ic();this.o8.Ic();this.l8.Ic();this.UO.Ic();this.sJ.Ic();this.n8.Ic();this.p8.Ic();this.Vv.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);this.fn();if(sc.e.lo==-1)sc.e.lo=1;this.GW(this.Vv.pm());sc.e.lo==0?this.$d.setActive(y):this.$d.setActive(h);this.m8.Yd();this.o8.Yd();this.l8.Yd();this.UO.Yd();this.n8.Yd();this.p8.Yd();this.Vv.Yd()},pl:function(){sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){this.Ic();sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.uN);sc.e.Z.Te(this.$d);
this.kb=q;this.yc.Aa&&this.yc.xk();this.m8.Gd();this.o8.Gd();this.l8.Gd();this.UO.Gd();this.sJ.Gd();this.n8.Gd();this.p8.Gd();this.Vv.Gd()},gn:function(){return sc.ba.Hs()},Qn:function(){this.sJ.Gd(h);sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt(sc.e.lo!=1)},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.inventory.title"),ig.lang.get("sc.gui.menu.help-texts.inventory.pages"),function(){this.xh(h);ig.input.Id?sc.e.Z.eg?this.sJ.Yd():this.sJ.LNa=y:this.sJ.LNa&&
this.sJ.Yd()}.bind(this),h);this.kb.tf.push(sc.e.NFa.jr);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},nGb:function(){return sc.ba.ND()},aGb:function(){this.Vv.cMa()},eH:function(){return sc.ba.ON()},gH:function(){if(this.yc.Aa)this.yc.xk();else{ig.X.vd(this.yc);this.yc.R7(this.$d)}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.uN,this.nGb.bind(this));sc.e.Z.Jd(this.$d,this.eH.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("uN").bind(this));sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));
sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},GW:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.$d.ga(b+("\\c[3]"+a+"\\c[0]"));sc.e.$u()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.GW(c.text);else if(b==sc.fa.yI){this.yc.Aa&&this.yc.xk();if(c!=sc.e.lo){this.GW(this.Vv.pm());sc.e.lo==0?this.$d.setActive(y):this.$d.setActive(h)}}}})});ig.J=h;
ig.N("game.feature.menu.gui.map.map-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.numbers","game.feature.menu.gui.menu-misc").K(function(){var a=[],b=0,c=0;sc.Zwa=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),key:q,Maa:h,floor:0,mo:q,map:q,description:q,name:q,f:function(a,b,c,d,l){this.parent();this.F(16,16);this.l(b.x-8,b.y-8);this.key=a;this.mo=b;this.floor=c;this.map=d;this.Maa=sc.map.XGa(a,l,h);this.name=(a=sc.map.F1a(this.key).name)?ig.Ra.ic(a):
q;this.description=(a=sc.map.F1a(this.key).description)?ig.Ra.ic(a):q},Da:function(a){if(this.Maa)if(this.focus&&this.floor==sc.map.Tk){a.na(this.s,-5,-6,450,170,28,28).yi("lighter");a.na(this.s,0,0,464,144,16,16)}else a.na(this.s,0,0,448,144,16,16);else this.focus&&this.floor==sc.map.Tk?a.na(this.s,0,0,624,144,16,16):a.na(this.s,0,0,608,144,16,16)},JG:function(){if(!(this.floor!=sc.map.Tk||sc.e.TG||ig.La.zh()||sc.e.fT)){if(sc.e.MD)return sc.e.fk==this;if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(sc.e.cfa){sc.e.YH(this);
return y}if(a<=10){a=this.a;sc.e.Rca(a.g.x+Math.floor(a.size.x/2)+sc.e.bn.x,a.g.y+Math.floor(a.size.y/2)+1+sc.e.bn.y,this,h);return h}sc.e.YH(this)}else if(ig.input.qb==ig.Yb.xm){var d=Math.floor(sc.ba.Kp()),j=Math.floor(sc.ba.Ln());if(j<=21||j>=299){sc.e.YH(this);return y}a=this.a;b=a.Yf.x;c=a.Yf.y;(d=d>=b&&d<=b+15&&j>=c&&j<=c+16)?sc.e.Rca(a.g.x+Math.floor(a.size.x/2)+sc.e.bn.x,a.g.y+Math.floor(a.size.y/2)+1+sc.e.bn.y,this):sc.e.YH(this);return d}return y}},lG:function(){return Math.floor(Vec2.HR(sc.e.Be.x-
sc.e.bn.x,sc.e.Be.y-sc.e.bn.y,this.a.g.x+Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))}});sc.Pjb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(a){this.parent();this.l(a.g.x,a.g.y);this.F(a.size.x,a.size.y);var a=648+(a.size.x<=24||a.size.y<=24?0:16),b=new ig.ec(this.s,a,144,16,16);b.H(ig.k.hb,ig.k.$);b.l(-3,-3);this.m(b);b=new ig.ec(this.s,a,144,16,16);b.H(ig.k.ra,
ig.k.$);b.Pd=h;b.l(-2,-3);this.m(b);b=new ig.ec(this.s,a,144,16,16);b.$h=h;b.H(ig.k.hb,ig.k.Cb);b.l(-3,-2);this.m(b);b=new ig.ec(this.s,a,144,16,16);b.H(ig.k.ra,ig.k.Cb);b.$h=h;b.Pd=h;b.l(-2,-2);this.m(b)}});sc.RRa=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:2,height:2,left:3,top:3,right:3,bottom:3,Vb:{"default":{x:296,y:448}}}),text:q,f:function(){this.parent(8,8);this.a.nd=
0.8;this.text=new sc.ea("T",{font:sc.Ea.Ib});this.text.H(ig.k.Ia,ig.k.vb);this.m(this.text);this.a.size.y=this.text.a.size.y+2},ga:function(a,b,c){if(a){this.j("DEFAULT",b?y:h,y,q,b||0);this.text.ga(a);this.F(this.text.a.size.x+4,this.text.a.size.y+2)}else this.j("HIDDEN",c)}});sc.bqb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),name:q,VFa:y,Lc:y,f:function(){this.parent();this.name=new sc.RRa;this.name.H(ig.k.ra,ig.k.$);this.m(this.name)},Da:function(a){this.parent(a);this.Lc?this.VFa&&a.na(this.s,
this.a.size.x,-3,320,461,3,3):this.VFa&&a.na(this.s,0,this.a.size.y-3,320,461,3,3)},ga:function(a,b,c){this.name.ga(a,b,c);this.VFa=a!="";this.a.size.x=this.name.a.size.x+3;this.a.size.y=this.name.a.size.y+3},AU:function(a){this.Lc=a||y}});sc.gxa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),focusOffset:{x:0,y:8},focus:y,lh:0,fi:0,Ui:0,pj:0,Pl:y,D2:y,r2:y,f:function(a){this.parent();this.F(11,24);this.D2=a||y},nu:function(a,b){this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y);
this.focus=h;this.lh=0;this.fi=0.15;this.Ui=0},Om:function(){this.focus=y;this.fi=this.lh=0.15;this.Ui=0},moveTo:function(a,b,c,d){c&&ig.input.qb==ig.Yb.Wc?this.kd(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y,d,KEY_SPLINES.EASE):this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y);if(this.focus){this.lh=0;this.fi=0.15;this.Ui=3;this.focus=y}},CEb:function(){this.fi=this.lh=0.15;this.Ui=0},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,
this)},update:function(){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}if(this.lh<this.fi){this.lh=this.lh+ig.i.ja;if(this.lh>=this.fi){this.lh=this.fi;this.Ui=this.focus?3:0}else this.Ui=(this.fi?1:-1)*(this.lh/this.fi)*3}},Da:function(a){if(this.focus)a.na(this.s,0,-1+this.Ui,434,146,11,17);else if(this.Pl){a.na(this.s,1,0,419,147,9,14);a.na(this.s,1,this.a.size.y-9,483,147,9,9).yi("lighter")}},Ab:function(a,b,c){if(!this.r2&&a==sc.e)if(b==sc.fa.w1){this.Om();if(ig.input.qb==
ig.Yb.Wc)this.Pl=h}else if(b==sc.fa.bW){this.fi=this.lh=0.15;this.Ui=0}else b==sc.fa.bxa?this.D2&&this.nu(sc.e.Ji.x,sc.e.Ji.y):b==sc.fa.cxa?this.D2||this.nu(sc.e.Be.x,sc.e.Be.y):b==sc.fa.J9?this.D2==c&&this.Om():b==sc.fa.axa&&(this.focus||(c?this.nu(sc.e.Ji.x,sc.e.Ji.y):this.nu(sc.e.Be.x,sc.e.Be.y)))}});sc.Ojb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),Qa:q,max:q,oaa:-1,dAa:-1,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-70},time:0.2,p:KEY_SPLINES.LINEAR}},
f:function(){this.parent();this.F(58,11);this.H(ig.k.hb,ig.k.Cb);this.l(12,24);this.Qa=new sc.Tb(99,{leadingZeros:2});this.Qa.l(26,2);this.Qa.H(ig.k.ra,ig.k.$);this.m(this.Qa);this.max=new sc.Tb(99,{leadingZeros:2});this.max.H(ig.k.ra,ig.k.$);this.max.l(0,2);this.m(this.max);this.we={type:"INFO",content:{title:"sc.gui.menu.help.map.titles.chest",description:"sc.gui.menu.help.map.description.chest"},offset:{x:-3,y:-2},size:{x:"dyn",y:15,oi:6},index:{x:0,y:1}};this.j("HIDDEN",h)},update:function(){var a=
sc.map.Bzb();if(a!=this.dAa){this.dAa=a;this.max.za(a)}a=sc.pa.Qf("chests",sc.map.uj.path)||0;if(a!=this.oaa){this.oaa=a;this.Qa.za(Math.min(this.dAa,a))}},Da:function(a){a.na(this.s,0,0,280,448,11,11);a.na(this.s,33,2,80,408,8,8)}});sc.akb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),Qa:q,max:q,oaa:-1,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-70},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.F(58,11);this.H(ig.k.hb,ig.k.Cb);this.l(12,
42);this.Qa=new sc.Tb(99,{leadingZeros:2});this.Qa.l(26,2);this.Qa.H(ig.k.ra,ig.k.$);this.m(this.Qa);this.max=new sc.Tb(99,{leadingZeros:2});this.max.za(sc.Xja,h);this.max.H(ig.k.ra,ig.k.$);this.max.l(0,2);this.m(this.max);this.we={type:"INFO",content:{title:"sc.gui.menu.help.map.titles.stamps",description:"sc.gui.menu.help.map.description.stamps"},offset:{x:-3,y:-2},size:{x:"dyn",y:15,oi:6},index:{x:0,y:0}};this.j("HIDDEN",h)},update:function(){var a=sc.e.I2a(sc.map.uj.path);if(a!=this.oaa){this.oaa=
a;this.Qa.za(Math.min(sc.Xja,a))}},Da:function(a){a.na(this.s,0,0,280,460,11,11);a.na(this.s,33,2,80,408,8,8)}});sc.Rjb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),ob:q,name:"???",aa:0,alpha:1,fr:0,f:function(a,b){this.parent(h,h);this.F(62,34);this.name=a||"???";this.aa=b||0;this.dg=h;this.ob=new sc.ea(this.name,{speed:ig.Rd.se.zg});this.ob.H(ig.k.Ia,ig.k.vb);this.ob.l(0,-2);this.m(this.ob)},Lo:function(a){this.parent(a);if(this.focus){this.fr=0;this.alpha=1}},$y:function(a,b){if(!sc.e.MD){this.parent(a,
b);if(!sc.e.a6&&a&&!sc.e.MD)sc.e.a6=h}},update:function(){this.fr=(this.fr+ig.i.Sa)%1;var a=this.fr/1,a=KEY_SPLINES.EASE_IN_OUT.get(1-(a>0.5?1-(a-0.5)*2:a*2));this.alpha=0.8*a+0.2},Da:function(a){a.na(this.s,0,0,314,384+(this.focus?34:0),62,34);this.focus?a.na(this.s,0,0,376,384,62,34).ge(this.alpha):this.Yc&&a.na(this.s,0,0,376,384,62,34)}});sc.Sjb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),Ha:q,pZ:q,HUb:[],RI:q,zla:y,Gla:q,jaa:0,iaa:0,f:function(){this.parent();this.a.R={DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-87},time:0.2,p:KEY_SPLINES.LINEAR}};this.l(25,33);this.H(ig.k.ra,ig.k.$);this.j("HIDDEN",h);this.Gla=sc.gd.submit;this.Ha=new sc.wh;this.Ha.CS=h;this.Ha.Ql(this.dGb.bind(this));this.pZ=new ig.ec(this.s,280,388,34,20);this.pZ.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.pZ.j("HIDDEN",h);if(sc.map.kN()){this.RI=sc.map.kN().floors;this.F(62,34*this.RI.length+-8*Math.max(0,
this.RI.length-1));this.fVa(h)}},Yd:function(){sc.e.Z.KQ(this.Ha);this.j("DEFAULT")},Gd:function(){sc.e.Z.lU(this.Ha);this.j("HIDDEN")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},mSb:function(){this.zla=h;this.Gla.play();sc.e.NLa(sc.map.Tk)},update:function(){if(this.RI&&!sc.e.TG&&!sc.e.fT&&!sc.e.yG){var a=-1E4;if(this.Yc("circle-right",ig.od.rV,ig.od.GV)){a=sc.map.Tk+1;if(a>this.iaa)a=this.jaa}else if(this.Yc("circle-left",ig.od.oV,ig.od.YV)){a=sc.map.Tk-1;if(a<this.jaa)a=
this.iaa}if(a>-1E4&&a!=sc.map.Tk){this.Gla.play();sc.e.NLa(a);if(sc.e.fk)this.BG=sc.e.fk=q}}},Yc:function(a,b,c){return ig.input.Yc(a)||ig.Xc.Nj(b)||ig.Xc.Nj(c)},dGb:function(a){if(a.aa!=g){this.zla=h;this.Gla.play();sc.e.NLa(a.aa||0)}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.w1)if(this.zla)this.zla=y;else{if(a=this.Ha.elements[0])for(b=a.length;b--;)a[b]&&(a[b].aa!=g&&a[b].aa==sc.map.Tk)&&this.Ha.EU(a[b])}else if(b==sc.fa.MV)c?this.Gd():this.Yd();else if(b==sc.fa.I9){this.RI=sc.map.kN().floors;
this.F(62,34*this.RI.length+-8*Math.max(0,this.RI.length-1));this.fVa(h);this.Yd()}},fVa:function(b){this.a.rh();this.Ha.clear();this.pZ.j("HIDDEN",h);var c=this.RI.length,d=0,k=q,l=0,k=y,m=0,n=q;this.jaa=1E5;for(this.iaa=-1E5;c--;){n=this.RI[c].maps;l=this.RI[c].level;m=n.length;for(k=y;m--;)if(ig.ma.zd.maps[n[m].path.np().vm("","")]){k=h;break}if(k){if(l<this.jaa)this.jaa=l;if(l>this.iaa)this.iaa=l;k=new sc.Rjb(this.Brb(l,c),l);k.l(0,d);this.Ha.jd(k,0,c);if(sc.map.Tk==l){this.Ha.EU(k);if(sc.map.gi==
sc.map.uj){this.pZ.l(45,d-3);this.pZ.j("DEFAULT",b||y)}}d=d+26;a.push(k)}}for(c=a.length;c--;)this.m(a[c]);this.m(this.pZ);a.length=0},Brb:function(a,b){var c=sc.map.kN().floors[b];return c&&c.handle?ig.Ra.ic(c.handle):a==0?ig.lang.get("sc.gui.menu.map-menu.gf"):a<0?ig.lang.get("sc.gui.menu.map-menu.base-short")+Math.abs(a):Math.abs(a)+ig.lang.get("sc.gui.menu.map-menu.floor-short")}});sc.fgb=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:0},time:0.2,
p:KEY_SPLINES.LINEAR}},text:q,f:function(){this.parent(sc.rg.pTa);this.l(2,24);this.H(ig.k.ra,ig.k.Cb);this.text=new sc.ea("",{font:sc.Ea.Ib});this.text.l(0,1);this.text.H(ig.k.Ia,ig.k.$);this.m(this.text)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.text.ga(ig.lang.get("sc.gui.menu.map-menu.area")+sc.map.G1a());var a=this.text.a;this.F(a.size.x+6,a.size.y+2);this.FU("HIDDEN","offsetX",-(a.size.x+2));this.j("DEFAULT")},Gd:function(){this.j("HIDDEN")},Ab:function(a,
b,c){a==sc.e&&(b==sc.fa.MV?c?this.Gd():this.Yd():b==sc.fa.I9&&this.Yd())}});var d=["black","red","green","blue","yellow","pink","cyan","orange","purple","wheat"];sc.JPb=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},floor:q,f:function(){this.parent();if(sc.map.kN()){this.floor=sc.map.kN().floors;this.j("HIDDEN",h)}},Da:function(a){this.parent(a);if(this.floor)for(var b=this.floor.length,c=q,k=0;b--;){for(var c=this.floor[b].tiles,
l=0;l<c.length;l++)for(var m=0;m<c[0].length;m++)c[l][m]&&a.nc(d[c[l][m]%d.length],m*4,l*4+k,4,4);k=k+(c.length*4+4)}}})});ig.J=h;
ig.N("game.feature.menu.gui.map.map-stamp").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.numbers","game.feature.menu.gui.menu-misc").K(function(){var a=0,b=0,c=0,d=0;sc.Wja={DEFAULT:{Y:0},CHEST:{Y:1},ENEMY:{Y:2},GREEN:{Y:3},SECRET:{Y:4},QUEST:{Y:5},UNKNOWN:{Y:6},XXX:{Y:7},ARROW_RIGHT:{Y:15},ARROW_LEFT:{Y:16},ARROW_UP:{Y:17},ARROW_DOWN:{Y:18},ARROW_DOWN_RIGHT:{Y:19},ARROW_DOWN_LEFT:{Y:20},ARROW_UP_RIGHT:{Y:21},ARROW_UP_LEFT:{Y:22}};sc.Fka=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),
key:"DEFAULT",Y:{x:0,y:0},floor:0,T0a:q,name:"",index:-1,Maa:h,f:function(a,b,c,d,l,m){this.parent();this.F(8,8);this.l(b-4,c-4);this.T0a=m;this.index=l;this.key=a||"DEFAULT";a=sc.Wja[this.key].Y;this.Y.x=a%15;this.Y.y=~~(a/15);this.floor=d||0;this.name=ig.lang.get("sc.gui.menu.map-menu.stamps."+this.key)},Rta:function(a){this.key=a||"DEFAULT";a=sc.Wja[this.key].Y;this.Y.x=a%15;this.Y.y=~~(a/15);this.name=ig.lang.get("sc.gui.menu.map-menu.stamps."+this.key)},Da:function(a){a.na(this.s,1,1,56+this.Y.x*
8,288+this.Y.y*8,8,8)},JG:function(){if(!(this.floor!=sc.map.Tk||sc.e.TG||ig.La.zh()||sc.e.fT)){if(sc.e.MD)return sc.e.fk==this;if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(sc.e.cfa){sc.e.YH(this);return y}if(a<=6){a=this.a;sc.e.Rca(a.g.x+Math.floor(a.size.x/2)+sc.e.bn.x,a.g.y+Math.floor(a.size.y/2)+1+sc.e.bn.y,this,h)}else sc.e.YH(this)}else if(ig.input.qb==ig.Yb.xm){var b=Math.floor(sc.ba.Kp()),j=Math.floor(sc.ba.Ln());if(j<=21||j>=299){sc.e.YH(this);return y}a=this.a;c=a.Yf.x;d=a.Yf.y;(b=b>=c&&
b<=c+7&&j>=d&&j<=d+8)?sc.e.Rca(a.g.x+Math.floor(a.size.x/2)+sc.e.bn.x,a.g.y+Math.floor(a.size.y/2)+1+sc.e.bn.y,this):sc.e.YH(this);return b}return y}},lG:function(){return Math.floor(Vec2.HR(sc.e.Be.x-sc.e.bn.x,sc.e.Be.y-sc.e.bn.y,this.a.g.x+Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))}});sc.kob=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:6,height:6,left:9,
top:9,right:9,bottom:9,Vb:{"default":{x:432,y:304}}}),RM:q,anchor:q,Su:[],Ha:q,NI:y,f:function(){this.parent(70,111);this.RM=new sc.mc(ig.lang.get("sc.gui.menu.map-menu.delete"),64,h,sc.Mc.wI);this.RM.l(3,3);this.RM.data={RM:h};this.RM.re.H(ig.k.Ia,ig.k.vb);this.RM.re.l(0,0);this.m(this.RM);this.Ha=new sc.wh;this.Ha.OO=h;this.Ha.Rk(J().bind(this));this.Ha.Ql(function(a){if(a.data.RM){sc.e.gJb(sc.map.uj.path,this.anchor.index);sc.e.YH(this.anchor);sc.e.Dk();this.anchor.T0a.yH(this.anchor);this.hide()}else if(a.data.SMb){this.anchor.Rta(a.key);
sc.e.Cxb(this.anchor.index,sc.map.uj.path,a.key);sc.e.YH(this.anchor);sc.e.Dk();this.hide()}}.bind(this));this.Ha.jd(this.RM,0,0);this.Hwb();this.Ha.gEa();this.j("HIDDEN",h)},show:function(c){if(!this.NI){this.NI=h;sc.e.MD=y;this.a.hi=="DEFAULT"&&this.j("HIDDEN",h);this.anchor=c;sc.e.fT=h;sc.e.Z.hh(this.Ha);sc.e.rl(this.xFb.bind(this));c=c.a;this.tEb(c.g.x+sc.e.bn.x+sc.e.ve.x-70-2,c.g.y+sc.e.bn.y+sc.e.ve.y+3);this.l(a,b);this.dOb();this.ZHb(this.anchor.key);ig.input.qb!=ig.Yb.Wc?this.Ha.tl(0,0):this.Ha.Sg(0,
0,y,h);this.j("DEFAULT")}},hide:function(a){if(this.NI){this.NI=y;a&&sc.e.Dk();sc.e.fT=y;sc.e.Z.sl(this.Ha);this.j("HIDDEN")}},Hwb:function(){var a=3,b=25,c=0,d=1,l=0,m;for(m in sc.Wja){var n=new sc.lob(m);n.data={SMb:h};n.l(a,b);this.m(n);this.Ha.jd(n,c,d);this.Su[l]=n;c++;a=a+16;l++;if(c>=4){c=0;d++;a=3;b=b+21}}},tEb:function(c,d){a=c;b=d;a<1&&(c=c+80);b+111>=298&&(d=d-111);a=c;b=d},dOb:function(){for(var a=this.Su.length;a--;)this.Su[a].ff(y)},ZHb:function(a){for(var b=this.Su.length;b--;)a==this.Su[b].key&&
this.Ha.EU(this.Su[b])},Da:function(a){this.parent(a);a.nc("#292b2f",2,23,66,1)},xFb:function(){sc.e.Dk();this.hide()}});sc.lob=sc.mc.extend({Hr:new ig.ia("media/gui/menu.png"),key:"DEFAULT",Y:{x:0,y:0},No:q,f:function(a){this.parent("",16,h,sc.Mc.wL,q,h);this.zfa=h;this.key=a||"DEFAULT";a=sc.Wja[a].Y;this.Y.x=a%15;this.Y.y=~~(a/15);this.No=new ig.ec(this.Hr,56+this.Y.x*8,288+this.Y.y*8,8,8);this.No.H(ig.k.Ia,ig.k.vb);this.m(this.No)}})});ig.J=h;
ig.N("game.feature.menu.gui.map.map-floor").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.area-loadable").K(function(){function a(a,b,c,j,k){f=sc.Leb[j.dir];i=k?f.Ur:f.first;d.x=a;d.y=b;a=Math.max(0,j.size-1);c.nb(d.x+i.J6,d.y+i.K6,i.x,i.y,i.Oia,i.Hda);d.x=d.x+f.step.x;for(d.y=d.y+f.step.y;a--;){c.nb(d.x+i.J6,d.y+i.K6,281,411,i.Vc,i.sd);d.x=d.x+f.step.P0;d.y=d.y+f.step.Q0}c.nb(d.x+i.J6,d.y+i.K6,i.x+f.step.x,i.y+f.step.y,i.Oia,i.Hda)}function b(a,b,c,f){f.fill&&
c.nb(a,b,284,412,8,8);if(f.offset){d.x=f.offset.x;d.y=f.offset.y}else{d.x=0;d.y=0}c.nb(a+d.x,b+d.y,f.src.x,f.src.y,f.size[0],f.size[1]);f.MU&&c.nb(a+f.MZ.x,b+f.MZ.y,f.MU.x,f.MU.y,f.size[2],f.size[3])}function c(a,b,c,d){return a<0||b<0||a>=c[0].length||b>=c.length?0:c[b][a]==d?1:0}sc.Zjb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),Cta:q,buffer:q,floor:q,name:"default_empty",id:0,BLa:1,gOa:0,fOa:0,Aa:y,J0:y,aE:y,f:function(a,b,c){this.parent();this.Cta=a;this.name=a.name.np().vm("","");this.J0=
ig.ma.zd.maps[this.name]?h:y;this.floor=b;this.id=c;b=a.name==sc.map.uR;a.Pz&&(b=b&ig.r.cb.b.aa>=a.Pz);a.Oz&&(b=b&ig.r.cb.b.aa<=a.Oz);this.Aa=b;this.gOa=Math.max(0,a.max.x-a.min.x);this.fOa=Math.max(0,a.max.y-a.min.y);this.l(a.min.x*8,a.min.y*8);this.F(this.gOa*8,this.fOa*8)},JT:function(a){a?this.Ksa():this.iR()},pi:function(){this.iR()},Da:function(a){this.aE&&a.na(this.buffer,0,0,0,0).ge(this.BLa)},Ksa:function(){if(!this.aE&&this.J0){this.buffer=ig.Mp.mD(this.gOa*8,this.fOa*8,function(){for(var d=
this.Cta,f=this.floor.tiles,i=this.floor.connections,p=this.s,r=this.Aa,u=d.id,w=0,z=0,v=q,x=0,A=0,F=h,B=q,C=j,K=ig.i.context,I=[],G=d.min.y;G<d.max.y;G++){for(var w=0,D=d.min.x;D<d.max.x;D++){if(f[G][D]==u){for(x=0;x<C.length;++x)I[x]=c(D+C[x].x,G+C[x].y,f,u);for(x=l.length;x--;){B=l[x];v=B.Nb;F=h;for(A=k.length;A--;)if(v[A]!=I[k[A]]){F=y;break}if(F){b(w,z,p,B);break}}for(x=m.length;x--;){B=m[x];v=B.Nb;F=h;for(A=I.length;A--;)if(v[A]!=-1&&v[A]!=I[A]){F=y;break}F&&b(w,z,p,B)}}w=w+8}z=z+8}x=i.length;
for(w=new ig.de("");x--;){v=i[x];if(v.map1+1==u||v.map2+1==u)if(v.condition!=g){w.lz(v.condition);w.evaluate()&&a((v.tx-d.min.x)*8,(v.ty-d.min.y)*8,p,v,v.map2+1==u)}else a((v.tx-d.min.x)*8,(v.ty-d.min.y)*8,p,v,v.map2+1==u)}if(r){z=0;for(G=d.min.y;G<d.max.y;G++){w=0;for(D=d.min.x;D<d.max.x;D++){if(f[G][D]==u){i=w;r=z;v=p;x=K;A=c(D+1,G,f,u)!=1;F=c(D,G+1,f,u)!=1;B=x.globalAlpha;x.globalAlpha=x.globalAlpha*0.3;v.nb(i,r,292,436,8-(A?1:0),8-(F?1:0));x.globalAlpha=B}w=w+8}z=z+8}}}.bind(this));this.aE=h}},
iR:function(){if(this.aE){this.buffer.BK();this.buffer=q;this.aE=y}}});sc.Tjb=ig.da.extend({s:new ig.ia("media/gui/area-icons.png"),offsetX:0,offsetY:0,map:0,Y:"",f:function(a,b,c,d,f){this.parent();var i=Math.floor(this.s.width/12);this.Y=sc.pPa[c]||sc.pPa.arrow_up;var j=this.Y.index;this.map=d||q;this.offsetX=j%i*12;this.offsetY=Math.floor(j/i)*12;this.l(a-6,b-6);this.F(12,12);f&&this.map&&this.map.J0&&this.Y.type==sc.T8.S8&&f.area&&this.qwb(f,c,a,b)},Da:function(a){this.map&&this.map.J0&&a.na(this.s,
this.a.size.x/2-6,0,this.offsetX,this.offsetY,12,12)},qwb:function(a,b,c,d){var f="???";a.map&&ig.ma.zd.maps[a.map.np().vm("","")]&&(f=sc.map.Kv(a.area));var i=new ig.mf("black");i.a.nd=0.5;f=new sc.ea(f,{font:sc.Ea.Ib});f.H(ig.k.Ia,ig.k.vb);i.F(f.a.size.x+4,f.a.size.y+2);switch(b){case "area_up":i.l(0,-(i.a.size.y+1));i.H(ig.k.Ia,ig.k.$);break;case "area_down":i.l(0,13);i.H(ig.k.Ia,ig.k.$);break;case "area_left":i.l(i.a.size.x/2-6-(i.a.size.x+1),1);i.H(ig.k.hb,ig.k.vb);break;case "area_right":i.l(i.a.size.x/
2-6+13,1);i.H(ig.k.hb,ig.k.vb)}if(a.offset){i.a.g.x=i.a.g.x+a.offset.x;i.a.g.y=i.a.g.y+a.offset.y}i.m(f);this.m(i);this.F(i.a.size.x,i.a.size.y);this.l(c-this.a.size.x/2,d-6)}});sc.Qjb=ig.da.extend({R:{DEFAULT:{state:{},time:0.4,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_FAST:{state:{alpha:0},time:0.4,p:KEY_SPLINES.LINEAR}},floor:q,name:"",gf:q,T5a:q,CLa:q,H2:q,Gb:q,au:{x:1E5,y:1E5,width:-1,height:-1},f:function(a,b){this.parent();this.Gb=b||q;this.floor=a;
this.name=a.name?ig.Ra.ic(a.name):"";this.CLa=this.floor.rooms;this.l(0,0);this.F(a.tiles[0].length*8,a.tiles.length*8);this.j("HIDDEN",h)},Vo:function(){var a=this.lza();if(this.H2){this.T5a=new sc.Pjb(this.H2);this.m(this.T5a)}this.Mqb(a);this.Gb&&this.Gb(h,this,a)},update:J(),Da:J(),Tab:function(){this.Oc();this.j("DEFAULT");this.$Ya(h,h)},yCb:function(){this.Ic();this.j("HIDDEN")},$Ya:function(a,b){sc.map.Tk!=this.floor.level?this.j("HIDDEN_FAST",a):b||this.j("DEFAULT",a)},Yub:function(){this.kd(this.a.g.x,
(sc.map.Tk-this.floor.level)*8,0.3,KEY_SPLINES.EASE)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Ab:function(a,b){if(a==sc.e&&b==sc.fa.w1){this.Yub();this.$Ya(y)}},DRb:function(){for(var a=this.a.children,b=a.length;b--;)if(a[b].X.BLa!=g)a[b].X.BLa=this.lF},Mqb:function(a){for(var b=q,b=q,c=this.floor.icons,d=c.length;d--;){b=c[d];b=new sc.Tjb(b.x,b.y,b.icon,a[b.map],b.data);this.m(b)}},lza:function(){for(var a=q,b=q,c=[],d=[],f=0;f<this.CLa.length;f++)if(a=this.CLa[f]){b=
new sc.Zjb(a,this.floor,this.floor.level);if(b.Aa){this.H2=b.a;d.push(b.a)}if(b.J0){if(b.a.g.y<this.au.y)this.au.y=b.a.g.y;if(b.a.g.y<this.au.x)this.au.x=b.a.g.x;if(b.a.g.x+b.a.size.x>this.au.width)this.au.width=b.a.g.x+b.a.size.x;if(b.a.g.y+b.a.size.y>this.au.height)this.au.height=b.a.g.y+b.a.size.y}c[a.id-1]=b}if(d.length>=2){a=new ig.da;d=this.nzb(d);a.a.g.x=d.x;a.a.g.y=d.y;a.a.size.x=d.width;a.a.size.y=d.height;this.H2=a.a}for(f=0;f<c.length;f++)c[f]&&c[f].J0&&this.m(c[f]);this.au.width=this.au.width-
this.au.x;this.au.height=this.au.height-this.au.y;return c},nzb:function(a){for(var b=0,c=0,d=0,f=0,b=a[0].g.x,c=a[0].g.y,d=b+a[0].size.x,f=c+a[0].size.y,i=1;i<a.length;i++){if(a[i].g.x<b)b=a[i].g.x;if(a[i].g.y<c)c=a[i].g.y;a[i].g.x+a[i].size.x>d&&(d=a[i].g.x+a[i].size.x);a[i].g.y+a[i].size.y>f&&(f=a[i].g.y+a[i].size.y)}return{x:b,y:c,width:d-b,height:f-c}}});var d=Vec2.vc(0,0),f=q,i=y,j=[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}],k=[1,3,4,6],l=[{Nb:[0,
0,0,0],src:{x:304,y:408},size:[8,8],fill:y},{Nb:[1,1,1,1],src:{x:284,y:412},size:[8,8],fill:y},{Nb:[0,0,1,1],src:{x:280,y:408},size:[8,8],fill:y},{Nb:[0,1,0,1],src:{x:288,y:408},size:[8,8],fill:y},{Nb:[1,0,1,0],src:{x:280,y:416},size:[8,8],fill:y},{Nb:[1,1,0,0],src:{x:288,y:416},size:[8,8],fill:y},{Nb:[1,0,1,1],src:{x:280,y:412},size:[8,8],fill:y},{Nb:[1,1,0,1],src:{x:288,y:412},size:[8,8],fill:y},{Nb:[1,1,1,0],src:{x:284,y:416},size:[8,8],fill:y},{Nb:[0,1,1,1],src:{x:284,y:408},size:[8,8],fill:y},
{Nb:[0,1,1,0],src:{x:284,y:408},size:[8,4,8,4],MU:{x:284,y:420},MZ:{x:0,y:4},fill:y},{Nb:[1,0,0,1],src:{x:280,y:412},size:[4,8,4,8],MU:{x:292,y:412},MZ:{x:4,y:0},fill:y},{Nb:[0,1,0,0],src:{x:288,y:408},size:[8,4,8,4],MU:{x:288,y:420},MZ:{x:0,y:4},fill:y},{Nb:[0,0,1,0],src:{x:280,y:408},size:[8,4,8,4],MU:{x:280,y:420},MZ:{x:0,y:4},fill:y},{Nb:[0,0,0,1],src:{x:280,y:408},size:[4,8,4,8],MU:{x:292,y:408},MZ:{x:4,y:0},fill:y},{Nb:[1,0,0,0],src:{x:280,y:416},size:[4,8,4,8],MU:{x:292,y:416},MZ:{x:4,y:0},
fill:y}],m=[{Nb:[-1,-1,-1,1,-1,0,1,-1],src:{x:296,y:412},size:[4,4],offset:{x:0,y:4}},{Nb:[-1,-1,-1,-1,1,-1,1,0],src:{x:300,y:412},size:[4,4],offset:{x:4,y:4}},{Nb:[0,1,-1,1,-1,-1,-1,-1],src:{x:296,y:408},size:[4,4],offset:{x:0,y:0}},{Nb:[-1,1,0,-1,1,-1,-1,-1],src:{x:300,y:408},size:[4,4],offset:{x:4,y:0}}]});ig.J=h;
ig.N("game.feature.menu.gui.map.map-area").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.map.map-floor","game.feature.menu.gui.map.map-misc").K(function(){var a=0,b=0,c=Vec2.vc(0,0),d=sc.gd.submit,f=sc.gd.Dv;sc.Mjb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();a=Math.floor(ig.i.width/2);b=Math.floor(ig.i.height/2)},Da:J()});sc.Njb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
background:new ig.ia("media/gui/env-white.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_WORLD:{state:{alpha:1,Xa:0.5,Va:0.5,Qb:0.5},time:0.2,p:KEY_SPLINES.LINEAR}},Lb:q,Ha:q,pA:Vec2.vc(0,0),Ci:Vec2.vc(-1E4,-1E4),aM:0,sW:y,iQ:0.1,J$:0.5,lF:0,xza:y,taa:-100,HW:0,NAa:0,MAa:0,ERb:0,IW:0,Ola:0.3,$ya:{},Pl:y,pj:0,Zv:q,BG:q,cursor:q,J5a:[],Su:[],f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/
2);if(!this.constructor.oj){this.constructor.oj=this.s.createPattern(440,400,32,32,ig.nf.Eg.eF);this.constructor.flb=this.s.createPattern(472,400,32,32,ig.nf.Eg.eF)}this.a.BU(h);this.Lb=new sc.Mjb;this.m(this.Lb);this.cursor=new sc.gxa;this.m(this.cursor);this.Zv=new sc.RRa;this.m(this.Zv);this.Ha=new sc.R9;this.Ha.CS=h;this.Ha.Rk(function(a){a.data?sc.e.Cc(a.data):a.description?sc.e.Cc(a.description):sc.e.Cc("",h)});this.Ha.jn(function(){sc.e.Cc("",h)});this.Ha.Ql(function(a){this.I7a(a)}.bind(this));
this.Ha.$l=function(){ig.input.qb==ig.Yb.Wc&&(sc.ba.Au()&&sc.e.fk)&&this.I7a(sc.e.fk)}.bind(this);this.u$a();this.MBa(h);this.Po();this.j("HIDDEN",h)},update:function(){sc.e.cfa=y;if(this.iQ<this.J$){this.iQ=this.iQ+ig.i.ja;if(this.iQ>=this.J$){this.iQ=this.J$;this.lF=1}else this.lF=this.iQ/this.J$}if(!sc.e.dfa){if(this.IW<this.Ola){this.IW=this.IW+ig.i.ja;var a=Math.min(1,Math.max(0,this.IW)/this.Ola),a=KEY_SPLINES.EASE.get(a);this.HW=this.MAa*(1-a)+this.NAa*a;if(a==1)this.IW=this.Ola}if(!ig.La.zh()&&
this.Ha.wc()&&!sc.e.fT){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb;a=q;if(ig.input.qb==ig.Yb.Wc){a=this.Ci;this.t5(a);sc.e.Be.x=a.x;sc.e.Be.y=a.y;this.ID();sc.e.ve.x=Math.floor(-a.x+ig.i.width/2);sc.e.ve.y=Math.floor(-a.y+ig.i.height/2);this.Po();this.Hl(sc.e.ve.x,sc.e.ve.y,0.3,KEY_SPLINES.EASE);this.cursor.moveTo(sc.e.Be.x,sc.e.Be.y);if(sc.e.fk)this.BG=sc.e.fk=q;this.hD(sc.e.Be.x,sc.e.Be.y,h)}else if(ig.input.qb==ig.Yb.xm){this.Ci.x=sc.e.Be.x;this.Ci.y=sc.e.Be.y;this.cursor.Om();
this.hD(sc.ba.Kp(),sc.ba.Ln())}sc.e.eva()}a=y;if(!this.a.uo){if(sc.ba.D6a(0.5)){sc.e.ve.x=Math.floor(sc.e.ve.x+250*ig.i.Sa);this.Po();this.a.scroll.x=sc.e.ve.x;a=h}else if(sc.ba.E6a(0.5)){sc.e.ve.x=Math.floor(sc.e.ve.x-250*ig.i.Sa);this.Po();this.a.scroll.x=sc.e.ve.x;a=h}if(sc.ba.F6a(0.5)){sc.e.ve.y=Math.floor(sc.e.ve.y+250*ig.i.Sa);this.Po();this.a.scroll.y=sc.e.ve.y;a=h}else if(sc.ba.C6a(0.5)){sc.e.ve.y=Math.floor(sc.e.ve.y-250*ig.i.Sa);this.Po();this.a.scroll.y=sc.e.ve.y;a=h}}if(!a&&ig.input.qb==
ig.Yb.Wc){var b=0,d=0,f=0;if((f=sc.ba.Cf(ig.Nd.wn))<-0.5){b=(-150+f*100)*ig.i.Sa;a=h}else if((f=sc.ba.Cf(ig.Nd.wn))>0.5){b=(150+f*100)*ig.i.Sa;a=h}if((f=sc.ba.Cf(ig.Nd.xn))<-0.5){d=(-150+f*100)*ig.i.Sa;a=h}else if((f=sc.ba.Cf(ig.Nd.xn))>0.5){d=(150+f*100)*ig.i.Sa;a=h}if(a){sc.e.cfa=h;sc.e.Be.x=b>=0?Math.floor(sc.e.Be.x+b):Math.ceil(sc.e.Be.x+b);sc.e.Be.y=d>=0?Math.floor(sc.e.Be.y+d):Math.ceil(sc.e.Be.y+d);this.ID();this.hD(sc.e.Be.x,sc.e.Be.y,h);this.cursor.moveTo(sc.e.Be.x,sc.e.Be.y);c.x=sc.e.ve.x;
c.y=sc.e.ve.y;sc.e.ve.x=Math.floor(-sc.e.Be.x+ig.i.width/2);sc.e.ve.y=Math.floor(-sc.e.Be.y+ig.i.height/2);this.Po()}a=y;if(Math.abs(sc.e.ve.x-c.x)>=18||Math.abs(sc.e.ve.y-c.y)>=18)a=h;if(this.a.uo){this.a.uo.x=sc.e.ve.x;this.a.uo.y=sc.e.ve.y}else if(a)this.Hl(sc.e.ve.x,sc.e.ve.y,0.3,KEY_SPLINES.LINEAR);else{this.a.scroll.x=sc.e.ve.x;this.a.scroll.y=sc.e.ve.y}}}}},Da:function(a){var b=this.a;if(b.Mv())a.Qk(this.constructor.flb,-512,-512,-b.scroll.x,-b.scroll.y+this.HW,2064,2064);else{a.nc("#154453",
0,0,b.size.x,b.size.y);a.na(this.background,0,0).ge(0.3*this.lF);a.na(this.background,b.size.x-this.background.width,0,0,0,g,g,h).ge(0.3*this.lF);a.Qk(this.constructor.oj,0,0,-b.scroll.x,-b.scroll.y+this.HW,b.size.x,b.size.y)}},$y:function(a,b){if(!ig.La.zh()&&!b&&sc.map.kN()&&this.Ha.wc()&&!sc.e.dfa&&!sc.e.fT)if(sc.e.a6)if(a&&sc.ba.nda()){sc.e.a6=y;sc.e.YH(sc.e.fk);this.sW=h}else{if(a)sc.e.a6=y;else{this.BG=q;this.Zv.ga("")}sc.e.MD=y}else{var c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln());ig.input.qb!=
ig.Yb.Wc&&this.hD(sc.ba.Kp(),sc.ba.Ln());if(sc.ba.nda()||this.sW){this.sW=y;Vec2.Oa(this.pA,c,d);sc.e.MD=h;this.aM=0;ig.input.qb!=ig.Yb.Wc&&this.hD(sc.ba.Kp(),sc.ba.Ln())}else if(sc.ba.fFa()){if(sc.e.MD){this.aM=this.aM+ig.i.Sa;if(!sc.e.hT)sc.e.hT=(Math.abs(c-this.pA.x)>=1||Math.abs(d-this.pA.y)>=1)&&this.aM>=0.1;sc.e.ve.x=sc.e.ve.x+(c-this.pA.x);sc.e.ve.y=sc.e.ve.y+(d-this.pA.y);this.Po();this.a.scroll.x=sc.e.ve.x;this.a.scroll.y=sc.e.ve.y;Vec2.Oa(this.pA,c,d);ig.input.qb!=ig.Yb.Wc&&this.hD(sc.ba.Kp(),
sc.ba.Ln())}}else sc.e.MD=y}},I7a:function(a){if(sc.e.hT)sc.e.hT=y;else if(a instanceof sc.Fka){d.play();sc.e.k8a(a)}else if(a.Maa){d.play();var b=ig.lang.get("sc.gui.menu.map-menu.teleport"),b=ig.lang.d3a(b,sc.map.lFa(a.map.path));sc.aq.Dx(b,q,function(b){sc.e.MD=y;b.data==0&&sc.map.vNa(a.map)}.bind(this))}else f.play()},hD:function(a,b,c,d){if(!sc.e.fk){var f=0,n=0;if(c){f=a-this.Lb.a.g.x;n=b-this.Lb.a.g.y}else{f=a-sc.e.ve.x-this.Lb.a.g.x+1;n=b-sc.e.ve.y-this.Lb.a.g.y+1}if(this.Lb.a.children.length!=
0&&this.Lb.a.children[sc.map.Woa()]){for(var o=this.Lb.a.children[sc.map.Woa()].children,t=q,p=o.length;p--;)if(o[p].X.Cta&&o[p].X.J0){t=o[p];if(f>=t.g.x&&f<=t.g.x+t.size.x&&n>=t.g.y&&n<=t.g.y+t.size.y){c?this.Zv.l(sc.e.Be.x+5,sc.e.Be.y-this.Zv.a.size.y-4):this.Zv.l(a-sc.e.ve.x,b-sc.e.ve.y-this.Zv.a.size.y-1);if(this.BG!=t){this.BG=t;this.Zv.ga(t.X.Cta.text,d)}return h}}this.BG=q;this.Zv.ga("");return y}}},Xab:function(a){a=a?a:"???";sc.e.fk.Maa||(a="\\c[1]"+ig.lang.get("sc.gui.menu.map-menu.blocked")+
"\\c[0]: "+a);this.Zv.ga(a);var a=sc.e.fk.a.g.x,b=sc.e.fk.a.g.y,b=b-(this.Zv.a.size.y-2);this.BG=sc.fk;this.Zv.l(a+15+sc.e.bn.x,b+sc.e.bn.y)},xEb:function(a){this.j("DEFAULT");sc.e.Cc("",h);this.BG=q;this.Zv.ga("");this.J5a.length=0;this.Su.length=0;var b=this.$ya[sc.map.uj.path]||{x:-1E4,y:-1E4,u_a:-1E4,v_a:-1E4,floor:0};b.x=sc.e.Be.x;b.y=sc.e.Be.y;b.u_a=sc.e.ve.x;b.v_a=sc.e.ve.y;b.floor=sc.map.Tk;this.$ya[sc.map.uj.path]=b;for(var b=this.Lb.a.children,c=b.length;c--;)b[c].X.Ic();this.Ha.clear();
this.Lb.rh();this.Lb.j("HIDDEN",h);sc.map.hOb();sc.map.PHa(a,this)},Eq:function(a,b){sc.map.Wv=y;if(a){sc.e.hT=y;this.u$a();this.taa=sc.map.Tk;if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}var c=this.$ya[b.path];c?sc.map.Tk=c.floor:sc.map.WOb();this.MBa(h);this.SBa(h,y);if(c){this.Ci.x=c.x;this.Ci.y=c.y;sc.e.Be.x=c.x;sc.e.Be.y=c.y;sc.e.ve.x=c.u_a;sc.e.ve.y=c.v_a;this.ID();this.cursor.moveTo(sc.e.Be.x,sc.e.Be.y,y);this.hD(sc.e.Be.x,sc.e.Be.y,h)}this.taa=sc.map.Tk;this.Po();
this.Hl(sc.e.ve.x,sc.e.ve.y,0,KEY_SPLINES.LINEAR);this.Lb.j("DEFAULT");ig.La.Md(0.2);sc.e.qKb(b.path)}},u$a:function(){var a=sc.map.kN();if(a){var b=this.Lb.a,c=this.a,d=a.floors;this.Lb.F(a.width*8,a.height*8);this.Lb.l(c.size.x/2-b.size.x/2,c.size.y/2-b.size.y/2);this.Lb.rh();sc.e.bn.x=b.g.x;sc.e.bn.y=b.g.y;sc.map.peb();for(a=0;a<d.length;a++){b=new sc.Qjb(d[a],this.xwb.bind(this));this.Lb.m(b)}}},xwb:function(a,b){if(a){var c=b.floor,d=c.landmarks,f=sc.map.uj.path;if(d)for(var n=d.length;n--;){var o=
d[n].id;if(sc.map.XGa(o,f)){o=new sc.Zwa(o,d[n],c.level,c.maps[d[n].map],f);b.m(o);this.Ha.jd(o);this.J5a.push(o)}}if(d=sc.e.nBb(f))for(n=d.length;n--;)if(d[n]&&d[n].level==c.level){o=new sc.Fka(d[n].key,d[n].x,d[n].y,d[n].level,n,b);b.m(o);this.Ha.jd(o);this.Su.push(o)}}},jub:function(){var a=this.Czb(),b=sc.map.uj.path;if(sc.e.I2a(b)>=sc.Xja)sc.gd.Dv.play();else if(a){var c=0,d=0;if(ig.input.qb==ig.Yb.Wc){c=sc.e.Be.x-sc.e.bn.x;d=sc.e.Be.y-sc.e.bn.y-1}else{c=Math.floor(sc.ba.Kp());d=Math.floor(sc.ba.Ln());
if(d<=22||d>=298){sc.gd.Dv.play();return}c=c-(sc.e.bn.x+sc.e.ve.x);d=d-(sc.e.bn.y+sc.e.ve.y)}if(this.PDb(a,c,d)){sc.gd.submit.play();b=sc.e.aub(b,"DEFAULT",c,d,a.floor.level);c=new sc.Fka("DEFAULT",c,d,a.floor.level,b,a);d=c.a;a.m(c);this.Ha.jd(c);this.Su.push(c);sc.e.Rca(d.g.x+Math.floor(d.size.x/2)+sc.e.bn.x,d.g.y+Math.floor(d.size.y/2)+1+sc.e.bn.y,c,ig.input.qb==ig.Yb.Wc);sc.e.k8a(c)}else sc.gd.Dv.play()}},PDb:function(a,b,c){for(var a=a.a.children,d=a.length;d--;){var f=a[d];if(f.X instanceof
sc.Fka||f.X instanceof sc.Zwa)if(Vec2.HR(b,c,f.g.x+f.size.x/2,f.g.y+f.size.y/2)<=(f.X instanceof sc.Zwa?14:10))return y}return h},Czb:function(){for(var a=this.Lb.a.children,b=a.length;b--;)if(a[b].X.floor.level==sc.map.Tk)return a[b].X;return q},SBa:function(a,b){for(var c=this.Lb.a,d=q,f=q,n=c.children,o=n.length;o--;){a&&n[o].X.Tab();if(n[o].X.floor.level==sc.map.Tk){d=n[o];f=n[o].X.H2}}if(ig.input.qb==ig.Yb.Wc){n=this.Ci;this.t5(n);if(f){n.x=c.g.x+f.g.x+f.size.x/2;n.y=c.g.y+f.g.y+f.size.y/2}else if(d){f=
d.X.au;n.x=c.g.x+c.size.x/2;n.y=c.g.y+d.g.y+d.size.y/2;n.x=c.g.x+f.x+f.width/2;n.y=c.g.y+f.y+f.height/2}else{n.x=c.g.x+c.size.x/2;n.y=c.g.y+c.size.y/2}sc.e.Be.x=n.x;sc.e.Be.y=n.y;this.cursor.moveTo(sc.e.Be.x,sc.e.Be.y,b,0.3);this.hD(sc.e.Be.x,sc.e.Be.y,h,b?0.2:0);ig.La.Md(0.3);sc.e.ve.x=Math.floor(-n.x+ig.i.width/2);sc.e.ve.y=Math.floor(-n.y+ig.i.height/2)}else if(f){sc.e.ve.x=-(c.g.x+f.g.x+f.size.x/2)+ig.i.width/2;sc.e.ve.y=-(c.g.y+f.g.y+f.size.y/2)+ig.i.height/2}else if(d){f=d.X.au;sc.e.ve.x=-(c.g.x+
f.x+f.width/2)+ig.i.width/2;sc.e.ve.y=-(c.g.y+f.y+f.height/2)+ig.i.height/2}else{sc.e.ve.x=-(ig.i.width/2-c.g.x-c.size.x/2);sc.e.ve.y=-(ig.i.height/2-c.g.y-c.size.y/2)}this.Po()},Po:function(){var c=this.Lb.a,d=-sc.e.ve.x,f=c.g.x;sc.e.ve.x=-d.Rb(f-a,f+(c.size.x-a));d=-sc.e.ve.y;f=c.g.y;sc.e.ve.y=-d.Rb(f-b,f+(c.size.y-b))},ID:function(){var a=sc.e.Be.x;sc.e.Be.x=a.Rb(this.Lb.a.g.x,this.Lb.a.g.x+this.Lb.a.size.x);var a=sc.e.Be.y,b=sc.e.Be.x+sc.e.ve.x;sc.e.Be.y=a.Rb(this.Lb.a.g.y,this.Lb.a.g.y+this.Lb.a.size.y-
(b<181?Math.min(25,181-b):0))},t5:function(a){if(a.x<=-1E4||a.y<=-1E4){for(var b=this.Lb.a,c=q,d=q,f=b.children,n=f.length;n--;)if(f[n].X.floor.level==sc.map.Tk){c=f[n];d=f[n].X.H2}if(d){a.x=b.g.x+d.g.x+d.size.x/2;a.y=b.g.y+d.g.y+d.size.y/2}else if(c){a.x=b.g.x+b.size.x/2;a.y=b.g.y+c.g.y+c.size.y/2}else{a.x=b.g.x+b.size.x/2;a.y=b.g.y+b.size.y/2}}},MBa:function(a){if(a){this.MAa=this.NAa=this.HW=-sc.map.Tk*8;this.IW=0.3}else{this.NAa=-sc.map.Tk*8;this.MAa=this.HW;this.IW=0;this.Ola=0.3}},Yd:function(){sc.e.hT=
y;sc.e.Z.hh(this.Ha);if(sc.e.eIa)for(var a=this.Lb.a.children,b=a.length;b--;)a[b].X.Tab();else{this.SBa(h);sc.e.eIa=h}this.BG=q;this.Zv.ga("");this.taa=sc.map.Tk;this.iQ=this.J$;this.lF=0;if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}ig.input.qb==ig.Yb.Wc&&this.hD(sc.e.Be.x,sc.e.Be.y,h);this.Hl(sc.e.ve.x,sc.e.ve.y,0,KEY_SPLINES.LINEAR);this.j("DEFAULT",y,y,function(){this.lF=this.iQ=0}.bind(this))},Gd:function(){this.BG=q;this.Zv.ga("");sc.e.Z.sl(this.Ha);sc.e.fk=y;this.Ci.x=
sc.e.Be.x;this.Ci.y=sc.e.Be.y;this.cursor.Om();this.lF=0;for(var a=this.Lb.a.children,b=a.length;b--;)a[b].X.yCb();this.j("HIDDEN")},Oc:function(){sc.P.Wa(sc.e,this);this.cursor.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.cursor.Ic()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.w1)if(this.taa==sc.map.Tk){this.SBa(y,h);this.Hl(sc.e.ve.x,sc.e.ve.y,0.3,KEY_SPLINES.EASE)}else{this.MBa(y);ig.input.qb==ig.Yb.Wc&&this.hD(sc.e.Be.x,sc.e.Be.y,h);this.taa=sc.map.Tk}else if(b==sc.fa.MV)if(c){this.BG=q;this.Zv.ga("");
this.j("HIDDEN_WORLD");this.cursor.r2=h}else{this.cursor.focus=y;this.cursor.r2=y;ig.input.qb==ig.Yb.Wc&&this.t5(this.Ci);this.j("DEFAULT");ig.input.qb==ig.Yb.Wc?this.hD(sc.e.Be.x,sc.e.Be.y,h):this.hD(sc.ba.Kp(),sc.ba.Ln())}else if(b==sc.fa.$wa)this.xEb(c);else if(b==sc.fa.I9){this.cursor.focus=y;this.cursor.r2=y}else if(b==sc.fa.cxa){if(ig.input.qb==ig.Yb.Wc){sc.e.ve.x=Math.floor(-sc.e.Be.x+ig.i.width/2);sc.e.ve.y=Math.floor(-sc.e.Be.y+ig.i.height/2);this.Po();this.Hl(sc.e.ve.x,sc.e.ve.y,0.2,KEY_SPLINES.LINEAR)}sc.e.Cc(sc.e.fk.description);
this.Xab(sc.e.fk.name)}else b==sc.fa.J9?sc.e.Cc("",h):b==sc.fa.GRa&&this.Xab(sc.e.fk.name)}})});ig.J=h;
ig.N("game.feature.menu.gui.map.map-worldmap").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.map.map-misc").K(function(){var a=sc.gd.submit;sc.Qeb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),key:q,Lb:q,Y:1,PAa:y,Jyb:0,description:"",f:function(a,c){this.parent(h,y);this.F(16,16);this.Eb(8,8);this.key=a;this.Lb=c;this.description=new ig.Ra(this.Lb.description||"");if(this.Lb){this.PAa=a==sc.map.gi.path;this.Y=sc.gV[this.Lb.areaType]*8}},cc:function(){if(ig.input.qb==
ig.Yb.xm){var b=Math.floor(sc.ba.Ln());if(b<=21||b>=299)return}a.play();sc.e.PHa(this.key)},Da:function(a){this.focus&&a.na(this.s,-3,-2,421,173,21,21).yi("lighter");a.na(this.s,4,4,328+this.Y,456+(this.PAa?8:0),8,8);if(this.PAa){a.na(this.s,1,2,304,440,3,3);a.na(this.s,-11,-8,280,424,16,11)}},JG:function(){if(sc.e.TG&&!ig.La.zh()){if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(sc.e.efa){sc.e.AOa(this);return y}if(a<=10){a=this.a;sc.e.U0a(a.g.x+Math.floor(a.size.x/2)-1,a.g.y+Math.floor(a.size.y/2)+
1,this,h);return h}sc.e.AOa(this)}else if(ig.input.qb==ig.Yb.xm){var c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln()),a=this.a;(c=c>=a.g.x&&c<=a.g.x+a.size.x&&d>=a.g.y&&d<=a.g.y+a.size.y)?sc.e.U0a(a.g.x+Math.floor(a.size.x/2)-1,a.g.y+Math.floor(a.size.y/2)+1,this):sc.e.AOa(this);return c}return y}},lG:function(){return Math.floor(Vec2.HR(sc.e.Ji.x,sc.e.Ji.y,this.a.g.x+Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))}});sc.bkb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},
HIDDEN:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.2,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/world-map.png"),ua:q,areas:[],cursor:q,rv:q,Pl:y,pj:0,Ci:Vec2.vc(-1E4,-1E4),f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);this.ua=new sc.R9;this.ua.CS=h;this.ua.Rk(function(a){a&&a.data&&sc.e.Cc(a.data)}.bind(this));this.ua.jn(function(){sc.e.Cc("",h);this.rv.ga("")}.bind(this));this.ua.$l=function(){ig.input.qb==ig.Yb.Wc&&(sc.ba.Au()&&sc.e.Mr)&&sc.e.Mr.cc()}.bind(this);
this.lqb();this.cursor=new sc.gxa(h);this.m(this.cursor);this.rv=new sc.bqb;this.m(this.rv);this.j("HIDDEN",h)},update:function(){sc.e.efa=y;if(!ig.La.zh()&&this.ua.wc()){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb;var a=q;if(ig.input.qb==ig.Yb.Wc){a=this.Ci;this.AW(a);sc.e.Ji.x=a.x;sc.e.Ji.y=a.y;this.yC();sc.e.P9a();sc.e.Cc("",h);this.cursor.moveTo(sc.e.Ji.x,sc.e.Ji.y)}else if(ig.input.qb==ig.Yb.xm){this.Ci.x=sc.e.Ji.x;this.Ci.y=sc.e.Ji.y;this.cursor.Om()}sc.e.eva()}if(ig.input.qb==
ig.Yb.Wc){var c=a=0,d=0,f=y;if((d=sc.ba.Cf(ig.Nd.wn))<-0.5){a=(-100+d*100)*ig.i.Sa;f=h}else if((d=sc.ba.Cf(ig.Nd.wn))>0.5){a=(100+d*100)*ig.i.Sa;f=h}if((d=sc.ba.Cf(ig.Nd.xn))<-0.5){c=(-100+d*100)*ig.i.Sa;f=h}else if((d=sc.ba.Cf(ig.Nd.xn))>0.5){c=(100+d*100)*ig.i.Sa;f=h}if(f){sc.e.efa=h;sc.e.Ji.x=a>=0?Math.floor(sc.e.Ji.x+a):Math.ceil(sc.e.Ji.x+a);sc.e.Ji.y=c>=0?Math.floor(sc.e.Ji.y+c):Math.ceil(sc.e.Ji.y+c);this.yC();this.cursor.moveTo(sc.e.Ji.x,sc.e.Ji.y)}}}},Da:function(a){a.na(this.s,0,0,0,0,this.a.size.x,
this.a.size.y)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.rv.ga("");var a=this.areas.length;sc.e.rl(this.ej.bind(this));for(sc.e.Z.hh(this.ua);a--;)this.areas[a].ai();sc.e.P9a();this.cursor.Oc();if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}this.wrb();ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.rv.ga("");this.cursor.Om();sc.e.Z.sl(this.ua);this.cursor.Ic();this.j("HIDDEN")},wrb:function(){if(sc.e.era){var a=this.Ci;
a.x=sc.e.Ji.x;a.y=sc.e.Ji.y;this.yC();this.cursor.moveTo(sc.e.Ji.x,sc.e.Ji.y)}else if(ig.input.qb==ig.Yb.Wc){sc.e.era=h;a=this.Ci;this.AW(a);for(var c=sc.map.uj,d=this.areas.length;d--;){a=this.areas[d];if(a.key==c.path){c=a.a.g.y+Math.floor(8)+1;sc.e.Ji.x=a.a.g.x+Math.floor(8)-1;sc.e.Ji.y=c;this.yC();this.cursor.moveTo(sc.e.Ji.x,sc.e.Ji.y);break}}}},AW:function(a){if(a.x<=-1E4||a.y<=-1E4){a.x=ig.i.width/2;a.y=ig.i.height/2}},yC:function(){var a=sc.e.Ji.x;sc.e.Ji.x=a.Rb(5,ig.i.width-Math.floor(this.cursor.a.size.x/
2));a=sc.e.Ji.y;sc.e.Ji.y=a.Rb(41,ig.i.height-this.cursor.a.size.y-4)},Ssb:function(a){var c=a.Lb,d=a.a.g,f=sc.pa.Qf("chests",a.key)||0,a=sc.map.tzb(a.key),f=Math.min(f,a),i="";a!=0&&(i=f>=a?" \\c[3]["+f+"/"+a+"]\\c[0]":" ["+f+"/"+a+"]");this.rv.ga(ig.Ra.ic(c.name)+i);c=d.x+11;d=d.y-this.rv.a.size.y+5;this.rv.l(c,d);if(this.rv.a.g.x+this.rv.a.size.x>=ig.i.width-2){this.rv.l(c-this.rv.a.size.x-10,d+23);this.rv.AU(h)}else this.rv.AU(y)},lqb:function(){var a=sc.map.areas,c;for(c in a){var d=a[c];if((!d.condition||
(new ig.de(d.condition)).evaluate())&&sc.map.Bda(c)){d=this.kqb(c,d);this.m(d)}}},kqb:function(a,c){var d=new sc.Qeb(a,c);d.l(c.position.x-8+1,c.position.y-8);this.ua.jd(d);this.areas.push(d);return d},ej:function(){sc.e.WDa()},Ab:function(a,c,d){if(a==sc.e)if(c==sc.fa.MV)if(d)this.show();else{ig.La.Md(0.2);sc.e.Dk();this.hide()}else if(c==sc.fa.bxa){this.Ssb(sc.e.Mr);sc.e.Cc(sc.e.Mr.description)}else if(c==sc.fa.J9){this.rv.ga("");sc.e.Cc("",h)}else if(c==sc.fa.bW)this.rv.ga("",y,h);else if(c==sc.fa.$wa){sc.e.Dk();
this.hide()}}})});ig.J=h;
ig.N("game.feature.menu.gui.map.map-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.map.map-misc","game.feature.menu.gui.map.map-stamp","game.feature.menu.gui.map.map-area","game.feature.menu.gui.map.map-worldmap").K(function(){sc.Xjb=sc.uw.extend({Hb:q,zS:q,xD:q,Lb:q,F4:q,aY:q,hR:q,PU:q,O8:q,Q3:q,Su:q,kb:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,
h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.xD=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.hotkeys.center-map"),g,h,sc.Mc.$c);this.xD.ac=q;this.xD.dg=h;this.xD.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.xD.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.xD.cc=this.FFb.bind(this);this.zS=new sc.mc("\\i[help2]"+
ig.lang.get("sc.gui.menu.hotkeys.worldmap"),g,h,sc.Mc.$c);this.zS.dg=h;this.zS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.zS.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.zS.cc=this.uHb.bind(this);this.Lb=new sc.Njb;this.m(new sc.uQa(this.Lb));this.O8=new sc.bkb;this.m(this.O8);this.F4=new sc.Sjb;this.m(this.F4);this.hR=new sc.Ojb;this.m(this.hR);this.PU=new sc.akb;this.m(this.PU);this.Q3=new sc.fgb;this.m(this.Q3);this.aY=new sc.ea("???");this.aY.H(ig.k.Ia,
ig.k.vb);this.aY.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.aY.j("HIDDEN",h);this.m(this.aY);this.Su=new sc.kob;this.m(this.Su);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.Lb.Oc();this.F4.Oc();this.O8.Oc();this.Q3.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.Lb.Ic();this.F4.Ic();this.O8.Ic();this.Q3.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);ig.La.Md(0.2);this.fn();sc.map.kN()||
this.aY.j("DEFAULT");this.O8.j("HIDDEN",h);this.Lb.Yd();this.F4.Yd();this.Q3.Yd();this.hR.j("DEFAULT");this.PU.j("DEFAULT")},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.xD);sc.e.Z.Te(this.zS);sc.e.era=y;this.kb=q;this.aY.j("HIDDEN");this.Lb.Gd();this.F4.Gd();this.Q3.Gd();this.O8.hide();this.hR.j("HIDDEN");this.PU.j("HIDDEN");this.Su.hide()},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},
iGb:function(){return sc.ba.ON()},rGb:function(){return sc.ba.ND()},FFb:function(a){if(a)this.Lb.jub();else{sc.gd.submit.play();a=ig.lang.get("sc.gui.menu.map-menu.popupTitle")+"\n\n"+ig.lang.get("sc.gui.menu.map-menu.popupDesc");a=new sc.rP(a,{maxWidth:300,speed:ig.Rd.se.zg},"black",0.9);a.a.zIndex=15E4;a.a.xf=h;ig.X.vd(a)}},uHb:function(){if(sc.e.TG){sc.e.Cc("",h);sc.e.WDa()}else sc.e.eyb()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.map.title"),ig.lang.get("sc.gui.menu.help-texts.map.pages"),
function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.xD,this.iGb.bind(this));sc.e.Z.Jd(this.zS,this.rGb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("zS").bind(this));sc.e.bk(M("xD").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.MV){this.Su.hide(h);if(c){this.xD.setActive(y);this.hR.j("HIDDEN");this.PU.j("HIDDEN")}else{this.xD.setActive(h);
this.hR.j("DEFAULT");this.PU.j("DEFAULT")}}else if(b==sc.fa.I9){this.xD.setActive(h);this.hR.update();this.PU.update();this.hR.j("DEFAULT");this.PU.j("DEFAULT")}else if(b==sc.fa.FRa){this.Su.hide(h);this.Su.show(c)}}})});ig.J=h;
ig.N("game.feature.menu.gui.options.options-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.menu.gui.menu-misc").K(function(){sc.ajb=ig.mf.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Gc:q,button:q,back:q,ua:q,Z:q,C4:q,xBa:q,rea:q,f:function(){this.parent("black");this.a.xf=h;this.a.zIndex=9001;this.a.nd=0.9;this.Gc=new sc.KPa(200,60);this.Gc.H(ig.k.Ia,ig.k.vb);
this.Gc.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.Gc);this.button=new sc.mc(ig.lang.get("sc.gui.options.controls.unbind"));this.button.H(ig.k.hb,ig.k.Cb);this.button.l(4,6);this.button.cc=this.rHb.bind(this);this.Gc.m(this.button);this.back=new sc.mc(ig.lang.get("sc.gui.options.controls.back"));this.back.H(ig.k.ra,ig.k.Cb);this.back.l(4,6);this.back.cc=this.YGb.bind(this);this.Gc.m(this.back);var a=new sc.ea(ig.lang.get("sc.gui.options.controls.anykey"));
a.H(ig.k.Ia,ig.k.$);a.l(0,6);this.Gc.m(a);this.Z=new ig.$s;this.ua=new sc.wh;this.Z.hh(this.ua);this.Z.Jd(this.button,this.y7a.bind(this));this.Z.Jd(this.back,this.y7a.bind(this));this.j("HIDDEN",h);this.Gc.j("HIDDEN",h)},show:function(a,b,c){this.j("DEFAULT");this.Gc.j("DEFAULT");if(c){this.button.l(4,6);this.back.H(ig.k.ra,ig.k.Cb);this.back.l(4,6)}else{this.button.l(-1E3,-1E3);this.back.H(ig.k.Ia,ig.k.Cb);this.back.l(0,6)}b=Math.max(150,this.button.a.size.x+this.back.a.size.x+12);this.Gc.F(b,60);
this.C4=a||q;this.rea=c;ig.input.aqa=h;ig.La.De(this.Z);ig.La.Md(0.2);this.xBa=this.zGb.bind(this);window.addEventListener("keydown",this.xBa,y)},hide:function(){this.j("HIDDEN");this.Gc.j("HIDDEN");ig.La.$e(this.Z);ig.La.Md(0.2);window.removeEventListener("keydown",this.xBa);this.C4=q;this.rea=y;ig.input.aqa=y},rHb:function(){if(this.rea){this.C4&&this.C4(q,this.rea,h);this.hide()}},YGb:function(){this.hide()},zGb:function(a){a.preventDefault();if(!ig.La.zh()&&!this.Zrb(a.keyCode)){this.C4&&this.C4(a.keyCode,
this.rea,y);this.hide()}},y7a:N(y),Zrb:function(a){return sc.Rx[a]}});sc.Wkb=sc.v$.extend({JYa:new ig.jc("media/gui/buttons.png",{width:8,height:0,left:4,top:9,right:4,bottom:0,Vb:{"default":{x:128,y:84},"default-focus":{x:144,y:84},fill:{x:128,y:72},"fill-focus":{x:144,y:72}}}),fill:y,focus:y,f:function(a,b,c,d){this.parent(a,b,c);this.fill=d!=g?d:y},Da:function(a){this.JYa.nb(a,this.a.size.x,this.a.size.y,this.focus?"default-focus":"default");this.fill&&this.JYa.nb(a,this.Xr.a.g.x+this.uga/2,this.a.size.y,
this.focus?"fill-focus":"fill")},F:function(a,b){this.a.size.x=a;this.a.size.y=b;this.$ta(h)}});sc.Xkb=ig.da.extend({JNb:new ig.jc("media/gui/buttons.png",{width:6,height:0,left:4,top:21,right:4,bottom:0,Vb:{"default":{x:96,y:72},focus:{x:112,y:72}}}),pna:"default",$f:q,k4:y,hYb:y,Kbb:0,Ela:Vec2.vc(0,0),f:function(a){this.parent();this.$f=a},$y:function(a,b,c){if(!c)if(sc.ba.nda()){this.k4=h;this.Kbb=this.$f.$f.value;this.Ela.x=a;this.Ela.y=b}else sc.ba.fFa()?this.k4&&this.$f.u7a&&this.$f.u7a(a-this.Ela.x,
b-this.Ela.y,this.Kbb):this.k4=y},Da:function(a){this.JNb.nb(a,this.a.size.x,this.a.size.y,this.pna)}});sc.jSa=ig.vn.extend({$f:q,Xr:q,Mha:h,uba:q,OZa:sc.gd.submit,Mrb:y,f2:q,f:function(a,b,c,d){this.parent();this.H(ig.k.Ia,ig.k.vb);this.f2=d||q;this.Mha=b==g?h:b;this.uba=a||q;this.Xr=new sc.Xkb(this);this.$f=new sc.Wkb(y,this.Xr,y,c);this.$f.H(ig.k.Ia,ig.k.vb);this.$f.offset.y=-6;this.$f.ql.left=2;this.$f.ql.right=2;this.m(this.$f)},Xta:function(a,b){this.$f.Xta(a,b)},F:function(a,b,c){this.parent(a,
b);this.$f.F(a,c||b);this.$f.$ta(h)},ip:function(a){this.$f.ip(a,h)},wha:function(a,b){this.$f.wha(a,b,h)},DY:function(){return this.$f.value},update:function(){this.parent();if(!ig.input.Id)this.Xr.pna=this.focus?"focus":"default"},Lo:function(){this.focus=h;this.$f.focus=h},ai:function(){this.focus=y;this.$f.focus=y},PBa:function(){return!this.Xr.k4},OBa:function(){return!this.Xr.k4},$y:function(a,b){this.parent(a,b);if(!ig.La.zh()&&(!this.f2||this.f2.wc())){this.Mrb=y;var c=this.a.Yf,d=this.Xr.a;
if(!d.Yf)this.Xr.a.Yf={x:0,y:0,Vc:d.size.x,sd:d.size.y};d.Yf.x=c.x+d.g.x-this.$f.offset.x;d.Yf.y=c.y+d.g.y-this.$f.offset.y;var c=d.Yf,d=sc.ba.Kp(),f=sc.ba.Ln();if(c.x<=d&&c.x+c.Vc>d&&c.y<=f&&c.y+c.sd>f||this.Xr.k4){this.Xr.pna="focus";this.Xr.$y(d|0,f|0,b)}else{this.Xr.pna="default";if(b){this.OZa&&this.OZa.play();c=Math.max(0,d-this.a.Yf.x);c=Math.round(c/this.$f.a.size.x*this.$f.hBb());this.$f.ip(c,h);this.uba&&this.uba(c)}}}},u7a:function(a,b,c){a=this.gC?b:a;b=this.$f;a=(b.fh-b.sB)*a/b.Xub();
b.ip(this.Mha?Math.round(c+a):c+a,h);this.uba&&this.uba(b.value)}});sc.Tkb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.2,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:480,y:304}}}),Ha:q,anchor:q,Gb:q,xa:[],Aa:y,Pk:q,f:function(){this.parent(429,50);this.Eb(427,0);this.Ha=new sc.wh;this.Ha.Ql(function(a){if(a&&a.data&&a.data.lang!=g){this.anchor.J7a(y,a.data.lang);
this.hide()}}.bind(this));this.ECa();this.j("HIDDEN",h)},ECa:function(){var a=3,b=4,c=0,d;for(d in sc.BL){var f=sc.BL[d],i="\\i[language-"+f+"] "+ig.lang.get("sc.gui.options.language.group")[f],i=new sc.mc(i,210,h,c%2==0?sc.Mc.Dja:sc.Mc.Eja,q,h);i.zfa=h;i.l(a,b);i.setData({lang:f});this.m(i);this.xa[f]=i;this.Ha.jd(i,c%2,Math.floor(c/2));c++;a=a+212;if(c%2==0){a=3;b=b+22}}this.a.size.y=b+24;a=sc.options.get("language");this.Pk=this.xa[a];this.eE(this.Pk);this.Ha.EU(this.Pk)},eE:function(a){for(var b=
this.xa.length;b--;)this.xa[b]&&this.xa[b]!=a&&this.xa[b].ff(y)},show:function(a,b){if(!this.Aa){sc.e.Z.hh(this.Ha);sc.e.rl(this.qJa.bind(this));this.Gb=b||q;this.Aa=h;this.anchor=a;var c=a.button.a;this.l(c.Yf.x-429+c.Yf.Vc,c.Yf.y+c.Yf.sd);c=sc.options.get("language");this.Pk=this.xa[c];this.eE(this.Pk);this.Ha.EU(this.Pk);ig.La.Md(0.2);this.j("DEFAULT")}},hide:function(){if(this.Aa){this.Aa=y;sc.e.Dk();sc.e.Z.sl(this.Ha);this.Gb&&this.Gb();this.anchor.J7a(h);sc.e.Z.Uvb();this.j("HIDDEN")}},qJa:function(){this.hide()}})});
ig.J=h;
ig.N("game.feature.menu.gui.options.options-types").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.options.options-misc","game.feature.model.options-model").K(function(){var a=[],b=0,c=0;sc.RV={};sc.RV[sc.SV.BUTTON_GROUP]=ig.da.extend({Sb:q,xa:[],Pk:q,vaa:q,f:function(b,c,i){this.parent();this.Sb=b;var j=b.vB.data;a.length=0;for(var k in j)a.push(j[k]);this.vaa=i;j=Math.floor(c/
a.length);k=q;for(var l,m=0,n=0;n<a.length;n++){l=ig.lang.get("sc.gui.options."+b.tm+".group")[a[n]];k=n==0?new sc.mc(l,j,h,sc.Mc.Dja,q,h):n==a.length-1?new sc.mc(l,j,h,sc.Mc.Eja,q,h):new sc.mc(l,j,h,sc.Mc.wL,q,h);n==a.length-1&&j*a.length<c?k.mE(j+1):k.mE(j);k.zfa=h;var o=j;if((new ig.Rd(sc.Ea.font,l,{})).size.x<o-16)l=sc.Ea.font;else if((new ig.Rd(sc.Ea.he,l,{})).size.x<o-16)l=sc.Ea.he;else{new ig.Rd(sc.Ea.Ib,l,{});l=sc.Ea.Ib}l!=k.re.font&&k.re.pha(l,q);k.ff=function(a){(this.Yc=a)?this.re.ga("\\c[0]"+
this.text):this.re.ga("\\c["+sc.Do.wm+"]"+this.text)};k.data={description:b.sK,id:a[n],Vp:b.Vp};k.l(m,3);m=m+k.a.size.x;i.jd(k,n,b.Vp);this.xa[a[n]]=k;this.m(k)}b=sc.options.get(b.tm,b.Vy);this.Pk=this.xa[b];this.eE(this.Pk);i.EU(this.Pk)},eE:function(a){for(var b=this.xa.length;b--;)this.xa[b]!=a&&this.xa[b].ff(y)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},Ab:function(a,b){if(b==sc.ct.$z){var c=sc.options.get(this.Sb.tm,this.Sb.Vy);if(this.Pk!=this.xa[c]){this.Pk=
this.xa[c];this.eE(this.Pk);this.vaa.EU(this.Pk)}}},RZ:function(a){if(this.Pk!=a){this.eE(a);sc.options.set(this.Sb.tm,a.data.id,this.Sb.Vy);this.Pk=a}}});sc.RV[sc.SV.OBJECT_SLIDER]=ig.da.extend({$f:q,Sb:q,xb:[],pr:q,ao:0,f:function(a,b,c){this.parent();this.Sb=a;var j=a.vB.Mha==g?h:a.vB.Mha,k=a.vB.data,l=0,m=0,n;for(n in k){this.xb[l]=k[n];k[n]==sc.options.get(a.tm,a.Vy)&&(m=l);l++}this.ao=m;b=b-4;this.$f=new sc.jSa(this.sJa.bind(this),j,a.vB.fill,c);this.$f.Xta(Math.floor(b/this.xb.length),21);
this.$f.l(0,0);this.$f.wha(0,this.xb.length-1);this.$f.ip(m);this.$f.F(b-4,21,9);this.$f.data=a.sK;this.m(this.$f);this.pr=new sc.Tb(this.xb.length);this.pr.H(ig.k.Ia,ig.k.vb);this.pr.za(m+1,h);this.$f.Xr.m(this.pr);c.jd(this.$f,0,a.Vp)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},Ab:function(a,b){if(b==sc.ct.$z){var c=sc.options.get(this.Sb.tm,this.Sb.Vy);if(c!=this.xb[this.ao]){this.$f.ip(c);this.ao=c;this.pr.za(c+1,h)}}},sJa:function(a){if(a!=this.ao){this.pr.za(a+
1,h);this.ao=a;sc.options.set(this.Sb.tm,this.xb[a],this.Sb.Vy)}},Kfa:function(a){this.ao=a?this.ao+1:this.ao-1;this.$f.ip(this.ao);this.ao=this.$f.DY();this.pr.za(this.ao+1);sc.options.set(this.Sb.tm,this.xb[this.ao],this.Sb.Vy)}});sc.RV[sc.SV.ARRAY_SLIDER]=ig.da.extend({$f:q,Sb:q,ao:0,scale:0,sNb:0,f:function(a,b,c){this.parent();this.Sb=a;var j=a.vB;this.scale=10;this.sNb=1;var k=j.data,b=b-4;this.$f=new sc.jSa(this.sJa.bind(this),j.Mha,j.fill,c);this.$f.Xta(10,21);this.$f.wha(k[0]*this.scale,
k[1]*this.scale);this.$f.ip(sc.options.get(a.tm,a.Vy)*this.scale);this.$f.F(b-4,21,9);this.$f.data=a.sK;this.m(this.$f);this.ao=this.$f.DY();c.jd(this.$f,0,a.Vp)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},Ab:function(a,b){if(b==sc.ct.$z){var c=sc.options.get(this.Sb.tm,this.Sb.Vy)*this.scale;if(this.ao!=c){this.$f.ip(c);this.ao=c}}},sJa:function(a){if(a!=this.ao){this.ao=a;sc.options.set(this.Sb.tm,a/this.scale,this.Sb.Vy)}},Kfa:function(a){this.ao=a?this.ao+
1:this.ao-1;this.$f.ip(this.ao);this.ao=this.$f.DY();sc.options.set(this.Sb.tm,this.ao/this.scale,this.Sb.Vy)}});sc.RV[sc.SV.CHECKBOX]=ig.da.extend({Sb:q,button:q,f:function(a,b,c){this.parent();this.Sb=a;b=sc.options.get(a.tm,a.Vy);this.button=new sc.Cfb(b,30);this.button.H(ig.k.hb,ig.k.vb);this.button.data={description:a.sK,Vp:a.Vp};this.m(this.button);c.jd(this.button,0,a.Vp)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},RZ:function(a){a==this.button&&sc.options.set(this.Sb.tm,
a.Yc)},Ab:function(a,b){if(b==sc.ct.$z){var c=sc.options.get(this.Sb.tm);this.button.Yc!=c&&this.button.ff(c)}}});sc.RV[sc.SV.CONTROLS]=ig.da.extend({J5:q,P2:q,Sb:q,Qba:"",f:function(a,b,c){this.parent();this.Sb=a;this.Qba=this.Sb.tm.substr(5);var j=Math.floor(b/2);a.vB.eZ?this.Sb.gf.ga("Debug "+this.Qba):this.Sb.gf.ga(ig.lang.get("sc.gui.options.controls.keys."+this.Qba));this.Sb.sK=ig.lang.get("sc.gui.options.controls.description");var k=sc.options.get(a.tm),l=k.key1,l=new sc.mc("\\i[keyCode-"+
l+"]",j,h,sc.Mc.Dja);l.mE(j);l.data={description:a.sK,Vp:a.Vp};l.l(0,3);this.J5=l;l=k.key2;l=new sc.mc(l?"\\i[keyCode-"+l+"]":ig.lang.get("sc.gui.options.controls.none"),j,h,sc.Mc.Eja);l.mE(b>j*2?j+1:j);l.data={description:a.sK,Vp:a.Vp};l.l(j,3);this.P2=l;this.m(this.J5);this.m(this.P2);c.jd(this.J5,0,a.Vp);c.jd(this.P2,1,a.Vp)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},RZ:function(a){a==this.J5?sc.Bqa.show(this.o7a.bind(this),this.Qba,y):a==this.P2&&sc.Bqa.show(this.o7a.bind(this),
this.Qba,h)},o7a:function(a,b,c){var j=this.Sb.tm;sc.options.$J.nvb(j,a,b,c);a=sc.options.get(j);this.J5.re.ga("\\i[keyCode-"+a.key1+"]");this.P2.re.ga(a.key2?"\\i[keyCode-"+a.key2+"]":ig.lang.get("sc.gui.options.controls.none"))},Ab:function(a,b){if(b==sc.ct.wxa){var c=sc.options.get(this.Sb.tm);this.J5.re.ga("\\i[keyCode-"+c.key1+"]");this.P2.re.ga(c.key2?"\\i[keyCode-"+c.key2+"]":ig.lang.get("sc.gui.options.controls.none"))}}});sc.RV[sc.SV.LANGUAGE]=ig.da.extend({button:q,Sb:q,f:function(a,b,c){this.parent();
this.Sb=a;var j=sc.options.get(a.tm),j="\\i[language-"+j+"] "+ig.lang.get("sc.gui.options.language.group")[j],j=new sc.mc(j,b,h,sc.Mc.qja);j.mE(b);j.data={description:a.sK,Vp:a.Vp};j.l(0,3);this.button=j;this.m(this.button);c.jd(this.button,0,a.Vp)},Vo:function(){sc.P.Wa(sc.options,this)},pi:function(){sc.P.Hc(sc.options,this)},RZ:function(a){a==this.button&&sc.e.yHb(this)},J7a:function(a,b){a?ig.input.Id&&this.button.ai():sc.options.set(this.Sb.tm,b,this.Sb.Vy)},Ab:function(a,b){if(b==sc.ct.$z){var c=
sc.options.get(this.Sb.tm),c="\\i[language-"+c+"] "+ig.lang.get("sc.gui.options.language.group")[c];this.button.ga(c,h)}}});sc.Vkb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),Vp:-1,tm:q,vB:q,sK:q,Vy:y,N_a:y,gf:q,iP:q,jla:y,vaa:q,f:function(a,b,c,j,k,l){a||e(Error("option entry is null!"));this.parent();this.F(k||400,l||26);this.vaa=c;this.Vy=j||y;this.tm=a;this.vB=sc.nj[this.tm];this.sK=ig.lang.get("sc.gui.options."+this.tm+".description");this.Vp=b;this.gf=new sc.ea(ig.lang.get("sc.gui.options."+
this.tm+".name"));this.gf.l(5,4);this.m(this.gf);a=new ig.mf("#545454",166,1);a.H(ig.k.hb,ig.k.Cb);a.l(0,4);this.m(a);b=new ig.ec(this.s,32,416,8,8);b.H(ig.k.hb,ig.k.Cb);b.l(a.a.size.x,3);this.m(b);a=this.a.size.x-175;if(b=sc.RV[sc.SV[this.vB.type]]){this.iP=new b(this,a,c);this.iP.F(a,26);this.iP.H(ig.k.hb,ig.k.Cb);this.iP.l(175,0);this.m(this.iP)}else{c=new sc.ea("Missing Option Type: "+this.vB.type);c.l(175,4);this.m(c)}if(this.vB.wG){this.N_a=h;this.a.size.y=this.a.size.y+17;c=new sc.ea(ig.lang.get("sc.gui.options.headers."+
this.vB.Bg),{font:sc.Ea.Ib});c.l(2,6);this.m(c);this.gf.l(5,21)}if(this.vB.data==ig.Rd.se){c=new sc.ea(ig.lang.get("sc.gui.options.text-speed.example"),{speed:sc.options.get(this.tm)});c.H(ig.k.ra,ig.k.$);c.l(265,4);var m=c.gg;m.CHb=this.tm;m.gsa=0.7;m.tIb=m.update;m.update=function(){m.tIb();this.DLb(sc.options.get(this.CHb));if(this.On())if(this.gsa<=0){this.reset();this.gsa=0.7}else this.gsa=this.gsa-ig.i.Sa};this.m(c)}this.a.BU(h)},Da:function(a){this.N_a&&a.nc("#545454",0,this.a.size.y-26-1-
2,this.a.size.x+2,1)},RZ:function(a){this.iP.RZ&&this.iP.RZ(a)},Kfa:function(a){return this.iP.Kfa&&this.iP.Kfa(a)||h},$y:function(){if(sc.e.Z.wc()&&this.vaa.wc()){var a=this.a.Yf;b=sc.ba.Kp();c=sc.ba.Ln();if(a.x<=b&&a.x+a.Vc>b&&a.y<=c&&a.y+a.sd>c){if(!this.jla){sc.e.Cc(this.sK);this.jla=h}}else if(this.jla){sc.e.Cc("",h);this.jla=y}}}})});ig.J=h;
ig.N("game.feature.menu.gui.options.options-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.item.item-list","game.feature.menu.gui.options.options-types").K(function(){sc.Bqa=q;sc.Zkb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),list:q,Uj:{Ooa:q,fDb:q,Bo:q,YRb:q,controls:q},Kd:q,$J:q,Vd:[],Tj:q,iz:q,wl:[],rows:[],S8a:-1,Tsa:q,
U4a:y,f:function(a){this.parent();this.F(436,258);this.H(ig.k.Ia,ig.k.vb);this.U4a=a;this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR}};this.Tj=new sc.wh;this.Tj.Ql(function(a){if(this.Tsa!=a){this.ac.play();this.Tsa=a;a.ff(h);this.BQ(a);this.sF();sc.e.B6=a.data;for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){this.Jw=c;sc.e.eab(c);break}ig.input.Id&&sc.e.Cc("")}}.bind(this));a=new sc.Bl;a.F(436,242);a.l(0,
21);this.m(a);this.Kd=new sc.$E;this.Kd.l(0,29);this.Kd.F(436,228);this.m(this.Kd);a=new ig.ec(this.s,32,408,5,5);a.l(0,21);this.m(a);a=new ig.mf("#FF6D00",431,1);a.l(5,21);this.m(a);this.Uj.Ooa=this.fs("general",0,sc.Zc.Uz);this.Uj.fDb=this.fs("interface",1,sc.Zc.lk);this.Uj.Bo=this.fs("video",2,sc.Zc.eQ);this.Uj.Xc=this.fs("gamepad",3,sc.Zc.Wc);this.Uj.controls=this.fs("controls",4,sc.Zc.Ej);sc.e.B6=this.Uj.Ooa.data;this.Tj.tl(0,0);this.Uj.Ooa.ff(h);this.Tsa=this.Uj.Ooa;this.sF();this.j("HIDDEN",
h)},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){sc.e.Z.KQ(this.Tj);ig.La.Md(0.2);this.$J=new sc.ajb;ig.X.vd(this.$J);sc.Bqa=this.$J;var a=sc.e.B6;a&&this.T$(a.type,h,ig.input.Id,h);this.j("DEFAULT")},Gd:function(){sc.e.Z.lU(this.Tj);sc.options.x8a();this.list.ui();this.$J.remove();sc.Bqa=q;this.j("HIDDEN")},T$:function(a,b,c,d){b=b||y;c=c||y;d=d||y;if(this.wl[this.S8a]){this.list.ui();this.list.j("HIDDEN",h)}var f=sc.e.Tfa,i=this.wl[f];if(i){this.list=i.list;
this.rows=i.rows;this.iz=i.ua;this.list.Pf();this.list.j("DEFAULT",h);b&&!c&&this.iz.l7(y,d)}else{i={ua:q,list:q,rows:q};this.iz=new sc.SSa;this.iz.Bca=h;this.iz.OO=h;this.list=new sc.kV(1,1,28);this.list.l(0,29);this.list.F(436,228);this.list.Lta(this.iz);this.list.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.list);this.iz.Jr=this.Jr.bind(this);this.iz.Rk(function(a){a.data&&sc.e.Cc(a.data.description?a.data.description:
a.data)}.bind(this));this.iz.Y$a(function(a,b){return this.rows[b]?this.rows[b].Kfa(a):h}.bind(this));this.iz.Ql(function(a){a.data&&a.data.Vp!=g&&this.rows[a.data.Vp].RZ(a)}.bind(this));this.iz.$l=this.$l.bind(this);if(a==sc.Zc.Ej)this.iz.VOa=h;this.Qqb(a);i.ua=this.iz;i.list=this.list;i.rows=this.rows;this.list.Pf();this.wl[f]=i;this.S8a=f}},Qqb:function(a){var b=[],c=q,c=q,d=y,f=0,c=sc.nj,i;for(i in c){c=sc.nj[i];d=y;if(c.Za==a){c.browser?ig.platform==ig.Mk.BROWSER&&(d=h):c.nFb?ig.platform!=ig.Mk.BROWSER&&
(d=h):d=h;if(d){c=new sc.Vkb(i,f,this.iz,this.U4a,431);this.list.Sd(c,h);b[f]=c;f++}}}this.rows=b},BQ:function(a,b){for(var c=0;c<this.Vd.length;c++){a!=this.Vd[c]&&this.Vd[c].ff(y);if(b)this.Vd[c].focus=y}},sF:function(){for(var a=9,b=q,c=0;c<this.Vd.length;c++){b=this.Vd[c];b.a.g.x=a;a=a+b.a.size.x}},fs:function(a,b,c){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.option."+a),a,90);a.l(0,2);a.setData({type:c});this.m(a);this.Tj.jd(a,b,0);return this.Vd[b]=a},Jr:function(){return sc.ba.Au()||sc.ba.CH()||
sc.ba.OG()||sc.ba.gu()||sc.ba.Zu()||sc.ba.aw()||sc.ba.bw()},$l:function(){var a=sc.e.Tfa,b=this.Vd[a],c=-1;sc.ba.bw()?c=1:sc.ba.aw()&&(c=0);if(c>=0){this.ac.play();b.ff(y);if(c==1){a++;a>=this.Vd.length&&(a=0)}else{a--;a<0&&(a=this.Vd.length-1)}this.Tsa=b=this.Vd[a];b.ff(h);this.BQ(b,h);this.sF();sc.e.B6=b.data;sc.e.eab(a)}},Ab:function(a,b){a==sc.e&&b==sc.fa.vxa&&this.T$(sc.e.B6.type,h,ig.input.Id,!ig.input.Id)}})});ig.J=h;
ig.N("game.feature.menu.gui.options.options-menu").O("impact.feature.gui.gui","game.feature.menu.gui.options.options-list").K(function(){sc.Ykb=sc.uw.extend({Hb:q,tS:q,Vv:q,kb:q,HF:q,Hea:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=
this.Qn.bind(this);this.tS=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.reset-default"),g,h,sc.Mc.$c);this.tS.dg=h;this.tS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.tS.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.tS.cc=this.RFb.bind(this);this.Vv=new sc.Zkb(sc.e.YJa);this.m(this.Vv);this.HF=new ig.mf("black",433,196);this.HF.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.HF.a.nd=
0.8;this.HF.l(-1,29);this.HF.H(ig.k.Ia,ig.k.vb);this.HF.j("HIDDEN",h);this.m(this.HF);this.Hea=new sc.Tkb;this.m(this.Hea);this.j("DEFAULT",h)},Oc:function(){sc.P.Wa(sc.e,this);this.Vv.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.Vv.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);this.fn();this.Vv.Yd()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.tS);this.kb=q;this.Hea.hide();this.HF.j("HIDDEN");this.Vv.Gd()},
jGb:function(){return sc.ba.ND()},RFb:function(){sc.aq.Dx(ig.lang.get("sc.gui.dialogs.resetAsk"),sc.dv.WARNING,function(a){a.data==0&&sc.options.oJb()}.bind(this))},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.options.title"),ig.lang.get("sc.gui.menu.help-texts.options.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,
this.gn.bind(this));sc.e.Z.Jd(this.tS,this.jGb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("tS").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},BGb:function(){this.HF.j("HIDDEN")},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.fSa){this.Hea.show(c,this.BGb.bind(this));this.HF.j("DEFAULT")}else if(b==sc.fa.vxa){this.Hea.hide();this.HF.j("HIDDEN")}}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-start").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.gui.base.button").K(function(){sc.Dnb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:16,height:9,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:512,y:457}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetY:10},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_SCALE:{state:{alpha:0,Xa:0},time:0.2,p:KEY_SPLINES.LINEAR}},
o3:q,F_:q,Ha:q,f:function(){this.parent(162,71);this.H(ig.k.Ia,ig.k.vb);this.F(162,71);this.l(0,-1);this.Ha=new sc.wh;this.Ha.Ql(this.cc.bind(this));this.o3=new sc.mc(ig.lang.get("sc.gui.shop.buy"),150);this.o3.H(ig.k.Ia,ig.k.$);this.o3.l(0,8);this.o3.setData(0);this.m(this.o3);this.F_=new sc.mc(ig.lang.get("sc.gui.shop.sell"),150);this.F_.H(ig.k.Ia,ig.k.Cb);this.F_.l(0,8);this.F_.setData(1);this.m(this.F_);if(sc.e.nE)var a=ig.Yh.get("shops")[sc.e.nE];sc.M9[a.shopType]==sc.M9.BUY&&this.F_.setActive(y);
this.Ha.jd(this.o3,0,0);this.Ha.jd(this.F_,0,1);this.j("HIDDEN",h)},show:function(){sc.e.Z.hh(this.Ha);sc.e.Cc("",h);this.j("DEFAULT")},hide:function(a){sc.e.Z.sl(this.Ha);this.j(a?"HIDDEN_SCALE":"HIDDEN")},cc:function(a){a.data==0?sc.e.AMa(sc.Tx.FPa):a.data==1&&sc.e.AMa(sc.Tx.USa)}});sc.Enb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:16,height:9,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:512,y:457}}}),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetY:-10},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_SCALE:{state:{alpha:0,Xa:0},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,f:function(){this.parent(20,20);this.H(ig.k.Ia,ig.k.$);this.l(0,50);this.text=new sc.ea;this.text.H(ig.k.Ia,ig.k.vb);this.m(this.text);this.j("HIDDEN",h)},show:function(){var a=ig.Yh.get("shops")[sc.e.nE],a=a?ig.Ra.ic(a.name):"Unknown Shop Name";this.text.ga(" - "+a+" - ");this.F(this.text.a.size.x+12,20);this.j("DEFAULT")},hide:function(a){this.j(a?"HIDDEN_SCALE":"HIDDEN")}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-misc").O("game.feature.inventory.inventory").K(function(){sc.fW={BAb:function(a,b,c,d){if(sc.e.Wp)return sc.q.T.Dr(a);b=b*c;a=Math.min(d||99,(d||99)-sc.q.T.Dr(a));return a=Math.min(a,Math.floor(Math.max(0,sc.q.T.df-sc.e.kS()+b)/c))},kw:function(a,b){switch(b){case sc.Of.ORDER:a.sort(function(a,b){var f=sc.yb,i=f.getItem(a.item||a.id),f=f.getItem(b.item||b.id),i=i.order+sc.fW.jpa(i.type,i.equipType),f=f.order+sc.fW.jpa(f.type,f.equipType);return i-f}.bind(this));
break;case sc.Of.NAME:a.sort(function(a,b){var f=sc.yb,i=ig.Ra.ic(f.getItem(a.item).name),f=ig.Ra.ic(f.getItem(b.item).name);return i.localeCompare(f)}.bind(this));break;case sc.Of.RARITY:a.sort(function(a,b){var f=sc.yb,i=f.getItem(a.item),f=f.getItem(b.item);if(i.rarity==f.rarity){i=i.order+sc.fW.jpa(i.type,i.equipType);f=f.order+sc.fW.jpa(f.type,f.equipType);return i-f}return(i.rarity||0)-(f.rarity||0)}.bind(this))}},jpa:function(a,b){switch(a){case "CONS":return-1E4;case "EQUIP":switch(b){case "ARM":return 2E4;
case "TORSO":return 3E4;case "FEET":return 4E4}return 1E4;case "TRADE":return 5E4;case "KEY":return 6E4}}}});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","impact.feature.interact.press-repeater","game.feature.gui.base.boxes","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.shop.shop-misc").K(function(){sc.ynb=sc.Bl.extend({Ha:q,sWb:[],list:q,dm:q,TWa:sc.Of.ORDER,$x:0,lA:0,K$:q,f:function(){this.parent();this.H(ig.k.ra,ig.k.vb);this.F(252,241);
this.l(5,14);this.Eb(126,0);this.a.R={DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-257},time:0.2,p:KEY_SPLINES.LINEAR}};this.list=new sc.C9(1);this.list.Bc.ga(ig.lang.get("sc.gui.shop.cost"));this.list.Bc.l(60,0);this.list.F(252,230);this.list.l(0,3);this.Ha=this.list.list.ua;this.Ha.Rk(function(a){if(a.data&&a.data!=1){sc.e.Cc(a.data.description?a.data.description:a.data);if(a.data.id){var c=sc.yb.getItem(a.data.id);c.equipType!=g?sc.e.iMa(a.data.id):sc.e.wta();
c.isBuff?sc.e.Rj(sc.yb.M4(a.data.id),y,a.data.id):sc.e.Rj("",y)}else sc.e.wta()}}.bind(this));this.Ha.jn(function(){sc.e.Cc("",h);sc.e.Rj("",h);sc.e.wta()}.bind(this));this.Ha.Ql(this.TGb.bind(this));this.Ha.Jr=function(){return sc.ba.Au()||sc.ba.gu()||sc.ba.Zu()}.bind(this);this.m(this.list);var a=new sc.ea(ig.lang.get("sc.gui.shop.owned"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(5,0);this.list.m(a);this.dm=new ig.c$;this.j("HIDDEN",h)},update:function(){if(this.Ha.wc()&&!ig.La.zh()){if(this.lA>
0){this.lA=this.lA-ig.i.Sa;if(this.lA<=0)this.$x=this.lA=0}switch(this.nD()){case "right":this.Eua();break;case "left":this.Dua()}}},show:function(){sc.e.rl(this.ej.bind(this));sc.e.Z.hh(this.Ha);sc.e.Wp?this.list.Bc.ga(ig.lang.get("sc.gui.shop.price")):this.list.Bc.ga(ig.lang.get("sc.gui.shop.cost"));sc.e.PB=0;this.FCa(h,ig.input.Id,!ig.input.Id,sc.Of.ORDER);ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){sc.e.Z.sl(this.Ha);this.j("HIDDEN")},nD:function(){sc.ba.CH()?this.dm.hw("right"):sc.ba.OG()&&
this.dm.hw("left");return this.dm.sda()},ezb:function(){return ig.input.Id?sc.e.Z.eg:this.Ha.oY()},Eua:function(){this.nZa(1)},Dua:function(){this.nZa(-1)},nZa:function(a){var b=this.ezb();if(b&&b.Aa&&b.data&&b.data.id){var c=ig.Yh.get("shops")[sc.e.nE].maxOwn||99,d=b.data.id,f=b.Iq,i=sc.e.uY(d,f),c=sc.fW.BAb(d,i,f,c);if(!(i==0&&a==-1)&&!(i==c&&a==1)){this.qH(a,h);sc.e.vdb(d,i+a,f);b.H_(i+a,i==0);this.OOa()}}},qH:function(a,b){this.lA=0.3;if(this.K$!=a)this.$x=0;this.K$=a;this.$x=Math.min(0.2,this.$x+
0.04);a==1?sc.gd.Oab.play(q,{speed:1+(b?this.$x:0)}):sc.gd.Nab.play(q,{speed:1-(b?this.$x:0)})},OOa:function(a){for(var b=sc.q.T,c=b.df-sc.e.kS(),d=this.list.Ar(),f=d.length,i=ig.Yh.get("shops")[sc.e.nE].maxOwn||99;f--;){var j=d[f].X;if(!sc.e.Wp){var k=sc.e.uY(j.data.id,j.Iq);b.OJ(j.data.id)>=i?j.setActive(y):!k&&j.Iq>c?j.setActive(y):j.setActive(h)}if(a){j.H_(0,h);j.H6.za(b.Dr(j.data.id))}}},Vdb:function(a){this.FCa(h,ig.input.Id,!ig.input.Id,a||sc.Of.ORDER)},FCa:function(a,b,c,d){a=a||y;b=b||y;
c=c||y;this.TWa=d=d||sc.Of.ORDER;this.Ha.clear();this.list.clear(a);var f=q,f=q;if(sc.e.Wp){f=sc.Wxa[sc.e.PB];f=f.type=="EQUIP"?sc.q.T.pY(f.noa,y,d):sc.q.T.iFa(f.type,d)}else{f=ig.Yh.get("shops")[sc.e.nE].pages;f=ig.copy(f[sc.e.PB].content);sc.fW.kw(f,d)}sc.e.Wp?this.XJb(f):this.WJb(f);if(a){b?this.Ha.tl(0,0):this.Ha.Sg(0,0,y,c);this.list.list.FK(0,h)}this.nD()},XJb:function(a){for(var b=q,b=q,c=0,d=0,f=0,i=d=0;i<a.length;i++){var f=a[i],b=sc.yb.getItem(f),c=sc.q.T.Dr(f),d=Math.floor(b.cost/2),j=
new ig.Ra(b.name),j="\\i["+(b.icon+sc.yb.Er(b.rarity||0)||"item-default")+"]"+ig.Ra.ic(b.name),k=ig.Ra.ic(b.description),l=0;b.type==sc.kh.EQUIP&&(l=b.level||1);b=new sc.zTa(j,f,k,c,d,l);d==0&&b.setActive(y);d=sc.e.uY(f,d);d>0&&b.H_(d,h);this.list.Sd(b)}this.nD()},WJb:function(a){for(var b=q,c=q,d=0,f=0,i=0,j=0,k=sc.q.T.df-sc.e.kS(),l=ig.Yh.get("shops")[sc.e.nE].maxOwn||99,m=0;m<a.length;m++)if(!a[m].condition||(new ig.de(a[m].condition)).evaluate()){i=a[m].item;c=sc.yb.getItem(i);d=sc.q.T.Dr(i);
b=0;c.type==sc.kh.EQUIP&&(b=c.level||1);var f=a[m].price||c.cost,j=sc.e.uY(i,f),n=new ig.Ra(c.name),n="\\i["+(c.icon+sc.yb.Er(c.rarity||0)||"item-default")+"]"+ig.Ra.ic(c.name),c=ig.Ra.ic(c.description),b=new sc.zTa(n,i,c,d,f,b);j>0&&b.H_(j,h);(k<f&&!sc.e.uY(i,f)||d>=l)&&b.setActive(y);this.list.Sd(b)}},TGb:function(a){sc.e.AHb(a)},ej:function(){sc.e.Ht.length>=1?sc.aq.Dx(ig.lang.get("sc.gui.shop.leaveWithCartItems"),sc.dv.WARNING,function(a){a.data==0&&this.U5a()}.bind(this)):this.U5a()},U5a:function(){sc.e.Dk();
sc.e.Ht.length=0;sc.e.AMa(sc.Tx.im)}});sc.Anb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-257},time:0.2,p:KEY_SPLINES.LINEAR}},WZ:q,pt:q,qr:q,f:function(){this.parent();this.H(ig.k.ra,ig.k.$);this.F(158,21);this.l(52,29);this.a.nd=0.5;this.WZ=new sc.ea("");this.WZ.H(ig.k.Ia,ig.k.vb);this.m(this.WZ);this.pt=new sc.mc("\\i[arrow-left]",34,h,sc.Mc.$c);this.pt.dg=h;this.pt.l(-27,0);this.pt.cc=function(){sc.e.Wp?this.x_a(-1):this.w_a(-1)}.bind(this);
this.m(this.pt);this.qr=new sc.mc("\\i[arrow-right]",34,h,sc.Mc.$c);this.qr.dg=h;this.qr.H(ig.k.ra,ig.k.$);this.qr.l(-27,0);this.qr.cc=function(){sc.e.Wp?this.x_a(1):this.w_a(1)}.bind(this);this.m(this.qr);this.j("HIDDEN",h)},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},show:function(){sc.e.Z.Jd(this.pt,this.QZ.bind(this),h);sc.e.Z.Jd(this.qr,this.SZ.bind(this),h);this.j("DEFAULT");var a=q;if(sc.e.Wp){a=sc.Wxa;this.WZ.ga(ig.lang.get("sc.gui.shop.sellPages."+a[sc.e.PB].lang))}else{a=
ig.Yh.get("shops")[sc.e.nE].pages;this.WZ.ga(ig.Ra.ic(a[sc.e.PB].title))}if(a.length==1){this.pt.setActive(y);this.qr.setActive(y);this.pt.ga("\\i[arrow-left-off]");this.qr.ga("\\i[arrow-right-off]")}else{this.pt.setActive(h);this.qr.setActive(h);this.pt.ga("\\i[arrow-left]");this.qr.ga("\\i[arrow-right]")}},hide:function(){sc.e.Z.Te(this.pt);sc.e.Z.Te(this.qr);this.j("HIDDEN")},x_a:function(a){var b=sc.Wxa,c=sc.e.PB+a;a<0?c<0&&(c=b.length-1):a>0&&c>=b.length&&(c=0);sc.e.wab(c);this.WZ.ga(ig.lang.get("sc.gui.shop.sellPages."+
b[sc.e.PB].lang))},w_a:function(a){var b=ig.Yh.get("shops")[sc.e.nE].pages;if(b.length!=1){var c=sc.e.PB+a;a<0?c<0&&(c=b.length-1):a>0&&c>=b.length&&(c=0);sc.e.wab(c);this.WZ.ga(ig.Ra.ic(b[sc.e.PB].title))}},QZ:function(){return sc.ba.aw()},SZ:function(){return sc.ba.bw()}});sc.zTa=sc.IP.extend({DNb:new ig.ia("media/gui/menu.png"),lr:q,H6:q,count:q,WU:q,aa:0,f:function(a,b,c,d,f,i){this.parent(a,142,106,b,c);this.Iq=f||0;this.aa=i||0;this.H6=new sc.Tb(99,{transitionTime:0.1});this.H6.za(d,h);this.H6.H(ig.k.ra,
ig.k.$);this.H6.l(4,7);this.m(this.H6);this.lr=new sc.Tb(999999);this.lr.za(f,h);this.lr.H(ig.k.ra,ig.k.$);this.lr.l(54,7);this.m(this.lr);this.count=new sc.Tb(99,{noZero:h,transitionTime:0.1});this.count.pe(sc.Od.zw);this.count.za(0,h);this.count.H(ig.k.ra,ig.k.$);this.count.l(28,7);this.m(this.count);this.WU=new ig.ec(this.DNb,136,448,6,6);this.WU.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.WU.H(ig.k.ra,ig.k.$);this.WU.l(46,
8);this.m(this.WU);this.WU.j("HIDDEN",h);this.GH(i)},H_:function(a,b){this.count.za(a,b);a>=1?this.WU.j("DEFAULT",h,y):this.WU.j("HIDDEN",h)},sHa:function(){this.yk=h;this.ff(h);this.button.yk=h;this.button.ff(h)},ova:function(){this.yk=y;this.ff(y);this.button.yk=y;this.button.ff(y)}})});ig.J=h;
ig.N("game.feature.trade.trade-model").O("impact.base.game","impact.base.loader","impact.feature.interact.button-interact","impact.feature.database.database","impact.feature.storage.storage","game.feature.model.base-model").K(function(){sc.iA={};sc.iA.rI=0;sc.iA.Pkb=1;sc.iA.Tva=2;sc.bQ={ORDER:0,FOUND:1};sc.vpb=ig.Uf.extend({Uo:[],Z:q,options:q,iB:q,OF:q,JC:-1,Iv:-1,visible:y,RLa:0,$U:0,ENa:y,wXb:y,JY:y,ZA:{id:-1,hJ:q},GJ:{id:-1,hJ:q},WF:sc.iA.rI,Xj:{},el:{},f:function(){this.parent("Traders");this.Z=
new ig.$s;ig.zd.Lg(this);window.Ed&&ig.Yh.Lg("traders","TradeEnumEditor","Traders");this.Xj=ig.Yh.get("traders")||{};for(var a in this.Xj){var b=this.Xj[a];b.upgradeTo&&this.Xj[b.upgradeTo]&&(this.Xj[b.upgradeTo].child=a)}ig.ma.Up("traders",this,"VarTradeEditor")},Fu:function(a){var b={},c;for(c in this.el)this.Xj[c]&&(b[c]={characterName:this.el[c].characterName,map:this.el[c].map&&this.el[c].map.oD?this.el[c].map.oD():"???",area:this.el[c].area&&this.el[c].area.oD?this.el[c].area.oD():"???",time:this.el[c].time||
0});a.tradersFound=b},Bt:function(a){a=a.tradersFound||{};this.el={};for(var b in a)this.el[b]={characterName:a[b].characterName,map:new ig.Ra(a[b].map||"???"),area:new ig.Ra(a[b].area||"???"),time:a[b].time||0};this.Bvb();sc.pa.Ni("trade","tradeRate",this.lS(h))},Bvb:function(){for(var a in this.Xj){var b=this.Xj[a];this.el[a]&&b.upgradeTo&&(this.el[b.upgradeTo]||this.EOa(b.upgradeTo,this.el[a].characterName,a))}},lS:function(a,b){var c=0,d=0,f;for(f in this.Xj)if(!this.Xj[f].noTrack&&!(b&&this.Xj[f].area!=
b)){this.el[f]&&c++;d=d+1}return a?c/d:c},P2a:function(a){var b=0,c;for(c in this.Xj)this.Xj[c].noTrack||a&&this.Xj[c].area!=a||b++;return b},fj:function(){this.el={}},bm:function(a,b){if(b[0]=="traders"){var c=b[1];if(this.Xj[c])switch(b[2]){case "name":return ig.Ra.ic(this.Xj[c].name);case "unlocked":return this.el[c]}}e(Error("Unsupported var access path: "+a))},n3a:function(a){for(var b in this.Xj)if(this.Xj[b].area==a)return h;return y},rCb:function(a){for(var b in this.el)if(this.Xj[b]&&this.Xj[b].area==
a)return h;return y},m3a:function(){if(sc.map.j3a())for(var a in this.el)return h;return y},qCb:function(a){return this.el[a]},jOb:function(a,b){if(!this.Xj[a].noTrack&&!this.el[a]){this.el[a]={characterName:b||"",map:sc.map.Xoa(),area:sc.map.XEa(),time:(new Date).getTime()};var c=0;this.Xj[a].upgradeTo&&(c=this.EOa(this.Xj[a].upgradeTo,b,a));sc.pa.Ni("tradersFound",a,1);sc.pa.bc("trade","tradersTotal",1);sc.pa.Ni("trade","tradeRate",this.lS(h));sc.e.xF({type:"TRADER",trader:a,isUpdate:c==1})}},EOa:function(a,
b,c){if(this.Xj[a].noTrack)return 0;if(this.el[a])return 1;this.el[a]={characterName:b||"",map:ig.copy(this.el[c].map),area:ig.copy(this.el[c].area),time:(new Date).getTime()};sc.pa.Ni("tradersFound",a,1);sc.pa.bc("trade","tradersTotal",1);return this.Xj[a].upgradeTo?this.EOa(this.Xj[a].upgradeTo,b,a):2},AJb:function(a){if(!this.Xj[a].noTrack&&this.el[a]){sc.pa.Ni("tradersFound",a,0);sc.pa.RH("trade","tradersTotal",1);sc.pa.Ni("trade","tradeRate",this.lS(h));delete this.el[a]}},CY:function(a){return this.Xj[a]},
Q2a:function(a){return ig.Ra.ic(this.Xj[a].name)},zBb:function(a,b){return sc.map.Kv(this.Xj[a].area,b)},epa:function(a){return this.el[a]},dAb:function(a,b){var c=[],d;for(d in this.el)this.Xj[d]&&(this.Xj[d].noTrack||(a?this.Xj[d].area==a&&c.push(d):c.push(d)));b!=g&&this.kw(c,b);return c},kw:function(a,b){switch(b){case sc.bQ.FOUND:a.sort(function(a,b){return(this.el[b].time||0)-(this.el[a].time||0)}.bind(this));break;case sc.bQ.ORDER:a.sort(function(a,b){return(this.Xj[a].order||0)-(this.Xj[b].order||
0)}.bind(this))}},IDa:function(a){this.JY=y;ig.La.De(this.Z);this.options=a||q;this.visible=h;this.RLa=0},kyb:function(){ig.La.$e(this.Z);this.options=q;this.ENa=this.JY=this.visible=y;this.ZA.id=-1;this.JC=this.GJ.id=-1;this.WF=sc.iA.rI;this.$U=0},Xna:function(a){sc.pa.bc("trade","total",1);for(var b=this.options[this.$U],c=sc.q.T,d=b.require,f=d.length,i=0;f--;){c.removeItem(d[f].id,d[f].amount);i=i+(d[f].amount||1)}sc.pa.bc("trade","lost",i);d=b.get;f=d.length;for(i=0;f--;){c.sA(d[f].id,d[f].amount,
h);i=i+(d[f].amount||1)}c.kLa(a,h);sc.pa.bc("trade","moneyLost",a);sc.pa.bc("trade","got",i);this.RLa++;sc.P.Ga(this,sc.dt.YTa)},L$a:function(a,b){var c=sc.q.T.sb;switch(b){case sc.Ng.HEAD:this.P$(this.ZA,a,c.head,sc.cd.HEAD);break;case sc.Ng.ARM:this.P$(this.ZA,a,c.Bh,sc.cd.LEFT_ARM);this.P$(this.GJ,a,c.Fh,sc.cd.RIGHT_ARM);break;case sc.Ng.TORSO:this.P$(this.ZA,a,c.uh,sc.cd.TORSO);break;case sc.Ng.FEET:this.P$(this.ZA,a,c.ph,sc.cd.FEET)}},HZa:function(){this.ZA.id=-1;this.GJ.id=-1;this.JY=y},fOb:function(){var a=
sc.q.T;if(this.ZA.id>=0)if(this.ZA.id==this.GJ.id&&this.ZA.hJ==this.GJ.hJ){a.mz(this.ZA.hJ,-1);a.mz(this.GJ.hJ,-1);this.ZA.id=-1;this.GJ.id=-2}else{a.mz(this.ZA.hJ,-1);this.ZA.id=-1}if(this.GJ.id>=0){a.mz(this.GJ.hJ,-1);this.GJ.id=-1}this.JY=y},mKb:function(a){(a<0||a>=this.options.length)&&e(Error("No such active offer at index: "+a));this.$U=a;sc.P.Ga(this,sc.dt.cSa)},P4:function(){return this.options[this.$U]},pba:function(){for(var a=this.options[this.$U],b=sc.q.T,c=a.require,d=c.length;d--;)if(b.OJ(c[d].id)<
c[d].amount)return y;for(var c=a.get,d=c.length,f=y,i=0;d--;){b.OJ(c[d].id)<99&&(f=h);a.cost==g&&(i=i+sc.yb.getItem(c[d].id).cost*(c[d].amount||1))}i=a.cost!=g?a.cost:Math.floor((i||1)*(a.scale||1));b.df-i<0&&(f=y);return f},Cc:function(a,b){this.iB=a;sc.P.Ga(this,sc.dt.oC,b)},Rj:function(a,b,c){this.OF=a;this.JC=c||-1;sc.P.Ga(this,sc.dt.Y8,b)},lE:function(a,b){this.Iv=a;this.WF=sc.iA.rI;sc.P.Ga(this,sc.dt.DQa,b)},Ucb:function(){if(!(this.Iv<=-1)){this.ENa=!this.ENa;this.WF=sc.yb.getItem(this.Iv).equipType==
sc.Ng.ARM?(this.WF+1)%3:this.WF==sc.iA.rI?sc.iA.Tva:sc.iA.rI;sc.P.Ga(this,sc.dt.YPa)}},P$:function(a,b,c,d){if(b==c){a.id=b;a.hJ=d}}});sc.tpb=ig.Ca.extend({key:"",yf:q,No:q,event:q,Q:q,f:function(a,b){this.key=a.trader;this.yf=sc.Fb.CY(this.key)||{};this.Q=b;if(!window.Ed)this.No=new sc.spb(this.key);var c=a.event;c||(c=[{type:"START_NPC_TRADE_MENU"}]);this.event=new ig.Ja({name:"NPC EVENT",steps:c})},wNa:function(){sc.q.Xxb();sc.q.YK();sc.Fb.jOb(this.key,this.Q.fR);var a=new sc.upb(this.yf);ig.X.vd(a);
a.IDa()},Ka:function(){this.event.Ka();this.No=q}});sc.dt={};sc.dt.cSa=0;sc.dt.oC=1;sc.dt.Y8=2;sc.dt.DQa=3;sc.dt.YPa=4;sc.dt.YTa=5;ig.Vf(function(){return sc.Fb=new sc.vpb})});ig.J=h;
ig.N("game.feature.trade.gui.equip-toggle-stats").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.trade.trade-model").K(function(){sc.hUa=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-10},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:456,y:280},changes:{x:480,y:280}}}),Ub:{Tg:q,gr:q,
rr:q,xr:q,bB:q,IA:q,OB:q,hC:q},oo:{},G3:q,QC:q,Kba:q,A0:8,Rea:4,aa:0,f:function(a,b){this.parent(176,266);this.l(21,27);this.a.nd=0.9;this.A0=a==g?8:a;this.Rea=b==g?4:b;this.mF();this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.nc("#7E7E7E",2,12,this.a.size.x-4,1);a.nc("#7E7E7E",2,38,this.a.size.x-4,1);a.nc("#7E7E7E",2,162,this.a.size.x-4,1)},Yd:function(){sc.P.Hc(sc.Fb,this);sc.P.Wa(sc.Fb,this)},pl:function(){sc.P.Hc(sc.Fb,this);this.j("HIDDEN")},kXa:function(a){if(sc.Fb.Iv<0){this.Mv()&&this.a.hi==
"DEFAULT"&&(a=0);this.j("HIDDEN",y,y,q,a||0)}else{this.fM(sc.Fb.Iv);this.j("DEFAULT")}},xrb:function(a){switch(a){case "HEAD":return"item-helm";case "ARM":return"item-sword";case "TORSO":return"item-belt";case "FEET":return"item-shoe"}},fM:function(a){this.tF();var b=q,c=sc.yb.getItem(a),a=q;this.aa=0;this.QC.l(this.A0-2+this.Kba.a.size.x,13);var d=ig.lang.get("sc.gui.trade.compare")+" ";if(sc.Fb.WF==sc.iA.Tva){b=-1;d=d+ig.lang.get("sc.gui.trade.compareBASE");this.QC.ga("-----------------");this.aa=
0}else{switch(c.equipType){case sc.Ng.HEAD:b=sc.q.T.sb.head;d=d+ig.lang.get("sc.gui.trade.compareHEAD");break;case sc.Ng.ARM:if(sc.Fb.WF==sc.iA.Pkb){b=sc.q.T.sb.Bh;d=d+ig.lang.get("sc.gui.trade.compareARMLeft")}else{b=sc.q.T.sb.Fh;d=d+ig.lang.get("sc.gui.trade.compareARMRight")}break;case sc.Ng.TORSO:b=sc.q.T.sb.uh;d=d+ig.lang.get("sc.gui.trade.compareTORSO");break;case sc.Ng.FEET:b=sc.q.T.sb.ph;d=d+ig.lang.get("sc.gui.trade.compareFEET")}if(b>=0){a=sc.yb.getItem(b);if(a.type==sc.kh.EQUIP)this.aa=
a.level||1;var f;f=""+("\\i["+(a.icon+sc.yb.Er(a.rarity||0)||"item-default")+"]");f=f+ig.Ra.ic(a.name);this.QC.ga(f)}else{this.QC.ga("\\i[help4]\\i["+this.xrb(c.equipType)+"]-----------------");this.aa=0}}this.G3.ga(d);this.aa>0?this.QC.Ou(function(a,b){sc.KP.AJ(this.aa,a,b,this.gb.s)}.bind(this)):this.QC.Ou(q);d=c.params;f=this.Wt(b,"hp",d.hp||0);this.Ub.Tg.sh(f);f=this.Wt(b,"attack",d.attack||0);this.Ub.gr.sh(f);f=this.Wt(b,"defense",d.defense||0);this.Ub.rr.sh(f);f=this.Wt(b,"focus",d.focus||0);
this.Ub.xr.sh(f);f=this.Wt(b,"elemFactor",d.elemFactor?d.elemFactor[0]:1,0);this.Ub.bB.sh(f);f=this.Wt(b,"elemFactor",d.elemFactor?d.elemFactor[1]:1,1);this.Ub.IA.sh(f);f=this.Wt(b,"elemFactor",d.elemFactor?d.elemFactor[2]:1,2);this.Ub.OB.sh(f);f=this.Wt(b,"elemFactor",d.elemFactor?d.elemFactor[3]:1,3);this.Ub.hC.sh(f);if(c=c.properties){var a=a?a.properties||{}:{},d=166,i;for(i in this.oo)if(c[i]!=g){this.oo[i].j("DEFAULT",h);if(a[i]){this.oo[i].sh(this.N$(b,i,c[i]));this.oo[i].vo(a[i],h)}else this.oo[i].sh(Math.round((c[i]||
0)*100-100)/100);this.oo[i].l(this.Rea,d);d=d+16}else if(a[i]!=g){this.oo[i].j("DEFAULT",h);this.oo[i].sh(this.N$(b,i,1));this.oo[i].vo(a[i],h);this.oo[i].l(this.Rea,d);d=d+16}else this.oo[i].j("HIDDEN",h)}},Usb:function(){var a=q,a=sc.Fb.WF==sc.iA.Tva?sc.q.T.Ub:sc.q.T.xy;this.Ub.Tg.vo(a.hp);this.Ub.gr.vo(a.attack);this.Ub.rr.vo(a.defense);this.Ub.xr.vo(a.focus);this.Ub.bB.vo(a.elemFactor[0]);this.Ub.IA.vo(a.elemFactor[1]);this.Ub.OB.vo(a.elemFactor[2]);this.Ub.hC.vo(a.elemFactor[3])},tF:function(){for(var a in this.Ub)this.Ub[a].sh(0);
this.Usb();for(var b in this.oo){this.oo[b].sh(0);this.oo[b].j("HIDDEN",h)}},BRb:function(a){this.EW();a<0||sc.yb.getItem(a)},Wt:function(a,b,c,d){if(a<0){d!=g&&(c=(Math.round(c*100)-100)/100);return c}if((a=sc.yb.getItem(a))&&a.params&&a.params[b]){var f=0;if(d!=g){f=a.params[b][d]||0;c=(Math.round(c*100)-Math.floor(f*100))/100}else{f=a.params[b]||0;c=c-f}}else d!=g&&(c=(Math.round(c*100)-100)/100);return c},N$:function(a,b,c,d){if(a<0)return c=(Math.round(c*100)-100)/100;if(d){b=a[b]||1;return c=
(Math.round(b*100)-Math.round(c*100))/100}a=sc.yb.getItem(a).properties;b=a[b]!=g?a[b]:1;return c=(Math.round(c*100)-Math.round(b*100))/100},mF:function(){var a=this.Rea,b=5;this.G3=new sc.ea(ig.lang.get("sc.gui.trade.compare"),{font:sc.Ea.Ib});this.G3.l(this.A0,b);this.m(this.G3);this.Kba=new sc.ea("\\i[help4]");this.Kba.l(this.A0-2,b+8);this.m(this.Kba);this.QC=new sc.ea("");this.QC.l(this.A0-2+this.Kba.a.size.x,b+8);this.m(this.QC);var b=b+26,c=new sc.ea(ig.lang.get("sc.gui.trade.stats"),{font:sc.Ea.Ib});
c.l(this.A0,b);this.m(c);b=41;c=sc.q.T.xy;this.Ub.Tg=this.Dl(a,b,"maxhp",0,0,y,9999,c.hp);b=b+14;this.Ub.gr=this.Dl(a,b,"atk",0,1,y,999,c.attack);b=b+14;this.Ub.rr=this.Dl(a,b,"def",0,2,y,999,c.defense);b=b+14;this.Ub.xr=this.Dl(a,b,"foc",0,3,y,999,c.focus);b=b+16;this.Ub.bB=this.Dl(a,b,"res",1,4,h,999,c.elemFactor[0],0);b=b+14;this.Ub.IA=this.Dl(a,b,"res",2,5,h,999,c.elemFactor[1],1);b=b+14;this.Ub.OB=this.Dl(a,b,"res",3,6,h,999,c.elemFactor[2],2);b=b+14;this.Ub.hC=this.Dl(a,b,"res",4,7,h,999,c.elemFactor[3],
3);b=b+14;c=new sc.ea(ig.lang.get("sc.gui.trade.modifier"),{font:sc.Ea.Ib});c.l(this.A0,b);this.m(c);for(var d in sc.Af){a=sc.Af[d];a=this.Dl(this.Rea,0,"modifier."+d,5,a.Y,h,sc.K9,1,g,a.tB||y,d,a.Li);a.j("HIDDEN",h);this.oo[d]=a}},Dl:function(a,b,c,d,f,i,j,k,l,m,n,o){i=new sc.u$(ig.lang.get("sc.gui.menu.equip."+c),d,f,i,j,q,0,m);i.l(a,b);i.vo(k,h);if(c=="res"){d==1&&(c="heat");d==2&&(c="cold");d==3&&(c="shock");d==4&&(c="wave")}n||(n=c);i.we={type:"INFO",content:{title:"sc.gui.menu.equip."+c,description:"sc.gui.menu.equip.descriptions."+
n},offset:{x:-1,y:-1},index:{x:0,y:o+8||f}};this.m(i);return i},Ab:function(a,b,c){a==sc.Fb&&(b==sc.dt.DQa?this.kXa(c?0.5:0):b==sc.dt.YPa&&this.kXa(0))}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-stats").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.trade.gui.equip-toggle-stats").K(function(){sc.xnb=sc.hUa.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-181},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:5,height:5,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:116,y:425}}}),f:function(){this.parent(4,0);this.l(5,29);this.a.size.x=169;
this.a.size.y=this.a.size.y-1;this.a.nd=1;this.G3.ga(ig.lang.get("sc.gui.trade.nothing"));this.QC.ga(ig.lang.get("sc.gui.shop.noEquip"));this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.nc("#7E7E7E",0,12,this.a.size.x,1);a.nc("#7E7E7E",0,38,this.a.size.x,1);a.nc("#7E7E7E",0,162,this.a.size.x,1)},Zdb:function(){this.fM(sc.Fb.Iv)},reset:function(){this.G3.ga(ig.lang.get("sc.gui.trade.nothing"));this.QC.ga(ig.lang.get("sc.gui.shop.noEquip"));this.QC.Ou(q);this.tF()},show:function(){this.j("DEFAULT")},
hide:function(){this.j("HIDDEN")}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-cart").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box").K(function(){sc.unb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Xa:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:16,height:9,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:512,y:457}}}),pq:q,value:q,BH:q,FA:q,enabled:h,f:function(){this.parent(125,88);this.H(ig.k.hb,
ig.k.Cb);this.l(180,26);var a=5,b=new sc.ea(ig.lang.get("sc.gui.shop.cart"),{font:sc.Ea.Ib});b.l(4,a);this.m(b);a=a+13;this.pq=new sc.pya(ig.lang.get("sc.gui.shop.credits")+":");this.pq.l(0,a);this.m(this.pq);a=a+13;this.value=new sc.pya(ig.lang.get("sc.gui.shop.cost")+":");this.value.l(0,a);this.value.oc.VIa=h;this.value.P3a=h;this.value.oc.Jha=h;this.value.oc.pe(sc.Od.Nl);this.m(this.value);a=a+16;this.BH=new sc.pya(ig.lang.get("sc.gui.shop.rest")+":");this.BH.l(0,a);this.m(this.BH);this.FA=new sc.mc("\\i[help2]"+
ig.lang.get("sc.gui.shop.checkout"));this.FA.cc=this.HFb.bind(this);this.FA.H(ig.k.ra,ig.k.Cb);this.FA.l(3,3);this.m(this.FA);this.j("HIDDEN",h)},M9a:function(a){var b=sc.q.T.df;this.pq.za(b,a);this.value.za(0,a);this.BH.za(b,a);b<0?this.BH.oc.pe(sc.Od.Nl):this.BH.oc.pe(sc.Od.$n);this.FA.setActive(y)},zva:function(a){var b=a||0;if(a==g){for(var a=sc.e.Ht,c=a.length;c--;)b=b+a[c].Iq*a[c].zc;this.value.za(-b)}a=0;if(sc.e.Wp){this.value.oc.pe(sc.Od.zw);a=sc.q.T.df+b;this.value.za(b)}else{a=sc.q.T.df-
b;this.value.oc.pe(sc.Od.Nl);this.value.za(-b)}this.BH.za(a);this.value.oc.KK=sc.e.Wp&&b;if(a<0){this.BH.oc.pe(sc.Od.Nl);this.FA.setActive(y)}else{sc.e.Ht.length==0?this.FA.setActive(y):this.enabled&&this.FA.setActive(h);this.BH.oc.pe(sc.Od.$n)}},Da:function(a){this.parent(a);a.nc("#7E7E7E",0,12,this.a.size.x,1);a.nc("#FFF",3,42,this.a.size.x-6,1)},show:function(){this.M9a(h);if(sc.e.Wp){this.value.text.ga(ig.lang.get("sc.gui.shop.profit")+":");this.BH.text.ga(ig.lang.get("sc.gui.shop.total")+":")}else{this.value.text.ga(ig.lang.get("sc.gui.shop.cost")+
":");this.BH.text.ga(ig.lang.get("sc.gui.shop.rest")+":")}sc.e.Z.Jd(this.FA,this.GFb.bind(this),h);this.j("DEFAULT")},hide:function(){sc.e.Z.Te(this.FA);this.j("HIDDEN")},ULa:function(a){(this.enabled=a)?sc.e.Ht.length>=1&&this.FA.setActive(h):this.FA.setActive(y)},HFb:function(){sc.e.xHb()},GFb:function(){return sc.ba.ND()}});sc.pya=ig.da.extend({s:new ig.ia("media/gui/menu.png"),text:q,oc:q,P3a:y,f:function(a){this.parent();this.H(ig.k.ra,ig.k.$);this.F(120,8);this.text=new sc.ea(a,{font:sc.Ea.Ib});
this.text.l(0,0);this.m(this.text);this.oc=new sc.Tb(9999999,{transitionTime:0.1});this.oc.l(41,0);this.m(this.oc)},Da:function(a){this.P3a||a.na(this.s,this.a.size.x-13,0,490,224,10,8)},za:function(a,b){this.oc.za(a,b)}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-quantity").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","impact.feature.interact.gui.focus-gui").K(function(){var a={x:584,y:352,oc:1,v4a:2,Kra:-2},b={x:584,y:352,oc:-1,v4a:-2,Kra:-2,uFb:1,$h:h},c={x:621,y:352,oc:10,u4a:-2,Kra:3},d={x:621,y:352,oc:-10,u4a:2,Kra:-3,Pd:h};sc.Cnb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.2,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},
gb:new ig.jc("media/gui/menu.png",{width:6,height:6,left:9,top:9,right:9,bottom:9,Vb:{"default":{x:480,y:304}}}),Ha:q,OKa:q,Rba:q,dR:q,aR:q,bR:q,cR:q,Bc:q,lr:q,submit:q,ata:q,xqa:q,Aa:y,QNa:q,yM:q,jq:0,u2:99,Iw:q,$x:0,lA:0,K$:q,dm:q,f:function(f,j){this.parent();this.F(247,83);this.Eb(0,0);this.a.zIndex=1500;this.a.xf=h;this.a.gha=h;this.QNa=f||q;this.yM=j||q;this.Ha=new sc.wh;this.Ha.Jr=function(){return sc.ba.Au()}.bind(this);this.OKa=new sc.ea(ig.lang.get("sc.gui.shop.quantity"),{font:sc.Ea.Ib});
this.OKa.l(10,11);this.m(this.OKa);this.Rba=new sc.ea(ig.lang.get("sc.gui.shop.cost"),{font:sc.Ea.Ib});this.Rba.l(147,11);this.m(this.Rba);this.lr=new sc.Tb(9999999,{transitionTime:0.1,signed:h});this.lr.l(174,10);this.m(this.lr);this.ata=new sc.ATa(91,y);this.ata.l(9,18);this.ata.show(h);this.m(this.ata);this.xqa=new sc.ATa(91,h);this.xqa.l(142,18);this.xqa.show(h);this.m(this.xqa);this.Bc=new sc.Tb(99,{transitionTime:0.1,leadingZeros:2});this.Bc.l(116,38);this.m(this.Bc);this.dR=this.Sla(a,106,
4);this.aR=this.Sla(b,106,44);this.cR=this.Sla(c,126,24);this.bR=this.Sla(d,86,24);this.submit=new sc.mc(ig.lang.get("sc.gui.shop.submit"),84);this.submit.H(ig.k.ra,ig.k.Cb);this.submit.l(4,4);this.m(this.submit);this.Ha.jd(this.submit,0,0);this.Ha.Ql(function(){this.hide();this.Iw.H_(this.jq);this.QNa&&this.QNa(this.Iw,this.jq)}.bind(this));this.dm=new ig.c$(0.3,0.1);this.j("HIDDEN",h)},update:function(){if(this.Ha.wc()&&!ig.La.zh()){if(this.lA>0){this.lA=this.lA-ig.i.Sa;if(this.lA<=0)this.$x=this.lA=
0}switch(this.nD()){case "up":this.dR.cc(h);break;case "down":this.aR.cc(h);break;case "right":this.cR.cc(h);break;case "left":this.bR.cc(h)}}},nD:function(){sc.ba.Zu()?this.dm.hw("up"):sc.ba.gu()?this.dm.hw("down"):sc.ba.CH()?this.dm.hw("right"):sc.ba.OG()&&this.dm.hw("left");return this.dm.sda()},Sla:function(a,b,c){var d=new sc.Bnb(a);d.dg=h;d.l(b,c);d.cc=function(){var b=this.jq;this.jq=(this.jq+a.oc).Rb(0,this.u2);if(b!=this.jq){this.Bc.za(this.jq);this.zdb();this.qH(a,h);d.focus||d.We()}else sc.gd.Dv.play();
sc.e.ROa(this.Iw.data.id,this.jq,this.Iw.Iq);this.Fdb(this.jq)}.bind(this);this.m(d);return d},zdb:function(){var a=this.jq*this.Iw.Iq;this.lr.za(sc.e.Wp?a:-a);this.lr.KK=sc.e.Wp&&a;a?this.lr.pe(sc.e.Wp?sc.Od.zw:sc.Od.Nl):this.lr.pe(sc.Od.$n)},Fdb:function(a){this.dR.pe(sc.Od.$n);this.aR.pe(sc.Od.$n);this.cR.pe(sc.Od.$n);this.bR.pe(sc.Od.$n);if(a==this.u2){this.dR.pe(sc.Od.wm);this.cR.pe(sc.Od.wm)}if(a<=0){this.aR.pe(sc.Od.wm);this.bR.pe(sc.Od.wm)}},qH:function(b,d){this.lA=0.3;if(this.K$!=b)this.$x=
0;this.K$=b;this.$x=Math.min(0.2,this.$x+0.04);b==a||b==c?sc.gd.Oab.play(q,{speed:1+(d?this.$x:0)}):sc.gd.Nab.play(q,{speed:1-(d?this.$x:0)})},show:function(a,b,c){if(!this.Aa){this.l(b,c);sc.e.rl(this.ej.bind(this));sc.e.Z.hh(this.Ha);sc.e.Z.Jd(this.dR,this.sHb.bind(this),h);sc.e.Z.Jd(this.aR,this.YFb.bind(this),h);sc.e.Z.Jd(this.cR,this.aHb.bind(this),h);sc.e.Z.Jd(this.bR,this.DGb.bind(this),h);sc.e.Wp?this.Rba.ga(ig.lang.get("sc.gui.shop.profit")):this.Rba.ga(ig.lang.get("sc.gui.shop.cost"));this.dR.show();
this.aR.show();this.cR.show();this.bR.show();this.$x=0;this.Iw=a;var b=this.Iw.Iq,c=sc.e.uY(this.Iw.data.id,b),d=c*b,f=ig.Yh.get("shops")[sc.e.nE].maxOwn||99;if(sc.e.Wp)this.u2=sc.q.T.Dr(a.data.id);else{this.u2=Math.min(f||99,(f||99)-sc.q.T.Dr(a.data.id));this.u2=Math.min(this.u2,Math.floor(Math.max(0,sc.q.T.df-sc.e.kS()+d)/b))}this.jq=c||1;this.Iw.H_(c,h);this.Fdb(this.jq);this.Bc.za(this.jq,h);this.zdb();sc.e.ROa(this.Iw.data.id,this.jq,this.Iw.Iq);ig.La.Md(0.1);this.nD();this.Aa=h;this.j("DEFAULT")}},
hide:function(){if(this.Aa){sc.e.Dk();sc.e.Z.sl(this.Ha);sc.e.Z.Te(this.dR);sc.e.Z.Te(this.aR);sc.e.Z.Te(this.cR);sc.e.Z.Te(this.bR);this.dR.hide();this.aR.hide();this.cR.hide();this.bR.hide();this.Aa=y;if(ig.input.Id){sc.e.Cc("",h);sc.e.Rj("",y);sc.e.wta()}this.j("HIDDEN")}},ej:function(){this.hide();this.Iw.H_(sc.e.uY(this.Iw.data.id,this.Iw.Iq),h);sc.e.ROa();this.yM&&this.yM(this.Iw)},sHb:N(y),YFb:N(y),aHb:N(y),DGb:N(y)});var f=Math.floor(17.5);sc.Bnb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),
direction:a,sN:0,oc:q,f:function(b){this.parent();this.F(35,35);this.direction=b||a;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetX:this.direction.u4a||0,offsetY:this.direction.v4a||0},time:0.2,p:KEY_SPLINES.LINEAR}};this.oc=new sc.Tb(99,{size:sc.Ff.$c,signed:h,showPlus:h});this.oc.H(ig.k.Ia,ig.k.vb);this.oc.za(b.oc);this.oc.l(b.Kra||0,b.uFb||0);this.m(this.oc)},pe:function(a){this.oc.pe(a)},We:function(){this.sN=0.4},show:function(){this.sN=0;this.j("HIDDEN",h);
this.j("DEFAULT",y,y,q,0.1)},hide:function(){this.j("HIDDEN")},update:function(){if(this.sN>0){this.sN=this.sN-ig.i.Sa;if(this.sN<=0)this.sN=0}},Da:function(a){a.na(this.s,0,0,this.direction.x,this.direction.y+(this.focus?36:0),35,35,this.direction.Pd,this.direction.$h);if(this.sN>0){var b=(this.sN/0.4).Rb(0,1);a.na(this.s,0,0,this.direction.x,this.direction.y+36,35,35,this.direction.Pd,this.direction.$h).ge(b)}},JG:function(){if(ig.La.zh())return y;var a=Math.floor(this.a.Yf.x),b=Math.floor(this.a.Yf.y),
c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln());return Math.abs(c-(f+a))+Math.abs(d-(f+b))<=f}});sc.ATa=ig.da.extend({sXb:q,fe:q,TJ:y,f:function(a,b){this.parent();this.F(a+5,5);this.Sh=new sc.Eka(5,b,y,sc.ZP.hgb);this.m(this.Sh);this.fe=new ig.mf("#7E7E7E",a,1);this.fe.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.m(this.fe);if(b){this.Sh.l(0,5);this.fe.l(5,0);this.fe.Eb(0,0)}else{this.Sh.l(a+5,5);this.fe.l(0,0);this.fe.Eb(a,0)}this.Sh.hide();
this.fe.j("HIDDEN",h)},show:function(a){if(!this.TJ)if(a){this.Sh.show(0);this.fe.j("DEFAULT",h)}else{this.Sh.hide();this.Sh.show(0.1);this.fe.j("HIDDEN",h);this.fe.j("DEFAULT",y,y,q,0.1);this.TJ=h}},hide:function(a){if(this.TJ){this.Sh.hide(a?0:0.1,a?0:0.1);this.fe.j("HIDDEN",a);this.TJ=y}}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-confirm").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.gui.widget.modal-dialog","game.feature.menu.gui.shop.shop-misc").K(function(){sc.vnb=sc.URa.extend({Mba:q,yM:q,list:q,Sea:q,Fra:y,D5a:h,f:function(a,b){this.parent(ig.lang.get("sc.gui.shop.confirmBuy"),q,[ig.lang.get("sc.gui.shop.buy"),ig.lang.get("sc.gui.shop.cancel")],
this.VFb.bind(this));this.Ef.RF.a.nd=1;this.ob.H(ig.k.Ia,ig.k.$);this.Mba=a||q;this.yM=b||q;var c=this.content.a.size.y,d=this.ob.a.size.y+1;this.Sea=new ig.da;this.list=new sc.TL(sc.Zn.vC);this.list.ih(this.Sea);this.list.F(250,121);this.list.l(0,d);this.content.m(this.list);this.content.F(250,121+c);this.Ef.l(0,-12);this.Ef.resize();this.xa[0].ac=sc.gd.Fha},update:function(){this.parent();this.Z.wc()&&this.Ha.wc()&&(sc.ba.yZ()?this.list.scrollY(-17):sc.ba.xZ()&&this.list.scrollY(17))},show:function(){if(sc.e.Wp){this.ob.ga(ig.lang.get("sc.gui.shop.confirmSell"));
this.xa[0].ga(ig.lang.get("sc.gui.shop.sell"),h)}else{this.ob.ga(ig.lang.get("sc.gui.shop.confirmBuy"));this.xa[0].ga(ig.lang.get("sc.gui.shop.buy"),h)}this.HCa();this.parent()},HCa:function(){this.Sea.rh();this.list.Gc.Hl(0,0,0);this.list.fw();var a=sc.e.Ht;sc.fW.kw(a,sc.Of.ORDER);var b=sc.yb,c=q,d=c=q,f=0;this.Fra=y;for(var i=0;i<a.length;i++){c=b.getItem(a[i].id);d="\\i["+(c.icon+sc.yb.Er(c.rarity||0)||"item-default")+"]"+ig.Ra.ic(c.name);if(c.rarity>=sc.Wz.LEGENDARY&&sc.e.Wp)this.Fra=h;c=new sc.wnb(d,
a[i].zc,a[i].Iq);c.l(0,f);f=f+c.a.size.y;this.Sea.m(c)}this.xa[0].ac=this.Fra?q:sc.gd.Fha;this.Sea.a.size.y=f;this.list.fw(h)},VFb:function(a){if(a.data==0)if(this.Fra){sc.gd.submit.play();sc.aq.Dx(ig.lang.get("sc.gui.dialogs.sellRare"),sc.dv.WARNING,function(a){this.hide();if(a.data==0){sc.gd.Fha.play();this.Mba&&this.Mba()}else{sc.gd.submit.play();this.yM&&this.yM()}}.bind(this),h)}else{this.hide();this.Mba&&this.Mba()}else{this.hide();this.yM&&this.yM()}}});sc.wnb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
item:q,zc:q,Iq:q,f:function(a,b,c){this.parent();this.F(246,17);this.item=new sc.ea(a);this.item.l(0,0);this.m(this.item);this.zc=new sc.Tb(99,{size:sc.Ff.hv});this.zc.l(145,4);this.zc.za(b,h);this.m(this.zc);this.Iq=new sc.Tb(9999999,{size:sc.Ff.hv});this.Iq.l(174,4);this.Iq.za(c*b,h);this.m(this.Iq)},Da:function(a){this.parent(a);a.na(this.s,132,6,560,416,8,8);a.na(this.s,164,7,568,416,8,8);a.na(this.s,232,4,488,32,12,10)}})});ig.J=h;
ig.N("game.feature.menu.gui.shop.shop-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.shop.shop-start","game.feature.menu.gui.shop.shop-list","game.feature.menu.gui.shop.shop-stats","game.feature.menu.gui.shop.shop-cart","game.feature.menu.gui.shop.shop-quantity","game.feature.menu.gui.shop.shop-confirm","game.feature.control.control").K(function(){sc.znb=sc.uw.extend({Hb:q,$d:q,yS:q,N_:q,
start:q,oE:q,bga:q,pa:q,QF:q,Bc:q,xCa:q,yc:q,kb:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.$d=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.$d.dg=h;this.$d.a.R=
{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.$d.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.$d.cc=this.gH.bind(this);this.yS=new sc.mc("",q,h,sc.Mc.$c);this.yS.dg=h;this.yS.ac=q;this.yS.cc=function(){if(sc.Fb.Iv>=0){sc.gd.submit.play();sc.Fb.Ucb();this.pa.Zdb()}}.bind(this);this.N_=new sc.Enb;this.m(this.N_);this.start=new sc.Dnb;this.m(this.start);this.oE=new sc.ynb;this.m(this.oE);this.bga=new sc.Anb;this.m(this.bga);this.pa=new sc.xnb;this.m(this.pa);this.QF=
new sc.unb;this.m(this.QF);this.Bc=new sc.Cnb(this.XGb.bind(this),this.W7a.bind(this));this.xCa=new sc.vnb(this.QFb.bind(this));this.yc=new sc.hW(this.PZ.bind(this));this.yc.Sd("auto",sc.Of.ORDER,0);this.yc.Sd("name",sc.Of.NAME,1);this.yc.Sd("rarity",sc.Of.RARITY,2);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);this.start.show();this.N_.show();this.rn(ig.lang.get("sc.gui.menu.sort.auto"));
ig.La.Md(0.2);this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.$d);sc.e.Z.Te(this.yS);this.kb=q;this.start.hide();this.N_.hide();this.oE.hide();this.pa.hide();this.QF.hide();sc.Fb.WF=sc.iA.rI;sc.sa.Dia();this.yc.Aa&&this.yc.xk();this.Bc.Aa&&this.Bc.hide()},zHb:function(a){this.$d.setActive(y);this.QF.ULa(y);ig.X.vd(this.Bc);var b=a.a.Yf,c=b.x,d=b.y+b.sd-2,f=this.Bc.a;if(d+f.size.y>ig.i.height-28){d=b.y-f.size.y+1;this.Bc.Eb(f.size.x/
2,f.size.y)}else this.Bc.Eb(f.size.x/2,0);a.sHa();this.Bc.show(a,c,d)},rn:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.$d.ga(b+("\\c[3]"+a+"\\c[0]"));sc.e.$u()},FJb:function(){sc.e.Z.Te(this.$d);sc.e.Z.Te(this.yS);this.$d.j("HIDDEN");sc.e.Wp=y;switch(sc.e.N7){case sc.Tx.im:this.bga.hide();this.oE.hide();this.QF.hide();this.pa.hide();this.start.show();this.N_.show();break;case sc.Tx.FPa:sc.e.Z.Jd(this.$d,this.eH.bind(this),h);sc.e.Z.Jd(this.yS,this.Wra.bind(this),
h);this.$d.j("DEFAULT");this.start.hide(h);this.N_.hide(h);this.oE.show();this.bga.show();this.pa.show();this.QF.show();break;case sc.Tx.USa:sc.e.Wp=h;sc.e.Z.Jd(this.$d,this.eH.bind(this),h);sc.e.Z.Jd(this.yS,this.Wra.bind(this),h);this.$d.j("DEFAULT");this.start.hide(h);this.N_.hide(h);this.oE.show();this.bga.show();this.pa.show();this.QF.show()}},QFb:function(){var a=sc.e.Wp?this.hKb():this.Wub();sc.e.Ht.length=0;a?this.oE.FCa(h,ig.input.Id,!ig.input.Id,this.oE.TWa):this.oE.OOa(h);this.QF.M9a()},
Wub:function(){var a=sc.q.T;a.kLa(sc.e.kS(),h);for(var b=sc.e.Ht,c=b.length;c--;){a.sA(b[c].id,b[c].zc,h);sc.pa.bc("items","buy",b[c].zc)}return y},hKb:function(){var a=sc.q.T;a.Rla(sc.e.kS(),h);for(var b=sc.e.Ht,c=b.length,d=y;c--;){a.removeItem(b[c].id,b[c].zc);sc.pa.bc("items","sell",b[c].zc);a.Dr(b[c].id)<=0&&!d&&(d=h)}return d},XGb:function(a,b){sc.e.vdb(a.data.id,b,a.Iq);this.W7a(a);this.QF.ULa(h);this.oE.OOa()},W7a:function(a){this.QF.ULa(h);this.$d.setActive(h);a.ova()},gn:function(){return sc.ba.Hs()},
Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},eH:function(){return sc.ba.ON()},Wra:function(){return sc.ba.rIa()},gH:function(){if(this.yc.Aa)this.yc.xk();else{ig.X.vd(this.yc);this.yc.R7(this.$d)}},PZ:function(a){if(a.data){this.yc.xk();sc.e.kw(a)}},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.shop.title"),ig.lang.get("sc.gui.menu.help-texts.shop.pages"),function(){this.xh(h);if(sc.e.N7==sc.Tx.im){this.$d.h8=h;this.$d.j("HIDDEN",h)}else this.$d.h8=
y}.bind(this));this.kb.tf.push(sc.e.NFa.jr);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));this.xh(a);this.$d.j("HIDDEN",h)},xh:function(a){sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.ZSa)this.FJb(c);else if(b==sc.fa.yp){this.rn(c.text);this.oE.Vdb(c.data.vE)}else if(b==sc.fa.YSa){this.rn(ig.lang.get("sc.gui.menu.sort.auto"));this.oE.Vdb()}else if(b==sc.fa.t1){sc.Fb.lE(c);
this.pa.Zdb()}else if(b==sc.fa.Qja){sc.Fb.lE(-1);this.pa.reset()}else if(b==sc.fa.XSa)this.zHb(c);else if(b==sc.fa.Yxa)this.QF.zva(c);else if(b==sc.fa.WSa){ig.X.vd(this.xCa);this.xCa.show()}}})});ig.J=h;
ig.N("game.feature.menu.gui.help-boxes").O("impact.feature.gui.base.basic-gui","game.feature.gui.base.boxes","game.feature.menu.gui.menu-misc").K(function(){sc.dib=ig.da.extend({Mm:q,content:q,f:function(){this.parent();this.content=new ig.da;this.Mm=new sc.TL(sc.Zn.vC);this.Mm.ih(this.content);this.Mm.Hha=y;this.Mm.O7=y;this.m(this.Mm)},$La:function(a){this.content.rh();this.content.a.size.y=0;this.Mm.Gc.Hl(0,0,0);this.Mm.fw(h);this.content.m(a);this.EAa()},scroll:function(a,c){this.Mm.scrollY(a,
c,0.05)},qG:function(){return this.Mm.qG()},clear:function(){this.content.rh();this.content.a.size.y=0;this.Mm.Gc.Hl(0,0,0);this.Mm.fw(h)},F:function(a,c){this.parent(a,c);this.Mm.F(a,c)},EAa:function(){var a=this.content.a.children,a=a[a.length-1];this.content.a.size.y=a.g.y+a.size.y;this.Mm.fw()}});var a=-1;sc.rkb=ig.da.extend({s:new ig.ia("media/gui/basic.png"),R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},count:q,max:q,f:function(a){this.parent();
this.F(a,8);this.count=new sc.Tb(9);this.count.H(ig.k.hb,ig.k.vb);this.count.l(a/2-13,0);this.max=new sc.Tb(9);this.max.H(ig.k.hb,ig.k.vb);this.max.l(a/2+5,0);var c=new ig.ec(this.s,96,0,8,8);c.H(ig.k.hb,ig.k.vb);c.l(a/2-4,0);this.m(this.count);this.m(this.max);this.m(c)},GKb:function(a){this.count.za(a,h)},aab:function(a){this.max.za(a,h)}});sc.jxa=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},Ef:q,content:q,Bg:q,
Z:q,ua:q,zna:"Default",SG:2,Mqa:2,Gz:q,Hz:q,gO:q,Dh:[],Sw:0,Pub:q,lv:300,f:function(a,c){this.parent();this.F(ig.i.width,ig.i.height);this.a.nd=0.8;a=a||300;c=c||240;this.lv=a;this.Z=new ig.$s;this.ua=new sc.wh(y,ig.tw.Ija);this.Z.hh(this.ua);this.content=new ig.da;this.content.F(a,c);this.Nqb(a);this.Ef=new sc.kI(this.content);this.Ef.H(ig.k.Ia,ig.k.vb);this.Ef.l(0,0);this.m(this.Ef);this.Gz=new sc.mc("\\i[arrow-left]");this.Gz.H(ig.k.Ia,ig.k.vb);this.Gz.l(-(a/2+this.Gz.a.size.x+4),0);this.Gz.a.R=
{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Gz.cc=function(){var a=this.Sw;this.Sw--;if(this.Sw<=0)this.Sw=0;a!=this.Sw&&this.tAa(this.Sw)}.bind(this);this.Gz.j("HIDDEN",h);this.m(this.Gz);this.Hz=new sc.mc("\\i[arrow-right]");this.Hz.H(ig.k.Ia,ig.k.vb);this.Hz.l(a/2+this.Hz.a.size.x+4,0);this.Hz.a.R={DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hz.cc=function(){var a=
this.Sw;this.Sw++;if(this.Sw>=this.Dh.length-1)this.Sw=this.Dh.length-1;a!=this.Sw&&this.tAa(this.Sw)}.bind(this);this.Hz.j("HIDDEN",h);this.m(this.Hz);this.Pub=sc.gd.back;this.j("HIDDEN",h)},Dt:function(){ig.La.De(this.Z);ig.La.Md(0.2);this.Z.Aba();this.Ef.j("DEFAULT");this.Gz.j("HIDDEN",h);this.Hz.j("HIDDEN",h);this.Sw=0;this.Dh.length>0&&this.tAa(0);this.Dh.length>1?this.gO.j("DEFAULT",h):this.gO.j("HIDDEN",h);this.j("DEFAULT")},cwb:function(){ig.La.$e(this.Z);ig.La.Md(0.2);this.Ef.j("HIDDEN");
this.j("HIDDEN",y,h)},dub:function(a,c,d){this.Dh.push({Bg:a||q,content:c||q,DDb:d||y});this.gO.aab(this.Dh.length)},ZAa:function(a){var c=new ig.de;if(a&&a!="UNKNOWN LABEL")for(var d=0;d<a.length;d++){if(a[d].condition){c.lz(a[d].condition);if(!c.evaluate())continue}this.dub(a[d].title,a[d].content,a[d].content instanceof Array)}},YLa:function(a){this.zna=a||"DEFAULT";this.Bg.ga(this.zna)},tAa:function(b){var c=new ig.da;c.a.size.x=296;var d=this.Dh[b];this.Bg.ga(d.Bg||this.zna);var f=2;a=-1;if(d.content)if(d.DDb)for(var d=
d.content,i=0;i<d.length;i++)f=this.fYa(d[i],c,f);else f=this.fYa(d.content,c,f);c.a.size.y=f;this.ci.$La(c);this.gO.GKb(b+1);if(this.Sw>=this.Dh.length-1){this.Hz.yia();this.Z.Te(this.Hz);this.Hz.j("HIDDEN",h)}else if(this.Dh.length>1){this.Z.Jd(this.Hz,this.qHb.bind(this),h);this.Hz.j("DEFAULT",h)}if(this.Sw==0){this.Z.Te(this.Gz);this.Gz.yia();this.Gz.j("HIDDEN",h)}else if(this.Dh.length>1){this.Z.Jd(this.Gz,this.pHb.bind(this),h);this.Gz.j("DEFAULT",h)}},fYa:function(b,c,d){var b=ig.Ra.ic(b),
f=q;if(b.indexOf("!!min=")==0)a=b.substring(6)*1;else if(b.indexOf("--")==0){var f=b.substring(2),i=f.indexOf("--");if(i==-1){f=new sc.ea("\\i[li]"+f,{maxWidth:this.lv-8});f.l(0,d);d=d+(f.a.size.y+this.Mqa);c.m(f)}else{f=new sc.ea("\\i[li]"+(i!=-1?f.substring(0,i):""));f.l(0,d);i!=-1&&c.m(f);i=i==-1?2:i+4;b=new sc.ea(b.substring(i),{maxWidth:this.lv-(a==-1?f.a.size.x-8:a+8)});b.l(i==2?9:a==-1?f.a.size.x+4:a,d);d=d+(b.a.size.y+this.Mqa);c.m(b)}}else if(b.indexOf("!!====")==0){f=new ig.mf("#7E7E7E",
296,1);f.l(0,d);c.m(f);d=d+3}else if(b.indexOf("......")==0)d=d+4;else if(b.indexOf("....")==0)d=d+2;else if(b.indexOf("..")==0)d=d+1;else{if(b.indexOf("__")==0){f=new sc.ea(b.substring(2),{maxWidth:this.lv-4});f.l(0,d);f.H(ig.k.Ia,ig.k.$)}else{f=new sc.ea(b,{maxWidth:this.lv-4});f.l(0,d)}c.m(f);d=d+(f.a.size.y+this.SG)}return d},Nqb:function(a){var c=2;this.Bg=new sc.ea(this.zna);this.Bg.H(ig.k.Ia,ig.k.$);this.Bg.l(0,c);this.content.m(this.Bg);var c=c+(this.Bg.a.size.y+2),d=new sc.FL(300);d.H(ig.k.Ia,
ig.k.$);d.l(0,c);this.content.m(d);c=c+1;this.ci=new sc.dib;this.ci.l(0,c);this.ci.F(301,208);c=c+this.ci.a.size.y;d=new sc.FL(300);d.H(ig.k.Ia,ig.k.$);d.l(0,c);this.content.m(d);this.content.m(this.ci);c=c+4;this.gO=new sc.rkb(a);this.gO.H(ig.k.Ia,ig.k.$);this.gO.l(0,c);this.gO.j("HIDDEN",h);this.content.m(this.gO)},pHb:function(){return sc.ba.aw()||sc.ba.Lea()},qHb:function(){return sc.ba.bw()||sc.ba.Yga()},update:function(){if(!ig.La.zh()){sc.ba.yZ()?this.ci.scroll(-20):sc.ba.xZ()&&this.ci.scroll(20);
sc.ba.gu()?this.ci.scroll(200*ig.i.ja):sc.ba.Zu()&&this.ci.scroll(-200*ig.i.ja);sc.ba.Cq()&&this.cwb()}},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)}})});ig.J=h;
ig.N("game.feature.menu.gui.synop.synop-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.quests.quest-entries").K(function(){sc.pC={};sc.v1=ig.da.extend({No:q,ob:q,type:q,f:function(a){this.parent();this.F(376,18);this.type=a.type||sc.BRa.STORY;this.No=new sc.ea("\\i[logs-"+this.type+"]");this.No.H(ig.k.hb,ig.k.vb);this.m(this.No);this.ob=new sc.ea("");this.ob.H(ig.k.hb,ig.k.vb);this.ob.l(14,0);this.m(this.ob)}});sc.pC.LANDMARK=
sc.v1.extend({f:function(a){this.parent(a);var b=ig.lang.get("sc.gui.menu.synopsis-menu.types.landmark"),b=b+("\\c[3]"+sc.map.jFa(a.landmark,a.area)+"\\c[0]");this.ob.ga(b);this.ob.H(ig.k.hb,ig.k.$);this.No.H(ig.k.hb,ig.k.$);b="\\i[insetArrow]"+ig.lang.get("sc.gui.menu.synopsis-menu.types.lm")+sc.map.Kv(a.area);this.cba=new sc.ea(b,{font:sc.Ea.he});this.cba.l(6,16);this.m(this.cba);this.F(376,28)}});sc.pC.TRADER=sc.v1.extend({f:function(a){this.parent(a);var b=q,b=a.isUpdate?ig.lang.get("sc.gui.menu.synopsis-menu.types.traderUpdate"):
ig.lang.get("sc.gui.menu.synopsis-menu.types.trader"),b=b+("\\c[3]"+sc.Fb.Q2a(a.trader)+"\\c[0]");this.ob.ga(b);this.ob.H(ig.k.hb,ig.k.$);this.No.H(ig.k.hb,ig.k.$);a=sc.Fb.epa(a.trader);b="\\i[insetArrow]"+ig.lang.get("sc.gui.menu.synopsis-menu.types.lm")+a.area.toString()+" - "+a.map.toString();this.cba=new sc.ea(b,{font:sc.Ea.he});this.cba.l(6,16);this.m(this.cba);this.F(376,28)}});sc.pC.TRADER.mqa=function(a){return sc.Fb.CY(a.trader)};sc.pC.LORE=sc.v1.extend({f:function(a){this.parent(a);this.No.H(ig.k.hb,
ig.k.$);this.ob.pMa(360);var b="",b=a.update?ig.lang.get("sc.gui.menu.synopsis-menu.types.loreUpdated"):ig.lang.get("sc.gui.menu.synopsis-menu.types.lore"),b=(a=sc.Oe.qda(a.lore))?b+("\\c[3]"+ig.Ra.ic(a.title)+"\\c[0]"):b+"\\c[3]???\\c[0]";this.ob.ga(b);this.F(376,Math.max(18,this.ob.a.size.y+2))}});sc.pC.TROPHY=sc.v1.extend({f:function(a){this.parent(a);var b=ig.lang.get("sc.gui.menu.synopsis-menu.types.trophy"),b=b+(" \\c[3]"+sc.Ke.ypa(a.trophy)+"\\c[0]");this.ob.ga(b)}});sc.pC.DROP=sc.v1.extend({f:function(a){this.parent(a);
var b=ig.lang.get("sc.gui.menu.synopsis-menu.types.dropCompleted"),b=b+("\\c[3]"+sc.e.$oa(a.drop)+"\\c[0]");this.ob.ga(b)}});sc.pC.QUEST=sc.v1.extend({f:function(a){this.parent(a);var b="";if(a.task!=g){b=ig.lang.get("sc.gui.menu.synopsis-menu.types.questTask");this.ob.H(ig.k.hb,ig.k.$);this.No.H(ig.k.hb,ig.k.$);var c=sc.dc.fBb(a.quest,a.task),b=b+("\\c[3]"+sc.dc.B2a(a.quest)+"\\c[0]");this.ob.ga(b);b="\\i[insetArrow]"+ig.lang.get("sc.gui.menu.synopsis-menu.types.qtm");a=new sc.ea(b,{font:sc.Ea.he});
a.l(6,16);this.m(a);b=Math.max(72,a.a.size.x+8);c=new sc.ea(c.ik,{font:sc.Ea.he,maxWidth:360-a.a.size.x-2});c.l(b,16);this.m(c);this.F(376,14+c.a.size.y)}else if(a.finish){b=ig.lang.get("sc.gui.menu.synopsis-menu.types.questFinish");c=sc.dc.sG(a.quest);b=b+("\\c[3]"+(c?c.name:"????")+"\\c[0]");this.ob.ga(b)}else if(a.accept){b=ig.lang.get("sc.gui.menu.synopsis-menu.types.questStart");c=sc.dc.sG(a.quest);b=b+("\\c[3]"+(c?c.name:"????")+"\\c[0]");this.ob.ga(b)}}});sc.Oob=sc.vI.extend({R:{DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-204.5},time:0.2,p:KEY_SPLINES.LINEAR}},content:q,f:function(){this.parent(ig.lang.get("sc.gui.menu.synopsis-menu.log"),sc.rg.ds);this.F(384,205);this.l(25,85);this.content=new ig.da;this.content.l(4,9);this.content.F(376,194);this.m(this.content);this.Bg.we={type:"INFO",content:{title:"sc.gui.menu.help.synopsis.titles.activity",description:"sc.gui.menu.help.synopsis.description.activity"},offset:{x:-3,y:-2},size:{x:"dyn",y:11,oi:6},index:{x:0,
y:1}};this.j("HIDDEN",h)},show:function(){this.j("DEFAULT");this.content.rh();this.l(25,80);this.F(384,205);for(var a=sc.e.$S,b=a.length,c=q,d=1,f=this.a.size.y-10;b--;){c=a[b];if((sc.q.T.wq(135)||c.type!="LORE")&&(!sc.pC[c.type].mqa||sc.pC[c.type].mqa(c))){c=new sc.pC[c.type](c);c.l(0,d);d=d+c.a.size.y;f=f-c.a.size.y;if(f>0)this.content.m(c);else break}}},hide:function(){this.j("HIDDEN")}});sc.Qob=sc.vI.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-204.5},
time:0.2,p:KEY_SPLINES.LINEAR}},ik:q,f:function(){this.parent(ig.lang.get("sc.gui.menu.synopsis-menu.task"),sc.rg.ds);this.F(384,46);this.l(25,29);this.ik=new sc.ea(ig.lang.get("sc.gui.menu.synopsis-menu.notask"),{maxWidth:374});this.ik.l(5,11);this.m(this.ik);this.Bg.we={type:"INFO",content:{title:"sc.gui.menu.help.synopsis.titles.objective",description:"sc.gui.menu.help.synopsis.description.objective"},offset:{x:-3,y:-2},size:{x:"dyn",y:11,oi:6},index:{x:0,y:0}};this.j("HIDDEN",h)},show:function(){var a=
sc.q.ef||sc.q.kga;if(a){this.ik.H(ig.k.hb,ig.k.$);this.ik.a.g.y=11}else{this.ik.H(ig.k.Ia,ig.k.vb);this.ik.a.g.y=5}this.ik.ga(a||ig.lang.get("sc.gui.menu.synopsis-menu.notask"));this.j("DEFAULT")},hide:function(){this.j("HIDDEN")}});sc.PQb=sc.vI.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-204.5},time:0.2,p:KEY_SPLINES.LINEAR}},eU:q,YU:q,Jb:q,f:function(){this.parent(ig.lang.get("sc.gui.menu.synopsis-menu.favquest"),sc.rg.ds);
this.F(384,109);this.l(25,80);this.eU=new sc.ea("");this.m(this.eU);this.YU=new sc.z$;this.YU.l(30,34);this.m(this.YU);this.Bg.we={type:"INFO",content:{title:"sc.gui.menu.help.synopsis.titles.quest",description:"sc.gui.menu.help.synopsis.description.quest"},offset:{x:-3,y:-2},size:{x:"dyn",y:11,oi:6},index:{x:0,y:1}};this.j("HIDDEN",h)},K_:function(a){if(a){this.Jb=a;this.YU.j("DEFAULT",h);this.eU.H(ig.k.hb,ig.k.$);this.eU.l(4,11);this.eU.ga("\\i[quest-fav]"+a.name);this.YU.GU(sc.dc.I1a(),this.Jb,
h,h);this.YU.show(h,0.1);this.F(384,34+this.YU.a.size.y)}else{this.Jb=q;this.eU.H(ig.k.Ia,ig.k.$);this.eU.l(4,11);this.eU.ga(ig.lang.get("sc.gui.menu.synopsis-menu.noquest"));this.YU.j("HIDDEN",h);this.F(384,30)}},Da:function(a){this.parent(a);this.Jb&&a.na(this.s,10,30,416,53,17,16)},show:function(){this.K_(sc.dc.nFa());this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)}})});ig.J=h;
ig.N("game.feature.menu.gui.synop.synop-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.help-boxes","game.feature.menu.gui.synop.synop-misc").K(function(){var a=[43,73,103,133,163,193,223,253,283];sc.Pob=sc.uw.extend({Hb:q,Dz:q,kb:q,ua:q,xa:{map:q,Oe:q,Ke:q,mta:q,Fb:q,Rg:q,sma:q,aWb:q},hqa:q,QUb:q,gqa:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,
sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.ua=new sc.wh;this.ua.Rk(function(a){a.data&&(a.Aa?sc.e.Cc(a.data):sc.e.Cc("???"))});this.ua.jn(function(){sc.e.Cc("",h)});var a=sc.q.T;this.xa.Fb=this.Cl("trade",0,sc.Fc.aQ,!a.wq(135)||!sc.Fb.m3a());this.xa.sma=this.Cl("botanics",1,sc.Fc.zPa,!a.wq(285)||!sc.e.k3a());this.xa.Rg=this.Cl("enemies",2,sc.Fc.qwa,!a.wq(135));
this.xa.map=this.Cl("map",3,sc.Fc.$j);this.xa.Oe=this.Cl("lore",4,sc.Fc.EL,!a.wq(135),h);this.xa.Ke=this.Cl("trophies",5,sc.Fc.WL,y,h);this.xa.mta=this.Cl("records",6,sc.Fc.rTa,!a.wq(135));this.xa.Oe.setActive(a.wq(135));this.xa.mta.setActive(a.wq(135));this.xa.Fb.setActive(a.wq(135)&&sc.Fb.m3a());this.xa.Rg.setActive(a.wq(135));this.xa.sma.setActive(a.wq(285)&&sc.e.k3a());for(var c in this.xa)this.xa[c]&&this.m(this.xa[c]);this.ua.jd(this.xa.Fb,0,0);this.ua.jd(this.xa.sma,0,1);this.ua.jd(this.xa.Rg,
0,2);this.ua.jd(this.xa.map,0,3);this.ua.jd(this.xa.Oe,0,4);this.ua.jd(this.xa.Ke,0,5);this.ua.jd(this.xa.mta,0,6);this.hqa=new sc.Qob;this.m(this.hqa);this.gqa=new sc.Oob;this.m(this.gqa);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.Oc();sc.e.Z.hh(this.ua);sc.e.AB==sc.Fc.im&&sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);this.xa.Oe.Aa?sc.e.Mpa(sc.Fc.EL)?this.xa.Oe.OAa(h):this.xa.Oe.Z3():this.xa.Oe.Z3();this.xa.Ke.Aa?sc.e.Mpa(sc.Fc.WL)?
this.xa.Ke.OAa(h):this.xa.Ke.Z3():this.xa.Ke.Z3();(!sc.q.Aea()||sc.q.k5a())&&!sc.jb.wc()?this.xa.map.setActive(y):this.xa.map.setActive(h);this.xa.Fb.j("DEFAULT",y,y,q,0.032);this.xa.sma.j("DEFAULT",y,y,q,0.016);this.xa.Rg.j("DEFAULT",y,y,q,0);this.xa.map.j("DEFAULT",y,y,q,0);this.xa.Oe.j("DEFAULT",y,y,q,0);this.xa.Ke.j("DEFAULT",y,y,q,0);this.xa.mta.j("DEFAULT",y,y,q,0.016);this.hqa.show();this.gqa.show();ig.La.Md(0.2);this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){for(var a in this.xa){var c=
this.xa[a];c&&c.j("HIDDEN")}this.hqa.hide();this.gqa.hide();sc.e.Z.Te(this.Hb);sc.e.Z.sl(this.ua)},Cl:function(b,c,d,f,i){var j=q,j=i?new sc.aSa(f?"???":ig.lang.get("sc.gui.menu.synopsis-menu."+b),sc.$0):new sc.mc(f?"???":ig.lang.get("sc.gui.menu.synopsis-menu."+b),sc.$0);j.H(ig.k.ra,ig.k.$);j.l(10,a[c]+0);j.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-(sc.$0+10)},time:0.2,p:KEY_SPLINES.LINEAR}};j.setData(ig.lang.get("sc.gui.menu.synopsis-menu.descriptions."+b));j.e=
d;j.cc=function(){this.e&&sc.e.uH(this.e)};j.j("HIDDEN",h);return j},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.synopsis.title"),ig.lang.get("sc.gui.menu.help-texts.synopsis.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("Hb").bind(this));
sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:J()})});ig.J=h;
ig.N("game.feature.menu.gui.quests.quest-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.interact.button-group","game.feature.menu.gui.quests.quest-entries").K(function(){function a(a){switch(a){case "ALL":return"\\i[element-neutral]\\i[element-heat]\\i[element-cold]\\i[element-shock]\\i[element-wave]";case "ALL_ELEMENTS":return"\\i[element-heat]\\i[element-cold]\\i[element-shock]\\i[element-wave]";case "NEUTRAL":return"\\i[element-neutral]";
case "HEAT":return"\\i[element-heat]";case "COLD":return"\\i[element-cold]";case "SHOCK":return"\\i[element-shock]";case "WAVE":return"\\i[element-wave]"}}var b=new ig.ka("media/sound/hud/quest-solved.ogg",0.6);sc.tya=ig.t$.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0.5,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:2,height:2,left:6,top:13,right:6,bottom:0,Vb:{"default":{x:473,y:17}}}),ob:q,f:function(){this.parent();this.ob=new sc.ea(ig.lang.get("sc.gui.menu.quests.solved"),
{font:sc.Ea.he});this.ob.H(ig.k.Ia,ig.k.$);this.ob.l(0,0);this.m(this.ob);this.F(105,13)},F:function(a,b){this.parent(a,b);this.Eb(a/2,b/2)},Da:function(a){a.nc("#008277",0,6,this.a.size.x,1);this.gb.nb(a,95,13,"default",this.a.size.x/2-47.5,0)}});sc.Lxa=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:2,height:8,left:27,top:21,right:27,bottom:3,Vb:{"default":{x:416,y:0},dialog:{x:416,y:80},solved:{x:456,y:48},overlay:{x:416,y:112},"dialog-solved":{x:416,y:112},elite:{x:616,y:64},"elite-darker":{x:616,
y:96}}}),VS:q,ho:0,f:function(a,b,c){this.parent(56,32);this.F(a||56,b||32);this.VS=new sc.Tb(99,{leadingZeros:2});this.VS.H(ig.k.ra,ig.k.$);this.VS.za(c!=g?c:0);this.VS.l(5,11);this.m(this.VS)},Da:function(a){this.parent(a);this.ho!=0&&a.na(this.gb.s,6,3,this.ho==1?608:624,0,16,16)},GH:function(a){this.VS.za(a||0,h)},mha:function(a,b){this.ho=a?b?2:1:0}});var c=0;sc.$lb=ig.t$.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,
p:KEY_SPLINES.LINEAR}},RG:q,XU:q,f:function(){this.parent();this.F(281,164);this.RG=new ig.mf("#545454",257,1);this.RG.H(ig.k.Ia,ig.k.$);this.RG.l(0,0);this.m(this.RG);this.XU=new ig.da;this.XU.F(257,173);this.XU.l(12,2);this.m(this.XU);this.hide(h)},LLb:function(a,b){this.XU.rh();this.RG.color=a.ho?"#8d0000":"#545454";for(var i=b+1,j=10;i--;){j=this.qqb(i,a,j);if(j>=163){i=new ig.ec(this.s,434,56,14,4);i.H(ig.k.Ia,ig.k.$);i.l(0,4);this.XU.m(i);c=c+5;break}else c=j}this.XU.F(257,c)},qqb:function(a,
b,i){var j=new sc.z$(a,b,y,h);j.j("DEFAULT",h);j.H(ig.k.hb,ig.k.Cb);j.l(1,i);i=i+(j.a.size.y+3);ig.Ae&&ig.Ae.VU("Quest Task ["+(a+1)+"]: "+b.name,b.ij[a].ik,"data/database.json");if(i<=163){this.XU.m(j);return i}c=i-j.a.size.y;return i}});sc.amb=ig.t$.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},KH:q,iu:q,f:function(){this.parent();this.F(281,186);this.KH=new sc.tya;this.KH.H(ig.k.Ia,ig.k.$);this.KH.F(257,13);this.KH.l(0,0);this.m(this.KH);
this.iu=new sc.ea("",{font:sc.Ea.he,linePadding:0,maxWidth:254});this.iu.H(ig.k.hb,ig.k.$);this.iu.l(13,17);this.m(this.iu);this.hide(h)}});sc.Zlb=sc.Lxa.extend({s:new ig.ia("media/gui/menu.png"),xl:q,fu:q,MN:q,Wea:q,RG:q,Ho:q,uE:q,f:function(){this.parent(281,265);this.Eb(0,265);this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.quest.titles.type",description:"sc.gui.menu.help.quest.description.type"},offset:{x:3,y:2},size:{x:21,y:19},index:{x:0,y:0}};this.we[1]={content:{title:"sc.gui.menu.help.quest.titles.level",
description:"sc.gui.menu.help.quest.description.level"},offset:{x:257,y:2},size:{x:21,y:19},index:{x:1,y:0}};this.we[2]={content:{title:"sc.gui.menu.help.quest.titles.content",description:"sc.gui.menu.help.quest.description.content"},offset:{x:3,y:24},size:{x:275,y:217},index:{x:0,y:1}};this.we[3]={content:{title:"sc.gui.menu.help.quest.titles.location",description:"sc.gui.menu.help.quest.description.location"},offset:{x:3,y:243},size:{x:19,y:22},index:{x:0,y:2}};this.xl=new sc.ea("");this.xl.H(ig.k.Ia,
ig.k.$);this.xl.l(0,4);this.m(this.xl);this.fu=new sc.ea("",{font:sc.Ea.he,linePadding:0,maxWidth:254});this.fu.H(ig.k.hb,ig.k.$);this.fu.l(13,24);this.m(this.fu);this.MN=new ig.mf("#545454",277,19);this.MN.H(ig.k.Ia,ig.k.Cb);this.MN.l(0,2);this.m(this.MN);this.Wea=new sc.ea("");this.Wea.l(22,2);this.MN.m(this.Wea);var a=new ig.ec(this.s,418,33,12,18);a.l(5,1);this.MN.m(a);this.Ho=new sc.$lb;this.Ho.l(0,80);this.m(this.Ho);this.uE=new sc.amb;this.uE.l(0,80);this.m(this.uE);this.K_(q)},K_:function(a){if(a){this.Ho.hide(h);
this.uE.hide(h);this.xl.ga(a.name);this.fu.ga(a.description);this.GH(a.aa);this.mha(a.ho,sc.dc.Lr(a.id));this.Wea.ga(a.location.Lb+" - "+a.location.map);if(ig.Ae){var b="Quest Name: "+a.name;ig.Ae.VU(b,a.name,"data/database.json");b="Quest Description: "+a.name;ig.Ae.VU(b,a.description,"data/database.json")}if(sc.dc.Lr(a.id)){this.ii="solved";this.MN.color="#008277";this.uE.show(h);this.uE.iu.ga(a.iu);if(ig.Ae){b="Quest End Description: "+a.name;ig.Ae.VU(b,a.iu,"data/database.json")}}else{this.ii=
a.ho?"elite":"default";this.MN.color=a.ho?"#8d0000":"#545454";this.Ho.show(h);this.Ho.LLb(a,sc.dc.YEa(a,h))}}else{this.ii="default";this.MN.color="#545454";this.Ho.hide(h);this.uE.hide(h);this.Wea.ga("");this.xl.ga(ig.lang.get("sc.gui.menu.quests.noquest"));this.fu.ga("");this.GH(0);this.mha(y);this.ii="default"}},show:function(){this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)}});sc.Rlb=sc.Lxa.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},SMALLER:{state:{Xa:0.9,Va:0.9},time:0.1,p:KEY_SPLINES.EASE_OUT}},xl:q,fu:q,DDa:q,Nca:q,zy:q,N3:q,eu:q,Ty:q,KH:q,Jb:q,f:function(a,b){this.parent(281,b?239:218);this.ii=b?"dialog-solved":a.ho?"elite-darker":"dialog";this.Jb=a;this.GH(this.Jb.aa);this.mha(this.Jb.ho,b);this.xl=new sc.ea(this.Jb.name);this.xl.H(ig.k.Ia,ig.k.$);this.xl.l(0,4);this.m(this.xl);this.fu=new sc.ea(this.Jb.description,{font:sc.Ea.he,linePadding:0,maxWidth:254});this.fu.l(13,24);this.m(this.fu);
var c=q;if(b){this.KH=new sc.tya;this.KH.H(ig.k.Ia,ig.k.$);this.KH.F(257,13);this.KH.l(0,79);this.m(this.KH);this.DDa=new sc.ea(this.Jb.iu,{font:sc.Ea.he,linePadding:0,maxWidth:254});this.DDa.l(13,95);this.m(this.DDa)}else{c=new ig.mf(a.ho?"#8d0000":"#545454",257,1);c.H(ig.k.Ia,ig.k.$);c.l(0,78);this.m(c);this.Nca=new sc.z$(0,a,y,h);this.Nca.l(13,83);this.m(this.Nca);this.Nca.j("DEFAULT",h)}c=new ig.ec(this.s,457,37,14,9);c.l(12,b?175:152);this.m(c);c=new ig.mf(b?"#008277":a.ho?"#8d0000":"#545454",
242,1);c.l(27,b?180:157);this.m(c);c=a.Tpa&&!b;this.zy=new sc.ea("");this.N3=new sc.ea("");this.eu=new sc.ea("");this.m(this.zy);this.m(this.N3);this.m(this.eu);this.Ty=new ig.da;this.Ty.H(ig.k.ra,ig.k.$);this.Ty.l(11,b?181:158);this.Ty.F(146,48);this.m(this.Ty);this.oab(a,c,b)},K_:function(a){this.Jb=a||q;this.xl.ga(this.Jb.name);this.fu.ga(this.Jb.description);this.Nca.GU(0,this.Jb,y,h);this.mha(this.Jb.ho,y);this.ii=this.Jb.ho?"elite-darker":"dialog";var b=this.Jb.Tpa;this.zy.ga("");this.N3.ga("");
this.eu.ga("");this.oab(a,b,y)},oab:function(b,c,i){var i=i?181:158,j=q;if(b.Qh.exp){var j="\\i[exp]",k=y;if(c)j=j+"????";else{k=sc.q.T.sFa(b.Qh.exp.exp,b.aa,sc.IV.WV);j=j+(k+"* ")+(b.Qh.exp.bonus?"+"+b.Qh.exp.bonus:"")}this.zy.ga(j);this.zy.l(31,i);i=i+14;if(!c&&!k){j=new sc.ea(ig.lang.get("sc.gui.menu.quests.atCurLvl"),{font:sc.Ea.Ib});j.H(ig.k.hb,ig.k.Cb);j.l(32,4);this.m(j)}}if(b.Qh.money){c?this.N3.ga("\\i[credit]????????"):this.N3.ga("\\i[credit]"+(b.Qh.money||0));this.N3.l(31,i);i=i+14}if(b.Qh.cp){c?
this.eu.ga("\\i[cp]????????"):b.Qh.cp.amount==1?this.eu.ga("\\i[cp]"+a(b.Qh.cp.element)):this.eu.ga("\\i[cp]"+a(b.Qh.cp.element)+"x "+(b.Qh.cp.amount||0));this.eu.l(31,i)}this.Ty.rh();if(b.Qh.items)for(var i=this.Ty,b=b.Qh.items,j=this.s,l=k=0;l<b.length;l++){var m=b[l].amount,n=sc.yb.getItem(b[l].id),o="\\i["+(n.icon+sc.yb.Er(n.rarity||0)||"item-default")+"]",o=c?o+"?????????????":o+ig.Ra.ic(n.name);m>1&&(o=o+(" x "+m));m=0;n.type==sc.kh.EQUIP&&(m=n.level||0);n=new sc.ea(o);n.l(0,k);n.aa=m;n.Ls=
j;m>0&&!c&&n.Ou(function(a,b){sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(n));i.m(n);k=k+17}}});sc.KSa=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:0.5,Va:0.5,Qb:0.3},time:0.2,p:KEY_SPLINES.EASE_IN}},Kf:q,Z:q,ua:q,Gb:q,Jb:q,fp:q,xa:q,VI:q,Ud:q,Jp:y,jEa:q,mw:q,next:0,h2:q,t2:q,f:function(a,c,i,j,k){this.parent();this.a.zIndex=90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Eb(this.a.size.x/2,this.a.size.y/2);this.h2=j||q;this.t2=k||q;
this.jEa=a;this.Jp=i||y;this.Gb=c;this.Kf=new sc.Xx(this);this.fp=new sc.Rlb(a,i);this.fp.H(ig.k.Ia,ig.k.vb);this.fp.l(0,i?-11:-22);this.m(this.fp);this.Z=new ig.$s;this.ua=new sc.wh;this.ua.Ql(this.cc.bind(this));this.Z.hh(this.ua);this.xa=new sc.emb(this.ua,i,a.j6a,a.ega?h:y);this.xa.H(ig.k.Ia,ig.k.Cb);this.xa.l(0,i?24:25);this.m(this.xa);if(!this.Jp){this.Ud=new ig.da;this.Ud.F(281,218);this.Ud.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};
this.Ud.Da=function(a){this.fp.gb.X_a(a,281,218,this.fp.ho?"elite":"default","darker");this.fp.ho&&a.na(this.fp.gb.s,6,3,this.fp.ho==1?608:624,0,16,16)}.bind(this);this.Ud.j("HIDDEN",h);this.fp.m(this.Ud);this.fp.yH(this.fp.VS);this.fp.m(this.fp.VS);this.VI=new sc.ea("\\c[3]"+ig.lang.get("sc.gui.menu.quests.accepted-large")+"\\c[0]");this.VI.a.R={DEFAULT:{state:{Xa:2,Va:2,Qb:0.3},time:0.2,p:KEY_SPLINES.LINEAR},WAIT:{state:{Xa:2,Va:2,Qb:0.3},time:0.1,p:KEY_SPLINES.EASE_IN},HIDDEN:{state:{alpha:0,Xa:4,
Va:4,Qb:0.5},time:0.2,p:KEY_SPLINES.LINEAR},SMALLER:{state:{Xa:1.8,Va:1.8,Qb:0.3},time:0.1,p:KEY_SPLINES.EASE_OUT}};this.VI.H(ig.k.Ia,ig.k.vb);this.VI.l(0,-22);this.VI.j("HIDDEN",h);this.m(this.VI)}ig.La.De(this.Z);i&&b.play(y,{startTime:0.1});this.j("HIDDEN",h);this.j("DEFAULT")},pi:function(){ig.La.$e(this.Z)},cc:function(a){if(this.Jp){ig.La.Md(0.22);this.km(y)}else{ig.La.Md(1.4);if(a.data==1){sc.gd.oIb.play();this.VI.j("DEFAULT",y,y,function(){this.VI.j("SMALLER");this.Ud.j("DEFAULT");this.fp.j("SMALLER",
y,y,function(){this.fp.j("DEFAULT");this.VI.j("WAIT",y,y,function(){this.km(h)}.bind(this))}.bind(this))}.bind(this))}else a.data==2&&this.km(y)}},km:function(a){a?this.j("HIDDEN",y,y,function(){this.fp.Jb.ho&&!ig.ma.get("tutorials.questElite")&&ig.ma.set("tutorials.questElite",h);var a=sc.dc.VXa(this.fp.Jb.id,this.h2,this.t2);if(a){if(!this.mw)this.mw=sc.dc.sBb(a.Jb);if(this.mw&&this.next<this.mw.length){a=sc.dc.sG(this.mw[this.next]);this.VI.j("HIDDEN",h);this.Ud.j("HIDDEN",h);this.fp.K_(a);this.fp.a.g.y=
-11;this.xa.a.g.y=24;this.xa.lKb(this.ua);ig.La.Md(0.2);if(this.Z.eg)this.Z.eg=q;this.j("DEFAULT");this.next++}else{if(this.mw){for(var a=0,b=this.mw.length;b--;){sc.dc.eeb(sc.dc.sG(this.mw[b]),a);a=a+0.1}sc.dc.eeb(this.jEa,a)}ig.La.$e(this.Z);this.Gb&&this.Gb(h,this.jEa)}}else{ig.La.$e(this.Z);this.Gb&&this.Gb(y,this.fp.Jb);ig.warn("Something went wrong!")}}.bind(this),a?0.3:0):this.j("HIDDEN",y,h,function(){ig.La.$e(this.Z);this.Gb&&this.Gb(y,this.fp.Jb)}.bind(this),a?0.3:0)}});ig.lj.QuestSolvedDialog=
sc.KSa.extend({f:function(a){this.parent(a.quest,this.KFb.bind(this),h);ig.ma.set("tmp._questRewardsFinished",y)},KFb:function(){sc.dc.Fyb(this.fp.Jb);ig.ma.set("tmp._questRewardsFinished",h)}});ig.lj.QuestSolvedDialog.psb=h;sc.emb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:480,y:304}}}),JW:q,zR:q,UXa:y,f:function(a,b,c,j){this.parent();
this.F(142,b||c?25:45);j=b?j?ig.lang.get("sc.gui.menu.quests.collectSubQuest"):ig.lang.get("sc.gui.menu.quests.collect"):ig.lang.get("sc.gui.menu.quests.accept");this.JW=new sc.mc(j,136,h,sc.Mc.wI);this.JW.re.H(ig.k.Ia,ig.k.vb);this.JW.re.l(0,0);this.JW.l(3,3);this.JW.setData(1);this.m(this.JW);this.zR=new sc.mc(ig.lang.get("sc.gui.menu.quests.decline"),136,h,sc.Mc.wI);this.zR.re.H(ig.k.Ia,ig.k.vb);this.zR.re.l(0,0);this.zR.l(3,23);this.zR.setData(2);!b&&!c&&this.m(this.zR);a.jd(this.JW,0,0);!b&&
!c&&a.jd(this.zR,0,1)},lKb:function(a){a.pva();if(!this.UXa){this.yH(this.zR);a.lLa(0,1);ig.input.Id?a.tl(0,0):a.Sg(0,0,h,h,h);this.a.size.y=25;this.UXa=h}}})});ig.J=h;
ig.N("game.feature.menu.gui.quests.quest-tab-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.quests.quest-misc","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.item.item-sort-menu").K(function(){var a=[];sc.bmb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),list:q,Kd:q,Uj:{Aa:q,Z7:q,all:q},Vd:[],wl:[],Ha:q,Tj:[],ac:q,aB:q,dG:q,Go:q,Pk:q,Jw:-1,SI:[],iv:-1,f:function(){this.parent();
this.F(264,262);this.H(ig.k.ra,ig.k.$);this.Eb(264,262);this.aB=this.ac=sc.gd.submit;this.dG=sc.gd.Dv;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.EASE}};this.Tj=new sc.wh;this.Tj.Ql(function(a){if(this.Pk!=a){this.ac.play();this.Pk=a;a.ff(h);this.BQ(a);this.sF();sc.e.j_=a.data;for(var b=this.Vd.length;b--;)if(a==this.Vd[b]){sc.e.pab(b);break}sc.e.yha(q,
h)}}.bind(this));this.Tj.Rk(J());this.Tj.jn(J());var a=new sc.Bl;a.F(264,243);a.l(0,21);this.m(a);this.Kd=new sc.$E;this.Kd.l(0,35);this.Kd.F(262,223);this.m(this.Kd);a=new ig.ec(this.s,32,408,5,5);a.l(0,21);this.m(a);a=new ig.mf("#FF6D00",259,1);a.l(5,21);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.status-hud.lvl"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(7,-8);this.Kd.m(a);this.Uj.Aa=this.fs("active",0,sc.VP.mPa,"quest");this.Uj.Z7=this.fs("solved",1,sc.VP.eya,"quest-solve");this.Uj.all=this.fs("all",
2,sc.VP.fI,"quest-all");sc.e.j_=this.Uj.Aa.data;this.Tj.tl(0,0);this.Uj.Aa.ff(h);this.Pk=this.Uj.Aa;this.sF();this.j("HIDDEN",h)},cMa:function(){if(this.iv&&sc.e.vH==0)if(this.iv.data&&this.iv.data.id!=g){this.aB&&this.aB.play();sc.dc.u6a(this.iv.data.Jb.id);this.iv.ga(this.aAa(this.iv.data.Jb))}else this.dG.play();else{this.ac.play();var a=ig.lang.get("sc.gui.menu.help-texts.quests.title-2")+"\n\n"+ig.lang.get("sc.gui.menu.help-texts.quests.text-2"),a=new sc.rP(a,{maxWidth:300,speed:ig.Rd.se.zg},
"black",0.9);a.a.zIndex=15E4;a.a.xf=h;ig.X.vd(a)}},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){sc.e.Z.KQ(this.Tj);ig.La.Md(0.2);var a=sc.e.j_;a&&this.T$(a.type,h,ig.input.Id,h);this.j("DEFAULT")},hide:function(){sc.e.Z.lU(this.Tj);this.list.ui();this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[sc.e.vH]?this.wl[sc.e.vH].sort||sc.Ml.ACCEPTED:sc.Ml.ACCEPTED,c="auto";switch(a){case sc.Ml.ACCEPTED:c="questAccepted";break;case sc.Ml.ORDER:c="auto";break;case sc.Ml.NAME:c=
"name";break;case sc.Ml.LEVEL:c="questLevel"}return ig.lang.get("sc.gui.menu.sort."+c)},Jr:function(){return sc.ba.Au()||sc.ba.CH()||sc.ba.OG()||sc.ba.gu()||sc.ba.Zu()||sc.ba.aw()||sc.ba.bw()},$l:function(){var a=sc.e.vH,c=this.Vd[a],d=-1;if(sc.ba.bw()||sc.ba.Yga())d=1;else if(sc.ba.aw()||sc.ba.Lea())d=0;if(d>=0){this.ac.play();c.ff(y);if(d==1){a++;a>=this.Vd.length&&(a=0)}else{a--;a<0&&(a=this.Vd.length-1)}this.Pk=c=this.Vd[a];c.ff(h);sc.e.yha(q,h);this.BQ(c,h);this.sF();sc.e.j_=c.data;sc.e.pab(a)}},
Ab:function(a,c,d){if(a==sc.e)if(c==sc.fa.Ixa)this.T$(sc.e.j_.type,h,ig.input.Id,!ig.input.Id);else if(c==sc.fa.jka){sc.e.Z.lU(this.Tj);this.j("HIDDEN_EASE")}else if(c==sc.fa.Jxa){sc.e.Z.KQ(this.Tj);this.j("DEFAULT")}else c==sc.fa.yp&&this.gtb(d.data.vE)},gtb:function(a){this.wl[sc.e.vH].sort=a;this.kVa(sc.e.j_.type,a);ig.input.Id?this.Ha.zha():this.Ha.l7(y,h)},T$:function(a,c,d,f){c=c||y;d=d||y;f=f||y;if(this.wl[this.Go]){this.list.ui();this.list.j("HIDDEN",h)}var i=sc.e.vH,j=this.wl[i];if(j){this.list=
j.list;this.Ha=j.Ha;this.list.Pf();this.list.j("DEFAULT",h);c&&(d?this.Ha.zha():this.Ha.l7(y,f))}else{j={Ha:q,list:q,sort:sc.Ml.ACCEPTED};this.Ha=new sc.wh;this.list=new sc.kV(1,0,28);this.list.l(0,35);this.list.F(264,223);this.list.Lta(this.Ha);this.list.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.list);this.Ha.Jr=this.Jr.bind(this);this.Ha.Rk(function(a){if(a.data){this.iv=a;if(a.data.Jb)sc.e.yha(a.data.Jb);else{a.data instanceof
Object||sc.e.Cc(a.data);sc.e.yha(q,h)}}}.bind(this));this.Ha.jn(function(){this.iv=q;sc.e.Cc("",h);sc.e.yha(q,h)}.bind(this));this.Ha.Ql(function(a){sc.e.Zxb(a.data.Jb)}.bind(this));this.Ha.$l=this.$l.bind(this);this.kVa(a);j.Ha=this.Ha;j.list=this.list;this.list.Pf();this.wl[i]=j;this.Go=i}},kVa:function(b,c){var d=q,f=d=q,i=q,j=0;this.Ha.clear();this.list.clear();for(var c=c||sc.Ml.ACCEPTED,k=sc.dc.dBb(b,c),l=a.length=0;l<k.length;l++)if(i=k[l]){d=this.aAa(i);if(i.ega){f=(!sc.dc.Lr(i.ega)||y)&&
b==sc.VP.eya;d=new sc.WE(d,236-(f?0:22),25,i.aa);j=f?0:22;if(!f){f=new ig.ec(this.s,541,208,14,15);f.l(-16,1);d.m(f)}d.setData({Jb:i,id:l});c==sc.Ml.ORDER||c==sc.Ml.ACCEPTED?this.list.Sd(d,q,j):a.push(i)}else{d=new sc.WE(d,236,25,i.aa);j=0;d.setData({Jb:i,id:l});this.list.Sd(d,q,j)}}if(a.length>=1){l=a.length;for(k=this.list.Ar().length;l--;){i=a[l];j=this.srb(i.ega);if(j>=0){d=this.aAa(i);d=new sc.WE(d,214,25,i.aa);f=new ig.ec(this.s,541,208,14,15);f.l(-16,1);d.m(f);d.setData({Jb:i,id:this.list.Ar().length});
j==k-1?this.list.Sd(d,q,22):this.list.IGa(d,j+1,q,q,q,h);d.a.g.x=22}}}},srb:function(a){for(var c=this.list.Ar(),d=c.length;d--;)if(c[d].X.data.Jb.id==a)return d;return-1},fs:function(a,c,d,f){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.quests.tabs."+a),f,90);a.re.l(6,0);a.l(0,2);a.setData({type:d});this.m(a);this.Tj.jd(a,c,0);return this.Vd[c]=a},sF:function(){for(var a=9,c=q,d=0;d<this.Vd.length;d++){c=this.Vd[d];c.a.g.x=a;a=a+c.a.size.x}},BQ:function(a,c){for(var d=0;d<this.Vd.length;d++){a!=this.Vd[d]&&
this.Vd[d].ff(y);if(c)this.Vd[d].focus=y}},aAa:function(a){var c="",c=sc.dc.V4a(a.id)?"\\i[quest-fav]":sc.dc.Lr(a.id)?a.ho?"\\i[quest-elite-solve]":"\\i[quest-solve]":a.ho?"\\i[quest-elite]":"\\i[quest]";return c=c+a.name}})});ig.J=h;
ig.N("game.feature.npc.gui.npc-display-gui").O("impact.feature.gui.gui").K(function(){sc.aka=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},cj:q,uk:q,mb:q,size:{x:0,y:0},GR:{x:0,y:0},Sda:y,Q:q,Gb:q,T7:y,bb:"idle",ne:q,f:function(a,b,c,d,f){this.parent();this.a.jB=f||y;this.Gb=d;this.bb=c||"idle";this.cj=new sc.i9(a);this.j("HIDDEN",h);if(this.cj.loaded&&b)this.T7=h;this.cj.Yt(this);this.cj.loaded&&this.Gb&&this.Gb(this)},
iea:function(){this.uk=new ig.x9;this.uk.BGa(this.a.size.x,this.a.size.y);ig.r.pushState(this.uk);this.Q=ig.r.Pe(ig.Jc,0,this.size.z,0,{});this.Q.F(this.size.x,this.size.y,this.size.z);this.Q.mb=this.mb;this.Q.Bd();this.Q.Ma(this.bb);this.Gb&&this.Gb(this);ig.r.b_()},C8a:function(a,b,c){this.ne&&this.ne.Ka();this.ne=new ig.Bi({sheet:a,name:b});ig.r.pushState(this.uk);this.Q&&this.ne.va(this.Q,c);ig.r.b_()},pi:function(){this.cj&&this.cj.Tc();this.cj=q;this.mb&&this.mb.Tc();this.mb=q;this.uk&&this.uk.clear();
this.uk=q;this.ne&&this.ne.Ka()},Eq:function(a,b){if(a&&this.cj)if(b==this.cj){var c=this.cj.data;Vec3.assign(this.size,c.size||{x:12,y:12,z:28});Vec2.assign(this.GR,c.displayOffset||{x:0,y:0});if(c.displayOffset)this.Sda=c.displayOffset.hideBackground;this.F(this.size.x,this.size.y+this.size.z);this.Eb(this.a.size.x/2,this.a.size.y/2);this.mb=new ig.Al(c.animSheet);this.mb.Yt(this)}else if(b==this.mb){this.iea();this.j("DEFAULT",this.T7)}},update:function(){this.uk&&this.uk.XR()},Da:function(a){this.uk&&
a.WAa(this.uk,0,0)}})});ig.J=h;
ig.N("game.feature.menu.gui.quests.quest-details").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.interact.button-group","game.feature.menu.gui.quests.quest-entries","game.feature.menu.gui.quests.quest-misc","game.feature.npc.gui.npc-display-gui").K(function(){function a(a){switch(a){case "ALL":return"\\i[element-neutral]\\i[element-heat]\\i[element-cold]\\i[element-shock]\\i[element-wave]";case "ALL_ELEMENTS":return"\\i[element-heat]\\i[element-cold]\\i[element-shock]\\i[element-wave]";case "NEUTRAL":return"\\i[element-neutral]";
case "HEAT":return"\\i[element-heat]";case "COLD":return"\\i[element-cold]";case "SHOCK":return"\\i[element-shock]";case "WAVE":return"\\i[element-wave]"}}sc.Olb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.2,Va:0.2},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:4,height:8,left:6,top:8,right:6,bottom:8,Vb:{"default":{x:472,y:80},solved:{x:488,y:80},elite:{x:504,y:80}}}),fc:q,content:q,f:function(){this.parent(270,186);this.H(ig.k.ra,
ig.k.Cb);this.Eb(270,186);this.l(1,1);this.we={content:{title:"sc.gui.menu.help.quest.titles.content",description:"sc.gui.menu.help.quest.description.content2"},offset:{x:-2,y:-2},size:{x:272,y:188},index:{x:1,y:1}};this.content=new ig.da;this.fc=new sc.TL(sc.Zn.vC);this.fc.Hha=y;this.fc.O7=y;this.fc.F(268,186);this.fc.l(1,0);this.m(this.fc);this.fc.ih(this.content)},scroll:function(a,c){this.fc.scrollY(a,c,0.05)},show:function(a,c,d){var f=sc.dc.YEa(a,h)+1,i=q,j=this.content,k=5;if(!(j.a.children.length>=
1&&d)){j.rh();for(d=0;d<f;d++){i=new sc.z$(d,a,y,h);i.j("DEFAULT",h);i.l(4,k);k=k+(i.a.size.y+5);ig.Ae&&ig.Ae.VU("Quest Task ["+(d+1)+"]: "+a.name,a.ij[d].ik,"data/database.json");j.m(i)}j.F(266,k);this.fc.fw(h);this.fc.BO(0,h)}this.j("DEFAULT",!c)},hide:function(){this.j("HIDDEN",h)}});sc.Plb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},iu:q,f:function(){this.parent();this.F(254,186);this.H(ig.k.ra,ig.k.Cb);this.l(11,1);
var a=new sc.tya;a.H(ig.k.Ia,ig.k.$);a.l(1,2);a.F(249,13);this.m(a);this.iu=new sc.ea("",{font:sc.Ea.he,linePadding:0,maxWidth:254});this.iu.H(ig.k.hb,ig.k.$);this.iu.l(0,19);this.m(this.iu);this.hide()},show:function(a){this.iu.ga(a.iu);this.j("DEFAULT",h)},hide:function(){this.j("HIDDEN",h)}});sc.Nlb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:2,height:2,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:488,y:16},solved:{x:500,y:16},elite:{x:501,y:32}}}),display:q,fc:q,Sda:y,R:{DEFAULT:{state:{},
time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},f:function(){this.parent(31,42);this.fc=new ig.da;this.fc.F(31,42);this.fc.l(1,1);this.m(this.fc)},IB:function(a,c){if(a){if(this.display){this.display.remove(h);this.display=q}if(a){this.display=new sc.aka(a,h,q,this.tba.bind(this));this.fc.m(this.display);this.j("DEFAULT",h)}}else{if(this.display){c?this.display.remove(h):this.display.j("HIDDEN",y,h);this.display=q}this.j("HIDDEN",h)}},tba:function(a){if(a.cj){this.Sda=
a.Sda;a.l(this.fc.a.size.x/2-a.a.size.x/2-1+a.GR.x,this.fc.a.size.y/2-a.a.size.y/2+a.GR.y)}},Da:function(a){this.Sda||this.parent(a)}});sc.Qlb=sc.Lxa.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.3},time:0.2,p:KEY_SPLINES.EASE}},xl:q,fu:q,Rqa:q,Sqa:q,xsa:q,kO:q,zy:q,mx:q,eu:q,Ty:q,oM:q,Ho:q,uE:q,Ha:q,w8:q,Qua:q,Wg:[],MCa:q,ac:q,f:function(a){this.parent(453,265);this.H(ig.k.Ia,ig.k.vb);this.l(0,2);this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.quest.titles.type",
description:"sc.gui.menu.help.quest.description.type"},offset:{x:3,y:1},size:{x:21,y:19},index:{x:0,y:0}};this.we[1]={content:{title:"sc.gui.menu.help.quest.titles.level",description:"sc.gui.menu.help.quest.description.level"},offset:{x:428,y:1},size:{x:21,y:19},index:{x:1,y:0}};this.we[2]={content:{title:"sc.gui.menu.help.quest.titles.location",description:"sc.gui.menu.help.quest.description.location"},offset:{x:3,y:23},size:{x:32,y:20},index:{x:0,y:1}};this.we[3]={content:{title:"sc.gui.menu.help.quest.titles.owner",
description:"sc.gui.menu.help.quest.description.owner"},offset:{x:3,y:82},size:{x:32,y:20},index:{x:0,y:2}};this.we[4]={content:{title:"sc.gui.menu.help.quest.titles.rewards",description:"sc.gui.menu.help.quest.description.rewards"},offset:{x:3,y:142},size:{x:32,y:20},index:{x:0,y:3}};this.w8=a||q;this.ac=sc.gd.submit;this.Ha=new sc.wh;this.Ha.xJ=this.xJ.bind(this);this.xl=new sc.ea("");this.xl.H(ig.k.Ia,ig.k.$);this.xl.l(0,4);this.m(this.xl);this.fu=new sc.ea("",{font:sc.Ea.he,linePadding:0,maxWidth:254});
this.fu.H(ig.k.hb,ig.k.$);this.fu.l(188,24);this.m(this.fu);this.xsa=new sc.ea("Ice Cream Dealer",{font:sc.Ea.he});this.xsa.l(20,102);this.m(this.xsa);this.oM=new sc.ea(ig.lang.get("sc.gui.menu.quests.atCurLvl"),{font:sc.Ea.Ib});this.oM.H(ig.k.ra,ig.k.Cb);this.oM.l(275,3);this.oM.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.oM);this.oM.j("HIDDEN",h);a=160;this.zy=new sc.ea("");this.zy.l(20,a);this.m(this.zy);a=a+16;this.mx=
new sc.ea("");this.mx.l(20,a);this.m(this.mx);a=a+16;this.eu=new sc.ea("");this.eu.l(20,a);this.m(this.eu);a=a+16;this.Ty=new ig.da;this.Ty.l(20,a);this.m(this.Ty);a=new ig.ec(this.s,418,33,12,18);a.l(7,25);this.m(a);a=new ig.mf("#545454",155,1);a.l(20,39);this.m(a);this.Wg.push(a);a=new ig.ec(this.s,440,64,8,8);a.l(21,62);this.m(a);a=new ig.ec(this.s,433,34,22,16);a.l(8,85);this.m(a);a=new ig.mf("#545454",156,1);a.l(19,97);this.m(a);this.Wg.push(a);a=new ig.ec(this.s,457,37,14,10);a.l(8,148);this.m(a);
a=new ig.mf("#545454",152,1);a.l(23,154);this.m(a);this.Wg.push(a);this.kO=new sc.Nlb;this.kO.l(143,105);this.m(this.kO);this.Rqa=new sc.ea("Rookie Harbor");this.Rqa.l(20,43);this.m(this.Rqa);this.Sqa=new sc.ea("Marketplace");this.Sqa.l(32,60);this.m(this.Sqa);this.uE=new sc.Plb;this.m(this.uE);this.Ho=new sc.Olb;this.m(this.Ho);this.j("HIDDEN",h)},update:function(){if(!ig.La.zh()&&this.Ha.wc()&&this.Ho.a.lm){sc.ba.yZ()?this.Ho.scroll(-20):sc.ba.xZ()&&this.Ho.scroll(20);sc.ba.gu()?this.Ho.scroll(200*
ig.i.ja):sc.ba.Zu()&&this.Ho.scroll(-200*ig.i.ja)}},Jvb:function(){this.ac&&this.ac.play();(this.Qua=!this.Qua)?this.Ho.show(this.MCa,y,h):this.Ho.hide()},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(a){this.kO.IB(q,h);this.w8.ga("\\i[help2]"+ig.lang.get("sc.gui.menu.quests.tasks"));this.$sb(a);sc.e.rl(this.ej.bind(this));sc.e.Z.hh(this.Ha);sc.e.$u();ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.MCa=q;this.Qua=y;this.w8.ga("\\i[help2]"+ig.lang.get("sc.gui.menu.quests.fav"));
this.w8.setActive(h);sc.e.Z.sl(this.Ha);sc.e.$u();ig.La.Md(0.2);this.j("HIDDEN",y,y,function(){this.kO.IB(q,h)}.bind(this))},$sb:function(b){this.MCa=b;this.xl.ga(b.name);this.fu.ga(b.description);this.Rqa.ga(b.location.Lb);this.Sqa.ga(b.location.map);this.kO.IB(b.Ad);this.GH(b.aa);var c=sc.dc.Lr(b.id),d=160,f=q;this.mha(b.ho,c);var i=b.Tpa&!c;this.xsa.ga(c?b.y8a||b.Oh||"???":b.Oh||"???");this.Ho.content.rh();if(c){this.ii=this.kO.ii="solved";this.Ho.ii="solved";for(f=this.Wg.length;f--;)this.Wg[f].color=
"#008277";this.w8.setActive(h)}else{if(b.ho){this.ii=this.kO.ii="elite";this.Ho.ii="elite"}else{this.ii=this.kO.ii="default";this.Ho.ii="default"}for(f=this.Wg.length;f--;)this.Wg[f].color=b.ho?"#8d0000":"#545454";this.w8.setActive(y)}if(i){if(b.Qh.exp){this.zy.ga("\\i[exp]????");d=d+16}else this.zy.ga("");this.oM.j("HIDDEN");if(b.Qh.money){this.mx.ga("\\i[credit]????????");d=d+16}else this.mx.ga("");if(b.Qh.cp){this.eu.ga("\\i[cp]????????");d=d+16}else this.eu.ga("")}else{if(b.Qh.exp){f="\\i[exp]"+
(sc.q.T.sFa(b.Qh.exp.exp,b.aa,sc.IV.WV)+"* ");f=f+(b.Qh.exp.bonus?"+"+b.Qh.exp.bonus:"");this.zy.ga(f);this.zy.a.g.y=d;d=d+16;this.oM.j("DEFAULT",h)}else{this.zy.ga("");this.oM.j("HIDDEN",h)}if(b.Qh.money){this.mx.ga("\\i[credit]"+(b.Qh.money||0));this.mx.a.g.y=d;d=d+16}else this.mx.ga("");if(b.Qh.cp){b.Qh.cp.amount==1?this.eu.ga("\\i[cp]"+a(b.Qh.cp.element)):this.eu.ga("\\i[cp]"+a(b.Qh.cp.element)+"x "+(b.Qh.cp.amount||0));this.eu.a.g.y=d;d=d+16}else this.eu.ga("")}this.Ty.rh();if(b.Qh.items){this.Ty.a.g.y=
d;for(var d=this.Ty,f=b.Qh.items,j=this.s,k=0,l=0;l<f.length;l++){var m=f[l].amount,n=sc.yb.getItem(f[l].id),o="\\i["+(n.icon+sc.yb.Er(n.rarity||0)||"item-default")+"]",o=i?o+"?????????????":o+ig.Ra.ic(n.name);m>1&&(o=o+(" x "+m));m=0;n.type==sc.kh.EQUIP&&(m=n.level||0);n=new sc.ea(o);n.l(0,k);n.aa=m;n.Ls=j;m>0&&!i&&n.Ou(function(a,b){sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(n));d.m(n);k=k+17}}if(c){this.Ho.hide();this.uE.show(b)}else{this.uE.hide();this.Ho.show(b)}},xJ:function(){sc.ba.Cq()&&this.Ha.pea()},
ej:function(){this.hide();sc.e.Dk();sc.e.pEb()},Ab:function(a,c,d){a==sc.e&&c==sc.fa.jka&&this.show(d)}})});ig.J=h;
ig.N("game.feature.menu.gui.quests.quest-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.quests.quest-misc","game.feature.menu.gui.quests.quest-tab-list","game.feature.menu.gui.quests.quest-details").K(function(){sc.cmb=sc.uw.extend({Hb:q,$d:q,VJ:q,kb:q,DB:q,wH:q,f7:q,yc:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.DB=new sc.Zlb;this.DB.l(8,29);this.DB.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,
offsetX:-(this.DB.a.size.x/2)},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:-(this.DB.a.size.x/2)},time:0.2,p:KEY_SPLINES.EASE}};this.m(this.DB);this.DB.hide(h);this.wH=new sc.bmb;this.wH.l(8,29);this.m(this.wH);this.wH.j("HIDDEN",h);this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);
this.$d=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.$d.dg=h;this.$d.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.$d.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.$d.cc=this.gH.bind(this);this.VJ=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.quests.fav"),g,h,sc.Mc.$c);this.VJ.dg=h;this.VJ.ac=q;this.VJ.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.VJ.a.size.y},time:0.2,p:KEY_SPLINES.EASE}};
this.VJ.cc=function(){sc.e.bta?this.f7.Jvb():this.wH.cMa()}.bind(this);this.yc=new sc.hW(this.PZ.bind(this));this.yc.Sd("questAccepted",sc.Ml.ACCEPTED,0);this.yc.Sd("auto",sc.Ml.ORDER,1);this.yc.Sd("name",sc.Ml.NAME,2);this.yc.Sd("questLevel",sc.Ml.LEVEL,3);this.f7=new sc.Qlb(this.VJ);this.m(this.f7);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.wH.Oc();this.f7.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.wH.Ic();this.f7.Ic()},Yd:function(){this.Oc();sc.e.rl(this.ej.bind(this));sc.e.gk(0,
0,sc.Si.Aw);ig.La.Md(0.2);this.GW(this.wH.pm());this.DB.show();this.wH.show();this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.$d);sc.e.Z.Te(this.VJ);this.DB.hide();this.wH.hide();this.f7.hide();this.kb=q;this.yc.Aa&&this.yc.xk();ig.w3()},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},eH:function(){return sc.ba.ON()},qGb:function(){return sc.ba.ND()},gH:function(){if(this.yc.Aa)this.yc.xk();
else{ig.X.vd(this.yc);this.yc.R7(this.$d)}},PZ:function(a){if(a.data){this.yc.xk();sc.e.kw(a)}},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.quests.title"),ig.lang.get("sc.gui.menu.help-texts.quests.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.$d,this.eH.bind(this));sc.e.Z.Jd(this.VJ,this.qGb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("VJ").bind(this));
sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},GW:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.$d.ga(b+("\\c[3]"+a+"\\c[0]"));sc.e.$u()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.ISa)this.DB.K_(sc.e.PKa);else if(b==sc.fa.jka){this.$d.setActive(y);this.DB.j("HIDDEN_EASE")}else if(b==sc.fa.Jxa){this.$d.setActive(h);ig.input.Id&&this.DB.K_(q);this.DB.j("DEFAULT")}else if(b==sc.fa.Ixa){this.yc.Aa&&this.yc.xk();
c!=sc.e.vH&&this.GW(this.wH.pm())}else b==sc.fa.yp&&this.GW(c.text)}})});ig.J=h;
ig.N("game.feature.menu.gui.tab-box").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes").K(function(){sc.aUa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Tj:q,keys:[],Uj:{},Vd:[],wl:[],tg:-1,KCa:q,IXb:q,HXb:q,GXb:q,ZYa:h,jfa:q,jra:q,Go:-1,Pk:q,Jw:-1,SI:[],f:function(a){this.parent();
this.ZYa=a==g?h:a;this.jfa=new sc.Bl;this.jfa.F(100,200);this.jfa.l(0,21);this.m(this.jfa);a=new ig.ec(this.s,32,408,5,5);a.l(0,21);this.m(a);this.jra=new ig.mf("#FF6D00",95,1);this.jra.l(5,21);this.m(this.jra);this.F(100,200);this.Tj=new sc.wh;this.Tj.Ql(function(a){if(this.Pk!=a){a.ff(h);this.Pk=a;this.eE(a);this.jta();this.rK(a,y)&&this.Vr(this.jG(a))}else this.rK(a,h)}.bind(this));this.Tj.Rk(function(a){this.IT(a)}.bind(this));this.Tj.jn(function(){this.HT()}.bind(this))},F:function(a,b){this.parent(a,
b);this.jra.F(a-5,1)},DU:function(a,b){this.jfa.F(a,b)},zm:function(a,b,c){(c=this.aO(a,b,c))||e(Error("Tab Button Creation failed for index: "+b));this.Tj.jd(c,b,0);this.Vd[b]=c;this.Uj[a]=c;this.keys[b]=a;this.jta();if(this.Vd.length==1){this.tg=0;this.Tj.tl(0,0);this.Uj[a].ff(h);this.Pk=this.Uj[a]}},Vr:function(a,b,c){if(b)this.Go=-1;if(this.Go!=a){this.Vd[a]||e(Error("No such tab at index: "+a));if(this.tg>=0&&this.Go>=0)(b=this.wl[this.Go])&&this.uJa(b,c);this.tg=a;this.KCa=q;b=this.Go;this.Go=
this.tg;var d=this.wl[a];if(d){this.MJa(d,a,c);this.qK(this.tg,b,c)}else{this.KCa=this.xJa(a,c);if(this.ZYa)this.wl[this.tg]=this.KCa;this.qK(this.tg,b)}}},show:function(a){sc.e.Z.KQ(this.Tj);a!=g&&this.Vr(a)},hide:function(){sc.e.Z.lU(this.Tj)},jta:function(){for(var a=9,b=q,c=0;c<this.Vd.length;c++){b=this.Vd[c];b.a.g.x=a;a=a+b.a.size.x}},eE:function(a,b){for(var c=0;c<this.Vd.length;c++){a!=this.Vd[c]&&this.Vd[c].ff(y);if(b)this.Vd[c].focus=y}},Yoa:function(){return this.tg<=-1?q:this.Vd[this.tg]},
Q4:function(){return this.keys[this.tg]},jG:function(a){return this.Vd.indexOf(a)},IT:J(),rK:J(),aO:J(),HT:J(),qK:J(),uJa:J(),xJa:J(),MJa:J()});sc.KV=sc.aUa.extend({Xm:q,Kj:q,Mqa:0,NHa:20,$wb:0,Oba:0,OHa:0,MHa:0,Kd:q,f:function(a,b){this.parent(a);this.$wb=b||0;this.Kd=new sc.$E;this.Kd.l(0,35);this.Kd.F(this.a.size.x,223+this.Oba);this.m(this.Kd)},update:function(){this.Kj&&(this.Kj.wc()&&ig.input.Id)&&this.$l()},F:function(a,b){this.parent(a,b);this.Kd&&this.Kd.F(this.a.size.x,223+this.Oba)},show:function(){this.parent()},
hide:function(){this.parent();this.Xm.ui()},uJa:function(){if(this.Xm){this.Xm.ui();this.Xm.j("HIDDEN",h)}},MJa:function(a,b,c){this.Xm=a.list;this.Kj=a.Ha;this.Xm.Pf();this.Xm.j("DEFAULT",h);ig.input.Id?this.Kj.zha():this.Kj.l7(y,c&&c.skipSounds)},xJa:function(){var a={Ha:q,list:q,sort:this.F7a()||sc.Sx.ORDER};this.Kj=new sc.wh;this.Xm=new sc.kV(1,this.Mqa,this.NHa);this.Xm.l(0,35+this.OHa);this.Xm.F(this.a.size.x,223+this.Oba+this.MHa);this.Xm.Lta(this.Kj);this.Xm.a.R={DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.Xm);this.Kj.Jr=this.Jr.bind(this);this.Kj.$l=this.$l.bind(this);this.Kj.Rk(function(a){this.ET(a)}.bind(this));this.Kj.jn(function(){this.FT()}.bind(this));this.Kj.Ql(function(a){this.Lfa(a)}.bind(this));this.cH(this.Xm,this.Kj,this.Yoa().data.type,a.sort);a.Ha=this.Kj;a.list=this.Xm;this.Xm.Pf();return a},sort:function(a){var b=this.Vd[this.tg].data.type;this.wl[this.tg].sort=a;this.cH(this.Xm,this.Kj,b,a);
ig.input.Id?this.Kj.zha():this.Kj.l7(y,h)},Jr:function(){return sc.ba.Au()||sc.ba.gu()||sc.ba.Zu()},$l:function(){var a=-1;sc.ba.bw()?a=1:sc.ba.aw()&&(a=0);this.TNa(a)},TNa:function(a){var b=this.tg,c=this.Yoa();if(a>=0){c.ff(y);if(a==1){b++;b>=this.Vd.length&&(b=0)}else{b--;b<0&&(b=this.Vd.length-1)}this.Pk=c=this.Vd[b];c.ff(h);a=this.DT(c,b,a);this.Vr(b,y,a);this.eE(c,h);this.jta()}},F7a:N(0),Lfa:J(),ET:J(),FT:J(),DT:J(),cH:J()})});ig.J=h;
ig.N("game.feature.msg.gui.msg-skip-hud").O("impact.feature.gui.gui","game.feature.gui.base.boxes","game.feature.gui.base.text").K(function(){sc.WRa=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0,Xa:0},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,Gc:q,wsa:q,n:0,f:function(){this.parent();this.text=new sc.ea("\\i[skip-cutscene]",{});this.Gc=new sc.Tnb(this.text.a.size.x+4);this.text.H(ig.k.Ia,ig.k.vb);this.text.l(1,0);this.a.size.x=this.Gc.a.size.x;this.a.size.y=
this.Gc.a.size.y;this.a.Db.x=this.Gc.a.Db.x;this.a.Db.y=this.Gc.a.Db.y;this.m(this.Gc);this.m(this.text)},update:function(){this.n=this.n+ig.i.Sa;var a=0.75+0.25*Math.sin(this.n/0.5*2*Math.PI);this.Gc.a.nd=a;this.text.a.nd=a},hide:function(){this.j("HIDDEN")},show:function(){this.j("DEFAULT")}})});ig.J=h;
ig.N("game.feature.msg.gui.side-message-hud").O("impact.feature.gui.gui","game.feature.gui.base.boxes","game.feature.gui.base.text","game.feature.gui.base.slick-box","game.feature.msg.gui.msg-skip-hud").K(function(){sc.Hnb=ig.da.extend({Iha:q,u8a:0,jKa:[],Dj:[],n:0,O6:y,UVb:0,AWb:q,Fm:q,Oq:q,Iga:y,U7:q,R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},f:function(){this.parent();this.F(290,200);this.a.align.y=ig.k.Cb;this.a.zIndex=101;this.a.xf=
h;this.Fm=new sc.Fnb;this.m(this.Fm);this.l(0,3);this.Oq=new sc.WRa;this.m(this.Oq);this.Oq.j("HIDDEN",h);this.Oq.H(ig.k.hb,ig.k.Cb);this.U7=new sc.GTa(this,10);this.Iha=new sc.Inb;this.m(this.Iha);this.Iha.j("HIDDEN",h);sc.P.Wa(sc.q.message,this);sc.P.Wa(sc.q,this)},update:function(){if(!this.O6&&this.a.hi=="DEFAULT")if(this.n>0){this.n=this.n-ig.i.Sa;this.n<=0&&this.T_a()}else if(this.n<0){this.n=this.n+ig.i.Sa;if(this.n>=0)this.Dj.length>0?this.a7():this.n=0}this.O6&&ig.Ow&&(sc.ba.$Jb()?this.m$a(-48):
sc.ba.YJb()&&this.m$a(48))},T_a:function(a){if(sc.q.message.F3a())this.bbb();else{if(a)this.Iga=h;this.a7()}},udb:function(){var a=3+sc.q.message.BBa;sc.q.oe()&&(a=a+20);this.kd(0,a,0.2,KEY_SPLINES.EASE_IN_OUT)},Ab:function(a,b){if(a==sc.q.message)if(b==sc.cf.nxa)this.n<=0&&this.bbb();else if(b==sc.cf.SPa)for(;this.Dj.length>0;)this.a7();else if(b==sc.cf.aTa){this.JJb();this.S9a(h);if(a.NK.length>0||this.Dj.length>0)this.n=2}else b==sc.cf.APa&&this.udb();else if(a==sc.q&&(b==sc.zf.Ew||b==sc.zf.cs)){this.udb();
var c=sc.q.ko()||sc.q.Kr();this.j(c?"DEFAULT":"HIDDEN");this.Dj[this.Dj.length-1]&&!sc.q.oe()&&sc.IU.De(this.U7);if(c&&!sc.q.DD()){c=sc.q.Kr();if(c!=this.O6)(this.O6=c)?this.zyb():this.S9a()}}},y3:function(){for(;this.Dj.length>0;)this.Dj.shift().remove();this.M8();sc.IU.$e(this.U7);this.n=0;this.Iga=y},zyb:function(){var a=this.Dj[this.Dj.length-1];a&&a.text.stop();for(var a=sc.q.message.QB,b=0,c=this.Dj.length;c--;)b=b+(this.Dj[c].a.size.y+3);for(c=Math.max(0,a.length-this.Dj.length);c--;){var d=
a[c],f=new sc.CTa;f.ih(d.Me,d.message,h);f.l(0,b);f.show();b=b+(f.a.size.y+3);this.Fm.m(f);this.jKa.push(f)}this.u8a=b-3;this.Dj.length<a.length&&this.Iha.j("DEFAULT");for(c=0;c<this.Dj.length;++c)this.Dj[c].j("DEFAULT");this.M8()},JJb:function(){this.y3();for(var a=sc.q.message.QB,b=a.length-sc.q.message.g4;b<a.length;++b)this.a9a(a[b],100,b<a.length-1);this.Fm.Hl(0,0,0.2,KEY_SPLINES.EASE_OUT)},S9a:function(){this.Iha.j("HIDDEN");this.Fm.Hl(0,0,0.2,KEY_SPLINES.EASE_OUT);for(var a=this.jKa.length;a--;)this.jKa[a].remove(y);
for(a=0;a<this.Dj.length-1;++a)this.Dj[a].j("UPWARD");(a=this.Dj[this.Dj.length-1])&&a.text.sO();this.M8()},m$a:function(a){var b=this.Fm.Izb().y,b=(b-a).Rb(0,this.u8a-this.Fm.a.size.y);this.Fm.Hl(0,b,0.2,KEY_SPLINES.EASE_OUT)},bbb:function(){var a=sc.q.message.s2a();this.n=Math.max(2,a.message.toString().length/20*1+1);this.a9a(a,100);sc.$Oa.play(a.Me,a.message);this.Iga=y;sc.q.message.g4=this.Dj.length},a9a:function(a,b,c){var d=new sc.CTa;d.ih(a.Me,a.message,c||y);c||d.rMa(this.MGb.bind(this));
sc.q.oe()||sc.IU.De(this.U7);a=d.a.size.y;this.Fm.m(d);d.show();d.l(0,0);this.Dj.push(d);for(var c=this.Dj.length,f=a=0;c--;){d=this.Dj[c];if(!f&&c<this.Dj.length-1&&a+d.a.size.y>b){f=c+1;a=Math.max(d.a.g.y,a-d.a.size.y-3)}d.kd(0,a,0.2,KEY_SPLINES.EASE_OUT);c<this.Dj.length-1&&d.j("UPWARD");f||(a=a+(d.a.size.y+3))}if(f){for(c=f;c--;)this.Dj[c].remove(h);this.Dj.splice(0,f)}this.M8();return h},cVb:function(){var a=this.Dj.length;return a==0?y:this.Dj[a-1].On()},a7:function(){this.n=this.Iga?-0.2:-1;
var a=this.Dj.shift();a.text.finish();a.remove();if(this.Dj.length==0){sc.IU.$e(this.U7);this.Iga=y}sc.q.message.g4=this.Dj.length},M8:function(){var a=this.Dj[this.Dj.length-1];if(!this.O6&&a&&a.On()&&this.U7.wc()){this.Oq.l(a.a.size.x+1,0);this.Oq.show()}else this.Oq.hide()},MGb:function(){this.M8()},x6:function(a){if(a==sc.cW.dya)(a=this.Dj[this.Dj.length-1])&&(a.On()?this.T_a(h):a.Nq());this.M8()}});sc.Fnb=ig.da.extend({f:function(){this.parent();this.F(264,180);this.a.align.y=ig.k.Cb;this.a.clip=
h}});sc.CTa=sc.rya.extend({text:q,face:q,HC:new ig.ka("media/sound/hud/dialog-beep-2.ogg",1,0.02),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},UPWARD:{state:{alpha:0.5},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0.5,Xa:1,Va:0,offsetX:0},time:0.2,p:KEY_SPLINES.EASE_OUT}},f:function(){this.parent(0,0,y);this.a.align.y=ig.k.Cb;this.text=new sc.ea("",{maxWidth:202,speed:ig.Rd.se.mj});this.text.H(ig.k.hb,ig.k.vb);this.text.l(60,0);this.m(this.text);this.face=new sc.Gnb;this.m(this.face)},
ih:function(a,b,c){this.text.ga(b);c?this.text.finish():this.text.x$a(this.HC);b=this.text.a.size.x;b=(b<101?101:202)+62;c=Math.max(42,this.text.a.size.y+4);this.F(b,c);this.face.M$a(a,c)},rMa:function(a){this.text.gg.dH=a},On:function(){return this.text.gg.On()},Nq:function(){this.text.finish()},show:function(a){this.a.Db.y=a?0:this.a.size.y;this.j("HIDDEN",h);this.j("DEFAULT")},remove:function(a){this.a.Db.y=a?0:this.a.size.y;this.j("HIDDEN",y,h)}});sc.Gnb=ig.da.extend({Me:q,n:0,R:{DEFAULT:{state:{Xa:-1},
time:0,p:KEY_SPLINES.EASE_OUT}},f:function(){this.parent();this.a.size.x=56;this.a.Db.x=28;this.j("DEFAULT",h)},M$a:function(a,b){this.Me=a;this.a.size.y=b;this.n=0},update:function(){this.n=this.n+ig.i.Sa},Da:function(a){this.Me&&sc.$ja.sDa(a,this.Me,this.n,0,0,this.a.size.x,this.a.size.y)}});sc.Inb=ig.da.extend({s:new ig.ia("media/gui/message.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0.5,Xa:0},time:0.2,p:KEY_SPLINES.EASE_OUT}},$pa:q,mna:q,f:function(){this.parent();
this.F(24,180);this.a.align.x=ig.k.ra;this.a.align.y=ig.k.Cb;var a=new sc.Qnb(this.a.size.y);this.m(a);a=new sc.Onb(70);a.H(ig.k.ra,ig.k.vb);this.m(a);a=new ig.ec(this.s,16,80,8,8);a.H(ig.k.Ia,ig.k.vb);a.l(0,-19);this.m(a);a=new ig.ec(this.s,16,88,8,8);a.H(ig.k.Ia,ig.k.vb);a.l(0,19);this.m(a);this.$pa=new sc.ea("\\i[mousewheel]");this.mna=ig.Yb.xm;this.$pa.H(ig.k.Ia,ig.k.vb);this.m(this.$pa)},update:function(){if(this.mna!=ig.input.qb){this.mna=ig.input.qb;this.$pa.ga(this.mna==ig.Yb.Wc?"\\i[gamepad-l1]\n\\i[gamepad-r1]":
"\\i[mousewheel]")}}})});ig.J=h;
ig.N("game.feature.combat.gui.enemy-display-gui").O("impact.feature.gui.gui").K(function(){sc.Sgb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},Fe:q,uk:q,Q:q,Gb:q,T7:y,GR:{x:0,y:0},bb:"idle",fta:q,ZQ:y,k_:0,VKa:0,f:function(a,b,c,d,f,i){this.parent();this.Gb=d;this.bb=c||"idle";this.ZQ=i||y;if(this.fta=f||q)this.k_=5+Math.random()*10;this.Fe=new sc.wV(a);this.j("HIDDEN",h);if(this.Fe.loaded&&b)this.T7=h;this.Fe.Yt(this);
this.Fe.loaded&&this.Gb&&this.Gb(this)},pi:function(){this.Fe&&this.Fe.Tc();this.Fe=q;this.uk&&this.uk.clear();this.uk=q},Eq:function(a,b){if(this.Fe)if(b==this.Fe){var c=sc.Ta.Tzb(this.Fe.path);this.GR.x=c?c.x:0;this.GR.y=c?c.y:0;this.F(this.Fe.size.x,this.Fe.size.y+this.Fe.size.z);this.Eb(this.a.size.x/2,this.a.size.y/2);this.Fe.mb.Yt(this)}else if(b==this.Fe.mb){this.iea();this.j("DEFAULT",this.T7)}},iea:function(){this.uk=new ig.x9;this.uk.BGa(this.a.size.x,this.a.size.y);ig.r.pushState(this.uk);
this.Q=ig.r.Pe(ig.Jc,0,this.Fe.size.z,0,{});this.ZQ&&sc.Ta.bvb(this.Fe)&&sc.Ta.G.pb.va("boostedMenu",this.Q,{align:"CENTER",group:"_boostedFX",duration:-1});this.Q.F(this.Fe.size.x,this.Fe.size.y,this.Fe.size.z);this.Q.mb=this.Fe.mb;this.Q.Bd();this.Q.Ma(this.bb);this.Gb&&this.Gb(this);ig.r.b_()},update:function(){if(this.uk){this.uk.XR();if(this.fta&&this.k_>0){this.k_=this.k_-ig.i.Sa;if(this.k_<=0)if(this.VKa){this.VKa=y;this.k_=5+Math.random()*10;this.Q.Ma(this.bb)}else{this.k_=2;this.VKa=h;this.Q.Ma(this.fta)}}}},
Da:function(a){this.uk&&a.WAa(this.uk,0,0)}})});ig.J=h;
ig.N("game.feature.menu.gui.enemies.enemy-pages").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.combat.gui.enemy-display-gui","game.feature.menu.gui.menu-misc","game.feature.gui.base.misc").K(function(){ig.Xf.Xca=y;var a=[1,1,1,1];sc.bhb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},location:q,Cqa:q,display:q,yA:q,EC:q,FC:q,GC:q,AH:q,Fca:q,xj:q,f:function(){this.parent();
this.F(269,216);this.location=new sc.$gb;this.location.l(2,0);this.m(this.location);this.Cqa=new sc.Ygb;this.m(this.Cqa);this.display=new sc.Rgb;this.display.l(0,14);this.m(this.display);var a=15;this.yA=this.oy("maxhp",0,0,a);a=a+14;this.EC=this.oy("atk",1,0,a);a=a+14;this.FC=this.oy("def",2,0,a);a=a+14;this.GC=this.oy("foc",3,0,a);a=a+23;this.AH=new sc.IQa;this.AH.l(0,a);this.m(this.AH);this.Fca=new sc.Wgb;this.Fca.l(0,this.display.a.size.y+3+14);this.m(this.Fca);this.xj=new sc.Tgb;this.m(this.xj);
this.setData();this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.enemy.titles.res",description:"sc.gui.menu.help.enemy.description.res"},offset:{x:-2,y:76},size:{x:121,y:63},index:{x:0,y:5}};this.we[1]={content:{title:"sc.gui.menu.help.enemy.titles.view",description:"sc.gui.menu.help.enemy.description.view"},offset:{x:121,y:13},size:{x:149,y:126},index:{x:1,y:1}};this.we[2]={content:{title:"sc.gui.menu.help.enemy.titles.rewards",description:"sc.gui.menu.help.enemy.description.rewards"},offset:{x:-2,
y:142},size:{x:272,y:73},index:{x:0,y:6}};this.j("HIDDEN",h)},setData:function(b,c,i,j){if(c){this.display.H7(b,h,c.anim,c.extra,j);var k=c.params,l=c.credit,m=c.level;if(j&&sc.Ta.dZa(b,c.boss)){m=ig.Xf.Xca?sc.O9:c.boostedLevel||sc.O9;k=sc.wja.XXa(k,c.level,m);l=sc.wja.WXa(l,c.level,m)}this.yA.za(k.hp,i);this.EC.za(k.attack,i);this.FC.za(k.defense,i);this.GC.za(k.focus,i);this.AH.sab(k.elemFactor||a,i);this.Fca.QLb(sc.q.T.sFa(c.exp||0,m,sc.IV.XV),l||0,i);this.xj.NKb(c.itemDrops,i,j);this.location.lMa(c.area,
i);this.Cqa.aLb(sc.pa.Qf("combat","kill"+b),i);this.yA.xLb(k.hp>9999999)}else{this.display.H7();this.yA.hide();this.EC.hide();this.FC.hide();this.GC.hide();this.AH.hide();this.Fca.hide();this.xj.hide();this.location.hide();this.Cqa.hide()}},oy:function(a,b,c,j){var k=new sc.xwa(ig.lang.get("sc.gui.menu.equip."+a),b);k.l(c,j);k.we={type:"INFO",content:{title:"sc.gui.menu.equip."+a,description:"sc.gui.menu.help.enemy.description."+a},offset:{x:-1,y:-1},index:{x:0,y:b+1}};this.m(k);return k}});sc.chb=
ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},RS:q,a0:q,aV:q,OX:q,content:q,f:function(){this.parent();this.F(269,216);this.RS=new sc.ea("",{maxWidth:259});this.RS.H(ig.k.Ia,ig.k.vb);this.RS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.RS.j("HIDDEN",h);this.m(this.RS);this.content=new ig.da;this.m(this.content);this.a0=new sc.ea(ig.lang.get("sc.gui.menu.enemy.species"),
{font:sc.Ea.he});this.a0.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.a0.l(2,0);this.m(this.a0);this.aV=new sc.ea(ig.lang.get("sc.gui.menu.enemy.trivia"),{font:sc.Ea.he});this.aV.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.aV.l(2,15);this.m(this.aV);this.OX=new ig.da;this.OX.F(265,186);this.OX.l(2,30);this.m(this.OX);this.setData();this.j("HIDDEN",h)},setData:function(a,
b){this.RS.j("HIDDEN",h);this.a0.j("HIDDEN",h);this.aV.j("HIDDEN",h);this.OX.rh();if(b){var c=b.boss?1:b.kills||sc.MRa,j=sc.pa.Qf("combat","kill"+a)||0;if(ig.Xf.Xca||j<=-1||j>=c){c=q;c=b.species?ig.Ra.ic(b.species,h):ig.lang.get("sc.gui.menu.enemy.unknown");this.a0.ga(ig.lang.get("sc.gui.menu.enemy.species")+c);this.a0.j("DEFAULT",h);if((c=b.descriptions)&&c.length>=1){var j=new ig.de(""),k=q,l=0,m=0,n={font:sc.Ea.he,maxWidth:265},o=new ig.mf("#C7C7C7",269,1);o.l(-2,l);this.OX.m(o);for(var l=l+1,
t=0;t<c.length;t++){k=c[t];j.lz(k.condition||"");if(ig.Xf.Xca||j.evaluate()){o=new sc.ea(ig.Ra.ic(k.text),n);o.l(0,l);this.OX.m(o);l=l+o.a.size.y;m++;o=sc.Ta.jda(a)+" Report #"+(t+1);ig.Ae.VU(o,new ig.Ra(k.text),"data/enemies/"+a.vm("",".json"),h)}}this.aV.ga(ig.lang.get("sc.gui.menu.enemy.trivia"))}else this.aV.ga(ig.lang.get("sc.gui.menu.enemy.trivia")+ig.lang.get("sc.gui.menu.enemy.noReports"));this.aV.j("DEFAULT",h)}else{k=ig.lang.get("sc.gui.menu.enemy.killMore");k=k.replace("[x]",c-j);k=k.replace("[y]",
ig.Ra.ic(b.name)+"");this.RS.ga(k);this.RS.j("DEFAULT",h)}}},cUb:function(a,b){return Math.floor(a/b*100)}});sc.$gb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:4},time:0.1,p:KEY_SPLINES.LINEAR}},location:q,wd:q,f:function(){this.parent();this.F(269,20);this.location=new sc.ea("Location: Bergen Trail",{font:sc.Ea.he});this.location.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:4},
time:0.2,p:KEY_SPLINES.LINEAR}};this.location.l(10,0);this.m(this.location);this.wd=new ig.ec(this.s,481,224,8,11);this.wd.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0,Va:0,Qb:0.2},time:0.2,p:KEY_SPLINES.LINEAR}};this.wd.Eb(4,6);this.m(this.wd);this.hide(h)},lMa:function(a,b){var c=a?sc.map.Kv(a):q;this.location.ga(ig.lang.get("sc.gui.menu.enemy.location")+(c?c:"???"));this.location.j("DEFAULT",b);this.wd.j("DEFAULT",b)},hide:function(a){this.location.j("HIDDEN",
a);this.wd.j("HIDDEN",a)}});sc.xwa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},oc:q,name:"Flowey",Y:0,f:function(a,b){this.parent();this.F(118,12);this.name=a||"Flowey";this.Y=b||0;var c=new sc.ea(a,{font:sc.Ea.Ib});c.l(13,3);this.m(c);this.oc=new sc.Tb(9999999,{transitionTime:0.15});this.oc.H(ig.k.ra,ig.k.$);this.oc.l(0,4);this.m(this.oc);this.j("HIDDEN",h)},za:function(a,b){this.a.hi=="HIDDEN"&&
this.oc.za(0,h);this.j("DEFAULT",h);this.oc.za(a||0,b)},xLb:function(a){this.oc.zx=a},hide:function(){this.j("HIDDEN",h)},Da:function(a){a.na(this.s,0,0,520,48,118,11);a.na(this.s,0,0,sc.Cw.I$+this.Y*12,sc.Cw.e2,11,11)}});var b={D:0,C:1,B:2,A:3,S:4};sc.Tgb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},fc:q,wga:[],f:function(){this.parent();this.H(ig.k.hb,ig.k.$);this.F(269,70);this.l(0,144);
var a=new sc.ea(ig.lang.get("sc.gui.menu.enemy.drops"),{font:sc.Ea.Ib});a.l(2,0);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.enemy.rank"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(1,0);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.enemy.chance"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(62,0);this.m(a);a=new ig.mf("#CCCCCC",269,1);a.l(0,7);this.m(a);this.fc=new ig.da;this.fc.F(269,60);this.fc.l(0,10);this.m(this.fc)},NKb:function(a,c,i){this.j("DEFAULT",h);this.fc.rh();if(a)for(var j=q,k=q,j=j=
j=q,l=0,m=0;m<4;m++)if(a[m]){if(!a[m].boosted||i){j=sc.yb.getItem(a[m].item);k="\\i["+j.icon+sc.yb.Er(j.rarity||0)+"]";k=sc.pa.Qf("items",a[m].item)?k+ig.Ra.ic(j.name):k+"???????????????";j=new sc.ea(k);j.l(0,l-3);this.fc.m(j);j=new sc.BSa(100,{transitionTime:0.15});this.wga[m]&&j.za(this.wga[m],h);j.za(Math.round(a[m].prob*100),c);j.H(ig.k.ra,ig.k.$);j.l(63,l+2);this.fc.m(j);this.wga[m]=Math.round(a[m].prob*100);j=new ig.ec(this.s,537+b[a[m].rank||"D"]*15,34,14,12);j.H(ig.k.ra,ig.k.$);j.l(1,l);this.fc.m(j);
l=l+15}}else this.wga[m]=0},hide:function(){for(var a=4;a--;)this.wga[a]=0;this.j("HIDDEN",h)}});sc.Ygb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},count:q,wd:q,Nm:q,f:function(){this.parent();this.H(ig.k.ra,ig.k.$);this.F(269,20);this.count=new sc.Tb(99999999,{size:sc.Ff.$c,transitionTime:0.15});this.count.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:4},
time:0.2,p:KEY_SPLINES.LINEAR}};this.count.H(ig.k.ra,ig.k.$);this.count.l(14,3);this.m(this.count);this.wd=new ig.ec(this.s,579,19,11,10);this.wd.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0,Va:0,Qb:-0.3},time:0.2,p:KEY_SPLINES.LINEAR}};this.wd.H(ig.k.ra,ig.k.$);this.wd.l(1,2);this.m(this.wd);this.Nm=new sc.ea(ig.lang.get("sc.gui.menu.enemy.special"),{font:sc.Ea.he});this.Nm.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:4},
time:0.2,p:KEY_SPLINES.LINEAR}};this.Nm.H(ig.k.ra,ig.k.$);this.Nm.j("HIDDEN",h);this.Nm.l(1,0);this.m(this.Nm);this.hide()},aLb:function(a,b){if(a<=-1){this.count.j("HIDDEN",h);this.wd.j("HIDDEN",h);this.Nm.j("DEFAULT")}else{if(this.count.a.lm)this.Nm.j("HIDDEN");else{this.count.za(0,h);this.Nm.j("HIDDEN",h)}this.count.za(a||0,b);this.count.j("DEFAULT",b);this.wd.j("DEFAULT",b)}},hide:function(){this.Nm.j("HIDDEN");this.count.j("HIDDEN");this.wd.j("HIDDEN")}});sc.Wgb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},exp:q,hg:q,f:function(){this.parent();this.H(ig.k.ra,ig.k.$);this.F(147,10);this.exp=new sc.Tb(9999999,{transitionTime:0.15});this.exp.l(15,1);this.m(this.exp);this.hg=new sc.Tb(9999999,{transitionTime:0.15});this.hg.l(89,1);this.m(this.hg);this.hide()},QLb:function(a,b,c){this.j("DEFAULT",h);this.exp.za(a,c);this.hg.za(b,c)},hide:function(){this.exp.za(0,h);this.hg.za(0,h);this.j("HIDDEN",
h)},Da:function(a){a.na(this.s,0,0,472,32,14,10);a.na(this.s,75,0,488,32,12,10)}});var c={"0":{x:-2,y:42,P0:0,Q0:46,Kva:49,Lva:29,width:49,bD:h},1:{x:77,y:-1,P0:66,Q0:7,Kva:48,Lva:7,width:47,right:h},2:{x:77,y:10,P0:77,Q0:18,Kva:60,Lva:18,width:36,right:h},3:{x:-2,y:31,P0:0,Q0:35,Kva:38,Lva:18,width:38,bD:h}};sc.IQa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},zH:[],Wg:[],images:[],f:function(){this.parent();
this.F(118,51);var a=new sc.ea(ig.lang.get("sc.gui.menu.enemy.resistance"),{font:sc.Ea.Ib});a.l(0,0);this.m(a);for(a=0;a<4;a++){this.Cwb(a);this.UC(a);this.GCa(a)}},sab:function(a,b){this.j("DEFAULT",h);if(a)for(var c=this.zH.length;c--;){var j=this.DY(a[c]);if(j){this.Wg[c].show(b);this.zH[c].za(j,b);j<0?this.zH[c].pe(sc.Od.Nl):this.zH[c].pe(sc.Od.$n);this.images[c].j("DEFAULT",b)}else{this.Wg[c].hide(b);this.zH[c].za(0,b);this.zH[c].j("HIDDEN",b);this.images[c].j("HIDDEN",b)}}else for(c=this.zH.length;c--;){this.zH[c].hide();
this.Wg[c].hide(h)}},hide:function(){for(var a=this.zH.length;a--;){this.zH[a].hide();this.Wg[a].TJ=h;this.Wg[a].hide(h);this.images[a].j("HIDDEN",h)}this.j("HIDDEN",h)},Cwb:function(a){var b=new sc.BSa(999,{signed:h,transitionTime:0.15});b.l(c[a].x,c[a].y);this.m(b);this.zH[a]=b},UC:function(a){var b=new sc.Ugb(a,c[a].width);b.l(c[a].P0,c[a].Q0);this.m(b);this.Wg[a]=b},GCa:function(a){var b=new ig.ec(this.s,520+a*21,120,21,21);b.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR}};b.l(c[a].Kva,c[a].Lva);this.m(b);this.images[a]=b},DY:function(a){return Math.round((a-1)*-100)},Da:function(a){a.na(this.s,0,0,520,63,83,51)}});sc.Ugb=ig.da.extend({Sh:q,fe:q,TJ:y,f:function(a,b){this.parent();this.F(b+5,5);this.Sh=new sc.Eka(5,c[a].right||y,c[a].bD||y,sc.ZP.wm);this.m(this.Sh);this.fe=new ig.mf("#C7C7C7",b,1);this.fe.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Xa:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.m(this.fe);if(c[a].right){this.Sh.l(0,
5);this.fe.l(5,0);this.fe.Eb(0,0)}else{this.Sh.l(b+5,0);this.fe.l(0,4);this.fe.Eb(b,0)}this.Sh.hide();this.fe.j("HIDDEN",h)},show:function(a){if(!this.TJ)if(a){this.Sh.show(0);this.fe.j("DEFAULT",h)}else{this.Sh.hide();this.Sh.show(0.1);this.fe.j("HIDDEN",h);this.fe.j("DEFAULT",y,y,q,0.1);this.TJ=h}},hide:function(a){if(this.TJ){this.Sh.hide(a?0:0.1,a?0:0.1);this.fe.j("HIDDEN",a);this.TJ=y}}});sc.BSa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},
HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},oc:q,f:function(a,b){this.parent();this.oc=new sc.Tb(a,b);this.m(this.oc);this.F(this.oc.a.size.x+9,this.oc.a.size.y)},za:function(a,b){a!=0&&this.j("DEFAULT",h);this.oc.za(a,b);this.F(this.oc.a.size.x+9,this.oc.a.size.y)},pe:function(a){this.oc.pe(a)},hide:function(){this.za(0,h);this.j("HIDDEN",h)},Da:function(a){a.na(this.s,this.a.size.x-8,0,this.oc.color*9,407,8,8)}});sc.Rgb=ig.Ue.extend({display:q,fc:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},
HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},gb:new ig.jc("media/gui/menu.png",{width:8,height:6,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:520,y:33}}}),f:function(){this.parent(147,111);this.H(ig.k.ra,ig.k.$);this.fc=new ig.da;this.fc.a.clip=h;this.fc.F(145,109);this.fc.l(1,1);this.m(this.fc)},H7:function(a,b,c,j,k){if(a){if(this.display){this.display.remove(h);this.display=q}if(a){this.display=new sc.Sgb(a,h,c,this.kvb.bind(this),j,k);this.fc.m(this.display);this.j("DEFAULT",h)}}else{this.display&&
(b?this.display.remove(h):this.display.j("HIDDEN",y,h));this.j("HIDDEN",h)}},kvb:function(a){a.Fe&&a.l(this.fc.a.size.x/2-a.a.size.x/2+a.GR.x,this.fc.a.size.y/2-a.a.size.y/2+a.GR.y)}})});ig.J=h;
ig.N("game.feature.menu.gui.social.social-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-status-default","game.feature.msg.gui.side-message-hud","game.feature.menu.gui.enemies.enemy-pages").K(function(){var a=[],b=[];sc.Ynb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:12,height:4,left:6,top:6,right:6,bottom:6,Vb:{"default":{x:512,y:440}}}),sT:q,Sb:q,nJ:q,name:q,yA:q,EC:q,
FC:q,GC:q,sb:q,content:q,f:function(){this.parent(281,129);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(this.a.size.x/2)},time:0.2,p:KEY_SPLINES.LINEAR}};this.Sb=new sc.ITa;this.Sb.l(3,3);this.m(this.Sb);this.sT=new sc.ea(ig.lang.get("sc.gui.menu.social.noMember"));this.sT.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.sT.H(ig.k.Ia,ig.k.vb);this.sT.l(0,3);this.m(this.sT);this.sT.j("HIDDEN",
h);this.content=new ig.da;this.content.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.content.l(3,39);this.content.F(275,98);this.m(this.content);var a=new ig.mf("#545454",275,1);a.l(0,0);this.content.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.social.class"),{font:sc.Ea.Ib});a.l(3,3);this.content.m(a);var b=a.a.size.x,a=new sc.ea(ig.lang.get("sc.gui.menu.social.name"),{font:sc.Ea.Ib});a.l(3,18);this.content.m(a);b=Math.max(a.a.size.x,
b)+6;this.nJ=new sc.ea("Ultra Lord");this.nJ.l(b,0);this.content.m(this.nJ);this.name=new sc.ea("Ultra Lord");this.name.l(b,15);this.content.m(this.name);b=3;a=32;this.yA=this.oy("maxhp",0,b,a);a=a+14;this.EC=this.oy("atk",1,b,a);a=a+14;this.FC=this.oy("def",2,b,a);this.GC=this.oy("foc",3,b,a+14);a=new sc.ea(ig.lang.get("sc.gui.menu.social.equipment"),{font:sc.Ea.Ib});a.l(139,3);this.content.m(a);a=new ig.mf("#545454",137,1);a.H(ig.k.ra,ig.k.$);a.l(0,11);this.content.m(a);this.sb=new ig.da;this.sb.H(ig.k.ra,
ig.k.$);this.sb.F(136,72);this.sb.l(1,13);this.content.m(this.sb);this.sb.we={content:{title:"sc.gui.menu.help.social.titles.equip",description:"sc.gui.menu.help.social.description.equip"},offset:{x:0,y:0},size:{x:136,y:72},index:{x:1,y:0}}},show:function(){this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},IB:function(a){if(a){var b=sc.sa.$k[a];this.Sb.show(a,b);this.nJ.ga(ig.lang.get("sc.gui.menu.social.classes."+b.nJ));this.name.ga(ig.Ra.ic(b.Ad.data.realname));this.yA.za(b.W.Td("hp"),h);this.EC.za(b.W.Td("attack"),
h);this.FC.za(b.W.Td("defense"),h);this.GC.za(b.W.Td("focus"),h);this.sb.rh();var a=b.sb,b=-3,f;for(f in a)b=this.vwb(a[f],b,f);this.content.j("DEFAULT",h);this.sT.j("HIDDEN",h)}else{this.Sb.hide(h);this.content.j("HIDDEN",h);this.sT.j("DEFAULT",h)}},vwb:function(a,b,f){var i=q,j=q,j=q;if(i=a<0?q:sc.yb.getItem(a)){j="\\i["+i.icon+sc.yb.Er(i.rarity||0)+"]";j=j+ig.Ra.ic(i.name)}else j="\\i["+this.mzb(f)+"]-----------------";a=sc.yb.mN(a);j=new sc.ea(j);j.l(0,b);j.aa=a;j.Ls=this.gb.s;j.Ou(function(a,
b){sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(j));this.sb.m(j);return b+15},mzb:function(a){switch(a){case "head":return"item-helm";case "leftArm":return"item-sword";case "rightArm":return"item-sword";case "torso":return"item-belt";case "feet":return"item-shoe"}},oy:function(a,b,f,i){var j=new sc.xwa(ig.lang.get("sc.gui.menu.equip."+a),b);j.l(f,i);j.we={content:{title:"sc.gui.menu.equip."+a,description:"sc.gui.menu.equip.descriptions."+a},offset:{x:-1,y:-1},index:{x:0,y:b}};this.content.m(j);return j}});
sc.aob=ig.da.extend({US:q,zk:[],f:function(){this.parent("blue");this.F(281,120);this.l(8,29)},QOa:function(){var c=3+this.zk[0].a.size.y;a.length=0;b.length=0;for(var d=1;d<this.zk.length;d++){var f=this.zk[d];if(sc.sa.DN(f.name)){b.push(f.name);f.kd(0,c,0.2);c=c+(f.a.size.y+3)}else{a.push(d);f.j("SCALE",y,h)}}for(d=a.length;d--;)this.zk.splice(a[d],1);c=35*this.zk.length+3*this.zk.length+9;f=sc.sa.He;for(d=0;d<f.length;d++)if(b.indexOf(f[d])==-1){var i=new sc.sya(y,sc.sa.$k[f[d]],f[d]);i.l(0,c);
i.show();c=c+(i.a.size.y+3);this.m(i);this.zk.push(i)}this.zk[0]&&this.zk[0].wea&&this.zk[0].Jh.za(sc.sa.He.length+1,h)},show:function(a){for(var b=this.zk.length;b--;)a&&b>=1?this.zk[b].hide(h):this.zk[b].remove();var f=this.zk.length=0,i=new sc.sya(h,sc.q.T);this.m(i);this.zk.push(i);f=f+(i.a.size.y+3);i.show(a);a=sc.sa.He;for(b=0;b<a.length;b++){i=new sc.sya(y,sc.sa.$k[a[b]],a[b]);i.l(0,f);i.show();f=f+(i.a.size.y+3);this.m(i);this.zk.push(i)}},hide:function(a){for(var b=this.zk.length;b--;)this.zk[b].hide(a)}});
sc.sya=sc.Bl.extend({s:new ig.ia("media/gui/basic.png"),YFa:new ig.jc("media/gui/menu.png",{width:2,height:0,left:1,top:9,right:5,bottom:0,Vb:{"default":{x:96,y:408}}}),info:q,name:q,wea:y,f:function(a,b,f){this.parent(sc.rg.ds);this.F(281,a?44:35);this.Eb(0,0);this.wea=a||y;this.name=f||q;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-(this.a.size.x/2)},time:0.2,p:KEY_SPLINES.LINEAR},SCALE:{state:{alpha:0,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}};if(a){f=new sc.ea(ig.lang.get("sc.gui.menu.social.party"),
{font:sc.Ea.Ib,speed:ig.Rd.se.zg});f.l(2,1);this.m(f);f={size:sc.Ff.jF,color:sc.Od.wm};this.fh=new sc.Tb(4,f);this.fh.H(ig.k.ra,ig.k.$);this.fh.l(6,2);this.fh.za(sc.mSa+1);this.m(this.fh);this.Jh=new sc.Tb(4,f);this.Jh.H(ig.k.ra,ig.k.$);this.Jh.l(20,2);this.Jh.za(sc.sa.He.length+1);this.m(this.Jh);f=new ig.ec(this.s,208,18,5,5);f.H(ig.k.ra,ig.k.$);f.l(14,2);this.m(f)}this.info=new sc.ITa;this.info.l(3,a?9:0);this.info.show("PARTY_MEMBER",b);this.m(this.info);this.j("HIDDEN",h)},show:function(a){this.j("DEFAULT",
a)},hide:function(a){this.j("HIDDEN",y,a)},Da:function(a){this.parent(a);this.wea&&this.YFa.nb(a,this.a.size.x,9,"default");a.nc("#FFF",1,this.wea?9:0,1,this.a.size.y-(this.wea?9:0))}});sc.ITa=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},face:q,aa:q,name:q,exp:q,Tg:q,Lf:q,f:function(){this.parent();this.F(275,35);var a=new sc.ea("LVL",{font:sc.Ea.Ib});a.l(53,18);this.m(a);this.face=new sc.Wnb;this.m(this.face);this.name=
new sc.ea;this.name.l(53,0);this.m(this.name);this.aa=new sc.Tb(99,{size:sc.Ff.Uh});this.aa.l(68,19);this.m(this.aa);this.exp=new sc.zI("EXP",sc.Ll.q1,q,93,0,-1);this.exp.l(92,19);this.m(this.exp);this.Tg=new sc.zI("HP",sc.Ll.yL,q,95,0,-1);this.Tg.H(ig.k.ra,ig.k.$);this.Tg.l(-2,3);this.m(this.Tg);this.Lf=new sc.zI("SP",sc.Ll.O1,q,95,3,-1);this.Lf.H(ig.k.ra,ig.k.$);this.Lf.l(-2,19);this.m(this.Lf)},show:function(a,b){this.face.IB(b.yna);this.name.ga(b.kG());this.aa.za(b.aa||1);this.exp.Qi(h,b);this.Tg.Qi(h,
b);this.Lf.Qi(h,b);this.j("DEFAULT",h)},hide:function(a){this.j("HIDDEN",a)}});sc.Wnb=ig.da.extend({Me:q,R:{DEFAULT:{state:{Xa:-1},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent();this.F(52,35);this.l(2,0);this.Eb(26,0);this.j("DEFAULT",h)},IB:L("Me"),Da:function(a){this.Me&&sc.$ja.sDa(a,this.Me,0,4,0,this.a.size.x-2,this.a.size.y)}});sc.Vnb=sc.IP.extend({GBb:new ig.ia("media/gui/menu.png"),head:q,status:q,aa:q,key:q,f:function(a,b){this.parent(this.IAb(a,b),187,73);this.fo=this.button.ac=
q;this.button.re.l(34,0);this.key=a;var f=sc.sa.DN(a)?0:sc.sa.Gn[a].bz?1:2;this.head=new sc.Xnb(b.sY());this.head.l(7,1);this.head.Aa=f==0;this.m(this.head);this.aa=new sc.Tb(99);this.aa.H(ig.k.ra,ig.k.$);this.aa.l(5,7);this.aa.za(b.aa||1);this.m(this.aa);this.status=new ig.ec(this.GBb,512,416+f*8,38,7);this.status.H(ig.k.ra,ig.k.$);this.status.l(30,7);this.m(this.status)},Lo:function(){this.parent();this.head.focus=h},ai:function(){this.parent();this.head.focus=y},AOb:function(){var a=sc.sa.DN(this.key)?
0:sc.sa.Gn[this.key].bz?1:2;this.status.offsetY=416+a*8;this.head.Aa=a==0},sHa:function(){this.yk=h;this.ff(h);this.button.yk=h;this.button.ff(h);this.head.yk=h},ova:function(){this.yk=y;this.ff(y);this.button.yk=y;this.button.ff(y);this.head.yk=y},IAb:function(a,b){return b.kG()||a}});sc.Xnb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),ZFa:new ig.ia("media/gui/severed-heads.png"),index:0,Aa:y,focus:y,yk:y,f:function(a){this.parent();this.F(24,17);this.index=a},Da:function(a){a.na(this.s,0,0,512,
457,24,17);a.na(this.ZFa,0,0,this.index*24,7,24,17);this.Aa&&a.na(this.s,0,0,512,this.focus||this.yk?493:475,24,17)}})});ig.J=h;
ig.N("game.feature.menu.gui.quest-hub.quest-hub-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.social.social-misc","game.feature.interact.button-group","game.feature.menu.gui.quests.quest-entries").K(function(){sc.Slb=sc.Bl.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:220},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,oc:q,f:function(){this.parent(sc.rg.$ia);this.H(ig.k.hb,ig.k.Cb);this.F(200,23);this.l(66,28);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,184,16,4,ig.nf.Eg.Yn);this.text=new sc.ea(ig.lang.get("sc.gui.menu.questHub.available"));this.text.H(ig.k.hb,ig.k.vb);this.text.l(5,0);this.m(this.text);this.oc=new sc.Tb(999,{size:sc.Ff.hv});this.oc.H(ig.k.ra,ig.k.vb);this.oc.l(5,1);this.m(this.oc);
this.we={content:{title:"sc.gui.menu.help.hub.titles.available",description:"sc.gui.menu.help.hub.description.available"},offset:{x:0,y:0},size:{x:"dyn",y:"dyn"},index:{x:0,y:0}};this.j("HIDDEN",h)},show:function(){var a=ig.Yh.get("questHubs")[sc.e.dU];a||e(Error("Quest HUB ID not found: "+sc.e.dU));var a=a.areas,c=sc.dc.zi,d=new ig.de,f=0,i;for(i in c){var j=c[i];if(j.CG)for(var k=0;k<a.length;k++)if(j.Lb==a[k]&&!sc.dc.vqa(i)&&!sc.dc.Lr(i))if(j.CG.fb){d.lz(j.CG.fb);d.evaluate()&&f++}else f++}this.oc.vha(f);
this.oc.za(f,h);this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},Da:function(a){this.parent(a);var c=this.text.a.size.x+this.text.a.g.x+1,d=this.a.size.x-this.text.a.size.x-this.oc.a.size.x-10,d=Math.floor(d/4)*4;a.Qk(this.constructor.oj,c,14,0,0,d,4)}});var a={total:0,Z7:0};sc.Ulb=sc.Bl.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-220},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,Or:q,f:function(){this.parent(sc.rg.Xva);
this.H(ig.k.ra,ig.k.Cb);this.F(200,23);this.l(66,28);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,184,16,4,ig.nf.Eg.Yn);this.text=new sc.ea(ig.lang.get("sc.gui.menu.questHub.completion"));this.text.H(ig.k.hb,ig.k.vb);this.text.l(5,0);this.m(this.text);this.Or=new sc.V1(q,{size:sc.Ff.hv,leadingZeros:1,scramble:y});this.Or.H(ig.k.ra,ig.k.vb);this.Or.l(5,1);this.m(this.Or);this.we={content:{title:"sc.gui.menu.help.hub.titles.rate",description:"sc.gui.menu.help.hub.description.rate"},
offset:{x:0,y:0},size:{x:"dyn",y:"dyn"},index:{x:1,y:0}};this.j("HIDDEN",h)},show:function(){var b=ig.Yh.get("questHubs")[sc.e.dU];b||e(Error("Quest HUB ID not found: "+sc.e.dU));for(var b=b.areas,c=0,d=b.length,f=0;d--;){sc.dc.xBb(b[d],a);if(a.total!=0){f++;c=c+a.Z7/a.total}}c=c/f;this.Or.za(c,h);c>=1&&this.Or.pe(sc.Od.bF);this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},Da:function(a){this.parent(a);var c=this.text.a.size.x+this.text.a.g.x+1,d=this.a.size.x-this.text.a.size.x-this.Or.a.size.x-
10,d=Math.floor(d/4)*4;a.Qk(this.constructor.oj,c,14,0,0,d,4)}});sc.Wlb=ig.vn.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/menu.png"),gb:new ig.jc("media/gui/buttons.png",{width:28,height:10,left:8,top:15,right:8,bottom:15,Vb:{"default":{x:0,y:114},focus:{x:45,y:114},hdefault:{x:170,y:50},hfocus:{x:213,y:50}}}),Ad:q,RKa:q,QKa:q,JN:q,aa:q,RQ:q,Lb:q,Qh:q,f:function(a,c){this.parent();this.F(433,50);var d=sc.dc.sG(a),
f=d.CG;this.Ad=new sc.Tlb;this.Ad.l(6,3);this.Ad.IB(f.uCb&&c==sc.NV.OPEN?"misc.blank":f.Ad);this.m(this.Ad);this.RKa=new sc.ea(d.name);this.RKa.l(40,1);this.m(this.RKa);this.QKa=new sc.ea(f.location,{font:sc.Ea.he,maxWidth:238});this.QKa.l(52,18);this.m(this.QKa);this.JN=new ig.mf("000");this.JN.H(ig.k.ra,ig.k.$);this.JN.F(37,13);this.JN.l(6,3);this.JN.a.nd=0.5;this.m(this.JN);f=new sc.ea("LvL",{font:sc.Ea.Ib});f.l(3,2);this.JN.m(f);this.aa=new sc.Tb(99,{leadingZeros:2});this.aa.H(ig.k.ra,ig.k.$);
this.aa.l(2,3);this.aa.za(d.aa);this.JN.m(this.aa);this.RQ=new ig.mf("000");this.RQ.H(ig.k.ra,ig.k.$);this.RQ.l(6+this.JN.a.size.x+1,3);this.RQ.a.nd=0.5;this.RQ.F(98,13);this.m(this.RQ);f=new ig.ec(this.s,480,224,9,11);f.l(2,1);this.RQ.m(f);this.Lb=new sc.ea(sc.map.Kv(d.Lb),{font:sc.Ea.he});this.Lb.H(ig.k.hb,ig.k.$);this.Lb.l(14,0);this.RQ.m(this.Lb);this.Qh=new sc.Ylb;this.Qh.H(ig.k.ra,ig.k.Cb);this.Qh.l(6,4);this.m(this.Qh);f=new sc.ea(ig.lang.get("sc.gui.menu.questHub.rewards"),{font:sc.Ea.Ib});
f.l(3,2);this.Qh.m(f);var i=d.Qh,d=10,f=14;i.exp&&(d=this.XAa(d,f,472,32,14,10,17));i.cp&&(d=this.XAa(d,f,593,19,10,10,13));i.money&&(d=this.XAa(d,f,488,32,12,10,15));if(i.items)for(var i=i.items||[],f=f-4,j=0;j<i.length;j++)d=this.$tb(d,f,i[j].id);sc.e.Gga[a]||(sc.e.Gga[a]=h)},XAa:function(a,c,d,f,i,j,k){d=new ig.ec(this.s,d,f,i,j);d.l(a,c);this.Qh.m(d);return a+k},$tb:function(a,c,d){d=new sc.ea(sc.yb.oAb(d));d.l(a,c);this.Qh.m(d);return a+16},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,
this.focus?"focus":"default");this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"hfocus":"hdefault",1);a.na(this.s,41,18,530,208,9,10)}});sc.Ylb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:5,height:5,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:560,y:465}}}),f:function(){this.parent(136,29)}});sc.Tlb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:2,height:2,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:544,y:482}}}),display:q,fc:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},
HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},f:function(){this.parent(31,44);this.fc=new ig.da;this.fc.F(31,44);this.fc.l(1,1);this.m(this.fc)},IB:function(a,c){if(a){if(this.display){this.display.remove(h);this.display=q}if(a){this.display=new sc.aka(a,h,q,this.tba.bind(this));this.fc.m(this.display);this.j("DEFAULT",h)}}else{if(this.display){c?this.display.remove(h):this.display.j("HIDDEN",y,h);this.display=q}this.j("HIDDEN",h)}},tba:function(a){a.cj&&a.l(this.fc.a.size.x/2-a.a.size.x/
2-1,this.fc.a.size.y/2-a.a.size.y/2)}})});ig.J=h;
ig.N("game.feature.menu.gui.quest-hub.quest-hub-list").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.menu.gui.quest-hub.quest-hub-misc").K(function(){sc.Vlb=sc.KV.extend({ac:q,Oba:-26,OHa:-6,MHa:6,NHa:25,f:function(){this.parent(h);this.F(436,258);this.H(ig.k.Ia,ig.k.$);this.Eb(436,258);this.DU(436,216);this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR},
HIDDEN_EASE:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.EASE}};this.zm("open",0,{type:sc.NV.OPEN});this.zm("active",1,{type:sc.NV.ACTIVE});this.zm("finished",2,{type:sc.NV.FINISHED})},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.Ml.ORDER:sc.Ml.ORDER,b="auto";
switch(a){case sc.Ml.ORDER:b="auto";break;case sc.Ml.NAME:b="name";break;case sc.Ml.LEVEL:b="questLevel"}return ig.lang.get("sc.gui.menu.sort."+b)},DT:function(){return{skipSounds:h}},qK:function(a){sc.e.NB(a)},aO:function(a,b,c){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.questHub.tabs."+a),"questHub-"+a,85);a.re.l(7,1);a.l(0,2);a.setData({type:c.type});this.m(a);return a},rK:function(a,b){if(!b){this.ac.play();this.Vr(this.jG(a));for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.NB(c);break}return y}},
IT:function(){sc.e.Cc("",h)},HT:function(){sc.e.Cc(q,h)},F7a:N(1),cH:function(a,b,c,d){var f=q,f=q,d=this.fwb(c,d);a.clear();b.clear();for(b=0;b<d.length;b++){f=d[b];f=new sc.Wlb(f,c);a.Sd(f)}},ET:function(a){a.data&&(a.data instanceof Object||sc.e.Cc(a.data))},FT:function(){sc.e.Cc(q,h)},fwb:function(a,b){var c=ig.Yh.get("questHubs")[sc.e.dU];c||e(Error("Quest HUB ID not found: "+sc.e.dU));var c=c.areas,d=sc.dc.zi,f=[],i=new ig.de,j;for(j in d){var k=d[j];if(k.CG)for(var l=0;l<c.length;l++)if(k.Lb==
c[l])if(a==sc.NV.OPEN){if(!sc.dc.vqa(j)&&!sc.dc.Lr(j))if(k.CG.fb){i.lz(k.CG.fb);i.evaluate()&&f.push(j)}else f.push(j)}else a==sc.NV.ACTIVE?sc.dc.vqa(j)&&f.push(j):a==sc.NV.FINISHED&&sc.dc.Lr(j)&&f.push(j)}b!=g&&this.kw(f,b);return f},kw:function(a,b){switch(b){case sc.Ml.ORDER:a.sort(function(a,b){var f=sc.dc.sG(a),i=sc.dc.sG(b);return f.Lb!=i.Lb?sc.map.t1a(f.Lb)-sc.map.t1a(i.Lb):f.Li-i.Li});break;case sc.Ml.NAME:a.sort(function(a,b){return sc.dc.sG(a).name.toString().localeCompare(sc.dc.sG(b).name.toString())});
break;case sc.Ml.LEVEL:a.sort(function(a,b){return sc.dc.sG(a).aa-sc.dc.sG(b).aa})}},Ab:function(a,b,c){a==sc.e&&b==sc.fa.yp&&this.sort(c.data.vE)}})});ig.J=h;
ig.N("game.feature.menu.gui.quest-hub.quest-hub-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.quest-hub.quest-hub-list").K(function(){sc.Xlb=sc.U1.extend({kb:q,Fn:q,dma:q,f:function(){this.parent(new sc.Vlb);this.list.a.g.x=0;this.list.Kd.a.g.y=this.list.Kd.a.g.y-5;this.list.Kd.a.size.y=this.list.Kd.a.size.y+5;this.Fn=new sc.Ulb;this.m(this.Fn);this.dma=new sc.Slb;this.m(this.dma);this.yc.Sd("auto",sc.Ml.ORDER,0);this.yc.Sd("name",
sc.Ml.NAME,1);this.yc.Sd("questLevel",sc.Ml.LEVEL,2);this.j("DEFAULT")},Yd:function(){this.parent();this.list&&this.rn(this.list.pm());this.Fn.show();this.dma.show()},Gd:function(){this.parent();this.Fn.hide();this.dma.hide();sc.e.gk(0,0,sc.Si.Uh)},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.questHub.title"),ig.lang.get("sc.gui.menu.help-texts.questHub.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==
sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.yc.Aa&&this.yc.xk();this.rn(this.list.pm())}}})});ig.J=h;
ig.N("game.feature.menu.gui.enemies.enemy-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box").K(function(){ig.Xf.Xca=y;sc.Zgb=sc.KV.extend({ac:q,aB:q,dG:q,Rg:q,f:function(){this.parent(h);this.F(264,262);this.H(ig.k.ra,ig.k.$);this.Eb(264,262);this.DU(264,243);this.aB=this.ac=sc.gd.submit;this.dG=sc.gd.Dv;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},
HIDDEN:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.EASE}};this.Rg=ig.Yh.get("enemies");var a=new sc.ea(ig.lang.get("sc.gui.status-hud.lvl"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(7,-8);this.Kd.m(a);this.zm("animals",0,{type:sc.wp.ANIMALS});this.zm("mecha",1,{type:sc.wp.MECHA});this.zm("avatars",2,{type:sc.wp.PLAYERS});this.zm("abstract",3,{type:sc.wp.ABSTRACT});this.zm("boss",4,{type:sc.wp.BOSS})},Oc:function(){sc.P.Wa(sc.e,
this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.Nx.ORDER:sc.Nx.ORDER,b="auto";switch(a){case sc.Nx.ORDER:b="auto";break;case sc.Nx.NAME:b="name";break;case sc.Nx.LEVEL:b="enemyLevel";break;case sc.Nx.AREA:b="area"}return ig.lang.get("sc.gui.menu.sort."+b)},DT:function(a,b,c){this.ac.play();sc.e.pcb(c==
1?1:-1);return{skipSounds:h}},qK:function(a){sc.e.NB(a);(ig.input.Id||this.Kj.tt())&&sc.e.Yg(q,h)},aO:function(a,b,c){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.enemy.tabs."+a),"enemy-"+a,105);a.re.l(7,1);a.l(0,2);a.setData({type:c.type});this.m(a);return a},rK:function(a,b){if(!b){this.ac.play();this.Vr(this.jG(a));for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.NB(c);break}sc.e.Yg(q,h);return y}},IT:function(){ig.input.Id&&sc.e.Yg(q,h)},HT:function(){sc.e.Yg(q,h)},cH:function(a,b,c,d){var f=q,
i=q,j=f=q,k=q,d=this.Szb(c,d);a.clear();b.clear();for(b=0;b<d.length;b++){f=d[b];j=this.Rg[f];if((ig.Xf.Xca||sc.pa.Qf("combat","kill"+f))&&j.track){var i=sc.map.Roa(sc.JE.BOOSTER,j.area),k=c==sc.wp.BOSS?"\\i[enemy-"+this.Qzb(j.category)+"-boss]":"\\i[enemy-"+this.Q4()+(j.boss?"-boss":"")+"]",l=i&&sc.Ta.dZa(f,j.boss)?j.boostedLevel||sc.O9:j.level,i="",i=i+(k+ig.Ra.ic(j.name)),f=new sc.Vgb(i,f,l||1);a.Sd(f)}}},ET:function(a){if(a.key){sc.e.Yg(a.key);sc.e.Cc(q,h)}else{sc.e.Yg(a.key);a.data&&(a.data instanceof
Object||sc.e.Cc(a.data))}},FT:function(){sc.e.Yg(q,h);sc.e.Cc(q,h)},Szb:function(a,b){var c=[],d=this.Rg,f;for(f in d){var i=d[f];a==sc.wp.BOSS?i.boss&&c.push(f):sc.wp[i.category||"ABSTRACT"]==a&&c.push(f)}b!=g&&this.fNa(c,b);return c},fNa:function(a,b){switch(b){case sc.Nx.ORDER:a.sort(function(a,b){a=this.Rg[a].order;b=this.Rg[b].order;return a-b}.bind(this));break;case sc.Nx.NAME:a.sort(function(a,b){var f=ig.Ra.ic(this.Rg[a].name),i=ig.Ra.ic(this.Rg[b].name);return f.localeCompare(i)}.bind(this));
break;case sc.Nx.LEVEL:a.sort(function(a,b){var f=this.Rg[a],i=this.Rg[b];return(f.level||1)==(i.level||1)?f.order-i.order:(f.level||1)-(i.level||1)}.bind(this));break;case sc.Nx.AREA:a.sort(function(a,b){var f=this.Rg[a],i=this.Rg[b];return f.area==i.area?f.order-i.order:sc.map.Kv(f.area).toString().localeCompare(sc.map.Kv(i.area).toString())}.bind(this))}},Qzb:function(a){switch(sc.wp[a]){case sc.wp.ANIMALS:return"animals";case sc.wp.MECHA:return"mecha";case sc.wp.PLAYERS:return"avatars";case sc.wp.ABSTRACT:return"abstract"}},
Ab:function(a,b,c){if(a==sc.e&&b==sc.fa.yp){sc.e.Yg(q,h);sc.e.Cc(q,h);this.sort(c.data.vE)}}})});ig.J=h;
ig.N("game.feature.menu.gui.enemies.enemy-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.enemies.enemy-pages").K(function(){sc.Xgb=ig.Ue.extend({s:new ig.ia("media/gui/basic.png"),gb:new ig.jc("media/gui/menu.png",{width:2,height:8,left:27,top:21,right:27,bottom:3,Vb:{"default":{x:520,y:0}}}),title:q,aa:q,En:q,display:q,Gk:q,Oj:q,lH:q,Zba:q,hfa:q,Dh:[],Fe:q,page:-1,key:"-1s",f:function(){this.parent(281,
265);this.H(ig.k.hb,ig.k.$);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-(this.a.size.x/2)},time:0.2,p:KEY_SPLINES.LINEAR}};this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.enemy.titles.type",description:"sc.gui.menu.help.enemy.description.type"},offset:{x:4,y:2},size:{x:20,y:19},index:{x:0,y:0}};this.we[1]={content:{title:"sc.gui.menu.help.enemy.titles.level",description:"sc.gui.menu.help.enemy.description.level"},offset:{x:257,y:2},size:{x:21,y:19},
index:{x:1,y:0}};this.title=new sc.ea("");this.title.H(ig.k.Ia,ig.k.$);this.title.l(0,4);this.m(this.title);this.En=new sc.ea("");this.En.l(7,3);this.m(this.En);this.aa=new sc.Tb(99,{leadingZeros:2});this.aa.H(ig.k.ra,ig.k.$);this.aa.l(5,11);this.m(this.aa);var a=new sc.bhb;a.l(6,24);this.m(a);this.Dh.push(a);a=new sc.chb;a.l(6,24);this.m(a);this.Dh.push(a);a=new ig.mf("#545454",277,22);a.H(ig.k.Ia,ig.k.Cb);a.l(0,2);this.m(a);a=new sc.ea("lvl",{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(6,3);this.m(a);
this.Gk=new sc.mc("\\i[page-right]",32,h,sc.Mc.$c);this.Gk.cc=this.$Gb.bind(this);this.Gk.re.l(1,0);this.Gk.dg=h;this.Gk.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:5},time:0.2,p:KEY_SPLINES.LINEAR}};this.Gk.H(ig.k.ra,ig.k.Cb);this.Gk.l(2,2);this.m(this.Gk);this.Oj=new sc.mc("\\i[page-left]",32,h,sc.Mc.$c);this.Oj.cc=this.CGb.bind(this);this.Oj.re.l(1,0);this.Oj.dg=h;this.Oj.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:5},
time:0.2,p:KEY_SPLINES.LINEAR}};this.Oj.H(ig.k.hb,ig.k.Cb);this.Oj.l(2,2);this.m(this.Oj);this.Gk.j("HIDDEN",h);this.Oj.j("HIDDEN",h);this.lH=new ig.da;this.lH.H(ig.k.Ia,ig.k.Cb);this.lH.l(0,7);this.lH.F(60,8);this.lH.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};a=new ig.ec(this.s,96,0,8,8);a.H(ig.k.Ia,ig.k.$);this.lH.m(a);this.Zba=new sc.Tb(99);this.Zba.H(ig.k.ra,ig.k.$);this.Zba.l(36,0);this.lH.m(this.Zba);this.hfa=new sc.Tb(q);this.hfa.za(this.Dh.length,
h);this.hfa.H(ig.k.hb,ig.k.$);this.hfa.l(36,0);this.lH.m(this.hfa);this.m(this.lH);this.H7()},show:function(){for(var a=this.Dh.length;a--;)this.page==a&&this.Fe?this.Dh[a].j("DEFAULT",h):this.Dh[a].j("HIDDEN",h);this.j("DEFAULT")},hide:function(){this.Dh[0].display.H7(q,h);this.page=-1;this.key="-1s";this.j("HIDDEN");sc.e.Z.Te(this.Gk);sc.e.Z.Te(this.Oj)},ZGb:function(){return sc.ba.Yga()},K7a:function(){return sc.ba.Lea()},$Gb:function(){this.ocb(1)},CGb:function(){this.ocb(-1)},gab:function(a){if(a!=
this.page){this.page>=0&&this.Dh[this.page].j("HIDDEN",h);this.page=a||0;this.Dh[this.page].j("HIDDEN",h);this.Dh[this.page].j("DEFAULT",h);if(this.Dh.length==0){this.Gk.j("HIDDEN");this.Oj.j("HIDDEN");sc.e.Z.Te(this.Gk);sc.e.Z.Te(this.Oj)}this.Zba.za(this.page+1);if(this.Dh.length==1){this.Gk.j("HIDDEN",h);this.Oj.j("HIDDEN",h);sc.e.Z.Te(this.Gk);sc.e.Z.Te(this.Oj)}else if(this.page==this.Dh.length-1){this.Gk.j("HIDDEN",h);sc.e.Z.Te(this.Gk);this.Oj.j("DEFAULT",h);sc.e.Z.Jd(this.Oj,this.K7a.bind(this),
h)}else{if(this.page==0){this.Oj.j("HIDDEN",h);sc.e.Z.Te(this.Oj)}else{this.Oj.j("DEFAULT",h);sc.e.Z.Jd(this.Oj,this.K7a.bind(this),h)}this.Gk.j("DEFAULT",h);sc.e.Z.Jd(this.Gk,this.ZGb.bind(this),h)}}},ocb:function(a){if(this.key&&this.Dh.length!=1){var b=this.page,b=b+a;b>=this.Dh.length&&(b=this.Dh.length-1);b<0&&(b=0);b!=this.page&&this.gab(b)}},lha:function(a){this.En.ga("\\i[enemy-"+a+"]")},H7:function(a){if(this.key!=a){var b=(this.Fe=(this.key=a)?ig.Yh.get("enemies")[a]:q)?sc.map.Roa(sc.JE.BOOSTER,
this.Fe.area):y,c=1;if(this.Fe){c=b?this.Fe.boostedLevel||sc.O9:this.Fe.level||1;this.title.ga(ig.Ra.ic(this.Fe.name));this.aa.za(c)}else{this.aa.za(0);this.title.ga(ig.lang.get("sc.gui.menu.enemy.noEnemy"))}for(c=this.Dh.length;c--;)this.Dh[c].setData(a,this.Fe,this.page==-1?y:this.page!=c,b);if(this.key){this.gab(this.page==-1?0:this.page);this.lH.j("DEFAULT",h)}else{this.page>=0&&this.Dh[this.page].j("HIDDEN",h);this.page=-1;this.lH.j("HIDDEN",h);this.Gk.j("HIDDEN",h);this.Oj.j("HIDDEN",h);sc.e.Z.Te(this.Gk);
sc.e.Z.Te(this.Oj)}}}});sc.Vgb=sc.IP.extend({key:q,aa:q,f:function(a,b,c){this.parent(a,236,25);this.key=b||q;this.fo=this.button.ac=q;if(c>=0){this.aa=new sc.Tb(99);this.aa.za(c,h);this.aa.H(ig.k.ra,ig.k.$);this.aa.l(5,7);this.m(this.aa)}}})});ig.J=h;
ig.N("game.feature.menu.gui.enemies.enemy-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.enemies.enemy-list","game.feature.menu.gui.enemies.enemy-misc").K(function(){sc.ahb=sc.U1.extend({f:function(){this.parent(new sc.Zgb,new sc.Xgb);this.yc.Sd("auto",sc.Nx.ORDER,0);this.yc.Sd("name",sc.Nx.NAME,1);this.yc.Sd("enemyLevel",sc.Nx.LEVEL,2);this.yc.Sd("area",sc.Nx.AREA,3);this.j("DEFAULT")},Yd:function(){sc.e.Yg(q,y);this.parent();this.rn(this.list.pm());
this.info.lha(this.list.Q4())},Gd:function(){this.parent();ig.w3()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.enemy.title"),ig.lang.get("sc.gui.menu.help-texts.enemy.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.yc.Aa&&this.yc.xk();this.info.lha(this.list.Q4());this.rn(this.list.pm())}else b!=sc.fa.xTa&&b==sc.fa.S1&&this.info.H7(sc.e.TH)}})});
ig.J=h;
ig.N("game.feature.menu.gui.lore.lore-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","game.feature.menu.gui.menu-misc").K(function(){sc.Ajb=ig.Ue.extend({s:new ig.ia("media/gui/basic.png"),gb:new ig.jc("media/gui/menu.png",{width:2,height:8,left:27,top:21,right:27,bottom:3,Vb:{"default":{x:456,y:244},focus:{x:576,y:432}}}),title:q,En:q,NQ:q,MQ:q,ci:q,content:q,key:q,Oe:q,Ha:q,ot:q,focus:y,l$a:{},f:function(){this.parent(281,265);this.H(ig.k.hb,ig.k.$);this.a.R={DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-(this.a.size.x/2)},time:0.2,p:KEY_SPLINES.LINEAR}};this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.lore.titles.type",description:"sc.gui.menu.help.lore.description.type"},offset:{x:4,y:3},size:{x:19,y:18},index:{x:0,y:0}};this.we[1]={content:{title:"sc.gui.menu.help.lore.titles.content",description:"sc.gui.menu.help.lore.description.content"},offset:{x:4,y:23},size:{x:273,y:241},index:{x:0,y:1}};this.Ha=new sc.wh;this.Ha.xJ=this.$l.bind(this);
this.title=new sc.ea("");this.title.H(ig.k.Ia,ig.k.$);this.title.l(0,4);this.m(this.title);this.NQ=new ig.ec(this.gb.s,465,338,13,10);this.NQ.l(10,23);this.NQ.Eb(13,7);this.NQ.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.2,Va:0.5,offsetY:5},time:0.2,p:KEY_SPLINES.LINEAR}};this.NQ.j("HIDDEN",h);this.m(this.NQ);this.MQ=new sc.ea("",{font:sc.Ea.he});this.MQ.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:10},time:0.2,p:KEY_SPLINES.LINEAR}};
this.MQ.j("HIDDEN",h);this.MQ.l(25,25);this.m(this.MQ);this.En=new sc.ea("");this.En.l(7,3);this.m(this.En);this.ci=new sc.TL(sc.Zn.vC);this.ci.O7=y;this.ci.F(261,221);this.ci.l(10,40);this.m(this.ci);this.content=new ig.da;this.ci.ih(this.content);this.Tta()},show:function(){this.focus=y;this.ii="default";this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},TKb:function(a){if(a){this.Tta(a.key);this.focus=h;this.ii="focus";this.ot=a;this.ot.iab(h);this.ot&&this.ot.ff(h);sc.e.Z.hh(this.Ha);sc.e.rl(this.ej.bind(this))}else this.fCa()},
fCa:function(){if(this.focus){this.focus=y;this.ot&&this.ot.iab(y);this.ot=q;this.ii="default";sc.e.Dk();sc.e.Z.sl(this.Ha);ig.input.Id&&this.Tta(q)}},$l:function(){sc.ba.Cq()&&this.Ha.pea()},ej:function(){this.fCa()},update:function(){if(!ig.La.zh())if(this.focus&&this.Ha.wc()){sc.ba.yZ()?this.ci.scrollY(-20,y,0.05):sc.ba.xZ()&&this.ci.scrollY(20,y,0.05);sc.ba.gu()?this.ci.scrollY(200*ig.i.ja,y,0.05):sc.ba.Zu()&&this.ci.scrollY(-200*ig.i.ja,y,0.05)}else sc.ba.EEb()?this.ci.scrollY(200*ig.i.ja,y,
0.05):sc.ba.GEb()&&this.ci.scrollY(-200*ig.i.ja,y,0.05)},lha:function(a){this.En.ga("\\i[lore-"+a+"]");a=="story"?this.En.l(6,3):this.En.l(7,3)},Tta:function(a){if(!this.focus){var b=this.key;this.Oe=(this.key=a)?sc.Oe.qda(a):q;this.NQ.j("HIDDEN",h);this.MQ.j("HIDDEN",h);b&&(this.l$a[b]=this.ci.qG());this.content.rh();this.content.F(261,0);this.ci.l(6,25);this.ci.F(269,238);if(this.Oe)if(sc.Oe.xea(a)){this.title.ga(ig.Ra.ic(this.Oe.title));if(this.Oe.alternative){this.NQ.j("DEFAULT");this.MQ.ga(ig.lang.get("sc.gui.menu.lore.aka")+
ig.Ra.ic(this.Oe.alternative));this.MQ.j("DEFAULT");this.ci.l(6,40);this.ci.F(269,223)}this.Kqb(a)}else this.title.ga(ig.lang.get("sc.gui.menu.lore.lockedEntry"));else this.title.ga(ig.lang.get("sc.gui.menu.lore.noLore"));this.ci.fw(h);this.ci.BO(this.l$a[a]||0,h)}},Kqb:function(a){var b=this.Oe.content,c=q,d=1,f=0,i;for(i in b){if(!sc.Oe.ZGa(a,i))break;(c=b[i])&&(d=this.mqb(c.content,c.image,c.hr,c.options,d,f,c.imageCond,c.altContent));f++}this.content.F(261,d)},mqb:function(a,b,c,d,f,i,j,k){if(!a)return f;
var l=this.content,m=q,n=q,n=d?sc.Wwa[d.align]:0,d=d?d.wrap:y;if(c){m=new ig.mf("#545454",266,1);m.H(ig.k.Ia,ig.k.$);m.l(0,f);l.m(m);f=f+2}m=new ig.de;if(k){m.lz(k.condition);m.evaluate()&&(a=k.content)}m.lz(j||"true");if(b&&m.evaluate()){m=new ig.ec(new ig.ia(b.src),b.offX,b.offY,b.width,b.height);m.H(n+4,ig.k.$);m.l(0,f);l.m(m);j=261-m.a.size.x-2;b=1;if(d)switch(n){case sc.Wwa.LEFT:b=m.a.size.x+4;j=j-2;break;case sc.Wwa.CENTER:j=261;d=y}else j=259;d||(f=f+(m.a.size.y+2));n=new sc.ea(ig.Ra.ic(a),
{font:sc.Ea.he,maxWidth:j});n.l(b,f);l.m(n);f=d?f+Math.max(m.a.size.y,n.a.size.y)+2:f+(n.a.size.y+2)}else{m=new sc.ea(ig.Ra.ic(a),{font:sc.Ea.he,maxWidth:261});m.l(1,f);l.m(m);f=f+(m.a.size.y+2)}if(ig.Ae){i="Lore: "+ig.Ra.ic(this.Oe.title)+", Paragraph: "+(i+1);ig.Ae.VU(i,new ig.Ra(a),"data/database.json")}return f}});sc.G9=sc.IP.extend({key:q,Fn:q,Ud:q,f:function(a,b,c,d,f){this.parent(a,229-(f?22:0),31,g,g,this.IDb(c));this.key=b||q;this.fo=q;a=b?Math.round(sc.Oe.xzb(b)*100):0;if(a>=0){this.Fn=
new sc.Tb(100,{size:sc.Ff.mj});this.Fn.za(a,h);this.Fn.H(ig.k.ra,ig.k.$);this.Fn.l(5,7);this.m(this.Fn)}if(d&&sc.e.B3a(sc.Fc.EL,b)){this.Ud=new sc.T9;this.Ud.l(33,3);this.Ud.Pf();this.m(this.Ud)}},iab:function(a){if(a){this.yk=this.Yc=h;this.button.ff(h);this.button.yk=h}else{this.yk=this.Yc=y;this.button.ff(y);this.button.yk=y}},kCa:function(){this.Ud&&this.Ud.ui(h,h)},IDb:function(a){return a==sc.BI.STORY||a==sc.BI.MEMORIES}})});ig.J=h;
ig.N("game.feature.menu.gui.lore.lore-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.lore.lore-misc").K(function(){var a=[];sc.Bjb=sc.KV.extend({s:new ig.ia("media/gui/menu.png"),ac:q,aB:q,dG:q,Fn:q,SD:[],f:function(){this.parent(h);this.F(264,262);this.H(ig.k.ra,ig.k.$);this.Eb(264,262);this.DU(264,243);this.aB=this.ac=sc.gd.submit;
this.dG=sc.gd.Dv;this.Fn=new sc.ea(ig.lang.get("sc.gui.menu.lore.completion"),{font:sc.Ea.Ib});this.Fn.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:4},time:0.1,p:KEY_SPLINES.EASE}};this.Fn.H(ig.k.ra,ig.k.$);this.Fn.l(4,-8);this.Kd.m(this.Fn);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.EASE}};this.zm("story",0,{type:sc.BI.STORY});
this.zm("people",1,{type:sc.BI.CHARACTERS});this.zm("cross-lore",2,{type:sc.BI.CROSS_LORE});this.zm("earth-lore",3,{type:sc.BI.EARTH_LORE})},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});this.eZa(this.tg)?this.Fn.j("DEFAULT",h):this.Fn.j("HIDDEN",h);for(var a in this.Uj)this.Uj[a].zra.ui(y);a=sc.e.px[sc.Fc.EL];for(var c=a.length;c--;){var d=sc.Oe.qda(a[c]);if(d)(d=this.Uj[this.keys[sc.BI[d.category]]])&&d.zra.Pf()}ig.La.Md(0.2);
this.j("DEFAULT")},hide:function(){this.parent();for(var a=this.SD.length;a--;){this.SD[a].kCa();sc.e.jCa(sc.Fc.EL,this.SD[a].key)}this.SD.length=0;this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.Sx.ORDER:sc.Sx.ORDER,c="auto";switch(a){case sc.Sx.ORDER:c="auto";break;case sc.Sx.NAME:c="name";break;case sc.Sx.UNLOCKED:c="unlocked"}return ig.lang.get("sc.gui.menu.sort."+c)},Lfa:function(a){sc.e.JLb(a)},DT:function(a,c,d){this.ac.play();sc.e.pcb(d==1?1:-1);return{skipSounds:h}},
qK:function(a){sc.e.NB(a);(ig.input.Id||this.Kj.tt())&&sc.e.Yg(q,h)},aO:function(a,c,d){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.lore.tabs."+a),"lore-"+a,115);a.U7a=function(a){a?this.zra.l(4,4):this.zra.l(2,2)};c=new sc.T9;c.ui(y);c.l(2,2);a.m(c);a.zra=c;a.re.l(7,1);a.l(0,2);a.setData({type:d.type});this.m(a);return a},rK:function(a,c){if(!c){this.ac.play();this.Vr(this.jG(a));for(var d=this.Vd.length;d--;)if(a==this.Vd[d]){sc.e.NB(d);break}sc.e.Yg(q,h);return y}},IT:function(){ig.input.Id&&sc.e.Yg(q,
h)},HT:function(){sc.e.Yg(q,h)},cH:function(b,c,d,f){var i=q,j=i=q,k=q,j=q,l=sc.Oe.y1a(d,f);b.clear();c.clear();for(var c="\\i[lore-"+this.Q4()+"]",m=a.length=0;m<l.length;m++){k=l[m];j=sc.Oe.qda(k);if(sc.Oe.xea(k)){i=c+ig.Ra.ic(j.title);if(j.parent){i=new sc.G9(i,k,d,h,h);j=new ig.ec(this.s,541,208,14,15);j.l(-16,1);i.m(j);f==sc.Sx.ORDER?b.Sd(i,q,22):a.push(k)}else{i=new sc.G9(i,k,d,h);b.Sd(i)}}else if(this.kMb(d))if(j.parent&&sc.Oe.xea(j.parent)){i=c+"??????????????????";i=new sc.G9(i,k,d,q,h);
j=new ig.ec(this.s,541,208,14,15);j.l(-16,1);i.m(j);i.setActive(y);b.Sd(i,q,22)}else{i=c+"??????????????????";i=new sc.G9(i,k,d);i.setActive(y);b.Sd(i)}}if(a.length>=1){m=a.length;for(f=b.Ar().length;m--;){j=sc.Oe.qda(a[m]);k=this.Dyb(j.parent,b.Ar());if(k>=0){i=c+ig.Ra.ic(j.title);i=new sc.G9(i,a[m],d,h,h);j=new ig.ec(this.s,541,208,14,15);j.l(-16,1);i.m(j);k==f-1?b.Sd(i,q,22):b.IGa(i,k+1,q,q,q,h);i.a.g.x=22}}}},Dyb:function(a,c){for(var d=c.length;d--;)if(c[d].X.key==a)return d;return-1},ET:function(a){if(a.key){sc.e.Yg(a.key);
a.Ud&&this.SD.push(a);sc.e.Cc(q)}else{sc.e.Yg(a.key);a.data&&(a.data instanceof Object||sc.e.Cc(a.data))}},FT:function(){sc.e.Yg(q,h);sc.e.Cc(q,h)},kMb:function(a){return a!=sc.BI.STORY},Ab:function(a,c,d){if(a==sc.e)if(c==sc.fa.yp){this.sort(d.data.vE);sc.e.Yg(q,h);sc.e.Cc(q,h)}else c==sc.fa.SL&&(this.eZa(this.tg)?this.Fn.j("DEFAULT"):this.Fn.j("HIDDEN"))},eZa:function(a){switch(a){case 0:return y;case 1:return h;case 2:return h;case 3:return h;case 4:return h;case 5:return h}}})});ig.J=h;
ig.N("game.feature.menu.gui.lore.lore-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.control.control","game.feature.menu.gui.lore.lore-list").K(function(){sc.Cjb=sc.uw.extend({Hb:q,$d:q,kb:q,list:q,info:q,yc:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.list=new sc.Bjb;this.list.l(8,29);this.m(this.list);this.list.j("HIDDEN",h);this.info=new sc.Ajb;this.info.l(8,
29);this.m(this.info);this.info.j("HIDDEN",h);this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.$d=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title"),g,h,sc.Mc.$c);this.$d.dg=h;this.$d.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.$d.a.size.y},
time:0.2,p:KEY_SPLINES.LINEAR}};this.$d.cc=this.gH.bind(this);this.yc=new sc.hW(this.PZ.bind(this));this.yc.Sd("auto",sc.Sx.ORDER,0);this.yc.Sd("name",sc.Sx.NAME,1);this.yc.Sd("unlocked",sc.Sx.UNLOCKED,2);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this);this.list.Oc()},Ic:function(){sc.P.Hc(sc.e,this);this.list.Ic()},Yd:function(){this.Oc();sc.e.Yg(q,y);sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);ig.La.Md(0.2);this.rn(this.list.pm());this.list.show();this.info.show();this.info.lha(this.list.Q4());
this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.$d);this.list.hide();this.info.hide();this.kb=q;this.yc.Aa&&this.yc.xk();ig.w3()},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},eH:function(){return sc.ba.ON()},gH:function(){if(this.yc.Aa)this.yc.xk();else{ig.X.vd(this.yc);this.yc.R7(this.$d)}},PZ:function(a){if(a.data){this.yc.xk();sc.e.kw(a)}},ck:function(){if(!this.kb){this.kb=
new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.lore.title"),ig.lang.get("sc.gui.menu.help-texts.lore.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.$d,this.eH.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},rn:function(a){var b="\\i[help3]"+ig.lang.get("sc.gui.menu.item.sort-title")+": ";this.$d.ga(b+
("\\c[3]"+a+"\\c[0]"));sc.e.$u()},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.info.fCa();this.yc.Aa&&this.yc.xk();this.info.lha(this.list.Q4());this.rn(this.list.pm())}else b==sc.fa.wTa?this.info.TKb(c):b==sc.fa.S1&&this.info.Tta(sc.e.TH)}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){var a=["#8bb5ff","#ba0000","#0036d0","#a121bc","#00994c","#c7c7c7"];sc.xob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetX:-195,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},left:q,right:q,text:q,f:function(){this.parent();this.H(ig.k.ra,ig.k.$);this.F(170,21);this.l(25,27);this.a.nd=0.5;this.text=new sc.ea("NONE");
this.text.H(ig.k.Ia,ig.k.vb);this.m(this.text);this.we={type:"INFO",content:{title:"sc.gui.menu.help.status.titles.page",description:"sc.gui.menu.help.status.description.page"},offset:{x:38,y:0},size:{x:94,y:21,oi:6}};this.left=new sc.mc("\\i[arrow-left]",34,h,sc.Mc.$c);this.left.ac=q;this.left.dg=h;this.left.l(0,0);this.left.cc=function(){this.$db(-1)}.bind(this);this.m(this.left);this.right=new sc.mc("\\i[arrow-right]",34,h,sc.Mc.$c);this.right.H(ig.k.ra,ig.k.$);this.right.ac=q;this.right.dg=h;
this.right.cc=function(){this.$db(1)}.bind(this);this.m(this.right);this.j("HIDDEN",h)},Da:function(a){a.nc("#000",8,0,this.a.size.x-16,this.a.size.y)},show:function(){this.Cdb();sc.e.Z.Jd(this.left,this.QZ.bind(this));sc.e.Z.Jd(this.right,this.SZ.bind(this));this.j("DEFAULT")},hide:function(){sc.e.Z.Te(this.left);sc.e.Z.Te(this.right);this.j("HIDDEN")},Cdb:function(){var a=ig.lang.get("sc.gui.menu.status.pages");this.text.ga(a[sc.e.Wu])},$db:function(a){var c=sc.e.Wu,d=c;if(a>0){c++;c>=sc.JRa&&(c=
0)}else{c--;c<0&&(c=sc.JRa-1)}if(d!=c){sc.gd.submit.play();sc.e.GLb(c);this.Cdb()}},QZ:function(){return ig.La.zh()?y:sc.ba.aw()},SZ:function(){return ig.La.zh()?y:sc.ba.bw()}});sc.sob=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetX:-195,alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},left:q,right:q,Y:q,f:function(){this.parent();this.F(108,21);this.l(25,27);this.a.nd=0.5;this.Y=new ig.ec(this.s,104,32,24,24);this.Y.l(0,1);
this.Y.H(ig.k.Ia,ig.k.vb);this.m(this.Y);this.Y.we={content:{title:"sc.gui.menu.help.status.titles.element",description:"sc.gui.menu.help.status.description.element"},offset:{x:0,y:1},size:{x:23,y:21},index:{x:0}};this.left=new sc.mc("\\i[page-left]",32,h,sc.Mc.$c);this.left.ac=q;this.left.re.l(1,0);this.left.dg=h;this.left.l(0,0);this.left.cc=function(){this.vva(-1)}.bind(this);this.m(this.left);this.right=new sc.mc("\\i[page-right]",32,h,sc.Mc.$c);this.right.H(ig.k.ra,ig.k.$);this.right.re.l(1,
0);this.right.ac=q;this.right.dg=h;this.right.cc=function(){this.vva(1)}.bind(this);this.m(this.right);this.j("HIDDEN",h)},Da:function(a){a.nc("#000",8,0,this.a.size.x-16,this.a.size.y)},show:function(){this.Adb();sc.e.Z.Jd(this.left,this.QZ.bind(this));sc.e.Z.Jd(this.right,this.SZ.bind(this));this.j("DEFAULT")},hide:function(){sc.e.Z.Te(this.left);sc.e.Z.Te(this.right);this.j("HIDDEN")},Adb:function(){this.Y.offsetY=32+24*sc.e.Vu},vva:function(a){var c=sc.e.Vu,d=sc.e.Vu,f=sc.q.T;do{d=d+a;a>0?d>4&&
(d=0):d<0&&(d=4)}while(!f.xG(d));if(c!=d){sc.gd.submit.play();sc.e.ELb(d);this.Adb()}},QZ:function(){return sc.ba.Lea()},SZ:function(){return sc.ba.Yga()}});sc.QTa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),name:"nope.",fK:0,TY:0,sn:y,vN:Vec2.vc(0,0),vMb:y,Sb:q,sb:q,qe:q,vy:q,Ex:q,description:q,qN:[],aza:y,uza:y,wAa:y,Mza:y,DQ:y,NWa:y,f:function(a,c,d,f,i,j,k,l,m){this.parent();this.F(Math.max(d||169,169),24);this.name=a||"nope.";this.fK=f||0;this.TY=i||0;this.sn=j||y;this.DQ=k||y;this.NWa=l||
y;this.vN.x=this.TY%sc.Cw.Yja;this.vN.y=Math.floor(this.TY/sc.Cw.Yja);this.gf=new sc.ea(a,{font:sc.Ea.Ib});this.gf.l(13,3);this.m(this.gf);a=this.sn?999:9999;m&&(a=999);this.Sb=new sc.Tb(a,{signed:this.sn,transitionTime:0.2});this.Sb.l(83-(this.sn?8:0),3);this.Sb.za(0,h);this.qN.push(this.Sb);this.TW(this.Sb);this.m(this.Sb);if(m)this.Sb.a.g.x=this.Sb.a.g.x+8;this.sb=new sc.Tb(a,{signed:this.sn,transitionTime:0.2});this.sb.l(127-(this.sn?8:0),3);this.sb.za(0,h);this.qN.push(this.sb);this.TW(this.sb);
this.m(this.sb);if(m)this.sb.a.g.x=this.sb.a.g.x+8;this.vy=new sc.Tb(a,{signed:this.sn,transitionTime:0.2,color:sc.Od.wm});this.vy.KK=h;this.vy.QMa=h;this.vy.l(127-(this.sn?8:0),13);this.TW(this.vy);this.qN.push(this.vy);this.vy.j("HIDDEN",h);this.m(this.vy);if(m)this.vy.a.g.x=this.vy.a.g.x+8;this.qe=new sc.Tb(a,{signed:this.sn,transitionTime:0.2});this.qe.l(171-(this.sn?8:0),3);this.qe.za(0,h);this.qN.push(this.qe);this.TW(this.qe);this.m(this.qe);if(m)this.qe.a.g.x=this.qe.a.g.x+8;k&&this.qe.j("HIDDEN",
h);this.Ex=new sc.Tb(a,{signed:this.sn,transitionTime:0.2,color:sc.Od.wm});this.Ex.KK=h;this.Ex.QMa=h;this.Ex.l(171-(this.sn?8:0),13);this.Ex.za(0,h);this.TW(this.Ex);this.qN.push(this.Ex);this.Ex.j("HIDDEN",h);this.m(this.Ex);if(m)this.Ex.a.g.x=this.Ex.a.g.x+8;m=new ig.ec(this.s,6,321,4,6);m.l(119,4);this.qN.push(m);this.TW(m);this.m(m);m=new ig.ec(this.s,6,321,4,6);m.l(163,4);this.qN.push(m);this.TW(m);this.m(m);k&&m.j("HIDDEN",h);this.description=new sc.ea(c,{font:sc.Ea.he,maxWidth:294+(this.DQ?
44:0),linePadding:-3});this.description.l(214-(this.DQ?44:0),0);this.m(this.description)},Qi:function(a,c,d,f,i,j,k){this.Sb.za(a,f);this.sb.za(c,f);this.qe.za(d,f);this.Sb.color=sc.Od.$n;this.sb.color=sc.Od.$n;this.qe.color=sc.Od.$n;this.aza=this.uza=this.wAa=y;if(k){if(a<0){this.Sb.color=sc.Od.Nl;this.aza=h}if(c<0){this.sb.color=sc.Od.Nl;this.uza=h}if(d<0){this.qe.color=sc.Od.Nl;this.wAa=h}}if(sc.e.h0&&!this.NWa){this.vy.j("DEFAULT",h);this.DQ||this.Ex.j("DEFAULT",h);this.vy.za(i||0);this.Ex.za(j||
0)}else{this.vy.j("HIDDEN",h);this.DQ||this.Ex.j("HIDDEN",h);this.vy.za(0,h);this.Ex.za(0,h)}},CCb:function(a){for(var c=this.qN.length;c--;)this.qN[c].j("HIDDEN",a);this.Mza=h},Da:function(b){this.parent(b);var c=0,d=this.fK*12,c=this.a.size.x;if(this.Mza){b.nc(a[this.fK],0,10,152,1);b.na(this.s,152,0,71,389,13,11);b.nc(a[this.fK],165,0,c-244,1)}else{b.na(this.s,0,0,0,329+d,90,11);b.nc(a[this.fK],90,0,c-90-79,1)}b.na(this.s,c-79,0,90,329+d,79,1);this.vMb||b.nc(a[this.fK],209-(this.DQ?44:0),0,1,this.a.size.y);
if(this.sn&&!this.Mza){b.na(this.s,107,3,this.aza?9:0,407,8,8);b.na(this.s,151,3,this.uza?9:0,407,8,8);this.DQ||b.na(this.s,195,3,this.wAa?9:0,407,8,8);if(sc.e.h0){b.na(this.s,151,13,0,416,8,8);this.DQ||b.na(this.s,195,13,0,416,8,8)}}c=this.vN.x*12;d=this.vN.y*12;b.na(this.s,0,0,sc.Cw.I$+c,sc.Cw.e2+d,11,11)},TW:function(a){a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}}}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-view-main").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){function a(a,c){return Math.round(-(c[a]-1)*100)/100}sc.Eob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},W:q,sb:q,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.W=new sc.Fob;this.m(this.W);this.sb=new sc.uya;this.m(this.sb);this.hide(h)},show:function(){this.W.show();
this.sb.show()},hide:function(a){this.W.hide(a);this.sb.hide(a)},Iia:function(){this.W.Qi()}});sc.uya=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-190},time:0.2,p:KEY_SPLINES.LINEAR}},ABa:{},f:function(){this.parent(sc.rg.jW);this.H(ig.k.ra,ig.k.$);this.F(165,135);this.l(25,59);var a=5,a=a+(this.Vba("head",0,a)+3),a=a+(this.Vba("rightarm",0,a)+3),a=a+(this.Vba("leftarm",0,a)+3),a=a+(this.Vba("torso",0,a)+3);this.Vba("feet",0,a);this.j("HIDDEN",
h)},show:function(){this.Qi();this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},Qi:function(){for(var a in this.ABa)this.ABa[a].setItem(this.Xzb(a))},Vba:function(a,c,d){var f=new sc.uya.Tz(a);f.l(c,d);this.m(f);this.ABa[a]=f;return f.a.size.y},Xzb:function(a){var c=sc.q.T;switch(a){case "head":return c.sb.head;case "rightarm":return c.sb.Fh;case "leftarm":return c.sb.Bh;case "torso":return c.sb.uh;case "feet":return c.sb.ph}}});sc.uya.Tz=ig.da.extend({s:new ig.ia("media/gui/menu.png"),ob:q,ZJ:q,
hJ:q,f:function(a){this.parent();this.F(165,23);this.hJ=a||"head";this.ob=new sc.ea(ig.lang.get("sc.gui.menu.equip."+a),{font:sc.Ea.Ib});this.ob.l(4,0);this.m(this.ob);this.ZJ=new sc.ea("\\i[item-default]Generic Equipment");this.ZJ.l(13,7);this.m(this.ZJ)},Da:function(a){a.na(this.s,0,7,0,403,165,1)},setItem:function(a){if(a<0){this.ZJ.ga("--------------------");this.ZJ.Ou(q)}else{var c=sc.yb.mN(a);this.ZJ.ga(sc.yb.hFa(a));this.ZJ.aa=c;this.ZJ.Ls=this.s;this.ZJ.Ou(function(a,b){sc.KP.AJ(this.aa,a,
b,this.Ls)}.bind(this.ZJ))}}});sc.Fob=sc.Bl.extend({ira:new ig.ia("media/gui/menu.png"),FNa:new ig.ia("media/gui/status-gui.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-151},time:0.2,p:KEY_SPLINES.LINEAR}},aa:q,Lh:q,yo:q,ku:q,Ub:{Tg:q,gr:q,rr:q,xr:q,bB:q,IA:q,OB:q,hC:q},f:function(){this.parent(sc.rg.ds);this.F(126,215);this.l(25,59);this.aa=new sc.Tb(99,{size:sc.Ff.Uh});this.aa.H(ig.k.ra,ig.k.$);this.aa.l(3,2);this.m(this.aa);this.Lh=new sc.zI("HP",sc.Ll.yL);
this.Lh.l(0,39);this.m(this.Lh);this.Lh.Qi(h);this.Lh.we={size:{x:this.Lh.a.size.x+2,y:this.Lh.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.hp",description:"sc.gui.menu.help.item.description.hp"},index:{x:0}};this.yo=new sc.zI("SP",sc.Ll.O1);this.yo.l(0,57);this.m(this.yo);this.yo.Qi(h);this.yo.we={size:{x:this.yo.a.size.x+2,y:this.yo.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.sp",description:"sc.gui.menu.help.item.description.sp"},index:{x:0}};
this.ku=new sc.zI("EXP",sc.Ll.q1);this.ku.l(0,77);this.m(this.ku);this.ku.Qi(h);this.ku.we={size:{x:this.ku.a.size.x+2,y:this.ku.a.size.y+2},offset:{x:-1,y:-1},content:{title:"sc.gui.menu.help.item.titles.exp",description:"sc.gui.menu.help.item.description.exp"},index:{x:0}};var a=97;this.Ub.Tg=this.pR(0,a,"maxhp",0,0,y,9999);a=a+14;this.Ub.gr=this.pR(0,a,"atk",0,1,y,999);a=a+14;this.Ub.rr=this.pR(0,a,"def",0,2,y,999);a=a+14;this.Ub.xr=this.pR(0,a,"foc",0,3,y,999);a=a+18;this.Ub.bB=this.pR(0,a,"res",
1,4,h,999);a=a+14;this.Ub.IA=this.pR(0,a,"res",2,5,h,999);a=a+14;this.Ub.OB=this.pR(0,a,"res",3,6,h,999);this.Ub.hC=this.pR(0,a+14,"res",4,7,h,999);this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.na(this.ira,0,0,280,472,126,35);a.na(this.FNa,64,5,104,32+sc.q.T.sg*24,24,24)},show:function(){this.Qi(h);this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)},pR:function(a,c,d,f,i,j,k){i=new sc.u$(ig.lang.get("sc.gui.menu.equip."+d),f,i,j,k,h,126);i.Jo.Afa=0.2;if(!j){i.Jo.KK=y;i.bcb=h}i.l(a,c);if(d==
"res"){f==1&&(d="heat");f==2&&(d="cold");f==3&&(d="shock");f==4&&(d="wave")}i.we={type:"INFO",content:{title:"sc.gui.menu.equip."+d,description:"sc.gui.menu.equip.descriptions."+d},offset:{x:-1,y:-1},index:{x:0}};this.m(i);return i},Qi:function(b){this.aa.za(sc.q.T.aa);this.Lh.Qi(b);this.ku.Qi(b);this.yo.Qi(b);var c=sc.q.T,d=c.$i[sc.e.Vu];this.Lh.Qi(b,c,d.fS("hp")-(c.H1a().fS("hp")-c.W.Sc),d.fS("hp"));this.Ub.Tg.sh(d.fS("hp")||0,b);this.Ub.gr.sh(d.fS("attack")||0,b);this.Ub.rr.sh(d.fS("defense")||
0,b);this.Ub.xr.sh(d.fS("focus")||0,b);c=d.fS("elemFactor");this.Ub.bB.sh(a(0,c),b,h);this.Ub.IA.sh(a(1,c),b,h);this.Ub.OB.sh(a(2,c),b,h);this.Ub.hC.sh(a(3,c),b,h)}})});ig.J=h;
ig.N("game.feature.menu.gui.stats.stats-gui-builds").K(function(){sc.Wx={Uz:0,dwa:1,VE:2,d$:3,FQa:4,NRa:5,Uja:6};sc.RL=[];sc.RL[sc.Wx.Uz]={progressComplete:{We:{min:1},type:"Percent",tj:function(){var a;a=ig.ma.get("plot.line")||0;a=(a>=32E3?1:a/32E3)+sc.Ta.QJ(h);a=a+sc.yb.RJ(h);a=a+sc.dc.V4(h);a=a+sc.Oe.BY(h);a=a+sc.map.Ada(h);a=a+sc.map.T4(h);a=a+sc.map.xpa(h);a=a+sc.e.U4(h);a=a+sc.Ta.zda(h);a=a+sc.Ke.AFa(h);a=a+sc.Fb.lS(h);return a/12}},progressEnemies:{We:{min:1},ql:"progress",type:"Percent",
tj:function(){var a=sc.Ta.QJ(h),a=a+sc.Ta.zda(h);return a/2}},progressCollection:{We:{min:1},type:"Percent",tj:function(){var a=sc.yb.RJ(h),a=a+sc.Fb.lS(h);return a/2}},progressExploration:{We:{min:1},type:"Percent",tj:function(){var a=sc.Oe.BY(h),a=a+sc.map.Ada(h),a=a+sc.map.xpa(h),a=a+sc.map.T4(h),a=a+sc.e.U4(h);return a/5}},progressQuests:{We:{min:1},type:"Percent",tj:function(){return sc.dc.V4(h)}},progressTrophies:{We:{min:1},type:"Percent",tj:function(){return sc.Ke.AFa(h)}},sepProg:{type:"Separator",
group:"overview",tr:"progress"},playtime:{type:"Time",map:"player",update:h},level:{type:"KeyValue",map:"player"},exp:{type:"KeyValue",map:"player"},expEnemies:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"exp",ql:"exp"},expQuest:{type:"KeyValuePercent",map:"quests",Qc:"exp",Yk:"player",Zk:"exp"},expOther:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"exp"},money:{type:"KeyValue",map:"player",tr:"exp"},saves:{type:"KeyValue",map:"player"},jumps:{type:"KeyValue",map:"player"},steps:{type:"KeyValue",
map:"player"},meters:{type:"KeyValue",value:function(){var a=(sc.pa.Qf("player","steps")||0)*1.632;return a<1E3?Math.round(a):Math.floor(a/1E3)},J8a:function(){var a=(sc.pa.Qf("player","steps")||0)*1.632;if(a<1E3)a="m";else var a=Math.floor(a)%1E3/10,b="0000"+Math.floor(a),a="."+(b.length>=6?Math.floor(a):b.substr(b.length-2))+"km";return a}},respawns:{type:"KeyValue",map:"player"},respWater:{type:"KeyValuePercent",map:"player",Qc:"waterDeath",Yk:"player",Zk:"respawns",ql:"deaths"},respHole:{type:"KeyValuePercent",
map:"player",Qc:"holeDeath",Yk:"player",Zk:"respawns"},respSand:{type:"KeyValuePercent",map:"player",Qc:"sandDeath",Yk:"player",Zk:"respawns"},respCoal:{type:"KeyValuePercent",map:"player",Qc:"coalDeath",Yk:"player",Zk:"respawns"},respHighway:{type:"KeyValuePercent",map:"player",Qc:"highwayDeath",Yk:"player",Zk:"respawns"},teleports:{type:"KeyValue",map:"player",tr:"deaths"}};sc.RL[sc.Wx.dwa]={enemies:{type:"Percent",We:{min:1},tj:function(){return sc.Ta.QJ(h)}},foundAnimals:{type:"Percent",We:{min:1},
tj:function(){return sc.Ta.QJ(h,"ANIMALS")},ql:"enemies"},foundMechas:{type:"Percent",We:{min:1},tj:function(){return sc.Ta.QJ(h,"MECHA")}},foundPlayers:{type:"Percent",We:{min:1},tj:function(){return sc.Ta.QJ(h,"PLAYERS")}},foundAbstract:{type:"Percent",We:{min:1},tj:function(){return sc.Ta.QJ(h,"ABSTRACT")}},enemyReports:{type:"Percent",We:{min:1},tr:"enemies",tj:function(){return sc.Ta.zda(h)}},sepFoundEnd:{type:"Separator",group:"overview"},timeCombat:{type:"Time",map:"combat",Qc:"time",max:99,
GD:2},kills:{type:"KeyValue",map:"combat",Qc:"totalKilled"},enviroKills:{type:"KeyValue",map:"combat",ql:"kills"},boostedKills:{type:"KeyValue",map:"combat",N3a:h},oneHitKills:{type:"KeyValue",map:"combat",N3a:h},damageGiven:{type:"KeyValue",map:"combat",tr:"kills"},maxDamage:{type:"KeyValue",map:"combat"},hitsTaken:{type:"KeyValue",map:"combat",Qc:"damageHits"},damageTaken:{type:"KeyValue",map:"combat"},healed:{type:"KeyValue",map:"combat"},critHits:{type:"KeyValue",map:"combat"},critHitsClose:{type:"KeyValuePercent",
map:"combat",Yk:"combat",Zk:"critHits",ql:"crits"},critHitsThrow:{type:"KeyValuePercent",map:"combat",Yk:"combat",Zk:"critHits"},streakTime:{type:"Time",map:"combat",max:99,GD:2,tr:"crits"},streakKilled:{type:"KeyValue",map:"combat"},expEn:{type:"KeyValue",map:"player",Qc:"expEnemies"},sepThrow:{type:"Separator",group:"throwing"},close:{type:"KeyValue",map:"player"},closeHits:{type:"KeyValue",map:"player",Yk:"player",Zk:"close"},aimingTime:{type:"Time",map:"combat",Qc:"aiming",max:99,GD:2},"throws":{type:"KeyValue",
map:"player"},throwHits:{type:"KeyValue",map:"player"},hitPercent:{type:"Percent",tj:function(){return Math.min(1,(sc.pa.Qf("player","throwHits")||0)/(sc.pa.Qf("player","throws")||0)||0)},max:J()},sepGuard:{type:"Separator",group:"guarding"},dashTime:{type:"Time",map:"player",Qc:"dashTime",max:99,GD:2},dash:{type:"KeyValue",map:"player"},perfectDash:{type:"KeyValue",map:"player"},atkDashCancel:{type:"KeyValue",map:"player"},guardTime:{type:"Time",map:"combat",Qc:"guardTime",max:99,GD:2},shieldedHits:{type:"KeyValue",
map:"combat"},perfectShield:{type:"KeyValuePercent",map:"combat",Yk:"combat",Zk:"shieldedHits",ql:"shields"},guardCounters:{type:"KeyValue",map:"combat",tr:"shields"},shieldBreaks:{type:"KeyValue",map:"combat"},sepSpe:{type:"Separator",group:"combatArts"},chargeTime:{type:"Time",map:"combat",Qc:"charging",max:99,GD:2},specials:{type:"KeyValue",map:"combat"},specialsClose:{type:"KeyValuePercent",map:"combat",Yk:"combat",Zk:"specials",ql:"specials"},specialsThrow:{type:"KeyValuePercent",map:"combat",
Yk:"combat",Zk:"specials"},specialsDash:{type:"KeyValuePercent",map:"combat",Yk:"combat",Zk:"specials"},specialsGuard:{type:"KeyValuePercent",map:"combat",Yk:"combat",Zk:"specials"},sepCircuits:{type:"Separator",group:"circuits",tr:"specials"},skills:{type:"KeyValue",map:"player"},skillsPassive:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skills",ql:"skills"},skillsActive:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skills"},branches:{type:"KeyValue",map:"player",tr:"skills"},skillPoints:{type:"KeyValue",
map:"player"},skillPoints0:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skillPoints",ql:"points"},skillPoints1:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skillPoints"},skillPoints2:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skillPoints"},skillPoints3:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skillPoints"},skillPoints4:{type:"KeyValuePercent",map:"player",Yk:"player",Zk:"skillPoints"},sepElements:{type:"Separator",group:"elements",tr:"points"},elOverload:{type:"KeyValue",
map:"element",Qc:"overload"},elSwitches:{type:"KeyValue",max:99,GD:2,value:function(){var a=0,b;for(b in sc.ha)a=a+(sc.pa.Qf("element","used"+sc.ha[b])||0);return a}},elSwitchesNeutral:{type:"KeyValue",map:"element",Qc:"used0",ql:"switches"},elSwitchesHeat:{type:"KeyValue",map:"element",Qc:"used1",fb:"player.core.9"},elSwitchesCold:{type:"KeyValue",map:"element",Qc:"used2",fb:"player.core.10"},elSwitchesShock:{type:"KeyValue",map:"element",Qc:"used3",fb:"player.core.11"},elSwitchesWave:{type:"KeyValue",
map:"element",Qc:"used4",fb:"player.core.12"},elTime:{type:"Time",max:99,GD:2,tr:"switches",value:function(){var a=0,b;for(b in sc.ha)b!="NEUTRAL"&&(a=a+(sc.pa.Qf("element","time"+sc.ha[b])||0));return a}},elTimeHeat:{type:"Time",map:"element",Qc:"time1",max:99,GD:2,fb:"player.core.9",ql:"elements"},elTimeCold:{type:"Time",map:"element",Qc:"time2",max:99,GD:2,fb:"player.core.10"},elTimeShock:{type:"Time",map:"element",Qc:"time3",max:99,GD:2,fb:"player.core.11"},elTimeWave:{type:"Time",map:"element",
Qc:"time4",max:99,GD:2,fb:"player.core.12"}};sc.RL[sc.Wx.VE]={tradersFound:{type:"Percent",We:{min:1},tj:function(){return sc.Fb.lS(h)}},items:{We:{min:1},type:"Percent",tj:function(){return sc.yb.RJ(h)}},itemCons:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"CONS")},ql:"items"},itemEquip:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"EQUIP")}},itemEquipHead:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"EQUIP","HEAD")},ql:"equip"},itemEquipArm:{type:"Percent",
We:{min:1},tj:function(){return sc.yb.RJ(h,"EQUIP","ARM")}},itemEquipTorso:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"EQUIP","TORSO")}},itemEquipFeet:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"EQUIP","FEET")}},itemTrade:{type:"Percent",We:{min:1},tj:function(){return sc.yb.RJ(h,"TRADE")},tr:"equip"},sepFoundEnd:{type:"Separator",group:"overview",tr:"items"},total:{type:"KeyValue",map:"items"},used:{type:"KeyValue",map:"items"},dropsTotal:{type:"KeyValue",map:"items"},
dropsProps:{type:"KeyValuePercent",map:"items",Yk:"items",Zk:"dropsTotal",ql:"drops"},dropsEnemies:{type:"KeyValuePercent",map:"items",Yk:"items",Zk:"dropsTotal"},buy:{type:"KeyValue",map:"items",tr:"drops"},sell:{type:"KeyValue",map:"items"},sepTra:{type:"Separator",group:"trades"},trades:{type:"KeyValue",map:"trade",Qc:"total"},tradeGot:{type:"KeyValue",map:"trade",Qc:"got"},tradeLost:{type:"KeyValue",map:"trade",Qc:"lost"},traderTotal:{type:"KeyCurMax",We:h,value:function(){return sc.Fb.lS()},
max:function(){return sc.Fb.P2a()},hide:function(){return!sc.map.i3a()}},tradersAreas:{type:"List",RNa:"KeyCurMax",list:function(){return sc.map.areas},pD:function(a){return!sc.map.Bda(a)||!sc.Fb.n3a(a)?q:{We:h,Zi:sc.map.Kv(a),value:function(){return sc.Fb.lS(y,a)},max:function(){return sc.Fb.P2a(a)}}},ql:"traders"}};sc.RL[sc.Wx.FQa]={areas:{We:{min:1},type:"Percent",tj:function(){return sc.map.xpa(h)}},landmarks:{We:{min:1},type:"Percent",tj:function(){return sc.map.Ada(h)}},chests:{We:{min:1},type:"Percent",
tj:function(){return sc.map.T4(h)}},botanics:{We:{min:1},type:"Percent",tj:function(){return sc.e.U4(h)}},lories:{type:"Percent",tj:function(){return sc.Oe.BY(h)},We:{min:1}},loriesStory:{type:"Percent",tj:function(){return sc.Oe.BY(h,"STORY")},We:{min:1},zx:h,Wyb:2,ql:"lories"},loriesPeople:{type:"Percent",tj:function(){return sc.Oe.BY(h,"CHARACTERS")},We:{min:1}},loriesCross:{type:"Percent",tj:function(){return sc.Oe.BY(h,"CROSS_LORE")},We:{min:1}},loriesEarth:{type:"Percent",tj:function(){return sc.Oe.BY(h,
"EARTH_LORE")},We:{min:1}},sepOverview:{type:"Separator",group:"overview",tr:"lories"},areasFound:{type:"KeyValue",value:function(){return sc.map.xpa()}},landmarksFound:{type:"KeyValue",map:"exploration",Qc:"landmarks"},loreFound:{type:"KeyValue",map:"exploration",Qc:"lore"},sepBotanics:{type:"Separator",group:"botanics"},propsDestroyed:{type:"KeyValue",map:"player"},dropsTotalPlants:{type:"KeyValue",map:"exploration",Qc:"dropsTotal"},dropsCompleted:{type:"KeyValuePercent",map:"exploration",Qc:"dropsCompleted",
Yk:"exploration",Zk:"dropsTotal",ql:"drops"},sepChests:{type:"Separator",group:"chests",tr:"drops"},chestFound:{type:"KeyCurMax",We:h,value:function(){return sc.map.T4()},max:function(){return sc.map.wBb()},hide:function(){return!sc.map.i3a()}},chestAres:{type:"List",RNa:"KeyCurMax",list:function(){return sc.map.areas},pD:function(a){return!sc.map.Bda(a)||!sc.map.areas[a].track||!sc.map.areas[a].chests?q:{We:h,Zi:sc.map.Kv(a),map:"chests",Qc:a,max:function(){return sc.map.areas[a].chests}}},ql:"chests"}};
sc.RL[sc.Wx.d$]={quests:{type:"Percent",We:{min:1},tj:function(){return sc.dc.V4(h)}},sepOverview:{type:"Separator",group:"overview"},questTotal:{type:"KeyValue",map:"quests",Qc:"solved"},tasksTotal:{type:"KeyValue",map:"quests",Qc:"tasks"},subTaskTotal:{type:"KeyValue",map:"quests",Qc:"subtasks"},subTaskKill:{type:"KeyValuePercent",map:"quests",Qc:"subtasksKILL",Yk:"quests",Zk:"subtasks",ql:"subtasks"},subTaskCol:{type:"KeyValuePercent",map:"quests",Qc:"subtasksCOLLECT",Yk:"quests",Zk:"subtasks"},
subTaskAct:{type:"KeyValuePercent",map:"quests",Qc:"subtasksCONDITION",Yk:"quests",Zk:"subtasks"},subTaskQuest:{type:"KeyValuePercent",map:"quests",Qc:"subtasksQUEST",Yk:"quests",Zk:"subtasks"},subTaskLandmark:{type:"KeyValuePercent",map:"quests",Qc:"subtasksLANDMARK",Yk:"quests",Zk:"subtasks"},questActive:{type:"KeyValue",map:"quests",Qc:"active",tr:"subtasks"},rewardExp:{type:"KeyValue",map:"quests",Qc:"exp"},rewardMoney:{type:"KeyValue",map:"quests",Qc:"money"},rewardItems:{type:"KeyValue",map:"quests",
Qc:"rewards"},rewardCp:{type:"KeyValue",map:"quests",Qc:"cp"},sepAreas:{type:"Separator",group:"questAreas"},questAreas:{type:"List",RNa:"Percent",list:function(){return sc.map.areas},pD:function(a){return!sc.map.Bda(a)||!sc.map.areas[a].track||!sc.dc.bCb(a)?q:{We:{min:1},Zi:sc.map.Kv(a),tj:function(){return sc.dc.V4(h,a)}}}}};sc.RL[sc.Wx.NRa]={gameBoots:{type:"KeyValue"},logs:{type:"KeyValue",map:"player"},words:{type:"KeyValue",map:"misc"},hiCount:{type:"KeyValue",map:"misc"},yawns:{type:"KeyValue",
map:"misc"},randomNumber:{type:"KeyValue",value:function(){return Math.floor(Math.random()*Math.random()*123952637)}},finalStat:{type:"KeyValue",We:h,value:function(){for(var a=0,b=sc.RL,c=b.length,d=q;c--;)for(var f in b[c]){d=b[c][f];if(d.type=="LIST"){var i=d.list(),j;for(j in i)d.pD()&&a++}else a++}return a}}};sc.RL[sc.Wx.Uja]={activity:{type:"Logs"}}});ig.J=h;
ig.N("game.feature.menu.gui.stats.stats-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.save.save-misc","game.feature.menu.gui.stats.stats-gui-builds").K(function(){sc.Hka=sc.TL.extend({Fl:q,paddingTop:1,f:function(a){this.parent(sc.Zn.vC);this.paddingTop=a==g?1:a;this.Fl=new ig.da;this.ih(this.Fl)},update:function(){this.parent();if(this.a.lm&&(!this.Gfa||this.Gfa())){sc.ba.yZ()?this.scrollY(-20):sc.ba.xZ()&&this.scrollY(20);
sc.ba.gu()?this.scroll(200*ig.i.ja):sc.ba.Zu()&&this.scroll(-200*ig.i.ja)}},F:function(a,b){this.parent(a,b);this.Fl.F(a,b)},scroll:function(a,b){this.scrollY(a,b,0.05)},De:function(a,b){a.l(b,this.fda(this.Fl.a.children.length%1!=0)+0);this.Fl.m(a);this.CKb(this.fda())},clear:function(a){this.Fl.rh();this.Fl.a.size.y=0;this.Gc.Hl(0,0,0);this.fw(a)},BO:function(a,b,c){this.gM=y;c||this.Gc.Hl(0,0,0);this.parent(a,b)},fda:function(a){var b=this.Fl.a.children,c=b.length;a&&(c=c-1);for(a=0;c--;){a=a+
(b[c].size.y+0);c=c-0;if(c<0)break}return a+this.paddingTop},CKb:function(a){this.Fl.a.size.y=a;this.fw()}});sc.V1=ig.da.extend({s:new ig.ia("media/gui/menu.png"),oc:q,Jv:q,color:0,x:528,wbb:y,f:function(a,b){this.parent();this.wbb=b.smallPercent||y;this.Jv=new sc.Tb(99,{size:b.size,leadingZeros:2,scramble:b.scramble});this.Jv.H(ig.k.ra,ig.k.$);this.Jv.l(9,0);this.m(this.Jv);this.oc=new sc.Tb(q,b);this.oc.H(ig.k.ra,ig.k.$);this.oc.l(this.Jv.a.size.x+12,0);this.m(this.oc);if(!ig.Xn[ig.dh]||!ig.Xn[ig.dh].Jba)this.x=
548;this.F(this.oc.a.size.x+this.Jv.a.size.x+12,this.oc.a.size.y)},za:function(a,b){var c=Math.floor(a*100);this.oc.za(c,b);c=Math.floor(a*1E4)%100;this.Jv.za(c,b);this.F(this.oc.a.size.x+this.Jv.a.size.x+12,this.oc.a.size.y)},pe:function(a){this.color=a||0;this.oc.pe(this.color);this.Jv.pe(this.color)},Da:function(a){this.wbb?a.na(this.s,this.a.size.x-8,0,440+8*this.color,440,8,8):a.na(this.s,this.a.size.x-8,0,512+9*this.color,192,8,10);a.na(this.s,this.a.size.x-28,this.a.size.y-3,this.x+4*this.color,
184,3,5)}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-view-parameters").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.stats.stats-misc").K(function(){sc.Iob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},fc:q,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.fc=new sc.Job;this.m(this.fc);this.hide(h)},show:function(){this.fc.Qi(h);this.fc.show()},hide:function(a){this.fc.hide(a)},
Iia:function(){this.fc.Qi()}});sc.Job=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:271.5},time:0.2,p:KEY_SPLINES.LINEAR}},Kd:q,list:q,xb:{},f:function(){this.parent(sc.rg.jW);this.F(518,213);this.l(25,59);this.Kd=new sc.$E;this.Kd.l(0,11);this.Kd.F(this.a.size.x,196);this.m(this.Kd);this.list=new sc.Hka(2);this.list.Gfa=function(){return!sc.e.yG};this.list.l(0,11);this.list.F(this.a.size.x,196);this.m(this.list);var a=new sc.ea(ig.lang.get("sc.gui.menu.equip.param"),
{font:sc.Ea.Ib});a.l(8,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.base"),{font:sc.Ea.Ib});a.l(89,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.equip"),{font:sc.Ea.Ib});a.l(132,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.skills"),{font:sc.Ea.Ib});a.l(174,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.info"),{font:sc.Ea.Ib});a.l(213,4);this.m(a);this.hna()},show:function(){this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)},Qi:function(a){var b=sc.q.T,
c=b.Ub,d=b.xy,b=b.$i[sc.e.Vu].Ub;this.ZH("maxhp","hp",c,d,b,a);this.ZH("atk","attack",c,d,b,a);this.ZH("def","defense",c,d,b,a);this.ZH("foc","focus",c,d,b,a);this.ZH("heat","elemFactor",c,d,b,a);this.ZH("cold","elemFactor",c,d,b,a);this.ZH("shock","elemFactor",c,d,b,a);this.ZH("wave","elemFactor",c,d,b,a)},ZH:function(a,b,c,d,f,i){var a=this.xb[a],j=0,k=0,l=0;if(a.sn){l=a.fK-1;j=Math.round(-(c[b][l]-1)*100);k=Math.round((d[b][l]-1)*100);l=Math.round(-(f[b][l]-1)*100)}else{j=c[b];k=d[b];l=f[b]}a.Qi(j,
k,l,i,k-j,l-k,h)},hna:function(){this.UC("maxhp",0,0,y);this.UC("atk",0,1,y,q,q,h);this.UC("def",0,2,y,q,q,h);this.UC("foc",0,3,y,q,0,h);this.UC("res",1,4,h,"heat");this.UC("res",2,5,h,"cold");this.UC("res",3,6,h,"shock");this.UC("res",4,7,h,"wave")},UC:function(a,b,c,d,f,i,j){var k=ig.lang.get("sc.gui.menu.equip."+a),l=ig.lang.get("sc.gui.menu.equip.descriptions."+(f||a)),b=new sc.QTa(k,l,513,b,c,d,q,q,j);if(i)b.a.size.y=b.a.size.y+i;this.xb[f||a]=b;this.list.De(b,0)}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-view-modifiers").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.stats.stats-misc").K(function(){sc.Gob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},fc:q,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.fc=new sc.Hob;this.m(this.fc);this.hide(h)},show:function(){this.fc.Qi(h);this.fc.show()},hide:function(a){this.fc.hide(a)},
Iia:function(a){this.fc.Qi(y,a)}});sc.Hob=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:271.5},time:0.2,p:KEY_SPLINES.LINEAR}},Kd:q,list:q,xb:{},f:function(){this.parent(sc.rg.jW);this.F(518,213);this.l(25,59);this.Kd=new sc.$E;this.Kd.l(0,11);this.Kd.F(this.a.size.x,196);this.m(this.Kd);this.list=new sc.Hka(2);this.list.Gfa=function(){return!sc.e.yG};this.list.l(0,11);this.list.F(this.a.size.x,196);this.m(this.list);var a=new sc.ea(ig.lang.get("sc.gui.menu.equip.modifierName"),
{font:sc.Ea.Ib});a.l(8,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.equip"),{font:sc.Ea.Ib});a.l(89,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.skills"),{font:sc.Ea.Ib});a.l(132,4);this.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.equip.info"),{font:sc.Ea.Ib});a.l(169,4);this.m(a);this.hna()},show:function(){this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)},Qi:function(a,b){if(b){var c=sc.q.T.wy,d=sc.q.T.$i[sc.e.Vu].So,f;for(f in this.xb)this.ZH(f,c,d,y)}else this.hna(a)},
ZH:function(a,b,c,d){var f=this.xb[a],i=0,j=0,i=Math.round(((b[a]||1)-1)*100),j=Math.round((c[a]||0)*100);f.a.g.y>=194&&(d=h);f.Qi(i,j,0,d,j-i,0,h)},hna:function(a){var b=sc.q.T.$i[sc.e.Vu].So,c=a?this.list.qG():0;this.list.clear(h);var d=sc.q.T.wy,f=q,i,j=y,k;for(k in b)if(b[k]!=0){i=(f=sc.Af[k])?f.Y:50;j=f?f.tB:y;this.UC(k,5,i,j,f.tB);this.ZH(k,d,b,a)}a&&this.list.scrollY(c,h)},UC:function(a,b,c,d,f){var i=ig.lang.get("sc.gui.menu.equip.modifier."+a),j=ig.lang.get("sc.gui.menu.equip.descriptions."+
a),b=new sc.QTa(i,j,513,b,c,h,h,f);d&&b.CCb(h);this.xb[a]=b;this.list.De(b,0);return b}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-view-combat-arts").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.stats.stats-misc").K(function(){var a={TQb:{hs:"THROW_SPECIAL",Y:0},nPb:{hs:"ATTACK_SPECIAL",Y:1},FPb:{hs:"DASH_SPECIAL",Y:2},TPb:{hs:"GUARD_SPECIAL",Y:3}};sc.zob=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},fc:q,f:function(){this.parent();this.F(ig.i.width,
ig.i.height);this.fc=new sc.Aob;this.m(this.fc);this.hide(h)},show:function(){this.fc.Qi(h);this.fc.show()},hide:function(a){this.fc.hide(a)},Iia:function(a){this.fc.Qi(y,a)}});sc.Aob=sc.Bl.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:271.5},time:0.2,p:KEY_SPLINES.LINEAR}},Kd:q,list:q,xb:{},f:function(){this.parent(sc.rg.jW);this.F(518,213);this.l(25,59);this.Kd=new sc.$E;this.Kd.l(0,11);this.Kd.F(this.a.size.x,196);this.m(this.Kd);this.list=new sc.Hka(2);
this.list.Gfa=function(){return!sc.e.yG};this.list.l(0,11);this.list.F(this.a.size.x,196);this.m(this.list);this.j_a(y)},show:function(){this.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a)},Qi:function(a){this.j_a(a)},j_a:function(b){var c=b?this.list.qG():0;this.list.clear(h);for(var d in a)this.qub(a[d]);b&&this.list.scrollY(c,h)},qub:function(a){var c=this.AAb(sc.e.Vu,a);if(c>0){var d=new sc.Cob(a.hs,a.Y);this.list.De(d,0);this.Jtb(a.hs,sc.e.Vu,c)}},Jtb:function(a,c,d){for(var f=0;f<3;f++){var i=
sc.q.T.dzb(c,sc.hl[a+(f+1)]);if(i)if(i=sc.q.T.SEa(c,i.name)){i=new sc.Bob(f+1,i);this.list.De(i);if(f!=d-1){i=new sc.Dob;this.list.De(i)}}}},AAb:function(a,c){for(var d=0,f=c.hs;d<3&&sc.q.T.bzb(a,sc.hl[f+(d+1)]);)d++;return d}});sc.Bob=ig.da.extend({tMb:new ig.ia("media/gui/circuit-icons.png"),Y:q,aa:q,Lf:q,TX:q,YO:q,fb:q,name:q,description:q,info:q,f:function(a,c){this.parent();this.F(512,41);this.info=c;this.QW("lvl",9,2);this.Y=new ig.ec(this.tMb,c.Y%10*24,Math.floor(c.Y/10)*24,24,24);this.Y.l(3,
12);this.m(this.Y);this.aa=new sc.Tb(9,{size:sc.Ff.Uh});this.aa.za(a);this.aa.l(25,3);this.m(this.aa);this.name=new sc.ea("\\c[3]"+c.name+"\\c[0]");this.name.l(40,-1);this.m(this.name);this.description=new sc.ea(c.description,{maxWidth:460,font:sc.Ea.he,linePadding:-3});this.description.l(40,17);this.m(this.description);var d=168,d=d+(this.QW("sp",d,2).x+3);this.Lf=new sc.Tb(9);this.Lf.za(sc.RP[a-1]);this.Lf.l(d,3);this.m(this.Lf);d=d+13;d=d+(this.QW("dmgType",d,2).x+3);this.TX=new sc.ea(this.Hzb(c.TX));
this.TX.l(d,-1);this.m(this.TX);d=d+(this.TX.a.size.x+5);if(c.YO||c.status&&sc.e.Vu!=0)d=d+(this.QW("effects",d,2).x+2);if(c.YO){this.YO=new sc.ea(this.rBb(c.YO));this.YO.l(d,-1);this.m(this.YO);d=d+(this.YO.a.size.x+6)}if(c.status&&sc.e.Vu!=0){this.fb=new sc.ea(this.yzb(c.status));this.fb.l(d,-1);this.m(this.fb)}},QW:function(a,c,d){a=new sc.ea("\\c[4]"+ig.lang.get("sc.gui.menu.status."+a)+"\\c[0]",{font:sc.Ea.Ib});a.l(c,d);this.m(a);return a.a.size},Hzb:function(a){return ig.lang.get("sc.gui.menu.status.damageTypes")[a-
1]},rBb:function(a){var c=ig.lang.get("sc.gui.menu.status.stunTypes");return"\\i[status-stun-"+a+"]"+c[a-1]},yzb:function(){var a=ig.lang.get("sc.gui.menu.status.conditions");return"\\i[status-cond-"+sc.e.Vu+"]"+ig.lang.get("sc.gui.menu.status.inflicts")+" "+a[sc.e.Vu]}});sc.Cob=ig.da.extend({s:new ig.ia("media/gui/menu.png"),text:q,Y:0,f:function(a,c){this.parent();this.F(515,11);this.Y=c||0;this.text=new sc.ea(ig.lang.get("sc.gui.menu.status.artType."+a),{font:sc.Ea.Ib});this.text.l(13,3);this.m(this.text)},
Da:function(a){a.nc("#C7C7C7",0,10,this.a.size.x,1);a.na(this.s,0,0,640,432+this.Y*12,11,11)}});sc.Dob=ig.da.extend({s:new ig.ia("media/gui/menu.png"),f:function(){this.parent();this.F(502,1)},Da:function(a){a.nc("#545454",0,0,this.a.size.x-88,1);a.na(this.s,this.a.size.x-88,0,576,511,88,1)}})});ig.J=h;
ig.N("game.feature.menu.gui.status.status-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-status-default","game.feature.menu.gui.status.status-misc","game.feature.menu.gui.status.status-view-main","game.feature.menu.gui.status.status-view-parameters","game.feature.menu.gui.status.status-view-modifiers","game.feature.menu.gui.status.status-view-combat-arts").K(function(){sc.wob=
sc.uw.extend({Hb:q,vS:q,Lp:q,Dz:q,kb:q,Dh:[],elements:q,msa:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.vS=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.hotkeys.equip"),g,h,sc.Mc.$c);this.vS.dg=h;this.vS.a.R=
{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.vS.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.vS.cc=this.$Fb.bind(this);this.Lp=new sc.mc("\\i[help3]"+ig.lang.get("sc.gui.menu.hotkeys.diff-show"),g,h,sc.Mc.$c);this.Lp.ac=q;this.Lp.fo=q;this.Lp.dg=h;this.Lp.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Lp.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Lp.cc=this.WFb.bind(this);this.Dz=new sc.wh;this.Dz.Rk(function(a){a.data&&sc.e.Cc(a.data.description)});
this.Dz.jn(function(){sc.e.Cc("",h)});this.Dwb();this.msa=new sc.xob;this.m(this.msa);this.elements=new sc.sob;this.m(this.elements);this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(a,b){this.Oc();sc.e.iT==0&&sc.e.T$a(sc.Fc.gA);if(sc.e.iT==sc.Fc.gA)if(b==sc.Fc.nC)sc.e.Z.hh(this.Dz);else{sc.e.Z.hh(this.Dz);sc.e.rl(this.ej.bind(this))}else sc.e.rl(this.ej.bind(this));ig.La.Md(0.2);sc.e.Z.hh(this.Dz);sc.e.Cc("",y);this.msa.show();this.elements.show();
this.Dh[sc.e.Wu].show();this.Odb(sc.e.Wu,h);this.fn()},pl:function(a,b){this.Ic();b!=sc.Fc.nC&&sc.e.gk(0,0,sc.Si.Uh);this.msa.hide();this.elements.hide();this.Dh[sc.e.Wu].hide();this.Gd(b)},Gd:function(a){sc.e.Z.Te(this.Hb);sc.e.Z.Te(this.vS);sc.e.Z.Te(this.Lp);sc.e.Z.sl(this.Dz);if(a!=sc.Fc.nC){sc.e.iT=0;sc.e.y0a()}this.kb=q},Dwb:function(){this.Dh[sc.ZE.H9]=new sc.Eob;this.Dh[sc.ZE.lSa]=new sc.Iob;this.Dh[sc.ZE.ORa]=new sc.Gob;this.Dh[sc.ZE.VPa]=new sc.zob;for(var a=this.Dh.length;a--;)this.m(this.Dh[a]);
sc.e.Vu=sc.q.T.sg},JKb:function(a,b){this.Odb(a);this.Dh[b].hide();this.Dh[a].show();ig.La.Md(0.2)},Bdb:function(a){this.Dh[sc.e.Wu].Iia&&this.Dh[sc.e.Wu].Iia(a)},Odb:function(a,b){switch(a){case sc.ZE.H9:sc.e.gk(0,-101,sc.Si.$c,!b);break;default:sc.e.gk(0,0,sc.Si.Aw)}},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt();sc.e.yG=h;sc.e.Q0a()},mGb:function(){return ig.La.zh()?y:sc.ba.ND()},$Fb:function(){sc.e.AB==sc.Fc.im?sc.e.uH(sc.Fc.nC):sc.e.AB==sc.Fc.nC&&
this.ej()},lGb:function(){return ig.La.zh()?y:sc.ba.ON()},WFb:function(){if(this.Lp.Aa){sc.gd.submit.play();sc.e.h0=!sc.e.h0;this.Bdb(h);var a="\\i[help3]"+ig.lang.get("sc.gui.menu.hotkeys.diff-"+(sc.e.h0?"hide":"show"));this.Lp.ga(a)}},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.status.title"),ig.lang.get("sc.gui.menu.help-texts.status.pages"),function(){sc.e.yG=y;sc.e.Q0a();this.xh(h)}.bind(this));this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,
this.gn.bind(this));sc.e.Z.Jd(this.vS,this.mGb.bind(this));sc.e.Z.Jd(this.Lp,this.lGb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("Lp").bind(this));sc.e.bk(M("vS").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a);this.$u()},$u:function(){var a="\\i[help3]"+ig.lang.get("sc.gui.menu.hotkeys.diff-"+(sc.e.h0?"hide":"show"));this.Lp.ga(a);switch(sc.e.Wu){case sc.ZE.VPa:this.Lp.h8=h;this.Lp.j("HIDDEN");this.Lp.setActive(y);break;case sc.ZE.lSa:case sc.ZE.ORa:this.Lp.h8=y;this.Lp.setActive(h);this.Lp.j("DEFAULT");
break;default:this.Lp.h8=h;this.Lp.j("HIDDEN");this.Lp.setActive(y)}},ej:function(){var a=sc.e.AB;sc.e.Dk();sc.e.ez();if(a==sc.Fc.nC)sc.e.AB=sc.Fc.im},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.Aka){if(c!=sc.e.Wu){this.JKb(sc.e.Wu,c);this.$u()}}else b==sc.fa.tTa&&this.Bdb()}})});ig.J=h;
ig.N("game.feature.menu.gui.museum.museum-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc").K(function(){sc.skb=sc.uw.extend({Hb:q,Dz:q,kb:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,
p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.Dz=new sc.wh;this.Dz.Rk(function(a){a.data&&sc.e.Cc(a.data.description)});this.Dz.jn(function(){sc.e.Cc("",h)});this.j("DEFAULT")},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},Yd:function(){this.Oc();sc.e.Z.hh(this.Dz);sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);ig.La.Md(0.2);this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.sl(this.Dz);this.kb=q},gn:function(){return sc.ba.Hs()},
Qn:function(){this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.jxa;this.kb.YLa(ig.lang.get("sc.gui.menu.help-texts.save.title"));this.kb.ZAa(ig.lang.get("sc.gui.menu.help-texts.save.pages"));this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw()},ej:function(){sc.e.Dk();sc.e.ez()},Ab:J()})});ig.J=h;
ig.N("game.feature.menu.gui.stats.stats-types").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc","game.feature.menu.gui.save.save-misc","game.feature.menu.gui.stats.stats-gui-builds","game.feature.menu.gui.stats.stats-misc","game.feature.menu.gui.synop.synop-misc").K(function(){function a(a){for(var c=ig.dh+"",c=ig.Xn[ig.dh]&&ig.Xn[ig.dh].Jba?".":",",d=/(\d+)(\d{3})/,a=a+"";d.test(a);)a=a.replace(d,"$1"+c+"$2");return a}sc.FI={};sc.x$=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
key:q,FD:q,Mg:q,f:function(a,c,d){this.parent();this.F(d,20);this.key=a;this.FD=new sc.ea("");this.FD.H(ig.k.hb,ig.k.vb);this.FD.l(5,0);this.m(this.FD);d=q;if(c.Zi)d=c.Zi;else(d=ig.lang.get("sc.gui.menu.stats.keys")[a])||(d="\\c[1]~ "+a+"\\c[0]");this.FD.ga(d);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,184,16,4,ig.nf.Eg.Yn)},Da:function(a){if(this.FD&&this.Mg){var c=this.FD.a.size.x+this.FD.a.g.x+1,d=this.a.size.x-this.FD.a.size.x-this.Mg.a.size.x-10,d=Math.floor(d/4)*4;
a.Qk(this.constructor.oj,c,12,0,0,d,4)}}});sc.FI.Time=sc.x$.extend({Qc:q,map:q,value:q,Jia:y,f:function(a,c,d){this.parent(a,c,d);this.Qc=c.Qc||a;this.map=c.map||q;this.Jia=c.update||y;this.Mg=new sc.Dka(sc.Ff.hv,c.max,c.GD);this.Mg.H(ig.k.ra,ig.k.vb);this.Mg.l(5,2);this.m(this.Mg);a=0;if(c.value){this.value=c.value;a=this.value()}else a=sc.pa.Qf(this.map,this.Qc);this.Mg.Ur.za(Math.floor(a)%60,h);this.Mg.QN.za(Math.floor(a/60)%60,h);this.Mg.yD.za(Math.floor(a/60/60),h)},update:function(){if(this.Jia&&
this.map&&this.Qc){var a=0,a=this.value?this.value():sc.pa.Qf(this.map,this.Qc);this.Mg.Ur.za(Math.floor(a)%60,h);this.Mg.QN.za(Math.floor(a/60)%60,h);this.Mg.yD.za(Math.floor(a/60/60),h)}}});sc.FI.Percent=sc.x$.extend({f:function(a,c,d){this.parent(a,c,d);var d=0,d=c.tj?c.tj():c.map?sc.pa.Qf(c.map,c.Qc||a)||0:sc.pa.get(c.Qc||a)||0,f=q;if(c.Zi)f=c.Zi;else(f=ig.lang.get("sc.gui.menu.stats.keys")[a])||(f="\\c[1]~ "+f+"\\c[0]");this.Mg=new sc.V1(q,{size:sc.Ff.hv,leadingZeros:c.Wyb||1,scramble:d>=1?y:
c.zx});if(c.We)if(c.We.min!=g){if(d>=c.We.min){this.Mg.pe(sc.Od.bF);this.FD.ga("\\c[3]"+f+"\\c[0]")}}else{this.Mg.pe(sc.Od.bF);this.FD.ga("\\c[3]"+f+"\\c[0]")}this.Mg.H(ig.k.ra,ig.k.vb);this.Mg.l(5,0);this.Mg.za(Math.min(100,d));this.m(this.Mg)}});sc.FI.KeyValue=sc.x$.extend({f:function(b,c,d){this.parent(b,c,d);var d=c.Qc||q,f=c.map||q,i=0,i=c.value?typeof c.value=="function"?c.value()||0:c.value||0:f?sc.pa.Qf(f,d||b)||0:sc.pa.get(d||b)||0,i=i+(c.add||0);c.N3a&&i==0&&this.FD.ga("???????????????");
if(c.WRb){this.Mg=new sc.Tb(c.fh||q,{leadingZeros:c.qZ||0,size:sc.Ff.hv,signed:i==0});this.Mg.za(i)}else this.Mg=new sc.ea(a(i)+(c.J8a?c.J8a():""));this.Mg.H(ig.k.ra,ig.k.vb);this.Mg.l(5,0);this.m(this.Mg)}});sc.FI.KeyCurMax=sc.x$.extend({f:function(b,c,d){this.parent(b,c,d);var f=c.Qc||q,i=c.map||q,d=0,d=c.value?typeof c.value=="function"?c.value()||0:c.value||0:i?sc.pa.Qf(i,f||b)||0:sc.pa.get(f||b)||0,b=c.max?c.max():0,f=a(Math.min(b,d+(c.add||0))),i=a(b);c.hide&&c.hide(d,b)&&(i="???");var j=q,
j=c.We?d>=b?"\\c[3]"+f+"\\i[slash-highlight]"+i+"\\c[0]":f+"\\i[slash]"+i:f+"\\i[slash]"+i;this.Mg=new sc.ea(j);this.Mg.H(ig.k.ra,ig.k.vb);this.Mg.l(5,0);this.m(this.Mg)}});sc.FI.KeyValuePercent=sc.x$.extend({Jf:q,iga:q,f:function(b,c,d){this.parent(b,c,d);var f=c.Qc||q,i=c.map||q,d=0,d=c.value?typeof c.value=="function"?c.value()||0:c.value||0:i?sc.pa.Qf(i,f||b)||0:sc.pa.get(f||b)||0;this.Jf=new sc.ea(a(d)+"\\i[arrow-percent]");this.Jf.H(ig.k.hb,ig.k.vb);f=0;if(c.tj)f=c.tj();else f=(f=c.Yk?sc.pa.Qf(c.Yk,
c.Zk||b)||0:sc.pa.get(c.Zk||b)||0)?Math.min(1,d/f):0;this.iga=new sc.V1(q,{size:sc.Ff.hv,leadingZeros:2});this.iga.H(ig.k.ra,ig.k.vb);this.iga.za(f);this.Mg=new ig.da;this.Mg.H(ig.k.ra,ig.k.vb);this.Mg.l(5,0);this.m(this.Mg);this.Mg.m(this.Jf);this.Mg.m(this.iga);this.Mg.F(this.Jf.a.size.x+this.iga.a.size.x+2,20)}});sc.FI.Separator=ig.da.extend({QLa:q,f:function(a,c,d){this.parent();this.F(d,14);if(c.gWb){a=new ig.mf("#545454",d+5,1);a.l(0,0);this.m(a);this.a.size.y=1}else{this.QLa=new sc.ea(ig.lang.get("sc.gui.menu.stats.groups."+
(c.group||a)),{font:sc.Ea.Ib});this.QLa.l(2,3);this.m(this.QLa);a=new ig.mf("#545454",d+5,1);a.l(0,11);this.m(a)}}});sc.FI.Logs=ig.da.extend({f:function(a,c,d){this.parent();this.F(d,20);for(var a=sc.e.$S,c=a.length,d=0,f=q,f=q,i=0;c--;){var f=a[c],j=sc.pC[f.type];if(j&&(!j.mqa||j.mqa(f))){d++;f=new sc.pC[f.type](f);f.l(3,i);this.m(f);i=i+f.a.size.y;if(d>=50)break}}this.a.size.y=i}})});ig.J=h;
ig.N("game.feature.menu.gui.stats.stats-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-list","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.stats.stats-misc","game.feature.menu.gui.stats.stats-gui-builds","game.feature.menu.gui.stats.stats-types").K(function(){var a=[];sc.nob=sc.aUa.extend({s:new ig.ia("media/gui/menu.png"),
ac:q,Kd:q,NA:q,JXb:[],f2:q,f:function(a){this.parent(h);this.F(436,258);this.DU(436,242);this.H(ig.k.Ia,ig.k.vb);this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR}};this.f2=a;this.ac=sc.gd.submit;this.Kd=new sc.$E;this.Kd.l(0,29);this.Kd.F(this.a.size.x,228);this.m(this.Kd);this.zm("general",0,{type:sc.Wx.Uz});this.zm("combat",1,{type:sc.Wx.dwa});this.zm("items",2,{type:sc.Wx.VE});this.zm("exploration",3,{type:sc.Wx.FQa});
this.zm("quests",4,{type:sc.Wx.d$});this.zm("misc",5,{type:sc.Wx.NRa});this.zm("log",6,{type:sc.Wx.Uja});this.j("HIDDEN",h)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},TNa:function(a){var c=this.tg,d=this.Yoa();if(a>=0){d.ff(y);if(a==1){c++;c>=this.Vd.length&&(c=0)}else{c--;c<0&&(c=this.Vd.length-1)}this.Pk=d=this.Vd[c];d.ff(h);this.ac.play();this.Vr(c,y,{skipSounds:h});this.eE(d,h);this.jta()}},
rK:function(a,c){if(!c){this.ac.play();this.Vr(this.jG(a));for(var d=this.Vd.length;d--;)if(a==this.Vd[d]){sc.e.NB(d);break}sc.e.Yg(q,h);return y}},aO:function(a,c,d){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.stats.tabs."+a),"stats-"+a,105);a.re.l(7,1);a.l(0,2);a.setData({type:d.type});this.m(a);return a},qK:function(a){sc.e.NB(a)},xJa:function(){var b={X:q};this.NA=new sc.Hka;this.NA.l(0,29);this.NA.F(this.a.size.x,228);this.NA.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},
time:0.2,p:KEY_SPLINES.LINEAR}};this.m(this.NA);this.NA.Gfa=function(){return this.f2.wc()}.bind(this);var c=sc.RL[this.Yoa().data.type],d=q,f=q,i=431,j=new ig.de;a.length=0;for(var k in c)if((d=c[k])&&sc.FI[d.type]||d.type=="List"){if(d.fb){j.lz(d.fb);if(!j.evaluate())continue}if(d.ql){a.indexOf(d.ql)!=-1&&e(Error(d.ql+" inset already exists. (Missing deset?)"));a.push(d.ql);i=i-24}else if(d.tr){f=a.indexOf(d.tr);if(f!=-1){f!=a.length-1&&e(Error(d.tr+" ist not top deset. (missing inset/deset?)"));
a.pop();i=i+24}else e(Error(d.tr+" dest does not exist. (missing inset?)"))}if(d.type=="List"){var f=d.list(),l;for(l in f)if(f=d.pD(l)){f=new sc.FI[d.RNa](l,f,i);f.H(ig.k.ra,ig.k.$);if(i<431){var m=new ig.ec(this.s,512,207,17,16);m.l(-17,-1);f.m(m)}this.NA.De(f,5)}}else{f=new sc.FI[d.type](k,d,i);f.H(ig.k.ra,ig.k.$);if(i<431){m=new ig.ec(this.s,512,207,17,16);m.l(-17,-1);f.m(m)}this.NA.De(f,5)}}b.X=this.NA;return b},uJa:function(){this.NA&&this.NA.j("HIDDEN",h)},MJa:function(a){this.NA=a.X;this.NA.j("DEFAULT",
h)},Ab:J()})});ig.J=h;
ig.N("game.feature.menu.gui.stats.stats-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.stats.stats-list").K(function(){sc.oob=sc.uw.extend({Hb:q,Ha:q,kb:q,list:q,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Hb=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);this.Hb.dg=h;this.Hb.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},
HIDDEN:{state:{offsetY:-this.Hb.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.Hb.cc=this.Qn.bind(this);this.Ha=new sc.wh;this.Ha.Rk(function(a){a.data&&sc.e.Cc(a.data.description)});this.Ha.jn(function(){sc.e.Cc("",h)});this.Ha.$l=this.$l.bind(this);this.list=new sc.nob(this.Ha);this.m(this.list);this.j("DEFAULT")},update:function(){this.Ha&&(this.Ha.wc()&&ig.input.Id)&&this.$l()},Oc:function(){sc.P.Wa(sc.e,this);sc.P.Wa(sc.e,this.list)},Ic:function(){sc.P.Hc(sc.e,this);sc.P.Hc(sc.e,this.list)},
Yd:function(){this.Oc();sc.e.Z.hh(this.Ha);sc.e.rl(this.ej.bind(this));sc.e.gk(0,0,sc.Si.Aw);this.list.show();ig.La.Md(0.2);this.fn()},pl:function(){this.Ic();sc.e.gk(0,0,sc.Si.Uh);this.Gd()},Gd:function(){sc.e.Z.Te(this.Hb);sc.e.Z.sl(this.Ha);this.list.hide();this.kb=q},$l:function(){var a=-1;sc.ba.bw()?a=1:sc.ba.aw()&&(a=0);this.list.TNa(a)},gn:function(){return sc.ba.Hs()},Qn:function(){sc.e.Mu();this.ck();ig.X.vd(this.kb);this.kb.Dt()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.stats.title"),
ig.lang.get("sc.gui.menu.help-texts.stats.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},ej:function(){sc.e.Dk();sc.e.ez()},Ab:J()})});ig.J=h;
ig.N("game.feature.menu.gui.trophy.trophy-misc").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.stats.stats-misc","game.feature.interact.button-group").K(function(){function a(a){for(var b=ig.dh+"",b=ig.Xn[ig.dh]&&ig.Xn[ig.dh].Jba?".":",",f=/(\d+)(\d{3})/,a=a+"";f.test(a);)a=a.replace(f,"$1"+b+"$2");return a}sc.B$=ig.da.extend({R:{DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR}},total:q,En:q,wU:q,f:function(){this.parent();this.F(132,40);this.l(-134,0);this.H(ig.k.ra,ig.k.Cb);var a=2;this.total=new sc.B$.Tz(ig.lang.get("sc.gui.menu.trophies.totalTrophies"),"99");this.total.H(ig.k.hb,ig.k.Cb);this.total.l(1,a);this.m(this.total);a=a+8;this.En=new sc.B$.Tz(ig.lang.get("sc.gui.menu.trophies.category"),"99");this.En.H(ig.k.hb,ig.k.Cb);this.En.l(1,a);this.m(this.En);a=a+8;this.wU=new sc.B$.Tz(ig.lang.get("sc.gui.menu.trophies.section"),
"99");this.wU.H(ig.k.hb,ig.k.Cb);this.wU.l(1,a);this.m(this.wU);this.Hia()},Hia:function(a,b){var f=sc.Ke.zFa(a,b),i=sc.Ke.zFa(a),j=sc.Ke.zFa();this.total.ip(j.count+" / "+j.total);this.En.ip(i.count+" / "+i.total);this.wU.ip(f.count+" / "+f.total)},Da:function(a){a.nc("#7E7E7E",0,this.a.size.y-1,132,1)}});sc.B$.Tz=ig.da.extend({s:new ig.ia("media/gui/menu.png"),text:q,value:q,f:function(a,b){this.parent();this.F(130,8);this.H(ig.k.hb,ig.k.Cb);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,
189,16,1,ig.nf.Eg.Yn);this.text=new sc.ea(a,{font:sc.Ea.Ib});this.m(this.text);this.value=new sc.ea(b,{font:sc.Ea.Ib});this.value.H(ig.k.ra,ig.k.$);this.m(this.value)},ip:function(a){this.value.ga(a)},Da:function(a){var b=this.text.a.size.x+this.text.a.g.x+1,f=this.a.size.x-this.text.a.size.x-this.value.a.size.x-1,f=Math.floor(f/4)*4;a.Qk(this.constructor.oj,b,5,0,0,f,1)}});sc.Ipb=sc.Bl.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,
offsetX:220},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,oc:q,f:function(){this.parent(sc.rg.$ia);this.H(ig.k.hb,ig.k.Cb);this.F(200,23);this.l(66,28);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,184,16,4,ig.nf.Eg.Yn);this.text=new sc.ea(ig.lang.get("sc.gui.menu.trophies.points"));this.text.H(ig.k.hb,ig.k.vb);this.text.l(5,0);this.m(this.text);this.oc=new sc.ea(a(0));this.oc.H(ig.k.ra,ig.k.vb);this.oc.l(5,0);this.m(this.oc);this.we={content:{title:"sc.gui.menu.help.trophy.titles.points",
description:"sc.gui.menu.help.trophy.description.points"},offset:{x:0,y:0},size:{x:"dyn",y:"dyn"},index:{x:0,y:0}};this.j("HIDDEN",h)},show:function(){this.oc.ga(a(sc.Ke.yBb()));this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},Da:function(a){this.parent(a);var b=this.text.a.size.x+this.text.a.g.x+1,f=this.a.size.x-this.text.a.size.x-this.oc.a.size.x-10,f=Math.floor(f/4)*4;a.Qk(this.constructor.oj,b,14,0,0,f,4)}});sc.zpb=sc.Bl.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-220},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,Or:q,f:function(){this.parent(sc.rg.Xva);this.H(ig.k.ra,ig.k.Cb);this.F(200,23);this.l(66,28);if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,184,16,4,ig.nf.Eg.Yn);this.text=new sc.ea(ig.lang.get("sc.gui.menu.trophies.completion"));this.text.H(ig.k.hb,ig.k.vb);this.text.l(5,0);this.m(this.text);this.Or=new sc.V1(q,{size:sc.Ff.hv,leadingZeros:1,scramble:y});this.Or.H(ig.k.ra,ig.k.vb);
this.Or.l(5,1);this.m(this.Or);this.we={content:{title:"sc.gui.menu.help.trophy.titles.rate",description:"sc.gui.menu.help.trophy.description.rate"},offset:{x:0,y:0},size:{x:"dyn",y:"dyn"},index:{x:1,y:0}};this.j("HIDDEN",h)},show:function(){var a=sc.Ke.AFa(h);this.Or.za(a,h);if(a>=1){this.text.ga("\\c["+ig.lang.get("sc.gui.menu.trophies.completion")+"\\c[0]");this.Or.pe(sc.Od.bF)}this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},Da:function(a){this.parent(a);var b=this.text.a.size.x+this.text.a.g.x+
1,f=this.a.size.x-this.text.a.size.x-this.Or.a.size.x-10,f=Math.floor(f/4)*4;a.Qk(this.constructor.oj,b,14,0,0,f,4)}});sc.Hpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Ha:q,index:-1,En:q,Gb:q,Aa:y,ot:-1,BKa:-1,xa:[],Ita:{},SNa:q,Pua:q,f:function(a,b,f){this.parent();this.H(ig.k.ra,ig.k.$);this.l(2,45);this.En=a||q;this.index=b||0;this.Gb=f||q;this.Ha=new sc.wh;this.Ha.Ql(function(a){a.data.index!=this.ot&&this.Gb&&this.Gb(this.En,
this.index,a)}.bind(this));this.Kd=new sc.$E;this.m(this.Kd);var b=sc.$Ta[a],f=3,i=0,j;for(j in b){this.Sd(a,b[j],1,f,i);i++;f=f+25}this.ot=0;this.Jta(this.ot);this.F(132,f+1);this.Kd.l(0,1);this.Kd.F(this.a.size.x,f-1);this.SNa=new sc.ea("\\i[list-up]");this.SNa.l(1,-16);this.m(this.SNa);this.Pua=new sc.ea("\\i[list-down]");this.Pua.H(ig.k.ra,ig.k.$);this.Pua.l(0,-16);this.m(this.Pua);a=new sc.ea(ig.lang.get("sc.gui.menu.trophies.sectionText"),{font:sc.Ea.he});a.H(ig.k.Ia,ig.k.$);a.l(0,-14);this.m(a);
this.j("HIDDEN",h)},Pf:function(){if(!this.Aa){this.Aa=h;sc.e.Z.KQ(this.Ha);this.Jta(this.ot);this.j("DEFAULT",h);var a=sc.$Ta[this.En],b=sc.Ke.Ke,f=sc.e.px[sc.Fc.WL]||[],i;for(i in b){var j=b[i];if(j.track&&j.category==this.En)for(var k in a)a[k]==j.section&&f.indexOf(i)!=-1&&this.Ita[k].Ud.Pf()}}},ui:function(){if(this.Aa){this.Aa=y;for(var a in this.Ita)this.Ita[a].Ud.ui();sc.e.Z.lU(this.Ha);this.j("HIDDEN",h)}},Jta:function(a,b){for(var f=0;f<this.xa.length;f++)(b||f!=a)&&this.xa[f].ff(y);this.BKa=
this.ot;this.ot=a;a>=0&&this.xa[this.ot].ff(h)},Ezb:function(){return this.ot<0?0:this.xa[this.ot].data.wU},$Ab:function(){return this.BKa<0?0:this.xa[this.BKa].data.wU},Da:function(a){a.nc("#7E7E7E",0,0,132,1);a.nc("#7E7E7E",0,-16,132,1);a.nc("#7E7E7E",0,this.a.size.y-1,132,1)},Sd:function(a,b,f,i,j){var k=new sc.mc(ig.lang.get("sc.gui.menu.trophies.sections."+a+"."+b),130,h,sc.Mc.qja,q,h);k.xYa=h;k.setData({wU:b,En:a,index:j});k.l(f,i);a=new sc.T9;a.l(4,4);a.ui();k.m(a);k.Ud=a;this.m(k);this.Ha.jd(k,
0,j);this.xa[j]=k;this.Ita[b]=k}});var b=/\\c\[\d\]/g;sc.Cpb=ig.vn.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/menu.png"),gb:new ig.jc("media/gui/buttons.png",{width:28,height:10,left:8,top:15,right:8,bottom:15,Vb:{"default":{x:0,y:114},focus:{x:45,y:114},hdefault:{x:170,y:50},hfocus:{x:213,y:50}}}),Ad:q,title:q,description:q,Ju:q,Y:q,Ud:q,ccb:y,key:q,$cb:y,f:function(a,b,f,i){this.parent();this.F(295,50);
this.key=a;b=sc.Ke.uG(a);f=sc.Ke.XDb(a);this.ccb=b.steamID||y;var j=new ig.de("");!f&&b.nameCond&&j.lz(b.nameCond);var k=0;f||(k=4);var l="\\c[4]"+ig.lang.get("sc.gui.menu.trophies.questionMarks")+"\\c[4]";this.title=new sc.ea(j.evaluate()?this.O2a(b.name,k):l);this.title.l(54,1);this.m(this.title);!f&&b.descCond?j.lz(b.descCond):j.lz("");l="\\c[4]"+ig.lang.get("sc.gui.menu.trophies.questionMarksDesc")+"\\c[4]";this.description=new sc.ea(j.evaluate()?this.O2a(b.description,k):l,{font:sc.Ea.he,maxWidth:224,
linePadding:-1});this.description.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.description.l(66,18);this.m(this.description);this.Ju=new sc.Fpb(b);this.Ju.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.Ju.l(66,20);this.m(this.Ju);this.E0(i,h);this.Y=new sc.Apb(b.icon,b.stars,b.points,f);this.m(this.Y);if(sc.e.B3a(sc.Fc.WL,a)){this.Ud=new sc.T9;this.Ud.l(4,3);this.Ud.Pf();
this.m(this.Ud)}},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"focus":"default");this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"hfocus":"hdefault",1);a.na(this.s,55,18,530,208,9,10);this.ccb&&!this.$cb&&a.na(this.s,this.a.size.x-17,this.a.size.y-16,624,496,13,12).ge(0.8)},E0:function(a,b){this.$cb=a;if(sc.Ke.uG(this.key).progType!="NONE")if(a){this.Ju.show(b);this.description.j("HIDDEN",h)}else{this.Ju.hide(b);this.description.j("DEFAULT",h)}else{this.Ju.hide(h);this.description.j("DEFAULT",
h)}},kCa:function(){this.Ud&&this.Ud.ui(h,h)},O2a:function(a,d){a=ig.Ra.ic(a);d!=0&&(a=a.replace(b,""));return"\\c["+d+"]"+a+"\\c[0]"}});sc.Fpb=ig.da.extend({Ls:new ig.ia("media/gui/basic.png"),DF:q,content:q,f:function(a){this.parent("blue");this.F(222,26);this.DF=new sc.Gpb(a.triggered);this.DF.l(0,2);this.m(this.DF);this.content=new ig.da("red");this.content.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.content.F(222,10);
this.content.l(0,11);this.content.Eb(0,10);this.m(this.content);this.content.j("DEFAULT",h);this.nLb(a)},show:function(){this.j("DEFAULT",h)},hide:function(){this.j("HIDDEN",h)},nLb:function(a){this.content.rh();var b=a.stats,f=a.progType||(a.condition?"CONDITION":"VALUE");f=="VALUE"||f=="PERCENT"||f=="VALUE_HIDDEN"?this.pLb(a.triggered,f,b):f=="TIME"?this.oLb(a.triggered,f,b):this.jab(a.triggered)},jab:function(a){this.DF.wMa(a?1:0);var b=new ig.ec(this.Ls,96,!a?24:0,8,8);b.H(ig.k.Ia,ig.k.$);this.content.m(b);
b=new sc.Tb(1,{size:sc.Ff.mj,dots:h});b.H(ig.k.Ia,ig.k.$);b.l(-(b.a.size.x/2)-5,0);b.za(a?1:0);this.content.m(b);var f=new sc.Tb(1,{size:sc.Ff.mj,dots:h});f.H(ig.k.Ia,ig.k.$);f.l(f.a.size.x/2+5,0);f.za(1);this.content.m(f);if(!a){b.pe(sc.Od.wm);f.pe(sc.Od.wm)}},oLb:function(a,b,f){if(f.length==0)return this.jab(a);var f=f[0],i=(f.mapKey?sc.pa.Qf(f.key,f.mapKey):sc.pa.get(f.key))||0,b=parseFloat(ig.Ja.eh(f.value)),i=a?b:Math.min(i,b);this.DF.wMa(i/b);var j=new ig.ec(this.Ls,96,!a?24:0,8,8);j.H(ig.k.Ia,
ig.k.$);this.content.m(j);j=new sc.Dka(sc.Ff.mj,99,2);j.H(ig.k.Ia,ig.k.$);j.l(-(j.a.size.x/2)-5,0);j.DMa(i);j.Qc=f;if(i<b)j.update=function(){this.DMa((this.Qc.mapKey?sc.pa.Qf(this.Qc.key,this.Qc.mapKey):sc.pa.get(this.Qc.key))||0,h)};this.content.m(j);f=new sc.Dka(sc.Ff.mj,99,2);f.H(ig.k.Ia,ig.k.$);f.l(f.a.size.x/2+5,0);f.DMa(b);this.content.m(f);if(!a){j.pe(sc.Od.wm);f.pe(sc.Od.wm)}},pLb:function(a,b,f){for(var i=f.length,j=0,k=0;i--;)var l=f[i],m=parseFloat(ig.Ja.eh(l.value)),j=a?j+m:j+Math.max(Math.min((l.mapKey?
sc.pa.Qf(l.key,l.mapKey):sc.pa.get(l.key))||0,m),0),k=k+m;j=Math.min(j,k);this.DF.wMa(j/k);f=new ig.ec(this.Ls,96,!a?24:0,8,8);f.H(ig.k.Ia,ig.k.$);this.content.m(f);if(b=="VALUE"||b=="VALUE_HIDDEN"){f=new sc.Tb(j||1,{size:sc.Ff.mj,dots:h});f.H(ig.k.Ia,ig.k.$);f.l(-(f.a.size.x/2)-5,0);f.za(j);this.content.m(f);b=new sc.Tb(k,{size:sc.Ff.mj,dots:h,scramble:b=="VALUE_HIDDEN"&&!a});b.H(ig.k.Ia,ig.k.$);b.l(b.a.size.x/2+5,0);b.za(k);this.content.m(b);if(!a){f.pe(sc.Od.wm);b.pe(sc.Od.wm)}}else if(b=="PERCENT"){f=
new sc.V1(100,{smallPercent:h});f.H(ig.k.Ia,ig.k.$);f.za(j);f.l(-(f.a.size.x/2)-5,0);this.content.m(f);b=new sc.V1(100,{smallPercent:h});b.H(ig.k.Ia,ig.k.$);b.za(k);b.l(b.a.size.x/2+5,0);this.content.m(b);if(!a){f.pe(sc.Od.wm);b.pe(sc.Od.wm)}}}});sc.Gpb=ig.da.extend({DC:new ig.jc("media/gui/menu.png",{width:2,height:0,left:5,top:5,right:5,bottom:0,Vb:{"default":{x:48,y:416}}}),cE:0,h9a:0,I0:y,frame:5,f:function(a){this.parent();this.F(222,5);this.cE=0;this.I0=a},Da:function(a){this.frame>=1&&this.DC.nb(a,
this.a.size.x,this.a.size.y,"default");if(this.frame==5){a.nc(this.I0?"#25b000":"#156C00",4,0,this.cE,1);a.nc(this.I0?"#25b000":"#156C00",3,1,this.cE,1);a.nc(this.I0?"#25b000":"#156C00",2,2,this.cE,1);a.nc(this.I0?"#25b000":"#156C00",1,3,this.cE,1);a.nc(this.I0?"#25b000":"#156C00",0,4,this.cE,1)}else if(this.frame==0){a.nc("#4d4d4d",0,4,this.a.size.x,1);a.nc(this.I0?"#25b000":"#156C00",0,4,this.h9a,1)}},wMa:function(a){this.cE=Math.round(a*218);this.h9a=Math.round(a*222)}});sc.Apb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),
Hr:new ig.ia("media/gui/feat-icons.png"),Wga:q,Y:q,Mb:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},f:function(a,b,f,i){this.parent();this.F(43,43);this.l(8,3);a=(sc.ZTa[a]||0).index;i||(a=0);this.Y=new ig.ec(this.Hr,a%12*42,~~(a/12)*42,42,42);this.m(this.Y);this.Wga=new ig.ec(this.s,576,i?465:481,51,14);this.Wga.H(ig.k.Ia,ig.k.Cb);this.m(this.Wga);this.Mb=new sc.Tb(f,{size:sc.Ff.jF,color:sc.Od.wm});this.Mb.H(ig.k.Ia,ig.k.Cb);this.Mb.za(f);
this.Mb.l(1,0);this.Wga.m(this.Mb);this.kub(b,i)},kub:function(a,b){var f=q;switch(sc.a2[a]){case sc.a2["1"]:f=this.Rw(b);f.l(0,0);break;case sc.a2["2"]:f=this.Rw(b);f.l(-5,1);f=this.Rw(b);f.l(5,1);break;case sc.a2["3"]:f=this.Rw(b);f.l(0,0);f=this.Rw(b);f.l(-9,1);f=this.Rw(b);f.l(9,1);break;case sc.a2["4"]:f=this.Rw(b);f.l(-5,1);f=this.Rw(b);f.l(5,1);f=this.Rw(b);f.l(-14,3);f=this.Rw(b);f.l(14,3);break;case sc.a2["5"]:f=this.Rw(b);f.l(0,0);f=this.Rw(b);f.l(-8,1);f=this.Rw(b);f.l(8,1);f=this.Rw(b);
f.l(-15,4);f=this.Rw(b);f.l(15,4)}},Rw:function(a){a=new ig.ec(this.s,a?576:585,496,7,6);a.H(ig.k.Ia,ig.k.$);this.Wga.m(a);return a}})});ig.J=h;
ig.N("game.feature.menu.gui.trophy.trophy-list").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.menu.gui.tab-box","game.feature.menu.gui.trophy.trophy-misc").K(function(){sc.Bpb=sc.KV.extend({ac:q,Oba:-26,OHa:-6,MHa:6,NHa:25,vO:[],A7:{},pMb:y,Gha:y,SD:[],f:function(){this.parent(h);this.F(436,258);this.H(ig.k.Ia,ig.k.$);this.Eb(436,258);this.DU(436,216);this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},
HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.EASE}};this.zm("GENERAL",0,{type:sc.Eya.GENERAL});this.zm("COMBAT",1,{type:sc.Eya.COMBAT});this.zm("EXPLORATION",2,{type:sc.Eya.EXPLORATION})},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});this.vO[this.tg||0].Pf();ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.vO[this.tg||0].ui();
this.parent();for(var a=this.SD.length;a--;){this.SD[a].kCa();sc.e.jCa(sc.Fc.WL,this.SD[a].key)}this.SD.length=0;this.j("HIDDEN")},E0:function(){this.Gha=!this.Gha;if(this.Xm)for(var a=this.Xm.Ar(),b=a.length;b--;)a[b].X.E0&&a[b].X.E0(this.Gha)},$l:function(){this.parent();var a=-1;sc.ba.QEb()?a=1:sc.ba.REb()&&(a=0);a>=0&&this.CNb(a)},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.Zx.ORDER:sc.Zx.ORDER,b="auto";switch(a){case sc.Zx.ORDER:b="auto";break;case sc.Zx.UNLOCKED:b="featLock";
break;case sc.Zx.NAME:b="featName";break;case sc.Zx.POINTS:b="featPoints"}return ig.lang.get("sc.gui.menu.sort."+b)},DT:function(){return{skipSounds:h}},qK:function(a,b){this.ac.play();b>=0&&this.vO[b].ui();a>=0&&this.vO[a].Pf();if(this.Xm)for(var c=this.Xm.Ar(),d=c.length;d--;)c[d].X.E0&&c[d].X.E0(this.Gha)},aO:function(a,b,c){var d=new sc.Yz.kF(ig.lang.get("sc.gui.menu.trophies.tabs."+a),"trophies-"+a,105);d.re.l(7,1);d.l(0,2);d.setData({type:c.type});this.m(d);a=new sc.Hpb(a,b,this.cHb.bind(this));
this.vO[b]=a;this.m(a);return d},rK:function(a,b){if(!b){this.ac.play();this.Vr(this.jG(a));for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.NB(c);break}return y}},IT:function(){sc.e.Cc("",h)},HT:function(){sc.e.Cc("",h)},cHb:function(a,b,c){this.vO[this.tg].Jta(c.data.index,h);this.cH(this.Xm,this.Kj,c.data.En,this.wl[this.tg].sort)},CNb:function(a){this.ac.play();var b=this.vO[this.tg],c=b.xa,d=b.ot;if(a==1){d++;d>=c.length&&(d=0)}else{d--;d<0&&(d=c.length-1)}a=c[d];b.Jta(d);this.cH(this.Xm,
this.Kj,a.data.En,this.wl[this.tg].sort)},cH:function(a,b,c,d){var f=q,f=q,i=this.vO[this.tg].Ezb(),j=this.vO[this.tg].$Ab();if(!a.Xo){a.Xo=new sc.B$;a.m(a.Xo)}this.A7[c]||(this.A7[c]={});var k=this.A7[c][j];if(!k){k={y:0,scroll:0,sort:d};this.A7[c][j]=k}if(k.sort=!d){k.y=0;k.scroll=0;k.sort=d}else{k.y=b.Qa.y;k.scroll=a.qG()}a.F(300,203);a.clear();a.FK(0,h);b.clear();j=this.gwb(c,i,d);for(k=0;k<j.length;k++){f=j[k];f=new sc.Cpb(f,c,i,this.Gha);a.Sd(f)}k=this.A7[c][i];if(!k){k={y:0,scroll:0,sort:d};
this.A7[c][i]=k}ig.input.Id?b.tl(0,k.y):b.Sg(0,k.y,y,h);a.FK(k.scroll,h);a.Xo&&a.Xo.Hia(c,i);a.Xo.j(this.pMb?"DEFAULT":"HIDDEN",h)},ET:function(a){a.key&&a.Ud&&this.SD.indexOf(a)==-1&&this.SD.push(a);a.data&&(a.data instanceof Object||sc.e.Cc(a.data))},FT:function(){sc.e.Cc(q,h)},gwb:function(a,b,c){var d=[],f=sc.Ke.Ke,i;for(i in f){var j=f[i];j.track&&j.category==a&&j.section==b&&d.push(i)}this.kw(d,c);return d},kw:function(a,b){switch(b){case sc.Zx.ORDER:a.sort(function(a,b){return(sc.Ke.uG(a).order||
0)-(sc.Ke.uG(b).order||0)});break;case sc.Zx.NAME:a.sort(function(a,b){var f=ig.Ra.ic(sc.Ke.uG(a).name),i=ig.Ra.ic(sc.Ke.uG(b).name);return f.toString().localeCompare(i.toString())});break;case sc.Zx.UNLOCKED:a.sort(function(a,b){var f=sc.Ke.uG(a),i=sc.Ke.uG(b);return f.triggered==i.triggered?(f.order||0)-(i.order||0):f.triggered?-1:i.triggered?1:0});break;case sc.Zx.POINTS:a.sort(function(a,b){var f=sc.Ke.uG(a),i=sc.Ke.uG(b);return f.points==i.points?(f.order||0)-(i.order||0):(i.points||0)-(f.points||
0)})}},Ab:function(a,b,c){a==sc.e&&b==sc.fa.yp&&this.sort(c.data.vE)}})});ig.J=h;
ig.N("game.feature.menu.gui.trophy.trophy-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.trophy.trophy-list").K(function(){sc.Epb=sc.U1.extend({xS:q,kb:q,VWb:q,WWb:q,Mb:q,Fn:q,f:function(){this.parent(new sc.Bpb);if(this.list){this.list.a.g.x=0;this.list.Kd.a.g.y=this.list.Kd.a.g.y-5;this.list.Kd.a.size.x=300;this.list.Kd.a.size.y=this.list.Kd.a.size.y+5}this.Mb=new sc.Ipb;this.m(this.Mb);
this.Fn=new sc.zpb;this.m(this.Fn);this.xS=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.menu.trophies.toggleStats"),g,h,sc.Mc.$c);this.xS.dg=h;this.xS.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-this.xS.a.size.y},time:0.2,p:KEY_SPLINES.LINEAR}};this.xS.cc=this.iHb.bind(this);this.yc.Sd("auto",sc.Zx.ORDER,0);this.yc.Sd("featLock",sc.Zx.UNLOCKED,1);this.yc.Sd("featName",sc.Zx.NAME,2);this.yc.Sd("featPoints",sc.Zx.POINTS,3);this.j("DEFAULT")},Yd:function(){this.parent();
sc.Ke.N8();this.list&&this.rn(this.list.pm());this.Mb.show();this.Fn.show()},Gd:function(){sc.e.Z.Te(this.xS);this.parent();this.Mb.hide();this.Fn.hide();sc.e.gk(0,0,sc.Si.Uh)},fn:function(a){sc.e.Z.Jd(this.Hb,this.gn.bind(this));sc.e.Z.Jd(this.$d,this.eH.bind(this));sc.e.Z.Jd(this.xS,this.pGb.bind(this));this.xh(a)},xh:function(a){sc.e.bk(M("xS").bind(this));sc.e.bk(M("$d").bind(this));sc.e.bk(M("Hb").bind(this));sc.e.Qw(a)},pGb:function(){return sc.ba.ND()},iHb:function(){this.list&&this.list.E0()},
ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.feat.title"),ig.lang.get("sc.gui.menu.help-texts.feat.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.yc.Aa&&this.yc.xk();this.rn(this.list.pm())}}})});ig.J=h;
ig.N("game.feature.menu.gui.social.social-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.social.social-misc").K(function(){sc.Znb=sc.KV.extend({ac:q,aB:q,dG:q,f:function(){this.parent(h);this.F(264,262);this.H(ig.k.ra,ig.k.$);this.Eb(264,262);this.DU(264,243);this.aB=this.ac=sc.gd.submit;this.dG=sc.gd.Dv;this.a.R={DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_EASE:{state:{alpha:0,offsetX:-132},time:0.2,p:KEY_SPLINES.EASE}};var a=new sc.ea(ig.lang.get("sc.gui.status-hud.lvl"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(9,-8);this.Kd.m(a);a=new sc.ea(ig.lang.get("sc.gui.menu.social.status"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(37,-8);this.Kd.m(a);this.zm("close",0,{type:sc.KL.FRIEND});this.zm("contacts",1,{type:sc.KL.CONTACT})},Oc:function(){sc.P.Wa(sc.e,
this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},QOa:function(){for(var a=this.Xm.Ar(),b=a.length;b--;)a[b].X.AOb()},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.cF.STATUS:sc.cF.STATUS,b="auto";switch(a){case sc.cF.STATUS:b="status";break;case sc.cF.NAME:b="name";break;case sc.cF.LEVEL:b="socialLevel"}return ig.lang.get("sc.gui.menu.sort."+
b)},DT:function(){this.ac.play();return{skipSounds:h}},qK:function(a){sc.e.NB(a);(ig.input.Id||this.Kj.tt())&&sc.e.Yg(q,h)},aO:function(a,b,c){a=new sc.Yz.kF(ig.lang.get("sc.gui.menu.social.tabs."+a),"social-"+a,85);a.re.l(7,1);a.l(0,2);a.setData({type:c.type});this.m(a);return a},rK:function(a,b){if(!b){this.ac.play();this.Vr(this.jG(a));for(var c=this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.NB(c);break}sc.e.Yg(q,h);return y}},IT:function(){ig.input.Id&&sc.e.Yg(q,h)},HT:function(){sc.e.TH&&sc.e.Yg(q,
h)},HAb:function(a,b){var c=[],d=sc.sa.Gn,f;for(f in d){var i=d[f];i&&i.status==a&&c.push(f)}b!=g&&this.kw(c,b);return c},kw:function(a,b){switch(b){case sc.cF.STATUS:a.sort(function(a,b){var f=sc.sa,i=f.DN(a),j=f.DN(b);if(f.sqa(a)&&f.sqa(b)){if(i==j)return sc.sa.$k[a].kG().localeCompare(sc.sa.$k[b].kG());if(i)return-1}i=f.Gn[a];j=f.Gn[b];return i.bz&&j.bz?0:i.bz?-1:j.bz?1:i.status==j.status?f.$k[a].kG().localeCompare(f.$k[b].kG()):j.status-i.status}.bind(this));break;case sc.cF.NAME:a.sort(function(a,
b){var f=sc.sa.$k[a].kG(),i=sc.sa.$k[b].kG();return f.localeCompare(i)}.bind(this));break;case sc.cF.LEVEL:a.sort(function(a,b){var f=sc.sa.$k[a],i=sc.sa.$k[b];return f.aa==i.aa?sc.sa.$k[a].kG().localeCompare(sc.sa.$k[b].kG()):i.aa-f.aa}.bind(this))}},cH:function(a,b,c,d){var f=q,f=q,c=this.HAb(c,d);a.clear();b.clear();for(b=0;b<c.length;b++){f=c[b];f=new sc.Vnb(f,sc.sa.gS(f));a.Sd(f)}},ET:function(a){if(a.key){sc.sa.sqa(a.key)?sc.e.Yg(a.key):sc.e.Yg(q);sc.e.Cc(q,h)}else{sc.e.Yg(a.key);a.data&&(a.data instanceof
Object||sc.e.Cc(a.data))}},Lfa:function(a){this.ac.play();sc.e.KLb(a)},FT:function(){sc.e.Yg(q,h);sc.e.Cc(q,h)},Ab:function(a,b,c){if(a==sc.e&&b==sc.fa.yp){this.sort(c.data.vE);sc.e.Yg(q,h);sc.e.Cc(q,h)}}})});ig.J=h;
ig.N("game.feature.menu.gui.social.social-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.social.social-list","game.feature.menu.gui.social.social-misc").K(function(){sc.$nb=sc.U1.extend({sa:q,options:q,iH:q,wQ:q,f:function(){this.parent(new sc.Znb,new sc.Ynb);this.info.a.g.y=164;this.sa=new sc.aob;this.m(this.sa);this.yc.Sd("status",sc.cF.STATUS,0);this.yc.Sd("name",sc.cF.NAME,1);this.yc.Sd("socialLevel",sc.cF.LEVEL,2);
this.options=new sc.hW(this.M7a.bind(this),this.Yra.bind(this),126);this.options.H(ig.k.hb,ig.k.$);this.options.Eb(this.options.a.size.x/2,0);this.options.Sd("invite",0,0);this.options.Sd("contact",1,1);this.iH=new sc.hW(this.M7a.bind(this),this.Yra.bind(this),126);this.iH.H(ig.k.hb,ig.k.$);this.iH.Eb(this.iH.a.size.x/2,0);this.iH.Sd("contact",1,0);this.j("DEFAULT")},Yd:function(){sc.e.Yg(q,y);this.parent();sc.e.gk(0,0,sc.Si.Aw);this.sa.show();this.rn(this.list.pm())},Gd:function(){this.parent();
this.options.Aa&&this.options.xk();this.iH.Aa&&this.iH.xk();this.sa.hide();sc.e.gk(0,0,sc.Si.Uh)},j8a:function(a,b){this.$d.setActive(y);var c=b?this.iH:this.options;ig.X.vd(c);var d=a.a.Yf,f=d.x,i=d.y+d.sd-2,j=c.a;if(i+j.size.y>ig.i.height-26){i=d.y-j.size.y+1;c.Eb(j.size.x/2,j.size.y)}else c.Eb(j.size.x/2,0);var d=a.key,k=j=h;sc.q.T.ki(sc.ng.MENU_SOCIAL_INVITE)||(j=k=y);if(!sc.sa.LDb(d))k=j=y;if(b)c.xa[0].setActive(k);else{if(sc.sa.KDb(d)){c.Mta(0,"locked");j=y}else if(sc.sa.DN(d))c.Mta(0,"remove");
else if(sc.sa.He.length>=sc.mSa){c.Mta(0,"inviteFull");j=y}else c.Mta(0,"invite");c.xa[0].setActive(j);c.xa[1]&&c.xa[1].setActive(k)}a.sHa();this.wQ=a;c.gbb(f,i)},lwb:function(a){sc.Ep.Ws("SOCIAL_ACTION",{member:a,actionType:sc.o$.CONTACT})},hDb:function(a){sc.Ep.Ws("SOCIAL_ACTION",{member:a,actionType:sc.o$.PARTY_JOIN}).J2(this)},aJb:function(a){sc.Ep.Ws("SOCIAL_ACTION",{member:a,actionType:sc.o$.PARTY_LEAVE}).J2(this)},v7a:function(){this.sa.QOa();this.list.QOa()},M7a:function(a){var b=this.wQ;
if(this.wQ){this.wQ.ova();this.wQ=q}this.options.xk();this.iH.xk();switch(a.data.vE){case 0:sc.sa.DN(b.key)?this.aJb(b.key):this.hDb(b.key);break;case 1:this.lwb(b.key)}ig.La.Md(0.2);this.Yra()},Yra:function(){if(this.wQ){this.wQ.ova();this.wQ=q}this.$d.setActive(h);if(ig.input.Id){sc.e.Z.eg=q;sc.e.TH=q;this.info.IB(q)}},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.social.title"),ig.lang.get("sc.gui.menu.help-texts.social.pages"),function(){this.xh(h)}.bind(this),
h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.options.xk();this.iH.xk();this.Yra();this.list.tg==0?this.info.show():this.info.hide();this.rn(this.list.pm())}else b==sc.fa.S1?(!this.options.Aa||!this.iH.Aa)&&this.info.IB(sc.e.TH):b==sc.fa.vTa&&(sc.sa.sqa(c.key)?this.j8a(c):this.j8a(c,h))}})});ig.J=h;
ig.N("game.feature.trade.gui.trade-dialog").O("game.feature.trade.trade-model","impact.base.image","impact.feature.gui.base.basic-gui","impact.feature.gui.gui","game.feature.menu.gui.menu-misc").K(function(){sc.fUa=sc.IP.extend({Rda:new ig.ia("media/gui/menu.png"),nU:q,zc:q,BX:q,q5a:y,required:0,f:function(a,b,c,d,f,i,j){this.parent(a,142,56,b,c);this.fo=q;this.button.ac=q;this.q5a=i||y;this.required=f||0;this.BX=new ig.ec(this.Rda,136,432,5,5);this.BX.H(ig.k.ra,ig.k.$);this.BX.l(48,9);this.m(this.BX);
this.nU=new sc.Tb(99);this.nU.za(this.required);this.nU.H(ig.k.ra,ig.k.$);this.nU.l(30,7);this.m(this.nU);a=new ig.ec(this.Rda,136,416,3,9);a.H(ig.k.ra,ig.k.$);a.l(22,6);this.m(a);a=new ig.ec(this.Rda,139,416,3,9);a.H(ig.k.ra,ig.k.$);a.l(1,6);this.m(a);this.zc=new sc.Tb(99);this.zc.H(ig.k.ra,ig.k.$);this.zc.l(5,7);this.m(this.zc);this.heb(d,f);this.GH(j)},heb:function(a){this.zc.za(a||0);if(this.q5a){if(a>=99){this.BX.offsetY=440;this.nU.pe(sc.Od.Nl)}}else if(a>=this.required){this.BX.offsetY=432;
this.nU.pe(sc.Od.$n)}else{this.BX.offsetY=440;this.nU.pe(sc.Od.Nl);this.setActive(y)}}});sc.Nka=ig.da.extend({s:new ig.ia("media/gui/menu.png"),IR:q,f:function(a,b,c,d,f){this.parent();this.a.size.x=d;this.ih(a,b,c,f)},Da:function(a){var b=this.a.size;a.nc("#000",0,0,b.x,b.y);a.nc(this.IR||"#7E7E7E",0,0,b.x,1);a.nc(this.IR||"#7E7E7E",0,b.y-1,b.x,1)},ih:function(a,b,c,d){this.rh();var f=2,i=0,j=0,k=0,l=i=q,m=q,n=q,o=sc.yb,t=sc.q.T;if(a)for(var p=0;p<a.length;p++){k=a[p].id;if(k!=g){l=o.getItem(k);
i=a[p].amount||0;j=t.OJ(k);new ig.Ra(l.name);var m="\\i["+(l.icon+sc.yb.Er(l.rarity||0)||"item-default")+"]"+ig.Ra.ic(l.name),n=ig.Ra.ic(l.description),r=0;l.type==sc.kh.EQUIP&&(r=l.level||1);i=new sc.fUa(m,k,n,j,i,d,r);i.l(1,f);if(this.rWa(k,l.equipType,t)){j=new ig.ec(this.s,112,480,19,18);i.m(j);i.SDa=j;if(!d&&t.Dr(k)<=0){sc.Fb.JY=h;sc.Fb.L$a(k,l.equipType)}}b&&b.jd(i,0,c);c=c+1;f=f+(i.a.size.y+0);this.m(i)}}else f=20;this.a.size.y=f+1;return f+1},yva:function(a){for(var b=this.a.children,c=b.length,
d=q,f=sc.q.T,i=sc.yb,j=-1;c--;){d=b[c].X;if(d.data&&d.data.id!=g){j=d.data.id;d.heb(f.OJ(j));if(this.rWa(j,i.getItem(j).equipType,f)){if(!a&&f.Dr(j)<=0){sc.Fb.JY=h;sc.Fb.L$a(j,i.getItem(j).equipType)}}else if(d.SDa){d.yH(d.SDa);d.SDa=q}}}},rWa:function(a,b,c){if(!b)return y;switch(b){case sc.Ng.HEAD:return a==c.sb.head;case sc.Ng.ARM:return a==c.sb.Bh||a==c.sb.Fh;case sc.Ng.TORSO:return a==c.sb.uh;case sc.Ng.FEET:return a==c.sb.ph}}});sc.gUa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},content:q,hg:0,df:q,hY:q,Qa:q,IR:q,f:function(a,b,c,d){this.parent();this.F(223,26+(d?11:0));this.hg=0;if(c!=g){if(c==0){this.j("HIDDEN",h);return}this.hg=c||1}else if(a){for(c=a.length;c--;)this.hg=this.hg+sc.yb.getItem(a[c].id).cost*(a[c].amount||1);this.hg=Math.floor((this.hg||1)*(b||1))}a=0;d&&(a=11);this.content=new ig.da;this.content.H(ig.k.Ia,ig.k.$);this.content.F(142,26+a);this.m(this.content);b=new sc.ea(ig.lang.get("sc.gui.trade.fee"),
{font:sc.Ea.Ib});b.l(0,4+a);this.content.m(b);b=new sc.ea(ig.lang.get("sc.gui.trade.rest"),{font:sc.Ea.Ib});b.l(0,15+a);this.content.m(b);if(d){b=new sc.ea(ig.lang.get("sc.gui.trade.credits"),{font:sc.Ea.Ib});b.l(0,4);this.content.m(b)}this.df=new sc.Tb(99999999,{signed:h,transitionTime:0.2});this.df.H(ig.k.ra,ig.k.$);this.df.za(sc.q.T.df-this.hg,h);sc.q.T.df-this.hg<0&&this.df.pe(sc.Od.Nl);this.df.l(14,15+a);this.content.m(this.df);this.hY=new sc.Tb(99999999,{signed:h,transitionTime:0.2});this.hY.H(ig.k.ra,
ig.k.$);this.hY.za(-this.hg,h);this.hY.pe(sc.Od.Nl);this.hY.l(14,4+a);this.content.m(this.hY);if(d){this.Qa=new sc.Tb(99999999,{signed:h,transitionTime:0.2});this.Qa.H(ig.k.ra,ig.k.$);this.Qa.za(sc.q.T.df,h);this.Qa.l(14,4);this.content.m(this.Qa)}b=new ig.ec(this.s,488,32,12,10);b.H(ig.k.ra,ig.k.$);b.l(0,3+a);b=new ig.ec(this.s,488,32,12,10);b.H(ig.k.ra,ig.k.$);b.l(0,14+a);this.content.m(b);if(d){b=new ig.ec(this.s,488,32,12,10);b.H(ig.k.ra,ig.k.$);b.l(0,3);this.content.m(b)}},ih:function(a,b,c,
d){this.hg=0;if(c!=g){if(c==0){this.j("HIDDEN",h);return}this.hg=c||1}else{for(c=a.length;c--;)this.hg=this.hg+sc.yb.getItem(a[c].id).cost*(a[c].amount||1);this.hg=(this.hg||1)*(b||1)}this.Qi();this.a.g.y=d;this.Qa&&this.Qa.za(sc.q.T.df||0,h);this.j("DEFAULT",h)},Qi:function(){this.df.za(sc.q.T.df-this.hg);sc.q.T.df-this.hg<0?this.df.pe(sc.Od.Nl):this.df.pe(sc.Od.$n);this.hY.za(-this.hg)},Da:function(a){var b=this.a.size;a.nc("#000",0,0,b.x,b.y);a.nc(this.IR||"#7E7E7E",0,0,b.x,1);a.nc(this.IR||"#7E7E7E",
0,b.y-1,b.x,1)}});sc.qpb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-10},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:432,y:280}}}),Ha:q,Xu:q,vY:q,mU:q,hg:q,Ee:q,WR:q,tK:q,f:function(){this.parent(227,100);this.H(ig.k.ra,ig.k.$);this.l(8,53);this.a.nd=0.9;this.Ha=new sc.wh(y,ig.tw.dQ);this.Ha.Rk(this.Ofa.bind(this));this.Ha.jn(function(){var a=sc.Fb.P4().get[0];
if(sc.yb.A5(a.id)){sc.Fb.lE(a.id);sc.Fb.Rj("",y);sc.Fb.Cc("",h)}else{sc.Fb.Cc("",h);sc.Fb.Rj("",h);sc.Fb.lE(-1,h)}}.bind(this));this.j("HIDDEN",h)},Da:function(a){this.parent(a)},Ofa:function(a){var b=y;if(a.data){if(a.data.id){if(sc.yb.tea(a.data.id)){sc.Fb.lE(-1);sc.Fb.Rj(sc.yb.M4(a.data.id),y,a.data.id)}else if(sc.yb.A5(a.data.id)){sc.Fb.lE(a.data.id);b=h}else{sc.Fb.lE(-1);sc.Fb.Rj("",y)}if(!b){var c=sc.Fb.P4().get[0];if(sc.yb.A5(c.id)){sc.Fb.lE(c.id);sc.Fb.Rj("",y)}}}else{sc.Fb.lE(-1);sc.Fb.Rj("",
y)}if(a.data.description){if(a.data.key=="trade"&&!b){c=sc.Fb.P4().get[0];if(sc.yb.A5(c.id)){sc.Fb.lE(c.id);sc.Fb.Rj("",y)}}sc.Fb.Cc(a.data.description)}}},Yd:function(){sc.P.Hc(sc.Fb,this);sc.P.Wa(sc.Fb,this);this.mF();sc.Fb.Z.hh(this.Ha);sc.Fb.Z.Jd(this.Xu,this.Dsb.bind(this));this.Ee.j("DEFAULT",y,y,q,0.1);this.j("DEFAULT")},pl:function(){sc.P.Hc(sc.Fb,this);sc.Fb.Z.sl(this.Ha);this.j("HIDDEN")},Xna:function(){if(sc.Fb.pba())if(sc.Fb.JY){sc.gd.submit.play();sc.aq.Dx(ig.lang.get("sc.gui.trade.equipInfo"),
sc.dv.WARNING,function(a){if(a.data==0){sc.gd.Fha.play();sc.Fb.fOb();sc.Fb.Xna(this.hg.hg);this.mU.yva();this.vY.yva(h);this.hg.Qi();sc.Fb.pba()||this.Xu.setActive(y)}else sc.gd.back.play()}.bind(this),h)}else{sc.gd.Fha.play();sc.Fb.Xna(this.hg.hg);sc.Fb.HZa();this.mU.yva();this.vY.yva(h);this.hg.Qi();sc.Fb.pba()||this.Xu.setActive(y)}else ig.error("Wat.")},Ab:function(a,b){a==sc.Fb&&b==sc.dt.cSa&&this.Zsb()},Dsb:function(){return sc.ba.ND()},Zsb:function(){sc.Fb.HZa();this.Ha.clear();var a=sc.Fb.P4();
this.Ha.jd(this.Xu,0,0);var b=1,c,d=a.get;c=17+(this.vY.ih(d,this.Ha,b,h)+10);this.Ee.l(6,44+(d.length-1)*20);this.WR.l(32,c-7);this.tK.l(4,c-7);b=b+d.length;d=a.require;this.mU.l(25,c);c=c+(this.mU.ih(d,this.Ha,b)+5);this.hg.ih(a.get,a.scale,a.cost,c);sc.Fb.pba()?this.Xu.setActive(h):this.Xu.setActive(y);ig.input.Id?this.Ha.tl(0,0):this.Ha.Sg(0,0,y,h);this.F(227,216);a=sc.Fb.P4().get[0];if(sc.yb.A5(a.id)){sc.Fb.lE(a.id);sc.Fb.Rj("",y)}this.Ee.j("HIDDEN",h);this.Ee.j("DEFAULT")},mF:function(){var a=
10,b=new sc.ea(ig.lang.get("sc.gui.trade.trade"),{font:sc.Ea.Ib});b.l(8,a);this.m(b);b=new sc.ea(ig.lang.get("sc.gui.trade.owned"),{font:sc.Ea.Ib});b.H(ig.k.ra,ig.k.$);b.l(26,a);this.m(b);var a=a+7,b=sc.Fb.options[0],c=b.get,d=1;this.vY=new sc.Nka(c,this.Ha,d,200,h);this.vY.l(2,a);this.m(this.vY);d=d+c.length;a=a+(this.vY.a.size.y+3);this.WR=new sc.ea(ig.lang.get("sc.gui.trade.for"),{font:sc.Ea.Ib});this.WR.l(32,a);this.m(this.WR);this.tK=new sc.ea(ig.lang.get("sc.gui.trade.owned"),{font:sc.Ea.Ib});
this.tK.H(ig.k.ra,ig.k.$);this.tK.l(4,a);this.m(this.tK);a=a+7;c=b.require;this.mU=new sc.Nka(c,this.Ha,d,200);this.mU.l(25,a);this.m(this.mU);this.Ee=new ig.ec(this.gb.s,432,256,16,17);this.Ee.l(6,44+(b.get.length-1)*20);this.Ee.Eb(16,17);this.Ee.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{Xa:0.2,Va:0.5,offsetY:5},time:0.2,p:KEY_SPLINES.LINEAR}};this.Ee.j("HIDDEN",h);this.m(this.Ee);a=a+(this.mU.a.size.y+5);this.hg=new sc.gUa(b.get,b.scale||1,b.cost);this.hg.l(2,a);this.m(this.hg);
this.Xu=new sc.mc("\\i[help2]"+ig.lang.get("sc.gui.trade.trade"));this.Xu.setData({key:"trade",description:ig.lang.get("sc.gui.trade.description")});this.Xu.dg=h;this.Xu.H(ig.k.Ia,ig.k.Cb);this.Xu.l(0,5);this.Xu.ac=q;this.Xu.cc=function(){this.Xna()}.bind(this);this.m(this.Xu);this.Ha.jd(this.Xu,0,0);sc.Fb.pba()||this.Xu.setActive(y);a=a+(this.Xu.a.size.y+5);this.F(227,216)}});sc.wpb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{offsetY:-48},time:0.2,p:KEY_SPLINES.LINEAR}},
Efa:q,pt:q,qr:q,bJa:q,f:function(){this.parent();this.F(151,21);this.H(ig.k.ra,ig.k.$);this.l(44,27);this.a.nd=0.8;this.bJa=ig.lang.get("sc.gui.trade.offer");this.Efa=new sc.ea("");this.Efa.H(ig.k.Ia,ig.k.vb);this.m(this.Efa);this.pt=new sc.mc("\\i[arrow-left]",34,h,sc.Mc.$c);this.pt.dg=h;this.pt.l(-27,0);this.pt.cc=function(){this.oVa(-1)}.bind(this);this.m(this.pt);this.qr=new sc.mc("\\i[arrow-right]",34,h,sc.Mc.$c);this.qr.dg=h;this.qr.H(ig.k.ra,ig.k.$);this.qr.l(-27,0);this.qr.cc=function(){this.oVa(1)}.bind(this);
this.m(this.qr);this.j("HIDDEN",h)},Da:function(a){a.nc("#000",0,0,this.a.size.x,this.a.size.y)},Yd:function(){if(!(sc.Fb.options.length<2)){sc.Fb.Z.Jd(this.pt,this.QZ.bind(this));sc.Fb.Z.Jd(this.qr,this.SZ.bind(this));this.Efa.ga(this.bJa+" "+(sc.Fb.$U+1)+" / "+sc.Fb.options.length);this.j("DEFAULT")}},pl:function(){sc.Fb.options.length<2||this.j("HIDDEN")},oVa:function(a){var b=sc.Fb.$U+a;a<0?b<0&&(b=sc.Fb.options.length-1):a>0&&b>=sc.Fb.options.length&&(b=0);sc.Fb.mKb(b);this.Efa.ga(this.bJa+" "+
(sc.Fb.$U+1)+" / "+sc.Fb.options.length)},QZ:function(){return sc.ba.aw()},SZ:function(){return sc.ba.bw()}})});ig.J=h;
ig.N("game.feature.menu.gui.trade.trade-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.trade.gui.trade-dialog","game.feature.npc.gui.npc-display-gui").K(function(){sc.opb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},Fz:q,Ha:q,IBa:0,xa:[],Ad:q,uOa:q,location:q,f:function(a,b,c){this.parent();this.F(431,46);this.Fz=a;this.Ha=b;this.IBa=c||0;b=sc.Fb.CY(a);
a=sc.Fb.epa(a);this.Ad=new sc.eUa;this.Ad.l(2,1);this.Ad.IB(a.characterName);this.m(this.Ad);this.uOa=new sc.ea(ig.Ra.ic(b.name));this.uOa.l(36,1);this.m(this.uOa);b=new ig.ec(this.s,481,224,8,11);b.l(37,20);this.m(b);this.location=new sc.ea((a.area||"???")+" - "+(a.map||"???"),{font:sc.Ea.he});this.location.l(50,19);this.m(this.location)}});sc.rpb=sc.fUa.extend({xT:0,Fz:q,f:function(a,b,c,d,f,i,j,k){this.parent(a,d,f,i,j,h,k);this.xT=c||0;this.Fz=b||q}});sc.eUa=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",
{width:2,height:2,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:488,y:16},square:{x:500,y:0},none:{x:400,y:0}}}),display:q,fc:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},f:function(){this.parent(31,42);this.fc=new ig.da;this.fc.a.clip=h;this.fc.F(31,42);this.fc.l(1,1);this.m(this.fc)},IB:function(a,b){if(a){if(this.display){this.display.remove(h);this.display=q}if(a){this.display=new sc.aka(a,h,q,this.tba.bind(this));this.fc.m(this.display);
this.j("DEFAULT",h)}}else{if(this.display){b?this.display.remove(h):this.display.j("HIDDEN",y,h);this.display=q}this.j("HIDDEN",h)}},tba:function(a){a.cj&&a.l(this.fc.a.size.x/2-a.a.size.x/2-1,this.fc.a.size.y/2-a.a.size.y/2)}});sc.ppb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_SCALE:{state:{alpha:0,Va:0.5},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN_MOVE:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",
{width:10,height:11,left:34,top:44,right:5,bottom:3,Vb:{"default":{x:592,y:160}}}),tc:q,fc:q,Gc:q,Ad:q,name:q,location:q,mBa:q,Ee:q,mda:q,q7:q,mx:q,Kla:q,f:function(){this.parent();this.F(228,220);this.l(66,67);this.Eb(0,110);this.we=[];this.we[0]={content:{title:"sc.gui.menu.help.trader.titles.info",description:"sc.gui.menu.help.trader.description.info"},offset:{x:1,y:1},size:{x:227,y:45},index:{x:0,y:0}};this.we[1]={content:{title:"sc.gui.menu.help.trader.titles.content",description:"sc.gui.menu.help.trader.description.content"},
offset:{x:1,y:52},size:{x:227,y:118},index:{x:0,y:1}};this.we[2]={content:{title:"sc.gui.menu.help.trader.titles.money",description:"sc.gui.menu.help.trader.description.money"},offset:{x:1,y:180},size:{x:227,y:39},index:{x:0,y:2}};this.Ad=new sc.eUa;this.Ad.ii="square";this.Ad.l(3,2);this.m(this.Ad);this.mBa=new ig.ec(this.gb.s,576,184,9,15);this.mBa.l(229,0);this.name=new sc.ea("");this.name.l(37,2);this.m(this.name);var a=new ig.ec(this.gb.s,481,224,8,11);a.l(38,21);this.m(a);this.location=new sc.ea("",
{font:sc.Ea.he});this.location.l(51,20);this.m(this.location);this.fc=new ig.da;this.fc.l(2,44);this.fc.F(225,174);this.m(this.fc);a=new ig.mf("#7e7e7e",224,1);this.fc.m(a);a=new sc.ea(ig.lang.get("sc.gui.trade.trade"),{font:sc.Ea.Ib});a.l(8,2);this.fc.m(a);a=new sc.ea(ig.lang.get("sc.gui.trade.owned"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(25,2);this.fc.m(a);this.mda=new sc.Nka(q,q,q,200);this.mda.IR="#7e7e7e";this.mda.l(1,9);this.fc.m(this.mda);this.WR=new sc.ea(ig.lang.get("sc.gui.trade.for"),
{font:sc.Ea.Ib});this.WR.l(32,9);this.fc.m(this.WR);this.tK=new sc.ea(ig.lang.get("sc.gui.trade.owned"),{font:sc.Ea.Ib});this.tK.H(ig.k.ra,ig.k.$);this.tK.l(4,9);this.fc.m(this.tK);this.q7=new sc.Nka(q,q,q,200);this.q7.IR="#7e7e7e";this.q7.l(24,9);this.fc.m(this.q7);this.Ee=new ig.ec(this.gb.s,432,256,16,17);this.Ee.l(5,36);this.Ee.Eb(16,17);this.Ee.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{Xa:0.2,Va:0.5,offsetY:5},time:0.2,p:KEY_SPLINES.LINEAR}};this.fc.m(this.Ee);this.mx=
new sc.gUa(q,q,q,y);this.mx.H(ig.k.hb,ig.k.Cb);this.mx.IR="#7e7e7e";this.mx.l(1,0);this.fc.m(this.mx);this.j("HIDDEN",h)},Gab:function(a,b,c){var d=sc.Fb.CY(a),f=sc.Fb.epa(a);if(this.Kla!=a){this.Ad.IB(f.characterName,h);this.name.ga(ig.Ra.ic(d.name));this.location.ga((f.area||"???")+" - "+(f.map||"???"));this.Kla=a}this.mBa.a.g.y=c+3;a=d.options[b];b=a.get;c=9+(this.mda.ih(b,q,q,h)+10);this.WR.l(32,c-7);this.tK.l(4,c-7);this.Ee.l(5,36+(b.length-1)*20);b=a.require;this.q7.l(24,c);this.q7.ih(b);this.mx.ih(a.get,
a.scale,a.cost,0)},reset:function(){this.j("HIDDEN",h);this.Kla=q},show:function(a,b,c){this.j("HIDDEN_SCALE",h);this.j("DEFAULT");this.Gab(a,b,c)},hide:function(a){this.Kla=q;sc.e.eL?this.j("HIDDEN_MOVE"):this.j(a?"HIDDEN_SCALE":"HIDDEN")}})});ig.J=h;
ig.N("game.feature.menu.gui.trade.trader-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-list","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.trade.trade-misc").K(function(){var a={Fz:q,xT:g,index:0};sc.ypb=sc.KV.extend({ac:q,f:function(){this.parent(h);this.F(436,258);this.Eb(436,258);this.DU(436,242);this.l(0,
0);this.H(ig.k.Ia,ig.k.vb);this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR}};this.Kd.F(this.a.size.x,222);var a=new sc.ea(ig.lang.get("sc.gui.trade.owned"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(2,-8);this.Kd.m(a);for(var a=sc.map.S2a(),a=sc.map.xbb(a),c=0,d=0;d<a.length;d++)sc.Fb.n3a(a[d])&&sc.Fb.rCb(a[d])&&this.zm(a[d],c++,{type:a[d]})},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,
this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.bQ.ORDER:sc.bQ.ORDER,c="auto";switch(a){case sc.bQ.ORDER:c="auto";break;case sc.bQ.FOUND:c="trader"}return ig.lang.get("sc.gui.menu.sort."+c)},DT:function(a,c){c!=this.tg&&this.ac.play();return{skipSounds:h}},qK:function(){(ig.input.Id||this.Kj.tt())&&sc.e.Yg(q,h)},aO:function(a,
c,d){c=sc.map.Kv(a,h);a="area-"+a;sc.Ea.x3a(a)||(a="enemy-abstract");a=new sc.Yz.kF(c,a,128);a.re.l(7,1);a.l(0,2);a.setData({type:d.type});this.m(a);return a},rK:function(a,c){if(!c){this.ac.play();this.Vr(this.jG(a));for(var d=this.Vd.length;d--;)if(a==this.Vd[d]){sc.e.NB(d);break}sc.e.Yg(q,h);return y}},IT:function(){ig.input.Id&&sc.e.Yg(q,h)},HT:function(){sc.e.Yg(q,h)},cH:function(a,c,d,f){var i=q,j=q,k=-1,l=q,m=j=q,d=sc.Fb.dAb(d,f);a.F(436,222);a.LT=0;a.paddingTop=2;a.clear();c.clear();if(a.H8)a.H8.rh();
else{a.H8=new ig.da;a.Gc.DG(a.H8,0);a.uEa=h}for(var f=1,n=0;n<d.length;n++){l=d[n];if(!this.aCb(l)){j=sc.Fb.CY(l);m=j.options;j=new sc.opb(l,c,a.Ar().length);j.l(1,f);a.H8.m(j);for(var o=0,t=0;t<m.length;t++){var p=m[t].get;if(p[0]){var k=p[0].id,i=p[0].amount,p=sc.yb.getItem(k),r=sc.q.T.OJ(k),u=sc.yb.hFa(k),w=sc.yb.gFa(k),z=0;p.type==sc.kh.EQUIP&&(z=p.level||0);i=new sc.rpb(u,l,t,k,w,r,i,z);a.Sd(i);i.a.g.x=234;if(t==0)i.a.g.y=f+1}o=o+i.a.size.y}j.a.size.y=Math.max(o+1,44);f=f+(j.a.size.y+2);if(n!=
d.length-1){l=new ig.mf("#545454",433,1);l.l(0,f-1);a.H8.m(l)}else f=f-2;f=f+1}}a.H8.a.size.y=f;a.ydb()},aCb:function(a){a=sc.Fb.CY(a);return a.child?sc.Fb.qCb(a.child):y},ET:function(b){if(b.xT!=g){if(b.Fz){a.Fz=b.Fz;a.xT=b.xT;a.index=b.a.g.y;sc.e.Yg(a)}b.data&&b.data.description?sc.e.Cc(b.data.description):sc.e.Cc(q,h);sc.yb.tea(b.data.id)?sc.e.Rj(sc.yb.M4(b.data.id)):sc.e.Rj("",y)}else{sc.e.Rj("",y);sc.e.Yg(g);b.data&&(b.data instanceof Object||sc.e.Cc(b.data))}},Lfa:function(a){if(a.Fz&&a.xT!=
g&&!sc.e.eL){this.ac.play();sc.e.dyb()}},FT:function(){sc.e.Yg(q,h);sc.e.Cc(q,h);sc.e.Rj("",y)},Ab:function(a,c,d){if(a==sc.e&&c==sc.fa.yp){sc.e.Yg(q,h);sc.e.Cc(q,h);sc.e.Rj("",y);this.sort(d.data.vE)}}})});ig.J=h;
ig.N("game.feature.menu.gui.trade.trader-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.trade.trade-model","game.feature.menu.gui.trade.trader-list","game.feature.menu.gui.trade.trade-misc").K(function(){sc.xpb=sc.U1.extend({detail:q,f:function(){this.parent(new sc.ypb);this.detail=new sc.ppb;this.m(this.detail);this.yc.Sd("auto",sc.bQ.ORDER,0);this.yc.Sd("trader",sc.bQ.FOUND,1);this.list.l(0,
0);this.j("DEFAULT")},Yd:function(){sc.e.Yg(q,y);this.detail.reset();this.parent();this.rn(this.list.pm())},Gd:function(){this.parent();this.detail.hide();sc.e.Rj("",y);sc.e.eL=y;ig.w3()},Rxb:function(){var a=sc.e.TH;this.detail.show(a.Fz,a.xT,a.index-this.list.Xm.qG());sc.e.rl(this.UFb.bind(this))},Fab:function(){var a=sc.e.TH;this.detail.Gab(a.Fz,a.xT,a.index-this.list.Xm.qG())},iyb:function(){this.detail.hide(h)},UFb:function(){sc.e.Dk();sc.e.lyb()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,
ig.lang.get("sc.gui.menu.help-texts.traders.title"),ig.lang.get("sc.gui.menu.help-texts.traders.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.yc.Aa&&this.yc.xk();this.rn(this.list.pm())}else b==sc.fa.Cya?sc.e.eL?this.Rxb():this.iyb():b==sc.fa.S1&&sc.e.eL&&sc.e.TH&&this.Fab()}})});ig.J=h;
ig.N("game.feature.menu.gui.botanics.botanics-misc").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.menu-misc").K(function(){sc.bfb=sc.IP.extend({Rda:new ig.ia("media/gui/menu.png"),Or:q,a_:q,f:function(a,b,c,d,f){this.parent(a,142,54,c,d);this.a_=b;this.fo=q;this.button.ac=q;this.Or=new ig.ec(this.Rda,0,407,8,8);this.Or.H(ig.k.ra,ig.k.$);this.Or.l(7,7);this.m(this.Or);this.Dma=new sc.Tb(100);this.Dma.H(ig.k.ra,ig.k.$);this.Dma.l(16,7);this.m(this.Dma);this.Dma.za(Math.round(f*
100))}});sc.ffb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),gb:new ig.jc("media/gui/buttons.png",{width:28,height:0,left:8,top:40,right:8,bottom:0,Vb:{"default":{x:0,y:114},focus:{x:45,y:114}}}),HHb:new ig.jc("media/gui/buttons.png",{width:29,height:0,left:6,top:37,right:5,bottom:0,Vb:{"default":{x:171,y:51},focus:{x:214,y:51}}}),a_:q,text:q,Qma:q,DF:q,f:function(a,b,c){this.parent();this.F(196,39);this.a_=a;this.text=new sc.ea(ig.lang.get("sc.gui.botanics.infoLocked"));this.text.H(ig.k.Ia,ig.k.$);
this.text.l(0,2);this.m(this.text);a=ig.lang.get("sc.gui.botanics.collect");a=a.replace("[[x]]",""+b).replace("[[y]]",""+c);this.Qma=new sc.ea(a,{font:sc.Ea.he});this.Qma.H(ig.k.Ia,ig.k.$);this.Qma.l(0,18);this.m(this.Qma);this.DF=new sc.gfb((b/c).Rb(0,1));this.DF.H(ig.k.hb,ig.k.Cb);this.DF.l(4,3);this.m(this.DF)},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,this.focus?"focus":"default");this.HHb.nb(a,this.a.size.x-4,this.a.size.y-2,this.focus?"focus":"default",2,1)}});sc.gfb=ig.da.extend({s:new ig.ia("media/gui/status-gui.png"),
DC:new ig.jc("media/gui/menu.png",{width:2,height:0,left:3,top:3,right:3,bottom:0,Vb:{"default":{x:16,y:416}}}),cE:0,f:function(a){this.parent();this.F(188,3);this.cE=Math.round(a*186)},Da:function(a){this.DC.nb(a,this.a.size.x,this.a.size.y,"default");a.nc("#25b000",2,0,this.cE,1);a.nc("#25b000",1,1,this.cE,1);a.nc("#25b000",0,2,this.cE,1)}});sc.afb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},
a_:q,Ha:q,IBa:0,xa:[],Asa:q,rKa:q,location:q,f:function(a,b,c,d,f){this.parent();this.F(431,46);this.a_=a;this.Ha=d;this.IBa=f||0;d=sc.e.xj[a];this.Asa=new sc.efb;this.Asa.l(2,1);this.Asa.mLb(a);this.m(this.Asa);this.rKa=new sc.ea(ig.Ra.ic(d.name));this.rKa.l(37,1);this.m(this.rKa);a=(b/(c||50)).Rb(0,1);f=new ig.ec(this.s,481,224,8,11);f.l(38,20);this.m(f);f="";if(a>=0.5){f=ig.Ra.ic(d.subArea);f=="MISSING LABEL"&&(f="???")}else{f=ig.lang.get("sc.gui.botanics.locText");f=f.replace("[[x]]","\\c[3]"+
(Math.ceil(c/2)-b)+"\\c[0]")}this.location=new sc.ea(f,{font:sc.Ea.he,linePadding:-1,maxWidth:184});this.location.l(51,19);this.m(this.location)}});sc.efb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:2,height:2,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:488,y:16},square:{x:500,y:0},none:{x:400,y:0}}}),display:q,fc:q,R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE}},f:function(){this.parent(32,42);this.fc=new ig.da;this.fc.a.clip=
h;this.fc.F(32,42);this.fc.l(1,1);this.m(this.fc)},mLb:function(a,b){if(a){if(this.display){this.display.remove(h);this.display=q}if(a){this.display=new sc.Dib(a,sc.e.vr[a].anim,h,this.lvb.bind(this));this.fc.m(this.display);this.j("DEFAULT",h)}}else{if(this.display){b?this.display.remove(h):this.display.j("HIDDEN",y,h);this.display=q}this.j("HIDDEN",h)}},lvb:function(a){a.Q&&a.l(this.fc.a.size.x/2-a.a.size.x/2-1,this.fc.a.size.y/2-a.a.size.y/2-2)}});sc.Dib=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,
p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},fd:q,cDa:q,uk:q,size:{x:0,y:0},Q:q,Gb:q,mb:q,f:function(a,b,c,d){this.parent();this.Gb=d;this.fd=a;this.cDa=b;this.j("HIDDEN",h);this.Eq(h,this.fd)},pi:function(){this.mb&&this.mb.Tc();this.mb=q;this.uk&&this.uk.clear();this.uk=q},Eq:function(a,b){if(this.fd)if(b==this.fd){var c=sc.bd[this.cDa];Vec3.assign(this.size,c.size||{x:12,y:12,z:28});this.F(this.size.x,this.size.y+this.size.z);this.Eb(this.a.size.x/2,this.a.size.y/
2);this.mb=new ig.Al(c.Ba);this.mb.Yt(this)}else if(b==this.mb){this.iea();this.j("DEFAULT",this.T7)}},iea:function(){this.uk=new ig.x9;this.uk.BGa(this.a.size.x,this.a.size.y);ig.r.pushState(this.uk);this.Q=ig.r.Pe(ig.wa.ItemDestruct,0,this.size.z,0,{__GLOBAL__:this.fd});this.Q.F(this.size.x,this.size.y,this.size.z);this.Q.mb=this.mb;this.Q.Bd();this.Q.Ma("default");this.Gb&&this.Gb(this);ig.r.b_()},update:function(){this.uk&&this.uk.XR()},Da:function(a){this.uk&&a.WAa(this.uk,0,0)}})});ig.J=h;
ig.N("game.feature.menu.gui.botanics.botanics-list").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.gui.base.box","game.feature.gui.base.text","game.feature.menu.gui.menu-misc","game.feature.menu.gui.item.item-list","game.feature.menu.gui.list-boxes","game.feature.menu.gui.tab-box","game.feature.menu.gui.botanics.botanics-misc").K(function(){sc.cfb=sc.KV.extend({ac:q,f:function(){this.parent(h);this.F(436,258);this.Eb(436,258);this.DU(436,242);this.l(0,0);this.H(ig.k.Ia,
ig.k.vb);this.ac=sc.gd.submit;this.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:218},time:0.2,p:KEY_SPLINES.LINEAR}};this.we={content:{title:"sc.gui.menu.help.botanics.titles.info",description:"sc.gui.menu.help.botanics.description.info"},offset:{x:2,y:34},size:{x:34,y:224},index:{x:0,y:0}};this.Kd.F(this.a.size.x,222);var a=new sc.ea(ig.lang.get("sc.gui.botanics.rate"),{font:sc.Ea.Ib});a.H(ig.k.ra,ig.k.$);a.l(6,-8);this.Kd.m(a);for(var a=sc.map.S2a(),a=sc.map.xbb(a),
b=0,c=0;c<a.length;c++)sc.e.YBb(a[c])&&sc.e.gCb(a[c])&&this.zm(a[c],b++,{type:a[c]});sc.e.ZBb()&&this.zm("other",b,{type:"other"})},Oc:function(){sc.P.Wa(sc.e,this)},Ic:function(){sc.P.Hc(sc.e,this)},show:function(){this.parent();this.Vr(this.tg||0,h,{skipSounds:h});ig.La.Md(0.2);this.j("DEFAULT")},hide:function(){this.parent();this.j("HIDDEN")},pm:function(){var a=q,a=this.wl[this.tg]?this.wl[this.tg].sort||sc.LE.ORDER:sc.LE.ORDER,b="auto";switch(a){case sc.LE.ORDER:b="auto";break;case sc.LE.FOUND:b=
"botanics";break;case sc.LE.NAME:b="botanicsName"}return ig.lang.get("sc.gui.menu.sort."+b)},DT:function(a,b){b!=this.tg&&this.ac.play();return{skipSounds:h}},qK:function(){(ig.input.Id||this.Kj.tt())&&sc.e.Yg(q,h)},aO:function(a,b,c){b=q;b=a=="other"?ig.lang.get("sc.gui.area.other"):sc.map.Kv(a);a="area-"+a;sc.Ea.x3a(a)||(a="enemy-abstract");a=new sc.Yz.kF(b,a,120);a.re.l(7,1);a.l(0,2);a.setData({type:c.type});this.m(a);return a},rK:function(a,b){if(!b){this.ac.play();this.Vr(this.jG(a));for(var c=
this.Vd.length;c--;)if(a==this.Vd[c]){sc.e.NB(c);break}sc.e.Yg(q,h);return y}},IT:function(){ig.input.Id&&sc.e.Yg(q,h)},HT:function(){sc.e.Yg(q,h)},cH:function(a,b,c,d){var f=q,i=q,f=-1,j=q,k=i=q,l=f=0,m=0,c=sc.e.cAb(c,d);a.F(436,222);a.LT=0;a.paddingTop=2;a.clear();b.clear();if(a.T6)a.T6.rh();else{a.T6=new ig.da;a.Gc.DG(a.T6,0);a.uEa=h}for(var d=1,n=0;n<c.length;n++){j=c[n];i=sc.e.xj[j];k=i.items;f=sc.e.Mzb(j);l=i.progress||50;m=(f/l).Rb(0,1);i=new sc.afb(j,f,l,b,a.Ar().length);i.l(1,d);a.T6.m(i);
var o=0;if(m>=1)for(l=0;l<k.length;l++){var f=k[l].id,m=sc.yb.hFa(f),t=sc.yb.gFa(f),f=new sc.bfb(m,j,f,t,k[l].prob||0);a.Sd(f);f.a.g.x=237;if(l==0)f.a.g.y=d+1;o=o+f.a.size.y}else{f=new sc.ffb(j,f,l);a.Sd(f);f.a.g.x=236;f.a.g.y=d+1;o=o+f.a.size.y}i.a.size.y=Math.max(o+1,44);d=d+(i.a.size.y+2);if(n!=c.length-1){j=new ig.mf("#545454",433,1);j.l(0,d-1);a.T6.m(j)}else d=d-2;d=d+1}a.T6.a.size.y=d;a.ydb()},ET:function(a){if(a.a_!=g)a.data&&a.data.description?sc.e.Cc(a.data.description):sc.e.Cc(q,h);else{sc.e.Rj("",
y);sc.e.Yg(g);a.data&&(a.data instanceof Object||sc.e.Cc(a.data))}},Lfa:J(),FT:function(){sc.e.Yg(q,h);sc.e.Cc(q,h);sc.e.Rj("",y)},Ab:function(a,b,c){if(a==sc.e&&b==sc.fa.yp){sc.e.Yg(q,h);sc.e.Cc(q,h);sc.e.Rj("",y);this.sort(c.data.vE)}}})});ig.J=h;
ig.N("game.feature.menu.gui.botanics.botanics-menu").O("impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.menu.gui.base-menu","game.feature.menu.gui.menu-misc","game.feature.menu.gui.botanics.botanics-list","game.feature.menu.gui.botanics.botanics-misc").K(function(){sc.dfb=sc.U1.extend({detail:q,f:function(){this.parent(new sc.cfb);this.yc.Sd("auto",sc.LE.ORDER,0);this.yc.Sd("botanics",sc.LE.FOUND,1);this.yc.Sd("botanicsName",sc.LE.NAME,2);this.list.l(0,0);this.j("DEFAULT")},
Yd:function(){sc.e.Yg(q,y);this.parent();this.rn(this.list.pm())},Gd:function(){this.parent();sc.e.eL=y;ig.w3()},ck:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.botanics.title"),ig.lang.get("sc.gui.menu.help-texts.botanics.pages"),function(){this.xh(h)}.bind(this),h);this.kb.a.zIndex=15E4;this.kb.a.xf=h}},Ab:function(a,b,c){if(a==sc.e)if(b==sc.fa.yp)this.rn(c.text);else if(b==sc.fa.SL){this.yc.Aa&&this.yc.xk();this.rn(this.list.pm())}else b==sc.fa.S1&&sc.e.eL&&
sc.e.TH&&this.Fab()}})});ig.J=h;
ig.N("game.feature.menu.menu-model").O("impact.base.game","impact.feature.interact.button-interact","impact.feature.storage.storage","game.feature.model.base-model","game.feature.menu.area-loadable","game.feature.menu.gui.start-menu","game.feature.menu.gui.equip.equip-menu","game.feature.menu.gui.circuit.circuit-menu","game.feature.menu.gui.item.item-menu","game.feature.menu.gui.map.map-menu","game.feature.menu.gui.save.save-menu","game.feature.menu.gui.options.options-menu","game.feature.menu.gui.shop.shop-menu",
"game.feature.menu.gui.synop.synop-menu","game.feature.menu.gui.quests.quest-menu","game.feature.menu.gui.quest-hub.quest-hub-menu","game.feature.menu.gui.enemies.enemy-menu","game.feature.menu.gui.lore.lore-menu","game.feature.menu.gui.status.status-menu","game.feature.menu.gui.help.help-menu","game.feature.menu.gui.museum.museum-menu","game.feature.menu.gui.stats.stats-menu","game.feature.menu.gui.trophy.trophy-menu","game.feature.menu.gui.social.social-menu","game.feature.menu.gui.trade.trader-menu",
"game.feature.menu.gui.botanics.botanics-menu","game.feature.menu.map-model").K(function(){function a(a){for(var b=ig.dh+"",b=ig.Xn[ig.dh]&&ig.Xn[ig.dh].Jba?".":",",f=/(\d+)(\d{3})/,a=a+"";f.test(a);)a=a.replace(f,"$1"+b+"$2");return a}function b(a){var b="0000"+Math.floor(a);return b.length>=6?Math.floor(a):b.substr(b.length-2)}sc.Fc={im:0,VE:1,Ye:2,nC:3,gA:4,lya:5,$j:6,M1:7,cka:8,aW:9,d$:10,WL:11,EL:12,qwa:13,jTa:14,rTa:15,Ljb:16,aQ:17,zPa:18,HSa:19};sc.jm={};sc.jm[sc.Fc.im]={Xq:sc.Gka,name:"start"};
sc.jm[sc.Fc.VE]={Xq:sc.Hib,name:"items"};sc.jm[sc.Fc.Ye]={Xq:sc.Gfb,name:"skills"};sc.jm[sc.Fc.nC]={Xq:sc.hhb,name:"equipment"};sc.jm[sc.Fc.gA]={Xq:sc.wob,name:"status"};sc.jm[sc.Fc.lya]={Xq:sc.Pob,name:"synopsis"};sc.jm[sc.Fc.$j]={Xq:sc.Xjb,name:"map"};sc.jm[sc.Fc.M1]={Xq:sc.hnb,name:"save",alt:"load"};sc.jm[sc.Fc.cka]={Xq:sc.Ykb,name:"options"};sc.jm[sc.Fc.aW]={Xq:sc.znb,name:"shop"};sc.jm[sc.Fc.d$]={Xq:sc.cmb,name:"quests"};sc.jm[sc.Fc.EL]={Xq:sc.Cjb,name:"lore"};sc.jm[sc.Fc.qwa]={Xq:sc.ahb,name:"enemy"};
sc.jm[sc.Fc.jTa]={Xq:sc.$nb,name:"social"};sc.jm[sc.Fc.WL]={Xq:sc.Epb,name:"trophy"};sc.jm[sc.Fc.rTa]={Xq:sc.oob,name:"stats"};sc.jm[sc.Fc.Ljb]={Xq:sc.skb,name:"museum"};sc.jm[sc.Fc.aQ]={Xq:sc.xpb,name:"trade"};sc.jm[sc.Fc.zPa]={Xq:sc.dfb,name:"botanics"};sc.jm[sc.Fc.HSa]={Xq:sc.Xlb,name:"questHub"};sc.Si={Uh:0,$c:1,Aw:2};sc.cd={NONE:0,HEAD:1,RIGHT_ARM:2,LEFT_ARM:3,TORSO:4,FEET:5};sc.Rm={LP:0,l9:1,vkb:2,B1:3,R1:4};sc.M9={};sc.M9.BUY_AND_SELL=0;sc.M9.BUY=1;sc.M9.SELL=2;sc.Tx={};sc.Tx.im=0;sc.Tx.FPa=
1;sc.Tx.GQb=2;sc.Tx.USa=3;sc.BRa={QUEST:0,LANDMARK:1,LORE:2,TROPHY:3,TRADER:4,STORY:5,DROP:6};sc.ZE={H9:0,lSa:1,ORa:2,VPa:3};sc.LE={ORDER:0,FOUND:1,NAME:2};sc.JRa=4;sc.Wxa=[{lang:"cons",type:"CONS"},{lang:"equip-arm",type:"EQUIP",noa:"ARM"},{lang:"equip-head",type:"EQUIP",noa:"HEAD"},{lang:"equip-torso",type:"EQUIP",noa:"TORSO"},{lang:"equip-feet",type:"EQUIP",noa:"FEET"},{lang:"trade",type:"TRADE"}];sc.NV={OPEN:0,ACTIVE:1,FINISHED:2};sc.Xja=99;sc.K9=999;sc.Lka={SINGLE:"SINGLE",MULTI:"MULTI"};sc.gkb=
ig.Uf.extend({NFa:q,Uo:[],iB:q,OF:q,JC:-1,qq:sc.Fc.im,AB:q,zZ:[],Z:q,Y2:[],OY:[],Yba:q,GHa:sc.Si,pIa:y,sk:sc.cd.NONE,g_:q,Lj:-1,Aga:-1,jg:Vec2.vc(0,0),Gqa:Vec2.vc(0,0),mua:Vec2.vc(0,0),bf:Vec2.vc(0,0),Q_:y,S_:y,Rs:sc.Rm.LP,mbb:sc.Rm.LP,YMa:y,Gm:q,Rh:Vec2.vc(0,0),S7:y,sE:q,MD:y,hT:y,ve:Vec2.vc(0,0),eIa:y,NVb:y,a6:y,Be:Vec2.vc(0,0),p6a:Vec2.vc(0,0),cfa:y,TG:y,Ji:Vec2.vc(0,0),t6a:Vec2.vc(0,0),efa:y,Mr:q,fk:q,era:y,dfa:y,bn:Vec2.create(0,0),fT:y,Nr:{},nE:q,N7:sc.Tx.im,PB:0,Ht:[],Wp:y,lo:-1,FN:q,Tfa:0,
B6:q,YJa:h,vH:0,j_:q,PKa:q,bta:y,Gga:{},eL:y,qca:y,ER:0,JD:y,Oqa:-2,DEb:0,TH:q,px:{},$S:[],ZR:y,iT:0,Wu:0,Vu:0,h0:y,xj:{},vr:{},dU:q,$Ob:q,yG:y,f:function(){this.parent("MenuModel");this.Z=new ig.$s;if(window.Ed){ig.Yh.Lg("shops","ShopList","Shops");ig.Yh.Lg("drops","DropsList","Drops");ig.Yh.Lg("leawords","StringArray","Lea Words")}this.xj=ig.Yh.get("drops");this.$Ob=ig.Yh.get("leawords");for(var a in this.xj)this.xj[a].other&&(this.xj[a].area=q);ig.ma.Up("drops",this,"VarDropEditor");ig.ma.Up("misc",
this,"VarMiscEditor");ig.zd.Lg(this)},bm:function(c,d){if(d[0]=="drops")switch(d[1]){case "totalProgress":return this.U4(h)}else if(d[0]=="misc")switch(d[1]){case "time":var f=new Date,i=f.getHours();return i>=11&&i<=13?"It's High Noon":f.getHours()+":"+f.getMinutes();case "words":return d[2]?ig.ma.get("lea.words."+(d[2]+"").toLowerCase()):y;case "localNum":return d[2]?a(d[2]):"";case "localNumTempVar":return d[2]?a(ig.ma.get("tmp."+d[2])):"";case "formatTimeVar":if(d[2]){f=ig.ma.get("tmp."+d[2]);
return b(Math.min(Math.floor(f/60)%60,99))+":"+b(Math.min(Math.floor(f)%60,99))+"."+b(Math.min(Math.floor(f*100)%100,99))}}},HSb:function(a){var b=0,f;for(f in this.xj)if(!this.vr[f]||!this.vr[f].completed){for(var i=0;i<=100;i++)this.zGa(f,"Autumn-Ground-1");b++;if(b>=a)break}},zGa:function(a,b){if(this.xj[a]){if(this.xj[a].link){a=this.xj[a].link||"";if(!this.xj[a])return}if(this.xj[a].track){var f=this.vr[a];if(!f){f={anim:b,count:0,time:(new Date).getTime(),completed:y};sc.pa.Ni("exploration",
"dropFound-"+a,1);sc.pa.bc("exploration","dropsTotal",1);this.vr[a]=f}if(!f.completed){f.count++;if(!f.completed&&f.count>=(this.xj[a].progress||50)){f.completed=h;f.count=this.xj[a].progress||50;sc.pa.bc("exploration","dropsCompleted",1);sc.pa.Ni("exploration","dropsCompletionRate",this.U4(h));if(sc.q.T.wq(285)){sc.P.Ga(this,sc.fa.sja,a);this.xF({type:"DROP",drop:a})}}}}}},cAb:function(a,b){var f=[],i;for(i in this.vr){var j=this.xj[i];a?a=="other"?j.other&&f.push(i):j.area==a&&f.push(i):f.push(i)}b!=
g&&this.BMb(f,b);return f},BMb:function(a,b){switch(b){case sc.LE.FOUND:a.sort(function(a,b){return(this.vr[b].time||0)-(this.vr[a].time||0)}.bind(this));break;case sc.LE.ORDER:a.sort(function(a,b){return(this.xj[a].order||0)-(this.xj[b].order||0)}.bind(this));break;case sc.LE.NAME:a.sort(function(a,b){var c=ig.Ra.ic(this.xj[a].name),d=ig.Ra.ic(this.xj[b].name);return c.localeCompare(d)}.bind(this))}},Mzb:function(a){return this.vr[a].count},k3a:function(){if(sc.map.j3a())for(var a in this.vr)return h;
return y},YBb:function(a){for(var b in this.xj)if(this.xj[b].area==a)return h},gCb:function(a){for(var b in this.vr)if(this.xj[b].area==a)return h},ZBb:function(){for(var a in this.vr)if(this.xj[a].other)return h},U4:function(a){var b=0,f=0,i;for(i in this.xj)if(this.xj[i].track){sc.pa.Qf("exploration","dropFound-"+i)&&this.vr[i]&&this.vr[i].completed&&b++;f++}return a?b/f:b},bAb:function(a){return this.vr[a]},$oa:function(a){return!this.xj[a]?"???":ig.Ra.ic(this.xj[a].name)},Lzb:function(a){return!this.xj[a]?
"???":sc.map.Kv(this.xj[a].area)},GLb:function(a){var b=this.Wu;this.Wu=a||sc.ZE.H9;sc.P.Ga(this,sc.fa.Aka,b)},ELb:function(a){var b=this.Vu;this.Vu=a||sc.ha.NEUTRAL;sc.P.Ga(this,sc.fa.tTa,b)},Q0a:function(){sc.P.Ga(this,sc.fa.Aka,this.Wu)},xF:function(a){if(sc.BRa[a.type]!=g){this.$S.push(a);sc.pa.bc("player","logs",1);this.$S.length>50&&this.$S.shift()}},fj:function(){this.px={};this.$S.length=0;this.Nr={};this.Gga={};this.vr={}},Dva:1E3,TZ:function(){var a=ig.input.qb==ig.Yb.Wc;if(this.ZR!=a){this.ZR=
a;this.$u(h)}},az:function(){if(window.Ri&&this.sNa&&!this.Zbb)this.xNa>0?this.xNa=this.xNa-ig.i.ja:this.ayb()},Ms:function(){this.sNa=y},qx:function(){if(window.MENU_ON_GAME_START&&window.Ri){this.sNa=h;this.xNa=0.2}},ayb:function(){if(this.sNa&&!this.Zbb){this.xO(h,sc.Fc[window.MENU_ON_GAME_START]);window.MENU_ON_GAME_START=q;this.Zbb=h;sc.q.uy()}},YAa:function(a,b){this.px[a]||(this.px[a]=[]);this.px[a].push(b)},Mpa:function(a){return this.px[a]&&this.px[a].length>0},B3a:function(a,b){return this.px[a]&&
this.px[a].indexOf(b)!=-1},jCa:function(a,b){this.px[a]&&(b?this.px[a].ye(b):delete this.px[a])},Fu:function(a){a.menuNewEntries=ig.copy(this.px);a.logs=ig.copy(this.$S);a.drops=ig.copy(this.vr);a.stamps=ig.copy(this.Nr);a.questsSeen=ig.copy(this.Gga)},Bt:function(a){this.px=a.menuNewEntries||{};this.$S=a.logs||[];this.vr=a.drops||{};this.Nr=a.stamps||{};this.Gga=a.questsSeen||{};var b=a=0,f;for(f in this.xj)if(this.vr[f]){var i=this.xj[f],j=this.vr[f];if(i.progress<j.count&&j.completed){j.count=
i.progress||50;a++}else if(i.progress<j.count){j.count=i.progress||50;j.completed=h;a++;sc.P.Ga(this,sc.fa.sja,f);this.xF({type:"DROP",drop:f})}else if(i.progress>j.count&&j.completed){j.count=i.progress;a++}else i.progress<=j.count&&a++;sc.pa.Ni("exploration","dropFound-"+f,1);(i=ig.HFa.a2a("ENTITY","ItemDestruct",f))&&i.desType!=j.anim&&(j.anim=i.desType);b++}sc.pa.Ni("exploration","dropsTotal",b);sc.pa.Ni("exploration","dropsCompleted",a);sc.pa.Ni("exploration","dropsCompletionRate",this.U4(h))},
aub:function(a,b,f,i,j){this.Nr[a]||(this.Nr[a]=[]);for(var k=0;k<sc.Xja;k++)if(!this.Nr[a][k]){this.Nr[a][k]={key:b,x:f,y:i,level:j,index:k};return k}return-1},Cxb:function(a,b,f){if(this.Nr[b]){this.Nr[b][a]&&(this.Nr[b][a].key=f);sc.P.Ga(this,sc.fa.GRa)}},gJb:function(a,b){this.Nr[a]&&this.Nr[a][b]&&(this.Nr[a][b]=q)},nBb:function(a){this.Nr[a]||(this.Nr[a]=[]);return this.Nr[a]},I2a:function(a){this.Nr[a]||(this.Nr[a]=[]);for(var b=0,f=this.Nr[a].length;f--;)this.Nr[a][f]&&b++;return b},Yyb:function(){sc.P.Ga(this,
sc.fa.WQa)},bk:function(a,b){this.OY.push(a);b&&sc.P.Ga(this,sc.fa.yya)},Qw:function(a){sc.P.Ga(this,sc.fa.yya,a)},$u:function(a){sc.P.Ga(this,sc.fa.VTa,a)},Mu:function(){this.OY=[];sc.P.Ga(this,sc.fa.NSa)},rl:function(a){if(a){this.Y2.push(a);this.Yba=a}},Dk:function(){this.Y2.pop();this.Yba=this.Y2.length>0?this.Y2[this.Y2.length-1]:q},jDb:function(){this.Yba&&this.Yba()},uH:function(a){if(a){this.zZ.push(a);this.AB=this.qq;this.qq=a;this.OY=[];this.Cc("",h);sc.P.Ga(this,sc.fa.p9)}},ez:function(){if(!(this.zZ.length<=
0)){this.AB=this.zZ.pop();this.qq=this.zZ.length>0?this.zZ[this.zZ.length-1]:sc.Fc.im;this.Cc("",h);this.OY=[];sc.P.Ga(this,sc.fa.D9)}},uy:function(){ig.La.De(this.Z);this.pIa=h},xO:function(a,b){this.qca=a||y;this.ER=b||sc.Fc.im},T$a:function(a){this.iT=a||0},Gd:function(){if(this.pIa){this.pIa=y;sc.Ep.Ws("MENU_LEAVE",{})}this.zZ=[];this.Y2=[];this.OF=this.iB=this.Yba=q;this.JC=-1;this.qq=sc.Fc.im;this.g_=q;this.sk=sc.cd.NONE;this.iT=0;this.Aga=this.Lj=-1;this.Rs=sc.Rm.LP;this.Q_=y;this.Gm=q;this.Rh.x=
0;this.Rh.y=0;this.S7=y;this.sE=q;this.lo=-1;this.FN=q;this.Tfa=0;this.B6=q;this.vH=0;this.PKa=this.j_=q;this.bta=y;this.nE=q;this.N7=sc.Tx.im;this.PB=0;this.Ht.length=0;this.eL=this.Wp=y;this.Wu=sc.ZE.H9;this.Vu=0;this.h0=y;sc.map.restore();this.a6=this.eIa=this.hT=this.MD=y;this.Be.x=this.Be.y=this.p6a.x=this.p6a.y=0;this.Ji.x=this.Ji.y=this.t6a.x=this.t6a.y=0;this.TG=this.efa=this.cfa=y;this.fk=this.Mr=q;this.dfa=this.era=y;this.bn.x=this.bn.y=0;this.JD=this.fT=y;this.DEb=0;this.dU=this.TH=q;this.yG=
y;this.OY=[];ig.La.$e(this.Z);sc.P.Ga(this,sc.fa.uV)},iDb:function(){sc.P.Ga(this,sc.fa.tSa)},Cc:function(a,b){this.iB=a;sc.P.Ga(this,sc.fa.oC,b)},Rj:function(a,b,f){this.OF=a;this.JC=f||-1;sc.P.Ga(this,sc.fa.Xxa,b)},gk:function(a,b,f,i){this.GHa=f||sc.Si.Uh;sc.P.Ga(this,sc.fa.xRa,{x:a||0,y:b||0,Nq:i})},dyb:function(){this.eL=h;sc.P.Ga(this,sc.fa.Cya)},lyb:function(){this.eL=y;sc.P.Ga(this,sc.fa.Cya)},AMa:function(a){if(this.N7!=a){var b=this.N7;this.N7=a||sc.Tx.im;sc.P.Ga(this,sc.fa.ZSa,b)}},wab:function(a){if(this.PB!=
a){var b=this.PB;this.PB=a||0;sc.P.Ga(this,sc.fa.YSa,b)}},vdb:function(a,b,f){for(var i=this.Ht.length;i--;){var j=this.Ht[i];if(j.id==a&&j.Iq==f){j.zc=b;j.zc<=0&&this.Ht.splice(i,1);i=-10;break}}i!=-10&&b>0&&this.Ht.push({id:a,zc:b,Iq:f});sc.P.Ga(this,sc.fa.Yxa)},kSb:function(a,b){var f=this.kS();return f+b*a<=sc.q.T.df},kS:function(a,b){for(var f=0,i=this.Ht.length;i--;){var j=this.Ht[i];a==j.id&&b==j.Iq||(f=f+j.Iq*j.zc)}return f},uY:function(a,b){for(var f=this.Ht.length;f--;){var i=this.Ht[f];
if(i.id==a&&i.Iq==b)return i.zc}return 0},AHb:function(a){sc.P.Ga(this,sc.fa.XSa,a)},xHb:function(){sc.P.Ga(this,sc.fa.WSa)},ROa:function(a,b,f){var i=this.kS(a,f);a&&(b!=g&&f)&&(i=i+(b||0)*f);sc.P.Ga(this,sc.fa.Yxa,i)},T6a:function(){sc.pa.bc("player","saves",1);ig.zd.save(ig.zd.kg.length);sc.P.Ga(this,sc.fa.TSa)},dha:function(a){ig.zd.save(a);sc.P.Ga(this,sc.fa.Hmb,a)},c4:function(a){ig.zd.c4(a);sc.P.Ga(this,sc.fa.Gmb,a)},RHa:L("Oqa"),iMa:function(a){sc.P.Ga(this,sc.fa.t1,a)},wta:function(){sc.P.Ga(this,
sc.fa.Qja)},X$a:function(a){a=a||0;if(a!=this.lo){var b=this.lo;this.lo=a;sc.P.Ga(this,sc.fa.yI,b)}},cS:function(){switch(this.lo){case 0:return"NEW";case 1:return sc.kh.CONS;case 2:case 3:case 4:case 5:return sc.kh.EQUIP;case 6:return sc.kh.TRADE;case 7:return sc.kh.KEY;case 8:return sc.kh.TOGGLE}return q},ETb:function(){switch(this.lo){case 2:return sc.Ng.ARM;case 3:return sc.Ng.HEAD;case 4:return sc.Ng.TORSO;case 5:return sc.Ng.FEET}return q},KS:function(){return this.lo>=2&&this.lo<=5},kw:function(a){sc.P.Ga(this,
sc.fa.yp,a)},eab:function(a){a=a||0;if(a!=this.Tfa){this.Tfa=a;sc.P.Ga(this,sc.fa.vxa)}},DTb:function(){for(var a in sc.Zc)if(sc.Zc[a]==this.lo)return this.lo;return q},yHb:function(a){sc.P.Ga(this,sc.fa.fSa,a)},NB:function(){sc.P.Ga(this,sc.fa.SL)},Yg:function(a,b){this.TH=a;sc.P.Ga(this,sc.fa.S1,b)},JLb:function(a){sc.P.Ga(this,sc.fa.wTa,a)},pcb:function(a){sc.P.Ga(this,sc.fa.xTa,a)},KLb:function(a){sc.P.Ga(this,sc.fa.vTa,a)},pab:function(a){a=a||0;if(a!=this.vH){var b=this.vH;this.vH=a;sc.P.Ga(this,
sc.fa.Ixa,b)}},yha:function(a,b){this.PKa=a;sc.P.Ga(this,sc.fa.ISa,b)},Zxb:function(a){this.bta=h;sc.P.Ga(this,sc.fa.jka,a)},pEb:function(){this.bta=y;sc.P.Ga(this,sc.fa.Jxa)},xU:function(a){this.g_=this.sk;this.sk=a||sc.cd.NONE;sc.P.Ga(this,sc.fa.j$)},Mwb:function(){var a=this.sk+1;a>5&&(a=sc.cd.HEAD);this.xU(a)},Lwb:function(){var a=this.sk-1;a<1&&(a=sc.cd.FEET);this.xU(a)},qvb:function(a){sc.P.Ga(this,sc.fa.uwa,a)},q0a:function(){sc.P.Ga(this,sc.fa.CQa)},y0a:function(){this.g_=q;this.sk=sc.cd.NONE},
pE:function(a,b,f){sc.P.Ga(this,sc.fa.eTa,{X:a,UDb:b,delay:f})},rMb:function(a){sc.P.Ga(this,sc.fa.fTa,a)},C7:function(a){if(a!=this.Lj){this.Aga=this.Lj;this.Lj=a!=g?a:-1;if(this.Lj!=-1){this.Rs=sc.Rm.l9;this.Gm=q;this.S_=y}else{this.Rs=sc.Rm.LP;this.S_=y;this.Gqa.x=this.jg.x;this.Gqa.y=this.jg.y;this.jg.x=0;this.jg.y=0;this.Gm=q}sc.P.Ga(this,sc.fa.N1)}},X0a:function(a,b,f){if(this.Gm==f){if(ig.input.qb==ig.Yb.Wc){this.jg.x=a;this.jg.y=b;sc.P.Ga(this,sc.fa.cTa)}}else{this.S_=y;this.mua.x=this.jg.x;
this.mua.y=this.jg.y;this.jg.x=a;this.jg.y=b;this.Gm=f;this.Rs=sc.Rm.vkb;sc.P.Ga(this,sc.fa.tka,this.Gm.td)}},K8:function(a){if(this.Gm==a){this.Gm=q;this.Rs=sc.Rm.l9;sc.P.Ga(this,sc.fa.$xa)}},BOa:function(a){if(this.sE==a){this.sE=q;sc.P.Ga(this,sc.fa.wka)}},$0a:function(a,b,f){if(this.sE==f){if(ig.input.qb==ig.Yb.Wc){this.Rh.x=a;this.Rh.y=b;sc.P.Ga(this,sc.fa.cya)}}else{this.S7=y;this.Rh.x=a;this.Rh.y=b;this.sE=f;sc.P.Ga(this,sc.fa.vka)}},N9a:function(){this.S7=y;if(this.sE)this.sE.focus=y;this.sE=
q},mvb:function(a,b){if(a){var f=-this.jg.y+ig.i.height/2;this.bf.x=-this.jg.x+ig.i.width/2;this.bf.y=f;this.Rs=sc.Rm.B1;sc.P.Ga(this,sc.fa.bya,b)}},mZa:function(a,b,f,i){if(a){a=-b.y+ig.i.height/2;this.bf.x=-b.x+ig.i.width/2;this.bf.y=a;sc.P.Ga(this,sc.fa.PPa,{Gb:i,time:f||0.2})}},Eca:function(a){this.Rs=a||sc.Rm.l9;sc.P.Ga(this,sc.fa.dTa)},byb:function(a){this.mbb=a||sc.Rm.LP;this.Rs=sc.Rm.R1;sc.P.Ga(this,sc.fa.aya)},V5a:function(){this.sE=q;this.Rs=sc.Rm.LP;sc.P.Ga(this,sc.fa.uka)},eva:function(){sc.P.Ga(this,
sc.fa.bW)},NLa:function(a){sc.map.Tk=a||0;sc.P.Ga(this,sc.fa.w1)},eyb:function(){if(this.fk&&this.fk.focus)this.fk.focus=y;this.fk=q;this.MD=y;this.TG=h;sc.P.Ga(this,sc.fa.MV,this.TG)},WDa:function(){this.TG=y;sc.P.Ga(this,sc.fa.MV,this.TG)},U0a:function(a,b,f,i){if(this.Mr==f){if(ig.input.qb==ig.Yb.Wc){this.Ji.x=a;this.Ji.y=b;sc.P.Ga(this,sc.fa.axa,h)}}else{this.Ji.x=a;this.Ji.y=b;if(this.Mr&&this.Mr.focus)this.Mr.focus=y;if((this.Mr=f)&&!this.Mr.focus)this.Mr.focus=h;sc.P.Ga(this,sc.fa.bxa,i)}},
Rca:function(a,b,f,i){if(this.fk==f){if(ig.input.qb==ig.Yb.Wc){this.Be.x=a;this.Be.y=b;sc.P.Ga(this,sc.fa.axa)}}else{this.hT=y;this.Be.x=a;this.Be.y=b;if(this.fk&&this.fk.focus)this.fk.focus=y;if(this.fk=f)this.fk.focus=h;sc.P.Ga(this,sc.fa.cxa,i)}},AOa:function(a){if(this.Mr==a){if(this.Mr)this.Mr.focus=y;this.Mr=q;sc.P.Ga(this,sc.fa.J9,h)}},YH:function(a){if(this.fk==a){if(this.fk)this.fk.focus=y;this.fk=q;sc.P.Ga(this,sc.fa.J9,y)}},P9a:function(){this.efa=y;if(this.Mr)this.Mr.focus=y;this.Mr=q},
PHa:function(a){if(a==sc.map.uj.path)this.WDa();else{this.dfa=h;this.TG=y;sc.P.Ga(this,sc.fa.$wa,a)}},qKb:function(a){this.dfa=y;sc.P.Ga(this,sc.fa.I9,a)},k8a:function(a){sc.P.Ga(this,sc.fa.FRa,a)},Dzb:function(){return this.q2a(this.qq)},q2a:function(a){return ig.lang.get("sc.gui.menu.menu-titles."+(this.JD&&sc.jm[a].alt?sc.jm[a].alt:sc.jm[a].name))},oVb:function(){return this.qq==sc.Fc.im},nVb:function(){return this.qq==sc.Fc.Ye},aVb:function(){return this.qq==sc.Fc.nC},pVb:function(){return this.qq==
sc.Fc.gA},rVb:function(){return this.qq==sc.Fc.lya},isMap:function(){return this.qq==sc.Fc.$j},lVb:function(){return this.qq==sc.Fc.M1},iVb:function(){return this.qq==sc.Fc.cka},mVb:function(){return this.qq==sc.Fc.aW},oDb:function(){return this.Z.wc()}});sc.fa={};sc.fa.oC=0;sc.fa.yya=1;sc.fa.VTa=2;sc.fa.p9=3;sc.fa.D9=4;sc.fa.uV=5;sc.fa.xRa=6;sc.fa.t1=7;sc.fa.j$=8;sc.fa.uwa=9;sc.fa.N1=10;sc.fa.tka=11;sc.fa.$xa=12;sc.fa.bya=13;sc.fa.dTa=14;sc.fa.aya=15;sc.fa.uka=16;sc.fa.bW=17;sc.fa.cTa=18;sc.fa.yI=
19;sc.fa.w1=20;sc.fa.vxa=21;sc.fa.yp=22;sc.fa.Qja=23;sc.fa.Xxa=24;sc.fa.Ixa=25;sc.fa.ISa=26;sc.fa.jka=27;sc.fa.Jxa=28;sc.fa.MV=29;sc.fa.bxa=30;sc.fa.cxa=31;sc.fa.J9=32;sc.fa.axa=33;sc.fa.$wa=34;sc.fa.I9=35;sc.fa.TSa=36;sc.fa.Hmb=37;sc.fa.Gmb=38;sc.fa.SL=39;sc.fa.S1=40;sc.fa.xTa=41;sc.fa.vTa=42;sc.fa.vka=43;sc.fa.wka=44;sc.fa.cya=45;sc.fa.ZSa=46;sc.fa.YSa=47;sc.fa.Yxa=48;sc.fa.XSa=49;sc.fa.WSa=50;sc.fa.Cya=51;sc.fa.Aka=52;sc.fa.tTa=53;sc.fa.sja=54;sc.fa.NSa=55;sc.fa.CQa=56;sc.fa.FRa=57;sc.fa.GRa=58;
sc.fa.wTa=59;sc.fa.fSa=60;sc.fa.eTa=61;sc.fa.PPa=62;sc.fa.fTa=63;sc.fa.tSa=99;sc.fa.WQa=100;sc.KP={AJ:function(a,b,f,i){b=13;f=f-7;sc.options.get("level-letter-display")&&i.nb(0,f,56,304,5,7);var j=a,k=2;do{k--;b=b-4;i.nb(b,f,62+j%10*5,304+(a<10&&k==0?7:0),5,7);j=~~(j/10)}while(k)},QSb:function(a,b,f,i,j){f=13;i=i-7;sc.options.get("level-letter-display")&&a.na(j,0,i,56,304,5,7);var k=b,l=2;do{l--;f=f-4;a.na(j,f,i,62+k%10*5,304+(b<10&&l==0?7:0),5,7);k=~~(k/10)}while(l)}};ig.Vf(function(){return sc.e=
new sc.gkb})});ig.J=h;
ig.N("game.feature.model.game-model").O("impact.base.game","impact.feature.bgm.bgm","game.feature.model.base-model","game.feature.player.player-model","game.feature.msg.message-model","game.feature.menu.menu-model","game.feature.model.options-model").K(function(){sc.e1=[{label:"D",xca:1},{label:"C",xca:1.1},{label:"B",xca:1.25},{label:"A",xca:1.5},{label:"S",xca:2}];sc.BP={NONE:{},TELEPORT:{aOa:h},SAVE:{aOa:h,d$a:h},CHECKPOINT:{aOa:h,d$a:h,Kvb:h}};sc.w9=ig.Uf.extend({Uo:[],xe:0,om:0,nO:0,ef:q,kga:q,
H5:y,S5a:new sc.VV("Lea"),T:q,message:q,e:q,options:q,kqa:[],vXb:sc.lgb.mj,OK:0,VZa:y,qJ:0,IM:0,cea:0,gga:y,RD:"NONE",KJ:y,Ss:y,bha:y,l5:0,Tda:[],Uda:[],PVb:10,Vfa:0,cNb:function(){this.l5=0;this.bha=h},tNb:function(a){if(this.bha){this.bha=y;a=a?this.Uda:this.Tda;a.push(this.l5);a.sort(function(a,c){return a-c});a.length>10&&a.pop()}},f:function(){this.parent("GameModel");this.message=sc.message;this.e=sc.e;this.options=sc.options;this.T=new sc.Dxa;this.T.G7(this.S5a);ig.zd.Lg(this)},zU:function(a,
b){var c=this.Es(),d=this.IG();b?this.KJ=!!a:this.VZa=!!a;if(this.Qv())this.qJ=this.T.C1a();d!=this.IG()&&sc.P.Ga(this,sc.zf.e9);c!=this.Es()?this.Es()?this.pNa():this.bY():this.JOa()},qba:function(){if(this.qJ>0){this.qJ=0;this.bY()}},pqa:function(){return sc.jb.wc()?h:!this.T.ki(sc.ng.COMBAT_RANK)||!this.Es()||sc.qi.wc()||sc.map.z5()||this.KJ?y:h},c4a:function(a){if(!this.pqa())return y;var b=this.bS();this.IM=this.IM+(a||1)/(4*Math.pow(1.5,Math.floor(this.IM)));if(this.IM>sc.e1.length-1)this.IM=
sc.e1.length-1;if(b!=this.bS()){sc.P.Ga(this,sc.zf.WPa);a=ig.lang.get("sc.gui.combat-msg.rank-up")+" "+this.UEa();a=new sc.gW(ig.r.cb,a,1);ig.X.vd(a);return h}return y},$Xa:function(a){this.kqa.push(a)},t9a:function(a){this.kqa.ye(a)},e7a:function(){sc.P.Ga(this,sc.zf.nQa)},bS:function(){return Math.floor(this.IM)},UEa:function(){return sc.e1[this.bS()].label},Voa:function(a){for(var b=sc.e1.length;b--;)if(sc.e1[b].label==a)return b;e(Error("Combat Rannk of Label '"+a+"' does not exist"))},D1a:function(){return sc.e1[this.bS()].xca},
wzb:function(){return this.IM-Math.floor(this.IM)},qDb:function(){return sc.BP[this.RD]&&sc.BP[this.RD].Kvb},h5a:function(){return sc.BP[this.RD]&&sc.BP[this.RD].d$a},k5a:function(){return sc.BP[this.RD]&&sc.BP[this.RD].aOa},A$a:L("yma"),hLb:function(a){if(sc.BP[a])this.RD=a},pNa:function(){sc.pa.bc("combat","started",1);this.cea=0;this.JOa();sc.P.Ga(this,sc.zf.e9,h)},bY:function(){sc.pa.Uta("combat","streakTime",this.cea);sc.q.T.W.Gy()<=sc.z9&&sc.pa.bc("combat","lowHealthWins",1);sc.Ta.rOb();sc.Ta.B$a(1);
this.IM=0;this.JOa();sc.P.Ga(this,sc.zf.e9,y)},JOa:function(){this.Es()?ig.mh.$C.length==1&&(this.pqa()&&ig.mh.fCb("rankBattle")?ig.mh.Z8a("rankBattle","FAST_OUT"):ig.mh.Z8a("battle","FAST_OUT")):ig.mh.$C.length>1&&ig.mh.G8a("SLOW")},sWa:function(){return!this.Es()&&this.ko()&&this.BN()&&!sc.jb.wc()},Y4a:function(){return this.sWa()&&this.Vfa<=0},fj:function(){this.T.G7(this.S5a);this.T.reset();this.zU(y);this.zU(y,h);this.qba();this.RD="NONE";this.yma=q;this.Ss=this.gga=this.bha=y;this.cea=0;this.kqa.length=
0;this.GU(q,y);this.vMa(q)},fH:function(){if(this.IG())if(this.oe())this.qba();else if(this.ko()){this.qJ=this.qJ-ig.i.ja;if(this.qJ<=0){this.qJ=0;this.bY()}}if(this.Es()&&ig.r.mu){this.cea=this.cea+ig.i.gz;sc.pa.bc("combat","time",ig.i.gz)}if(this.sWa()){if(this.Vfa>0)this.Vfa=this.Vfa-1}else this.Vfa=2;if(!this.Kr()&&(this.ko()||this.Oo())&&this.bha)this.l5=this.l5+ig.i.Sa;if(this.oe()&&this.ko()||this.message.rB){if(this.OK>0){this.OK=this.OK-ig.i.Sa;if(this.OK<=0){this.OK=0;sc.P.Ga(this,sc.zf.h9,
y)}}}else if(this.OK>0){this.OK=0;sc.P.Ga(this,sc.zf.h9,y)}},TZ:function(){!sc.q.gZ()&&sc.Oe.loaded&&this.T&&this.T.wdb()},nCa:function(){sc.P.Ga(this,sc.zf.UPa,h)},oua:function(){if(!this.Ss)if(this.OK>0){this.OK=0;sc.P.Ga(this,sc.zf.h9,y);if(sc.options.get("skip-confirm")){ig.Ow=y;this.message.rB||ig.r.J_(h);sc.aq.Dx(ig.lang.get("sc.gui.dialogs.skipConfirm"),q,function(a){ig.Ow=h;this.message.rB||ig.r.J_(y);a.data==0&&this.uNa()}.bind(this))}else this.uNa()}else{this.OK=3;sc.P.Ga(this,sc.zf.h9,
h)}},v0a:function(){ig.i.Un=y;this.uAa(sc.yw.Kka);this.message.csa(h)},Cca:function(a){this.message.Cba();this.uAa(sc.yw.k1);a&&sc.Ta.setActive(h)},dY:function(){ig.i.Un=y;this.message.csa();this.uAa(sc.yw.u9)},Zw:function(a){this.Kr()&&this.gga&&ig.mh.sO("IMMEDIATELY");ig.r.J_(y);this.rA(sc.Dg.Vx,a)},cyb:function(){this.rA(sc.Dg.wya)},Vxb:function(){this.rA(sc.Dg.LOADING)},Wxb:function(){this.rA(sc.Dg.lxa)},$xb:function(){this.rA(sc.Dg.Oxa)},Uxb:function(){this.rA(sc.Dg.Tja)},Txb:function(){this.rA(sc.Dg.zRa)},
XSb:function(){this.rA(sc.Dg.Hxa)},loa:function(){if(this.xe==sc.yw.u9&&this.om==sc.Dg.Vx&&!this.MDb()){ig.r.J_(h);this.rA(sc.Dg.I1);return h}return y},Xxb:function(){if((this.xe==sc.yw.u9||this.xe==sc.yw.k1)&&this.om==sc.Dg.Vx){this.rA(sc.Dg.eSa);return h}return y},u0a:function(){if(this.om!=this.nO)switch(this.nO){case sc.Dg.L9:this.uy();break;case sc.Dg.Vx:this.Zw();break;case sc.Dg.C1:this.t0a(h);break;default:this.rA(this.nO)}},uy:function(a){if(a||this.xe==sc.yw.u9&&this.om==sc.Dg.Vx){ig.r.J_(h);
this.rA(sc.Dg.L9);return h}return y},t0a:function(a){if(a||this.xe!==sc.yw.Kka&&this.om==sc.Dg.Vx){this.gga&&ig.mh.pause("IMMEDIATELY");ig.r.J_(h);this.YK();this.rA(sc.Dg.C1);return h}return y},gZ:function(){return this.xe==sc.yw.Kka},BN:function(){return this.xe==sc.yw.u9},oe:function(){return this.xe==sc.yw.k1},ko:function(){return this.om==sc.Dg.Vx},mHa:function(){return this.om==sc.Dg.wya},T4a:function(){return this.om==sc.Dg.LOADING},fVb:function(){return this.om==sc.Dg.lxa},DD:function(){return this.om==
sc.Dg.Oxa},EDb:function(){return this.om==sc.Dg.Tja},Oo:function(){return this.om==sc.Dg.L9},Kr:function(){return this.om==sc.Dg.C1},lB:function(){return this.om==sc.Dg.C1||this.om==sc.Dg.I1||this.om==sc.Dg.wya||this.om==sc.Dg.LOADING},LS:function(){return this.om==sc.Dg.zRa},Lr:function(){return this.om==sc.Dg.Hxa},jx:function(){return this.om==sc.Dg.I1},MS:function(){var a=sc.options.get("quick-element"),a=a&this.om==sc.Dg.I1;return a=a&sc.Kb.d5a()},X4a:function(){return this.om==sc.Dg.eSa},bVb:M("KJ"),
Es:function(){return this.Qv()||this.qJ>0},Qv:function(){return this.VZa||this.KJ},IG:function(){return!this.Qv()&&this.qJ>0},vzb:function(){return this.qJ/this.T.C1a()},Aea:function(){return!this.h5a()&&!this.Es()&&ig.r.JS()},MDb:function(){var a=ig.r.cb;return!a?y:a.CD()},WBb:function(){return this.message.u3a()||this.kqa.length>0},uNa:function(){if(!this.Ss&&(this.message.rB||this.xe==sc.yw.k1)&&!this.message.u3a())ig.i.Un=h},YK:function(){ig.i.Un=y},GU:function(a,b){this.ef=a;this.H5=b;sc.P.Ga(this,
sc.zf.UTa)},vMa:function(a){this.kga=a;sc.P.Ga(this,sc.zf.pSa)},uJb:function(){sc.P.Ga(this,sc.zf.OSa)},uAa:function(a){this.xe=a;sc.P.Ga(this,sc.zf.Ew)},rA:function(a,b){this.nO=this.om;this.om=a;b||sc.P.Ga(this,sc.zf.cs)},Fu:function(a){a.player=this.T.oD();a.mobilityBlock=this.RD;a.forceCombatMode=this.KJ;a.highscore=ig.copy(this.Tda);a["highscore-obs"]=ig.copy(this.Uda);a.currentTask=this.ef&&this.ef.data;a.permaTask=this.kga&&this.kga.data;a.keepTaskDisplayed=this.H5},Bt:function(a){this.T.WHb(a.player);
this.RD=a.mobilityBlock;this.yma=q;if(!this.RD)this.RD=a.saveBlock?"SAVE":"NONE";this.gga=y;this.Tda=a.highscore||[];this.Uda=a["highscore-obs"]||[];this.ef=a.currentTask&&new ig.Ra(a.currentTask);this.H5=a.keepTaskDisplayed;this.vMa(a.permaTask&&new ig.Ra(a.permaTask))},PJa:function(a){this.zU(y);this.zU(a.forceCombatMode,h);this.qba();this.T.UHb(a.player)}});ig.Vf(function(){return sc.q=new sc.w9});sc.zf={Ew:0,UTa:1,cs:2,e9:3,WPa:4,h9:5,OSa:6,pSa:7,UPa:8,nQa:9};sc.yw={Kka:0,u9:1,k1:2};sc.Dg={Vx:0,
wya:1,LOADING:2,lxa:3,Oxa:4,Tja:5,L9:6,C1:7,zRa:8,I1:9,eSa:10,Hxa:11}});ig.J=h;
ig.N("game.feature.inventory.detectors").O("impact.base.game","game.feature.model.game-model","impact.feature.effect.effect-sheet").K(function(){sc.rja={};sc.rja.FULL_CHEST={ODa:function(a){return a instanceof ig.wa.Chest&&!a.CN}};var a=["documentation","laserpickaxe","dynamite"];sc.rja.MINE_EQUIP={ODa:function(b){return b instanceof ig.wa.Prop&&b.Dga.path=="cold-dng"&&a.indexOf(b.Cga)!=-1&&!b.Og}};sc.iQa=[{item:466,areas:["cold-dng"],filter:sc.rja.MINE_EQUIP,label:"sc.gui.detector.mine-equip"},{item:501,
filter:sc.rja.FULL_CHEST,label:"sc.gui.detector.chest"}];sc.tgb=ig.Uf.extend({n:0,dsa:[],PX:[],bba:q,fx:new ig.ud("puzzle"),f:function(){this.parent("Detectors");sc.P.Wa(sc.q.T,this)},qx:function(){this.eCa();this.PX.length=0;this.n=this.dsa.length=0;this.sZa()},Ab:function(a,c){a instanceof sc.Dxa&&c==sc.dd.u1&&this.sZa(h)},sZa:function(a){for(var c=sc.iQa.length;c--;){var d=sc.iQa[c],f=this.vvb(d,c);f&&this.PX.push({J_a:d,count:f})}if(!this.n&&this.PX.length>0)this.n=a?0.05:0.3},Eu:function(){if(this.n>
0&&!sc.q.oe()&&sc.q.ko()&&ig.r.JS()){this.n=this.n-ig.i.Sa;if(this.n<=0)if(this.PX.length>0){this.n=2;this.ZMb(this.PX.pop())}else{this.eCa();this.n=0}}},vvb:function(a,c){if(sc.q.T.Dr(a.item)==0)return 0;var d=sc.q.T.PJ(a.item);if(!d||this.dsa[c]==d){this.dsa[c]=d;return 0}this.dsa[c]=d;if(a.areas&&(!sc.map.gi||a.areas.indexOf(sc.map.gi.path)==-1))return 0;for(d=this.PX.length;d--;)if(this.PX[0].J_a==a)return 0;var f=0,i=a.filter;if(i.ODa)for(var j=ig.r.entities,d=j.length;d--;)i.ODa(j[d])&&f++;
return f},eCa:function(){if(this.bba){this.bba.remove();this.bba=q}},ZMb:function(a){this.eCa();var c=a.count,a=ig.lang.get(a.J_a.label),a=a.replace("[[x]]",c);this.fx.va("detector",ig.r.cb);this.bba=new ig.lj.ARBox(ig.r.cb,a,0,sc.hV.NO_LINE,sc.X0.GREEN);ig.X.vd(this.bba)}});ig.Vf(function(){return sc.GSb=new sc.tgb})});ig.J=h;ig.N("game.feature.inventory.plug-in").O("game.feature.inventory.inventory","game.feature.inventory.detectors").K(function(){window.Ed&&wm.Ek.push("game.feature.inventory.editors.item-editors")});
ig.J=h;
ig.N("game.feature.ar.gui.ar-box").O("impact.feature.gui.gui").K(function(){sc.hV={NO_LINE:0,LINE_FILL:1,LINE_EMPTY:2};sc.X0={GREEN:{Z9a:"#166c70",fV:0},RED:{Z9a:"#6e0000",fV:16}};ig.lj.ARBox=ig.da.extend({R:{DEFAULT:{state:{},time:0.25,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:1,Va:0},time:0.25,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/map-ar.png"),target:q,text:q,n:0,Fa:0,Et:Vec2.vc(-1,-1),wj:Vec2.vc(-1,-1),V2:0,mode:sc.hV.NO_LINE,color:q,Jp:y,rN:y,dC:q,f:function(a,b,c,d,f){this.parent();this.Eb(0,
4);this.a.zIndex=-50;this.target=a;this.text=b;this.Fa=this.n=c||0;this.mode=d||y;this.color=f||sc.X0.GREEN;this.a.jB=h;a=new sc.ea(this.text,{speed:ig.Rd.se.mj,font:sc.Ea.he});a.H(ig.k.Ia,ig.k.vb);this.m(a);this.F(a.a.size.x+8,a.a.size.y+4+(this.mode?2:0));this.a.Db.y=a.a.size.y/2+2;this.j("HIDDEN",h);this.target?this.qj(y):this.j("DEFAULT")},PLb:function(a){if(this.target.XH){a=this.target.XH[a];if(a instanceof sc.p1.TIME)this.dC=a}},update:function(){if(this.dC){this.Fa=this.dC.target;this.n=this.Fa-
this.dC.Qa;this.n<=0&&this.remove()}else if(this.n){this.n=this.n-ig.i.ja;this.n<=0&&this.remove()}this.target||this.remove();this.target.Ve&&this.remove();this.target instanceof ig.wa.Combatant&&this.target.Wf()&&this.remove();this.qj(h)},Da:function(a){a.nc(this.color.Z9a,2,2,this.a.size.x-4,this.a.size.y-4).ge(0.5);if(this.Mv()){var b=this.BFa();this.a.hi=="DEFAULT"&&(b=1-b);a.dy().ge(b).pe("white",2,2,this.a.size.x-4,this.a.size.y-4)}else{a.ks().ge(0.5);a.na(this.s,0,0,0,0+this.color.fV,8,8);
a.na(this.s,this.a.size.x-8,0,8,0+this.color.fV,8,8);a.na(this.s,this.a.size.x-8,this.a.size.y-8,8,8+this.color.fV,8,8);a.na(this.s,0,this.a.size.y-8,0,8+this.color.fV,8,8);a.Xs();this.V2<=3?a.na(this.s,-13,this.a.size.y-3,32,0+this.color.fV,16,16,h):this.V2>=this.a.size.x-3?a.na(this.s,this.a.size.x-3,this.a.size.y-3,32,0+this.color.fV,16,16):a.na(this.s,this.V2-8,this.a.size.y-1,16,0+this.color.fV,16,16)}if(this.mode&&this.Fa){a.nc("black",4,this.a.size.y-2-2,this.a.size.x-8,1);b=(this.n/this.Fa).Rb(0,
1);this.mode==sc.hV.LINE_FILL&&(b=1-b);a.nc("white",4,this.a.size.y-2-2,(this.a.size.x-8)*b,1)}},remove:function(){this.Jp=h;this.j("HIDDEN",y,h)},On:M("Jp"),Zl:function(){this.remove()},dw:function(){this.remove()},zza:function(){if(this.n>=this.Afa)return this.$O;var a=this.n/this.Afa;return Math.floor((1-a)*this.iqa+a*this.$O)},qj:function(a){var b=this.a,c=this.target.tb(),d=Math.round(c.x)-ig.r.screen.x,c=Math.round(c.y-this.target.b.g.z-this.target.b.size.z/2)-ig.r.screen.y,f=this.target.b.size.x/
2,i=(this.target.b.size.y+this.target.b.size.z)/2-4,j=Math.max(f,i),k=d-ig.i.width/2,l=k>0?1:-1;if(a){if(l!=this.Et.x&&Math.abs(k)>16)this.Et.x=l;this.wj.x=this.wj.x*0.9+this.Et.x*0.1;this.wj.y=this.wj.y*0.9+this.Et.y*0.1}else{this.Et.x=this.wj.x=l;this.Et.y=this.wj.y=-1}b.g.x=d+this.wj.x*(f+b.size.x/2)-b.size.x/2;b.g.y=c+this.wj.y*(i+b.size.y/2)-b.size.y/2;if(!this.rN&&!b.al){b.g.x=b.g.x.Rb(0,ig.i.width-b.size.x);b.g.y=b.g.y.Rb(0,ig.i.height-b.size.y);this.j("DEFAULT")}this.V2=d-b.g.x;this.rN&&!b.al&&
(this.V2<-8-j||this.V2>b.size.x+j+8||b.g.y>c||b.g.y<c-j-b.size.y-8?this.j("HIDDEN"):this.j("DEFAULT"))}})});ig.J=h;
ig.N("game.feature.ar.ar-steps").O("impact.base.action","impact.base.event","game.feature.ar.gui.ar-box").K(function(){function a(a){return a instanceof ig.lj.ARBox}ig.oa.SHOW_AR_MSG=ig.qa.extend({Q:q,text:q,time:q,mode:y,color:q,Ck:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to show AR Message on"},text:{c:"LangLabel",d:"AR Text to display"},time:{c:"NumberExpression",d:"Time in seconds the message should be visible. 0 = forever"},mode:{c:"String",d:"Mode of AR display.",U:sc.hV},color:{c:"String",
d:"Color of AR display.",U:sc.X0},rN:{c:"Boolean",d:"If defined: don't show offscreen-msg"},Ck:{c:"String",d:"If provided: Show AR display to sub part of entity",I:h}},width:400}),f:function(a){this.Q=a.entity;this.text=new ig.Ra(a.text);this.time=a.time;this.mode=sc.hV[a.mode];this.color=sc.X0[a.color];this.Ck=a.partName},start:function(a,c){var d=ig.Ja.rd(this.Q,c),f=d,i=ig.Ja.eh(this.time);if(this.Ck)for(var j=d.b.qn,k=j.length;k--;)if(j[k].Q.Ck==this.Ck){f=j[k].Q;break}f=new ig.lj.ARBox(f,this.text.toString(),
i,this.mode,this.color);ig.X.vd(f);if(this.rN)f.rN=h;d.it(f)}});ig.oa.CLEAR_AR_MSG=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to show AR Message on"}},width:400}),f:function(a){this.Q=a.entity},start:function(b,c){ig.Ja.rd(this.Q,c).GA(a)}});ig.la.SHOW_AR_MSG=ig.ta.extend({text:q,time:q,mode:y,color:q,mv:y,Ck:q,t:new ig.u({attributes:{text:{c:"LangLabel",d:"AR Text to display"},time:{c:"NumberExpression",d:"Time in seconds the message should be visible. 0 = forever"},mode:{c:"String",
d:"Mode of AR display.",U:sc.hV},color:{c:"String",d:"Color of AR display.",U:sc.X0},mv:{c:"Boolean",d:"If true, keep Message even after action is finished or canceled"},rN:{c:"Boolean",d:"If defined: don't show offscreen-msg"},Ck:{c:"String",d:"If provided: Show AR display to sub part of entity",I:h},dC:{c:"TrackerRef",d:"If defined: bind time value of AR message to enemy tracker",I:h}}}),f:function(a){this.text=new ig.Ra(a.text);this.time=a.time;this.mode=sc.hV[a.mode];this.color=sc.X0[a.color];
this.mv=a.actionDetached||y;this.rN=a.hideOutsideOfScreen||y;this.Ck=a.partName;this.dC=a.tracker||q},start:function(a){var c=a;if(this.Ck)for(var d=a.b.qn,f=d.length;f--;)if(d[f].Q.Ck==this.Ck){c=d[f].Q;break}d=ig.Ja.eh(this.time);c=new ig.lj.ARBox(c,this.text.toString(),d,this.mode,this.color);this.dC&&c.PLb(this.dC);ig.X.vd(c);this.mv||a.Hj(c);if(this.rN)c.rN=h;a.it(c)}});ig.la.CLEAR_AR_MSG=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(b){b.GA(a)}})});ig.J=h;
ig.N("game.feature.ar.plug-in").O("game.feature.ar.gui.ar-box","game.feature.ar.ar-steps").K(J());ig.J=h;
ig.N("game.feature.npc.entities.sc-actor").O("impact.base.actor-entity","impact.feature.effect.effect-sheet").K(function(){function a(a,c){var d=ig.Pb.pN(a,h,h),f=sc.gm[c]||sc.gm.none;return f[d]||f[ig.VL]}sc.gm={};sc.gm.none={};sc.gm.none[ig.VL]={};sc.gm["default"]={};sc.gm["default"][ig.VL]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/land.ogg",1,0.1),yz:new ig.ka("media/sound/move/step-2.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/step-1.ogg",0.5,0.1)};sc.gm["default"][ig.hd.CARDBOARD]=
{ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/cardboard-land.ogg",0.5,0.1),yz:new ig.ka("media/sound/move/cardboard-step-2.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/cardboard-step-1.ogg",0.5,0.1)};sc.gm["default"][ig.hd.EARTH]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/grass-land.ogg",1,0.1),yz:new ig.ka("media/sound/move/earth-step-1.ogg",1,0.1),zz:new ig.ka("media/sound/move/earth-step-2.ogg",1,0.1),Jt:"dust"};sc.gm["default"][ig.hd.GRASS]=
{ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/grass-land.ogg",1,0.1),yz:new ig.ka("media/sound/move/grass-step-2.ogg",1,0.1),zz:new ig.ka("media/sound/move/grass-step-1.ogg",1,0.1)};sc.gm["default"][ig.hd.WOOD]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/wooden-land.ogg",0.5,0.1),yz:new ig.ka("media/sound/move/wooden-step-2.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/wooden-step-1.ogg",0.5,0.1)};sc.gm["default"][ig.hd.STONE]=
{ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/stone-land.ogg",0.7,0.1),yz:new ig.ka("media/sound/move/stone-step-2.ogg",0.8,0.1),zz:new ig.ka("media/sound/move/stone-step-1.ogg",0.8,0.1)};sc.gm["default"][ig.hd.METALSOLID]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/metal-solid-land.ogg",0.7,0.1),yz:new ig.ka("media/sound/move/metal-solid-step-2.ogg",0.8,0.1),zz:new ig.ka("media/sound/move/metal-solid-step-1.ogg",0.8,0.1)};
sc.gm["default"][ig.hd.METAL_HOLLOW]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/pipe-land.ogg",0.7,0.1),yz:new ig.ka("media/sound/move/pipe-step-1.ogg",0.7,0.1),zz:new ig.ka("media/sound/move/pipe-step-2.ogg",0.7,0.1)};sc.gm["default"][ig.hd.SNOW]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/snow-land.ogg",0.6,0.1),yz:new ig.ka("media/sound/move/snow-step-1.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/snow-step-2.ogg",0.5,
0.1)};sc.gm["default"][ig.hd.ICE]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/ice-land.ogg",1,0.1),yz:new ig.ka("media/sound/move/ice-step-1.ogg",1,0.1),zz:new ig.ka("media/sound/move/ice-step-2.ogg",1,0.1)};sc.gm["default"][ig.hd.SAND]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/snow-land.ogg",0.6,0.1),yz:new ig.ka("media/sound/move/snow-step-1.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/snow-step-2.ogg",0.5,0.1),Jt:"dust"};
sc.gm["default"][ig.hd.QUICKSAND]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/snow-land.ogg",0.6,0.1),yz:new ig.ka("media/sound/move/snow-step-1.ogg",0.5,0.1),zz:new ig.ka("media/sound/move/snow-step-2.ogg",0.5,0.1)};sc.gm["default"][ig.hd.SHALLOW_WATER]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/ice-land.ogg",1,0.1),yz:new ig.ka("media/sound/move/ice-step-1.ogg",1,0.1),zz:new ig.ka("media/sound/move/ice-step-2.ogg",1,0.1),
Jt:"water"};sc.gm["default"][ig.hd.LASER]={ni:new ig.ka("media/sound/move/jump.ogg",0.4,0.1),wt:new ig.ka("media/sound/move/laser-land.ogg",0.7,0.1),yz:new ig.ka("media/sound/move/laser-step-1.ogg",0.7,0.1),zz:new ig.ka("media/sound/move/laser-step-2.ogg",0.7,0.1),Jt:"laser"};sc.gm.defaultQuiet={};sc.gm.defaultQuiet[ig.VL]={ni:new ig.ka("media/sound/move/jump.ogg",0.2,0.1),wt:new ig.ka("media/sound/move/land.ogg",0.5,0.1)};sc.gm.giantMachine={};sc.gm.giantMachine[ig.VL]={ni:new ig.ka("media/sound/boss/crab/robot-jump.ogg",
0.8),wt:new ig.ka("media/sound/boss/crab/robot-land.ogg",0.8)};sc.gm.colDngBoss={};sc.gm.colDngBoss[ig.VL]={ni:new ig.ka("media/sound/boss/crab/robot-jump.ogg",0.8),wt:new ig.ka("media/sound/boss/drill-boss/drill-boss-walk-2.ogg",0.8)};sc.gm.slime={};sc.gm.slime[ig.VL]={ni:new ig.ka("media/sound/battle/blubb.ogg",0.6),wt:new ig.ka("media/sound/battle/blubb-3.ogg",0.6)};sc.Jc=ig.Jc.extend({NO:"default",Jt:{frames:0,zHa:0,G:new ig.ud("stepFx")},hf:{path:q,y4:0,L5a:0},ria:y,RU:{Pb:0,TBa:0},Aq:q,f:function(a,
c,d,f){this.parent(a,c,d,f);this.hf.path=ig.navigation.nN(this);this.Aq=new ig.tib(this)},update:function(){this.RU.Pb=ig.Pb.pN(this.b,h);this.RU.TBa=ig.Pb.pN(this.b,y);this.SJa();this.Aq.am();var b=this.hf;if(b.path.TR){b.y4=b.y4+ig.i.ja;if(b.path.TR!=b.L5a){b.L5a=b.path.TR;this.Nfa(b.y4)}}else b.y4=0;this.parent();if(!this.Jg&&!this.eo&&this.Jt.frames&&!Vec2.Ig(this.b.wb)&&this.b.jf>=ig.Ieb){b=this.Ya.Z1a();if(b!=this.Jt.zHa){var c=a(this.b,this.NO),d=y;if(b==this.Jt.frames[0]){d=h;ig.ah.gh(c.yz,
this,q,q,700);this.pK&&this.pK("step")}if(b==this.Jt.frames[1]){d=h;ig.ah.gh(c.zz,this,q,q,700);this.pK&&this.pK("step")}d&&c.Jt&&(ig.qd.EN(this.b,h)||this.Jt.G.va(c.Jt,this));this.Jt.zHa=b}}else this.Jt.zHa=-1},SJa:J(),pK:q,EJa:function(b,c){var d=a(this.b,this.NO);c||ig.ah.gh(d.ni,this,q,q,700);d=this.tb();ig.r.G.YX.Cg("medium",d.x,d.y,this.b.g.z);this.pK&&this.pK("jump")},hH:function(b){this.parent(b);if((this.ria||this.b.g.z>=ig.r.Xy)&&!this.b.rm&&!this.b.yd.height){var c=this.tb();if(b<0){var d=
a(this.b,this.NO);ig.ah.gh(d.wt,this,q,q,700);d.Jt&&this.Jt.G.va(d.Jt,this)}if(b<-150){(b=this.ria?ig.r.G.YX.Cg("giantHole",c.x,c.y,this.b.g.z):this.b.size.x>100?ig.r.G.YX.Cg("giant",c.x,c.y,this.b.g.z):this.b.size.x>20?ig.r.G.YX.Cg("large",c.x,c.y,this.b.g.z):ig.r.G.YX.Cg("medium",c.x,c.y,this.b.g.z))&&b.aua(this);this.pK&&this.pK("land")}}},Nfa:J(),Gh:function(){ig.Wd.prototype.Gh.call(this);this.Aq.SGb()}});ig.Zr.EQb={v3:sc.Jc,FV:{stepSfxFrames:0,soundType:"default"},J4:J(),apply:function(a){a.Jt.frames=
this.stepSfxFrames;a.NO=this.soundType},load:function(a){this.stepSfxFrames=a.Jt.frames;this.soundType=a.NO}}});ig.J=h;
ig.N("game.feature.base.action-steps").O("impact.base.action","impact.base.actor-entity","game.feature.npc.entities.sc-actor").K(function(){ig.la.SET_SOUNDTYPE=ig.ta.extend({value:Vec2.create(),t:new ig.u({attributes:{value:{c:"String",d:"New Soundtype",U:sc.gm}}}),f:function(a){this.value=a.value},ya:function(a){a.NO=this.value;return h}});ig.la.CHANGE_STAT_MAP_NUMBER=ig.ta.extend({map:"",Qc:"",je:q,value:0,t:new ig.u({attributes:{map:{c:"String",d:"The map."},Qc:{c:"String",d:"The stat."},je:{c:"String",
d:"Type of modification",U:{set:1,add:1,sub:1}},value:{c:"Number",d:"Number"}},label:function(){return"<i style='color: orange'>SET STAT MAP</i>: "+this.map+"."+this.Qc}}),f:function(a){this.map=a.map;this.Qc=a.stat;this.je=a.changeType;this.value=a.value},start:function(){this.value&&(this.je=="set"?sc.pa.Ni(this.map,this.Qc,this.value):this.je=="add"?sc.pa.bc(this.map,this.Qc,this.value):this.je=="sub"&&sc.pa.RH(this.map,this.Qc,this.value))}})});ig.J=h;
ig.N("game.feature.base.event-steps").O("impact.base.utils","impact.base.event","impact.base.action").K(function(){ig.oa.SET_TELEPORT_COLOR=ig.qa.extend({color:q,Pj:y,t:new ig.u({attributes:{color:{c:"Color",d:"Color of overlay"},Pj:{c:"Boolean",d:"Apply color in lighter mode"}}}),f:function(a){this.color=new ig.xp(a.color);this.Pj=a.lighter||y},start:function(){ig.r.Bha(this.color.Fk,this.color.tk,this.color.qk,this.Pj)}});ig.oa.SET_TELEPORT_TIME=ig.qa.extend({color:q,Pj:y,t:new ig.u({attributes:{fadeIn:{c:"Number",
d:"Color fade in time in seconds"},fadeOut:{c:"Number",d:"Color fade out time in seconds"}}}),f:function(a){this.fadeIn=a.fadeIn||0;this.fadeOut=a.fadeOut||0},start:function(){ig.r.Cha(this.fadeIn,this.fadeOut)}});ig.oa.LOAD=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){ig.zd.a6a()}});ig.oa.SAVE=ig.qa.extend({If:q,t:new ig.u({attributes:{If:{c:"Entity",d:"Marker to place entity at",I:h}}}),f:function(a){this.If=a.marker},start:function(a,c){var d=q,f=ig.Ja.rd(this.If,c);f&&f.name&&
(d=new ig.tC(f.name));ig.zd.e$a(g,d)}});ig.oa.GOTO_TITLE=ig.qa.extend({t:new ig.u({attributes:{}}),start:function(){ig.r.a3a()}});ig.oa.ADD_MONEY=ig.qa.extend({zc:0,t:new ig.u({attributes:{zc:{c:"Number",d:"Amount to add",ab:0}},label:function(){return"<b>ADD MONEY: </b> <em>"+this.zc+"</em>"}}),f:function(a){this.zc=a.amount||0},start:function(){this.zc>0&&sc.q.T.Rla(this.zc)}});ig.oa.REMOVE_MONEY=ig.qa.extend({zc:0,t:new ig.u({attributes:{zc:{c:"Number",d:"Amount to remove",ab:0}},label:function(){return"<b>REMOVE MONEY: </b> <em>"+
this.zc+"</em>"}}),f:function(a){this.zc=a.amount||0},start:function(){this.zc>0&&sc.q.T.kLa(this.zc)}});ig.oa.DROP_ITEM_ENTITY=ig.qa.extend({Q:q,item:0,zc:0,t:new ig.u({attributes:{Q:{c:"Entity",d:"the entity to spawn the drop from"},item:{c:"Item",d:"The item to spawn."},zc:{c:"Number",d:"Amount of the given item. 0 = 1.",ab:1}},label:function(){return"<b>DROP ITEM: </b> "+wmPrint("Entity",this.Q)+" <em>"+wmPrint("Item",this.item)+"</em> x"+this.zc}}),f:function(a){this.Q=a.entity||q;this.item=
a.item||0;this.zc=a.amount||1},start:function(a,c){var d=ig.Ja.rd(this.Q,c);sc.DV.PO(d,ig.Pa.CENTER,ig.r.cb,this.item,this.zc,sc.zL.EVENT_PROP)}});ig.oa.GIVE_ITEM=ig.qa.extend({item:0,zc:0,Nq:y,t:new ig.u({attributes:{item:{c:"Item",d:"The item to spawn."},zc:{c:"NumberExpression",d:"Amount of the given item. 0 = 1.",ab:1},Nq:{c:"Boolean",d:"True if the side gui should hide the obtained item",ab:y}},label:function(){return"<b>GIVE ITEM: </b> <em>"+wmPrint("Item",this.item)+"</em> x"+this.zc+(this.Nq?
"  <i>+ Skip Display</i>":"")}}),f:function(a){this.item=a.item||0;this.zc=a.amount||1;this.Nq=a.skip||y},start:function(){var a=ig.Ja.eh(this.zc);sc.q.T.sA(this.item,a,this.Nq)}});ig.oa.REMOVE_ITEM=ig.qa.extend({item:0,zc:0,J8:y,t:new ig.u({attributes:{item:{c:"Item",d:"The item to spawn."},zc:{c:"NumberExpression",d:"Amount of the given item. 0 = 1.",ab:1},J8:{c:"Boolean",d:"If true, unequip the item, if it is equipped",I:h,ab:h}},label:function(){return"<b>REMOVE ITEM: </b> <em>"+wmPrint("Item",
this.item)+"</em> x"+this.zc+(this.J8?" [UNEQUIP]":"")}}),f:function(a){this.item=a.item||0;this.zc=a.amount||1;this.J8=a.unequip||y},start:function(){var a=ig.Ja.eh(this.zc);sc.q.T.removeItem(this.item,a,y,this.J8)}});var a={BOTTOM_POS:1,JUMPING:2,SIZE:3,VELOCITY:4};ig.oa.SET_VAR_ENTITY_STAT=ig.qa.extend({Hd:q,Qc:q,Q:q,t:new ig.u({attributes:{Hd:{c:"VarName",d:"Variable to store stat"},Q:{c:"Entity",d:"Entity of which to fetch stat"},Qc:{c:"String",d:"Type of Stat",U:a}}}),f:function(b){this.Hd=
b.varName;this.Q=b.entity;this.Qc=a[b.stat]||a.RELATIVE_HP},start:function(b,c){var d=ig.Ja.Fr(this.Hd);if(d){var f=ig.Ja.rd(this.Q,c);if(f){var i;this.Qc==a.BOTTOM_POS?i=f.lc(ig.Pa.BOTTOM):this.Qc==a.JUMPING?i=f.Jg||y:this.Qc==a.SIZE?i=ig.copy(f.b.size):this.Qc==a.VELOCITY&&(i=ig.copy(f.b.V));ig.ma.set(d,i)}}else ig.log("SET_VAR_ENTITY_STAT: Variable Name is not a String!")}})});ig.J=h;ig.N("game.feature.base.plug-in").O("game.feature.base.action-steps","game.feature.base.event-steps").K(J());
ig.J=h;
ig.N("game.feature.bgm.playlist").O("impact.feature.bgm.bgm").K(function(){ig.merge(ig.X8,{silence:q,tutorial:{path:"media/bgm/muCargohold.mp3",xd:124.364,volume:0.5,sm:"media/bgm/muCargohold-i.mp3",Ug:3.272},intro:{path:"media/bgm/muAwakened.mp3",xd:130.068,volume:0.5},"short":{path:"media/bgm/short.mp3",xd:5,volume:0.5},"tutorial-battle":{path:"media/bgm/muBattle1.mp3",xd:61.736,volume:0.5,sm:"media/bgm/muBattle1-i.mp3",Ug:0.385},challenge:{path:"media/bgm/muChallenge1.mp3",xd:89.6,volume:0.5,sm:"media/bgm/muChallenge1-i.mp3",
Ug:2.8},title:{path:"media/bgm/muTitle.mp3",xd:36.099,volume:0.5},"cargoship-exterior":{path:"media/bgm/muSolar.mp3",xd:93.658,volume:0.5},lolfanfare:{path:"media/bgm/lolfanfare.mp3",xd:5.8,volume:0.5},landmark:{path:"media/sound/hud/landmark-discovery.mp3",xd:3,volume:0.5},"ability-got":{path:"media/bgm/ability-got.mp3",xd:1.5,volume:0.5},exposition:{path:"media/bgm/muCrossworlds.mp3",xd:83.173,volume:0.5},designer:{path:"media/bgm/muAvatar.mp3",xd:72,volume:0.5,sm:"media/bgm/muAvatar-i.mp3",Ug:6},
challenge2:{path:"media/bgm/muChallenge2.mp3",xd:65.581,volume:0.5,sm:"media/bgm/muChallenge2-i.mp3",Ug:5.581},"puzzle-pg":{path:"media/bgm/puzzle-bgm.mp3",xd:81,volume:0.5},bossbattle1:{path:"media/bgm/muBossbattle.mp3",xd:59.823,volume:0.5,sm:"media/bgm/muBossbattle-i.mp3",Ug:11.823},escape:{path:"media/bgm/muEscape.mp3",xd:55,volume:0.5,sm:"media/bgm/muEscape-i.mp3",Ug:2.666},crosscounter:{path:"media/bgm/muCrosscounter.mp3",xd:42.352,volume:0.5,sm:"media/bgm/muCrosscounter-i.mp3",Ug:8.823},oldHideout1:{path:"media/bgm/muMysterious.mp3",
xd:42.666,volume:0.5},oldHideoutBattle:{path:"media/bgm/muFiercebattle.mp3",xd:57.6,volume:0.5,sm:"media/bgm/muFiercebattle-i.mp3",Ug:2.742},oldHideoutEnding:{path:"media/bgm/muDistantfuture.mp3",xd:27,volume:0.5},autumnsRise:{path:"media/bgm/muAutumnsrise.mp3",xd:151.117,volume:0.5},fieldBattle:{path:"media/bgm/muBattle2.mp3",xd:122.482,volume:0.5},rhombusDungeon:{path:"media/bgm/muRhombusdungeon.mp3",xd:60,volume:0.5},rookieHarbor:{path:"media/bgm/muRookie.mp3",xd:61.832,volume:0.5},firstScholars:{path:"media/bgm/muFirstscholars.mp3",
xd:84.857,volume:0.5},bergenTrail:{path:"media/bgm/muBergentrail.mp3",xd:81,volume:0.5,sm:"media/bgm/muBergentrail-i.mp3",Ug:8},rhombusSquare:{path:"media/bgm/muNewcomer.mp3",xd:64.477,volume:0.5},apolloTheme:{path:"media/bgm/muApollo.mp3",xd:44.689,volume:0.5,sm:"media/bgm/muApollo-i.mp3",Ug:10.758},coldDungeon:{path:"media/bgm/muTemplemine.mp3",xd:83.076,volume:0.5},bergenVillage:{path:"media/bgm/muBergenvillage.mp3",xd:98.331,volume:0.5},heatArea:{path:"media/bgm/muMaroonvalley.mp3",xd:90.666,
volume:0.5},heatVillage:{path:"media/bgm/muBakiikum.mp3",xd:104.873,volume:0.5},heatDungeon:{path:"media/bgm/muTemplevalley.mp3",xd:110.608,volume:0.5},shockDungeon:{path:"media/bgm/muTemplethunder.mp3",xd:119.999,volume:0.5},waveDungeon:{path:"media/bgm/muTemplelake.mp3",xd:130.487,volume:0.5},treeDungeon:{path:"media/bgm/muTempletree.mp3",xd:110.769,volume:0.5},jungle:{path:"media/bgm/muGarden.mp3",xd:112,volume:0.5},emilie:{path:"media/bgm/muValse.mp3",xd:62.905,volume:0.5,sm:"media/bgm/muValse-i.mp3",
Ug:2.167},basinKeep:{path:"media/bgm/muBasinkeep.mp3",xd:102.893,volume:0.5},casual:{path:"media/bgm/muTravel.mp3",xd:60,volume:0.5},briefing:{path:"media/bgm/muBriefing.mp3",xd:79.592,volume:0.5},ponder:{path:"media/bgm/muImprovising.mp3",xd:100.285,volume:0.5},lea:{path:"media/bgm/muLea.mp3",xd:122.465,volume:0.5},"dreamsequence-intro":{path:"media/bgm/muDream1.mp3",xd:19.672,volume:0.5},dreamsequence:{path:"media/bgm/muDream3.mp3",xd:137.704,volume:0.5,sm:"media/bgm/muDream2.mp3",Ug:19.672},sorrow:{path:"media/bgm/muShock.mp3",
xd:87.887,volume:0.5,sm:"media/bgm/muShock-i.mp3",Ug:39.718},raidTheme:{path:"media/bgm/muRaid.mp3",xd:229.5,volume:0.5,sm:"media/bgm/muRaid-i.mp3",Ug:12.614},forestField:{path:"media/bgm/muSapphireridge.mp3",xd:105.404,volume:0.5,sm:"media/bgm/muSapphireridge-i.mp3",Ug:9.792},designerBoss1:{path:"media/bgm/muBlueavatar.mp3",xd:127.059,volume:0.6,sm:"media/bgm/muBlueavatar-i.mp3",Ug:25.038},waiting:{path:"media/bgm/muImprisoned.mp3",xd:108.845,volume:0.5},aridField:{path:"media/bgm/muVermillion.mp3",
xd:133.686,volume:0.5},aridBattle:{path:"media/bgm/muBattle3.mp3",xd:104.728,volume:0.5,sm:"media/bgm/muBattle3-i.mp3",Ug:0.74},shizukaConfrontation:{path:"media/bgm/muConfrontation.mp3",xd:43.522,volume:0.5,sm:"media/bgm/muConfrontation-i.mp3",Ug:183.238},evoDungeon1:{path:"media/bgm/muVermillionDungeon.mp3",xd:80.842,volume:0.5},evoDungeon2:{path:"media/bgm/muVermillionDungeon2.mp3",xd:91.579,volume:0.5,sm:"media/bgm/muVermillionDungeon2-i.mp3",Ug:1.578},evoEscape:{path:"media/bgm/muEscape2.mp3",
xd:93.563,volume:0.5,sm:"media/bgm/muEscape2-i.mp3",Ug:9.376},sergeyExposition:{path:"media/bgm/muPastevents.mp3",xd:123.887,volume:0.5},schneiderTour:{path:"media/bgm/muImprovising.mp3",xd:100.285,volume:0.5},infiltration:{path:"media/bgm/muInfiltration.mp3",xd:113.777,volume:0.5},sadness:{path:"media/bgm/muSadtheme.mp3",xd:106.751,volume:0.5},oldHideout2:{path:"media/bgm/muOldhideout.mp3",xd:119.365,volume:0.5},trueIntentions:{path:"media/bgm/muTrueintention.mp3",xd:164.383,volume:0.5,sm:"media/bgm/muTrueintention-i.mp3",
Ug:0},rhombusSquare2:{path:"media/bgm/muRhombussquare.mp3",xd:124.956,volume:0.5,sm:"media/bgm/muRhombussquare-i.mp3",Ug:10.06},autumnsFall:{path:"media/bgm/muAutumnsfall.mp3",xd:132.954,volume:0.5},snailBattle1:{path:"media/bgm/muExponential.mp3",xd:50.261,volume:0.6,sm:"media/bgm/muExponential-i.mp3",Ug:5.34},snailBattle2:{path:"media/bgm/muExponentialpart2.mp3",xd:130.68,volume:0.6,sm:"media/bgm/muExponentialpart2-i.mp3",Ug:2.513},lastDungeon:{path:"media/bgm/muVermillionDungeon3.mp3",xd:164.359,
volume:0.5},shizuka:{path:"media/bgm/muShizuka.mp3",xd:86.069,volume:0.5,sm:"media/bgm/muShizuka-i.mp3",Ug:15.967},finalBoss:{path:"media/bgm/muUltimate.mp3",xd:264.334,volume:0.6,sm:"media/bgm/muUltimate-i.mp3",Ug:32.792},credits:{sm:"media/bgm/muEnding.mp3",Ug:244,path:"media/bgm/muLea.mp3",xd:122.465,volume:0.5}});ig.c1.YHb();ig.merge(ig.Zia,{cargoShipIntro:{field:{lb:"intro",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"tutorial-battle",volume:1}},cargoShip:{field:{lb:"tutorial",
volume:1},battle:{lb:"tutorial-battle",volume:1}},cargoChallenge:{field:{lb:"tutorial",volume:1},battle:{lb:"tutorial-battle",volume:1}},cargoShipExterior:{field:{lb:"cargoship-exterior",volume:1},battle:{lb:"tutorial-battle",volume:1}},puzzle:{field:{lb:"rhombusDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1}},hideout:{field:{lb:"oldHideout1",volume:1},battle:{lb:"oldHideoutBattle",volume:1}},hideout2:{field:{lb:"oldHideout2",volume:1},battle:{lb:"oldHideoutBattle",volume:1}},forest:{field:{lb:"forestField",
volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},autumn:{field:{lb:"autumnsRise",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},autumnsFall:{field:{lb:"autumnsFall",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},rookieHarbor:{field:{lb:"rookieHarbor",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},firstScholars:{field:{lb:"firstScholars",
volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},bergenTrail:{field:{lb:"bergenTrail",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},bergenVillage:{field:{lb:"bergenVillage",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},heatArea:{field:{lb:"heatArea",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},rhombusSquare:{field:{lb:"rhombusSquare",
volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},rhombusSquare2:{field:{lb:"rhombusSquare2",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},crossCentral:{field:{lb:"intro",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},coldDungeon:{field:{lb:"coldDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},heatVillage:{field:{lb:"heatVillage",
volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},heatDungeonOutside:{field:{lb:q,volume:0.3},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},silence:{field:{lb:q,volume:0.3},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},silenceCombat:{field:{lb:q,volume:0.3},battle:{lb:q,volume:1}},heatDungeon:{field:{lb:"heatDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",
volume:1}},jungle:{field:{lb:"jungle",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},basinKeep:{field:{lb:"basinKeep",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},shockDungeon:{field:{lb:"shockDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},waveDungeon:{field:{lb:"waveDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},
treeDungeon:{field:{lb:"treeDungeon",volume:1},battle:{lb:"tutorial-battle",volume:1},rankBattle:{lb:"fieldBattle",volume:1}},arid:{field:{lb:"aridField",volume:1},battle:{lb:"aridBattle",volume:1}},aridDng:{field:{lb:"evoDungeon1",volume:1},battle:{lb:"aridBattle",volume:1}},lastDng:{field:{lb:"lastDungeon",volume:1},battle:{lb:"aridBattle",volume:1}}})});ig.J=h;
ig.N("game.feature.bgm.volume-map").O("impact.base.sound").K(function(){ig.AV.set("media/sound/menu/menu-cancel.ogg",0.8);ig.AV.set("media/sound/move/jump.ogg",0.7);ig.AV.set("media/sound/misc/scifi-effect-1.ogg",0.68);ig.AV.set("media/sound/battle/ball-kill.ogg",0.7);ig.AV.set("media/sound/puzzle/door-open.ogg",0.8)});ig.J=h;
ig.N("game.feature.bgm.plug-in").O("game.feature.bgm.playlist","game.feature.bgm.volume-map").K(function(){window.Ed&&wm.yu&&(wm.yu.volume={c:"Number",d:"Volume modifier for BGM",ab:1})});ig.J=h;
ig.N("game.feature.character.abstract-face").K(function(){function a(a){return{src:a.src,width:a.torso.w,height:a.torso.h+a.head.h-a.head.overlapY,centerX:a.centerX,centerY:a.centerY,parts:[{torso:{srcX:a.torso.x,srcY:a.torso.y,width:a.torso.w,height:a.torso.h,destX:0,destY:a.head.h-a.head.overlapY}},{head:{srcX:a.head.x,srcY:a.head.y,width:a.head.w,height:a.head.h,destX:a.head.offX,destY:0}}],expressions:{DEFAULT:{faces:[["torso","head"]]}}}}sc.Nf={};sc.Nf.sensei={src:"sensei.png",width:184,height:184,
centerX:94,centerY:70,parts:[{torso:{srcX:0,srcY:100,width:184,height:84,destX:0,destY:100}},{head:{srcX:0,srcY:0,width:184,height:100,destX:0,destY:0}}],expressions:{DEFAULT:{faces:[["torso","head"]]}}};sc.Nf.oldman={src:"oldman.png",width:168,height:160,centerX:50,centerY:60,parts:[{torso:{srcX:0,srcY:100,width:168,height:60,destX:0,destY:100}},{head:{srcX:0,srcY:0,width:168,height:100,destX:0,destY:0}}],expressions:{DEFAULT:{faces:[["torso","head"]]}}};sc.Nf.henry={src:"henry.png",width:134,height:160,
centerX:50,centerY:60,parts:[{torso:{srcX:0,srcY:100,width:134,height:60,destX:0,destY:100},torsoH:{srcX:144,srcY:100,width:134,height:60,destX:0,destY:100}},{head:{srcX:0,srcY:0,width:134,height:100,destX:0,destY:0},headH:{srcX:144,srcY:0,width:134,height:100,destX:0,destY:0}}],expressions:{DEFAULT:{faces:[["torso","head"]]},HOLOGRAM:{faces:[["torsoH","headH"]]}}};sc.Nf.shadAlbino={src:"albinoshad.png",width:136,height:160,centerX:44,centerY:92,parts:[{torso:{srcX:0,srcY:100,width:136,height:60,
destX:0,destY:100}},{head:{srcX:0,srcY:0,width:136,height:100,destX:0,destY:0}}],expressions:{DEFAULT:{faces:[["torso","head"]]}}};sc.Nf.maleNormalHair1=a({src:"npc-portrait.png",torso:{x:0,y:0,w:136,h:64},head:{x:136,y:0,w:72,h:88,offX:24,overlapY:0},centerX:43,centerY:55});sc.Nf.maleNormalHair2={src:"npc-portrait.png",width:128,height:152,centerX:43,centerY:55,parts:[{straight:{srcX:0,srcY:0,width:136,height:64,destX:0,destY:88}},{norm:{srcX:280,srcY:0,width:80,height:88,destX:24,destY:0},glass:{srcX:360,
srcY:0,width:80,height:88,destX:24,destY:0}}],expressions:{DEFAULT:{faces:[["straight","norm"]]},GLASS:{faces:[["straight","glass"]]}}};sc.Nf.maleNormalBald1=a({src:"npc-portrait.png",torso:{x:0,y:64,w:136,h:64},head:{x:208,y:0,w:72,h:88,offX:24,overlapY:0},centerX:43,centerY:55});sc.Nf.maleFarmer=a({src:"npc-portrait.png",torso:{x:0,y:64,w:136,h:64},head:{x:440,y:0,w:104,h:96,offX:8,overlapY:0},centerX:43,centerY:63});sc.Nf.femaleShortHair1=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},
head:{x:136,y:88,w:80,h:88,offX:8,overlapY:0},centerX:36,centerY:60});sc.Nf.femaleLongHair1=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},head:{x:216,y:88,w:80,h:88,offX:8,overlapY:0},centerX:36,centerY:60});sc.Nf.femalePigtails=a({src:"npc-portrait.png",torso:{x:0,y:184,w:104,h:56},head:{x:296,y:88,w:80,h:88,offX:8,overlapY:0},centerX:36,centerY:60});sc.Nf.femaleFarmer=a({src:"npc-portrait.png",torso:{x:0,y:184,w:104,h:56},head:{x:544,y:0,w:104,h:96,offX:0,overlapY:0},centerX:36,centerY:68});
sc.Nf.maleNormalMustache=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:352,y:272,w:80,h:96,offX:16,overlapY:2},centerX:40,centerY:64});sc.Nf.maleNormalOldBeard=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:512,y:288,w:72,h:88,offX:16,overlapY:2},centerX:40,centerY:58});sc.Nf.maleShadyBaldEyepatch=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:112,y:264,w:72,h:88,offX:24,overlapY:0},centerX:43,centerY:55});sc.Nf.maleHairSunglasses=a({src:"npc-portrait-2.png",
torso:{x:0,y:0,w:136,h:64},head:{x:664,y:288,w:72,h:88,offX:24,overlapY:0},centerX:48,centerY:55});sc.Nf.femaleAdvisor=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},head:{x:264,y:176,w:80,h:104,offX:8,overlapY:0},centerX:36,centerY:72});sc.Nf.maleAdvisor=a({src:"npc-portrait.png",torso:{x:0,y:0,w:136,h:64},head:{x:192,y:176,w:72,h:104,offX:24,overlapY:0},centerX:43,centerY:67});sc.Nf.femaleAdventurerPonytail=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},head:{x:104,y:176,w:88,h:88,
offX:8,overlapY:0},centerX:36,centerY:54});sc.Nf.femaleAdventurerPigtails=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},head:{x:664,y:104,w:96,h:88,offX:8,overlapY:0},centerX:36,centerY:54});sc.Nf.maleAdventurerSpikeHair=a({src:"npc-portrait.png",torso:{x:0,y:0,w:136,h:64},head:{x:648,y:0,w:72,h:104,offX:24,overlapY:0},centerX:43,centerY:71});sc.Nf.maleAdventurerBald=a({src:"npc-portrait.png",torso:{x:0,y:0,w:136,h:64},head:{x:600,y:104,w:64,h:88,offX:32,overlapY:0},centerX:43,centerY:51});
sc.Nf.femaleMiner=a({src:"npc-portrait.png",torso:{x:0,y:128,w:104,h:56},head:{x:520,y:96,w:80,h:96,offX:8,overlapY:0},centerX:36,centerY:68});sc.Nf.maleMiner=a({src:"npc-portrait.png",torso:{x:0,y:64,w:136,h:64},head:{x:440,y:96,w:80,h:96,offX:24,overlapY:0},centerX:43,centerY:63});sc.Nf.femaleColonialShorthair=a({src:"npc-portrait-2.png",torso:{x:0,y:128,w:104,h:56},head:{x:344,y:176,w:80,h:96,offX:8,overlapY:0},centerX:40,centerY:59});sc.Nf.femaleColonialPigtails=a({src:"npc-portrait-2.png",torso:{x:0,
y:128,w:104,h:56},head:{x:424,y:192,w:112,h:96,offX:0,overlapY:0},centerX:40,centerY:59});sc.Nf.maleColonialBlack=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:536,y:192,w:80,h:96,offX:24,overlapY:0},centerX:48,centerY:59});sc.Nf.maleColonialMonocle=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:616,y:192,w:80,h:96,offX:24,overlapY:0},centerX:48,centerY:59});sc.Nf.maleGuard=a({src:"guards-portrait.png",torso:{x:0,y:0,w:136,h:72},head:{x:136,y:0,w:88,h:88,offX:16,overlapY:0},
centerX:48,centerY:59});sc.Nf.femaleGuard=a({src:"guards-portrait.png",torso:{x:0,y:72,w:104,h:64},head:{x:224,y:0,w:88,h:88,offX:8,overlapY:0},centerX:48,centerY:59});sc.Nf.maleGuardGlasses=a({src:"guards-portrait.png",torso:{x:0,y:0,w:136,h:72},head:{x:136,y:96,w:88,h:88,offX:16,overlapY:0},centerX:48,centerY:59});sc.Nf.femaleMonk=a({src:"npc-portrait-2.png",torso:{x:0,y:128,w:104,h:56},head:{x:440,y:288,w:72,h:88,offX:16,overlapY:0},centerX:34,centerY:58});sc.Nf.maleMonk=a({src:"npc-portrait.png",
torso:{x:0,y:0,w:136,h:64},head:{x:376,y:88,w:64,h:88,offX:32,overlapY:0},centerX:43,centerY:55});sc.Nf.maleBusinessHeatHeadscarf=a({src:"npc-portrait-2.png",torso:{x:0,y:0,w:136,h:64},head:{x:192,y:280,w:72,h:96,offX:20,overlapY:2},centerX:40,centerY:66});sc.Nf.femaleBusinessHeatHeadscarf=a({src:"npc-portrait-2.png",torso:{x:0,y:128,w:104,h:56},head:{x:264,y:280,w:80,h:96,offX:12,overlapY:2},centerX:40,centerY:66});sc.Nf.femaleGlassesCap=a({src:"npc-portrait-2.png",torso:{x:0,y:128,w:104,h:56},head:{x:584,
y:288,w:80,h:88,offX:8,overlapY:0},centerX:28,centerY:60});sc.Nf.tribladerMale=a({src:"avatars-new.png",torso:{x:0,y:0,w:152,h:80},head:{x:152,y:0,w:80,h:96,offX:32,overlapY:8},centerX:54,centerY:62});sc.Nf.tribladerFemale=a({src:"avatars-new.png",torso:{x:0,y:80,w:128,h:72},head:{x:152,y:96,w:80,h:88,offX:16,overlapY:8},centerX:38,centerY:54});sc.Nf.pentafistMale=a({src:"avatars-new.png",torso:{x:0,y:152,w:128,h:72},head:{x:232,y:0,w:96,h:88,offX:16,overlapY:0},centerX:42,centerY:60});sc.Nf.pentafistMaleRasta=
a({src:"avatars-new.png",torso:{x:0,y:152,w:128,h:72},head:{x:224,y:376,w:96,h:88,offX:24,overlapY:0},centerX:42,centerY:58});sc.Nf.pentafistFemale=a({src:"avatars-new.png",torso:{x:0,y:224,w:96,h:64},head:{x:232,y:88,w:96,h:88,offX:0,overlapY:0},centerX:30,centerY:56});sc.Nf.pentafistFemaleRasta=a({src:"avatars-new.png",torso:{x:0,y:224,w:96,h:64},head:{x:320,y:384,w:104,h:88,offX:-8,overlapY:0},centerX:28,centerY:56});sc.Nf.hexacastMale=a({src:"avatars-new.png",torso:{x:0,y:288,w:136,h:72},head:{x:232,
y:176,w:96,h:88,offX:16,overlapY:0},centerX:42,centerY:55});sc.Nf.hexacastMaleBlockhead=a({src:"avatars-new.png",torso:{x:0,y:288,w:136,h:72},head:{x:136,y:352,w:88,h:88,offX:24,overlapY:0},centerX:44,centerY:58});sc.Nf.hexacastFemale=a({src:"avatars-new.png",torso:{x:0,y:360,w:104,h:40},head:{x:328,y:0,w:104,h:112,offX:0,overlapY:0},centerX:26,centerY:56});sc.Nf.quadroguardMale=a({src:"avatars-new.png",torso:{x:0,y:536,w:168,h:96},head:{x:152,y:184,w:80,h:80,offX:40,overlapY:8},centerX:60,centerY:48});
sc.Nf.quadroguardMaleSpiky=a({src:"avatars-new.png",torso:{x:0,y:536,w:168,h:96},head:{x:152,y:264,w:80,h:88,offX:40,overlapY:8},centerX:60,centerY:58});sc.Nf.quadroguardFemale=a({src:"avatars-new.png",torso:{x:0,y:472,w:128,h:64},head:{x:328,y:216,w:96,h:80,offX:16,overlapY:0},centerX:42,centerY:46});sc.Nf.quadroguardFemalePony=a({src:"avatars-new.png",torso:{x:0,y:472,w:128,h:64},head:{x:336,y:296,w:88,h:88,offX:24,overlapY:0},centerX:44,centerY:54});sc.Nf.spheromancerMale=a({src:"avatars-new.png",
torso:{x:0,y:400,w:135,h:72},head:{x:328,y:112,w:96,h:104,offX:24,overlapY:0},centerX:50,centerY:66});sc.Nf.spheromancerFemale=a({src:"avatars-new.png",torso:{x:168,y:576,w:96,h:56},head:{x:232,y:264,w:88,h:112,offX:0,overlapY:0},centerX:30,centerY:66});sc.Nf.shadMale=a({src:"shad-portrait.png",torso:{x:0,y:0,w:120,h:72},head:{x:120,y:0,w:96,h:88,offX:8,overlapY:0},centerX:43,centerY:55});sc.Nf.shadFemale=a({src:"shad-portrait.png",torso:{x:0,y:72,w:112,h:48},head:{x:216,y:0,w:80,h:96,offX:8,overlapY:0},
centerX:43,centerY:55})});ig.J=h;
ig.N("game.feature.character.character").O("game.feature.character.abstract-face").K(function(){sc.i9=ig.XE.extend({Wi:"Character",data:q,name:q,uoa:q,f:function(a){this.parent(a);this.name=a},getExpression:function(a){return this.data.face&&this.data.face.expressions[a]},Wo:function(){this.uoa&&this.uoa.Tc()},oG:function(){return ig.root+this.path.vm("data/characters/",".json")+ig.Kn()},onload:function(a){this.data=a;if(this.data.face){this.data.face.ABSTRACT&&(this.data.face=sc.Nf[this.data.face.ABSTRACT]);
this.uoa=new ig.ia("media/face/"+this.data.face.src)}},Zzb:function(a){var b;if(this.data&&this.data.face&&this.data.face.expressions){var a=this.data.face.expressions[a],c=this.data.face.parts;if(a)for(var a=a.faces,d=a.length;d--;)for(var f=a[d].length;f--;){var i=a[d][f];if(i=c[f]&&c[f][i]&&c[f][i].img){b||(b={});b[i]||(b[i]=new ig.ia("media/face/"+this.data.face.subImages[i]))}}}return b}});sc.lI=ig.qP.extend({Wi:"CHAR_EXPRESSION",Ad:q,IJ:q,Gca:q,f:function(a,b){this.parent();this.Ad=new sc.i9(a);
this.IJ=b;this.Ad.Yt(this)},NJ:function(a,b){return a+"|"+b},Wo:function(){this.Ad&&this.Ad.Tc();if(this.Gca)for(var a in this.Gca)this.Gca[a].Tc()},Eq:function(a){if(a)this.Gca=this.Ad.Zzb(this.IJ)},clone:function(){return new sc.lI(this.Ad.name,this.IJ)}})});ig.J=h;
ig.N("game.feature.character.char-templates").O("impact.base.loader").K(function(){ig.yqa.Lg("NPCBasic",{name:{jsonPARAM:"name","default":q},gender:{jsonPARAM:"gender","default":q},animSheet:{DOCTYPE:"MULTI_DIR_ANIMATION",namedSheets:{move:{src:{jsonPARAM:"img"},width:{jsonPARAM:"width","default":32},height:{jsonPARAM:"height","default":40},xCount:3,offX:{jsonPARAM:"x"},offY:{jsonPARAM:"y"}},sit:{jsonIF:"sitX",src:{jsonPARAM:"img"},width:32,height:40,xCount:1,offX:{jsonPARAM:"sitX"},offY:{jsonPARAM:"sitY"}},
sit2:{jsonIF:"sit2X",src:{jsonPARAM:"img"},width:32,height:40,xCount:1,offX:{jsonPARAM:"sit2X"},offY:{jsonPARAM:"sit2Y"}}},shapeType:"Y_FLAT",offset:{x:0,y:-2,z:0},SUB:[{sheet:"move",dirs:4,flipX:[0,0,0,1],tileOffsets:[0,3,6,3],SUB:[{name:"idle",time:1,repeat:y,frames:[1]},{name:"walk",time:0.133,repeat:h,frames:[0,1,2,1]}]},{jsonIF:"sitX",sheet:"sit",dirs:4,flipX:[0,0,0,1],tileOffsets:[0,1,2,1],SUB:[{name:"sit",time:1,repeat:y,frames:[0]}]},{jsonIF:"sit2X",sheet:"sit2",dirs:4,flipX:[0,0,0,1],tileOffsets:[0,
1,2,1],SUB:[{name:"sit2",time:1,repeat:y,frames:[0]}]}]},walkAnimSet:{normal:{idle:"idle",move:"walk"},sit:{jsonIF:"sitX",idle:"sit"},sit2:{jsonIF:"sit2X",idle:"sit2"}},walkAnims:"normal",configs:{normal:{relativeVel:0.5},sit:{jsonIF:"sitX",walkAnims:"sit",shadow:0},sitFloat:{jsonIF:"sitX",walkAnims:"sit",zGravityFactor:0,shadow:0},sit2:{jsonIF:"sit2X",walkAnims:"sit2",shadow:0},sit2Float:{jsonIF:"sit2X",walkAnims:"sit2",shadow:0,zGravityFactor:0}},face:{ABSTRACT:{jsonPARAM:"face"}}});ig.yqa.Lg("NPCAvatarSimple",
{name:{jsonPARAM:"name","default":q},realname:{jsonPARAM:"realname","default":q},gender:{jsonPARAM:"gender","default":q},animSheet:{DOCTYPE:"MULTI_DIR_ANIMATION",namedSheets:{move:{src:{jsonPARAM:"img"},width:32,height:40,xCount:3,offX:{jsonPARAM:"x"},offY:{jsonPARAM:"y"}},offline:{src:{jsonPARAM:"img"},width:32,height:40,xCount:3,offX:{jsonPARAM:"offlineX"},offY:{jsonPARAM:"offlineY"}},run:{jsonIF:"runSrc",src:{jsonPARAM:"runSrc"},width:32,height:40,xCount:5,offX:{jsonPARAM:"runX"},offY:{jsonPARAM:"runY"}}},
shapeType:"Y_FLAT",offset:{x:0,y:-2,z:0},SUB:[{sheet:"move",dirs:4,flipX:[0,0,0,1],tileOffsets:[0,3,6,3],SUB:[{name:"idle",time:1,repeat:y,frames:[1]},{name:"walk",time:0.133,repeat:h,frames:[0,1,2,1]},{sheet:"offline",name:"offline",time:0.166,repeat:h,frames:[0,1,2]}]},{jsonIF:"runSrc",sheet:"run",dirs:6,flipX:[0,0,0,1,1,1],tileOffsets:[0,5,10,10,5,0],SUB:[{name:"run",time:0.1,repeat:h,frames:[0,1,2,3]},{name:"jump",time:0.1,repeat:h,frames:[3]},{name:"fall",time:0.1,repeat:h,frames:[4]}]},{sheet:"move",
dirs:2,flipX:[0,1],tileOffsets:[9,9],SUB:[{name:"ground",time:1,repeat:y,frames:[0],offset:{x:0,y:2,z:0}}]}]},walkAnimSet:{normal:{idle:"idle",move:"walk",run:{jsonIF:"runSrc",jsonTHEN:"run"},jump:{jsonIF:"runSrc",jsonTHEN:"jump"},fall:{jsonIF:"runSrc",jsonTHEN:"fall"}},ground:{idle:"ground"},offline:{idle:"offline"}},walkAnims:"normal",configs:{normal:{relativeVel:0.5},run:{jsonIF:"runSrc",relativeVel:1},ground:{walkAnims:"ground"},groundFloat:{walkAnims:"ground",zGravityFactor:0,shadow:0},offline:{walkAnims:"offline"}},
face:{ABSTRACT:{jsonPARAM:"face"}}})});ig.J=h;ig.N("game.feature.character.plug-in").O("game.feature.character.character","game.feature.character.char-templates").K(J());ig.J=h;
ig.N("game.feature.combat.combat").O("impact.base.game","impact.feature.effect.effect-sheet","impact.feature.database.database","impact.feature.navigation.navigation","game.feature.model.game-model").K(function(){sc.pd={PLAYER:1,ENEMY:2,OTHER:3};sc.pP={METAL:1,ORGANIC:2};sc.Nx={ORDER:0,NAME:1,LEVEL:2,AREA:3};var a={};a[sc.ha.NEUTRAL]="neutral";a[sc.ha.HEAT]="heat";a[sc.ha.COLD]="cold";a[sc.ha.SHOCK]="shock";a[sc.ha.WAVE]="wave";sc.U8={SPAMM:{$R:0.25},OFTEN:{$R:0.5},NORMAL:{$R:1},SOMETIMES:{$R:2.5},
RARE:{$R:5},VERY_RARE:{$R:10}};var b=[1,0.85,0.7],c=[],d;for(d in sc.U8)c.push(d);sc.gja={DEFEATED:1};var f={};d=f[sc.ha.NEUTRAL]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/ball-hit-light1.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/ball-hit-light2.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/ball-hit-light3.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/ball-hit-light4.ogg",1,0.1,"hitLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/ball-hit-medium1.ogg",
1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/ball-hit-medium2.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/ball-hit-medium3.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/ball-hit-medium4.ogg",1,0.1,"hitMedium")];d[sc.Wb.HEAVY]=[new ig.ka("media/sound/battle/airon/ball-hit-hard1.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/ball-hit-hard2.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/ball-hit-hard3.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/ball-hit-hard4.ogg",
1,0.1,"hitHeavy")];d[sc.Wb.MASSIVE]=[new ig.ka("media/sound/battle/airon/ball-hit-hard3.ogg",1,0.1,"hitMassive"),new ig.ka("media/sound/battle/airon/ball-hit-hard4.ogg",1,0.1,"hitMassive")];d=f[sc.ha.HEAT]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/fire-hit-light1.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/fire-hit-light2.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/fire-hit-light3.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/fire-hit-light4.ogg",
1,0.1,"hitLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/fire-hit-medium1.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/fire-hit-medium2.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/fire-hit-medium3.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/fire-hit-medium4.ogg",1,0.1,"hitMedium")];d[sc.Wb.HEAVY]=[new ig.ka("media/sound/battle/airon/fire-hit-hard1.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/fire-hit-hard2.ogg",1,0.1,"hitHeavy"),
new ig.ka("media/sound/battle/airon/fire-hit-hard3.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/fire-hit-hard4.ogg",1,0.1,"hitHeavy")];d[sc.Wb.MASSIVE]=[new ig.ka("media/sound/battle/airon/fire-hit-hard3.ogg",1,0.1,"hitMassive"),new ig.ka("media/sound/battle/airon/fire-hit-hard4.ogg",1,0.1,"hitMassive")];d=f[sc.ha.COLD]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-light1.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-light2.ogg",
1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-light3.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-light4.ogg",1,0.1,"hitLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-medium1.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-medium2.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-medium3.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-medium4.oggg",
1,0.1,"hitMedium")];d[sc.Wb.HEAVY]=[new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard1.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard2.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard3.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard4.ogg",1,0.1,"hitHeavy")];d[sc.Wb.MASSIVE]=[new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard3.ogg",1,0.1,"hitMassive"),new ig.ka("media/sound/battle/airon/cold/ball-hit-cold-hard4.ogg",
1,0.1,"hitMassive")];d=f[sc.ha.SHOCK]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/shock/hit-shock-light1.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/shock/hit-shock-light2.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/shock/hit-shock-light3.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/shock/hit-shock-light4.ogg",1,0.1,"hitLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/shock/hit-shock-medium1.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/shock/hit-shock-medium2.ogg",
1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/shock/hit-shock-medium3.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/shock/hit-shock-medium4.oggg",1,0.1,"hitMedium")];d[sc.Wb.HEAVY]=[new ig.ka("media/sound/battle/airon/shock/hit-shock-hard1.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/shock/hit-shock-hard2.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/shock/hit-shock-hard3.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/shock/hit-shock-hard4.ogg",
1,0.1,"hitHeavy")];d[sc.Wb.MASSIVE]=[new ig.ka("media/sound/battle/airon/shock/hit-shock-hard3.ogg",1,0.1,"hitMassive"),new ig.ka("media/sound/battle/airon/shock/hit-shock-hard4.ogg",1,0.1,"hitMassive")];d=f[sc.ha.WAVE]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/wave/hit-wave-light1.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/wave/hit-wave-light2.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/wave/hit-wave-light3.ogg",1,0.1,"hitLight"),new ig.ka("media/sound/battle/airon/wave/hit-wave-light4.ogg",
1,0.1,"hitLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/wave/hit-wave-medium1.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/wave/hit-wave-medium2.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/wave/hit-wave-medium3.ogg",1,0.1,"hitMedium"),new ig.ka("media/sound/battle/airon/wave/hit-wave-medium4.oggg",1,0.1,"hitMedium")];d[sc.Wb.HEAVY]=[new ig.ka("media/sound/battle/airon/wave/hit-wave-hard1.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/wave/hit-wave-hard2.ogg",
1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/wave/hit-wave-hard3.ogg",1,0.1,"hitHeavy"),new ig.ka("media/sound/battle/airon/wave/hit-wave-hard4.ogg",1,0.1,"hitHeavy")];d[sc.Wb.MASSIVE]=[new ig.ka("media/sound/battle/airon/wave/hit-wave-hard3.ogg",1,0.1,"hitMassive"),new ig.ka("media/sound/battle/airon/wave/hit-wave-hard4.ogg",1,0.1,"hitMassive")];var i={ignore:new ig.ka("media/sound/battle/ball-kill.ogg",0.8,0.1),shielded:new ig.ka("media/sound/battle/hit-block.ogg",0.8,0.05),perfectShielded:new ig.ka("media/sound/battle/hit-counter-echo.ogg",
1,0.05),neutralized:new ig.ka("media/sound/battle/blubb-4.ogg",1,0.05)},j={};d=j[sc.pP.METAL]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/hit-metal-light-2.ogg",0.6,0.1,"hitMatLight"),new ig.ka("media/sound/battle/airon/hit-metal-light-3.ogg",0.6,0.1,"hitMatLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/hit-metal-medium-1.ogg",1,0.1,"hitMatMedium"),new ig.ka("media/sound/battle/airon/hit-metal-medium-2.ogg",1,0.1,"hitMatMedium"),new ig.ka("media/sound/battle/airon/hit-metal-medium-3.ogg",
1,0.1,"hitMatMedium"),new ig.ka("media/sound/battle/airon/hit-metal-medium-4.ogg",1,0.1,"hitMatMedium")];d=j[sc.pP.ORGANIC]={};d[sc.Wb.LIGHT]=[new ig.ka("media/sound/battle/airon/hit-organic-1.ogg",0.6,0.1,"hitMatLight"),new ig.ka("media/sound/battle/airon/hit-organic-2.ogg",0.6,0.1,"hitMatLight"),new ig.ka("media/sound/battle/airon/hit-organic-3.ogg",0.6,0.1,"hitMatLight")];d[sc.Wb.MEDIUM]=[new ig.ka("media/sound/battle/airon/hit-organic-deep-1.ogg",0.8,0.1,"hitMatMedium"),new ig.ka("media/sound/battle/airon/hit-organic-deep-2.ogg",
0.8,0.1,"hitMatMedium"),new ig.ka("media/sound/battle/airon/hit-organic-deep-3.ogg",0.8,0.1,"hitMatMedium")];sc.QE={HP_BREAK_ZOOM:{fm:0.1,Ec:0.5,ms:0.2,mt:0.2,zoom:1.5,le:1,Q2:h},LAST_ENEMY_ZOOM:{fm:0.001,Ec:0.5,ms:0.2,mt:0.2,zoom:1.5,le:1,Q2:h},BOSS_ZOOM:{fm:0.001,Ec:1,ms:0.7,mt:1,zoom:1.5,le:1,Q2:h},BREAK_NONE:{fm:0,Ec:0,mt:0,zoom:0,label:"sc.gui.combat-msg.break",le:2,ms:0,KF:"NONE"},BREAK_NO_TEXT:{fm:0,Ec:0,mt:0,zoom:0,le:2,ms:0,KF:"NONE"},BREAK_LIGHT:{fm:0.001,Ec:0.1,mt:0.1,zoom:1,label:"sc.gui.combat-msg.break",
le:2,ms:0.1,KF:"LIGHT"},BREAK:{fm:0.001,Ec:0.2,mt:0.1,zoom:1.25,label:"sc.gui.combat-msg.break",le:2,ms:0.1,KF:"LIGHT"},BREAK_BIG:{fm:0.001,Ec:0.4,mt:0.1,zoom:1.5,label:"sc.gui.combat-msg.break",le:1,ms:0.1,KF:"LIGHT",Q2:h},BREAK_WIDE:{fm:0.001,Ec:0.4,mt:0.1,zoom:1.25,label:"sc.gui.combat-msg.break",le:1,ms:0.1,KF:"LIGHT",Q2:h},BREAK_WIDE_NOSLOW:{fm:1,Ec:0.4,mt:0.1,zoom:1.25,label:"sc.gui.combat-msg.break",le:1,ms:0.1,KF:"LIGHT",Q2:h},OVERLOAD:{fm:0.001,Ec:1,mt:0.3,zoom:1,le:1,ms:0.7},GUARD_COUNTER:{fm:0.001,
Ec:0.2,mt:0.1,zoom:1.25,label:"sc.gui.combat-msg.guard-counter",le:2,ms:0.1,KF:"LIGHT"},GUARD_BREAK:{fm:0.1,Ec:0.4,label:"sc.gui.combat-msg.guard-break",mt:0.1,zoom:1,le:1,ms:0.3,KF:"LIGHT"},RANK_UP:{fm:1,Ec:0.3,ms:0.2,mt:0.2,KF:"LIGHT"},PVP_KO:{fm:0.001,Ec:0.5,ms:0.2,mt:0.2,zoom:1.5,le:2},PVP_FINAL_KO:{fm:0.001,Ec:1,ms:0.7,mt:1,zoom:1.5,le:2},ONCE_MORE:{fm:0.001,Ec:0.6,label:"sc.gui.combat-msg.once-more",mt:0.3,zoom:1,le:1,ms:0.4},ELEMENT_SHIELD:{fm:0.001,Ec:0.2,mt:0.1,zoom:1.125,le:1,ms:0.1,KF:"LIGHT"}};
sc.f9={STUN_CANCEL:{Y:"\\i[stun-cancel]",kK:"sc.gui.combat.stun",gEb:h,duration:1}};sc.MRa=10;var k=Vec2.create(),l=Vec2.create(),m=Vec2.create(),n=Vec2.create(),o=Vec2.create(),t=Vec2.create(),p=Vec3.create(),r=Vec2.create(),u={HX:q,zb:q};sc.Ofb=ig.Uf.extend({Op:[],BC:{},I4:[],nv:{},Ioa:[],Aa:h,time:0,speed:1,n_:[],sKa:y,G:{hx:new ig.ud("default-hit"),og:new ig.ud("guard"),Ta:new ig.ud("combat"),pb:new ig.ud("combatant"),INb:new ig.ud("throw"),mode:new ig.ud("combat.mode"),ex:new ig.ud("drops")},
pa:{L5:0,lZ:[],Usa:0},z4:q,Uga:[],Jn:q,f:function(){this.parent("Combat");sc.P.Wa(sc.q,this);this.nv[sc.pd.PLAYER]=[];this.nv[sc.pd.ENEMY]=[];this.nv[sc.pd.OTHER]=[];window.Ed&&ig.Yh.Lg("enemies","EnemyEnumEditor","Enemies");this.Jn=ig.Yh.get("enemies");for(var a in this.Jn)if(this.Jn[a].track)for(var b=this.Jn[a].descriptions,c=b.length;c--;)if(b[c].condition){var d=new ig.de(b[c].condition);b[c].condObj=d}ig.ma.Up("combat",this,"VarCombatEditor")},XXb:function(){for(var a in this.Jn)this.Jn[a].track&&
sc.pa.Ni("combat","kill"+a,999)},B$a:L("speed"),QJ:function(a,b){var c=0,d=0,f;for(f in this.Jn)if(this.Jn[f].track)if(b){if(this.Jn[f].category==b){(sc.pa.Qf("combat","kill"+f)>=1||sc.pa.Qf("combat","kill"+f)<=-1)&&c++;d++}}else{(sc.pa.Qf("combat","kill"+f)>=1||sc.pa.Qf("combat","kill"+f)<=-1)&&c++;d++}return a?c/d:c},zda:function(a,b,c){var d=0,f=0,i=this.Jn,j=0,k=0,l;for(l in i)if(i[l].track&&!(b&&i[l].category!=b)){if(c){(sc.pa.Qf("combat","kill"+l)>=1||sc.pa.Qf("combat","kill"+l)<=-1)&&j++;k++}var m=
i[l].boss?1:i[l].kills||sc.MRa;(sc.pa.Qf("combat","kill"+l)<=-1||sc.pa.Qf("combat","kill"+l)>=m)&&d++;f++}if(c){c.Rg=j/k;c.C9a=d/f}else return a?d/f:d},Tzb:function(a){return!this.Jn[a]?q:this.Jn[a].offset||q},wDb:function(a){return!a||!this.Jn[a]?y:!this.Jn[a].disableAnalyze},RAa:function(a){this.nv[a.sa].indexOf(a)!=-1&&e(Error("Tried to add same combatant as active twice!"));this.nv[a.sa].push(a);if(a.sa==sc.pd.ENEMY&&a.kM==sc.pI.THREAT){this.n_.push(a);a.iJ==sc.qI.BOOSTED&&this.G.pb.va("boosted",
a,{align:"CENTER",group:"_boostedFX",duration:-1})}},gLa:function(a){this.nv[a.sa].ye(a);ig.bt.Pw(a,"_boostedFX")},ovb:function(a,b){a.target&&this.gLa(a);a.sa=b;a.target&&this.RAa(a)},iN:function(a,b){if(a==sc.pd.PLAYER)return sc.sa.tG("BEHAVIOUR").g8a?1:1+sc.sa.x2a();for(var c=this.nv[a],d=0,f=c.length;f--;)b&&c[f].Zm!=b||c[f].kM!=sc.pI.PEACEFUL&&d++;return d},o1a:function(a,b){for(var c=ig.copy(this.nv[a]),d=c.length;d--;)c[d].Wf()?c.splice(d,1):b&&(!c[d].Ah&&!ig.gl.ut(c[d],32))&&c.splice(d,1);
return c},NGa:function(){return sc.q.oe()||sc.q.mHa()||ig.r.vi.YQ},Uzb:function(){if(sc.sa.tG("BEHAVIOUR").g8a)return ig.r.cb;var a=[ig.r.cb];this.JUa(a,sc.sa.Xk(0),sc.sa.yF.aP>0);this.JUa(a,sc.sa.Xk(1),sc.sa.yF.aP>0);a.length>1&&Math.random()<sc.sa.yF.aP&&a.splice(0,1);return a[Math.floor(Math.random()*a.length)]},JUa:function(a,b,c){b&&(c||ig.gl.ut(b,32))&&a.push(b)},A2a:function(a){var b=ig.r.cb.vCa.BHa,c=sc.sa.tG("TARGET");if(c.Fta&&b&&!b.Wf()&&!b.Ve)return b;for(var d=this.o1a(sc.pd.ENEMY,h),
f=d.length;f--;)if(ig.navigation.Z4a(a,d[f])){if(sc.tn.zJ(d[f],a)){if(sc.tn.ZDb(d[f])||sc.tn.Bea(d[f]))return d[f];sc.tn.P4a(d[f])&&d.length>1&&d.splice(f,1)}}else d.splice(f,1);b&&(d.length>1&&!c.Fta)&&d.ye(b);return d[Math.floor(Math.random()*d.length)]},qTb:function(){for(var a=[],b=this.nv[sc.pd.ENEMY],c=b.length;c--;)a.indexOf(b[c].Zm)==-1&&a.push(b[c].Zm);return a},jda:function(a){return this.Jn[a]?ig.Ra.ic(this.Jn[a].name):"\\c[1]ERROR\\c[0]"},V1a:function(a){return this.Jn[a]?sc.wp[this.Jn[a].category||
"ANIMALS"]:sc.wp.ANIMALS},bvb:function(a){return!a.rma&&sc.pa.Qf("combat","kill"+a.path)>0&&this.V1a(a.path)!=sc.wp.PLAYERS},dZa:function(a,b){return!b&&sc.pa.Qf("combat","kill"+a)>0&&this.V1a(a)!=sc.wp.PLAYERS},Rzb:function(a){return this.Jn[a]?this.Jn[a].level:1},Pzb:function(a){return this.Jn[a]?sc.map.Kv(this.Jn[a].area,h):"\\c[1]ERROR\\c[0]"},ITb:function(a){return this.Jn[a]?this.Jn[a].itemDrops:"\\c[1]ERROR\\c[0]"},yLb:function(a){for(var b=ig.r.ln,c=b.length;c--;){var d=b[c];d instanceof ig.wa.Enemy&&
ig.gl.ut(d,0)&&d.Sn(a,h)}},v9a:function(a,b,c,d){for(var f=ig.r.ln,i=f.length;i--;){var j=f[i];j instanceof ig.wa.Enemy&&!j.Wf()&&(j!=b&&!(a&&j.Zm!=a))&&j.w4a(c,d)}},QKb:L("z4"),NFb:function(a,b){var c=sc.qi.VGb(b);c&&a&&this.yJ(a,b,c,h);if(b.Ah&&!b.Yv&&!sc.qi.wc()){c=ig.ma.get("stats.deaths")||0;ig.r.af();ig.ma.set("stats.deaths",c+1)}else if(b.sa==sc.pd.ENEMY){c=y;if(this.z4){for(var d=this.nv[b.sa],f=0,i=d.length;i--;)(!d[i].W||!d[i].W.Wf())&&f++;if(f==0){if(!c&&a){this.yJ(a,b,this.z4,h);c=h}this.z4=
q}}sc.q.c4a(1*b.hc.FDa)&&(!c&&a)&&this.yJ(a,a,sc.QE.RANK_UP)}},Rab:function(a,b,c){var d=sc.YP.TOP,f=-10;if(a.JR){d=sc.YP.BOTTOM;f=a.JR}else if(a.PF){d=sc.YP.BOTTOM;f=a.PF+48}a=new sc.gW(a,b,c||1,d,f);ig.X.vd(a)},LMa:function(a,b){var c=b.Y+ig.lang.get(b.kK),c=new sc.gW(a,c,b.duration||0.5,sc.YP.CENTER);b.gEb&&c.SKb();ig.X.vd(c)},yJ:function(a,b,c,d){if(c.label){var f=ig.lang.get(c.label);this.Rab(b,f)}f=[];if(d=d||a.Ah||c.Q2){f.push({type:"ADD_SLOW_MOTION",name:"levelUp",factor:c.fm,time:c.NXb||
0});c.le==1&&f.push({type:"SET_CAMERA_TARGET",entity:b,speed:0.1,transition:"EASE_OUT",zoom:c.zoom||1});c.le==2&&f.push({type:"SET_CAMERA_BETWEEN",entity1:a,entity2:b,speed:0.1,transition:"EASE_OUT",zoom:c.zoom||1})}c.ms&&f.push({type:"SET_ZOOM_BLUR",zoomType:c.KF||"MEDIUM",fadeIn:0.1,duration:c.ms,fadeOut:0.2});f.push({type:"WAIT",time:c.Ec,ignoreSlowDown:h});if(d){f.push({type:"CLEAR_SLOW_MOTION",name:"levelUp",time:c.mt});c.le&&f.push({type:"UNDO_CAMERA",speed:1,transition:"EASE_IN_OUT",wait:h})}a=
new ig.Ja({steps:f});ig.r.vi.Dp(a,ig.Qm.INTERRUPTABLE)},iKb:function(a,b){this.kKb(a,sc.lV.ENEMY_MSG,{key:b})},kKb:function(a,b,c){for(var d=ig.r.ln,f=d.length;f--;){var i=d[f];i instanceof ig.wa.Enemy&&!i.Wf()&&i.BT&&i.BT(a,b,c)}},xK:500,az:function(){if(!ig.Wv&&!ig.r.paused){if(this.Aa)this.time=this.time+ig.i.ja;if(this.n_.length>0){for(var a=0,b=[],c=this.n_.length;c--;){var d=this.n_[c],a=Math.max(a,d.hc.aa);b.indexOf(d.Zm)==-1&&b.push(d.Zm)}c=this.nv[sc.pd.ENEMY].length<=this.n_.length;sc.q.KJ||
sc.Ep.Ws("ENEMY_ATTACKS",{enemies:b,levelGap:a-sc.q.T.aa,playerStarted:this.sKa,battleStarted:c});this.n_.length=0;this.sKa=y}for(c=this.Ioa.length;c--;){a=this.Ioa[c];if(!a.VF||a.update()){a.Zy&&a.Zy();a.Zl();this.Ioa.splice(c,1)}}for(var f in this.BC){this.BC[f]=this.BC[f]-ig.i.ja;this.BC[f]<=0&&delete this.BC[f]}for(c=this.I4.length;c--;){f=this.I4[c];f.time=f.time-ig.i.ja;(f.time<=0||f.Q.su())&&this.I4.splice(c,1)}}},fj:function(){this.pa.L5=0;this.pa.lZ.length=0;this.Uga.length=0;this.n_.length=
0;this.z4=q},Ms:function(){this.Uga.length=0;this.z4=q},bm:function(a,b){if(b[0]=="combat"){var c=b.slice(2).join("."),c=c?c.replace(/\//g,"."):q;switch(b[1]){case "name":return this.jda(c);case "activeCnt":return this.iN(sc.pd.ENEMY,c);case "active":return sc.q.Qv();case "enemiesFound":return this.QJ(h);case "enemyReportsFound":return this.zda(h)}}e(Error("Unsupported var access path: "+a))},Ab:function(a,b,c){if(a instanceof sc.w9)if(b==sc.zf.Ew)this.setActive(!a.oe());else if(b==sc.zf.e9)if(c!=
g)if(c){this.pa.L5=0;this.pa.lZ.length=0;this.pa.Usa=sc.q.bS()}else{sc.Ep.Ws("BATTLE_OVER",{enemies:this.pa.lZ,killCount:this.pa.L5,rank:this.pa.Usa});sc.pa.Uta("combat","streakKilled",this.pa.L5)}else if(sc.q.IG()){sc.Ep.Ws("COOLDOWN_START",{enemies:this.pa.lZ,killCount:this.pa.L5,rank:sc.q.bS(),prevRank:this.pa.Usa});this.pa.lZ.length=0;this.pa.Usa=sc.q.bS()}},js:function(a){this.Ioa.push(a)},setActive:L("Aa"),qEa:function(){for(var a=this.nv[sc.pd.ENEMY],b=a.length;b--;)a[b].Sn(q);sc.q.qba()},
UAa:function(a){this.Op.push(a)},u9a:function(a){this.Op.ye(a)},$yb:function(a,b,c,d,f,i){for(var j=this.nv[sc.pd.ENEMY],k=j.length,f=f||d,l=0;k--;){var m=j[k];if(i||!m.su())if(!m.W||!m.W.$F){m.W.C5()&&m.W.Tvb();if(!m.El&&m.ewb(b)&&a.iYa(m,b,c)){l++;if(l==f)return h}}}return l>=d},r2a:function(a,b,c,d){for(var f=a.b.g,i=a.b.size,b=ig.r.Br(f.x-b,f.y-b,f.z,i.x+2*b,i.y+2*b,i.z+b,a),f=b.length;f--;){i=b[f];if(i.tq){var j=i.tq();if(j&&j.sa!=a.sa){j=i.cda&&i.cda();if(!j&&(!i.l5a||Vec2.Ig(i.b.V)))if(!(a instanceof
sc.F1)||!(i instanceof ig.wa.Enemy)||!sc.tn.hFb(i,a))continue;var k=q;if(j){u.HX=i;u.zb=j;k=u}if(!d||d.Nb(a,Math.random(),k)){j=ig.qd.Wk(a.b,i.b,n);if(!(Vec2.Qb(j,a.face)>Math.PI*c)){Vec2.Lc(j);if(Vec2.Qb(j,i.b.V)<Math.PI/2)return i}}}}}return q},UAb:function(a){return a==sc.pd.PLAYER?ig.r.cb.W.Gy():0},Era:function(a,b){if(!a.Bna){a.Bna=h;a.Tra(b);this.pa.L5++;if(a.Zm){sc.pa.bc("combat","totalKilled",1);var c=sc.pa.Qf("combat","kill"+a.Zm)||0,c=Math.max(1,c+1);sc.pa.Ni("combat","kill"+a.Zm,c);a.hc.Taa&&
sc.pa.bc("combat","aiGroupKill"+a.hc.Taa,1);a.iJ&&a.iJ==sc.qI.BOOSTED&&sc.pa.bc("combat","boostedKills",1);this.pa.lZ.indexOf(a.Zm)==-1&&this.pa.lZ.push(a.Zm);sc.Ep.Ws("ENEMY_DEFEATED",{enemy:a.Zm})}for(c=0;c<this.Op.length;++c){var d=this.Op[c].wJa(a,sc.gja.DEFEATED);if(d){var f=a,i=f.tb(k);ig.r.Pe("CombatantMarble",i.x,i.y,f.b.g.z,{target:d})}}}},rOb:function(){var a={Rg:0,C9a:0};this.zda(h,q,a);sc.pa.Ni("combat","enemyCompletionRate",a.Rg);sc.pa.Ni("combat","enemyReportsCompletionRate",a.C9a)},
LAb:function(a,b){for(var c=a.length;c--;)if(this.BC[a[c]])return y;for(c=a.length;c--;)this.BC[a[c]]=b[c]||0;return h},czb:function(a,b){if(this.BC[a])return y;this.BC[a]=b;return h},$1a:function(a){var b=1;a==sc.pd.PLAYER&&(b=b*sc.sa.aFa());return b=b*sc.qi.aFa()},RCb:function(a){for(var b=this.WVa(a,this.iN(a.sa),this.iN(sc.pd.PLAYER)),d=c.length;d--;){var f=c[d];a.k8["_freq"+f]=sc.U8[f].$R*b*(0.1+Math.random()*0.8)}},Cvb:function(a,b){for(var d=c.indexOf(b)+1;d--;){var f="_freq"+c[d];if(this.BC[f]||
a.k8[f]>0)return y}return h},kcb:function(a,b,d){var f=this.iN(a.sa),i=this.iN(sc.pd.PLAYER);if(f){var j=this.WVa(a,f,i),f=this.Jrb(a,f,i);a.q6={};b=c.indexOf(b)+1;for(i=1;b--;){var k=c[b],l=sc.U8[k],k="_freq"+k;a.q6[k]=Math.max(a.q6[k]||0,l.$R*j*(0.8+Math.random()*0.4)*i);d||(this.BC[k]=Math.max(this.BC[k]||0,l.$R*f*(0.8+Math.random()*0.4)*i));i=0.5}}},WVa:function(a,c,d){return Math.pow(c,0.75)*2*b[d-1]/this.speed},Jrb:function(a,c,d){return Math.pow(1/c,0.25)*2*b[d-1]/this.speed},Utb:function(a,
b){this.I4.push({Q:a,time:b})},G4a:function(a){for(var b=a.tb(k),c=0;c<this.I4.length;++c){var d=this.I4[c],f=d.Q.Qd();if(f){var i=d.Q.b.size.x+a.b.size.x,d=d.Q.tb(l),f=f.tb(m),f=Vec2.sub(f,d,n),j=Vec2.length(f);Vec2.normalize(f);var d=Vec2.sub(b,d,o),p=Vec2.ug(d,f);if(p<0||p>j)continue;f=Vec2.w_(f,t);d=Vec2.ug(d,f);if(Math.abs(d)>i*1.5)continue;return d>0?f:Vec2.Lc(f)}return y}},Oi:function(a,b,c,d,l,m,n){var o="";switch(c){case sc.Wb.NONE:o="none";break;case sc.Wb.LIGHT:o="light";break;case sc.Wb.MEDIUM:o=
"medium";break;case sc.Wb.HEAVY:o="heavy";break;case sc.Wb.MASSIVE:o="massive";break;case sc.Wb.BREAK:o="massive"}var D="";switch(d){case sc.ha.HEAT:D="Heat";break;case sc.ha.COLD:D="Cold";break;case sc.ha.SHOCK:D="Shock";break;case sc.ha.WAVE:D="Wave"}if(m){m=this.G.hx.Cg("critical",b.x,b.y,b.z,a,{angle:Math.PI*2*Math.random()});m.IK()}if(l==sc.cA.DI){m=ig.S4(a.face.x,a.face.y,8,r);m=this.G.og.va("perfectGuard",a,{align:"CENTER",angle:Vec2.Wm(m)});m.IK()}m=this.G.hx.Cg(o+D,b.x,b.y,b.z,a,{angle:Math.PI*
2*Math.random()});m.IK();if(!n){Vec2.Oa(k,b.x,b.y-b.z);if(l==sc.cA.kxa)b=i.neutralized;else if(l&&c!=sc.Wb.BREAK)b=l==sc.cA.DI?i.perfectShielded:i.shielded;else if(c==sc.Wb.NONE)b=i.ignore;else{b=f[d]||f[sc.ha.NEUTRAL];b=b[c]||b[sc.Wb.MASSIVE];d=Math.floor(Math.random()*b.length);b=b[d]}(m=b.play())&&m.Qta(k);if(!l&&a&&c!=sc.Wb.NONE){a=j[a.c6]||j[sc.pP.METAL];c=a[c]||a[sc.Wb.MEDIUM];a=Math.floor(Math.random()*c.length);b=c[a];(m=b.play())&&m.Qta(k)}}},eMb:function(a){this.G.ex.va("healing",a)},aMb:function(b,
c,d){c="chargeLevel"+c;d&&(c=c+a[d]);return this.G.Ta.va(c,b,{duration:-1,align:ig.Pa.CENTER})},sMb:function(b,c,d){c=a[c];d&&(c=c+"Charged");return this.G.INb.va(c,b,{duration:0,align:ig.Pa.FACE})},$ab:function(b,c){var d=a[c];ig.bt.Pw(b,"modeChange");return this.G.mode.va(d,b,{duration:0,align:ig.Pa.BOTTOM,group:"modeChange",offset:{x:0,y:0,z:16}})},Zab:function(b,c){var d=a[c]+"Aura",f=ig.bt.aAb(b);if(!(f&&f.ne.id=="combat.mode/"+d)){ig.bt.Pw(b,"modeAura");c!=sc.ha.NEUTRAL&&this.G.mode.va(d,b,
{duration:-1,align:ig.Pa.BOTTOM,group:"modeAura",offset:{x:0,y:0,z:12}})}},KZa:function(a){ig.bt.Pw(a,"modeAura")},nMb:function(b,c){var d=a[c]+"Dash";ig.bt.Pw(b,"modeDash");c!=sc.ha.NEUTRAL&&this.G.mode.va(d,b,{duration:0.3,align:ig.Pa.BOTTOM,group:"modeDash",offset:{x:0,y:0,z:12}})},fub:function(a){this.Uga.push(a.b)},f5a:function(a){for(var b=this.Uga.length;b--;)if(ig.qd.AN(a,this.Uga[b],h))return h;return y},tFb:function(a,b){for(var c=a.lc(ig.Pa.qPb,p),c=ig.r.lN(c,b,1,16,g,g,g,a),d=c.length;d--;){var f=
c[d];f instanceof ig.wa.Enemy&&(f.target||f.hc.DK(f,h))}},WGa:function(a){return a.target||a.sa==sc.pd.PLAYER&&sc.q.Es()||sc.qi.HS(a)?h:y},NDb:function(){for(var a=this.nv[sc.pd.ENEMY],b=a.length;b--;)if(a[b].kM==sc.pI.THREAT)return h;return y},Ozb:function(a,b){if(!a.hc)return 0;if(a.hc.rYa.iEb)return 1;var b=b||1,c=a.hc.FDa,d=sc.pa.Qf("combat","kill"+a.Zm)||0,f=0,d=d*c*b;if(a.hc.Taa){f=sc.pa.Qf("combat","aiGroupKill"+a.hc.Taa)||0;f=f*c*z;f>w/2&&(f=w/2)}else d=d*(1+z);c=Math.min(d+f,w);return Math.pow(c,
v)/Math.pow(w,v)},RTb:J(),bpa:function(a){return a instanceof sc.G1?a.q.sg:a instanceof ig.wa.Enemy?a.TA?a.TA.Qa:sc.ha.NEUTRAL:sc.ha.NEUTRAL}});var w=20,z=0.5,v=0.75;ig.Vf(function(){return sc.Ta=new sc.Ofb});k=Vec2.create();ig.$Ra.Lg(function(a,b){return b.sa!=sc.pd.PLAYER?y:a.B0a.partyBlocked})});ig.J=h;
ig.N("game.feature.combat.pvp").O("impact.base.game").K(function(){sc.Llb=ig.Uf.extend({Uo:[],state:0,round:0,GE:0,Mb:{},Rg:[],CHa:q,jy:y,sU:q,f:function(){this.parent("PvP");ig.ma.Up("pvp",this,"VarPvpEditor")},start:function(a,b){this.state=1;this.round=0;this.GE=a;this.Mb[sc.pd.PLAYER]=0;this.Mb[sc.pd.ENEMY]=0;this.Rg=b;sc.P.Ga(this,sc.xSa.Ymb,q);sc.q.zU(h,h)},aFa:function(){return!this.wc()?1:sc.q.T.wq(410)?0.2:sc.q.T.wq(223)?0.25:sc.q.T.wq(225)?0.33:0.5},wc:function(){return this.state!=0},ADb:function(){return this.state==
3},nDb:function(){return this.state==4},JDb:function(){return this.Mb[sc.pd.PLAYER]==this.GE||this.Mb[sc.pd.ENEMY]==this.GE},HS:function(a){return!this.wc()?y:a.sa==sc.pd.PLAYER?h:this.Rg.indexOf(a)!=-1},VGb:function(a){if(!this.wc())return y;if(a.sa==sc.pd.PLAYER){if(sc.sa.Wf())return this.Wab(sc.pd.ENEMY)}else{if(this.Rg.indexOf(a)==-1)return y;for(var a=h,b=this.Rg.length;b--;)this.Rg[b].Wf()||(a=y);if(a)return this.Wab(sc.pd.PLAYER)}},KIb:function(){this.jy=y},Wab:function(a){var b=++this.Mb[a];
this.CHa=a;this.state=3;ig.r.Yj();a=new sc.Klb;ig.X.vd(a);return sc.QE[b==this.GE?"PVP_FINAL_KO":"PVP_KO"]},QGb:function(a){var b=a==sc.pd.ENEMY?1:0.5,a=a==sc.pd.ENEMY?0.5:1;ig.r.cb.Nga(b);for(var c=sc.sa.He.length;c--;)sc.sa.Xk(c).Nga(b);for(c=this.Rg.length;c--;)this.Rg[c].Nga(a);this.state=this.JDb()?5:4;ig.r.Yj()},hNb:function(a){this.round=this.round+1;this.sU=new sc.Mlb(this.round,a);ig.X.vd(this.sU);this.jy=h},P0a:function(){this.state=2;if(this.sU){this.sU.remove();this.sU=q}for(var a=0;a<
this.Rg.length;++a)this.Rg[a].Sn(ig.r.cb,h);ig.r.Yj();this.KIb()},stop:function(){for(var a=this.Rg.length,b=this.Mb[sc.pd.PLAYER]==this.GE&&this.Mb[sc.pd.ENEMY]==0;a--;){this.Rg[a].WGb(this.CHa==sc.pd.PLAYER);b&&sc.pa.bc("pvp","flawlessWin-"+this.Rg[a].Zm,1)}this.state=0;this.Rg.length=0;sc.P.Ga(this,sc.xSa.bnb,q);sc.q.zU(y,h)},bm:function(a,b){if(b[0]=="pvp")switch(b[1]){case "active":return this.state!=0;case "brake":return this.state==4;case "finished":return this.state==5;case "round":return this.round;
case "lastWinPlayer":return this.CHa==sc.pd.PLAYER;case "playerPoints":return this.Mb[sc.pd.PLAYER];case "enemyPoints":return this.Mb[sc.pd.ENEMY]}e(Error("Unsupported var access path: "+a))},az:function(){if(this.state==3){var a=h;ig.r.cb.Yw!=sc.Px.sV&&(a=y);for(var b=sc.sa.He.length;b--;)sc.sa.Xk(b).Yw||(a=y);for(var c=h,b=this.Rg.length;b--;)this.Rg[b].Yw!=sc.Px.sV&&(c=y);if(a||c)this.QGb(a?sc.pd.ENEMY:sc.pd.PLAYER)}},fj:function(){this.GE=this.round=this.state=0;this.Rg.length=0;this.jy=y;if(this.sU){this.sU.remove();
this.sU=q}}});sc.xSa={Ymb:1,bnb:2,DQb:3};ig.Vf(function(){return sc.qi=new sc.Llb})});ig.J=h;
ig.N("game.feature.combat.combat-shield").O("game.feature.combat.model.combat-params").K(function(){sc.dA={REGULAR:1,BLOCK_ABOVE:2,BLOCK_ALL:3};sc.eQa=ig.Ca.extend({name:q,dJ:1,n4:[1,1,1,1],i5:sc.Wb.MASSIVE,NU:sc.Wb.HEAVY,duration:0,ne:g,IIa:y,f:function(a,b){this.name=b;this.dJ=a.baseFactor!==g?a.baseFactor:0;this.n4=a.elementFactors!==g?a.elementFactors:this.n4;this.pn=sc.dA[a.strength]||sc.dA.BLOCK_ALL;this.i5=sc.Wb[a.hitResist]||this.i5;this.NU=sc.Wb[a.stableOverride];this.IIa=a.neutralize;if(this.NU===
g)this.NU=sc.Wb.HEAVY;this.duration=a.duration!=g?a.duration:-1;if(a.effect){this.ne=new ig.Bi(a.effect);this.k1a=a.fxOffset}},Ka:function(){this.ne&&this.ne.Ka()},TD:q,zJa:q,wc:N(h),ZEa:function(a){return this.dJ*(a.element?this.n4[a.element-1]:1)},ota:N(h)});sc.Ufb=ig.Ca.extend({pb:q,Tn:q,n:0,oH:0,xDa:q,f:function(a,b,f){this.pb=a;this.Tn=b;this.oH=f||0;this.Tn.TD&&this.Tn.TD(a);if(this.Tn.ne)this.xDa=b.ne.va(a,{duration:-1,align:"CENTER",offset:this.Tn.k1a})},update:function(){if(this.Tn.duration!=
-1){this.n=this.n+ig.i.ja;if(this.n>=this.Tn.duration)return h}if(this.oH>0){this.oH=this.oH-ig.i.ja;if(this.oH<0)this.oH=0}return y},aHa:function(){return this.oH>0},pi:function(a){this.xDa&&this.xDa.stop();this.Tn.zJa&&this.Tn.zJa(a)},Zl:function(){this.pb.A9a(this)},dw:function(){this.pb.A9a(this)}});sc.mV={};var a=Vec2.create(),b=Vec2.create();sc.mV.DIRECTIONAL=sc.eQa.extend({t:new ig.u({attributes:{dJ:{c:"Number",d:"Basic effectiveness of shield. 0.1 = reduces damage to 10%."},n4:{c:"ElementDef",
d:"Effectiveness per element",I:h},pn:{c:"String",d:"Strength of shield. Determines what is blocked",U:sc.dA,XJa:h},i5:{c:"String",d:"Up to which attackType attacks are resisted by default",U:sc.Wb,I:h},NU:{c:"String",d:"If shield is effective, what is the new hit stable for the entity?",U:sc.Wb,I:h},duration:{c:"Number",d:"Duration of shield if -1: will last forever",I:h},ri:{c:"Number",d:"Range of shield per circularAngle. 0.5 = 50% circular angle protected",ab:0.5},back:{c:"Boolean",d:"If true: shield is around back of entity, not front"},
ne:{c:"Effect",d:"Effect to be shown while shield is active",I:h},k1a:{c:"Offset",d:"Offset to effects spanning (CENTER) by default",I:h},IIa:{c:"Boolean",d:"If true: entirely neutralize damage effect, even knockback + no damage + special sound",I:h}}}),ri:0.5,back:y,f:function(a,b){this.parent(a,b);this.pn=sc.dA[a.strength]||sc.dA.REGULAR;this.ri=a.range||0.5;this.back=a.back||y},wc:function(c,d){var f=c.VEa();f>1?ig.S4(c.face.x,c.face.y,f,b):Vec2.assign(b,c.face);this.back&&Vec2.Lc(b);var i=d.ipa(c,
a),i=Math.PI-Math.abs(Vec2.Qb(i,b)),f=this.ri*Math.PI;if(i<=f)return h;i=d.qu(c,a);i=Math.PI-Math.abs(Vec2.Qb(i,b));return i<=f/2?h:y},ota:function(){return this.ri>=1}});sc.mV.PARTS=sc.eQa.extend({t:new ig.u({attributes:{dJ:{c:"Number",d:"Basic effectiveness of shield. 0.1 = reduces damage to 10%."},n4:{c:"ElementDef",d:"Effectiveness per element",I:h},pn:{c:"String",d:"Strength of shield. Determines what is blocked",U:sc.dA,XJa:h},i5:{c:"String",d:"Up to which attackType attacks are resisted by default",
U:sc.Wb,I:h},NU:{c:"String",d:"If shield is effective, what is the new hit stable for the entity?",U:sc.Wb,I:h},duration:{c:"Number",d:"Duration of shield if -1: will last forever",I:h},QT:{c:"Array",d:"An array of part names that are protected",Xt:{c:"String"}},inverse:{c:"Boolean",d:"If true: Protect all parts that are NOT in the part list"},ne:{c:"Effect",d:"Effect to be shown while shield is active",I:h}}}),QT:q,inverse:y,f:function(a,b){this.parent(a,b);this.pn=sc.dA[a.strength]||sc.dA.BLOCK_ALL;
this.QT=a.parts||q;this.inverse=a.inverse||y},wc:function(a,b,f,i){a=this.QT.indexOf(i)!=-1;this.inverse&&(a=!a);return a},ota:N(h)});sc.mV.PLAYER=sc.mV.DIRECTIONAL.extend({t:new ig.u({attributes:{dJ:{c:"Number",d:"Basic effectiveness of shield. Is MULTIPLIED with calculated def effectiveness. 1.0 = normal shield defense",ab:1},n4:{c:"ElementDef",d:"Effectiveness per element",I:h},pn:{c:"String",d:"Strength of shield. Determines what is blocked",U:sc.dA,XJa:h},i5:{c:"String",d:"Up to which attackType attacks are resisted by default",
U:sc.Wb,I:h},NU:{c:"String",d:"If shield is effective, what is the new hit stable for the entity?",U:sc.Wb,I:h},duration:{c:"Number",d:"Duration of shield if -1: will last forever",I:h},ri:{c:"Number",d:"Range of shield per circularAngle. 0.5 = 50% circular angle protected",ab:0.5},back:{c:"Boolean",d:"If true: shield is around back of entity, not front"},a7a:{c:"Boolean",d:"If true, don't apply shield damage when effective (no guard break)"},ne:{c:"Effect",d:"Effect to be shown while shield is active. Won't show default effect when active.",
I:h},MIa:{c:"Boolean",d:"If true: Hide default shield graphics"}}}),f:function(a,b){this.parent(a,b);this.a7a=a.noShieldDamage||y;this.MIa=a.noDefaultFX||y},wc:function(a,b,f,i,j){if(!this.parent(a,b,f,i,j))return y;if(this.a7a||j)return h;b=this.O1a(f,a);return!a.Owb(f.Yi*Math.pow(b,1.5))},TD:function(a){!this.ne&&!this.MIa&&a.Sbb()},zJa:function(a){!this.ne&&!this.MIa&&a.Hxb()},ZEa:function(a,b){var f=this.parent(a,b),i=1,i=this.O1a(a,b),i=i<=1?0.2-(1-Math.pow(i,0.3))*1:0.2+(Math.pow(i,1.1)-1)*
0.35,i=i-b.W.Ag("GUARD_STRENGTH"),i=i.Rb(0,1);return f*i},O1a:function(a,b){var f=b.W.Td("defense");return!a.sv?0:a.sv.Td("attack")/f},ota:N(y)})});ig.J=h;
ig.N("game.feature.combat.combat-force").O("impact.base.entity").K(function(){sc.nV=ig.Ca.extend({pb:q,VF:q,f:function(a){this.pb=a;this.VF=a.te&&a.te()||a},update:N(h),zea:N(y),Zl:function(){this.VF&&this.VF.dE(this);this.VF=q},tq:M("pb"),te:M("VF"),Zy:q});var a=Vec3.create(),b=Vec2.create(),c=Vec2.create(),d=Vec2.create(),f=Vec2.create(),i=Vec3.create();sc.vw=sc.nV.extend({zb:q,align:ig.Pa.BOTTOM,offset:q,Se:0,dir:q,pp:1,kf:0,Ij:0,Sj:0,duration:0,soa:0,Xaa:y,my:y,us:0,sa:0,nta:y,g:q,e7:0,n:0,NY:q,
h5:q,f:function(a,b){this.parent(a);this.sa=sc.pd[b.party]||this.pb.sa;this.zb=new sc.mL(a.W,b.attack);this.align=ig.Pa[b.align]||this.align;this.g=b.pos||q;if(b.fixPos)this.g=a.lc(this.align);this.dir=b.dir||q;this.offset=b.offset||q;this.Se=b.radius;this.pp=b.yScale||1;this.kf=b.zHeight||24;this.Ij=Math.PI*2*(b.centralAngle||1);this.Sj=b.startAngle!==g?Math.PI*2*b.startAngle:-this.Ij/2;this.duration=b.duration||0;this.soa=b.expandRadius||0;this.Xaa=b.alwaysFull||y;this.my=b.clockwise||y;this.us=
b.flipLeftFace||y;this.nta=b.rectangular||y;this.repeat=b.repeat||y;this.COa=b.uniformHitDir||y;this.s3=b.checkCollision||y;this.n=this.duration;this.e7=0;this.NY=[];this.h5=[]},update:function(){this.n=this.n-this.pb.b.qD(h);var a=this.duration?1-(this.n/this.duration).Rb(0,1):1,b=this.Sj+Math.max(0,this.e7-Math.PI*0.5),c=this.Ij*a;if(this.Xaa){this.e7=0;b=this.Sj;c=this.Ij}var d=this.Sj+c,f=this.Se+a*this.soa;if(this.n<=0||c-this.e7>Math.PI*0.1){if(!this.Xaa)for(;this.h5.length&&c-this.h5[0]>Math.PI;){this.NY.shift();
this.h5.shift()}this.e7=c;a=!this.my;this.us&&ig.K4a(this.pb,this.us)&&(a=!a);if(a){a=b;b=-d;d=-a}var a=this.sa,i=this.Xaa&&this.Ij>=Math.PI*2?q:this.dir||this.pb.face,j=this.pb.sa==this.sa?this.pb:q,k=this.xW(),j=ig.r.lN(k,f,this.pp,this.kf,i,b,d,j,this.NY,this.nta,this.s3);window.Ov.Xf.fMb&&(this.nta||ig.qy.QRb(k.x,k.y,k.z,f,i,b,d,this.kf,"red",0.1,this.pp));for(b=j.length;b--;){d=y;f=j[b];i=q;if(f.b.xi&&f.b.NT){i=f.b.xi.Q.uid+f.b.NT;if(this.NY.indexOf(i)!=-1)continue}if(d=f.dZ&&a!=f.sa?f.me(this,
this.zb):h){f.sj&&f.sj(this);i?this.NY.push(i):this.NY.push(f);this.h5.push(c)}}}if(this.repeat&&this.n<=0){this.n=this.duration;this.NY.length=0;this.e7=this.h5.length=0}return this.n<=0},Gf:function(){return this.zb&&this.zb.element||sc.ha.NEUTRAL},aj:function(a,b){var d=b||Vec3.create();a.lc(ig.Pa.CENTER,d);var f=this.xW();Vec2.assign(c,d);Vec2.sub(c,f);var i=this.duration?1-(this.n/this.duration).Rb(0,1):1,i=this.Se+i*this.soa;if(Vec2.length(c)>i){Vec2.length(c,i);Vec2.assign(d,f);Vec2.add(d,
c)}d.z=d.z.Rb(f.z,f.z+this.kf);return d},qu:function(a,b){var d=b||Vec2.create();a.tb(d);this.COa?Vec2.sub(d,this.pb.tb(c)):Vec2.sub(d,this.xW());if(!this.g&&Vec2.ug(d,this.pb.face)>0){Vec2.assign(c,this.pb.face);Vec2.length(c,2);Vec2.length(d,1);Vec2.add(d,c)}return d},ipa:function(a,b){b=b||Vec2.create();a.tb(b);this.COa?Vec2.sub(b,this.pb.tb(c)):Vec2.sub(b,this.xW());return b},eda:function(a){a=this.ipa(a,b);return Math.abs(a.x)>Math.abs(a.y)?ig.Jc.Lk[a.x<0?"EAST":"WEST"]:ig.Jc.Lk[a.y<0?"SOUTH":
"NORTH"]},xW:function(){if(this.g)return this.g;var b=this.pb.lc(this.align,a);this.offset&&Vec3.add(b,this.offset);return b},zea:M("repeat")});sc.mwa={TOWARD:1,AWAY:2};sc.rQa=sc.nV.extend({zb:q,kGa:q,align:ig.Pa.CENTER,Hf:0,jGa:0,ne:q,Eva:q,n:0,f:function(a,b,c,d){this.parent(a);this.zb=new sc.mL(this.VF.W,c.attack);this.kGa=sc.mwa[c.hitDir||"AWAY"];this.align=ig.Pa[c.align]||this.align;this.Hf=c.hitCount||1;this.jGa=c.hitDelay||0.1;this.n=0;this.ne=d;this.Eva=b},update:function(){if(!this.Eva.me)return h;
for(this.n=this.n-this.pb.b.qD(h);this.Hf&&this.n<=0;){this.n=this.n+this.jGa;this.Hf--;this.ne&&this.ne.va(this.Eva,{align:this.align});this.Eva.me(this,this.zb)}return this.Hf==0},Gf:function(){return this.zb&&this.zb.element||sc.ha.NEUTRAL},aj:function(a,b){var c=b||Vec2.create();a.tb(c);c.z=a.b.g.z+a.b.size.z/2;return c},qu:function(a,b){var c=b||Vec2.create();a.tb(c);this.pb.tb(d);Vec2.sub(c,d);this.kGa==sc.mwa.TOWARD&&Vec2.Lc(c);return c},ipa:function(a,b){return this.qu(a,b)},eda:function(a){a=
this.qu(a,b);return Math.abs(a.x)>Math.abs(a.y)?ig.Jc.Lk[a.x<0?"EAST":"WEST"]:ig.Jc.Lk[a.y<0?"SOUTH":"NORTH"]}});sc.Bxa={EASY_ESCAPE:40,WALK_ESCAPE:100,RUN_ESCAPE:130,DASH_ESCAPE:190,NO_ESCAPE:300,SERIOUSLY_GO_AWAY:500};sc.Jlb=sc.nV.extend({Se:0,Kca:0,kf:0,YY:[],FEa:[],n:0,FWb:y,f:function(a,b){this.parent(a);this.Se=b.radius;this.nfa=b.minRadius||0;this.Kca=b.fadeRadius;this.YDa=b.faceDist;this.pn=sc.Bxa[b.strength]||sc.Bxa.WALK_ESCAPE;this.yj=new ig.CV;this.yj.kab(b.pull?sc.Mwa.wSa:sc.Mwa.olb,this.Se,
this.Kca,this.pn);this.kf=b.zHeight||32;this.n=b.duration||0;this.sa=sc.pd[b.party]||this.pb.sa;this.ne=b.effect||q;this.align=ig.Pa[b.align]||ig.Pa.BOTTOM},update:function(){var c=this.pb.lc(this.align,a);if(this.YDa){var d=Vec2.assign(b,this.pb.face);Vec2.length(d,this.YDa);Vec2.add(c,d)}this.yj.qLb(c);for(var f=this.pb.b,d=this.YY.length;d--;){var i=this.YY[d],j=i.b,k=Vec2.sub(i.tb(b),c),k=Vec2.length(k),r=k-this.pb.b.size.y/2-i.b.size.y/2;(k>this.Se+this.Kca||this.nfa&&r<this.nfa||j.g.z>f.g.z+
this.kf||j.g.z+j.size.z<f.g.z)&&this.XWa(d)}f=ig.r.lN(c,this.Se+this.Kca,1,this.kf,q,q,q,this.VF,this.YY,y);for(d=f.length;d--;){i=f[d];if(i!=this.pb&&(i.Aq&&i instanceof ig.wa.Combatant&&i.sa!=this.sa)&&i.b.rt==ig.hI.LOOSE&&i.b.di!=-1){k=Vec2.sub(i.tb(b),c);k=Vec2.length(k);r=k-this.pb.b.size.y/2-i.b.size.y/2;if(!(this.nfa&&r<this.nfa)){i.Aq.L2(this.yj);this.YY.push(i);if(this.ne){i=this.ne.va(i,{duration:-1,align:ig.Pa.CENTER,target2:this.pb,target2Align:ig.Pa.CENTER});this.FEa.push(i)}}}}if(this.n>
0){this.n=this.n-ig.i.ja;if(this.n<=0)this.n=0}return this.n==0},XWa:function(a){this.YY[a].Aq.p_(this.yj);this.YY.splice(a,1);if(this.ne){this.FEa[a].stop();this.FEa.splice(a,1)}},Zy:function(){for(var a=this.YY.length;a--;)this.XWa(a)},zea:function(){return this.n<0}});sc.zxa={SQUARE:function(a,b,c,d,f){f=Math.abs(f+0.5-c/2);return a*b/2>=Math.abs(d+0.5-b/2)&&a*c/2>=f},CIRCLE:function(a,b,c,d,f){d=Math.abs(d+0.5-b/2);f=Math.abs(f+0.5-c/2);return a*Math.sqrt(b*b/4+c*c/4)>=Math.sqrt(d*d+f*f)}};sc.Hlb=
sc.nV.extend({f:function(a,b){this.parent(a);this.ro=b.proxies;this.pattern=b.pattern;this.Bb=b.tilesize;this.align=ig.Pa[b.align]||ig.Pa.BOTTOM;this.offset=b.offset;this.duration=b.duration;this.gNa=b.spawnDelay||0;this.Ww=this.n=0;this.width=this.pattern[0].length;this.height=this.pattern.length;this.lEa=sc.zxa[b.flow]||sc.zxa.CIRCLE;this.kJa=0;this.RO=[]},update:function(){var b=this.pb.lc(this.align,a);Vec3.add(b,this.offset);this.n=this.n+ig.i.ja;for(var c=this.duration?this.n/this.duration:
1,d=this.height;d--;)for(var f=this.width;f--;)if(this.pattern[d]&&this.pattern[d][f]&&(!this.kJa||!this.lEa(this.kJa,this.width,this.height,f,d))&&this.lEa(c,this.width,this.height,f,d)){var i=this.pattern[d][f]-1,j=sc.dq.hS(this.ro[i],this.VF);if(j){var k=b.x+(f+0.5-this.width/2)*this.Bb,u=b.y+(d+0.5-this.height/2)*this.Bb;if(!ig.r.sea(k-this.Bb/2,u-this.Bb/2,b.z,this.Bb,this.Bb,16)){if(this.e6!=q){var w=ig.r.Ie.x1a(k-1,u-1,b.z,2,2);if(b.z-w>this.e6)continue}if(this.gNa)this.RO.push({x:k,y:u,index:i-
1,proxy:j});else{j=j.Vn(k,u,b.z,this.pb,this.pb.face);j.setAttribute("gridIndex",i+1)}}}}if(this.Ww){this.Ww=this.Ww-ig.i.ja;if(this.Ww<=0)this.Ww=0}for(;this.RO.length>0&&!this.Ww;){d=this.RO.shift();j=d.proxy.Vn(d.x,d.y,b.z,this.pb,this.pb.face);j.setAttribute("gridIndex",d.index);this.Ww=this.Ww+this.gNa}this.kJa=c;return this.n>=this.duration&&this.RO.length==0}});var j=[{Se:1,Qb:0,x:0.5,y:1},{Se:1,Qb:0.25,x:0.5,y:0},{Se:1,Qb:0.5,x:1,y:0.5},{Se:1,Qb:0.75,x:0,y:0.5}],k={};sc.P1={NONE:0,CLOSER:1,
DROP:2,ALT_DIR:3};sc.NTa=ig.Ca.extend({align:ig.Pa.FACE,offset:q,Ij:0,Sj:0,OQ:0,count:1,duration:0,my:y,random:y,us:0,dir:q,yT:q,Hma:y,Gb:q,e6:q,wia:0,delay:0,pp:0,repeat:y,mO:y,Qea:0,f:function(a,b,c){this.align=ig.Pa[a.align]||this.align;this.offset=a.offset||q;this.Ij=Math.PI*2*(a.centralAngle||0);this.Sj=a.startAngle!==g?Math.PI*2*a.startAngle:-this.Ij/2;this.Qq=a.startDist||0;this.rNa=a.startDistAdd||0;this.g8=sc.P1[a.startDistCollide]||sc.P1.NONE;this.OQ=(a.angleVary||0)*Math.PI*2;this.count=
a.count||1;this.duration=a.duration||0;this.my=a.clockwise||y;this.us=a.flipLeftFace||y;this.random=a.random||y;this.n=this.duration;this.dir=a.dir||q;this.pp=a.yScale||1;this.yT=a.offsetArea||q;this.Hma=a.circularArea||y;this.wia=a.uniformDir||0;this.delay=a.delay||0;this.Gb=b;this.repeat=a.repeat;this.mO=c;if(a.maxGroundDistance!=q&&a.maxGroundDistance!=g)this.e6=a.maxGroundDistance;if(a.terrainFilter){b=a.terrainFilter;this.Rua=[];for(c=b.length;c--;)this.Rua.push(ig.hd[b[c]])}this.Qea=a.limitRangeOnColl||
0},k4a:function(a){a.count=ig.Ja.eh(this.count);a.wua=0;return this.duration},Vn:function(a,b,n,o,t,p){var o=o||16,t=t||16,p=p||16,r=this.dir&&ig.Xe.vG(this.dir,a,c)||Vec2.assign(c,a.face);this.Qq&&Vec2.length(r,this.Qq);if(this.g8||this.Qea)var u=Math.min((this.mO||a).b.size.x,o),w=Math.min((this.mO||a).b.size.y,t);if(this.Qea){this.Qea=0;this.csb(a,r,u,w,p)}b=b-a.b.qD(h);if(this.duration-b<this.delay)return b;var z=this.duration?1-(b/(this.duration-this.delay)).Rb(0,1):1,v=this.repeat?n.count:n.count-
1,z=this.repeat?Math.ceil(v*z):1+Math.floor(v*z);if(z>n.wua)for(var x=n.wua;x<z;++x){var A;A=0;if(v&&this.duration){A=(this.duration-this.delay)*(1-x/v);A=A-b}this.rNa&&Vec2.length(r,this.Qq+this.rNa*(x/(n.count-1||1)));A=this.xW(a,A);var F=this.random?Math.random():x/(n.count==1||this.Ij==Math.PI*2?n.count:n.count-1),B=this.Sj+F*this.Ij;this.my&&(B=-B);B=B+(Math.random()-0.5)*this.OQ;this.us&&ig.K4a(a,this.us)&&(B=-B);var C=Vec2.rotate(r,B,d),K=Vec3.Oa(i,0,0,0);if(this.Qq){F=1;if(this.g8){var I=
0.0625,G=y,D=y;do{var G=y,E=ig.r.Ie.Il(k);ig.r.trace(E,A.x-u/2,A.y-w/2,A.z,C.x,C.y*this.pp,u,w,p,ig.ca.IGNORE,a,g,h);F=E.Ne;if(E.Ne<1&&this.g8==sc.P1.ALT_DIR){Vec2.rotate(C,Math.PI*2*I);I=-I;I=I+(I>0?0.0625:-0.0625);G=Math.abs(I)<0.5}else E.Ne<1&&this.g8==sc.P1.DROP&&(D=h)}while(G);if(D)continue}K.x=K.x+C.x*F;K.y=K.y+C.y*this.pp*F}C.y=C.y*this.pp;if(this.yT){F=10;do{I=Math.random();G=Math.random();if(this.Hma){if(j[F-1]){I=j[F-1].Se;G=j[F-1].Qb}D=Vec2.Oa(f,0,Math.sqrt(I));Vec2.rotate(D,G*Math.PI*
2);I=this.yT.x/2*D.x;G=this.yT.y/2*D.y}else{if(j[F-1]){I=j[F-1].x;G=j[F-1].y}I=(I-0.5)*this.yT.x;G=(G-0.5)*this.yT.y}var D=A.x+K.x+I,E=A.y+K.y+G,H=A.z+K.z}while((ig.r.sea(D-o/2,E-t/2,H,o,t,0)||this.Rua&&this.Rua.indexOf(ig.Pb.YAb(D,E,H+4,o,t))==-1)&&--F);F==0&&(I=G=0);K.x=K.x+I;K.y=K.y+G}if(this.wia){C=Vec2.rotate(r,B*(1-this.wia),d);C.y=C.y*this.pp}if(this.e6!=q){B=ig.r.Ie.x1a(A.x+K.x-1,A.y+K.y-1,A.z+K.z,2,2);if(A.z+K.z-B>this.e6)continue}this.Gb(A.x+K.x,A.y+K.y,A.z+K.z,C,n)}n.wua=z;if(b<=0&&this.repeat){b=
b+(this.duration-this.delay);n.wua=0}return b},csb:function(a,b,c,f,i){for(var j=0,r=0,u=y,w=0,z=16,v=Math.PI*2/z;z--;){var x=ig.r.Ie.Il(k),A=this.xW(a,0),F=Vec2.rotate(b,w+r,d);ig.r.trace(x,A.x-c/2,A.y-f/2,A.z,F.x,F.y*this.pp,c,f,i-ig.lf.Rt,ig.ca.IGNORE,a,g,h);if(j){if(x.Ne<1!=u){u=!u;if(j==1){if(u){this.Sj=w+r-v;this.Ij=-r+v;r=0;v=-v;u=!u}else{w=this.Sj=w+r;this.Ij=r=0}j=2}else if(j==2)break}}else{j=1;u=x.Ne<1}r=r+v}if(j>1)this.Ij=this.Ij+r;console.log("Result",b,this.Sj/Math.PI/2,this.Ij/Math.PI/
2)},xW:function(b,c){if(this.mO)b=this.mO;var d=b.lc(this.align,a);if(b.Ah&&this.align==ig.Pa.BOTTOM){var f=b.WG===g?-1:b.WG;if(f>=0)d.z=Math.min(b.b.g.z,f)}this.offset&&Vec3.add(d,this.offset);Vec2.Tm(d,b.b.V,-c);return d}});sc.Ilb=sc.nV.extend({proxy:q,QO:q,n:0,UB:{},f:function(a,b,c){this.parent(a);this.proxy=sc.dq.hS(b.proxy,a);this.QO=new sc.NTa(b,this.LMb.bind(this),c);this.n=this.QO.k4a(this.UB)},update:function(){var a=this.proxy.qpa(i);this.n=this.QO.Vn(this.pb,this.n,this.UB,a.x,a.y,a.z);
return this.n<=0},LMb:function(a,b,c,d){this.proxy&&this.proxy.Vn(a,b,c,this.pb,d,this.pb)},zea:function(){return this.QO.repeat}});sc.dhb=sc.nV.extend({of:q,hc:q,QO:q,n:0,UB:{},f:function(a,b){this.parent(a);this.hc=b.enemyType;this.of=b.enemyInfo;this.Ku=b.pushVel;this.MKa=b.pushZVel;this.BB=b.proxySrc;this.QO=new sc.NTa(b,this.hNa.bind(this));this.n=this.QO.k4a(this.UB)},update:function(){this.n=this.QO.Vn(this.pb,this.n,this.UB);return this.n<=0},hNa:function(a,b,c,d){var f=q;if(this.VF instanceof
ig.wa.Enemy)f=this.VF;var i=ig.r.Pe(ig.wa.Enemy,a-this.hc.size.x/2,b-this.hc.size.y/2,c,{enemyInfo:this.of,ownerEnemy:f},h);Vec2.assign(i.face,d);this.pb.target?i.Sn(this.pb.target,h):i.hc.DK(i,y,h,h);if(this.Ku){Vec2.assign(i.b.V,d);Vec2.length(i.b.V,ig.Ja.yY(this.Ku));i.b.Ze.Am=0}if(this.MKa)i.b.V.z=ig.Ja.yY(this.MKa);if(this.BB){var j=sc.dq.hS(this.BB,f);if(j)j.Vn(a,b,c,f,d).target=i}},zea:function(){return this.QO.repeat}})});ig.J=h;
ig.N("game.feature.combat.combat-stun").K(function(){sc.jI={};sc.tP=ig.Ca.extend({Isa:q,start:q,ya:N(h)});sc.jI={};var a=Vec2.create();sc.jI.START_LOCK=sc.tP.extend({t:new ig.u({attributes:{}}),Isa:function(a,c){a.W&&a.W.Tbb(c)}});sc.jI.END_LOCK=sc.tP.extend({t:new ig.u({attributes:{}}),Isa:function(a,c){a.W&&a.W.Ixb(c)}});sc.jI.BLOCK_XY=sc.tP.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a.b.V.x=0;a.b.V.y=0}});sc.jI.BLOCK_FALL=sc.tP.extend({Fa:0,t:new ig.u({attributes:{Fa:{c:"Number",
d:"Time how long fall should be blocked"}}}),f:function(a){this.Fa=a.maxTime},ya:function(a){if(a.b.V.z<0)a.b.V.z=0;return this.Fa&&a.ib>=this.Fa}});sc.jI.PULL=sc.tP.extend({speed:0,eb:0,Fa:0,t:new ig.u({attributes:{eb:{c:"Number",d:"Distance to be pulled to"},speed:{c:"Number",d:"Speed with which victim will be pulled toward attacker"},Fa:{c:"Number",d:"How long victim will be pulled toward attacker. 0=until stun over"}}}),f:function(a){this.eb=a.distance;this.speed=a.speed||300;this.Fa=a.maxTime||
0},start:J(),ya:function(b,c){if(!c)return this.Fa;var d=ig.qd.Wk(b.b,c.b,a);if(Vec2.length(d)-b.b.size.x/2-c.b.size.x/2>this.eb){Vec2.length(d,this.speed);Vec2.assign(b.b.V,d);return this.Fa&&b.ib>=this.Fa}if(!this.Fa){d=Math.max(0,Vec2.length(b.b.V)-ig.i.ja*5*this.speed);Vec2.length(b.b.V,d)}return this.Fa}});sc.jI.Z_PULL=sc.tP.extend({Mh:0,er:1,Cfa:1,t:new ig.u({attributes:{er:{c:"Number",d:"Acceleration with which victom will be pulled to same z height"},Cfa:{c:"Number",d:"Z Offset to attacker position to which victim will be pulled"},
Fa:{c:"Number",d:"How long victim will be pulled toward attacker. 0=until stun over"},Mh:{c:"Number",d:"Maximum Speed for Z movement. Default is 300",I:h}}}),f:function(a){this.Mh=a.maxSpeed||300;this.er=a.accel||1;this.Cfa=a.offZ||0;this.Fa=a.maxTime||0},start:J(),ya:function(a,c){if(!a.b.rt&&c){var d=((c.b.g.z-a.b.g.z+this.Cfa)*10*this.er).Rb(-this.Mh,this.Mh);a.b.V.z=d}return this.Fa&&a.ib>=this.Fa}});sc.jI.Z_VEL=sc.tP.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Value to set z velocity to."}}}),
f:function(a){this.value=a.value||0},start:function(a){if(!a.b.rt)a.b.V.z=this.value}});sc.jI.Z_BOUNCINESS=sc.tP.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Value to set Z bounciness to"}}}),f:function(a){this.value=a.value||0},start:function(a){a.b.kj=this.value}})});ig.J=h;
ig.N("game.feature.combat.combat-assault").O("game.feature.combat.model.combat-params","game.feature.combat.entities.ball").K(function(){var a={type:"BALL",effects:"ball-assault",speed:250,maxBounce:0,timer:0.166,animation:{name:"default",sheet:{src:"media/entity/balls/default.png",width:16,height:16,offY:168},time:0.05,repeat:h,frames:[0],renderMode:"lighter",guiSprites:h},attack:{type:"NONE",visualType:"LIGHT",element:"HEAT",damageFactor:0.6,reverse:y,spFactor:1,guardable:"",skillBonus:"MELEE_DMG",
hints:["NO_PUZZLE"]},behaviors:[]};sc.qPa={};for(var b in sc.ha){var c=sc.ha[b],d=ig.copy(a);d.attack.element=b;d.animation.frames[0]=c;sc.qPa[c]=new sc.$va(d)}var f=Vec3.create(),i=Vec2.create();sc.Seb={Vn:function(a,b,c){var d=a.W.Ag("ASSAULT")*c;if(d){c=Math.max(1,Math.round(d/0.2));if(b=sc.qPa[b]){b.data.attack.damageFactor=d/c;d=a.lc(ig.Pa.BOTTOM,f);for(d.z=d.z+Constants.gI;c--;){var n=Vec2.assign(i,a.face);Vec2.rotate(n,Math.PI*0.4*(Math.random()-0.5));Vec2.length(n,4);b.Vn(d.x+n.x,d.y+n.y,
d.z,a,n)}}}}}});ig.J=h;
ig.N("game.feature.combat.combat-poi").O("game.feature.combat.model.combat-params").K(function(){sc.oL={};sc.oL.NAMED_ENTITY={t:{attributes:{name:{c:"StringExpression",d:"Name of entity to be searched"}}},cpa:function(a,b){var c=ig.Ja.eh(b.name);(c=ig.r.Is[c])&&a.push(c)}};sc.oL.NAMED_ENTITIES={t:{attributes:{bWb:{c:"StringExpression",d:"String included within name."}}},cpa:function(a,b){var c=ig.Ja.eh(b.namePart),j;for(j in ig.r.Is){var k=ig.r.Is[j];j.indexOf(c)!=-1&&!k.Og&&a.push(k)}}};var a={ACCEPT:1,
IGNORE:2,LAST_RESORT:3};sc.oL.ACTIVE_ENEMIES={t:{attributes:{fD:{c:"Array",d:"Types of enemy supported",Xt:{c:"EnemySearch"},I:h},Bf:{c:"CombatConditions",d:"Combat condition to further filter enemies",I:h},self:{c:"String",d:"How to handle self enemy",U:a,I:h},SRb:{c:"Boolean",d:"If true, consider all enemies, not just active ones."}}},n4a:function(b){b.conditions&&(b.conditions=new sc.OE(b.conditions));b.self=a[b.self]||a.ACCEPT},cpa:function(b,c,i){var j;j=c.allEnemies?ig.r.kda(ig.wa.Enemy):sc.Ta.nv[sc.pd.ENEMY];
for(var k=j.length,l=q;k--;){var m=j[k];if(m&&!m.Wf()&&!(c.enemyTypes&&c.enemyTypes.indexOf(m.Zm)==-1)&&(!c.conditions||c.conditions.Nb(m,0))){if(m==i){if(c.self==a.IGNORE)continue;if(c.self==a.LAST_RESORT){l=m;continue}}b.push(m)}}b.length==0&&l&&b.push(l)}};var b=[],c=Vec3.create();sc.l1={CGa:function(a){if(!a)return q;var b=sc.oL[a.type];b&&(b.n4a&&!window.Ed)&&b.n4a(a);return a},REa:function(a,f,i,j){var k=sc.oL[a.type];if(!k)return q;b.length=0;var l;if(k.cpa){k.cpa(b,a,f);l=b}else if(k.Mca){l=
f.lc(ig.Pa.BOTTOM,c);l.z=l.z-128;l=ig.r.lN(l,i,1,256);k.Mca(b,l,a);l=b}for(var a=l.length,k=q,m=0;a--;){var n=l[a];if(n){var o=ig.qd.Fy(f.b,n.b);if(o<=i&&(!k||o<m))if(!j||ig.navigation.Z4a(f,n)){k=n;m=o}}}return k}}});ig.J=h;
ig.N("game.feature.combat.combat-charge").O("game.feature.combat.model.combat-params","game.feature.combat.entities.ball").K(function(){var a=[new ig.ka("media/sound/battle/charge-01-short.mp3",0.7),new ig.ka("media/sound/battle/charge-02-short.mp3",0.7),new ig.ka("media/sound/battle/charge-03-short.mp3",0.7),new ig.ka("media/sound/battle/charge-04.mp3",0.7)],b=[0.4,0.5,0.6];sc.hwa=ig.Ca.extend({fx:q,OM:q,em:q,f:function(a,b,f,i){this.Q=a;this.Q.it(this);this.xXb=b;this.yMb=f;this.le=i},Ac:function(c,
d,f){if(!f){if(!this.OM){this.OM=new ig.tV;ig.pg.Oaa(this.OM)}this.OM.Zta(this.Q,b[d-1],-1,0.05,0.5);this.em&&this.em.stop();this.em=a[d-1].play()}this.fx&&this.fx.stop();this.fx=sc.Ta.aMb(this.Q,d,c);this.fx.IK();if(this.yMb&&!this.rua){this.rua=ig.Ru.add(0.1,0.2,q);this.Q.b.time.uA=h}if(this.le){c=1+d*0.5/3;if(this.vf)this.vf.iw(c,0.5,KEY_SPLINES.JUMPY);else{this.vf=new ig.sf.gq(new ig.sf.xV(this.Q),0,0);this.vf.iw(c);ig.le.wx(this.vf,"FAST",KEY_SPLINES.EASE_OUT)}}},stop:function(){if(this.OM){this.OM.stop();
this.OM=q}if(this.em){this.em.stop();this.em=q;a[3].play()}if(this.fx){this.fx.stop();this.fx=q}if(this.rua){this.rua.clear(0);this.rua=q;this.Q.b.time.uA=y}if(this.vf){ig.le.Os(this.vf,"NORMAL",KEY_SPLINES.EASE_OUT);this.vf=q}},Zl:function(){this.stop()},dw:function(){this.stop()}})});ig.J=h;
ig.N("game.feature.combat.combat-sweep").O("impact.feature.effect.effect-sheet").K(function(){sc.f1={};sc.f1.SPHEROMANCER={sheet:new ig.ud("sweeps"),keys:["default","heat","cold","shock","wave"],Foa:{radius:32,zHeight:24,centralAngle:0.5,duration:0.1,attack:{type:"MEDIUM",damageFactor:0.8,spFactor:1,skillBonus:"MELEE_DMG"},checkCollision:h}};sc.f1.SPHEROMANCER_FINISHER={sheet:new ig.ud("special-neutral"),keys:["finisherNeutral","finisherHeat","finisherCold","finisherShock","finisherWave"],Foa:{radius:32,
zHeight:24,centralAngle:1.5,startAngle:-0.25,duration:0.3,attack:{type:"HEAVY",damageFactor:1,spFactor:1,skillBonus:"MELEE_DMG"},checkCollision:h}};sc.f1.TRIBLADER={sheet:new ig.ud("combat.triblader"),keys:["sweepNeutral","sweepHeat","sweepCold","sweepShock","sweepWave"],j1a:-1,Foa:{radius:48,zHeight:24,centralAngle:0.7,duration:0.2,attack:{type:"MEDIUM",fly:"HEAVY",damageFactor:1.15,spFactor:1,skillBonus:"MELEE_DMG"},checkCollision:h}};sc.f1.TRIBLADER_FINISHER={sheet:new ig.ud("combat.triblader"),
keys:["finisherNeutral","finisherHeat","finisherCold","finisherShock","finisherWave"],j1a:-1,Foa:{radius:48,zHeight:24,centralAngle:1.7,startAngle:-0.35,duration:0.4,attack:{type:"HEAVY",damageFactor:1.4,spFactor:1,skillBonus:"MELEE_DMG"},checkCollision:h}};sc.Sfb={show:function(a,b,c,d,f,i){var j=ig.copy(a.Foa);j.attack.element=c;i=i?d:0;f&&(j.clockwise=!j.clockwise);i&&(j.flipLeftFace=i);j=new sc.vw(b,j);sc.Ta.js(j);b.Hj(j);c=a.keys[c];f&&(c=c+"Rev");a=a.sheet.va(c,b,{rotateFace:d,flipLeftFace:i,
duration:a.j1a||0});b.Hj(a)}}});ig.J=h;
ig.N("game.feature.combat.entities.combatant-marble").O("impact.feature.effect.effect-sheet","impact.base.entity").K(function(){ig.wa.CombatantMarble=ig.Wd.extend({Pt:new ig.Vh("media/entity/enemy/combatant-marble.png",8,8),G:new ig.ud("marble"),Sf:Vec2.create(),Xha:0,target:q,n:0,gra:0,Fa:0,LHa:q,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(8,8,8);this.b.time.Im=h;this.b.Cd.size=8;this.target=d.target;Vec2.assign(this.Sf,this.b.g);this.Xha=this.b.g.z;a=Vec2.length(Vec2.sub(this.target.tb(),
this.b.g));a=Math.max(a,120);this.Fa=0.3+Math.sqrt(a)/16;this.maxHeight=32+Math.sqrt(a)*8;this.LHa=this.G.va("line",this,{duration:-1});this.LHa.b.time.Im=h;a=new ig.Bw(this,ig.mk.XS,0,0,-1,1);ig.pg.ey(a);this.Bd({sheet:this.Pt,name:"default",time:0.03,frames:[0,1,2,3,4,5],repeat:h})},update:function(){this.parent();this.n=this.n+ig.i.ja;var a=Math.min(1,this.n/this.Fa),a=KEY_SPLINES.EASE_IN.get(a),b=1-(2*a-1)*(2*a-1),c=this.target.tb(),d=this.target.b.g.z+this.target.b.size.z+1;this.b.g.x=this.Sf.x*
(1-a)+(c.x-this.b.size.x/2)*a;this.b.g.y=this.Sf.y*(1-a)+(c.y-this.b.size.y/2)*a;this.b.g.z=this.Xha*(1-a)+d*a+b*this.maxHeight;this.b.pc=0;if(this.n>=this.Fa){this.LHa.stop();this.G.va("explode",this).b.time.Im=h;this.target.MFb(this);this.ze()}}})});ig.J=h;
ig.N("game.feature.combat.entities.hit-number").O("impact.base.entity","impact.base.entity-pool").K(function(){sc.BV={eqb:0,dqb:1,oka:2,Vja:3,Twa:4,cqb:5};sc.DP={mj:0,Whb:1,zfb:2,jlb:3,klb:4,ilb:5,Egb:6,llb:7};sc.y9={NONE:0,Lmb:1,Bka:2,Qya:3,DI:4,Xpb:5};var a={};sc.gRa=ig.Kc.extend({offset:{x:0,y:0,z:0},Nra:0,oc:0,DR:0,Lra:0,h7a:0,LZ:[],MK:0,alpha:1,zIndex:1E4,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.Ze.vg=0;this.b.time.Im=h;this.b.F(0,0,0)},Np:J(),za:function(a,b,c,
d,i,j){this.Nra=j===g?this.oc:j;this.oc=a;this.Lra=b;this.h7a=c;this.LZ.length=0;d&&this.LZ.push.apply(this.LZ,d);this.DR=0;a=this.oc;if(a!==g){do{this.DR++;a=Math.floor(a/10)}while(a)}if(this.LZ)this.DR=this.DR+this.LZ.length;this.offset.x=this.DR*f[this.Lra].offsetX/2;this.offset.y=f[this.Lra].offsetY;this.MK=i;this.ul(this.DR,h)},Gh:function(){var a=this.alpha,b=this.oc;if(this.MK&&Math.abs(b-this.Nra)>=8){this.MK=this.MK-ig.i.Sa;if(this.MK<0)this.MK=0;b=Math.floor(this.Nra+(b-this.Nra)*(1-this.MK/
k))}for(var c=0,d,f=this.LZ.length;f--;){d=9+this.LZ[f];this.sXa(c,d,a);c++}if(b!==g){do{d=b%10;b=Math.floor(b/10);this.sXa(c,d,a);c++}while(b)}},sXa:function(b,c,i){var c=c+d*this.h7a,j=f[this.Lra],c=j.sheet.Ly(a,c),k=this.Ua[b];if(k){k.l(this.b.g.x-this.offset.x+(this.DR-b-1)*j.offsetX,this.b.g.y-this.offset.y-this.b.g.z+this.zIndex,this.zIndex);k.F(j.sheet.width,j.sheet.height,0);k.Bj(j.sheet.wd,c.x,c.y);k.ge(i)}}});ig.wa.HitNumber=sc.gRa.extend({n:0,tM:q,pb:q,f:function(a,b,c,d){this.parent(a,
b,c,d);this.caa(d)},reset:function(a,b,c,d){this.parent(a,b,c,d);this.caa(d)},caa:function(a){this.pb=a.combatant;this.za(a.number,a.numberSize,a.numberColor,a.numberAppendix,k,0);this.n=i;this.alpha=1;this.tM=sc.Lwa.A8a(this.b,this.offset.x,this.offset.y)},clear:function(){if(this.n>j)this.n=j;this.DOa()},update:function(){this.n=this.n-ig.i.Sa;if(this.n<=0)this.ze();else if(this.n<=j){this.alpha=this.n/0.3;this.DOa();this.b.V.z=this.b.V.z+ig.i.Sa*400}},DOa:function(){if(this.tM){this.pb.lg.lGa.ye(this);
c.ye(this.tM);this.tM=q}},Ge:function(a){this.DOa();this.parent(a)}});ig.xw.cD(ig.wa.HitNumber);Vec2.create();ig.wa.HitNumberSum=sc.gRa.extend({n:0,sca:y,pb:q,cN:Vec2.create(),f:function(a,b,c,d){this.parent(a,b,c,d);this.caa(d);this.zIndex=2E4},reset:function(a,b,c,d){this.parent(a,b,c,d);this.caa(d)},caa:function(a){this.pb=a.combatant;this.pb.lg.GX=this;this.alpha=1;this.n=j;this.sca=y;this.qj();this.ceb(h);this.tM=sc.Lwa.A8a(this.b,this.offset.x,this.offset.y,h)},uOb:function(){var a=sc.YP.TOP,
b=0;if(this.pb.JR){a=sc.YP.BOTTOM;b=this.pb.JR}else if(this.pb.PF){a=sc.YP.BOTTOM;b=this.pb.PF+48}a(this.cN,this.pb.b);this.cN.y=this.cN.y-b},ceb:function(a){this.za(this.pb.lg.cca,sc.BV.cqb,this.pb.sa==sc.pd.PLAYER?sc.DP.llb:sc.DP.Egb,q,k,a?0:g)},clear:function(){this.n=j;this.sca=h},update:function(){if(this.n){this.n=this.n-ig.i.Sa;if(this.n<=0){this.n=0;this.sca&&this.ze()}}},sr:function(){this.qj();sc.Lwa.oOb(this.tM,this.b,this.offset.x,this.offset.y)},qj:function(){this.uOb();var a=this.pb,
b=this.n/j;this.sca&&(b=1-b);b=KEY_SPLINES.EASE_IN.get(b);this.b.l(a.b.g.x+this.cN.x,a.b.g.y+256,a.b.g.z-this.cN.y+256+b*(this.sca?1:-1)*16);this.alpha=1-b},Ge:function(a){if(this.tM){c.ye(this.tM);this.tM=q}this.parent(a)}});ig.xw.cD(ig.wa.HitNumber);ig.Xf.ECb=y;var b=[];ig.wa.HitNumber.jNa=function(a,c,d,f,i,j,k,u){var w;w=f<0.5?sc.BV.eqb:f<1?sc.BV.dqb:f<1.5?sc.BV.oka:f<2?sc.BV.Vja:sc.BV.Twa;var z=0,d=ig.Xf.ECb?Math.abs(Math.round(f*100)):Math.abs(d),z=c.sa==sc.pd.PLAYER?k?sc.DP.ilb:sc.DP.jlb:k?
sc.DP.zfb:sc.DP.mj;b.length=0;if(j){if(j==sc.cA.DI){b.push(sc.y9.DI);d=g}b.push(sc.y9.Lmb)}else i>=1.25?b.push(sc.y9.Bka):i<=0.75&&b.push(sc.y9.Qya);u&&b.push(sc.y9.Xpb);for(f=c.lg.lGa;f.length>2;)f[0].clear();w=ig.r.Pe(ig.wa.HitNumber,a.x,a.y-8,a.z,{number:d,numberSize:w,numberColor:z,numberAppendix:b,combatant:c});c.lg.lGa.push(w);c.lg.cca=c.lg.cca+d;c.lg.wna=c.lg.wna+1;c.lg.X3=0.5;c.lg.cca>1&&c.lg.wna>1&&!c.lg.GX?ig.r.Pe(ig.wa.HitNumberSum,a.x,a.y-8,a.z,{combatant:c}):c.lg.GX&&c.lg.GX.ceb()};ig.wa.HitNumber.JMb=
function(a,b,c){ig.r.Pe(ig.wa.HitNumber,a.x,a.y-8,a.z,{number:Math.abs(c),numberSize:sc.BV.Vja,numberColor:b.Ah?sc.DP.klb:sc.DP.Whb,numberAppendix:q,combatant:b})};var c=[];sc.Lwa={A8a:function(a,b,d,f){var i=a.g.x,j=a.g.y,k=a.g.z,b={mP:i-b-2,R0:j-k-d-1,lP:i+b+2,dI:j-k};if(!f){var f=a.g.x,i=a.g.y,j=h,u=Math.random()<0.5;do for(var w=0,z=y,v=0;v<c.length;++v){var x=c[v];if(!(x.mP>=b.lP||x.lP<=b.mP||x.R0>=b.dI||x.dI<=b.R0)){z=h;w=u?Math.min(w,x.mP-b.lP):Math.max(w,x.lP-b.mP);v=x.R0-b.dI;if(j&&Math.abs(i-
a.g.y-v)>Math.abs(f-a.g.x-w)){j=y;a.g.y=i;b.R0=i-k-d-1;b.dI=i-k;b.mP=b.mP+w;b.lP=b.lP+w;a.g.x=a.g.x+w}else{b.R0=b.R0+v;b.dI=b.dI+v;a.g.y=a.g.y+v}break}}while(z)}c.push(b);return b},oOb:function(a,b,c,d){var f=b.g.x,i=b.g.y,b=b.g.z;a.mP=f-c-2;a.R0=i-b-d-1;a.lP=f+c+2;a.dI=i-b}};var d=16,f={"0":{offsetX:7,offsetY:8,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",8,8,0,0,d)},1:{offsetX:7,offsetY:8,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",8,8,128,0,d)},2:{offsetX:7,offsetY:9,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",
8,12,0,48,d)},3:{offsetX:8,offsetY:9,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",12,12,128,48,d)},4:{offsetX:9,offsetY:11,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",12,12,0,120,d)},5:{offsetX:10,offsetY:12,sheet:new ig.Vh("media/entity/map-gui/hit-numbers.png",12,12,0,192,d)}},i=1,j=0.3,k=0.2});ig.J=h;
ig.N("game.feature.combat.entities.combatant").O("game.feature.npc.entities.sc-actor","game.feature.combat.combat","game.feature.combat.entities.hit-number","game.feature.combat.model.combat-params","impact.feature.effect.effect-sheet","game.feature.model.options-model","impact.feature.terrain.terrain","game.feature.combat.model.proxy").K(function(){function a(){switch(sc.options.get("rumble-strength")){case sc.i$.Bka:return new ig.Fo.fF("RANDOM","STRONG","FASTER",0.3,y,h);case sc.i$.mj:return new ig.Fo.fF("RANDOM",
"STRONG","FAST",0.3,y,h);case sc.i$.Qya:return new ig.Fo.fF("RANDOM","MEDIUM","FAST",0.3,y,h)}return q}ig.Pb.qta(ig.hd.COAL,h);ig.Pb.qta(ig.hd.WATER,h);ig.Pb.qta(ig.hd.HIGHWAY,h);sc.cA={NONE:0,XV:1,DI:2,kxa:3};sc.d9={LIGHT:{V:100,m0:0.2,ni:0},MEDIUM:{V:200,m0:0.25,ni:0},HEAVY:{V:250,m0:0.3,ni:100,Vm:0.2,WW:0.5},MASSIVE:{V:300,m0:0.55,ni:150,Vm:0.5,WW:0.3,UR:h},"MASSIVE+":{V:400,m0:0.7,ni:180,Vm:0.5,WW:0.2,UR:h},"MASSIVE++":{V:500,m0:0.9,ni:200,Vm:0.5,WW:0.15,UR:h},"MASSIVE+++":{V:600,m0:1,ni:200,
Vm:0.5,WW:0.13,UR:h}};var b=Vec2.create(),c=Vec2.create(),d=Vec3.create(),f=Vec3.create(),i={},j={OA:g,CF:g,iD:g,Gr:g,Yi:g,av:y,YW:y,sGa:y};sc.Z8=sc.Jc.extend({zo:{zb:q,E6:0,Vi:[],Hf:0,lX:0},Re:{Cv:q,uD:[],Rna:0,e3:0,mma:0,Fda:0,Fpa:q,UJ:q,HY:0},target:q,Sq:q,EB:q,Qd:function(a){var b=this.Sq||this.target;return!a&&b&&b.EB&&!sc.qi.wc()?b.EB[0]:b},s3a:function(){var a=this.Re.Fpa;return!a||a.Nn||a instanceof sc.vw&&a.g?y:a.tq()instanceof ig.wa.Combatant},Dab:function(a,b,c,d){this.zo.zb=a;this.zo.E6=
b||0;this.zo.Vi.length=0;if(d)(a=this.Re.uD[this.Re.uD.length-1])&&this.zo.Vi.push(a.id);this.zo.Hf=0;this.zo.lX=c||y;if(this.zo.zb){c=this.b;c=ig.r.Br(c.g.x,c.g.y,c.g.z,c.size.x,c.size.y,c.size.z,this);a=c.length;for(a=0;a<c.length;++a)this.ZBa(c[a],q,h)}},Gf:function(){return this.zo.zb?this.zo.zb.element:sc.ha.NEUTRAL},cda:function(){for(var a=this.kl,b=a.length;b--;)if(a[b]instanceof sc.vw)return a[b].zb;return this.zo.zb||q},oq:function(a){this.ZBa(a,q)},ZBa:function(a,c,d){if(this.zo.zb&&a.dZ&&
a.sa!=this.sa){if(a.b.g.z>=this.b.g.z+this.b.size.z||this.b.g.z>=a.b.g.z+a.b.size.z||a.b.qn.length>0)return y;var f=a.b.xi?a.b.xi.Q:a;if(this.zo.Vi.indexOf(f.id)==-1){if(d&&this.b.Ch>0){d=ig.qd.Wk(this.b,a.b,b);if(Vec2.ug(d,this.face)<0)return y}if(a.me(c||this,this.zo.zb)){this.zo.Vi.push(f.id);this.zo.Hf++;if(this.zo.lX)this.zo.zb=q;return h}}}return y},aj:function(a,b){return this.zY(a,b)},tq:function(){return this},te:function(){return this},qu:function(a,d){var f=d||{};Vec2.assign(f,this.b.V);
Vec2.Ig(f)&&this.b.Ch*this.b.jf>0&&Vec2.assign(f,this.b.wb);if(Vec2.Ig(f)){Vec2.assign(f,a.b.V);Vec2.Lc(f)}if(this.zo.E6){Vec2.assign(b,f);Vec2.hz(b);ig.qd.Wk(this.b,a.b,c);Vec2.ug(b,c)<0&&Vec2.Lc(b);Vec2.an(f,b,this.zo.E6,f)}return f},$Kb:function(a,b,c,d){this.Re.UJ=new sc.eib(a,b,c,d)},Y_:function(a,b,c){this.Re.UJ&&this.Re.UJ.Vn(a,this,this.face,b,c)},bm:function(a,b){return b[1]=="target"?ig.ma.xEa(this.Qd(),b,2):b[1]=="hasTmpTarget"?!!this.Sq:b[1]=="manualKill"?this.Yv:b[1]=="defeated"?this.Yw>
sc.Px.W0:b[1]=="lastHitElement"?this.lg.M5a:b[1]=="blockedDamage"?this.Re.e3:b[1]=="blockedFactor"?this.Re.mma:b[1]=="hpFactor"?this.W.Gy():this.parent(a,b)}});sc.zmb=ig.Ca.extend({pb:q,f:function(a,b){this.pb=a;b.Hj(this);if(!this.pb.EB)this.pb.EB=[];this.pb.EB.push(b)},Zl:function(a){if(this.pb.EB){this.pb.EB.ye(a);if(this.pb.EB.length==0)this.pb.EB=q}}});sc.Px={W0:0,Yib:1,sV:2};ig.wa.Combatant=sc.Z8.extend({W:q,dZ:h,sa:0,c6:sc.pP.METAL,vj:0,Bna:y,Yw:sc.Px.W0,qua:y,DSb:q,Yv:q,Ds:0,NNa:0,n0:q,lw:[],
lg:{time:0,nGa:0,me:0,Ft:0,aia:0,cca:0,wna:0,GX:q,M5a:0,lGa:[],X3:0},jia:[],v0:q,iU:0,Lu:0,ad:{idle:q,preMove:q,move:q,moveRev:q,run:q,runRev:q,brake:q,preIdle:q,jump:q,fall:q,hover:q,preHoverMove:q,hoverMove:q,hoverMoveRev:q,land:q,damage:q,postDamage:q,damageFly:q,damageFall:q,pvpDown:q},Gr:0,Vda:y,um:q,jw:[],QK:{dJ:0,bva:0,XKa:[]},qi:{Aa:y,Rg:[],round:0,Mb:{}},af:{KSb:0.1,g:Vec3.create(),zT:Vec3.create(),n:0,Pb:q},G:{PA:new ig.ud("combatant")},f:function(a,b,c,d){this.parent(a,b,c,d);Vec3.assign(this.af.g,
this.b.g)},show:function(a){this.parent(a);this.um=new ig.lj.StatusBar(this);this.W&&this.W.o4a();ig.X.vd(this.um)},hide:function(){this.Kma();this.um&&this.um.remove();this.um=q;this.parent()},su:function(){return this.vj>0},Aha:function(a){Vec3.Oa(this.af.g,a.x-this.b.size.x/2,a.y-this.b.size.y/2,a.z)},Wf:function(){return this.W&&this.W.Wf()},Ama:function(){if(this.vj>0){this.ib=this.vj=0;this.lw.length=0;this.Vw.apply(this);this.ad.postDamage&&this.Ma(this.ad.postDamage,h,this.ad.idle);this.ad.preIdle&&
this.Ma(this.ad.preIdle,h,this.ad.idle)}},Rfa:q,Sn:function(a,b){if(!this.Ve&&this.target!=a){!this.target&&a?sc.Ta.RAa(this):this.target&&!a&&sc.Ta.gLa(this);if(a&&b)this.ZNa=h;this.target&&this.target.kAa&&this.target.kAa(this);(this.target=a)&&this.target.Wya&&this.target.Wya(this)}},yMa:function(a){return new sc.zmb(this,a)},Wya:function(a){this.jia.push(a)},kAa:function(a){this.jia.ye(a)},BT:q,s$a:function(a,b){for(var c=this.jia.length;c--;){var d=this.jia[c];d.BT&&d.BT(this,a,b)}},C3a:function(a){for(var b=
this.jw.length;b--;)if(this.jw[b].Tn.name==a)return h;return y},JOb:function(){for(var a=this.jw.length;a--;)if(this.jw[a].update()){this.jw[a].pi(this);this.jw.splice(a,1)}},aBa:function(a,b){var c=new sc.Ufb(this,a,b);this.jw.push(c);return c},A9a:function(a){a.pi(this);this.jw.ye(a)},bJb:function(a){for(var b=this.jw.length;b--;)if(this.jw[b].Tn.name==a){this.jw[b].pi(this);this.jw.splice(b,1)}},me:function(a,b,c){if(sc.qi.wc()&&!sc.qi.HS(this)||sc.qi.HS(this)&&(sc.qi.nDb()||sc.qi.ADb())||!c&&
this.b.qn.length>0)return y;if(this.Ds&&!b.Q3a&&!b.QG.Bra){this.P7a();return y}return this.o4&&a.Gf()!=this.o4||this.sa==sc.pd.ENEMY&&(!this.target&&!b.QG.Bra)&&(!a.te().Ah||!ig.gl.ut(this,32))?y:this.yJa(a,b,c)},QDb:function(a,b,c,d){for(var c=c&&c.Ck,f=this.jw.length,i=sc.cA.NONE;f--;){var j=this.jw[f],k=j.Tn;if(k.pn!=sc.dA.BLOCK_ALL&&b.Epa!=sc.v9.ALWAYS){if(b.Epa==sc.v9.NEVER)continue;if(b.Epa==sc.v9.FROM_ABOVE&&k.pn!=sc.dA.BLOCK_ABOVE)continue;if(k.i5<b.type)continue}if(k.wc(this,a,b,c,j.aHa())&&
k.ZEa(b,this)<1){if(k.IIa)return sc.cA.kxa;if(d){if(k.NU>d.Gr)d.Gr=k.NU;d.Yi=j.aHa()?0:d.Yi*k.ZEa(b,this)}i=Math.max(i,j.aHa()?sc.cA.DI:sc.cA.XV)}}return i},H2a:function(){for(var a=1,b=this.jw.length;b--;){var c=this.jw[b].Tn;c.ota()&&(a=a*c.dJ)}return a},HJa:N(y),P7a:J(),lHb:function(){this.vj=0.01;this.lw.length=0},yJa:function(a,c,f){var k=this.Gr,t,p=c.type,r=c.reb,u=c.Gg,w=c.reverse,z=f||this,v=this.Vda;i.Gr=k;i.Yi=1;var x=this.QDb(a,c,f,i),k=i.Gr;t=i.Yi;var A=a.aj(z,d),F=a.tq(),B=F.te();if(this.W&&
this.W.Wf())return y;var C;if(x==sc.cA.kxa){sc.Ta.Oi(z,A,sc.Wb.NONE,c.element,x);return h}if(!c.Yi||c.QG.vHb){a.Y_?a.Y_(z,q,A):F.Y_(z,q,A);return h}this.W&&c.sv&&(C=this.W.N1a(c,t,F,x,v));j.av=y;j.YW=y;j.sGa=y;j.r8=y;j.Yi=t;var K=x;t=y;this.lg.M5a=c.element;if(this.HJa(j,a,c,f,C,x,v)){k=j.Gr==g?k:j.Gr;j.Gr==sc.Wb.NONE&&(K=y);if(j.CF!=g)r=p=j.CF;if(j.OA&&C)C=j.OA;if(j.r8&&C)C.me=this.W.Sc-1;u=j.iD||u;j.OA=g;j.CF=g;j.iD=g;j.Gr=g;t=j.YW;v=this.Vda}else if(j.sGa)return y;sc.Ta.NGa()&&(C=q);a.Y_?a.Y_(z,
C,A):F.Y_(z,C,A);if(v&&p<sc.Wb.BREAK){sc.Ta.Oi(z,A,sc.Wb.NONE,c.element);return h}j.av&&this.um.Bab("BREAK",j.av);F.Re.uD.ye(z);F.Re.uD.push(z);if(C&&!c.QG.xfa){f=Math.max(1,this.W.Td("hp")*this.NNa*sc.Ta.$1a(this.sa));k>sc.Wb.NONE&&(C.me<=f&&!c.$6a)&&(k=sc.Wb.MASSIVE);this.sa==sc.pd.ENEMY&&(F.Ah&&this.W.Gy()==1&&C.me>=this.W.Td("hp"))&&sc.pa.bc("combat","oneHitKills",1);this.W.Bub(C,c,F);F.Re.Rna=F.Re.Rna+C.me;B.iub(C,this.QK.dJ+this.QK.bva,this,x,a);this.Sra&&this.Sra(C.me);B&&B.Sfa(this,c,C,x,
a);sc.options.get("damage-numbers")&&(sc.options.get("damage-numbers-crit")?C.uJ&&ig.wa.HitNumber.jNa(A,this,C.me,C.hba,C.Ena,x,C.uJ,j.av):ig.wa.HitNumber.jNa(A,this,C.me,C.hba,C.Ena,x,C.uJ,j.av))}k=k>=p&&(!this.W||!this.W.C5());if(!k){this.n0=F;for(F=c.lw.length;F--;){p=c.lw[F];p.Isa&&p.Isa(this,this.n0)}}if(this.W&&this.W.Wf()){this.eAa(B);r=sc.Wb.BREAK;B=C?C.me/this.W.Td("hp"):0;B=B>=2?"MASSIVE+++":B>=1?"MASSIVE++":B>=0.5?"MASSIVE+":"MASSIVE";if(!u||sc.d9[u].V<sc.d9[B].V)u=B;k=y}if(!c.QG.xfa){sc.Ta.Oi(z,
A,r,c.element,K,C&&C.uJ);C&&(C.me>1E12?sc.Ta.G.hx.va("hitExtra4",this):C.me>1E9?sc.Ta.G.hx.va("hitExtra3",this):C.me>1E7?sc.Ta.G.hx.va("hitExtra2",this):C.me>1E5&&sc.Ta.G.hx.va("hitExtra1",this))}z=a.qu(this,b);if(t){Vec2.assign(this.face,z);Vec2.Lc(this.face)}k||this.Ei();if(!u)switch(r){case sc.Wb.LIGHT:u="LIGHT";break;case sc.Wb.MEDIUM:u="MEDIUM";break;case sc.Wb.HEAVY:u="HEAVY";break;case sc.Wb.MASSIVE:case sc.Wb.BREAK:u="MASSIVE"}r=r==sc.Wb.BREAK;A=0;a.Nn&&c.wi("CHARGED")&&(A=c.sv.Ag("KNOCKBACK"));
a=this.UX(z,u,r,k,A,y,w,1);this.vj=Math.max(this.vj,a);if(!k&&this.n0){this.lg.nGa++;this.lg.me=this.lg.me+(C&&C.me||0);this.lg.Ft=0.5;if(this.lw.length>0)this.lw.length=0;for(F=c.lw.length;F--;){p=c.lw[F];p.start&&p.start(this,this.n0);p.ya(this,this.n0)||this.lw.push(p)}}return h},Nga:function(a){this.Yw=sc.Px.W0;this.W.tO(a);this.W.xMa(sc.dW);sc.iwa.DZa(this);this.r_()},WGb:function(a){if(a){sc.Ta.Era(this);this.Bna=y}else{a="kill"+this.Zm;sc.pa.Qf("combat",a)||sc.pa.Ni("combat",a,-1)}},eAa:function(b){if(this.Yw==
sc.Px.W0){this.Yw=sc.Px.Yib;sc.Ta.NFb(b,this);ig.bt.Pw(this);(b=a())&&!this.qua&&ig.gE.OW(b);if(!sc.qi.HS(this)){this.G.PA.va("pre_die",this,{duration:-1});this.b.type=ig.ca.IGNORE}}},iub:function(a,b,c,d,f){if(c.sa!=sc.pd.PLAYER||d){var i=this.H2a()*this.W.Yi,j=(this.W.Td("defense")-c.W.Td("defense")/2)/2,j=a.Xwb-a.t6*j;if(d){c.Re.e3=c.Re.e3+Math.max(0,j);c.Re.mma=c.Re.mma+a.t6;c.Re.Fda=c.Re.Fda+1;c.Re.Fpa=f}if(b=Math.max(0,Math.round(j*b*i))){d=0;f=this.QK.XKa;for(i=f.length;i--;)d=d+f[i].n;this.G.PA.va("spikeDmg",
this,{target2:c,target2Align:ig.Pa.CENTER,align:ig.Pa.CENTER}).IK();this.QK.XKa.push({me:b,n:0.6-d,t6:a.t6})}}},NOb:function(){var a=this.QK.XKa;if(this.Wf())a.length=0;if(a.length)for(a.last().n-=ig.i.Ir;a.length&&a.last().n<=0;){var b=a.pop(),c=b.me;if(this.H2a()*this.W.Yi>0){this.G.PA.va("spikeHit",this,{align:ig.Pa.CENTER}).IK();this.mea(c,b.t6)}}},mea:function(a,c,d){if(!this.W.Wf()){d=this.H7a&&this.H7a(a,d);this.Sra&&this.Sra(a);d&&(a=this.W.Sc-1);this.W.o_(a);d=this.lc(ig.Pa.CENTER,f);sc.options.get("damage-numbers")&&
ig.wa.HitNumber.jNa(d,this,a,c,1,y,y,y);if(this.W.Wf()){this.Ei();this.eAa(this);a=Vec2.assign(b,this.face);Vec2.Lc(a);a=this.UX(a,"MASSIVE",y,y,0);this.vj=Math.max(this.vj,a)}}},UX:function(a,b,c,d,f,i,j,k){b=b&&sc.d9[b];if(!b)return 0;f=f||0;if(!d){this.zM();this.ad.damage&&this.Ma(this.ad.damage,h,q,h);this.eo=h;this.b.wb.x=this.b.wb.y=0}var w=this.b.di==-1?0:Math.min(1,200/this.b.di);d&&(w=w/2);c&&!this.b.rt&&(w=1);k!==g&&(w=w*k);c=0;if(!a.x&&!a.y)a.y=1;f=b.V*(1+f)*w;Vec2.length(a,f);j&&Vec2.Lc(a);
d?(Vec2.ug(this.b.V,a)<=0||Vec2.length(this.b.V)<f)&&Vec2.add(this.b.V,a):Vec2.assign(this.b.V,a);if(!d){if(this.b.rt!=ig.hI.STRONG_FLIGHT)this.b.Ze.vg=1;c=b.m0;if(b.ni){if(this.b.rt!=ig.hI.STRONG_FLIGHT)this.Gg.Vi=0.1;if(b.UR){this.b.type==ig.ca.VIRTUAL&&this.b.vl(ig.ca.IGNORE);this.b.yd.height=this.Cy=0}if(w){this.b.kj=b.Vm;this.b.Ze.Am=b.WW;a=b.ni;!i&&!this.Wf()&&(a=Math.min(b.ni,Math.max(0,ig.qd.l2a(this.b,this.b.pc+24))));this.b.V.z=a}}}return c},Sfa:function(a,b,c){if(b.b8){a=c.hba*b.b8;a=a*
((1+c.Ena)/2);c.uJ&&(a=a*1.5);c=this.W.Td("focus");a=a*(0.75+Math.pow(c/400,0.75));a=a*b.Abb;b.Abb=0;this.W.Ula(a*0.1)}},ex:function(a,b){if(this.W&&!this.W.Wf()){var c=this.W.jAb(a),f=this.lc(ig.Pa.CENTER,d);this.W.cqa(c);sc.options.get("damage-numbers")&&!b&&ig.wa.HitNumber.JMb(f,this,c);this.B7a&&this.B7a(a,c)}},w4a:function(a,b){if(this.W){this.qua=a;this.W.o_(this.W.Sc);this.vj=0.01}else if(b){this.qua=a;this.G.PA.Cg("boom_medium",this.b.g.x+this.b.size.x/2,this.b.g.y+this.b.size.y+1,this.b.g.z+
this.b.size.z/2+this.b.size.y/2+1,this).b.time.Im=h;this.b.V.x=this.b.V.y=0;this.b.Fd=0;this.Yw=sc.Px.sV;this.vj=0;this.lw.length=0}},gKb:function(a){this.Yw=sc.Px.sV;this.W&&this.W.KKb();this.Yv?ig.ma.set(this.Yv,h):this.hDa(a)},hDa:function(a){sc.Ta.Era(this,a);this.ze()},mxb:function(a){ig.bt.Pw(this);sc.Ta.Era(this);this.Yw=sc.Px.W0;this.W.tO(a);this.W.xMa(sc.dW);this.r_()},Ge:function(a){this.Sn(q);this.Kma();a?this.um&&this.um.vEa():this.um&&this.um.remove();this.um=q;this.parent()},update:function(){if(this.af.n){this.TBb();
this.parent()}this.b.aN=this.vj<=0&&!this.Aq.lCb();this.NOb();if(this.Ds>0){this.Ds=this.Ds-ig.i.Sa*ig.Ru.OAb();if(this.Ds<0)this.Ds=0}var a=sc.Ta.WGa(this);if(a&&this.iU&&this.W&&this.W.Gy()<1){var c=0.5;this.iU>=0.2?c=c/4:this.iU>=0.1&&(c=c/2);this.Lu=this.Lu+ig.i.ja;if(this.Lu>10*c){this.Lu=this.Lu-10*c;sc.Ta.eMb(this);this.ex(new sc.Kja(this.W,{value:this.iU*c}))}}else this.Lu=0;this.JOb();this.W&&this.W.update(a);this.W&&this.W.Wf()&&this.Aq.NIb();if(this.Yw==sc.Px.sV){if(!this.Yv&&!sc.qi.HS(this)){this.vj=
this.vj+ig.i.ja;a=this.vj/0.5;this.b.g.z=this.b.g.z+ig.i.ja*16;this.vj>=0.5&&this.ze()}}else if(this.vj>0){this.lg.time=this.lg.time+ig.i.ja;this.ib=this.ib+ig.i.ja;for(a=this.lw.length;a--;)this.lw[a].ya(this,this.n0)&&this.lw.splice(a,1);if(!this.W||!this.W.C5())if(this.vj<=ig.i.ja)if(this.W&&this.W.Wf())if(this.Yw==sc.Px.W0){this.eAa(this.n0||this);if(!this.qua){a=Vec2.assign(b,this.face);Vec2.Lc(a);this.vj=this.UX(a,"MASSIVE",y,y,0)}}else{this.Kma();if(sc.qi.HS(this)){this.Vw.apply(this);this.Ma("pvpDown")}else if(this.Yv)ig.ma.set(this.Yv,
h);else{sc.Ta.Era(this);this.G.PA.Cg("boom_medium",this.b.g.x+this.b.size.x/2,this.b.g.y+this.b.size.y+1,this.b.g.z+this.b.size.z/2+this.b.size.y/2+1,this).b.time.Im=h;this.b.V.x=this.b.V.y=0;this.b.Fd=0}this.Yw=sc.Px.sV;this.vj=0;this.lw.length=0}else{this.Ama();this.Rfa&&this.Rfa()}else this.vj=this.vj-ig.i.ja}else{if(this.lg.Ft>0){this.lg.Ft=this.lg.Ft-ig.i.ja;this.lg.Ft<=0&&this.r_()}if(this.lg.X3>0){this.lg.X3=this.lg.X3-ig.i.ja;this.lg.X3<=0&&this.Kma()}}this.parent()},r_:function(){this.lg.Ft=
0;this.lg.nGa=0;this.lg.me=0;this.lg.time=0},Kma:function(){this.lg.X3=0;this.lg.cca=0;this.lg.wna=0;if(this.lg.GX){this.lg.GX.clear();this.lg.GX=q}},SJa:function(){this.YBa()},YBa:function(){var a=this.b;if(a.g.z<ig.r.Xy&&!this.ria&&!this.b.rm){if(a.V.z<0)a.V.z=0;if(this.Yw!=sc.Px.sV&&this.W&&this.W.Wf())this.vj=0.001;this.Hga(ig.hd.HOLE)}else{if(this.b.yd.height&&!this.Jg){this.tb(b);!sc.Ta.f5a(this.b)&&(!this.af.n&&!ig.qd.oqa(this.b)&&a.pc>=ig.r.Xy&&!ig.Pb.qqa(ig.Pb.pN(this.b,y,h)))&&Vec3.assign(this.af.g,
this.b.g)}if(!(a.g.z>a.pc||this.Jg)){var c=this.RU.Pb;if(ig.Pb.vea(c))this.Hga(c);else{c=c==ig.hd.ICE&&(!this.W||!this.W.Ag("BEGONE_ICE"))?0.12:1;a.Ze.Pb=c<=a.Ze.Pb?c:(1-ig.i.ja*3)*a.Ze.Pb+ig.i.ja*3*c;!ig.qd.oqa(this.b)&&(!sc.Ta.f5a(this.b)&&!ig.Pb.qqa(this.RU.Pb)&&!this.af.n)&&Vec3.assign(this.af.g,this.b.g)}}}},Hga:function(a){if(!this.af.n&&(!this.W||!this.W.Wf()||this.Ah&&this.Yv))if(!this.x7a||!this.x7a(a)){var b=this.lc(ig.Pa.BOTTOM,d);this.Ya.alpha=0;a==ig.hd.HOLE?this.G.PA.Cg("hole_fall",
b.x,b.y,b.z):a==ig.hd.WATER?this.G.PA.Cg("waterSplash",b.x,b.y,b.z):a==ig.hd.HIGHWAY?this.G.PA.Cg("hole_fall",b.x,b.y,b.z):a==ig.hd.COAL&&this.G.PA.Cg("coalBurn",b.x,b.y,b.z);b=0;if(this.W){sc.Ta.NGa()||(b=Math.floor(this.W.Td("hp")*this.H0a));this.Ei()}this.XM(a,y,b)}},TBb:function(){this.af.n=this.af.n-ig.i.ja;if(this.af.n<0)this.af.n=0;Vec3.Oa(this.b.V,0,0,0);Vec2.Oa(this.b.wb,0,0);var a=this.af.n/this.af.duration,b=KEY_SPLINES.EASE_IN_OUT.get((1-a).Rb(0,1)),b=Vec3.an(this.af.zT,this.af.g,b,d);
this.l(b.x,b.y,b.z);if(this.af.n<=0.2&&!this.af.fx){this.af.fx=h;ig.r.G.Mf.va("showRespawn",this)}if(a<=0){this.Ya.Xa=1;this.Ya.Va=1;this.Ds=0.3;this.bsa&&this.bsa();this.hf.path.ZKa();if(!this.Wf()){this.Ei();if(!sc.Ta.NGa()&&this.af.me){this.mea(this.af.me,2);this.vj=0.1;if(this.Wf()){this.Ya.alpha=1;!this.Ah&&this.af.Pb&&sc.pa.bc("combat","enviroKills",1)}this.af.Pb=q}}}},XM:function(a,b,c){Vec3.Oa(this.b.V,0,0,0);if(b){this.af.Pb=a;this.l(this.af.g.x,this.af.g.y,this.af.g.z);this.hf.path.ZKa();
ig.r.G.Mf.va("showFast",this);this.bsa&&this.bsa()}else{var b=this.lc(ig.Pa.BOTTOM,d),f=Vec3.create(this.af.g);Vec2.Tm(f,this.b.size,0.5);var i=(Vec3.eb(b,f)/640).Rb(0.5,1.5);this.G.PA.Cg("respawnLine",b.x,b.y,b.z,this,{target2Point:f,duration:i+0.1});Vec3.assign(this.af.zT,this.b.g);this.Ds=-1;this.af.n=i+0.1;this.af.duration=i;this.af.me=c||0;this.af.fx=y;this.af.Pb=a;this.Wf()||this.Zf(k)}},Tra:J(),r1a:function(){return sc.jwa}});sc.jwa=ig.uPa.extend({dZ:h,f:function(a,b,c,d){this.parent(a,b,c,
d);this.sa=this.XD.sa},me:function(a,b){return this.XD.me(a,b,this)},oq:function(a){this.XD.ZBa(a,this)},tq:M("XD"),te:M("XD"),aj:function(a,b){return this.zY(a,b)},qu:function(a,b){var c=b||{};Vec2.assign(c,this.b.Nc.Vk);if(Vec2.Ig(c)){Vec2.assign(c,a.b.V);Vec2.Lc(c)}return c}});var k=new ig.Xe("quickRespawnAction",[{type:"WAIT",time:10}]);k.hint="battle";k.sq=h;ig.Zr.dwa={v3:ig.wa.Combatant,FV:{damageFactor:1,ballFactor:1,hitStable:"NONE",hitIgnore:y,tackleAttackInfo:q,invincibleTimer:0,elementFilter:0,
spikeDmg:0,tmpTarget:q,fallDmgFactor:0.1},J4:function(){typeof this.hitStable=="string"&&(this.hitStable=sc.Wb[this.hitStable]);typeof this.elementFilter=="string"&&(this.elementFilter=sc.ha[this.elementFilter])},apply:function(a){if(a.W){a.W.Yi=this.damageFactor*1;a.W.qBa=this.ballFactor*1}a.Gr=this.hitStable;a.Vda=this.hitIgnore;a.zo.zb=this.tackleAttackInfo;a.Ds=this.invincibleTimer;a.o4=this.elementFilter;a.QK.bva=this.spikeDmg;a.Sq=this.tmpTarget;a.H0a=this.fallDmgFactor;a.Re.Cv=q;a.Re.uD.length=
0;a.Re.Rna=0;a.Re.e3=0;a.Re.mma=0;a.Re.Fda=0;a.Re.Fpa=q;a.Re.UJ=q;a.Re.HY=0},load:function(a){if(a.W){this.damageFactor=a.W.Yi;this.ballFactor=a.W.qBa}this.hitStable=a.Gr;this.hitIgnore=a.Vda;this.tackleAttackInfo=a.zo.zb;this.invincibleTimer=a.Ds;this.elementFilter=a.o4;this.spikeDmg=a.QK.bva;this.tmpTarget=a.Sq;this.fallDmgFactor=a.H0a}}});ig.J=h;
ig.N("game.feature.combat.entities.food-icon").O("impact.base.entity","impact.base.entity-pool").K(function(){sc.zV={HOLD:0,BUBBLE:1,DONE:2};var a=["SANDWICH","GREEN_TEA","CROISSANT","BAGUETTE","RED_WINE","ICE_CREAM_S","ICE_CREAM_M","ICE_CREAM_L","WATER","SPICY_BUN","FRUIT_SALAT","RICE_CRACKER","VEGGIE_STICKS","STEAK","SALTY_ICE_CREAM","CHILLI","CHILLI_DOG","COLD_PLATE","LEMONADE","PEANUTS","HOT_SAUCE","PISTACHIO","ESPRESSO","COFFEE","KEBAB","KEBAB2","KEBAB3","RISOTTO","BEAR_BEER","GRAB_MEAD","FOX_SAKE",
"WHALE_WINE","ONE_UP","BURGER","SUSHI","SUSHIBURGER","RISING_STAR","DK_PEPPER","SPAETZLE","MAULTASCHE","DURIAN","PENGO_POP","BEAT_ZERO","WEREWOLF_STICK"];sc.Dwa={};for(var b=0;b<a.length;++b)sc.Dwa[a[b]]=b;Vec3.create();var c={};sc.XQa=ig.Kc.extend({Y:0,pb:q,offset:Vec2.create(),state:sc.zV.HOLD,b1a:new ig.Vh("media/entity/player/item-hold.png",16,16,0,0),Vub:new ig.ia("media/entity/map-gui/hit-numbers.png"),n:0,f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.NONE;this.b.Ze.vg=0;this.b.time.Im=
h;this.b.F(0,0,0);this.Y=j.icon;this.pb=j.combatant;this.pb.Hj(this);this.n=0.1},Np:function(){this.ul(this.DR,h)},sr:function(){if(this.n>0){this.n=this.n-ig.i.ja;if(this.n<=0){this.n=0;if(this.state==sc.zV.DONE){this.pb.dE(this);this.ze()}}}if(this.pb){var a=this.pb.b;this.l(a.g.x+a.size.x/2,a.g.y+a.size.y,a.g.z)}},HH:function(a,b){this.state=a;b?Vec2.assign(this.offset,b):Vec2.Oa(this.offset,0,0);this.ul(0);this.n=0.1},Zl:function(){this.ze()},Gh:function(){var a=this.n/0.1;this.state!=sc.zV.DONE&&
(a=1-a);var b,i=0,j=0;if(this.state!=sc.zV.HOLD){this.ul(2,h);b=this.Ua[0];b.l(this.b.g.x-12+this.offset.x,this.b.g.y+2,this.b.g.z+28+2+this.offset.y);b.F(24,0,32);b.Eb(12,16);b.Bj(this.Vub,0,288);b.ge(0.8);b.setTransform(a,a,0);b=this.Ua[1];i=0;j=38}else{this.ul(1);b=this.Ua[0];i=-10;j=17}i=i+this.offset.x;j=j+this.offset.y;b.l(this.b.g.x+i-8,this.b.g.y+4,this.b.g.z+j+4);b.F(16,0,16);b.Eb(8,8);i=this.b1a.Ly(c,this.Y);b.Bj(this.b1a.wd,i.x,i.y);b.setTransform(a,a,0)}})});ig.J=h;
ig.N("game.feature.combat.entities.drop").O("impact.feature.effect.effect-sheet","impact.base.entity").K(function(){var a=Vec3.create();sc.m9={HP:1,SP:2,ITEM:3,COIN:4};Vec2.create();sc.qL=ig.Wd.extend({G:new ig.ud("drops"),mb:new ig.Al({namedSheets:{small:{src:"media/entity/enemy/drops.png",width:8,height:8},medium:{src:"media/entity/enemy/drops.png",width:8,height:8,offX:48},big:{src:"media/entity/enemy/drops.png",width:16,height:16,offY:8},coin:{src:"media/entity/enemy/drops.png",width:8,height:8,
offX:96}},time:0.03,repeat:h,SUB:[{name:"healSmall",sheet:"small",frames:[0,1,2,3,4,5]},{name:"healMedium",sheet:"medium",frames:[0,1,2,3,4,5]},{name:"healBig",sheet:"big",frames:[0,1,2,3,4,5]},{name:"coin",sheet:"coin",frames:[0,1,2,3,2,1]},{name:"coinFlip",sheet:"coin",frames:[0,1,2,3]}]}),n:0,target:q,Ip:0,boa:0,hL:q,DM:q,lO:q,SGa:y,f:function(a,b,f,i){this.parent(a,b,f,i);this.b.vl(ig.ca.IGNORE);this.b.F(8,8,8);this.b.Cd.size=8;this.b.kj=1;this.b.Vm=0;this.b.Ch=250;this.b.Ze.vg=0.1;this.b.Ze.Am=
0.1;this.b.ht=2;this.b.Fd=0.6;Vec2.Oa(this.b.V,0,40);Vec2.rotate(this.b.V,Math.random()*Math.PI*2);this.b.V.z=150+Math.random()*70;this.Ip=sc.m9[i.dropType]||sc.m9.HP;this.boa=i.value;this.hL=i.varIncrease;this.SGa=i.isGeneric;this.DM=i.circleEffect;this.lO=i.pickupEffect;this.n=11;this.SGa?this.Ip==sc.m9.COIN&&this.Ma("coin"):this.boa>=0.5?this.Ma("healBig"):this.boa>=0.2?this.Ma("healMedium"):this.Ma("healSmall");a=new ig.Bw(this,ig.mk.XS,0,0,-1,1);ig.pg.ey(a);i.target&&this.Eoa(i.target)},update:function(){if(this.target||
!sc.q.oe()){this.n=this.n-ig.i.ja;if(this.target){this.b.yd.height=this.target.b.g.z+12-this.b.pc;ig.qd.Wk(this.b,this.target.b,this.b.wb);Vec2.length(this.b.wb)<16&&(this.SGa?this.kxb(this.target):this.lxb(this.target))}else this.n<=10.4&&!this.target&&this.Eyb();if(!this.hL){if(this.n<=0.4)this.Ya.alpha=this.n/0.4;this.n<=0&&this.ze()}}this.parent()},kxb:function(b){this.lO&&this.G.va(this.lO,b);this.hL&&ig.ma.add(this.hL,1);b=this.lc(ig.Pa.CENTER,a);this.G.Cg(this.DM||"circle",b.x,b.y,b.z);this.ze()},
lxb:function(b){this.G.va("circle",this);this.G.va("healing",b);b.ex(new sc.Kja(q,{value:this.boa}));b=this.lc(ig.Pa.CENTER,a);this.G.Cg("circle",b.x,b.y,b.z);this.ze()},Eoa:function(a){if(this.n<2)this.n=2;this.target=a;this.b.vl(ig.ca.NONE);this.b.yd.yl=3;this.b.yd.Mh=800;this.b.yd.er=4;this.b.Ze.Am=0.4;this.G.va("line",this,{duration:-1});this.G.va(this.DM||"circle",this)},Eyb:function(){ig.r.cb&&ig.r.cb.h4(this)<120&&this.Eoa(ig.r.cb)},hH:function(){if(this.b.V.z<80)this.b.V.z=80}});var b=Vec3.create();
sc.qL.PO=function(a,d,f,i,j,k){f={dropType:f,value:0,target:j,varIncrease:k};for(a=a.lc(d,b);i>ig.lf.Zj;){d=i>=0.6?0.5:i>=0.2?0.2:Math.min(0.1,i);f.value=d;ig.r.Pe(sc.qL,a.x,a.y,a.z,f);i=i-d}};sc.qL.IMb=function(a,d,f){d={dropType:f.type,value:1,target:d,varIncrease:f.hL,circleEffect:f.DM,pickupEffect:f.lO,isGeneric:h};a=a.lc(f.align,b);for(f=~~(Math.random()*(f.max-f.min+1))+f.min;f>0;){d.value=1;ig.r.Pe(sc.qL,a.x,a.y,a.z,d);f--}}});ig.J=h;
ig.N("game.feature.combat.entities.item-drop").O("impact.feature.effect.effect-sheet","impact.base.entity").K(function(){var a={"item-default":0,"item-helm":1,"item-sword":2,"item-belt":3,"item-shoe":4,"item-items":5,"item-key":6,"item-trade":7};sc.zL={ENEMY:{},PROP:{},EVENT_PROP:{L8a:h},CHEST:{Gg:h,L8a:h}};var b={DUNGEON_KEY:0,DUNGEON_MASTER_KEY:1};sc.DV=ig.Wd.extend({s:new ig.ia("media/entity/enemy/item-drops.png"),G:new ig.ud("marble"),Na:{start:new ig.ka("media/sound/drops/drop-start.ogg",0.9),
lSb:new ig.ka("media/sound/drops/drop-catch.ogg",0.6),hvb:new ig.ka("media/sound/drops/drop-low-white.ogg",1),ivb:new ig.ka("media/sound/drops/drop-normal-bronze.ogg",1),jvb:new ig.ka("media/sound/drops/drop-rare-silver.ogg",1),gvb:new ig.ka("media/sound/drops/drop-legendary-gold.ogg",1),kZa:new ig.ka("media/sound/drops/drop-unique-purple.ogg",1)},nEa:y,target:q,n:0,Sf:Vec2.create(),Xha:0,Fa:0,maxHeight:0,item:0,zc:0,RZa:y,Ip:q,lTb:y,f:function(c,f,i,j){this.parent(c,f,i,j);this.Ip=j.dropType||sc.zL.ENEMY;
this.b.vl(ig.ca.IGNORE);this.b.F(16,4,12);this.b.Cd.size=8;this.b.kj=1;this.b.Vm=0;this.b.Ch=250;this.b.Ze.vg=0.1;this.b.Ze.Am=0.1;this.b.ht=2;this.b.Fd=0.6;if(this.Ip.Gg){this.b.yd.height=24;this.b.yd.yl=4}j.vel&&Vec2.assign(this.b.V,j.vel);this.b.V.z=80+Math.random()*50;this.target=j.target;this.item=j.item;this.zc=j.amount;f=sc.yb.getItem(this.item);c=f.rarity;f=a[f.icon]||0;i=g;(j=sc.map.s1a(this.item))&&(i=b[j]);i===g?this.Bd({namedSheets:{icons:{src:"media/entity/enemy/item-drops.png",width:16,
height:16,xCount:8},rotation:{src:"media/entity/enemy/item-drops.png",width:16,height:16,offY:96}},time:0.03,repeat:h,SUB:[{name:"default",sheet:"icons",frames:[f],tileOffset:8*c},{name:"rotStart",sheet:"rotation",frames:[0,1,2,3,4,5,6,7,8,8,9,9],repeat:y,tileOffset:10*c},{name:"rotating",sheet:"rotation",frames:[0,1,2,3,4,5,6,7,8,9],tileOffset:10*c}]}):this.Bd({namedSheets:{icons:{src:"media/entity/enemy/item-drops.png",width:16,height:24,offY:192},glow:{src:"media/entity/enemy/item-drops.png",width:16,
height:16,offY:192,offX:96}},time:0.03,repeat:h,shapeType:"Y_FLAT",SUB:[{name:"default",sheet:"icons",frames:[i]},{name:"rotStart",sheet:"icons",frames:[i]},{name:"preRotating",sheet:"glow",frames:[0],time:0.1},{name:"rotating",sheet:"glow",frames:[1,2,3,2]}]});if(this.Ip.Gg){this.Ma("default");this.G.va("itemAppear",this)}else this.Ma("rotStart",h,"default",h);c=new ig.Bw(this,ig.mk.XS,0,0,-1,1);ig.pg.ey(c);this.n=0;this.Ip.Gg||ig.ah.gh(this.Na.start,this)},pCa:function(a){if(!this.RZa){this.RZa=
h;sc.q.T.sA(this.item,this.zc,y,a);this.Ip!=sc.zL.CHEST&&sc.pa.bc("items","dropsTotal",this.zc);this.Ip==sc.zL.PROP?sc.pa.bc("items","dropsProps",this.zc):this.Ip==sc.zL.ENEMY&&sc.pa.bc("items","dropsEnemies",this.zc)}},Ge:function(a){this.pCa();var b=sc.yb.getItem(this.item).rarity;b==sc.Wz.LOW?ig.ah.gh(this.Na.hvb,ig.r.cb):b==sc.Wz.NORMAL?ig.ah.gh(this.Na.ivb,ig.r.cb):b==sc.Wz.RARE?ig.ah.gh(this.Na.jvb,ig.r.cb):b==sc.Wz.LEGENDARY?ig.ah.gh(this.Na.gvb,ig.r.cb):b==sc.Wz.UNIQUE?ig.ah.gh(this.Na.kZa,
ig.r.cb):b==sc.Wz.BACKER&&ig.ah.gh(this.Na.kZa,ig.r.cb);this.parent(a)},LJa:function(){this.pCa()},update:function(){this.n=this.n+ig.i.ja;this.Ip.L8a&&this.n>=0.2&&this.pCa(h);if(this.nEa){var a=Math.min(1,this.n/this.Fa),b=1-(2*a-1)*(2*a-1),c=this.target.tb();this.b.l(this.Sf.x*(1-a)+(c.x-this.b.size.x/2)*a,this.Sf.y*(1-a)+(c.y-this.b.size.y/2)*a,this.Xha*(1-a)+(this.target.b.g.z+this.target.b.size.z+1)*a+b*this.maxHeight);this.b.pc=0;this.n>=this.Fa&&this.ze()}else{a=Vec2.length(Vec2.sub(this.target.tb(),
this.b.g));b=this.Ip.Gg?1:0.7;(this.Ip.Gg||a<48)&&this.n>b&&this.Pbb(0.4,12)}this.parent()},hH:function(){if(!this.nEa){if(this.b.V.z<100)this.b.V.z=100;var a;if(this.n>1.3){a=0.5+(Vec2.length(Vec2.sub(this.target.tb(),this.b.g))/200).Rb(0,1)*0.5;this.Pbb(a,a*120)}}},Pbb:function(a,b){this.Fa=a;this.maxHeight=b;this.Ma("preRotating",h,"rotating");this.nEa=h;Vec2.assign(this.Sf,this.b.g);this.Xha=this.b.g.z;this.n=0;this.G.va("line",this,{duration:-1})}});var c=Vec3.create();sc.DV.PO=function(a,b,
i,j,k,l){l=l||sc.zL.ENEMY;a=a.lc(b,c);b=Vec2.create();i={target:i,item:j,amount:1,dropType:l,vel:b};if(k==1){if(!l.Gg){Vec2.Oa(b,0,40);Vec2.rotate(b,Math.random()*Math.PI*2)}ig.r.Pe(sc.DV,a.x-8,a.y-2,a.z,i)}else{j=k;for(Vec2.Oa(b,l.Gg?20:40,0);j--;){ig.r.Pe(sc.DV,a.x-8,a.y-2,a.z,i);Vec2.rotate(b,Math.PI*2*(1/k)*(0.8+Math.random()*0.4))}}}});ig.J=h;
ig.N("game.feature.combat.model.combat-condition").O("game.feature.combat.model.combat-params").K(function(){sc.cg={};sc.cg.RANDOM=ig.Ca.extend({max:0,t:new ig.u({attributes:{max:{c:"Number",d:"Maximum random value. Range 0-1. 1 = 100% likely to happen."}}}),f:function(a){assertContent(a,"max");this.max=a.max},Nb:function(a,b){return b<=this.max}});sc.cg.HP_BELOW=ig.Ca.extend({value:0,t:new ig.u({attributes:{value:{c:"Number",d:"Relative HP are below the given value. Range: 0-1. 0.5 => below 50%"}}}),
f:function(a){assertContent(a,"value");this.value=a.value},Nb:function(a){a=a.W;return!a?y:a.Sc/a.Td("hp")<=this.value}});sc.cg.HAS_SP=ig.Ca.extend({min:0,t:new ig.u({attributes:{min:{c:"NumberExpression",d:"Number of SP that is required"}}}),f:function(a){this.min=a.min},Nb:function(a){return a.W.nm>=ig.Ja.eh(this.min)}});sc.cg.SPAWN_POINT_DISTANCE=ig.Ca.extend({min:0,max:0,t:new ig.u({attributes:{min:{c:"Number",d:"Minimum distance to spawn point in pixels"},max:{c:"Number",d:"Maximum distance to spawn point in pixels"}}}),
f:function(a){this.min=a.min||0;this.max=a.max||100},Nb:function(a){var c=a.tb(b),a=Vec2.eb(c,a.kNa);return this.min<=a&&a<=this.max}});sc.cg.TARGET_REACHABLE=ig.Ca.extend({eb:0,Ot:y,t:new ig.u({attributes:{eb:{c:"Number",d:"Maximum distance to target in pixels."},Ot:{c:"Boolean",d:"Plan to throw stuff at target => cliffs in between are ok."}}}),f:function(a){this.eb=a.distance||48;this.Ot=a.throwing||y},Nb:function(a){var b=a.Qd();return!b?y:ig.navigation.j5a(a,b,this.eb,this.Ot)}});sc.cg.TARGET_DISTANCE=
ig.Ca.extend({min:0,max:0,t:new ig.u({attributes:{min:{c:"Number",d:"Min distance to target in pixels."},max:{c:"Number",d:"max distance to target in pixels."}}}),f:function(a){this.min=a.min||0;this.max=a.max||100},Nb:function(a){var b=a.Qd();if(!b)return y;a=a.h4(b);return this.min<=a&&a<=this.max}});sc.cg.TARGET_OVERLAP=ig.Ca.extend({WY:y,t:new ig.u({attributes:{WY:{c:"Boolean",d:"If true, do not check overlapping with z coords"}}}),f:function(a){this.WY=a.ignoreZ||y},Nb:function(a){var b=a.Qd();
return!b?y:ig.qd.AN(a.b,b.b,this.WY)}});sc.cg.TARGET_FACE=ig.Ca.extend({vZ:0,t:new ig.u({attributes:{vZ:{c:"Number",d:"How much the face direction of the target diverges from distance vector. 0.5 = 45 degree"}}}),f:function(a){this.vZ=a.maxAngle||0},Nb:function(a){var c=a.Qd();if(!c)return y;ig.qd.Wk(c.b,a.b,b);return Vec2.Qb(b,c.face)<this.vZ*Math.PI}});sc.cg.FACING_TARGET=ig.Ca.extend({vZ:0,t:new ig.u({attributes:{vZ:{c:"Number",d:"How much the OWN face direction diverges from distance to target vector. 0.5 = 45 degree"}}}),
f:function(a){this.vZ=a.maxAngle||0},Nb:function(a){var c=a.Qd();if(!c)return y;ig.qd.Wk(a.b,c.b,b);return Vec2.Qb(b,a.face)<this.vZ*Math.PI}});sc.cg.ENTITY_DISTANCE_OVER=ig.Ca.extend({Q:q,eb:0,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity distance is messured from."},eb:{c:"Number",d:"Distance value"}}}),f:function(a){this.Q=a.entity;this.eb=a.distance||100},Nb:function(a){var b=ig.Ja.rd(this.Q);return!b?y:a.h4(b)>this.eb}});var a=Vec2.create();sc.cg.ENTITY_COORD_DELTA_WITHIN=ig.Ca.extend({Q:q,
eb:0,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity distance is messured from."},BCa:{c:"String",d:"Coordinate to evaluate distance from",U:["X","Y","Z"]},jM:{c:"Boolean",d:"If true, compare absolute delta. Otherwise it's COMBATANT POS - SELECTED ENTITY POS"},min:{c:"Number",d:"Minimum value"},max:{c:"Number",d:"Maximum value"},xcb:{c:"Boolean",d:"If true: Calculate delta TARGET POS - SELECTED ENTITY POS"}}}),f:function(a){this.Q=a.entity;this.BCa=a.coordinate;this.jM=a.absolute;this.min=a.min||
0;this.max=a.max||0;this.xcb=a.targetDelta||y},Nb:function(b){var c=ig.Ja.rd(this.Q);if(!c)return y;b=(this.xcb?b.Qd():b)||b;c=ig.qd.$Ea(c.b,b.b,a);b=0;b=this.BCa=="X"?c.x:this.BCa=="Y"?c.y:c.z;this.jM&&(b=Math.abs(b));return this.min<=b&&b<=this.max}});var b=Vec2.create(),c=Vec2.create();sc.cg.TARGET_X_DISTANCE=ig.Ca.extend({min:0,max:0,t:new ig.u({attributes:{min:{c:"Number",d:"Min X distance to target in pixels."},max:{c:"Number",d:"max X distance to target in pixels."}}}),f:function(a){this.min=
a.min||0;this.max=a.max||100},Nb:function(a){var f=a.Qd();if(!f)return y;a=a.tb(b);Vec2.sub(a,f.tb(c));f=Math.abs(a.x);return this.min<=f&&f<=this.max}});sc.cg.TARGET_Y_DISTANCE_BELOW=ig.Ca.extend({value:0,t:new ig.u({attributes:{value:{c:"value",d:"Value the y distance needs to be below of"}}}),f:function(a){assertContent(a,"value");this.value=a.value},Nb:function(a){var b=a.Qd();return!b?y:b.b.g.y-a.b.g.y<=this.value}});sc.cg.TARGET_Z_DISTANCE=ig.Ca.extend({Pz:0,Oz:0,t:new ig.u({attributes:{Pz:{c:"Number",
d:"Min Z distance to target in pixels."},Oz:{c:"Number",d:"max Z distance to target in pixels."}}}),f:function(a){this.Pz=a.zMin;this.Oz=a.zMax},Nb:function(a){var b=a.Qd();if(!b)return y;var c=b.b.g.z-a.b.g.z;return this.Pz<=b.b.g.z+b.b.size.z-a.b.g.z&&c<=this.Oz}});sc.cg.TARGET_ALIVE=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return(a=a.Qd())&&!a.Wf()}});sc.cg.HAS_TARGET=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return!!a.Qd()}});sc.cg.HP_BREAK=ig.Ca.extend({min:g,
max:g,t:new ig.u({attributes:{min:{c:"Number",d:"If defined: HP Break has to be at least this value.",I:h},max:{c:"Number",d:"If defined: HP Break has to be at most this value.",I:h}}}),f:function(a){this.min=a.min;this.max=a.max},Nb:function(a){a=a.te().Ry||0;return this.min!=g&&this.min!=q&&a<this.min||this.max!=g&&this.max!=q&&a>this.max?y:h}});sc.cg.HP_BREAK_GLOBAL=ig.Ca.extend({min:g,max:g,t:new ig.u({attributes:{min:{c:"Number",d:"If defined: HP Break has to be at least this value.",I:h},max:{c:"Number",
d:"If defined: HP Break has to be at most this value.",I:h}}}),f:function(a){this.min=a.min;this.max=a.max},Nb:function(){for(var a=sc.Ta.nv[sc.pd.ENEMY],b=0,c=a.length;c--;)b=Math.max(b,a[c].Ry);return this.min!=g&&this.min!=q&&b<this.min||this.max!=g&&this.max!=q&&b>this.max?y:h}});sc.cg.HAS_SHIELD=ig.Ca.extend({name:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of shield that has to be active"}}}),f:function(a){assertContent(a,"name");this.name=a.name},Nb:function(a){return a.C3a(this.name)}});
sc.cg.HAS_PROXY=ig.Ca.extend({t:new ig.u({attributes:{Zha:{c:"Boolean",d:"If true: only proxies sticking to source"},group:{c:"String",d:"If true: only proxies matching this group"},count:{c:"Number",d:"If defined: need at least that amount of maxing proxies",I:h}}}),f:function(a){this.Zha=a.sticking||y;this.group=a.group;this.count=a.count||0},Nb:function(a){for(var a=a.XA,b=a.length,c=0;b--;){var j=a[b];if(j instanceof sc.ww&&(!this.Zha||j.VO)&&!(this.group&&j.group!=this.group))if(this.count)c++;
else return h}return this.count&&c>=this.count?h:y}});sc.cg.ENTERED_STATE=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return a.u5a}});sc.cg.CURRENT_STATE=ig.Ca.extend({t:new ig.u({attributes:{state:{c:"EnemyStateRef",d:"State enemy is currently in"}}}),f:function(a){this.state=a.state},Nb:function(a){return a.xe==this.state}});sc.cg.ENEMY_COUNT=ig.Ca.extend({count:0,GLa:0,t:new ig.u({attributes:{count:{c:"Number",d:"Minimum amount of enemies"},GLa:{c:"Boolean",d:"Only count same enemy type"}}}),
f:function(a){this.count=a.count;this.GLa=a.sameType},Nb:function(a){return sc.Ta.iN(a.sa,this.GLa?a.Zm:q)>=this.count}});sc.cg.TRACKER_READY=ig.Ca.extend({name:0,SIa:y,t:new ig.u({attributes:{name:{c:"TrackerRef",d:"Name of Tracker"},SIa:{c:"Boolean",d:"Do not reset tracker after action/reaction has been performed",I:h}}}),f:function(a){this.name=a.name;this.SIa=a.noResetOnPerformed||y},Nb:function(a,b,c,j){var k=a.te().XH[this.name];return k&&k.Rra(a,b,c,j)},$N:function(a){var b=a.te().XH[this.name];
b&&b.$N&&b.$N(a)},UD:function(a){var b=a.te().XH[this.name];b&&b.UD&&b.UD(a,this.SIa)}});sc.cg.ACTION_TOKEN=ig.Ca.extend({name:0,time:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of action token that has to be available."},time:{c:"Number",d:"Time to block action token if available."}}}),f:function(a){assertContent(a,"name","time");this.name=a.name;this.time=a.time},Nb:function(){return sc.Ta.czb(this.name,this.time)}});sc.cg.MULTI_TOKEN=ig.Ca.extend({Js:[],kOa:[],t:new ig.u({attributes:{Js:{c:"JSON",
d:"An array of names, one for each token."},kOa:{c:"JSON",d:"An array of waiting times, one for each token."}}}),f:function(a){assertContent(a,"tokens");for(var b in a.tokens){this.Js.push(b);this.kOa.push(a.tokens[b])}},Nb:function(){return sc.Ta.LAb(this.Js,this.kOa)}});sc.cg.VAR_CONDITION=ig.Ca.extend({fb:0,t:new ig.u({attributes:{fb:{c:"ActorVarCondition",d:"VarCondition that has to be true."}}}),f:function(a){assertContent(a,"condition");this.fb=a.condition;if(typeof this.fb=="string")this.fb=
new ig.de(this.fb)},Nb:function(a){ig.ma.Ega(a);var b;if(this.fb.actorAttrib)b=(b=a.hzb(this.fb.actorAttrib))?b.evaluate():y;else b=this.fb?this.fb.evaluate():y;ig.ma.Z6(a);return b}});sc.cg.ATTRIB_IS_TRUE=ig.Ca.extend({name:0,t:new ig.u({attributes:{name:{c:"String",d:"Name of actor attrib"}}}),f:function(a){assertContent(a,"name");this.name=a.name},Nb:function(a){return a.getAttribute(this.name)}});sc.cg.BLOCKING_FREE_LINE=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return sc.Ta.G4a(a)}});
sc.cg.BALL_CHARGE=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a,b,c){return c&&c.zb&&c.zb.wi("CHARGED")}});sc.cg.BALL_SMALL=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a,b,c){return c&&c.HX.Nn&&c.zb&&!c.zb.wi("CHARGED")}});sc.cg.ATTACK_FROM_ENTITY=ig.Ca.extend({t:new ig.u({attributes:{Q:{c:"Entity",d:"Check if incoming attack originates from this entity"}}}),f:function(a){this.Q=a.entity},Nb:function(a,b,c){if(!c)return y;a=c.HX.te();b=ig.Ja.rd(this.Q);return a==b}});
sc.cg.DAMAGE_FACTOR=ig.Ca.extend({min:g,t:new ig.u({attributes:{min:{c:"Number",d:"Minimum value of attack damage factor",ab:1}}}),f:function(a){this.min=a.min||0},Nb:function(a,b,c){return c&&c.zb.Yi>=this.min}});sc.cg.HAS_BLOCKED_DAMAGE=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return a.Re.e3>0}});sc.cg.HAS_BLOCKED_HITS=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return a.Re.Fda>0}});sc.cg.HAS_BLOCKED_ENTITY=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),
Nb:function(a){return a.s3a()}});sc.cg.PART_HIT=ig.Ca.extend({Ck:q,t:new ig.u({attributes:{Ck:{c:"String",d:"Name of part that is hit"}}}),f:function(a){this.Ck=a.partName},Nb:function(a,b,c){return!c||!c.osa?y:c.osa.Ck==this.Ck}});sc.cg.HAS_HINT=ig.Ca.extend({t:new ig.u({attributes:{hint:{c:"String",d:"Hint Value"}}}),f:function(a){this.hint=a.hint},Nb:function(a,b,c){return c&&c.zb&&c.zb.wi(this.hint)}});sc.cg.IS_BALL=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a,b,c){return c&&
c.zb.a3}});sc.cg.IS_SHIELDED=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a,b,c){return c&&c.JMa}});sc.cg.ELEMENT_HIT=ig.Ca.extend({element:q,t:new ig.u({attributes:{element:{c:"String",d:"Element required",U:sc.ha}}}),f:function(a){this.element=sc.ha[a.element]||sc.ha.NEUTRAL},Nb:function(a,b,c){return c&&c.zb.element==this.element}});sc.cg.ELEMENT_HIT_ATTRIB=ig.Ca.extend({element:q,t:new ig.u({attributes:{Nw:{c:"String",d:"Attrib name which contains Element String that must match hit element"},
MA:{c:"Boolean",d:"If true, use counter element of element in attrib"}}}),f:function(a){this.Nw=a.attribName;this.MA=a.counter||y},Nb:function(a,b,c){if(a=sc.ha[a.getAttribute(this.Nw)]){this.MA&&(a=sc.n9[a]);return c&&c.zb.element==a}}});sc.cg.ELEMENT_MODE=ig.Ca.extend({element:q,t:new ig.u({attributes:{element:{c:"String",d:"Element of the combatant is currently in",U:sc.ha}}}),f:function(a){this.element=sc.ha[a.element]||sc.ha.NEUTRAL},Nb:function(a){a=a.te();return sc.Ta.bpa(a)==this.element}});
sc.cg.COMBO_HITS=ig.Ca.extend({min:0,t:new ig.u({attributes:{min:{c:"Number",d:"Minimum amount of hits of combo attack that enemy is stuck in"}}}),f:function(a){this.min=a.min},Nb:function(a){return a.lg.nGa>=this.min}});sc.cg.COMBO_TIME=ig.Ca.extend({min:0,t:new ig.u({attributes:{min:{c:"Number",d:"Minimum amount of time (in SECONDS) of combo attack that enemy is stuck in"}}}),f:function(a){this.min=a.min},Nb:function(a){return a.lg.time>=this.min},IJa:function(a){a.r_()}});sc.cg.STUN_ESCAPE=ig.Ca.extend({t:new ig.u({attributes:{abb:{c:"Boolean",
d:"If true, show stunEscape message on success"}}}),f:function(a){this.abb=a.showMsg||y},Nb:function(a){return a.lg.time>=a.lg.aia},IJa:function(a){a.r_();this.abb&&sc.Ta.LMa(a,sc.f9.STUN_CANCEL)}});sc.cg.COMBO_DAMAGE=ig.Ca.extend({min:0,t:new ig.u({attributes:{min:{c:"Number",d:"Amount of damage (relative to HP) of combo attack that enemy is stuck in"}}}),f:function(a){this.min=a.min},Nb:function(a){return a.lg.me/a.W.Td("hp")>=this.min}});sc.cg.POI_IS_CLOSE=ig.Ca.extend({rH:0,eb:0,t:new ig.u({attributes:{rH:{c:"PoiFilter",
d:"Kind of POI searched"},eb:{c:"Number",d:"Maximum distance to POI"},uZa:{c:"Boolean",d:"If true: check if path to POI is available"}}}),f:function(a){this.rH=sc.l1.CGa(a.poiFilter);this.eb=a.distance;this.uZa=a.checkPath},Nb:function(a){var b=sc.l1.REa(this.rH,a,this.eb,this.uZa);a.P5a=b;return!!b}});sc.cg.NAVIGATION_SUCCESS=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),Nb:function(a){return a.hf&&a.hf.path.TR==0}});sc.cg.COMPRESSOR_DETOUR_CONDITION=ig.Ca.extend({t:new ig.u({attributes:{}}),f:J(),
Nb:function(a,b,c){b=c&&c.HX;return!b||!(b instanceof sc.kwa)?y:b.web<a.Ry}})});ig.J=h;
ig.N("game.feature.combat.model.enemy-type").O("impact.base.loader","game.feature.combat.model.combat-params","game.feature.combat.model.combat-condition","impact.base.animation").K(function(){function a(a,b){return b.Tg-a.Tg}function b(a,b){if(!b.Je.r7){if(b.jca.length>0){for(var c=b.jca.length;c--;)b.jca[c].UD(b);b.jca.length=0}if(b.q6){var c=b.q6,d=y,f;for(f in c){var d=h,i=c[f];b.k8[f]=typeof i=="number"?i:i[0]+Math.random()*((i[1]||i[0])-i[0])}if(d){b.hf.y4=0;b.target&&a.DK(b)}b.q6=q}}b.Je.Ps=
q}function c(a,b){sc.qL.PO(a,ig.Pa.CENTER,"HP",b,ig.r.cb);for(var c=sc.sa.He.length;c--;){var d=sc.sa.Xk(c);d&&(d.q&&d.q.cZ())&&sc.qL.PO(a,ig.Pa.CENTER,"HP",b,d)}}function d(a,b,c){for(var f=0;f<b.length;++f){var i={Bf:q,parent:c||q},o=b[f].req;if(o)i.Bf=new sc.OE(o);if(b[f].sub){i.sub=[];d(i.sub,b[f].sub,i)}else{i.action=b[f].action;i.vs=b[f].frequency||q;i.kR=b[f].collab||q;i.vs&&!sc.U8[i.vs]&&e(Error("Unknown attack frequency '"+i.vs+"'"));i.Eh=b[f].preSwitchState;i.ux=b[f].postSwitchState;i.VY=
b[f].ignoreStun}a.push(i)}}function f(a,b,c){for(var d=0;d<a.length;++d){var i=a[d];if(i.sub||i.VY||!b.su())if(!i.vs||sc.Ta.Cvb(b,i.vs))if(!i.Bf||i.Bf.Nb(b,c))if(i.sub){if(i=f(i.sub,b,c))return i}else{if(i.kR){var o=new sc.Qgb(b,i.kR);if(!o.lcb)continue;b.zB.kR=o}else b.zB.kR=q;return i}}return q}var i=0;sc.wp={};sc.wp.ABSTRACT=0;sc.wp.PLAYERS=1;sc.wp.ANIMALS=2;sc.wp.MECHA=3;sc.wp.BOSS=4;sc.rwa={REGULAR:{},IMMEDIATELY:{iEb:h}};sc.wV=ig.XE.extend({Wi:"Enemy",Taa:q,rYa:sc.rwa.REGULAR,FDa:q,name:"",
W:q,df:q,exp:0,aa:1,Qo:4,rma:y,RY:[],mb:q,W2:{},ro:{},Pg:{},kp:{},Je:{},tOa:q,MY:0,Qda:0,D5:[],Mt:{mWb:0,t7a:y,p7a:y,H_a:120,g6a:240,h6a:3},oG:function(){return ig.root+this.path.vm("data/enemies/",".json")+ig.Kn()},onload:function(b){this.name=b.name;this.rma=b.boss;this.Tub=b.bossLabel||"Boss";this.Uub=b.bossOrder||0;this.oca=sc.wV.jQa[b.detectType]||sc.wV.jQa.DISTANCE;this.df=b.credit||0;this.Taa=b.aiGroup||q;this.rYa=sc.rwa[b.aiLearnType]||sc.rwa.REGULAR;this.FDa=b.enduranceScale||1;this.exp=
b.exp||0;this.aa=b.level||1;this.Sub=b.boostedLevel||60;this.Qo=b.maxSp||4;this.MY=b.headIdx;if(this.MY==g)this.MY=3;this.Qda=b.healDropRate||0;this.D5=b.itemDrops||[];this.tOa=b.trackers;if(b.params)this.W=b.params;if(b.elementModes)this.TA=b.elementModes;if(b.modifiers)this.So=b.modifiers;if(b._wm&&b._wm.attributes)this.W2=b._wm.attributes;if(b.hpBreaks){for(var c=0;c<b.hpBreaks.length;++c){var d=b.hpBreaks[c];this.RY.push({Tg:d.hp,tCb:d.healDrop})}this.RY.sort(a)}this.mb=new ig.Al(b.anims);this.size=
b.size;this.PF=b.cameraZFocus||0;this.JR=b.dmgZFocus||0;this.padding=b.padding||Vec2.vc(0,0);this.veb=b.walkConfigs;this.c6=sc.pP[b.material]||sc.pP.METAL;for(var f in b.proxies){c=b.proxies[f];this.ro[f]=new sc.D1[c.type](c)}if(b.targetDetect){c=b.targetDetect;if(c.detectDistance!=g)this.Mt.H_a=c.detectDistance;if(c.detectZDelta!=g)this.Mt.I_a=c.detectZDelta||0;if(c.loseDistance!=g)this.Mt.g6a=c.loseDistance;if(c.loseTime!=g)this.Mt.h6a=c.loseTime;if(c.onDistance!=g)this.Mt.t7a=c.onDistance;if(c.onVisible!=
g)this.Mt.tHb=c.onVisible;if(c.notifyNeighbourRadius!=g)this.Mt.f7a=c.notifyNeighbourRadius;if(c.onCloseBattle!=g)this.Mt.p7a=c.onCloseBattle;this.Mt.tHb=c.onVisible||y}this.s4=new ig.bv;this.s4.YS(b);for(f in b.actions){this.Pg[f]=new ig.Xe(f,b.actions[f]);this.Pg[f].hint="battle"}this.VCa=b.defaultState;for(f in b.states)this.kp[f]=new sc.ehb(f,b.states[f],this.s4);for(f in b.reactions){c=b.reactions[f];this.Je[f]=new sc.TE[c.type](f,c)}},Wo:function(){this.mb.Tc();for(var a in this.Pg)this.Pg[a].Ka();
for(a in this.ro)this.ro[a].Ka()},ES:function(a){if(this.loaded&&!a.ioa){a.ioa=h;a.F(this.size.x,this.size.y,this.size.z);a.PF=this.PF;a.JR=this.JR;a.b.K7(this.padding.x,this.padding.y);a.c6=this.c6;a.mb=this.mb;a.ro=this.ro;if(this.size.z>96)a.ria=h;for(var b in this.veb)a.WO(b,this.veb[b]);for(var c in this.tOa){var d=this.tOa[c],f=d.type;sc.p1[f]&&(a.XH[c]=new sc.p1[f](a,d))}for(b in this.W2){c=a.attributes[b];if(this.W2[b]._type=="VarCondition")a.setAttribute(b,new ig.de(c));else if(this.W2[b]._type==
"Vec3")a.setAttribute(b,ig.Ja.vq(c,Vec3.create()));else if(this.W2[b]._type=="Action"&&c){c=new ig.Xe(b,c);c.hint="battle";a.setAttribute(b,c)}}this.nw(a,a.xe||this.VCa);if(this.W){a.W=new sc.mja(this.W);if(this.TA)a.TA={Qa:0,K6a:q};this.Qdb(a);this.So&&a.W.xha(this.So);a.W.WLa(a);a.W.nMa(this.Qo);a.um&&a.um.jea();a.W.o4a()}sc.Mxb.Gdb(a)}},Qdb:function(a){var b=this.W;a.KN&&(b=sc.wja.XXa(this.W,this.aa,a.KN));if(this.TA){var c=[];c[sc.ha.NEUTRAL]=ig.copy(b);for(var d in sc.ha){var f=ig.copy(b),i=
this.TA[d],t;for(t in i)if(i[t])if(i[t]instanceof Array){f[t]||(f[t]=[1,1,1,1]);for(var p=0;p<i[t].length;++p)f[t][p]=i[t][p]}else f[t]=Math.round(i[t]*(f[t]/this.W[t]));c[sc.ha[d]]=f}a.TA.K6a=c;b=c[a.TA.Qa]}a.W.E7(b,h)},ZFb:function(a){for(var b in this.W2){var c=a.attributes[b];c instanceof ig.Xe&&c.Ka()}},gzb:function(a){a.xe||this.nw(a,this.VCa);return(a=this.kp[a.xe])&&a.jBa?this.Pg[a.jBa]:q},update:function(a){if(this.loaded&&!a.Og)if(a.W&&(a.W.Wf()||a.W.C5()))a.zB.UF=q;else{a.target&&a.target.Wf()&&
this.DK(a,y,h);a.ioa||this.ES(a);a.xe||this.nw(a,this.VCa);this.QOb(a);this.vZa(a);if(!a.Je.Qa&&!a.ed){b(this,a);a.ZG&&!a.su()&&this.nw(a,a.ZG);a.ZG||this.pdb(a)}}},vZa:function(a){for(var b=0;b<a.Je.enabled.length;++b){var c=a.Je.enabled[b],d=this.Je[c];if(a.Je.Ps!=d&&d.Nb&&d.Nb(a)){a.Je.Qa=c;d.Fsa(a)}}a.Je.Qa&&this.kBa(a)},kBa:function(a){var b=this.Je[a.Je.Qa];if(b.VY||!a.su()){a.zB.UF=q;a.Ama();b.apply(a,this.Pg);a.El&&a.Hj(a.El);a.Je.Ps=b;a.Je.Qa=q}},pdb:function(a){if(a.Je.r7){a.Zf(a.Je.r7);
a.Je.r7=q}else if(a.zB.UF){a.vj<=0.2&&a.Ama();if(!a.su()){a.r_();this.Lbb(a,a.zB.UF)}}else{var b=this.kp[a.xe].cKb(a);if(b)if(a.su()){a.zB.UF=b;a.Gr=sc.Wb.MASSIVE}else this.Lbb(a,b)}},Lbb:function(a,b){a.zB.kR&&a.zB.kR.start();for(var c=b;c;){c.Bf&&c.Bf.UD(a,h);c=c.parent}a.zB.UF=q;a.zB.kR=q;a.u5a=y;a.Vw.apply(a);b.vs&&sc.Ta.kcb(a,b.vs);a.Ama();b.Eh&&this.nw(a,b.Eh);b.action?a.Zf(this.Pg[b.action]):a.Zf(q);a.ZG=b.ux},QOb:function(a){if(a.target){if(!sc.q.KJ){c=a.h4(a.target);a.iia=c>this.Mt.g6a?a.iia+
ig.i.ja:0;a.iia>=this.Mt.h6a&&a.Sn(q)}}else if(ig.r.cb){var b=ig.r.cb,c=a.h4(b),d=Math.abs(a.b.g.z-b.b.g.z);if(c<this.Mt.H_a&&(!this.Mt.I_a||d<this.Mt.I_a))this.Mt.t7a?this.ama(a,b,h):this.Mt.p7a&&b.jia.length>0&&this.ama(a,b,h)}},DK:function(a,b,c,d){var f=sc.Ta.Uzb(a);f&&this.ama(a,f,b,c,d)},ama:function(a,b,c,d,f){a.iia=0;if(a.target!=b){a.Sn(b,f);if(a.target){i++;if(i>100)debugger;else{d||a.Ei();c&&this.Mt.f7a&&sc.Ta.tFb(a,this.Mt.f7a)}i--}}},Pwb:function(a,b){var c=b.te();if(a.target){if(c==
a.target)a.iia=0}else{sc.Ta.sKa=h;this.ama(a,c,h)}},Nfa:function(a,b){b>5&&a.Sn(q)},Rfa:function(a){a.Je.Qa&&this.kBa(a)},XT:function(a){if((!a.W||!a.W.Wf()&&!a.W.C5())&&!a.Ve&&!a.Je.Qa&&!a.ed){b(this,a);a.ZG||this.vZa(a);if(!a.ed){a.ZG&&!a.su()&&this.nw(a,a.ZG);a.ZG||this.pdb(a)}}},nw:function(a,c){a.ed&&a.Ei();var d=a.xe;a.xe=c;a.ZG=q;a.zB.UF=q;a.ed=q;a.Tw=q;a.u5a=h;b(this,a);var f=this.kp[a.xe],d=f.LLa&&f.LLa.indexOf(d)!=-1;a.Mq(f.s4);if(!d){for(var i in a.XH){f=a.XH[i];f.Qfa&&f.Qfa(a)}sc.Ta.RCb(a)}a.ad&&
a.ad.preIdle&&a.Ma(a.ad.preIdle,h,a.ad.idle)},hHa:function(a){return sc.Ta.Aa&&(!a.ed||a.ed.hint=="battle")},Q9a:function(a,b,d,f,i){if(!(b.Ry>=this.RY.length)){d=y;for(f=(b.W.Sc-f)/b.W.Td("hp");b.Ry<this.RY.length&&f<this.RY[b.Ry].Tg;){c(i||b,this.RY[b.Ry].tCb);if(a&&a.CF==g)a.CF=sc.Wb.MASSIVE;b.Ry++;b.W.$Fa();d=h}return d}},BJb:function(a){if(this.df){var b=this.df;a.KN&&(b=sc.wja.WXa(b,this.aa,a.KN));sc.q.T.Rla(b,y,h)}if(this.exp){b=sc.q.T.MW(this.exp,a.KN||this.aa,0,y,sc.IV.XV);sc.pa.bc("player",
"expEnemies",b)}this.EJb(a);var b=Math.random(),d=sc.Ta.UAb(sc.pd.PLAYER);a.uDa?c(a,a.uDa):this.Qda&&(d>0.8||(d<0.1&&b<0.7?c(a,this.Qda):d<0.3&&b<0.5?c(a,this.Qda):b<0.2&&c(a,this.Qda)))},EJb:function(a){if(sc.q.T.ki(sc.ng.ITEMS))for(var b=this.D5,c=b.length,d=ig.r.cb,f=sc.q.T.W.Ag("DROP_CHANCE")+1,i=sc.q.bS(),t=sc.q.D1a();c--;){var p=b[c],r=Math.random();if(!(p.rank&&i<sc.q.Voa(p.rank))&&!(p.boosted&&a.iJ!=sc.qI.BOOSTED)&&r<=p.prob*(p.prob==1?1:f)*t){r=p.min||1;p.max&&(r=r+Math.floor((p.max+1-r)*
Math.random()));sc.DV.PO(a,ig.Pa.CENTER,d,p.item,r,sc.zL.ENEMY)}}}});Vec2.create();sc.wV.jQa={DISTANCE:1,VIEW:2,NONE:3};sc.OE=ig.Ca.extend({Bf:[],f:function(a){for(var b=0;b<a.length;++b){var c=this.Gsb(a[b]);this.Bf.push(c)}},Gsb:function(a){var b=a.type,c=y;if(b.charAt(0)=="!"){b=b.substr(1);c=h}sc.cg[b]||e(Error("Unknown Condition type '"+b+"'"));a=new sc.cg[b](a);a.not=c;return a},Nb:function(a,b,c,d){ig.ma.Ega(a);for(var f=0;f<this.Bf.length;++f){var i=this.Bf[f].Nb(a,b,c,d);if(!this.Bf[f].not&&
!i||this.Bf[f].not&&i){ig.ma.Z6(a);return y}}ig.ma.Z6(a);return h},$N:function(a){for(var b=this.Bf.length;b--;)this.Bf[b].$N&&this.Bf[b].$N(a)},UD:function(a,b){for(var c=this.Bf.length;c--;){var d=this.Bf[c];d.IJa&&d.IJa(a);d.UD&&(b?a.jca.push(d):d.UD(a))}}});sc.AP=ig.Ca.extend({f:function(a){this.yf=a;this.hc=new sc.wV(a.type);if(this.yf.startEffect)this.Qbb=new ig.Bi(this.yf.startEffect);if(this.yf.hideEffect)this.zG=new ig.Bi(this.yf.hideEffect)},pD:M("yf"),Ka:function(){this.hc.Tc();this.Qbb&&
this.Qbb.Ka();this.zG&&this.zG.Ka()}});sc.ehb=ig.Ca.extend({name:"",s4:{},t3:[],LLa:q,jBa:q,f:function(a,b,c){this.name=a;this.LLa=b.seamlessStates||q;this.s4=new ig.bv;this.s4.YS(b,c);this.jBa=b.appearAction||q;d(this.t3,b.choices)},cKb:function(a){var b=Math.random();return f(this.t3,a,b)}})});ig.J=h;
ig.N("game.feature.combat.model.enemy-annotation").K(function(){sc.pI={THREAT:0,TEMP_THREAT:1,PEACEFUL:2};sc.xP={NONE:0,PRE_ATTACK:1,ATTACK:2,WIDE_RANGE_ATTACK:3,POST_ATTACK:4};sc.n1={NONE:0,VULNERABLE:1,WEAK:2,IMMUNE:3};sc.o9={ANY:0,MELEE:1,RANGED:2};sc.sL={ATTACK_BACK:1,ATTACK_FRONT:2,LOOK_AWAY:4,BE_PASSIVE:8,BE_PASSIVE_IF_TARGETED:16,VIRUS_SPECIAL_RULE:32};sc.xQa={ANY:0,NEUTRAL:1,HEAT:2,COLD:3,SHOCK:4,WAVE:5};ig.Xf.vub=y;sc.tn={meb:function(a){return!a.rj?y:a.rj.kP==sc.o9.MELEE},oeb:function(a){return!a.rj?
y:a.rj.kP==sc.o9.RANGED},ZDb:function(a,b){return!a.rj||b&&!this.zJ(a,b)?y:a.rj.vK==sc.n1.VULNERABLE},Bea:function(a,b){return!a.rj||b&&!this.zJ(a,b)?y:a.rj.vK==sc.n1.WEAK},P4a:function(a,b){return!a.rj||b&&!this.zJ(a,b)?y:a.rj.vK==sc.n1.IMMUNE},hFb:function(a,b){return!a.rj||b&&!this.zJ(a,b)?y:a.rj.Aa==sc.xP.ATTACK||a.rj.Aa==sc.xP.WIDE_RANGE_ATTACK},A5a:function(a,b){return!a.rj||b&&!this.zJ(a,b)?y:a.rj.Aa==sc.xP.WIDE_RANGE_ATTACK},sDb:function(a){return!a.rj?y:a.rj.Aa==sc.xP.PRE_ATTACK||a.rj.Aa==
sc.xP.ATTACK},Gf:function(a){return!a.rj?0:a.rj.element-1},zJ:function(a,b,c){return Math.random()<=this.DFa(a,b,c)},DFa:function(a,b,c){if(ig.Xf.vub)return 1;a=sc.Ta.Ozb(a,c);b=Math.min(0.1+b.q.aa/100,0.5);b=b+a*(1-b);(a=sc.sa.yF.FF)&&(b=a+(1-a)*b);return b},c5:function(a,b){return!a.rj?y:a.rj.eG&b},jCb:function(a,b){return!this.zJ(a,b)||a.target!=b?y:this.c5(a,sc.sL.LOOK_AWAY)},q3a:function(a,b){return b&&!this.zJ(a,b)?y:this.c5(a,sc.sL.ATTACK_BACK)},r3a:function(a,b){return b&&!this.zJ(a,b)?y:
this.c5(a,sc.sL.ATTACK_FRONT)},ZLb:function(a,b){if(!this.zJ(a,b,4))return y;if(this.P4a(a)||a.target==b&&this.c5(a,sc.sL.BE_PASSIVE_IF_TARGETED)||this.c5(a,sc.sL.BE_PASSIVE))return h;if(this.c5(a,sc.sL.VIRUS_SPECIAL_RULE)){var c=sc.Ta.iN(sc.pd.ENEMY,"arid.virus-neutral");if(sc.Ta.iN(sc.pd.ENEMY,"arid.virus-cold")+sc.Ta.iN(sc.pd.ENEMY,"arid.virus-heat")>0&&c<=2)return h}return y}}});ig.J=h;
ig.N("game.feature.combat.entities.enemy").O("game.feature.combat.entities.combatant","game.feature.combat.model.enemy-type","game.feature.combat.model.enemy-annotation").K(function(){Vec2.create();var a={HX:q,zb:q,osa:q,OA:q,JMa:y,Ypa:q,aK:y,av:y,ry:q};sc.tL={AUTO:0,VISIBLE:1,HIDDEN:2};sc.qI={NONE:0,BOOSTABLE:1,BOOSTED:2};ig.wa.Enemy=ig.wa.Combatant.extend({sa:sc.pd.ENEMY,kM:sc.pI.THREAT,Zm:q,hc:q,WA:q,Cna:q,ioa:y,uDa:0,QY:{Fe:q,value:0},kNa:Vec3.create(),xe:q,zB:{UF:q,kR:q},ZG:q,q6:q,k8:{},XH:{},
jca:[],iia:0,Je:{enabled:[],Qa:q,Ps:q,r7:q},ji:{count:0,n:0,Vi:0,zX:0,Sba:0,Tba:0},rj:{Aa:0,vK:0,kP:0,element:0,eG:q},Ry:0,P5a:q,ZNa:y,El:q,Dm:q,TA:q,Jua:[],cKa:q,PF:0,Uha:q,zcb:y,iJ:0,KN:q,visibility:{AF:h,Lh:sc.tL.AUTO},t:new ig.u({Dd:h,attributes:{of:{c:"EnemyType",d:"Enemy information",xc:h},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},Yv:{c:"VarName",d:"Instead of killing the enemy, set specified variable to true.",I:h}},label:N(""),Uk:h,Sl:"rgba(255,0,0, 0.5)"}),f:function(a,
b,c,j){this.parent(a,b,c,j);this.F(24,24,0);Vec3.assign(this.kNa,this.b.g);if(j.enemyInfo){this.Zm=j.enemyInfo.type;this.hc=new sc.wV(j.enemyInfo.type);this.WA=j.enemyInfo.group;this.xe=j.enemyInfo.state||q;this.uDa=j.enemyInfo.dropHealOrb||0;if(j.enemyInfo.startEffect)this.Uha=new ig.Bi(j.enemyInfo.startEffect);if(j.enemyInfo.hideEffect)this.aGa=new ig.Xe("enemyHide",[{type:"SHOW_EFFECT",effect:j.enemyInfo.hideEffect,wait:h,align:"CENTER"},{type:"HIDE"}]);if(j.enemyInfo.varIncrease){this.Cna=j.enemyInfo.varIncrease;
ig.ma.JB(this.Cna,0)}this.zcb=j.enemyInfo.targetOnSpawn||y;this.KN=1*(ig.Ja.eh(j.enemyInfo.level)||0);if(j.enemyInfo.party)this.sa=sc.pd[j.enemyInfo.party];var a=j.enemyInfo.attribs,k;for(k in a)this.setAttribute(k,a[k]);k=ig.Jc.un.SOUTH;j.enemyInfo.face&&(k=ig.Jc.un[j.enemyInfo.face]||ig.Jc.un.NORTH);ig.Jc.uq(k,this.face);if(window.Ed){this.t=this.t.copy();this.t.Uk=y;this.hc.ES(this);this.Bd()}}this.Yv=j.manualKill||q;this.cKa=j.ownerEnemy||q;this.iJ=j.boostable?sc.qI.BOOSTABLE:sc.qI.NONE},GK:function(a,
b){if(this.TA&&this.TA.Qa!=a){this.W.E7(this.TA.K6a[a]);if(b)ig.bt.Pw(this,"modeAura");else{sc.Ta.$ab(this,a);sc.Ta.Zab(this,a)}this.TA.Qa=a}},opa:function(){return{type:"Enemy",disabled:!this.W||!this.visibility.AF||!sc.Ta.wDb(this.Zm)}},ZZa:function(a){for(var b=this.W.Gy()/a.length,c=a.length;c--;){var j=a[c];j.QY.Fe=this;j.QY.value=b}},Z$a:function(a){this.KN=a;this.hc.Qdb(this)},xNb:function(a){this.Jua.push(a)},QJa:function(){this.show(h);for(var a=0;a<this.Je.enabled.length;++a){var b=this.Je.enabled[a],
c=this.hc.Je[b];if(c.type=="STORE_RELEASE"){this.Je.Qa=b;c.QJa(this);return h}}},BT:function(a,b,c){for(var j=0;j<this.Je.enabled.length;++j){var k=this.Je.enabled[j],l=this.hc.Je[k];if(l.type=="ENEMY_EVENT"&&l.xvb(this,a,b,c)){this.Je.Qa=k;l.BT(this,this.hc.Pg);return h}}},Xra:function(){if(this.Wf())return y;if(this.BT(this.target,sc.lV.MAGNET_PULL,q)){this.Ds=-1;this.b.vl(ig.ca.IGNORE);this.vj=1E3;return h}},FJa:function(){this.vj=this.Ds=0;this.Ei()},mDb:function(){return this.hc.rma},sY:function(){return this.hc.MY},
show:function(a){this.parent(a);var c=this.ed;this.hc.ES(this);this.Bd();if(!a){this.Ya.alpha=0;a=this.hc.gzb(this);if(c||!a)this.Uha?this.Uha.va(this):ig.r.G.Mf.va("showDefault",this);this.Zf(c||a||b)}this.zcb&&this.hc.DK(this,y,h,h)},po:function(){this.um&&this.um.remove();this.um=q;if(!this.Yw){ig.bt.Pw(this);this.Zf(this.aGa||c)}},hide:function(){ig.bt.Pw(this);this.parent()},Ge:function(a){this.parent(a);a||this.pza();this.Uha&&this.Uha.Ka();this.aGa&&this.aGa.Ka();this.hc.ZFb(this);this.hc.Tc()},
Nga:function(a){this.parent(a);this.GK(sc.ha.NEUTRAL);this.zB.UF=q;this.Je.Qa=q;this.Je.r7=q},update:function(){if(this.ji.Tba){this.ji.Sba=this.ji.Sba+ig.i.ja;if(this.ji.Sba>=this.ji.Tba)this.ji.Tba=this.ji.Sba=0}if(this.ji.n>0){this.ji.n=this.ji.n-ig.i.ja;if(this.ji.n<=0){this.ji.n=0;this.ji.count=0;this.ji.Vi=y}}this.cKa&&(this.cKa.Wf()&&!this.Wf())&&this.w4a();this.hc&&!this.ioa&&this.hc.ES(this);if(this.hc&&this.hc.hHa(this)){this.ZNa=y;for(var a in this.k8)this.k8[a]=this.k8[a]-ig.i.ja;for(a in this.XH){var b=
this.XH[a];b.update&&b.update()}this.hc.update(this)}else this.ZNa||this.Sn(q);this.parent()},Sfa:function(a,b,c,j,k){if(j==sc.cA.DI&&!k.Nn){a.Re&&a.Re.HY&&this.HKb();for(k=0;k<this.Je.enabled.length;++k){var l=this.Je.enabled[k],m=this.hc.Je[l];if(m.type=="GUARD_COUNTER"&&m.fGb(this)){this.Je.Qa=l;m.gGb(this,a);return h}}}this.parent(a,b,c,j)},HKb:function(){for(var a in this.hc.Je){var b=this.hc.Je[a];if(b.type=="COUNTER_COUNTER"){this.ji.Tba=b.tJ;this.ji.Sba=0;break}}},x7a:function(a){for(var b=
0;b<this.Je.enabled.length;++b){var c=this.Je.enabled[b],j=this.hc.Je[c];if(j.type=="FALL"&&j.yvb(a)){if(this.Je.Ps==j)return h;j.Vra(this);this.Je.Qa=c;return h}}return y},XT:function(){this.hc&&this.hc.hHa(this)&&this.hc.XT(this)},Rfa:function(){this.hc&&this.hc.hHa(this)&&this.hc.Rfa(this)},LC:function(a,b){if(this.hc)if(b){this.Ei();this.hc.ES(this);this.hc.nw(this,a)}else this.ZG=a},HJa:function(b,c,i,j,k,l,m){var n=y;a.HX=c;a.zb=i;a.osa=j;a.OA=k;a.JMa=l;a.av=0;a.ry=q;i=Math.random();n=this.eza(b,
c,i,y);if(b.OA)k=b.OA;j=k&&k.me||0;l=0;a.aK=y;if(!m){if(k&&this.hc.Q9a(b,this,c.tq(),k.me)){l=this.Ry;n=h}a.aK=this.W&&this.W.Sc>0&&this.W.Sc-j<=0;a.aK&&(l=0)}a.Ypa=l;n=this.eza(b,c,i,h)||n;a.ry&&sc.Ta.yJ(c.te(),this,a.ry);a.aK&&!b.r8&&this.pza();return n},pza:function(){if(this.QY.Fe){var a=Math.ceil(this.QY.Fe.W.Td("hp")*this.QY.value);this.QY.Fe.mea(a,2,this);this.QY.Fe=q}},H7a:function(b,c){var i=0;a.HX=ig.r.cb;a.zb=q;a.osa=q;a.OA=q;a.JMa=y;a.av=0;a.ry=q;if(this.hc.Q9a(q,this,ig.r.cb,b,c))i=this.Ry;
a.aK=this.W&&this.W.Sc>0&&this.W.Sc-b<=0;a.aK&&(i=0);a.Ypa=i;i={r8:y};(a.aK||a.Ypa)&&this.eza(i,ig.r.cb,Math.random(),h);a.ry&&sc.Ta.yJ(ig.r.cb,c||this,a.ry);a.aK&&!i.r8&&this.pza();return i.r8},eza:function(b,c,i,j){for(var k=y,l=0;l<this.Je.enabled.length;++l){a.av=0;var m=this.Je.enabled[l],n=this.hc.Je[m];if(n.type=="HIT_REACTION"){var o=!n.iFb();if(j||o||!(n.wD!=sc.Qx.FORCE_HIT&&this.Je.Qa))if(n.Dvb(this,i,a,b,j)){if(!o)this.Je.Qa=m;n.DCb(this,c,a,b,this.hc.Pg);if(a.av>=1&&n.ry){this.um.mCa("BREAK");
b.av=0}k=h;if(!o)return h}else{if(a.av&&n.ry){n.fKa&&this.um.yMa(ig.qd.NAb(this.b,n.fKa));b.av=a.av}if(n.V3a&&!a.av)b.sGa=h}}}return k},ewb:function(a){for(var b=0;b<this.Je.enabled.length;++b){var c=this.hc.Je[this.Je.enabled[b]];if(c.type=="COLLAB"&&c.e5a(this,a))return h}},P_a:function(a){this.El||e(Error("Tried to do collab reaction without collaboration set. Should never happen!"));for(var b=0;b<this.Je.enabled.length;++b){var c=this.Je.enabled[b],j=this.hc.Je[c];if(j.type=="COLLAB"&&j.B3==a){this.Je.Qa=
c;this.hc.kBa(this);break}}},Tna:function(a,b,c){var j=this.hc.Pg[a];j||e(Error("Enemy does not has action of Name: "+a));c?this.IKa(j):this.Zf(j,y,b)},yJa:function(a,b,c){(c=this.parent(a,b,c))&&!b.QG.Bra&&!b.QG.NIa&&this.hc&&this.hc.Pwb(this,a);return c},Nfa:function(a){sc.q.KJ||this.hc&&this.hc.Nfa(this,a)},Tra:function(a){this.Cna&&ig.ma.add(this.Cna,1);a||this.hc.BJb(this)},Fxb:function(a){if(a)for(var b=a.length;b--;){var c=a[b];this.Je.enabled.indexOf(c)==-1&&this.hc.Je[c].TD(this)}this.Je.enabled.length=
0;a&&this.Je.enabled.push.apply(this.Je.enabled,a)},Exb:function(a){if(this.Je.enabled.indexOf(a)==-1){this.Je.enabled.push(a);this.hc.Je[a].TD(this)}},dxb:function(a){a=this.Je.enabled.indexOf(a);a!=-1&&this.Je.enabled.splice(a,1)},bm:function(a,b){return b[1]=="dodgeBlocked"?this.ji.Vi:b[1]=="hpBreak"?this.Ry:b[1]=="storedEnemyCnt"?this.Jua.length:b[1]=="collab"?!this.El?q:this.El.bm(a,b):this.parent(a,b)}});ig.Zr.qwa={v3:ig.wa.Enemy,FV:{enabledReactions:[],aggression:sc.pI.THREAT,regenFactor:0,
stunEscapeTime:0,annotate:{},size:Vec3.vc(16,16,16),analyzable:h,hpBar:sc.tL.AUTO},J4:function(){typeof this.aggression=="string"&&(this.aggression=sc.pI[this.aggression]);typeof this.hpBar=="string"&&(this.hpBar=sc.tL[this.hpBar]);if(this.annotate){var a=this.annotate;if(a.extra&&a.extra instanceof Array){for(var b=a.extra,c=0,j=0;j<b.length;++j)c=c|sc.sL[b[j]];a.extra=c}typeof a.active=="string"&&(a.active=sc.xP[a.active]);typeof a.passive=="string"&&(a.passive=sc.n1[a.passive]);typeof a.weapon==
"string"&&(a.weapon=sc.o9[a.weapon]);typeof a.element=="string"&&(a.element=sc.xQa[a.element])}else this.annotate={}},apply:function(a){a.Fxb(this.enabledReactions);if(a.kM!=this.aggression){a.kM=this.aggression;if(a.target){var b=a.target;a.Sn(q);a.Sn(b)}}a.visibility.AF=this.analyzable==g?h:this.analyzable;a.visibility.Lh=this.hpBar;a.iU=this.regenFactor;a.lg.aia=this.stunEscapeTime||0;a.rj.Aa=this.annotate.active||0;a.rj.vK=this.annotate.passive||0;a.rj.kP=this.annotate.weapon||0;a.rj.eG=this.annotate.extra||
0;a.rj.element=this.annotate.element||0;this.size&&a.b.F(this.size.x,this.size.y,this.size.z,h)},load:function(a){this.enabledReactions=ig.copy(a.Je.enabled);this.stunEscapeTime=a.lg.aia;this.aggression=a.kM;this.regenFactor=a.iU;this.annotate={active:a.rj.Aa,passive:a.rj.vK,weapon:a.rj.kP,extra:a.rj.eG,element:a.rj.element};this.analyzable=a.visibility.AF;this.hpBar=a.visibility.Lh}};var b=new ig.Xe("enemyStart",[{type:"WAIT",time:0.4}]),c=new ig.Xe("enemyHide",[{type:"SHOW_EFFECT",effect:{sheet:"teleport",
name:"hideDefault"},wait:h,align:"CENTER"},{type:"HIDE"}])});ig.J=h;
ig.N("game.feature.combat.entities.enemy-spawner").O("impact.base.actor-entity").K(function(){ig.wa.EnemySpawner=ig.Kc.extend({fD:[],w6a:0,Kl:0,r4a:y,d0a:y,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h},fD:{c:"EnemyTypeList",d:"All enemies that are spawned on this place",xc:h},l7a:{c:"Boolean",d:"If true: initially set all enemies as killed when activated."}},Kq:h,Lq:h,Uk:h,Sl:"rgba(255,120,0, 0.5)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;
d.size||this.b.F(32,32,0);if(d.enemyTypes){a=d.enemyTypes;for(b=0;b<a.length;++b){c={info:a[b].info,type:new sc.wV(a[b].info.type),count:a[b].count,KW:[]};this.w6a=this.w6a+c.count;this.fD.push(c)}}this.l7a=d.onActivateClear},show:function(a){this.parent(a);if(!a)this.l7a?this.HXa(h):this.d0a=h},Ge:function(a){this.parent(a);this.HXa();for(a=this.fD.length;a--;)this.fD[a].type.Tc()},HXa:function(a){for(var b=[],c=0,d=0;d<this.fD.length;d++){var f=this.fD[d].KW.length;a&&(f=0);b[d]=this.fD[d].count-
f;c=c+b[d]}d=-1;c>0&&(d=a?sc.Ta.time+180:sc.Ta.time+this.Kl);ig.ma.set(this.$$(),{killed:b,respawnTime:d})},$$:function(){return"session.map.spawner"+this.zu},update:function(){if(!this.r4a){this.r4a=h;var a=ig.ma.get(this.$$()),b=q,c=180;if(a&&sc.Ta.time<a.respawnTime){b=a.killed;c=a.respawnTime-sc.Ta.time}this.R9a(this.d0a,b);this.Kl=c}a=h;b=0;for(c=this.fD.length;c--;){for(var d=this.fD[c],f=d.KW.length;f--;){var i=d.KW[f];i.Bna?d.KW.splice(f,1):i.target&&(a=y)}b=b+(d.count-d.KW.length)}if(a&&
b>0&&sc.Ta.Aa){this.Kl=this.Kl-ig.i.ja;if(this.Kl<=0){this.R9a(h);this.Kl=180}}},R9a:function(a,b){for(var c=this.fD.length;c--;)for(var d=this.fD[c],f=d.count-d.KW.length-(b&&b[c]||0);f--;){var i=this.hNa(d,a);d.KW.push(i)}},hNa:function(a,b){var c=this.b,d=a.type.size,f=c.size.x-d.x,d=c.size.y-d.y;f<0&&(f=0);d<0&&(d=0);return ig.r.Pe(ig.wa.Enemy,c.g.x+Math.random()*f,c.g.y+Math.random()*d,c.g.z,{enemyInfo:a.info,boostable:h},b)}})});ig.J=h;
ig.N("game.feature.combat.entities.respawn-blocker").O("impact.base.entity").K(function(){ig.wa.RespawnBlocker=ig.Kc.extend({t:new ig.u({Dd:h,attributes:{},label:N("RespawnBlocker"),Kq:h,Lq:h,Uk:h,Sl:"rgba(0,255,255, 0.3)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;d.size||this.b.F(32,32,0);sc.Ta.fub(this)}})});ig.J=h;
ig.N("game.feature.combat.entities.burst-spawner").O("game.constants","impact.feature.effect.effect-sheet","impact.base.entity").K(function(){ig.lfb=ig.Kc.extend({pb:q,target:q,Cn:q,nT:0,uua:3,PK:0.2,ne:q,PCa:0,Se:32,kf:24,j0:0.2,UW:0,n:0,RO:[],l5a:h,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.IGNORE;this.b.Vm=1;this.b.ht=0;this.b.Ze.vg=0;this.b.F(4,4,4);this.b.V.x=d.vel.x;this.b.V.y=d.vel.y;this.target=(this.pb=d.combatant||q)&&this.pb.target;this.Cn=d.attack;this.nT=d.moveSpeed||
40;this.uua=d.spawnCount||3;this.PK=d.spawnInterval||0.3;this.ne=d.effect;this.PCa=d.damageDelay||0;this.Se=d.radius||32;this.kf=d.zHeight||24;this.j0=d.steerDegree||0.2;this.UW=d.adjustTime||0;if(this.RBa=d.cancelOnCollision||y)this.b.Vm=0},tq:M("pb"),oS:function(a){!this.Ve&&a.KA&&this.RBa?this.ze():this.parent(a)},update:function(){this.n=this.n+ig.i.ja;for(var a=Math.min(this.uua,Math.floor(this.n/this.PK));this.RO.length<a;)this.nNb();for(var b=y,c=0;c<this.RO.length;++c)b=this.MOb(this.RO[c]);
if(a==this.uua&&b)this.ze();else{this.target&&sc.awa.pYa(this,this.target,this.n,this.UW,this.j0);Vec2.length(this.b.V,this.nT)}this.parent()},nNb:function(){var a=Vec3.create(this.b.g);this.RO.push({g:a,n:this.PCa});this.ne.Cg(a.x,a.y,a.z)},MOb:function(a){if(a.n>=0){a.n=a.n-ig.i.ja;if(a.n<=0){a=new sc.vw(this.pb,{pos:a.g,radius:this.Se,attack:this.Cn,zHeight:this.kf});sc.Ta.js(a);return h}return y}return h}})});ig.J=h;
ig.N("game.feature.combat.entities.stone").O("game.feature.combat.entities.projectile","game.feature.combat.model.proxy","game.constants","impact.feature.effect.effect-sheet","impact.base.entity","impact.feature.light.light").K(function(){sc.OQb=sc.D1.STONE=sc.Fxa.extend({data:q,t:new ig.u({attributes:{zYa:{c:"AnimSheet",d:"Animation sheet of ball. Needs one entry with name 'default'",xc:h},size:{c:"Offset",d:"Size of projectile",I:h},Cd:{c:"Number",d:"Shadow size"},G:{c:"String",d:"Effect sheet for effects",
U:"effects",ok:h},ts:{c:"EffectKeys",d:"What keys to use in the effect sheet",I:h},OEb:{c:"Integer",d:"Number of times the stone can bounce on walls"},rUb:{c:"Integer",d:"How often stone can bounce on ground before being destroyed"},Cn:{c:"AttackInfo",d:"How the ball will hit its target"},speed:{c:"NumberVary",d:"Speed of ball",ab:300},Kk:{c:"NumberVary",d:"Z Vel when thrown"},kj:{c:"Number",d:"Amount of z bounciness"},VN:{c:"Boolean",d:"True if stone can hit multiple targets"},pg:{c:"String",d:"Size of light shown for this ball",
I:h,U:ig.mk},oFb:{c:"Boolean",d:"If true, don't make light glow for stone"}}}),f:function(a){this.data=a;a.animation.shapeType||(a.animation.shapeType="YZ_EXPAND");a.animation.wallY=1;a.animation=new ig.Al(a.animation);a.effects&&(a.effects=new ig.ud(a.effects))},qpa:function(a){this.data.size?Vec3.assign(a,this.data.size):Vec3.Oa(a,8,8,8);return a},Ka:function(){this.data.effects&&this.data.effects.Tc();this.data.animation&&this.data.animation.Ka()},Vn:function(a,c,d,f,i){i={dir:i,stoneInfo:this.data,
params:f.te().W,party:f.sa,combatant:f};f.te().Ah&&sc.pa.bc("player","throws",1);return ig.r.Pe(ig.wa.Stone,a,c,d,i)}});Vec2.create();var a=Vec3.create();Vec3.create();ig.wa.Stone=ig.wa.Projectile.extend({sa:0,target:q,W:q,zb:q,VN:y,fLa:0,G:q,ts:q,zj:q,My:q,eJ:q,c3:q,f:function(a,c,d,f){this.parent(a,c,d,{vel:f.dir,combatant:f.combatant});this.sa=f.party;this.W=f.params;this.HLb(f.stoneInfo);this.b.Fd=1},HLb:function(b){var c=this.b,d=ig.Ja.yY(b.speed),f=ig.Ja.yY(b.zVel);Vec2.length(c.V,d);c.V.z=
f;c.Ch=d;c.Cd.size=b.shadow||16;c.kj=b.zBounciness||0;d=b.size;f=Vec3.assign(a,c.size);d?c.F(d.x,d.y,d.z):c.F(8,8,8);c.l(c.g.x-(this.b.size.x-f.x)/2,c.g.y-(this.b.size.y-f.y)/2,c.g.z);this.b.type=ig.ca.PROJECTILE;this.b.F(8,8,8);if(this.pb)this.target=this.pb.target;this.eJ=b.behaviors||q;this.mb=b.animation;this.Bd(b.animation);this.G=b.effects;this.ts=b.effectKeys||q;this.VN=b.multiHit||y;this.kU=b.maxBounce;this.fLa=b.groundBounce;if(b.attack)this.zb=new sc.mL(this.W,b.attack,h);ig.bt.Pw(this,
"trail");c=this.ts&&this.ts.trail||"stoneTrail";this.G&&this.G.Jpa(c)&&this.G.va(c,this,{duration:-1,group:"trail"});this.zj&&this.zj.stop();this.zj=new ig.Bw(this,ig.mk[b.light||"XS"],0,0.2,-1,1,!b.noLightGlow);ig.pg.ey(this.zj)},rJa:function(a,c){this.G&&this.G.Cg(this.ts&&this.ts.wallBounce||"stoneWallBounce",a.x,a.y,this.b.g.z,q,{angle:Vec2.Wm(c.Cm)})},GT:function(){if(this.G){var a=this.ts&&this.ts.kill||"stoneKill";if(this.G.Jpa(a)){var c=this.lc(ig.Pa.CENTER);this.G.Cg(a,c.x,c.y,c.z,q)}}},
KJa:function(a){var c=y;if(this.zb&&a.me&&a.sa!=this.sa){var d=this.zb,c=h;if(a.me(this,d)&&!this.VN){this.GT();this.ze()}}c&&this.pb.Ah&&sc.pa.bc("player","throwHits",1);return c},hH:function(){if(!this.fLa){this.GT();this.ze()}if(this.b.V.z<10){this.GT();this.ze()}this.fLa--},Gf:function(){return this.zb&&this.zb.element||sc.ha.NEUTRAL}})});ig.J=h;
ig.N("game.feature.combat.gui.status-bar").O("impact.feature.gui.gui").K(function(){var a=Vec2.create();sc.sTa={BREAK:{Y:0,f:q,gba:40},BURN:{Y:2,f:q,gba:44,Gpa:h},CHILL:{Y:3,f:q,gba:48,Gpa:h},WEAK:{Y:4,f:q,gba:52,Gpa:h},BRITTLE:{Y:5,f:q,gba:56,Gpa:h}};var b={};ig.lj.StatusBar=ig.da.extend({R:{DEFAULT:{state:{},time:0.25,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:1,Va:0,Qb:Math.PI*0.1},time:0.25,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/status-gui.png"),Qub:new ig.Vh("media/gui/status-gui.png",
8,8,240,0,2),target:q,p7:q,Sc:0,Cj:0,n:0,NG:0,YB:q,icb:0,i0:{},XB:[],f:function(a){this.parent();this.F(24,4);this.Eb(12,2);this.a.nd=0.7;this.a.zIndex=-50;this.a.jB=h;this.j("HIDDEN",h);this.target=a;this.ZCb();a.W&&this.jea()},gMb:function(){if(!this.target.W)return y;var a=sc.options.get("hp-bars");return this.target.Ah?a==sc.Jja.fjb:this.target.sa==sc.pd.PLAYER?a<=sc.Jja.PP:this.target instanceof ig.wa.Enemy&&(this.target.visibility.Lh==sc.tL.HIDDEN||this.target.visibility.Lh!=sc.tL.SHOW&&this.target.kM==
sc.pI.PEACEFUL)?y:!this.YB},jea:function(){if(this.target.W){this.Sc=this.Cj=this.target.W.Sc;sc.P.Wa(this.target.W,this);sc.P.Wa(sc.qi,this);this.beb();this.target instanceof ig.wa.Enemy&&this.target.visibility.AF&&this.j("DEFAULT")}},beb:function(){var a=q;this.target.sa==sc.pd.ENEMY&&sc.qi.HS(this.target)?a="PVP":this.target.mDb&&this.target.hc.rma&&(a="BOSS");if(this.icb!=a){if(this.YB){this.YB.remove();this.YB=q}if(this.icb=a){this.YB=new sc.kya[a](this.target);ig.X.vd(this.YB);this.YB.jea()}}},
Ab:function(a,b,f){a==sc.qi?this.beb():(b==sc.ei.uI||b==sc.ei.bs)&&this.gMa(this.target.W.Sc,f)},ZCb:function(){for(var a in sc.sTa)this.i0[a]={value:0,n:0}},Bla:function(a,b){var f=this.XB.indexOf(a);if(!(b&&f==-1)&&(!this.XB.length||f!=this.XB.length-1)){f!=-1&&this.XB.splice(f,1);this.XB.push(a)}},Bab:function(a,b){this.Bla(a);a!="BREAK"&&this.Bla("BREAK",h);var f=this.i0[a];f.value=b;f.SU=y;f.n=Math.max(f.n,2)},OOb:function(a,b){this.i0[a].value=b},yMa:L("p7"),FLb:function(a,b){if(b){this.Bla(a);
a!="BREAK"&&this.Bla("BREAK",h)}var f=this.i0[a];if(f.SU=b)f.n=2},mCa:function(a){a=this.i0[a];a.n=Math.min(a.n,0.1)},Ovb:function(){for(var a=this.XB.length;a--;)this.mCa(this.XB[a])},gMa:function(a,b){a<0&&(a=0);if(b){this.NG=this.n=0;this.Cj=this.Sc=a}else{this.n=0.5;this.NG=2;if((this.Cj-this.Sc)*(a-this.Cj)<0)this.Sc=this.Cj;this.Cj=a}},update:function(){var b=this.a;b.al||(this.target instanceof ig.wa.Combatant&&this.target.Wf()&&!sc.qi.HS(this.target)?this.remove():(this.target.Ve||this.target.Og)&&
this.remove());for(var d=this.XB.length;d--;)this.ztb(this.XB[d])&&this.XB.splice(d,1);if(this.XB.length==0&&this.p7)this.p7=q;b.nd=this.NG>0.2?1:0.9;if(this.NG>0)this.NG=this.NG-ig.i.Sa;if(this.n>0)this.n=this.n-ig.i.Sa;else if(this.Cj!=this.Sc){d=ig.i.Sa*this.target.W.Td("hp")/2;if(this.Sc>this.Cj)this.Sc=Math.max(this.Cj,this.Sc-d);else if(this.Sc<this.Cj)this.Sc=Math.min(this.Cj,this.Sc+d);if(this.NG<0.2)this.NG=0.2;if(this.Sc==this.Cj)this.n=0.2}var d=this.p7||this.target,f=d.tb();ig.i.Jy(a,
Math.round(f.x),Math.round(f.y-d.b.g.z+d.b.size.y/2));this.a.g.x=a.x-b.size.x/2;this.a.g.y=a.y-b.size.y/2;if(!b.al){d=y;this.target.sa==sc.pd.PLAYER&&sc.q.oe()&&(d=h);this.target instanceof ig.wa.Enemy&&!this.target.visibility.AF&&(d=h);d||this.a.g.x+b.size.x<0||this.a.g.x>ig.i.width||this.a.g.y+b.size.y<0||this.a.g.y>ig.i.height?this.j("HIDDEN"):this.j("DEFAULT")}},ztb:function(a){a=this.i0[a];if(!a.SU||a.n<=0.1)a.n=a.n-ig.i.Sa;if(a.n<=0)a.SU=y;return a.n<=0},Da:function(a){this.gMb()&&this.crb(a);
for(var b=this.XB.length,f=0,i=-5;b--;){this.yxb(a,f,i,this.XB[b]);i=i-5;f=f+3}},crb:function(a){var b=this.target.W.Td("hp"),f=this.NG>=0.2,i=f?0:20;if(!f&&this.NG>=0){f=this.NG/0.2;f=Math.floor(f*24+(1-f)*16)}else f=f?24:16;var j=(24-f)/2,k=(Math.min(this.Cj,this.Sc)/b).Rb(0,1),l=(Math.max(this.Cj,this.Sc)/b).Rb(0,1),b=Math.ceil((f-2)*k)+1,k=Math.ceil((f-2)*l)+1,l=0;this.target.sa==sc.pd.PLAYER?l=8:this.target.target&&(l=4);a.na(this.s,j,0,216,0+i+l,b,4);k!=b&&a.na(this.s,b,0,216+b,16,k-b,4);a.na(this.s,
j+k,0,240-f+k,12+i,f-k,4)},yxb:function(a,d,f,i){var j=this.i0[i],i=sc.sTa[i],k=1;j.n<0.1&&(k=j.n/0.1);k!=1&&a.ks().Eb(d,f+2).MB(1,k);var l=24,m=0;if(i.Gpa)m=l=l/2;var n=this.Qub.Ly(b,i.Y);if(j.SU)a.na(this.s,d-6,f-2,n.x,n.y,8,8);else{j.n>1.7&&(d=d+Math.sin(Math.PI*8*(2-j.n)/0.3));var j=1+Math.floor(j.value*(l-2)),o=l-1-j,d=d+m;a.na(this.s,d,f,216,i.gba,j,4);o&&a.na(this.s,d+j,f,216+j,12,o,4);a.na(this.s,d+(l-1),f-2,n.x+1,n.y,7,8)}k!=1&&a.Xs()},remove:function(){this.target.W&&sc.P.Hc(this.target.W,
this);sc.P.Hc(sc.qi,this);this.j("HIDDEN",y,h);this.YB&&this.YB.remove();this.YB=q},vEa:function(){this.target.W&&sc.P.Hc(this.target.W,this);sc.P.Hc(sc.qi,this);this.j("HIDDEN",h,h);this.YB&&this.YB.vEa();this.YB=q}})});ig.J=h;
ig.N("game.feature.combat.gui.pvp-gui").O("impact.feature.gui.gui","impact.feature.gui.base.box").K(function(){sc.Mlb=ig.da.extend({R:{DEFAULT:{state:{},time:0.25,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:3,Va:0},time:0.25,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/pvp.png"),n:0,f:function(a,b){this.parent();this.F(64,64);this.Eb(32,32);this.H(ig.k.Ia,ig.k.vb);this.l(0,-80);var c=new sc.ea("Round",{});c.H(ig.k.Ia,ig.k.vb);c.l(0,-5);this.m(c);c=new sc.Tb(9,{size:sc.Ff.Uh});c.za(a);c.H(ig.k.Ia,
ig.k.vb);c.l(0,9);this.m(c);this.j("HIDDEN",h);this.j("DEFAULT");if(b)this.n=1},update:function(){if(this.n){this.n=this.n-ig.i.Sa;if(this.n<=0){sc.qi.P0a();this.remove()}}},Da:function(a){a.na(this.s,0,0,0,0,64,64)},remove:function(){this.n=0;this.j("HIDDEN",y,h)}});sc.Klb=ig.da.extend({R:{START:{state:{Xa:3,Va:3},time:0.25,p:KEY_SPLINES.EASE_IN},DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:3,Va:0},time:0.2,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/pvp.png"),n:0,f:function(){this.parent();
this.F(64,64);this.Eb(32,32);this.H(ig.k.Ia,ig.k.vb);this.l(0,0);this.j("START",h);this.j("DEFAULT");this.n=1},update:function(){if(this.n){this.n=this.n-ig.i.Sa;this.n<=0&&this.remove()}},remove:function(){this.n=0;this.j("HIDDEN",y,h)},Da:function(a){a.na(this.s,0,0,64,0,64,64).yi("lighter");a.na(this.s,0,0,128,0,64,64)}})});ig.J=h;
ig.N("game.feature.combat.model.combat-status").O("game.feature.combat.model.combat-params","impact.feature.effect.effect-sheet").K(function(){sc.nja=ig.Ca.extend({id:0,TO:q,Dfa:q,b4:q,G:new ig.ud("combatant"),duration:5,Ac:0,Aa:y,e0a:0,Hg:q,f:J(),kAb:function(a,b,c,d){if(this.Aa||d==sc.cA.DI)return 0;b=Math.max(0,1-b.Ag(this.b4));c=this.RVa(c);return a*b*c/12},NCb:function(a,b,c){var d=b.pb;this.Ac=this.Ac+a;this.Ac>=1?this.Pf(d,b,c):this.TO&&d.um&&d.um.Bab(this.TO,this.Ac)},RVa:function(a){return 1+
a.sv.Ag(this.Dfa)+a.sv.Ag("COND_EFFECT_ALL")},Pf:function(a,b,c){this.Ac=1;this.Aa=h;this.e0a=b.Td("statusEffect")[this.id]*this.RVa(c);sc.Ta.Rab(a,this.rAb(),1.5);this.TD&&this.TD(a);this.ES(a)},ES:function(a){if(this.Aa){this.Hg&&this.Hg.stop();a.um&&a.um.FLb(this.TO,h);this.Hg=this.G.va(this.label,a,{duration:-1});this.DJa&&this.DJa(a)}},apa:function(a){a=Math.max(0,1-a.Ag(this.b4));return this.e0a*a},clear:function(a){this.Ac=0;this.Aa=y;this.Hg&&this.Hg.stop();if(a){this.tJa&&this.tJa(a);a.um&&
a.um.mCa(this.TO)}},update:function(a,b,c){var d=Math.max(0,1-b.Ag("COND_HEALING"));c||(d=d/5);if(this.Aa){this.Ac=this.Ac-ig.i.Ir/(d*this.duration);this.Ac<=0?this.clear(a):this.am&&this.am(a,b)}else if(this.Ac>0){this.Ac=this.Ac-ig.i.Ir/(50*d);if(this.Ac<0)this.Ac=0;a.um&&a.um.OOb(this.TO,this.Ac)}},rAb:function(){var a=ig.lang.get("sc.gui.combat."+this.label);return"\\i["+this.label+"]"+a},TD:q,DJa:q,am:q,tJa:q});sc.g9=[];sc.tPb=sc.g9[0]=sc.nja.extend({id:0,label:"burn",TO:"BURN",Dfa:"COND_EFFECT_HEAT",
b4:"COND_GUARD_HEAT",duration:20,uma:0,am:function(a,b){this.uma=this.uma+ig.i.Ir;if(this.uma>0.5){var c=Math.floor(b.Td("hp")*(0.3/(this.duration/0.5))*this.apa(b));a.mea(c,0.5);this.G.va("burnDamage",a);this.uma=0}}});sc.DPb=sc.g9[1]=sc.nja.extend({id:1,label:"chill",TO:"CHILL",Dfa:"COND_EFFECT_COLD",b4:"COND_GUARD_COLD",duration:20,yj:q,f:function(){this.parent();this.yj=new ig.CV},DJa:function(a){a.Aq.L2(this.yj)},am:function(a,b){this.yj.B8=1-this.apa(b)*0.25},tJa:function(a){a.Aq.p_(this.yj)}});
sc.eQb=sc.g9[2]=sc.nja.extend({id:2,label:"jolt",TO:"WEAK",Dfa:"COND_EFFECT_SHOCK",b4:"COND_GUARD_SHOCK",duration:20,hua:0,TD:function(a){this.zb=new sc.mL(a.W,{damageFactor:0.33,type:"MASSIVE",visualType:"LIGHT",fly:"HEAVY",element:"SHOCK",critFactor:0,noHack:h})},am:function(a,b){this.hua=this.hua+ig.i.Ir;var c=this.apa(b);if(c&&this.hua>3/c&&!a.Ds){a.yJa(a,this.zb);this.hua=0}}});sc.oQb=sc.g9[3]=sc.nja.extend({id:3,label:"mark",TO:"BRITTLE",Dfa:"COND_EFFECT_WAVE",b4:"COND_GUARD_WAVE",duration:20,
DY:function(a){return!this.Aa?0:this.apa(a)*0.5}})});ig.J=h;ig.N("game.feature.combat.combat-target-event").K(function(){sc.lV={}});ig.J=h;
ig.N("game.feature.combat.model.enemy-reaction").O("impact.base.loader","game.feature.combat.model.combat-params","game.feature.combat.model.combat-condition","impact.base.animation","game.feature.combat.entities.combatant","game.feature.combat.combat-target-event").K(function(){var a={},b=ig.Ca.extend({name:"",type:0,action:q,ux:q,VY:y,wLa:y,f:function(a,b){this.name=a;this.type=b.type;this.action=b.action||q;this.ux=b.postSwitchState||q;this.wLa=b.restartPrevAction||y},TD:J(),Fsa:J(),apply:function(a,
b){if(this.wLa)a.Je.r7=a.ed;this.action&&a.Zf(b[this.action]);a.ZG=this.ux},Nb:q});sc.TE={};sc.Qx={REGULAR:1,FORCE_HIT:2,HP_BREAK_HIT:3,KILL_HIT:4,KILL_SURVIVE:5};var c={FORCE_STUN:1,FORCE_STABLE:2,NO_CHANGE:3};sc.TE.HIT_REACTION=b.extend({YT:q,Eh:q,yBa:y,Yi:g,CF:0,iD:q,kTb:y,Bf:q,ry:q,YW:y,t:new ig.u({attributes:{wD:{c:"String",d:"Type of hit reaction. Careful: FORCE_HIT will always cancel ANY other concurrent reaction.",U:sc.Qx},YT:{c:"EnemyActionRef",d:"An Action that is very quickly executed before enemy is damaged. Any step that is not executed immediately will CANCEL this action",
I:h},Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},yBa:{c:"Boolean",d:"If true - increase hitStable to withstand all following hits"},Yi:{c:"Number",d:"Damange factor applied on this attack",I:h,ab:1},CF:{c:"String",d:"If defined: change attackType of hit",ok:h,U:sc.Wb},iD:{c:"String",d:"If defined: change flyLevel of hit",ok:h,U:sc.d9},
Kua:{c:"String",d:"Determines how Hit reaction will impact attack stun. NO_IMPACT: Will not influence hit stun in any way",U:c},YW:{c:"Boolean",d:"If true, then entity should watch towards hit direction"},ry:{c:"String",d:"Dramatik effect of Reaction",ok:h,U:sc.QE},Bf:{c:"CombatConditions",d:"Additional conditions for hit condition"},ad:{c:"String",d:"Override walk animation prior to damage",I:h},V3a:{c:"Boolean",d:"If true: ignore hit if hit reaction is active but hit doesn't trigger it"},fKa:{c:"String",
d:"If defined: set status bar to be located at part of given name",I:h}}}),f:function(a,b){this.parent(a,b);this.wD=sc.Qx[b.hitType]||sc.Qx.REGULAR;this.YT=b.preAction||q;this.Eh=b.preSwitchState||q;this.yBa=b.blockFurtherHits||y;this.Yi=b.damageFactor;this.CF=sc.Wb[b.attackType]||0;this.iD=b.flyLevel||q;this.Kua=c[b.stunChange]||c.FORCE_STUN;this.YW=b.alignFace||y;this.ry=sc.QE[b.dramaticEffect]||q;this.ad=b.walkAnims||q;this.V3a=b.ignoreFailed||y;this.fKa=b.partFocus||q;var d=b.conditions;if(d)this.Bf=
new sc.OE(d)},TD:function(a){this.Bf&&this.Bf.$N(a)},iFb:function(){return this.action||this.ux||this.Eh||this.Kua==c.FORCE_STUN},DCb:function(a,b,d,f,i){a.v0=b.tq();this.Bf&&this.Bf.UD(a);var o=y;if(this.YT){a.Cua(h);a.Zf(i[this.YT]);a.rEa();a.Vga(h)}if(this.Yi!=g){f.Yi=f.Yi*this.Yi;o=h}if(this.Kua!=c.NO_CHANGE){if(this.CF)f.CF=this.CF;if(this.iD)f.iD=this.iD;if(this.Eh){a.hc.nw(a,this.Eh);o=h}if(this.Kua==c.FORCE_STABLE)f.Gr=sc.Wb.MASSIVE;else{f.Gr=sc.Wb.NONE;a.Ei()}if(this.yBa)a.Gr=sc.Wb.MASSIVE;
this.ad&&a.JK(this.ad)}if(this.YW)f.YW=h;if(this.ry)d.ry=this.ry;if(this.wD==sc.Qx.KILL_SURVIVE){f.r8=h;a.W.Yi=0}if(o&&a.W&&d.zb&&d.zb.sv&&(this.wD==sc.Qx.REGULAR||this.wD==sc.Qx.FORCE_HIT))f.OA=a.W.N1a(d.zb,f.Yi,b.tq())},Dvb:function(a,b,c,d,f){if(f){if(this.wD==sc.Qx.REGULAR||this.wD==sc.Qx.FORCE_HIT||this.wD==sc.Qx.HP_BREAK_HIT&&!c.Ypa||this.wD==sc.Qx.KILL_HIT&&!c.aK||this.wD==sc.Qx.KILL_SURVIVE&&!c.aK)return y}else if(this.wD!=sc.Qx.REGULAR&&this.wD!=sc.Qx.FORCE_HIT)return y;return!this.Bf?h:
this.Bf.Nb(a,b,c,d)}});var d=Vec2.create(),f=Vec2.create(),i=Vec3.create();sc.TE.TARGET_DISTANCE=b.extend({iK:q,Wy:q,t:new ig.u({attributes:{iK:{c:"Number",d:"Minimum Distance to target to trigger"},Wy:{c:"Number",d:"Maximum Distance to target to trigger"},Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},YNa:{c:"Number",d:"If defined, only activate if target is looking at enemy with given range. 0.5 = maximum 45 degree away",
I:h},Xfa:{c:"Number",d:"If defined, only activates if enemy is looking at close entity with given range. 0.5 = maximum 45 degree away",I:h},P8a:{c:"Boolean",d:"If true, use precise face direction, not rounded by animation"},s3:{c:"Boolean",d:"If true, check collision for view vector"},rH:{c:"PoiFilter",d:"If defined: react to closeby POI instead of target",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Bf:{c:"CombatConditions",d:"Additional conditions for hit condition"},Y3a:{c:"Boolean",
d:"If true: Ignore party members for detection"}}}),f:function(a,b){this.parent(a,b);this.iK=b.minDistance||q;this.Wy=b.maxDistance||q;this.Eh=b.preSwitchState||q;this.YNa=b.targetFace||0;this.Xfa=b.ownFace||0;this.s3=b.checkCollision||y;this.Y3a=b.ignoreParty||y;this.VY=h;this.P8a=b.preciseFace||y;this.rH=sc.l1.CGa(b.poiFilter);var c=b.conditions;if(c)this.Bf=new sc.OE(c)},Fsa:function(a){this.Eh&&a.hc.nw(a,this.Eh)},Nb:function(a){if(this.Bf&&!this.Bf.Nb(a,Math.random())||a.Jg)return y;if(this.rH){var b=
sc.l1.REa(this.rH,a,this.Wy);return b&&this.BAa(a,b)}if(this.BAa(a,ig.r.cb))return h;if(!this.Y3a)for(b=sc.sa.He.length;b--;)if(this.BAa(a,sc.sa.Xk(b)))return h;return y},BAa:function(b,c){if(!c||c.Wf()||c.Ve)return y;var l=c;c.EB&&(c=c.EB[0]);var m=ig.qd.Wk(c.b,b.b,d),n=Vec2.length(m),o=(!this.iK||n>=this.iK)&&(!this.Wy||n<=this.Wy);if(o&&this.YNa){if(l!=b.target)return y;Vec2.Qb(m,c.face)>Math.PI*this.YNa&&(o=y)}var t=0;if(o&&this.Xfa){Vec2.Lc(m);var p=b.VEa();if(this.P8a)p=b.face;else{p=b.VEa();
p=ig.S4(b.face.x,b.face.y,p,f)}t=Vec2.Qb(m,p);t>Math.PI*this.Xfa&&(o=y);Vec2.Lc(m)}if(o&&(!this.s3&&this.Wy)&&(b.b.g.z>c.b.g.z+c.b.size.z||c.b.g.z>b.b.g.z+b.b.size.z))return y;if(o&&this.s3){Vec2.Lc(m);var p=b.lc(ig.Pa.TOP,i),r=b.b.g.z+b.b.size.z,u=r,w=c.b.g.z+c.b.size.z;w>u&&(u=w);w<u&&(u=w);var w=ig.r.Hy(r),z=ig.r.Hy(u);if(Math.abs(w-z)>1)return y;var v=Math.abs(r-u);if(n<v*2||this.Xfa&&t>Math.PI*this.Xfa*((n-v)/n))return y;if(w!=z){t=Math.max(r,u);v=Math.min(r,u);n=ig.r.rb[Math.max(w,z)];t=(t-
n.height)/(t-v);w<z&&(t=1-t);w=Math.round(m.x*t);z=Math.round(m.y*t);t=p.x+w;v=p.y+z;if(!ig.r.YJ(t-1,v-1,n.height,2,2,h))return y;n=ig.r.Ie.Il(a);if(ig.r.trace(n,p.x-1,p.y-1,r,w,z,2,2,2,ig.ca.IGNORE,c)||ig.r.sea(t-1,v-1,u,2,2,2,h))return y;n=ig.r.Ie.Il(a);if(ig.r.trace(n,t-1,v-1,u,m.x-w,m.y-z,2,2,2,ig.ca.IGNORE,c))return y}else{n=ig.r.Ie.Il(a);if(ig.r.trace(n,p.x-1,p.y-1,r,m.x,m.y,2,2,2,ig.ca.IGNORE,c))return y}}o&&b.Sn(l);return o}});sc.TE.MOVEMENT_BLOCK=b.extend({Eh:q,Qb:q,t:new ig.u({attributes:{Eh:{c:"EnemyStateRef",
d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Qb:{c:"Number",d:"The minimum angle to the wall for block to be accepted",ab:0.125}}}),f:function(a,b){this.parent(a,b);this.Eh=b.preSwitchState||q;this.Qb=b.angle||0.125},Fsa:function(a){this.Eh&&a.hc.nw(a,this.Eh)},Nb:function(a){return ig.qd.Pda(a.b,this.Qb)}});sc.TE.COLLAB=b.extend({B3:q,Bf:q,t:new ig.u({attributes:{B3:{c:"String",
d:"Collaboration Key to react to",I:h},Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Bf:{c:"CombatConditions",d:"Additional conditions for hit condition"}}}),f:function(a,b){this.parent(a,b);this.B3=b.collabKey||q;this.Eh=b.preSwitchState||q;this.VY=h;this.Bf=new sc.OE(b.conditions)},e5a:function(a,b){var c=Math.random();return this.B3==
b&&this.Bf.Nb(a,c)},apply:function(a,b){this.Eh&&a.hc.nw(a,this.Eh);this.action&&a.rO(a.El);this.parent(a,b)}});sc.TE.GUARD_COUNTER=b.extend({t:new ig.u({attributes:{Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Bf:{c:"CombatConditions",d:"Additional conditions for counter block"}}}),$b:new ig.ka("media/sound/battle/hit-counter-echo.ogg",
1),f:function(a,b){this.parent(a,b);this.Eh=b.preSwitchState||q;this.VY=h;var c=b.conditions;if(c)this.Bf=new sc.OE(c)},fGb:function(a){return this.Bf&&!this.Bf.Nb(a,Math.random())?y:h},gGb:function(a,b){this.Eh&&a.hc.nw(a,this.Eh);b.te().Ah&&sc.pa.bc("combat","guardCounters",1);this.$b.play();sc.Ta.yJ(b,a,sc.QE.GUARD_COUNTER)}});sc.TE.ENEMY_EVENT=b.extend({t:new ig.u({attributes:{gD:{c:"EnemyEventType",d:"Type of target event"},Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",
I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},YT:{c:"EnemyActionRef",d:"An action that is executed immediately beforehand",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h}}}),f:function(a,b){this.parent(a,b);this.Eh=b.preSwitchState||q;this.YT=b.preAction||q;this.gD=sc.lV[b.eventType.type];this.yf=b.eventType},xvb:function(a,b,c,d){return c!=this.gD?y:this.gD.Nb(a,b,d,this.yf)},BT:function(a,b){this.Eh&&a.hc.nw(a,this.Eh);if(this.YT){a.Ei();a.Zf(b[this.YT]);
a.rEa();a.Ei(h)}}});sc.lV.ENEMY_MSG={t:{attributes:{key:{c:"String",d:"Key required to trigger message reaction. "}}},Nb:function(a,b,c,d){return d.key==d.key}};sc.TE.STORE_RELEASE=b.extend({t:new ig.u({attributes:{Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h}}}),f:function(a,b){this.parent(a,b);this.Eh=b.preSwitchState||q},QJa:function(a){this.Eh&&
a.hc.nw(a,this.Eh)}});sc.TE.DODGE=b.extend({t:new ig.u({attributes:{Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},qeb:{c:"Number",d:"View angle from which incoming attacks are seen. 1= full circle. 0.5= half circle",ab:0.5},wLa:{c:"Boolean",d:"If true, restart previous action after reaction."},V8a:{c:"Number",d:"Probability for dodge to work. 1=always",
ab:3},count:{c:"Integer",d:"Maximum number of consecutive dodges allowed. 0 = infinity"},TYa:{c:"Number",d:"Time for dodge to block or counter reset",ab:1},Bf:{c:"CombatConditions",d:"Additional conditions for dodge"}}}),f:function(a,b){this.parent(a,b);this.Eh=b.preSwitchState||q;this.qeb=b.viewAngle;this.V8a=b.probability;this.count=b.count;this.TYa=b.blockTime;var c=b.conditions;if(c)this.Bf=new sc.OE(c)},Nb:function(a){if(a.ji.Vi)return y;var b=sc.Ta.r2a(a,32,this.qeb,this.Bf);if(b){a.ji.n=this.TYa;
if(Math.random()>this.V8a){a.ji.Vi=h;return y}a.ji.count++;if(this.count&&a.ji.count>=this.count)a.ji.Vi=h;a.v0=b;return h}return y}});sc.TE.COUNTER_COUNTER=b.extend({t:new ig.u({attributes:{v6a:{c:"Number",d:"Maximum delay until combatant will react to counter trap"},tJ:{c:"Number",d:"Number of seconds combatant will react with increased awareness to counters"},Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",
I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Bf:{c:"CombatConditions",d:"Additional conditions for reaction to react"}}}),f:function(a,b){this.parent(a,b);this.v6a=b.maxDelay||1;this.tJ=b.cooldown||10;this.Eh=b.preSwitchState||q;var c=b.conditions;if(c)this.Bf=new sc.OE(c)},Fsa:function(a){this.Eh&&a.hc.nw(a,this.Eh)},TD:function(a){a.ji.zX=0},Nb:function(a){var b=a.Qd();if(!b||!b.Re)return y;if((b=b.Re.HY)&&!a.ji.zX){var c=1;a.ji.Tba&&(c=0);a.ji.zX=c*this.v6a+(1-c)*0.1}if(!b&&
a.ji.zX)a.ji.zX=0;if(b>a.ji.zX){if(this.Bf&&!this.Bf.Nb(a,Math.random()))return y;a.ji.zX=0;return h}return y}});sc.TE.FALL=b.extend({t:new ig.u({attributes:{Eh:{c:"EnemyStateRef",d:"State to switch to before reaction starts",I:h},ux:{c:"EnemyStateRef",d:"State to switch to after reaction ended",I:h},action:{c:"EnemyActionRef",d:"Action to perform on reaction",I:h},Pb:{c:"String",d:"If defined: only react when falling into specified terrain",I:h,U:ig.hd}}}),f:function(a,b){this.parent(a,b);this.Eh=
b.preSwitchState||q;this.VY=h;this.Pb=ig.hd[b.terrain]||q},Vra:function(a){this.Eh&&a.hc.nw(a,this.Eh)},yvb:function(a){return!this.Pb||this.Pb==a}})});ig.J=h;
ig.N("game.feature.combat.model.enemy-collab").K(function(){sc.o1={ALL:1,INITIATOR:2,ANY:3};var a=Vec3.create();sc.Qgb=ig.Ca.extend({u5:q,Rn:[],ma:{},xv:0,lcb:h,eba:[],f:function(a,c){this.u5=a;this.iYa(a,q,c.initiatorLabel);this.xv=sc.o1[c.breakType]||sc.o1.INITIATOR;for(var d=c.participants,f=d.length;f--;){var i=d[f];if(!sc.Ta.$yb(this,i.collabKey,i.label,i.min,i.max,i.acceptStunned)){this.lcb=y;this.u5=q;for(d=this.Rn.length;d--;)this.Rn[d].Dm=q;this.Rn.length=0;break}}},CBb:function(a){return this.ma[a]||
0},RLb:function(a,c){this.ma[a]=c},bm:function(a,c){return c[2]=="var"?ig.ma.s_(this.ma,c,3):c[2]=="count"?this.Rn.length:q},Ntb:function(a){this.eba.push(a)},TIb:function(a){a=this.eba.indexOf(a);if(a!=-1){this.eba.splice(a,1);return h}return y},kLb:function(a,c){for(var d=this.Rn.length;d--;){var f=this.Rn[d];if(!c||c.indexOf(f.Dm.label)!=-1)f.Dm.Q=a}},jXb:function(a,c){for(var d=this.Rn.length;d--;){var f=this.Rn[d];if(!c||c.indexOf(f.Dm.label)!=-1)f.Dm.Gq=a}},m2a:function(a){for(var c=this.Rn.length;c--;){var d=
this.Rn[c];if(d.Dm.label==a)return d}},sAb:function(a){for(var c=[],d=this.Rn.length;d--;){var f=this.Rn[d];(!a||a.indexOf(f.Dm.label)!=-1)&&c.push(f)}return c},start:function(){for(var a=this.Rn.length;a--;){var c=this.Rn[a];c.El=this;if(c==this.u5)c.Hj(this);else{c.Sn(this.u5.Qd(h));c.P_a(c.Dm.B3)}}},LSb:function(a,c){for(var d=this.Rn.length;d--;){var f=this.Rn[d];(!c||c.indexOf(f.Dm.label)!=-1)&&f.P_a(a)}},z1a:function(b,c,d){var f=this.Rn,i=f.length;Vec3.Oa(b,0,0,0);for(var j=0;i--;){var k=f[i];
if(!(d&&d.indexOf(k.Dm.label)==-1)){Vec3.add(b,k.lc(c,a));j++}}Vec3.Bk(b,1/j);return b},iYa:function(a,c,d){if(this.Rn.indexOf(a)!=-1)return y;this.Rn.push(a);a.Dm={label:d,B3:c,Gq:q,Q:q};return h},dJb:function(a){var c=this.Rn.indexOf(a);c==-1&&e(Error("Removed Participant that is not part of collab - this should never happen"));a.dE(this);a.El=q;a.Dm=q;this.Rn.splice(c,1);this.xv==sc.o1.ANY?this.cancel():a==this.u5&&this.xv==sc.o1.INITIATOR?this.cancel():this.Rn.length==0&&this.cancel()},Zl:function(a){this.dJb(a)},
cancel:function(){for(var a=this.eba.length;a--;)this.eba[a].JFb(this);for(a=this.Rn.length;a--;){var c=this.Rn[a];c.dE(this);c.El=q;c.Dm=q;c.Ei()}this.Rn.length=0;this.u5=q}})});ig.J=h;
ig.N("game.feature.combat.model.enemy-level-scaling").K(function(){var a=[{level:1,base:24,hp:200,credits:5},{level:6,base:32,hp:300,credits:23},{level:11,base:45,hp:420,credits:50},{level:16,base:63,hp:600,credits:80},{level:21,base:84,hp:800,credits:115},{level:26,base:105,hp:1100,credits:160},{level:31,base:132,hp:1500,credits:210},{level:36,base:163,hp:2E3,credits:290},{level:41,base:199,hp:3E3,credits:380},{level:46,base:236,hp:5E3,credits:490},{level:51,base:278,hp:8E3,credits:610},{level:56,
base:323,hp:11E3,credits:750},{level:61,base:372,hp:15E3,credits:900},{level:66,base:425,hp:2E4,credits:1200},{level:71,base:484,hp:25E3,credits:1500},{level:76,base:547,hp:4E4,credits:1900},{level:81,base:614,hp:5E4,credits:2400},{level:86,base:687,hp:6E4,credits:3E3},{level:91,base:766,hp:7E4,credits:3800},{level:96,base:850,hp:8E4,credits:4800},{level:99,base:928,hp:9E4,credits:6E3}];sc.wja={v1a:function(b,c){for(var b=b.Rb(0,99),d=a.length;d--;){var f=a[d];if(f.level<=b){if(f.level==b)return f[c];
d=a[d+1];return f[c]+(d[c]-f[c])*((b-f.level)/(d.level-f.level))}}return 1},cx:function(a,c,d){return this.v1a(c,d)/this.v1a(a,d)},XXa:function(a,c,d){var f=this.cx(c,d,"base"),c=this.cx(c,d,"hp"),a=ig.copy(a);a.hp=Math.max(1,Math.round(a.hp*c));a.attack=Math.round(a.attack*f).Rb(1,999);a.defense=Math.round(a.defense*f).Rb(1,999);a.focus=Math.round(a.focus*f).Rb(1,999);return a},WXa:function(a,c,d){c=this.cx(c,d,"credits");return Math.round(a*c)}}});ig.J=h;
ig.N("game.feature.combat.model.enemy-tracker").K(function(){sc.ywa=ig.Ca.extend({update:q,Qfa:q,$N:q,Rra:N(y),UD:J(),reset:J()});sc.p1={};sc.p1.TIME=sc.ywa.extend({target:0,Qa:0,DGa:0,uLa:0,Du:y,Wpa:q,t:new ig.u({attributes:{target:{c:"Number",d:"Target time in seconds"},DGa:{c:"Number",d:"How much variance should be used when initializing the timer. 0 = noRandom, 1 = full range random"},uLa:{c:"Number",d:"How much variance should be used when resetting the timer. 0 = noRandom, 1 = full range random"},
Du:{c:"Boolean",d:"If true, do not initialize when state is reset"},Wpa:{c:"NumberArray",d:"A factor for each hp break level multiplied with target time",I:h}}}),f:function(a,b){this.target=b.target;this.DGa=b.initRandom;this.uLa=b.resetRandom;this.Du=b.noStateReset;this.Wpa=b.hpBreakFactor;this.Vrb(a)},update:function(){this.Qa=this.Qa+ig.i.ja},Qfa:function(a){this.Du||this.reset(a)},Rra:function(a){return this.Qa>=this.p2(a)},UD:function(a,b){b||this.reset(a)},Vrb:function(a){this.Qa=this.p2(a)*
Math.random()*this.DGa},reset:function(a,b){var c=b!==g?b:Math.random()*this.uLa;this.Qa=this.p2(a)*c},p2:function(a){var b=this.target;this.Wpa&&(b=b*(this.Wpa[a.Ry]||1));return b}});sc.p1.HIT=sc.ywa.extend({target:0,Qa:0,rFb:y,Xpa:q,Du:y,t:new ig.u({attributes:{target:{c:"Number",d:"Target number of hits"},Xpa:{c:"NumberArray",d:"Alternative number for each HP Break State.",I:h},g$a:{c:"Boolean",d:"If true: weight hit with damage factors. NOTE: This will also consider factors of enemy shields BECAUSE ITS WEIRD."},
h$a:{c:"Boolean",d:"If true: scale effectiveness with damageFactor of enemy (will still ignore shields etc.)"},Du:{c:"Boolean",d:"If true, do not initialize when state is reset"}}}),f:function(a,b){this.target=b.target;this.Xpa=b.hpBreakTargets;this.g$a=b.scaleDmgFactor;this.h$a=b.scaleEnemyFactor;this.Du=b.noStateReset||y;this.Qa=0},Qfa:J(),$N:function(a){this.Du||this.reset(a)},Rra:function(a,b,c,d){b=this.p2(a);if(c){var f=1;if(this.g$a&&c.OA){f=c.OA.hba;d&&d.Yi!=g&&(f=f*d.Yi)}this.h$a&&(f=f*a.W.Yi);
this.Qa=this.Qa+f;c.av=this.Qa/b}return this.Qa>=b},UD:function(a){this.reset(a)},reset:function(a,b){this.Qa=Math.floor((b!==g?b:0)*this.p2(a))},p2:function(a){var b=this.target;this.Xpa&&(b=this.Xpa[a.Ry]||this.target);return b}});sc.p1.HP=sc.ywa.extend({target:0,k5:0,rFb:y,t:new ig.u({attributes:{target:{c:"Number",d:"The target anount of HP relative to HP. 0.1 = 10% of HP reduced"}}}),f:function(a,b){this.target=b.target;this.k5=0},Qfa:J(),$N:function(a){this.reset(a)},Rra:function(a,b,c,d){if(c&&
c.OA){b=c.OA.me;d&&d.Yi!=g&&(b=b*d.Yi);this.k5=this.k5+b;c.av=this.k5/a.W.Td("hp")/this.target}return this.k5/a.W.Td("hp")>=this.target},UD:function(a){this.reset(a)},reset:function(a,b){if(a.W)this.k5=Math.floor((b!==g?b:0)*this.target*a.W.Td("hp"))}})});ig.J=h;
ig.N("game.feature.combat.model.enemy-booster").O("impact.base.game","game.feature.model.game-model").K(function(){sc.O9=60;sc.Pgb=ig.Uf.extend({ZQ:y,f:function(){this.parent("EnemyBooster");sc.P.Wa(sc.q.T,this)},qx:function(){this.ZQ=y;this.tdb()},Ab:function(a,b){a instanceof sc.Dxa&&b==sc.dd.u1&&this.tdb()},tdb:function(){var a=sc.map.Roa(sc.JE.BOOSTER);if(this.ZQ!=a){this.ZQ=a;for(var a=ig.r.kda(ig.wa.Enemy),b=a.length;b--;)this.Gdb(a[b])}},Gdb:function(a){if(a.iJ!=sc.qI.NONE)if(this.ZQ&&a.iJ==
sc.qI.BOOSTABLE){a.iJ=sc.qI.BOOSTED;a.Z$a(a.hc.Sub||sc.O9)}else if(!this.ZQ&&a.iJ==sc.qI.BOOSTED){a.iJ=sc.qI.BOOSTABLE;a.Z$a(q)}}});ig.Vf(function(){return sc.Mxb=new sc.Pgb})});ig.J=h;
ig.N("game.feature.combat.entities.combat-proxy").O("game.feature.npc.entities.sc-actor","game.feature.combat.model.proxy","game.feature.combat.entities.combatant").K(function(){sc.gka={NONE:0,OWNER:1,TARGET:2};sc.D1.GENERIC=sc.Fxa.extend({data:q,t:new ig.u({attributes:{zYa:{c:"AnimSheet",d:"Animation sheet of proxy. Needs one entry with name 'default'",xc:h,I:h},bTb:{c:"AnimSheet",d:"Animation sheet of proxy. Needs one entry with name 'default'",tRb:h,xc:h,I:h},ASb:{c:"Boolean",d:"If true: Copy animations from owner combatant."},
size:{c:"Offset",d:"Size of proxy"},xv:{c:"String",d:"How proxy is broken",U:sc.ML},fd:{c:"ProxyConfig",d:"Configuration of proxy"},action:{c:"Action",d:"Action performed with proxy",xc:h},UUb:{c:"Boolean",d:"If true, set initial alpha to 0"},Tg:{c:"Number",d:"If 0: proxy will ignore attack. -1: will take hits but is never destroyed (stops balls) >0: takes hits and can be destroyed"},Pb:{c:"String",d:"Terrain of proxy, in case you can jump onto it",U:ig.hd,I:h},kZ:{c:"Effect",d:"Effect shown when proxy is killed",
I:h},VO:{c:"String",d:"Specify whether proxy should move with connected entity",U:sc.gka},dcb:{c:"Boolean",d:"If true: align face with sticking entity"},group:{c:"String",d:"Group identifier used to clear proxies or WAIT_UNTIL_PROXIES_DONE"},MXb:{c:"Boolean",d:"If true: don't connect proxy to time of owner.",I:h},X6a:{c:"Boolean",d:"Do not destory proxy when falling into the ground etc.",I:h}}}),f:function(a){this.data=ig.copy(a);this.data.animation&&(this.data.animation=new ig.Al(a.animation));if(this.data.faceAnims){this.data.faceAnims.DOCTYPE||
(this.data.faceAnims.DOCTYPE="MULTI_DIR_ANIMATION");this.data.faceAnims=new ig.Al(this.data.faceAnims)}this.data.config=sc.ww.pwb(a.config);this.data.action=new ig.Xe("[PROXY]",a.action,y,y);this.data.breakType=sc.ML[a.breakType];this.data.stickToSource=sc.gka[a.stickToSource]||sc.gka.NONE;this.data.killEffect&&(this.data.killEffect=new ig.Bi(a.killEffect))},Ka:function(){this.data.action.Ka();this.data.animation&&this.data.animation.Ka();this.data.faceAnims&&this.data.faceAnims.Ka();this.data.killEffect&&
this.data.killEffect.Ka()},qpa:function(a){Vec3.assign(a,this.data.size);return a},Vn:function(a,b,c,j,k){k={data:this.data,combatant:j,dir:k};j.te().Ah&&sc.pa.bc("player","throws",1);j=this.data.size;return ig.r.Pe(sc.ww,a-j.x/2,b-j.y/2,c,k)}});var a=Vec3.create(),b={ACTION_END_DESTROYED:1,HIT_DESTROYED:2};sc.ww=sc.Z8.extend({Tg:0,$v:0,xv:q,pb:q,Pq:q,SR:q,sa:0,El:q,target:q,W:q,group:q,zo:{zb:q,Vi:[],Hf:0},G:{Ge:q,handle:q},VO:0,xeb:y,l5a:h,Jna:0,f:function(a,b,c,j){this.parent(a,b,c,j);a=j.data;
a.size&&this.b.F(a.size.x,a.size.y,a.size.z);this.Mq(a.config);this.Pq=j.combatant;this.pb=this.Pq.te();if(!a.timeDisconnect)this.b.time.parent=this.Pq.b;this.X6a=j.noFallDestroy||y;this.Pb=ig.hd[a.terrain]||q;this.sa=this.pb&&this.pb.sa;this.El=this.pb.El;this.target=this.Pq.Qd(h);this.W=this.pb.W;this.Re.Cv=this.Pq.Re.Cv;Vec2.assign(this.face,j.dir);this.VO=a.stickToSource||0;this.dcb=a.stickFaceAlign||y;this.group=a.group;this.xv=a.breakType;this.xv==sc.ML.ACTION?this.Pq.Hj(this):this.xv==sc.ML.COMBATANT?
this.pb.it(this):this.xv==sc.ML.COLLABORATION&&this.pb.El.Ntb(this);if(a.copyOwnerAnims){this.mb=this.pb.mb;this.Bd();this.$ha=ig.copy(this.pb.$ha);this.JK(this.pb.Gva)}else{if(a.faceAnims||a.animation){this.mb=a.faceAnims||a.animation;this.Bd()}this.WO("default",{idle:"default"});this.JK("default")}this.Zf(a.action);if(a.invisible)this.Ya.alpha=0;this.$v=this.Tg=a.hp;this.G.Ge=a.killEffect},te:M("pb"),fUb:M("Pq"),Xma:function(a){if(this.SR){this.SR.rO(this);this.SR=q}if(a)if(a.Wf&&a.Wf())this.oh();
else{this.SR=a;this.SR.it(this)}},update:function(){this.xv==sc.ML.COMBATANT&&this.pb.Wf()&&this.oh();this.b.g.z<ig.r.Xy&&(!this.VO&&!this.X6a)&&this.oh();if(this.VO){var b=this.VO==sc.gka.TARGET?this.Qd():this.Pq;if(b){var c=ig.qd.Toa(a,this.b,b.b);this.l(c.x,c.y,b.b.g.z);this.dcb&&b.face&&Vec2.assign(this.face,b.face)}}this.parent()},Zl:function(){this.oh()},dw:function(){this.oh()},JFb:function(){this.oh()},XT:function(){this.ed||this.oh()},detach:function(){if(this.SR){this.SR.rO(this);this.SR=
q}this.xv==sc.ML.ACTION?this.Pq.dE(this):this.xv==sc.ML.COMBATANT?this.pb.rO(this):this.xv==sc.ML.COLLABORATION&&this.pb.El&&this.pb.El.TIb(this)},Aj:function(a){a.ek()&&this.ze()},oh:function(a){if(!this.Jna){this.Jna=a||b.ACTION_END_DESTROYED;this.detach();if(this.G.Ge){this.Ei();Vec2.Oa(this.b.wb,0,0);if(!this.G.handle){this.G.handle=this.G.Ge.va(this,{align:"CENTER",callback:this});this.b.vl(ig.ca.NONE)}}else this.ze()}},sj:function(a){if(this.Tg){if(a.sa==this.pb.sa)return y;var b=a.aj(this);
this.xeb=h;if(this.Tg<0){sc.Ta.Oi(this,b,sc.Wb.NONE,a.Gf(),y,y);return h}var c=a.zb.Yi;sc.Ta.Oi(this,b,a.zb.type,a.Gf(),y,y);this.o_(c);return h}return y},gLb:function(a){this.Tg=this.$v>0&&a>0?this.Tg*(a/this.$v):a;this.$v=a},o_:function(a){this.Tg=this.Tg-a;this.Tg<=0&&this.oh(b.HIT_DESTROYED)},bm:function(a,c){return c[1]=="collab"?!this.El?q:this.El.bm(a,c):c[1]=="ownerAttrib"?ig.ma.s_(this.pb.attributes,c,2):c[1]=="srcAttrib"?ig.ma.s_(this.Pq.attributes,c,2):c[1]=="owner"?ig.ma.xEa(this.pb,c,
2):c[1]=="src"?ig.ma.xEa(this.Pq,c,2):c[1]=="destroyed"?this.Jna!=0:c[1]=="hitDestroyed"?this.Jna==b.HIT_DESTROYED:c[1]=="wasHit"?this.xeb:this.parent(a,c)}});var c=new ig.bv({walkAnims:"default",collType:"IGNORE",maxVel:180,weight:-1,flyHeight:0,soundType:"none",friction:1,accelSpeed:1,bounciness:0});sc.ww.pwb=function(a){var b=new ig.bv;b.YS(a,c);return b};sc.iwa={DZa:function(a,b,c,j){j=this.AZa(a.XA,b,c,j);this.AZa(a.kl,b,c,j)},kCb:function(a,b){return this.p3a(a.XA,b)||this.p3a(a.kl,b)},AZa:function(a,
b,c,j){for(var k=a.length;k--;){var l=a[k];if(l instanceof sc.ww&&(!c||l.VO))b&&l.group!=b||(j?j--:l.oh())}return j||0},p3a:function(a,b){for(var c=a.length;c--;){var j=a[c];if(j instanceof sc.ww&&j.group==b)return h}}}});ig.J=h;
ig.N("game.feature.combat.combat-action-steps").O("impact.base.animation","impact.base.action","impact.base.entity","game.feature.combat.entities.drop","game.feature.combat.entities.combatant","game.feature.combat.entities.combat-proxy","impact.feature.effect.effect-steps","game.feature.combat.combat-sweep").K(function(){function a(a){return a instanceof sc.mja}function b(a,b){for(var c=a.length;c--;){var d=a[c];if(d instanceof sc.ww&&d.group==b)return d}return q}var c={SELF:aa(),PROXY_OWNER:function(a){return a.te()},
PROXY_SRC:function(a){return a.Pq},TARGET:function(a){return a.Qd()}},d=Vec3.create();ig.la.FACE_TO_TARGET=ig.ta.extend({value:y,Bs:y,t:new ig.u({attributes:{value:{c:"Boolean",d:"True if enemy should always look at the target."},Bs:{c:"Boolean",d:"True if enemy should always look at the target IMMEDIATLY.",I:h}}}),f:function(a){this.value=a.value;this.Bs=a.immediately||y},ya:function(a){a.Hm.Aa=this.value;var b=a.Qd();if(this.Bs&&b){b=Vec2.sub(b.tb(),a.tb());Vec2.Ig(b)&&Vec2.Oa(b,0,1);a.Hm.offset&&
Vec2.rotate(b,a.Hm.offset*2*Math.PI);Vec2.assign(a.face,b)}return h}});ig.la.UNLOCK_ENEMY=ig.ta.extend({Fe:q,dX:q,t:new ig.u({attributes:{Fe:{c:"EnemySearch",d:"Enemy to unlock, note that this enemy, use this only for special enemies."},dX:{c:"Boolean",d:"if true 'special' will be displayed instead of kill count",ab:h}}}),f:function(a){this.Fe=a.enemy;this.dX=a.asSpecial==g?h:a.asSpecial},ya:function(){sc.pa.Ni("combat","kill"+this.Fe,this.dX?-1:1);sc.pa.Ni("combat","enemyCompletionRate",sc.Ta.QJ(h));
return h}});ig.la.FACE_TO_TARGET_OFFSET=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Number",d:"Offset to target direction to look into"}}}),f:function(a){this.value=a.value},ya:function(a){a.Hm.offset=this.value;return h}});ig.la.FACE_TO_TARGET_SPEED=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Number",d:"Speed for face to target. Default is 2",ab:2}}}),f:function(a){this.value=a.value},ya:function(a){a.Hm.speed=this.value;return h}});ig.la.FACE_ALIGN=ig.ta.extend({value:y,
t:new ig.u({attributes:{target:{c:"String",d:"Where is player found?",U:c,I:h}}}),f:function(a){this.target=c[a.target]||c.SELF},ya:function(a){var b=this.target(a);b&&b.face&&Vec2.assign(a.face,b.face);return h}});ig.la.SHOW_THROW_FX=ig.ta.extend({t:new ig.u({attributes:{pX:{c:"Boolean",d:"If true: show charged effect"}}}),f:function(a){this.pX=a.charged},start:function(a){var b=sc.ha.NEUTRAL;if(a instanceof sc.G1)b=a.q.sg;sc.Ta.sMb(a,b,this.pX)}});ig.la.COMBAT_ART_CHARGE=ig.ta.extend({t:new ig.u({attributes:{element:{c:"String",
d:"Element of the charge",U:sc.ha},aa:{c:"Integer",d:"Level to charge to"}}}),f:function(a){this.element=sc.ha[a.element];this.aa=a.level},start:function(a){a.$a.fx=new sc.hwa(a,y,h,h);a.$a.aa=0;a.Hj(a.$a.fx);this.qZa(a)},qZa:function(a){a.$a.aa++;a.ib=a.$a.aa<this.aa?a.ib+0.4:a.ib+0.3;a.$a.fx.Ac(this.element,a.$a.aa)},ya:function(a){if(a.ib<=0){if(a.$a.aa==this.aa){a.$a.fx.stop();a.W.cna(sc.RP[this.aa-1]);return h}this.qZa(a)}return y}});ig.la.MOVE_TO_DISTANCE=ig.ta.extend({min:0,max:0,Fa:0,offset:q,
zr:y,t:new ig.u({attributes:{min:{c:"Number",d:"Minimum distance to move to"},max:{c:"Number",d:"Maximum distance to move to"},Fa:{c:"Number",d:"Maximum time to move"},offset:{c:"Vec2",d:"Offset to target.",I:h},zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},gj:{c:"Number",d:"Speed in which entity will rotate to target. In rotations per seconds.",ab:2,I:h},QD:{c:"Number",d:"Reaction time to stop tackle after target has been clearly missed",I:h},JA:{c:"Number",d:"If defined: if angle to collided wall is lower than this value, cancel step",
I:h},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"}}}),f:function(a){this.min=a.min;this.max=a.max;this.Fa=a.maxTime;this.offset=a.offset||q;this.zr=a.forceTime||y;this.gj=a.rotateSpeed||0;this.QD=a.missReactTime;this.JA=a.collideCancel;this.lp=a.stopBeforeEdge},start:function(a){a.ib=a.ib+this.Fa;this.gj&&Vec2.assign(a.b.wb,a.face)},ya:function(a){var b=a.Qd();if(!b)return h;var c=Vec2.sub(b.tb(),a.tb());this.offset&&Vec2.add(c,this.offset);var d=Vec2.length(c);
d<this.min&&Vec2.UN(c,-1);if(this.gj){Vec2.GB(a.face,c,this.gj*Math.PI*2*ig.i.ja);Vec2.assign(a.b.wb,a.face)}else Vec2.assign(a.b.wb,c);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0);if(this.JA)a.ib=0}if(this.JA&&ig.qd.Pda(a.b,this.JA))a.ib=0;if(this.QD!=g&&this.QD!=q&&a.ib>this.QD){ig.qd.Wk(a.b,b.b,w);if(Vec2.Qb(w,a.face)>Math.PI/2)a.ib=this.QD}if(this.min<=d&&d<=this.max){if(!this.zr)return h;Vec2.Oa(a.b.wb,0,0)}return a.ib<=0}});ig.la.MOVE_TO_PINPOINT=ig.ta.extend({Fa:0,offset:q,
zr:y,t:new ig.u({attributes:{TN:{c:"Number",d:"Time of movement. Entity will try to move exactly at target during that time"},I8a:{c:"Number",d:"Amount of time still expected to move after this step. Approach is calculated that way"},offset:{c:"Vec2",d:"Offset to target.",I:h},gj:{c:"Number",d:"Speed in which entity will rotate to target. In rotations per seconds.",ab:2,I:h},TOa:{c:"Boolean",d:"If true, use current accelDir to determine initial movement direction. Use this to continue rotation from precious PINPOINT step"},
Mh:{c:"Number",d:"Maximum velocity. Velocity will always be adapted to hit target at end of moveTime + postTime"},fra:{c:"Number",d:"Maximum velocity at end of movement. Speed will linear interpolate to this value if defined."},via:{c:"Number",d:"How much movement duration should be underestimated for speed adjustment. Lower value makes hitting target more reliable, but leads to initially fast movement",ab:0.75,I:h}}}),f:function(a){this.TN=a.moveTime;this.I8a=a.postTime||0;this.offset=a.offset||
q;this.gj=a.rotateSpeed||0;this.TOa=a.useAccelDir||y;this.Mh=a.maxSpeed||200;this.fra=a.maxSpeedEnd||0;this.via=a.underEstimation||0.75},start:function(a){a.ib=this.TN;if(this.gj){if(this.TOa)a.$a.bK=Vec2.create(a.b.wb);if(!this.TOa||Vec2.Ig(a.$a.bK)){a.$a.bK=this.QUa(Vec2.create(),a);Vec2.assign(a.b.wb,a.$a.bK)}}},QUa:function(a,b){var c=b.Qd();if(!c)return q;ig.qd.Wk(b.b,c.b,a);this.offset&&Vec2.add(a,this.offset);return a},ya:function(a){var b=this.QUa(w,a);if(!b)return h;var c=Vec2.length(b);
if(c<=4)Vec2.Oa(a.b.wb,0,0);else if(this.gj){Vec2.assign(a.b.wb,a.$a.bK);Vec2.Ig(a.b.wb)?Vec2.assign(a.b.wb,b):Vec2.GB(a.b.wb,b,this.gj*Math.PI*2*ig.i.ja);Vec2.assign(a.$a.bK,a.b.wb)}else Vec2.assign(a.b.wb,b);c=c/((a.ib+this.I8a)*this.via);if(this.gj){b=1-Vec2.Qb(a.$a.bK,b)/Math.PI*2;c=Math.max(0,c*b)}b=this.Mh;this.fra&&(b=a.ib/this.TN*(this.Mh-this.fra)+this.fra);c>b&&(c=b);a.b.Ch=c;return a.ib<=0}});var f={TARGET_DISTANCE:1,SELF_DISTANCE:2};ig.la.SET_ATTRIB_CLOSEST_ENTITY=ig.ta.extend({t:new ig.u({attributes:{NDa:{c:"String",
d:"Name of attrib to store entity",I:h},AGa:{c:"String",d:"Name of attrib to store entity index",I:h},entities:{c:"Array",d:"List of entities. Will move to one of those",Xt:{c:"Entity"}},hha:{c:"String",d:"How entity is selected",U:f}}}),f:function(a){this.NDa=a.entityAttrib;this.AGa=a.indexAttrib;this.entities=a.entities;this.hha=f[a.selectBy]},start:function(a){var b;b=this.entities;for(var c=-1,d=0,i=b.length,j=this.hha==f.TARGET_DISTANCE?a.Qd():a;i--;){var k=ig.Ja.rd(b[i]);if(k){k=ig.qd.Fy(j.b,
k.b);if(c==-1||k<d){c=i;d=k}}}b=c;this.AGa&&a.setAttribute(this.AGa,b);this.NDa&&a.setAttribute(this.NDa,this.entities[b])}});var i={NORTH:{wj:{x:0,y:-1},eO:{x:1,y:0}},EAST:{wj:{x:1,y:0},eO:{x:0,y:1}},SOUTH:{wj:{x:0,y:1},eO:{x:1,y:0}},WEST:{wj:{x:-1,y:0},eO:{x:0,y:1}},HORIZONTAL_CLOSE:{wj:{x:1,y:0},eO:{x:0,y:1},close:h},HORIZONTAL_FAR:{wj:{x:1,y:0},eO:{x:0,y:1},UR:h},VERTICAL_CLOSE:{wj:{x:0,y:1},eO:{x:1,y:0},close:h},VERTICAL_FAR:{wj:{x:0,y:1},eO:{x:1,y:0},UR:h}};ig.la.MOVE_TO_ATTRIB_ENTITY=ig.ta.extend({t:new ig.u({attributes:{ir:{c:"String",
d:"Name of attribute that includes index of entity"},WT:{c:"String",d:"How to position entity",U:i},eb:{c:"Number",d:"Distance to entity along position type"},isa:{c:"Number",d:"Orthogonal distance (Sideways) - can also be negative for opposite direction."},qYa:{c:"Boolean",d:"If true, adjust orthogonal distance to fit target"},Fa:{c:"Number",d:"Maximum time to move. If 0: Move until target is reached"},zr:{c:"Boolean",d:"Keep moving, never stop until maxTime has been reached"},Ph:{c:"Boolean",d:"If true, move to point precisely"},
ILa:{c:"String",d:"If defined: don't move but instead save result position in attribute",I:h},hha:{c:"String",d:"By which distance positionType is determined",U:f,I:h}}}),f:function(a){this.ir=a.attrib;this.WT=i[a.positionType]||i.NORTH;this.eb=a.distance||0;this.isa=a.orthogonalDist||0;this.qYa=a.adjustTarget||y;this.Fa=a.maxTime;this.zr=a.forceTime||y;this.Ph=a.precise||y;this.ILa=a.saveToAttrib||q;this.hha=f[a.selectBy]||f.SELF_DISTANCE},start:function(a){delete a.$a.g;var b=ig.Ja.rd(a.getAttribute(this.ir));
if(b){var c=b.tb(),d=Vec2.assign(o,this.WT.wj);if(this.WT.close||this.WT.UR){var i=a.b;if(this.hha==f.TARGET_DISTANCE&&a.Qd())i=a.Qd().b;b=ig.qd.Wk(b.b,i,t);b=Vec2.ug(b,d);(this.WT.close&&b<0||this.WT.UR&&b>0)&&Vec2.Lc(d)}Vec2.length(d,this.eb);Vec2.Tm(d,this.WT.eO,this.isa);Vec2.add(c,d);a.$a.g=c;a.ib=a.ib+this.Fa}},ya:function(a){var b=a.$a.g;if(!b)return h;var c=a.Qd();if(this.qYa&&c){c=c.tb(o);this.WT.eO.x?b.x=c.x+this.isa:b.y=c.y+this.isa}if(this.ILa){c=Vec3.create();Vec2.assign(c,b);c.z=a.b.g.z;
a.setAttribute(this.ILa,c);return h}b=Vec2.sub(b,a.tb(),l);c=Vec2.length(b);if(this.Ph&&a.b.Ch*a.b.jf>c*10)a.b.jf=c/a.b.Ch*10;Vec2.assign(a.b.wb,b);if(c<=(this.Ph?2:8)){if(!this.Fa||!this.zr)return h;Vec2.Oa(a.b.wb,0,0)}return this.Fa&&a.ib<=0}});ig.la.SET_COMBATANT_PARTY=ig.ta.extend({t:new ig.u({attributes:{sa:{c:"String",d:"Override party determine which things are hit",U:sc.pd}}}),f:function(a){this.sa=sc.pd[a.party]},ya:function(a){sc.Ta.ovb(a,this.sa);return h}});ig.la.JUMP_TO_TARGET=ig.ta.extend({HN:0,
Saa:0,offset:q,t:new ig.u({attributes:{HN:{c:"Number",d:"Jump Speed / Z Velocity"},Saa:{c:"Number",d:"Until how high above player X/Z movement should be adjusted"},offset:{c:"Vec2",d:"Offset to target.",I:h}}}),f:function(a){this.HN=a.jumpSpeed;this.Saa=a.adjustAbove||0;this.offset=a.offset||q},start:function(a){a.WM(this.HN)},ya:function(a){var b=a.Qd();if(!b)return h;var c=a.b.g.z-a.b.pc;if(a.b.V.z<=0&&c<=this.Saa){Vec2.Oa(a.b.wb,0,0);if(c==0)return h}else{b=Vec2.sub(b.tb(),a.tb());this.offset&&
Vec2.add(b,this.offset);Vec2.length(b)>8&&Vec2.assign(a.b.wb,b)}return y}});var j={LANDED:{Lda:function(a){var b=a.b.g.z-a.b.pc;if(b>0&&a.$a.rHa)a.$a.rHa=y;return(!a.$a.rHa||a.b.V.z<=0)&&b==0},duration:function(a){var b=a.Qd();return ig.qd.k2a(a.b,(b||a).b.pc)}},Z_ZENITH:{Lda:function(a){return a.b.V.z<=0},duration:function(a){return ig.qd.qAb(a.b)}}};ig.la.JUMP_TARGET_MOVEMENT=ig.ta.extend({Saa:0,offset:q,t:new ig.u({attributes:{Iua:{c:"String",d:"When to stop Jump Movement",U:j},Fua:{c:"Number",
d:"Number of seconds to stop before target point has been reached."},eb:{c:"Number",d:"Close in to target up to this distance"},offset:{c:"Vec2",d:"Offset to target.",I:h},gj:{c:"Number",d:"Speed in which entity will rotate to target. In rotations per seconds.",ab:2,I:h},Vla:{c:"Number",d:"If defined: optimized speed to hit target with up to this speed",I:h},ora:{c:"Number",d:"If set, move entity like missile flying right at entity with speed provided minimal zSpeed. ONLY WORKS WITH adjustSpeedMax defined."},
via:{c:"Number",d:"How much jump duration should be underestimated for speed adjustment. Lower value makes hitting target more reliable, but leads to initially fast jump motion.",ab:0.75,I:h},gZa:{c:"Boolean",d:"If entity is falling and below target z pos"}}}),f:function(a){this.Iua=j[a.stopType]||j.LANDED;this.Fua=a.stopBeforeTime||0;this.eb=a.distance||0;this.offset=a.offset||q;this.gj=a.rotateSpeed||0;this.Vla=a.adjustSpeedMax||0;this.ora=a.missileMode||0;this.via=a.underEstimation||0.75;this.gZa=
a.cancelIfBelowFall||y},start:function(a){a.$a.rHa=h;if(this.gj)a.$a.bK=Vec2.create(a.face)},ya:function(a){var b=a.Qd();if(b){var c=ig.qd.$Ea(a.b,b.b,d);this.offset&&Vec2.add(c,this.offset);var f=Vec2.length(c);if(f<=Math.max(this.eb,4))Vec2.Oa(a.b.wb,0,0);else if(this.gj){Vec2.assign(a.b.wb,a.$a.bK);Vec2.Ig(a.b.wb)?Vec2.assign(a.b.wb,c):Vec2.GB(a.b.wb,c,this.gj*Math.PI*2*ig.i.ja);!a.Hm.Aa&&!a.lu&&Vec2.assign(a.face,a.b.wb);Vec2.assign(a.$a.bK,a.b.wb)}else Vec2.assign(a.b.wb,c);if(this.Vla)if(this.ora){f=
a.b;f.Fd=0;var i=Vec3.length(c);if(i>0){var j=this.Vla,k=j*Vec2.length(c)/i,c=j*c.z/i;f.jf=1;f.Ch=k;Vec2.length(f.V,k);f.V.z=c;if(f.V.z>-this.ora)f.V.z=-this.ora;f.Ze.Am=1}}else{j=this.Iua.duration(a);j-this.Fua>0.1&&(j=j*this.via);if(j>0){j=(f-this.eb)/j;if(this.gj){c=1-Vec2.Qb(a.$a.bK,c)/Math.PI*2;j=Math.max(0,j*c)}a.b.Ch=Math.min(j,this.Vla)}}if(this.Fua){j=this.Iua.duration(a);if(j>0&&j<this.Fua)return h}if(this.gZa){f=a.b;if(b.b.g.z>f.g.z&&f.V.z<0)return h}}return this.Iua.Lda(a)}});ig.la.SET_MISSILE_SPEED=
ig.ta.extend({t:new ig.u({attributes:{speed:{c:"Number",d:"Speed of Missile in pixel per seconds. Will be distributed to vel x/y/z to hit target on ground impact. Will always set gravityFactor to 0.",ab:400},Ro:{c:"Number",d:"Minimum amount of time for flight of missile",I:h}}}),f:function(a){this.speed=a.speed||400;this.Ro=a.minTime||0},start:function(a){var b=a.Qd();if(b){var c=a.b;c.Fd=0;var a=ig.qd.$Ea(a.b,b.b,d),b=Vec3.length(a),f=this.speed,i=b/f;i<this.Ro&&(f=f*(i/this.Ro));i=f*Vec2.length(a)/
b;a=f*a.z/b;c.jf=1;c.Ch=i;Vec2.length(c.V,i);c.V.z=a;c.Ze.Am=1}}});ig.la.ESCAPE_FROM_TARGET=ig.ta.extend({eb:0,Ro:0,Fa:0,t:new ig.u({attributes:{eb:{c:"Number",d:"Minimum distance to target"},Ro:{c:"Number",d:"Minimum amount of time to escape"},Fa:{c:"Number",d:"Maximum amount of time to escape"}}}),f:function(a){this.eb=a.distance;this.Ro=a.minTime;this.Fa=a.maxTime},start:function(a){a.$a.Fa=this.Ro+Math.random()*(this.Fa-this.Ro);a.ib=a.ib+a.$a.Fa;a.$a.gDa=h},ya:function(a){var b=a.Qd();if(!b)return h;
b=Vec2.sub(a.tb(),b.tb());if(Vec2.length(b)>this.eb)return h;Vec2.normalize(b);if(!a.$a.dir||a.b.Zo>0.2){var c=a.b.Zo=0;if(a.$a.gDa)c=b;else{do c=Vec2.normalize(Vec2.vc(Math.random()-0.5,Math.random()-0.5));while(a.$a.dir&&Vec2.ug(a.$a.dir,c)>0.8)}a.$a.dir=c;a.$a.gDa=!a.$a.gDa}Vec2.assign(a.b.wb,a.$a.dir);return a.ib<=0}});ig.la.CIRCLE_TARGET=ig.ta.extend({Ro:0,Fa:0,t:new ig.u({attributes:{Ro:{c:"Number",d:"Minimum amount of time to circle target"},Fa:{c:"Number",d:"Maximum amount of time to circle target"},
z5a:{c:"Boolean",d:"Move so direction which is closer to face direction"},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"}}}),f:function(a){this.Ro=a.minTime;this.Fa=a.maxTime;this.z5a=a.keepFaceDirection;this.lp=a.stopBeforeEdge},start:function(a){a.ib=this.Ro+Math.random()*(this.Fa-this.Ro);a.$a.sba=Math.random()>0.5},ya:function(a){var b=a.Qd();if(!b)return h;b=Vec2.sub(a.tb(),b.tb());a.$a.sba?Vec2.w_(b):Vec2.hz(b);this.z5a&&Vec2.ug(b,a.face)<0&&Vec2.Lc(b);
Vec2.assign(a.b.wb,b);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return a.ib<=0}});var k={TARGET:function(a){return a.Qd()},PROXY_OWNER:function(a){return a.te()},PROXY_SRC:function(a){return a.Pq},COLLAB_ENTITY:function(a){return a.Dm&&a.Dm.Q}};ig.la.STICK_TO_TARGET=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"Type of target",U:k},align:{c:"String",d:"Alignment of to target",U:ig.Pa},offset:{c:"Offset",d:"Offset to target"},duration:{c:"Number",d:"Duration of sticking"},
jL:{c:"VarCondition",d:"If defined: continue spinning until condition evaluates to true. Duration is minimum wait",I:h}}}),f:function(a){this.target=k[a.target];this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.duration=a.duration||0;this.offset=a.offset;this.jL=new ig.de(a.waitUntil)},start:function(a){var b=this.target&&this.target(a);if(b){a.ib=this.duration;a.$a.target=b}},ya:function(a){var b=a.$a.target;if(!b)return h;b=b.lc(this.align,d);this.offset&&Vec3.add(b,this.offset);Vec2.Tm(b,a.b.size,-0.5);
a.l(b.x,b.y,b.z);return!this.jL.evaluate()?y:a.ib<=0}});ig.la.STICKY_CIRCLE_AROUND=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"Type of target",U:k},eb:{c:"Number",d:"Distance to target",ab:32,I:h},duration:{c:"Number",d:"Duration of rotating movement"},sba:{c:"Boolean",d:"If true, rotate counterclockwise"},DLa:{c:"Number",d:"Seconds for one full rotation. If not defined used current speed to determine rotation speed",I:h},L_a:{c:"Number",d:"Speed with which projectile adjust distance to target (pixel per seconds)"},
Ova:{c:"Number",d:"If defined: Interpolate to this z Distance (with same speed as dist interpolation)",I:h},jL:{c:"VarCondition",d:"If defined: continue spinning until condition evaluates to true. Duration is minimum wait",I:h},aPa:{c:"Boolean",d:"If true: keep rotating until rotate velocity roughly matches direction to target"}}}),f:function(a){this.target=k[a.target];this.eb=a.distance===g?q:a.distance;this.duration=a.duration||0;this.DLa=a.rotateTime||0;this.L_a=a.distAdjustSpeed||0;this.sba=a.ccw||
y;this.Ova=a.zDistance===g?q:a.zDistance;this.jL=new ig.de(a.waitUntil);this.aPa=a.waitTargetAlign||y},start:function(a){var b=this.target&&this.target(a);if(b){a.ib=this.duration;a.$a.target=b;a.$a.SS=Vec3.create(b.b.g)}},ya:function(a){var b=a.$a.target;if(!b)return h;var c=a.b.Ch*a.b.jf,f=a.lc(ig.Pa.BOTTOM,d),i=Vec3.assign(m,b.b.g);Vec3.sub(i,a.$a.SS);this.Ova!==q?Vec3.add(f,i):Vec2.add(f,i);Vec3.assign(a.$a.SS,b.b.g);var j=b.lc(ig.Pa.BOTTOM,m),b=Vec2.sub(f,j,l);Vec2.Ig(b)&&Vec2.Oa(b,0,-1);var k=
Vec2.length(b),i=this.L_a||c;if(this.eb!==q){if(k<this.eb){k=k+ig.i.ja*i;if(k>this.eb)k=this.eb}else if(k>this.eb){k=k-ig.i.ja*i;if(k<this.eb)k=this.eb}Vec2.length(b,k)}k=k*2*Math.PI;c=this.DLa?1/this.DLa:c/k;c=c*ig.i.ja*Math.PI*2;a.ib<0&&(this.jL.evaluate()&&!this.aPa)&&(c=c*(1+a.ib/ig.i.ja));this.sba||(c=-c);Vec2.rotate(b,c);Vec2.assign(f,j);Vec2.add(f,b);if(this.Ova!==q){c=j.z+this.Ova;if(f.z>c){f.z=f.z-ig.i.ja*i;if(f.z<c)f.z=c}else if(f.z<c){f.z=f.z+ig.i.ja*i;if(f.z>c)f.z=c}}f.x=f.x-a.b.size.x/
2;f.y=f.y-a.b.size.y/2;this.sba?Vec2.hz(b):Vec2.w_(b);a.l(f.x,f.y,f.z);a.lu||Vec2.assign(a.face,b);if(!this.jL.evaluate())return y;if(a.ib<=0&&this.aPa){f=ig.qd.Wk(a.b,a.Qd().b,o);if(Vec2.Qb(f,b)>Math.PI/2*0.125)return y}return a.ib<=0}});ig.la.SET_CIRCLE_AROUND_POS=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"Type of target",U:k},Y8a:{c:"String",d:"Group of proxies to align circle around pos with"},count:{c:"Number",d:"Number of proxies that circle around target with even spacing"},
nBa:{c:"String",d:"If defined: only consider proxy if attrib is false",I:h}}}),f:function(a){this.target=k[a.target];this.Y8a=a.proxyGroup;this.count=a.count||1;this.nBa=a.attribBlock},start:function(a){var b=this.target&&this.target(a);if(b){for(var c=b.lc(ig.Pa.BOTTOM,m),d=a.te().XA,f=d.length,i=[];f--;){var j=d[f];j!=a&&j instanceof sc.ww&&(!this.nBa||!j.getAttribute(this.nBa))&&j.group==this.Y8a&&i.push(this.zrb(b,j))}b=Vec2.Oa(l,0,1);d=Math.PI*2/this.count;if(i.length){Vec2.assign(b,i[0]);var k=
this.count;do{j=y;Vec2.rotate(b,d);for(f=i.length;f--;)Vec2.Qb(b,i[f])<d/2&&(j=h);k--}while(j&&k)}Vec2.length(b,1);Vec2.add(c,b);a.l(c.x-a.b.size.x/2,c.y-a.b.size.y/2,g)}},zrb:function(a,b){return ig.qd.Wk(a.b,b.b,Vec2.create())}});ig.la.TACKLE=ig.ta.extend({time:0,QD:g,Cn:q,lX:y,cV:y,gj:0,t:new ig.u({attributes:{Cn:{c:"AttackInfo",d:"Attack Info of tackle"},time:{c:"Number",d:"Movement time to tackel target"},QD:{c:"Number",d:"Reaction time to stop tackle after target has been clearly missed",I:h},
lX:{c:"Boolean",d:"If true, cancel tackle once target is hit"},cV:{c:"Boolean",d:"Show branches to handle hit and miss follow up",I:h},JA:{c:"Number",d:"If defined: if angle to collided wall is lower than this value, cancel step",I:h},gj:{c:"Number",d:"Speed in which entity will rotate to target. In rotations per seconds.",ab:0.2,I:h},E6:{c:"Number",d:"0= hit target will fly in dash dir. 1= target will fly orthogonally away from dash trail."},X3a:{c:"Boolean",d:"If true, ignore most recently hit entity"},
SZa:{c:"Boolean",d:"If true: when colliding with wall, change dash direction to slip alongside wall."}},NF:function(a){switch(a){case "hit":return"ON TACKLE HIT";case "missed":return"ON TACKE MISS";case "_end":return"end tackle"}return"???"}}),f:function(a){this.time=a.time;this.Cn=a.attack;this.QD=a.missReactTime;this.lX=a.cancelOnHit||y;this.cV=a.withBranches||y;this.JA=a.collideCancel||0;this.SZa=a.collideSlip||y;this.gj=a.rotateSpeed||0;this.E6=a.orthoDirFactor||0;this.X3a=a.ignoreLastHit||y},
start:function(a){a.ib=this.time;a.$a.dir=Vec2.create(a.face);a.$a.di=a.b.di;a.b.di=-1;Vec2.assign(a.b.wb,a.$a.dir);var b=a.b;b.Vs=b.Zo=0;a.Dab(new sc.mL(a.W,this.Cn),this.E6,this.lX,this.X3a)},ya:function(a){var b=a.Qd();if(this.gj&&b){var c=ig.qd.Wk(a.b,b.b,l);Vec2.GB(a.$a.dir,c,this.gj*Math.PI*2*ig.i.ja);Vec2.assign(a.face,a.$a.dir)}Vec2.assign(a.b.wb,a.$a.dir);if(!a.te().Ah&&!b)a.ib=0;if(b&&this.QD!=g&&this.QD!=q&&a.ib>this.QD){ig.qd.Wk(a.b,b.b,w);if(Vec2.Qb(w,a.face)>Math.PI/2)a.ib=this.QD}if(this.JA&&
ig.qd.Pda(a.b,this.JA))a.ib=0;else if(this.SZa&&ig.qd.Pda(a.b,1)){b=Vec2.assign(l,a.b.Nc.Cm);Vec2.hz(b);Vec2.ug(b,a.face)<0&&Vec2.Lc(b);Vec2.assign(a.face,b);Vec2.assign(a.$a.dir,b)}if(this.lX&&a.zo.Hf>0)a.ib=0;return a.ib<=0},eB:function(){return this.cV?["hit","missed"]:q},Lv:function(a){var b=a.zo.Hf>0;a.Dab(q);a.b.di=a.$a.di;return this.cV?b?this.uf.hit||this.Ok:this.uf.missed||this.Ok:this.Ok}});ig.la.CIRCLE_ATTACK=ig.ta.extend({xZa:q,Cn:q,Aoa:y,t:new ig.u({attributes:{Cn:{c:"AttackInfo",d:"Attack Info of circle attack"},
align:{c:"String",d:"Alignment of force relative to entity",U:ig.Pa},offset:{c:"Offset",d:"Offset to entity"},Se:{c:"Number",d:"Radius of circle attack"},pp:{c:"Number",d:"Scale of y dimension relative to x. 1 = equally scaled. 0.5 = half y extend."},kf:{c:"Number",d:"Z Height of collision force."},Ij:{c:"Number",d:"Central Angle of circle attack. 1 = one circle"},Sj:{c:"Number",d:"Start angle of circle attack relative to front. If not specified startes at - centralAngle / 2",I:h},duration:{c:"Number",
d:"Duration of circle sweep"},soa:{c:"Number",d:"How much the radius extends during the sweep"},Xaa:{c:"Boolean",d:"If true, circle is constantly closed."},my:{c:"Boolean",d:"If true, sweep clockwise. ccw otherwise."},us:{c:"Integer",d:"If true, flip circle orientation if left faced."},nta:{c:"Boolean",d:"Collision area is actually not a circle, but a box."},repeat:{c:"Boolean",d:"If true, repeat proxy spawning until ended by force (action end or call STOP_REPEATING_FORCE)"},COa:{c:"Boolean",d:"If true, use entity center to determine hit direction rather than force center"},
Aoa:{c:"Boolean",d:"If true: show circle attack at a fixed position"},s3:{c:"Boolean",d:"If true: check collision before hitting entities"},sa:{c:"String",d:"Override party determine which things are hit",U:sc.pd,I:h}}}),f:L("xZa"),ya:function(a){var b=new sc.vw(a,this.xZa);sc.Ta.js(b);b.duration>0&&a.Hj(b);return h}});ig.la.COMBAT_SWEEP=ig.ta.extend({t:new ig.u({attributes:{ncb:{c:"String",d:"Type of sweep",U:sc.f1},X9a:{c:"Boolean",d:"If true: Show effect reversed"},E0a:{c:"Number",d:"For how many face directions the effect should be rotated"},
us:{c:"Boolean",d:"If true, flip for left facing directions"}}}),f:function(a){this.ncb=sc.f1[a.sweepType];this.X9a=a.reversed;this.E0a=a.faceCount;this.us=a.flipLeftFace||y},ya:function(a){sc.Sfb.show(this.ncb,a,sc.Ta.bpa(a),this.E0a,this.X9a,this.us);return h}});ig.la.PUSH_PULL_FORCE=ig.ta.extend({i_:q,t:new ig.u({attributes:{pn:{c:"String",d:"How strong enemy is pushed/pulled",U:sc.Bxa},Jq:{c:"Boolean",d:"If true: pull entities towards combatant, otherwise, push away"},Se:{c:"Number",d:"Radius of circle attack"},
Kca:{c:"Number",d:"addition Radius in which the strengh is linarly faded to 0"},nfa:{c:"Number",d:"If defined, force will stop if entity is below that radius"},YDa:{c:"Number",d:"If defined, place pull center in front of face direction with specified distance",I:h},kf:{c:"Number",d:"Z height of push/pull force range",ab:32},duration:{c:"Number",d:"Duration of force. -1 will last until action end or call of STOP_REPEATING_FORCE"},sa:{c:"String",d:"Party of force. Combatants of other parties are pushed/pulled. Will use combatant party by default",
U:sc.pd,I:h},ne:{c:"Effect",d:"If defined: show effect on combatants influenced by force",I:h},align:{c:"String",d:"Alignment ot push/pull force",U:ig.Pa}}}),f:function(a){this.i_=a;this.i_.effect&&(this.i_.effect=new ig.Bi(this.i_.effect))},Ka:function(){this.i_.effect&&this.i_.effect.Ka()},ya:function(a){var b=new sc.Jlb(a,this.i_);sc.Ta.js(b);a.Hj(b);return h}});ig.la.SET_INVINCIBLE=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"Number",d:"The time the combatant will be invincible. -1 for constant invincibility. Set to 0 to reset."}}}),
f:function(a){this.value=a.value},ya:function(a){a.Ds=this.value;return h}});ig.la.MOD_GENERIC_PROXY=ig.ta.extend({kZ:q,gCa:y,Tg:q,t:new ig.u({attributes:{kZ:{c:"Effect",d:"If defined, set Kill effects of generic proxy",I:h},gCa:{c:"Boolean",d:"If true, clear kill effect of generic proxy"},Tg:{c:"Number",d:"Define to overwrite. If 0: proxy will ignore attack. -1: will take hits but is never destroyed (stops balls) >0: takes hits and can be destroyed",I:h}}}),f:function(a){if(a.killEffect)this.kZ=
new ig.Bi(a.killEffect);this.gCa=a.clearKillEffect||y;if(a.hp!==g)this.Tg=a.hp},Ka:function(){this.kZ&&this.kZ.Ka()},start:function(a){if(a instanceof sc.ww){if(this.kZ)a.G.Ge=this.kZ;if(this.gCa)a.G.Ge=q;this.Tg!==q&&a.gLb(this.Tg)}}});ig.la.CONNECT_PROXY_TO_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){var b=a.Qd();a.Xma&&a.Xma(b)}});ig.la.DISCONNECT_PROXY_FROM_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Xma&&a.Xma(q)}});ig.la.SET_ELEMENT_FILTER=
ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"String",d:"Value of element filter. NEUTRAL=No Filter.",U:sc.ha}}}),f:function(a){this.value=sc.ha[a.value]||sc.ha.NEUTRAL},ya:function(a){a.o4=this.value;return h}});ig.la.DODGE_FREE_LINE=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"Number",d:"How long to dodge the free line."}}}),f:function(a){this.time=a.time},start:function(a){a.ib=this.time;a.$a.dir=sc.Ta.G4a(a)},ya:function(a){if(!a.$a.dir)return h;Vec2.assign(a.b.wb,a.$a.dir);
return a.ib<=0}});ig.la.ENABLE_REACTION=ig.ta.extend({m_:q,t:new ig.u({attributes:{m_:{c:"Reaction",d:"Reaction to enable"}}}),f:function(a){this.m_=a.reaction},ya:function(a){a.Exb(this.m_);return h}});ig.la.SET_SPIKE_DAMAGE=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"Value for spike damage factor"}}}),f:function(a){this.value=a.value},ya:function(a){a.QK.bva=this.value;return h}});ig.la.DISABLE_REACTION=ig.ta.extend({m_:q,t:new ig.u({attributes:{m_:{c:"Reaction",d:"Reaction to disable"}}}),
f:function(a){this.m_=a.reaction},ya:function(a){a.dxb(this.m_);return h}});ig.la.SET_DAMAGE_FACTOR=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"New damage factor"}}}),f:function(a){this.value=a.value},ya:function(a){if(a.W)a.W.Yi=this.value;return h}});ig.la.SET_HIT_STABLE=ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"String",d:"New hit stable value.",U:sc.Wb}}}),f:function(a){this.value=sc.Wb[a.value]},ya:function(a){a.Gr=this.value;return h}});ig.la.SET_DAMAGE_CEILING=
ig.ta.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"The maximum sum of all damage factors of the attack. Damage factors will be scaled down when sum gets close to maximum"},Syb:{c:"Boolean",d:"Forward ceiling on all attached action proxies"}}}),f:function(a){this.value=a.value||0},ya:function(a){a.Re.Cv={max:this.value,bia:{}};for(var b=a.kl,c=b.length;c--;)if(b[c]instanceof sc.Z8)b[c].Re.Cv=a.Re.Cv;return h}});ig.la.CLEAR_DAMAGE_CEILING=ig.ta.extend({t:new ig.u({attributes:{Syb:{c:"Boolean",
d:"Forward ceiling on all attached action proxies"}}}),f:function(a){this.value=a.value||0},ya:function(a){a.Re.Cv=q;for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof sc.Z8)a[b].Re.Cv=q;return h}});ig.la.SET_ENEMY_STATE=ig.ta.extend({cY:0,t:new ig.u({attributes:{cY:{c:"EnemyState",d:"State of Enemy to switch to"}}}),f:function(a){this.cY=a.enemyState},ya:function(a){a.LC(this.cY);return h}});var l=Vec2.create(),m=Vec3.create(),n={SELF:function(a,b,c){a=b.lc(c,a);if(b.Ah&&this.align==ig.Pa.BOTTOM){c=
b.WG===g?-1:b.WG;if(c>=0)a.z=Math.min(b.b.g.z,c)}return a},TARGET:function(a,b,c){return(b.Qd()||b).lc(c,a)},COLLAB_CENTER:function(a,b,c){return!b.El?b.lc(c,a):b.El.z1a(a,c)}};ig.la.SHOOT_PROXY=ig.ta.extend({BB:q,offset:{x:0,y:0,z:0},align:ig.Pa.FACE,dir:q,ap:q,t:new ig.u({attributes:{proxy:{c:"ProxyRef",d:"Ball the entity will shoot"},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},
dir:{c:"Vec2",d:"Direction to go to",wC:h,I:h},sYa:{c:"Boolean",d:"If true: aim at target, ignore any other direction.",I:h},ap:{c:"String",d:"How to determine start position",U:n,I:h}}}),f:function(a){this.BB=sc.dq.bU(a.proxy);this.offset=a.offset||this.offset;this.align=ig.Pa[a.align]||this.align;this.dir=a.dir;this.sYa=a.aimAtTarget;this.ap=n[a.posType]||n.SELF},Ka:function(){sc.dq.Oga(this.BB)},ya:function(a){var b=sc.dq.hS(this.BB,a);if(b){var c=this.dir&&ig.Xe.vG(this.dir,a,l)||a.face,d=this.ap(m,
a,this.align);Vec3.add(d,this.offset);if(this.sYa){var f=a.Qd();if(f){c=f.tb(l);Vec2.sub(c,d)}}b.Vn(d.x,d.y,d.z,a,c)}return h}});ig.la.SET_HIT_PROXY=ig.ta.extend({BB:q,offset:{x:0,y:0,z:0},align:ig.Pa.FACE,ap:q,t:new ig.u({attributes:{proxy:{c:"ProxyRef",d:"Ball the entity will shoot"},ap:{c:"String",d:"How to determine start position",U:sc.ewa},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"}}}),
f:function(a){this.BB=sc.dq.bU(a.proxy);this.offset=a.offset||this.offset;this.align=ig.Pa[a.align]||this.align;this.ap=sc.ewa[a.posType]||q},Ka:function(){sc.dq.Oga(this.BB)},start:function(a){var b=sc.dq.hS(this.BB,a);b&&a.$Kb(b,this.ap,this.align,this.offset)}});ig.la.SET_PROXY_OWNER_TO_POS=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),Ka:J(),ya:function(a){a.te().l(a.b.g.x,a.b.g.y,a.b.g.z);return h}});ig.la.CLEAR_HIT_PROXY=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Re.UJ=
q}});var o=Vec2.create(),t=Vec3.create();ig.la.SHOOT_PROXY_RANGE=ig.ta.extend({Dy:q,t:new ig.u({attributes:{proxy:{c:"ProxyRef",d:"Ball the entity will shoot"},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},dir:{c:"Vec2",d:"Direction to go to",wC:h,I:h},Ij:{c:"Number",d:"Central angle of range. 1 = full circle"},Sj:{c:"Number",d:"Angle from which to start. Default is - centralAngle / 2",
I:h},OQ:{c:"Number",d:"Randomly vary each angle with the provided range"},Qq:{c:"Number",d:"Start Distance of ball in throw direction",I:h},rNa:{c:"Number",d:"Start Distance added for following proxies. Last proxy will be spawned with startDist + startDistAdd distance",I:h},g8:{c:"String",d:"If not NONE: consider environment collision before adding start dist. CLOSER = move closer, DROP = Don't spawn if colliding",U:sc.P1},Qea:{c:"Boolean",d:"If true, limit range of spawning depening on collision, check only at beginning",
I:h},random:{c:"Boolean",d:"Spawn each Proxy in random direction within range"},count:{c:"Number",d:"The number of proxies thrown"},duration:{c:"Number",d:"Time it takes to throw proxies"},my:{c:"Boolean",d:"If true throw proxies clockwise, otherwise counter clockwise"},us:{c:"Integer",d:"If FACE COUNT is provided: swap clockWise if face direction is towards left"},yT:{c:"Vec2",d:"offset Area around position to randomly spawn entity at",I:h},Hma:{c:"Boolean",d:"Make offsetArea circular, not rectangular"},
wia:{c:"Number",d:"To what extend the final dir should be uniform. 1=all the same dir, 0= all individual, 0.5=between the two"},delay:{c:"Number",d:"Time delay for first shot"},repeat:{c:"Boolean",d:"If true, repeat proxy spawning until ended by force (action end or call STOP_REPEATING_FORCE)"},Rua:{c:"Array",d:"Only spawn entity if terrain below is in this list",Xt:{c:"String",U:ig.hd},I:h},e6:{c:"Number",d:"If specified: must have at most this distance to ground, otherwise won't be spawned",I:h},
mO:{c:"String",d:"If selected: use alternatice entity for spawn center position",I:h,U:c},pp:{c:"Number",d:"Scale of y dimension relative to x. 1 = equally scaled. 0.5 = half y extend.",I:h,ab:1}}}),f:function(a){a.proxy=sc.dq.bU(a.proxy);this.Dy=a;this.mO=c[a.posEntity]||q},Ka:function(){sc.dq.Oga(this.Dy.proxy)},ya:function(a){var b=q;this.mO&&(b=this.mO(a));b=new sc.Ilb(a,this.Dy,b);sc.Ta.js(b);a.Hj(b);return h}});ig.la.SHOOT_PROXY_GRID=ig.ta.extend({t:new ig.u({attributes:{ro:{c:"Array",d:"List of proxy types",
Xt:"ProxyRef"},pattern:{c:"FlexibleTable",d:"Pattern of proxies. 0=no proxy, otherwise n-1 = proxy id",jRb:20,ARb:30,xc:h},Bb:{c:"Number",d:"Size of grid tile - distance between neighbouring proxies",ab:16},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},lEa:{c:"String",d:"Determines the order in which proxies are spawned",U:sc.zxa},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},duration:{c:"Number",d:"Duration of proxy spawning"},
gNa:{c:"Number",d:"If defined guarantee a minimum delay between each spawned proxy",I:h}}}),f:function(a){for(var b=a.proxies,c=[],d=0;d<b.length;++d)c[d]=sc.dq.bU(b[d]);a.proxies=c;this.Dy=a},Ka:function(){for(var a=this.Dy.proxies,b=a.length;b--;)sc.dq.Oga(a[b])},ya:function(a){var b=new sc.Hlb(a,this.Dy);sc.Ta.js(b);a.Hj(b);return h}});ig.la.STOP_REPEATING_FORCE=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){for(var a=a.kl,b=a.length;b--;){var c=a[b];c instanceof sc.nV&&c.zea()&&
c.Zl()}return h}});ig.la.UNSTICK_STICKING_PROXIES=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){for(var a=a.kl,b=a.length;b--;){var c=a[b];if(c instanceof sc.ww&&c.VO)c.VO=0}}});ig.la.REMOVE_PROXIES=ig.ta.extend({t:new ig.u({attributes:{Zha:{c:"Boolean",d:"If true: only remove sticking proxies"},group:{c:"String",d:"If set, only clear proxies of that group"},target:{c:"String",d:"What entity will get the buff",U:c,I:h},w5a:{c:"Number",d:"If defined: keep this many proxies and only remove proxies beyond that number",
I:h}}}),f:function(a){this.Zha=a.sticking||y;this.group=a.group||q;this.target=c[a.target]||c.SELF;this.w5a=a.keepCount||0},start:function(a){a=this.target(a).te();sc.iwa.DZa(a,this.group,this.Zha,this.w5a)}});var p={};ig.la.FANCY_AIM=ig.ta.extend({t:new ig.u({attributes:{CBa:{c:"Number",d:"Number of Bounces"},size:{c:"Number",d:"Size of projectile"},time:{c:"Number",d:"Maximum time to aim"}}}),f:function(a){this.CBa=a.bounces||0;this.size=a.size||0;this.time=a.time||q},start:function(a){var b=a.Qd(),
c=ig.qd.Wk(a.b,b.b,w),b=Vec2.vc(0,0);Math.abs(c.y)>Math.abs(c.x)*2?b.x=1:b.y=1;Math.random()<0.5&&Vec2.Lc(b);var c=a.lc(ig.Pa.CENTER,m),d=ig.r.Ie.Il(p);ig.r.trace(d,c.x-this.size/2,c.y-this.size/2,c.z,b.x*256,b.y*256,this.size,this.size,this.size,ig.ca.PROJECTILE,a,g,y);a.$a.WMa=[];a.$a.WMa[0]=(b.x?c.x:c.y)+(b.y||b.x)*Math.round(d.Ne*256);d=ig.r.Ie.Il(p);ig.r.trace(d,c.x-this.size/2,c.y-this.size/2,c.z,-b.x*256,-b.y*256,this.size,this.size,this.size,ig.ca.PROJECTILE,a,g,y);a.$a.WMa[1]=(b.x?c.x:c.y)-
(b.y||b.x)*Math.round(d.Ne*256);a.$a.VH=b;a.ib=a.ib+this.time},ya:function(a){var b=a.$a.VH,c=a.$a.WMa,d=a.Qd(),f=d.tb(w);Vec2.Tm(f,d.b.V,0.05);var d=a.lc(ig.Pa.CENTER,m),i=(this.CBa-1)*Math.abs(c[0]-c[1]),j=this.CBa%2?c[0]:c[1];if(b.y){i=i+(Math.abs(c[0]-d.y)+Math.abs(j-f.y));a.face.y=c[0]-d.y;a.face.x=(f.x-d.x)*Math.abs(a.face.y/i)}else{i=i+(Math.abs(c[0]-d.x)+Math.abs(j-f.x));a.face.x=c[0]-d.x;a.face.y=(f.y-d.y)*Math.abs(a.face.x/i)}return a.ib<=0}});ig.la.WAIT_UNTIL_PLAYER_ACTION=ig.ta.extend({t:new ig.u({attributes:{Pg:{c:"Array",
d:"List of player actions to react to",Xt:{c:"String",U:sc.hl}},ir:{c:"String",d:"Attrib name to store action value to if successfully found",I:h},target:{c:"String",d:"Where is player found?",U:c,I:h},Fa:{c:"Number",d:"Maximum time to wait",I:h}}}),f:function(a){this.Pg=a.actions||[];this.ir=a.attrib||q;this.target=c[a.target]||c.SELF;this.Fa=a.maxTime||0},start:function(a){this.ir&&a.setAttribute(this.ir,q);a.ib=a.ib+this.Fa},ya:function(a){var b=this.target(a);if((b=(b=b&&b.te())&&b.$D&&b.$D.ANa)&&
this.Pg.indexOf(b)!=-1){this.ir&&a.setAttribute(this.ir,b);return h}return this.Fa&&a.ib<=0}});ig.la.SHARE_PROXY_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{group:{c:"String",d:"If set, only share target with proxies of that group"}}}),f:function(a){this.group=a.group||q},start:function(a){for(var b=a.te().XA,c=b.length;c--;){var d=b[c];if(d instanceof sc.ww&&!(this.group&&d.group!=this.group))d.Sq=a.Sq}}});ig.la.WAIT_UNTIL_PROXIES_DONE=ig.ta.extend({t:new ig.u({attributes:{group:{c:"String",
d:"If defined: only consider proxies with that label",I:h}}}),f:function(a){this.group=a.group},ya:function(a){for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof sc.ww&&!(this.group&&a[b].group!=this.group))return y;return h}});ig.la.WAIT_UNTIL_COMBAT_TRUE=ig.ta.extend({t:new ig.u({attributes:{Bf:{c:"CombatConditions",d:"Combat conditions. Will wait until evaluates to true."},Fa:{c:"Number",d:"Maximum time to wait",I:h}}}),f:function(a){this.Bf=new sc.OE(a.conditions);this.Fa=a.maxTime||0},start:function(a){a.ib=
a.ib+this.Fa},ya:function(a){return this.Bf.Nb(a,Math.random())?h:this.Fa&&a.ib<=0}});ig.la.WAIT_UNTIL_TRAP_OVER=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:J(),ya:function(a){a=a.Qd();return!a||!a.Re||!a.Re.HY?h:y}});ig.la.WAIT_UNTIL_TARGET_DEFEATED=ig.ta.extend({t:new ig.u({attributes:{Fa:{c:"Number",d:"If > 0 Maximum time to wait"}}}),f:function(a){this.Fa=a.maxTime},start:function(a){a.ib=a.ib+this.Fa},ya:function(a){var b=a.Qd();return!b||!b.Wf||b.Wf()?h:this.Fa&&a.ib<=0}});ig.la.SPAWN_BURSTS=
ig.ta.extend({offset:{x:0,y:0,z:0},dir:q,vGa:y,iX:q,RX:0,t:new ig.u({attributes:{Cn:{c:"AttackInfo",d:"Attack Info of circle attack"},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},dir:{c:"Vec2",d:"Static direction to move burst to",I:h},RX:{c:"Number",d:"Rotation to original dir. 1 = one full circle rotation"},vGa:{c:"Boolean",d:"If true, spawn bursts along entity face. Otherwise directly to target"},ne:{c:"Effect",d:"Effect to play on each burst"},nT:{c:"Number",
d:"Movement speed of bursts",ab:40},uua:{c:"Number",d:"Number of bursts to spawn",ab:3},PK:{c:"Number",d:"Seconds to wait between bursts",ab:0.3},PCa:{c:"Number",d:"Damage delay after burst effects stars in seconds",ab:0},Se:{c:"Number",d:"Radius of burst damage",ab:32},kf:{c:"Number",d:"Z Range of burst damage",ab:24},j0:{c:"Number",d:"To what degree bursts steer towards player.",ab:0.2},UW:{c:"Number",d:"Time to 'fade In' steering degree at the beginning",I:h},RBa:{c:"Boolean",d:"If true: cancel spawning when hitting a wall"}}}),
f:function(a){this.offset=a.offset||this.offset;this.dir=a.dir||q;this.RX=(a.dirRotate||0)*Math.PI*2;this.vGa=a.inFaceDir||y;this.iX=a;this.iX.effect=new ig.Bi(a.effect)},Ka:function(){this.iX.effect.Ka()},ya:function(a){var b=Vec3.create();a.tb(b);b.z=a.b.g.z;Vec3.add(b,this.offset);var c,d=a.Qd();if(this.dir)c=Vec2.create(this.dir);else if(this.vGa||!d)c=Vec2.create(a.face);else{c=Vec2.create();d.tb(c);Vec2.sub(c,b)}this.RX&&Vec2.rotate(c,this.RX);this.iX.combatant=a;this.iX.vel=c;ig.r.Pe(ig.lfb,
b.x,b.y,b.z,this.iX);this.iX.combatant=q;return h}});var r={STUN_LOCKED:1,PREVIOUSLY_HIT:2,TARGET:3};ig.la.DIRECT_HIT=ig.ta.extend({d4:q,ne:q,t:new ig.u({attributes:{D7:{c:"String",d:"What entities to hit",U:r},Cn:{c:"AttackInfo",d:"Attack Info of circle attack"},ne:{c:"Effect",d:"Effect to play on each burst",I:h},kGa:{c:"String",d:"Direct Hit direction",U:sc.mwa},align:{c:"String",d:"Alignment of force relative to entity",U:ig.Pa},Hf:{c:"Number",d:"Number of hits",ab:1},jGa:{c:"Number",d:"Delay in seconds between hits",
lRb:0.1}}}),f:function(a){this.D7=r[a.selectType]||r.STUN_LOCKED;this.d4=a;if(a.effect)this.ne=new ig.Bi(a.effect)},Ka:function(){this.ne&&this.ne.Ka()},start:function(a){if(this.D7==r.TARGET){var b=a.Qd();if(b){var c=new sc.rQa(a,b,this.d4,this.ne);sc.Ta.js(c);this.d4.hitCount>1&&a.Hj(c)}}else for(var b=a.Re.uD,d=b.length;d--;){c=b[d];if(!(this.D7==r.STUN_LOCKED&&(!c.W||!c.W.FDb(a)))){c=new sc.rQa(a,c,this.d4,this.ne);sc.Ta.js(c);this.d4.hitCount>1&&a.Hj(c)}}}});ig.la.CLEAR_STUN_LOCKED=ig.ta.extend({d4:q,
ne:q,t:new ig.u({attributes:{}}),f:J(),Ka:J(),start:function(b){b.rX(a)}});ig.la.REGEN_HP=ig.ta.extend({t:new ig.u({attributes:{value:{c:"Number",d:"Relative amount of HP to regen. 1= FULL HP"},target:{c:"String",d:"What entity will get the buff",U:c,I:h},O3a:{c:"Boolean",d:"if true: do not show healing numbers"}}}),f:function(a){this.value={value:a.value};this.target=c[a.target]||c.SELF;this.O3a=a.hideNumbers},start:function(a){(a=this.target(a))&&a.ex(this.value,this.O3a)}});ig.la.HEAL_STATUS=ig.ta.extend({t:new ig.u({attributes:{}}),
f:J(),start:function(a){a.W&&a.W.$Fa()}});ig.la.CLEAR_STATUS_BAR=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.um&&a.um.Ovb()}});ig.la.SET_ENEMY_STATUS_VISIBILITY=ig.ta.extend({t:new ig.u({attributes:{Lh:{c:"String",d:"If defined, set whether HP bar visible or not",I:h,U:sc.tL},AF:{c:"Boolean",d:"If defined, set whether status in general is visible or not",I:h}}}),f:function(a){this.Lh=a.hpBar?sc.tL[a.hpBar]:g;this.AF=a.analyzable},start:function(a){if(this.Lh!=g)a.visibility.Lh=
this.Lh;if(this.AF!=g)a.visibility.AF=this.AF}});ig.la.SET_HP_CRITICAL=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.W.IKb()}});var u={MAX_HP:function(a,b){return a.W.Td("hp")*b},ATTACK:function(a,b){var c=a.W.Td("attack",h)/a.W.Td("attack",y);return a.W.Td("attack")*b*c}};ig.la.REDUCE_HP=ig.ta.extend({t:new ig.u({attributes:{OYa:{c:"String",d:"What hp reduction is based on",U:u},yh:{c:"Number",d:"Factor to scale damage with",ab:0.1},R3a:{c:"Number",d:"Will determine size of damage number",
ab:0.5}}}),f:function(a){this.OYa=u[a.basedOn]||u.MAX_HP;this.yh=a.factor||0;this.R3a=a.hitNumberFactor||0},start:function(a){var b=Math.round(this.OYa(a,this.yh));b&&a.mea(b,this.R3a)}});ig.la.SET_HIT_IGNORE=ig.ta.extend({t:new ig.u({attributes:{value:{c:"Boolean",d:"If true: ignore hits"}}}),f:function(a){this.value=a.value||y},start:function(a){a.Vda=this.value}});ig.la.WAIT_UNTIL_GUARDED=ig.ta.extend({t:new ig.u({attributes:{Fa:{c:"Number",d:"Maximum time to wait"},A6a:{c:"Boolean",d:"Only continue when melee attack was guarded"}}}),
f:function(a){this.Fa=a.maxTime;this.A6a=a.meleeOnly||y},start:function(a){a.ib=a.ib+this.Fa},ya:function(a){a=a.te();if(a.Ah)if(ig.input.qb==ig.Yb.xm)a.X.Xh.hda(a.face);else{sc.ba.Nh(w,1);Vec2.Ig(w)||Vec2.assign(a.face,w)}a.Re.HY=a.Re.HY+ig.i.ja;if(a.ib<=0||a.Re.Fda>0&&(!this.A6a||a.s3a())){a.Re.HY=0;return h}return y}});ig.la.ABSORB_BLOCKED_DAMAGE=ig.ta.extend({t:new ig.u({attributes:{yh:{c:"Number",d:"Factor with which to absorb blocked damage"}}}),f:function(a){this.yh=a.factor},start:function(a){var b=
{jM:h,value:Math.round(a.Re.e3*this.yh)};a.ex(b)}});ig.la.ABSORB_DAMAGE=ig.ta.extend({t:new ig.u({attributes:{yh:{c:"Number",d:"Factor with which to absorb blocked damage"}}}),f:function(a){this.yh=a.factor},start:function(a){var b=a.getAttribute("damage");if(b){var a=a.te(),c=a.W.Td("attack",h)/a.W.Td("attack",y),b={jM:h,value:Math.round(b*this.yh*c)};a.ex(b)}}});ig.la.ABSORB_DAMAGE_VIA_SUM=ig.ta.extend({t:new ig.u({attributes:{yh:{c:"Number",d:"Factor with which to absorb dealed damage. Will always take average damage of all hit combatants"},
CIa:{c:"Number",d:"Add given factor to damage for each additional hit entity"}}}),f:function(a){this.yh=a.factor;this.CIa=a.multiEnemyScale||0},start:function(a){var b=a.Re.Rna;if(b){var c=a.te(),d=c.W.Td("attack",h)/c.W.Td("attack",y),b=b*d/a.Re.uD.length;this.CIa&&(b=b*(1+this.CIa*(a.Re.uD.length-1)));a={jM:h,value:Math.round(b*this.yh)};c.ex(a)}}});ig.la.CONSUME_SP=ig.ta.extend({t:new ig.u({attributes:{Lf:{c:"Integer",d:"Number of SP to consume"}}}),f:function(a){this.Lf=a.sp},start:function(a){a.W.cna(this.Lf)}});
ig.la.SET_FREE_LINE_CMD=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"Number",d:"Time in seconds for free line command to preserve"}}}),f:function(a){this.time=a.time},ya:function(a){sc.Ta.Utb(a,this.time);return h}});ig.la.ADD_SHIELD=ig.ta.extend({name:q,Tn:q,mv:y,oH:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of Shield. If used, shield will remain after action end and can be disabled separately",I:h},Tn:{c:"Shield",d:"The Shield to activate"},mv:{c:"Boolean",d:"If true, keep shield even after action is finished/interrupted."},
oH:{c:"Number",d:"Amount of time for perfect guard",I:h},target:{c:"String",d:"What entity will get the buff",U:c,I:h}}}),f:function(a){this.name=a.name;var b=a.shield;this.Tn=new sc.mV[b.type](b.settings,this.name);this.mv=a.actionDetached||y;this.oH=a.perfectGuardTime||q;this.target=c[a.target]||c.SELF},Ka:function(){this.Tn&&this.Tn.Ka()},ya:function(a){var b=this.target(a).te().aBa(this.Tn,this.oH);this.mv||a.Hj(b);return h}});ig.la.REMOVE_SHIELD=ig.ta.extend({name:q,t:new ig.u({attributes:{name:{c:"String",
d:"Name of Shield to be removed"},target:{c:"String",d:"What entity will get the buff",U:c,I:h}}}),f:function(a){this.name=a.name;this.target=c[a.target]||c.SELF},ya:function(a){this.target(a).te().bJb(this.name);return h}});ig.la.SPAWN_ASSAULT=ig.ta.extend({t:new ig.u({attributes:{NYa:{c:"Number",d:"Base Strength Factor. Should match damageFactor of attack"},element:{c:"String",d:"Element of Assault projectile",U:sc.ha,I:h}}}),f:function(a){this.NYa=a.baseStrength||0;if(a.element)this.element=sc.ha[a.element]},
ya:function(a){sc.Seb.Vn(a,this.element===g?sc.Ta.bpa(a):this.element,this.NYa);return h}});ig.la.SHOW_COMBAT_MSG=ig.ta.extend({t:new ig.u({attributes:{pT:{c:"String",d:"What kind of combat message",U:sc.f9}}}),f:function(a){this.pT=sc.f9[a.msgType]||sc.f9.STUN_CANCEL},start:function(a){sc.Ta.LMa(a,this.pT)}});ig.la.ADD_TARGET_STUN_LOCK=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){var b=a.Qd();b&&(b.W&&b.su())&&b.W.Tbb(a);return h}});ig.la.THROW_ENERGY_DROPS=ig.ta.extend({target:q,
Ip:q,Rpa:q,t:new ig.u({attributes:{Ip:{c:"String",d:"Type of Drop",U:sc.m9},Rpa:{c:"Number",d:"Amount that is healed. 1=full healing"},align:{c:"String",d:"Alignment of throw origin",U:ig.Pa},target:{c:"Entity",d:"Target entity to throw drops at",I:h},t8a:{c:"Boolean",d:"If true also spawn heal drops for all party members"}}}),f:function(a){this.Ip=a.dropType;this.Rpa=a.healValue||0.1;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.target=a.target;this.t8a=a.partyToo},ya:function(a){var b=q;this.target&&
(b=ig.Ja.rd(this.target));sc.qL.PO(a,this.align,this.Ip,this.Rpa,b);if(this.t8a)for(b=sc.sa.He.length;b--;){var c=sc.sa.Xk(b);c&&(c.q&&c.q.cZ())&&sc.qL.PO(a,this.align,this.Ip,this.Rpa,c)}return h}});ig.la.THROW_GENERIC_DROP=ig.ta.extend({target:q,Ip:q,mra:q,z6a:q,hL:q,DM:q,lO:q,t:new ig.u({attributes:{Ip:{c:"String",d:"Type of Drop",U:sc.m9},align:{c:"String",d:"Alignment of throw origin",U:ig.Pa},mra:{c:"VarName",d:"min number of coins to drops at a time"},z6a:{c:"VarName",d:"max number of coins to drops at a time"},
hL:{c:"VarName",d:"Optional var to increase by the random number",I:h},target:{c:"Entity",d:"Target entity to throw drops at",I:h},DM:{c:"EffectSelect",d:"Circle Effect to be used when drops is picked up.",grb:"drops"},lO:{c:"EffectSelect",d:"Circle Effect to be used when drops is picked up.",grb:"drops"}}}),f:function(a){this.Ip=a.dropType;this.mra=a.minVal||1;this.z6a=a.maxVal||1;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.target=a.target;this.hL=a.varIncrease;this.DM=a.circleEffect;this.lO=a.pickupEffect},
ya:function(a){var b=q;this.target&&(b=ig.Ja.rd(this.target));var c={align:this.align,type:this.Ip,min:ig.ma.get(this.mra)||1,max:ig.ma.get(this.mra)||1,hL:this.hL,DM:this.DM,lO:this.lO};sc.qL.IMb(a,b,c);return h}});ig.la.NAVIGATE_TO_SPAWN_POINT=ig.ta.extend({Fa:0,Wy:0,Ph:y,t:new ig.u({attributes:{Fa:{c:"Number",d:"Maxium time spent on navigation"},Wy:{c:"Number",d:"The maximum amount of distance to the target"},Ph:{c:"Boolean",d:"Reach the target precisely, slowing down accordingly"}}}),f:function(a){this.Fa=
a.maxTime;this.Wy=a.maxDistance||0;this.Ph=a.precise||y},start:function(a){a.ib=a.ib+this.Fa;var b=a.kNa;if(b){var c=ig.navigation.nN(a);c.E8(b,this.Wy,this.Ph);a.$a.path=c}else a.$a.path=q},ya:function(a){if(!a.$a.path)return h;if(this.Fa&&a.ib<=0&&!a.Jg){a.$a.path.nea();return h}return a.$a.path.nx()}});var w=Vec2.create(),z={FACE_REVERSE:1,FACE:2};ig.la.DO_DAMAGE_MOVEMENT=ig.ta.extend({iD:q,FBa:y,Jbb:y,Ec:y,t:new ig.u({attributes:{iD:{c:"String",d:"How far entity will fly",U:sc.d9},FBa:{c:"Boolean",
d:"True if movement is for breaking hit."},Jbb:{c:"Boolean",d:"True if movement is for stable hit."},Ec:{c:"Boolean",d:"True if step should wait the matching stun time."},direction:{c:"String",d:"What face direction? (Reverse Face is default)",I:h,U:z}}}),f:function(a){this.iD=a.flyLevel;this.FBa=a.breaking||y;this.Jbb=a.stable||y;this.Ec=a.wait||y;this.direction=z[a.direction]||z.FACE_REVERSE},start:function(a){Vec2.assign(w,a.face);this.direction==z.FACE_REVERSE&&Vec2.Lc(w);var b=a.UX(w,this.iD,
this.FBa,y,0,h);if(this.Ec)a.ib=a.ib+b},ya:function(a){return!this.Ec||a.ib<=0}});ig.la.COMBAT_IF=ig.ta.extend({Bf:q,Mx:y,uf:{},t:new ig.u({attributes:{Bf:{c:"CombatConditions",d:"Combat conditions for if statement"},Mx:{c:"Boolean",d:"With else case.",w2:h}},NF:function(a){switch(a){case "thenStep":return q;case "elseStep":return"else";case "_end":return"endif"}return"???"}}),f:function(a){this.Bf=new sc.OE(a.conditions);this.Mx=a.withElse},eB:function(){return this.Mx?["thenStep","elseStep"]:["thenStep"]},
Lv:function(a){var b=Math.random();return this.Bf.Nb(a,b)?this.uf.thenStep?this.uf.thenStep:this.Ok:this.uf.elseStep?this.uf.elseStep:this.Ok}});var v={set:function(a,b){return b},add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){return a/b},mod:function(a,b){return a%b}};ig.la.CHANGE_COLLAB_VAR=ig.ta.extend({Hd:q,nX:q,value:0,t:new ig.u({attributes:{Hd:{c:"String",d:"Name of Var"},je:{c:"String",d:"Type of modification",U:v},value:{c:"NumberExpression",
d:"Value to modify with"}}}),f:function(a){this.Hd=a.varName;this.nX=v[a.changeType]||v.set;this.value=a.value||0},ya:function(a){if(a=a.El){var b=a.CBb(this.Hd),c=ig.Ja.eh(this.value),b=this.nX(b,c*1);a.RLb(this.Hd,b);return h}}});ig.la.SET_COLLAB_BREAK_TYPE=ig.ta.extend({t:new ig.u({attributes:{breakType:{c:"String",d:"Who needs to be interrupted to cancel collaboration",U:sc.o1}}}),f:function(a){this.xv=sc.o1[a.breakType]},start:function(a){if(a.El)a.El.xv=this.xv}});var x={TARGET_CIRCLE:function(a,
b,c,d,f,i){for(var j=c[0].b.size,c=c.length,k=-i/2,i=i/(i==1?c:c-1);c--;){var l=Vec3.create();ig.navigation.Uoa(l,d,j,b,q,f,0.25,k,ig.y1.FRONT,y);k=k+i;a.push(l)}},WHALE_TOP:function(a,b,c,d,f){d=Vec3.create();b.lc(ig.Pa.BOTTOM,d);d.x=d.x+(b.face.x<0?-1:1)*f;for(b=c.length;b--;)a.push(d)}},A={SELF:aa(),TARGET:function(a){return a.Qd()},COLLAB_ENTITY:function(a,b){return a.El?a.El.m2a(b):q}};ig.la.ASSIGN_COLLAB_POINTS=ig.ta.extend({t:new ig.u({attributes:{ZB:{c:"String",d:"Target from which points will be set relatively",
U:A},ycb:{c:"String",d:"Additional target label. (only required for COLLAB_ENTITY type)"},mZ:{c:"Array",d:"List of labels to filter collaborators",Xt:{c:"String"},I:h},E8a:{c:"String",d:"Pattern of points",U:x},eb:{c:"Number",d:"Distance value used to determine points",ab:64},zZa:{c:"Number",d:"Circular angle used to determine points"}}}),f:function(a){this.ZB=A[a.targetType]||A.TARGET;this.ycb=a.targetLabel;this.mZ=a.labelFilter||q;this.E8a=x[a.pointPattern]||x.TARGET_CIRCLE;this.eb=a.distance||
0;this.zZa=a.circularAngle||0},start:function(a){var b=a.El,c=this.ZB(a,this.ycb);if(b&&c){a=b.sAb(this.mZ);if(a.length){var d=[],b=b.z1a(m,ig.Pa.BOTTOM,this.mZ);this.E8a(d,c,a,b,this.eb,this.zZa);for(b=a.length;b--;){for(var c=a[b],f=c.tb(l),i=d.length,j=-1,k=-1;i--;){var n=Vec2.eb(d[i],f);if(j==-1||n<j){j=n;k=i}}c.Dm.Gq=d[k];d.splice(k,1)}}}}});ig.jC.PROXY_OWNER=function(a){return a.te&&a.te()};ig.jC.PROXY_SOURCE=function(a){return a.Pq};ig.jC.TARGET=function(a){return a.Qd()};var F={ENTITY_NAME:function(a){return a.name}};
ig.la.SET_ATTRIB_TARGET_VALUE=ig.ta.extend({t:new ig.u({attributes:{Nw:{c:"String",d:"Name of Var"},valueType:{c:"String",d:"Kind of value to extract from target",U:F}}}),f:function(a){this.Nw=a.attribName;this.valueType=F[a.ENTITY_NAME]||F.ENTITY_NAME},start:function(a){var b=a.Qd();b&&a.setAttribute(this.Nw,this.valueType(b))}});ig.la.SET_COLLAB_ENTITY=ig.ta.extend({QDa:q,PDa:q,mZ:q,t:new ig.u({attributes:{QDa:{c:"String",d:"What kind of entity is set",U:A},PDa:{c:"String",d:"Additional entity label. (only required for COLLAB_ENTITY type)"},
mZ:{c:"CollabLabelFilter",d:"Labels to filter which entities in collaboration will have entity assigned",I:h}}}),f:function(a){this.QDa=A[a.varName]||A.SELF;this.PDa=a.entityLabel;this.mZ=a.labelFilter},start:function(a){if(a.El){var b=this.QDa(a,this.PDa);a.El.kLb(b,this.mZ)}}});ig.la.STORE_IN_COLLAB_PARTNER=ig.ta.extend({label:q,t:new ig.u({attributes:{label:{c:"String",d:"Label of collab partner"}}}),f:function(a){this.label=a.label},start:function(a){if(a.El){a.El.m2a(this.label).xNb(a);a.Sn(q);
a.hide()}}});ig.la.CONNECT_HP_TO_STORED_ENEMIES=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.ZZa(a.Jua)}});ig.la.CONNECT_HP_TO_TYPES_ENEMIES=ig.qa.extend({target:0,t:new ig.u({attributes:{hc:{c:"String",d:"Type of enemy",U:"enemies"}}}),f:function(a){this.hc=a.enemyType},start:function(a){for(var b=ig.r.ln,c=b.length,d=[];c--;){var f=b[c];f instanceof ig.wa.Enemy&&f.Zm==this.hc&&d.push(f)}a.ZZa(d)}});ig.la.UPDATE_RESPAWN_POINT=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),
start:function(a){Vec3.assign(a.af.g,a.b.g)}});ig.la.SEND_ENEMY_MSG=ig.ta.extend({t:new ig.u({attributes:{key:{c:"String",d:"Key of Enemy Message that other enemies may react to via ENEMY_EVENT"}}}),f:function(a){this.key=a.key},ya:function(a){sc.Ta.iKb(a,this.key);return h}});ig.la.RESET_TRACKER=ig.ta.extend({dC:q,Hoa:g,t:new ig.u({attributes:{dC:{c:"TrackerRef",d:"Tracker to reset"},Hoa:{c:"Number",d:"Force reset tracker to a certain percentage of target (0-1)",I:h}}}),f:function(a){this.dC=a.tracker;
this.Hoa=a.forceValue},start:function(a){var b=a.XH[this.dC];b&&b.reset(a,this.Hoa)}});ig.la.RESET_FREQUENCY=ig.ta.extend({dC:q,Hoa:g,t:new ig.u({attributes:{vs:{c:"String",d:"Frequency to reset (as if the enemy would have executed an attack of that frequency)",U:sc.U8}}}),f:function(a){this.vs=a.frequency},start:function(a){sc.Ta.kcb(a,this.vs,h)}});ig.la.RELEASE_STORED_ENEMIES=ig.ta.extend({align:q,eb:0,Ij:0,Sj:0,AC:q,gL:0,t:new ig.u({attributes:{align:{c:"String",d:"Aligned pos from where to start entity",
U:ig.Pa},eb:{c:"Number",d:"Distance towards storing entity when spawned"},Ij:{c:"Number",d:"Central angle of range. 1 = full circle"},Sj:{c:"Number",d:"Angle from which to start. Default is - centralAngle / 2",I:h},gL:{c:"Number",d:"Additional randomness around original direction"}}}),f:function(a){this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.eb=a.distance||0;this.Ij=a.centralAngle;this.Sj=a.startAngle;if(this.Sj==g)this.Sj=-this.Ij/2;this.gL=a.uniformRandom},start:function(a){var b=a.Jua,c=b.length,
f=c;Vec2.assign(w,a.face);Vec2.rotate(w,this.Sj*Math.PI*2);var c=this.Ij/(this.Ij==1?c:c-1)*Math.PI*2,i=a.lc(this.align,d);for(this.eb&&Vec2.length(w,this.eb);f--;){var j=b[f],k=(Math.random()-0.5)*this.gL*c;k&&Vec2.rotate(w,k);Vec2.assign(j.face,w);Vec3.assign(m,i);this.eb&&Vec2.add(m,w);j.l(m.x-j.b.size.x/2,m.y-j.b.size.y/2,m.z);j.Sn(a.target);j.QJa();k&&Vec2.rotate(w,-k);Vec2.rotate(w,c)}b.length=0}});ig.la.REASSIGN_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.hc&&
a.hc.DK(a,y,h)}});ig.la.SPAWN_ENEMIES=ig.ta.extend({Dy:q,of:q,hc:q,t:new ig.u({attributes:{of:{c:"EnemyType",d:"Enemy information",xc:h},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},dir:{c:"Vec2",d:"Direction to go to",wC:h,I:h},Ku:{c:"NumberVary",d:"If defined: push away enemies with given velocity",I:h},MKa:{c:"NumberVary",d:"If defined: push away enemies with given z velocity",
I:h},Ij:{c:"Number",d:"Central angle of range. 1 = full circle"},Sj:{c:"Number",d:"Angle from which to start. Default is - centralAngle / 2",I:h},OQ:{c:"Number",d:"Randomly vary each angle with the provided range"},Qq:{c:"Number",d:"Start Distance of ball in throw direction",I:h},g8:{c:"String",d:"If not NONE: consider environment collision before adding start dist. CLOSER = move closer, DROP = Don't spawn if colliding",U:sc.P1},random:{c:"Boolean",d:"Spawn each Proxy in random direction within range"},
count:{c:"NumberExpression",d:"The number of proxies thrown"},duration:{c:"Number",d:"Time it takes to throw proxies"},my:{c:"Boolean",d:"If true throw proxies clockwise, otherwise counter clockwise"},us:{c:"Integer",d:"If FACE COUNT is provided: swap clockWise if face direction is towards left"},yT:{c:"Vec2",d:"offset Area around position to randomly spawn entity at",I:h},Hma:{c:"Boolean",d:"Make offsetArea circular, not rectangular"},wia:{c:"Number",d:"To what extend the final dir should be uniform. 1=all the same dir, 0= all individual, 0.5=between the two"},
delay:{c:"Number",d:"Time delay for first shot"},repeat:{c:"Boolean",d:"If true, repeat proxy spawning until ended by force (action end or call STOP_REPEATING_FORCE)"},XRb:{c:"ProxyRef",d:"If defined: attach proxy to enemies",I:h}}}),f:function(a){this.Dy=ig.copy(a);if(a.enemyInfo)this.of=new sc.AP(a.enemyInfo);this.Dy.enemyType=this.of.hc;a.attachProxy&&(this.Dy.proxySrc=sc.dq.bU(a.attachProxy))},Ka:function(){this.of&&this.of.Ka();this.Dy.proxySrc&&sc.dq.Oga(this.Dy.proxySrc)},start:function(a){var b=
new sc.dhb(a,this.Dy);sc.Ta.js(b);a.Hj(b)}});ig.la.SPAWN_ENEMY_CLOSEBY=ig.ta.extend({Dy:q,of:q,hc:q,t:new ig.u({attributes:{of:{c:"EnemyType",d:"Enemy information",xc:h},Se:{c:"Number",d:"Radius from position"},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn and despawn",xc:h,I:h}}}),f:function(a){if(a.enemyInfo)this.of=new sc.AP(a.enemyInfo);this.Se=a.radius||0;this.Zg=a.spawnCondition||q},Ka:function(){this.of&&this.of.Ka()},start:function(a){var b=Vec3.create();ig.navigation.Uoa(b,a.lc(ig.Pa.BOTTOM,
d),this.of.hc.size,a,q,this.Se,1,0,ig.y1.BEHIND_FACE,y);ig.r.Pe(ig.wa.Enemy,b.x-this.of.hc.size.x/2,b.y-this.of.hc.size.y/2,b.z,{enemyInfo:this.of.pD(),ownerEnemy:a.te(),spawnCondition:this.Zg},h)}});ig.la.KILL_ENEMIES=ig.ta.extend({hc:q,HZ:y,t:new ig.u({attributes:{hc:{c:"String",d:"If provided: only remove enemy of this type",I:h,U:"enemies"},HZ:{c:"Boolean",d:"If true, do not rumble screen on enemy kill",I:h,ab:"true"}}}),f:function(a){this.hc=a.enemyType;this.HZ=a.noRumble},start:function(){sc.Ta.v9a(this.hc,
q,this.HZ,h)}});ig.la.SELF_DESTRUCT=ig.ta.extend({Q:q,t:new ig.u({attributes:{fWb:{c:"Boolean",d:"No exp, credit, items etc."}}}),f:function(a){this.qFb=a.noReward||y},start:function(a){a.gKb(this.qFb)}});var B={PLAYER:function(){return ig.r.cb},COLLAB_ENTITY:function(a){return a.Dm&&a.Dm.Q},CLOSEST_ENEMY:function(a){for(var b=a.lc(ig.Pa.BOTTOM,m),c=Math.PI*0.5,b=ig.r.lN(b,ig.i.width/2,1,32,a.face,-c/2,c/2,a),c=q,d=0,f=b.length;f--;){var i=b[f];if(i instanceof ig.wa.Combatant&&i.sa!=a.sa){var j=ig.qd.Wk(a.b,
i.b,w),k=Vec2.Qb(a.face,j),j=Vec2.length(j)+k*1E3;if(!c||j<d){c=i;d=j}}}return c},GUARDED_ATTACKER:function(a){a=a.Re.Fpa;return!a||a.Nn?q:a.tq()},FIRST_HIT:function(a){return a.Re.uD[0]},PROXY_OWNER:function(a){return a.te()},PROXY_SRC:function(a){return a.Pq},ACTION_PROXY:function(a,c){return b(a.kl,c)},PROXY_OWNER_ACTION_PROXY:function(a,c){return b(a.te().kl,c)},PROXY_SRC_ACTION_PROXY:function(a,c){return b(a.Pq.kl,c)},NAMED_ENTITY:function(a,b){return ig.r.Is[b]},ATTRIB_ENTITY:function(a,b){return ig.Ja.rd(a.getAttribute(b))},
THREAT:function(a){return a.v0},ENTITY_VIA_ID:function(a,b){return ig.r.entities[b]},PART_TARGET_ROOT:function(a){a=a.Qd();return a instanceof sc.jwa?a.te():a}};ig.la.SET_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{Fea:{c:"String",d:"Kind of temp target",U:B},key:{c:"StringExpression",d:"Additional String key to fetch named entities etc.",I:h}}}),f:function(a){this.Fea=B[a.kind]||B.PLAYER;this.key=a.key},start:function(a){var b=ig.Ja.eh(this.key),b=this.Fea(a,b);if(a instanceof sc.Z8)a.Sq=b}});
ig.la.SET_ATTRIB_TARGET_ENTITY=ig.ta.extend({t:new ig.u({attributes:{ir:{c:"String",d:"Attrib name to store target entity in (will use temp target if defined)"}}}),f:function(a){this.ir=a.attrib||q},start:function(a){var b=a.Qd();a.setAttribute(this.ir,b)}});var C={IN_VIEW:{Qb:0.25,Se:350,oyb:h},CLOSE_RANGE:{Qb:1,Se:200}},K={NONE:0,PREFER_NON_HIT:1,ONLY_NON_HIT:2};ig.la.SET_CLOSE_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{iE:{c:"String",d:"How to search close target",U:C},eb:{c:"Number",d:"If defined: look for entities up to this distance. Otherwise use default",
I:h},U3a:{c:"Boolean",d:"If true: ignore current target (will select temp target if available)"},CKa:{c:"String",d:"How to handle enemies that have been previously hit",U:K}}}),f:function(a){this.iE=C[a.searchType]||C.IN_VIEW;this.eb=a.distance||0;this.U3a=a.ignoreCurrentTarget||y;this.CKa=K[a.prevHitBehavior]||K.NONE},start:function(a){for(var b=a.Qd(),c=a.lc(ig.Pa.BOTTOM,m),d=this.iE.Qb*Math.PI*2,c=ig.r.lN(c,this.eb||this.iE.Se,1,32,a.face,-d/2,d/2,a),d=q,f=0,i=c.length;i--;){var j=c[i];if(!(this.U3a&&
j==b)){if(j instanceof sc.jwa)j=j.XD;if(j instanceof ig.wa.Combatant&&j.sa!=a.sa&&(j.sa!=sc.pd.ENEMY||j.target)){var k=ig.qd.Wk(a.b,j.b,w),l=Vec2.length(k);if(this.iE.oyb){k=Vec2.Qb(a.face,k);l=l+k*1E3}if(a.Re.uD.indexOf(j)!=-1)if(this.CKa==K.PREFER_NON_HIT)l=l+1E4;else if(this.CKa==K.ONLY_NON_HIT)continue;if(!d||l<f){d=j;f=l}}}}a.Sq=d}});ig.la.SET_OWNER_REPLACE_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){var b=a.te();b!=a&&b.yMa(a)}});ig.la.SET_POI_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{rH:{c:"PoiFilter",
d:"Kind of POI searched. If not defined, use last searched PoI from Combat Condition",I:h},eb:{c:"Number",d:"Maximum distance to POI. Only used if poiFilter is defined."}}}),f:function(a){this.rH=sc.l1.CGa(a.poiFilter);this.eb=a.distance},start:function(a){var b;b=this.rH?sc.l1.REa(this.rH,a,this.eb):a.P5a;a.Sq=b}});sc.vSa={PREV_ACTION_PROXY:function(a,b,c){b=b.kl;a=b.indexOf(a);if(a==-1)return q;for(;a--;)if(b[a]instanceof sc.ww&&(!c||c==b[a]))return b[a];return q},NEXT_ACTION_PROXY:function(a,b,
c){b=b.kl;a=b.indexOf(a);if(a==-1)return q;for(;++a<b.length;)if(b[a]instanceof sc.ww&&(!c||c==b[a]))return b[a];return q},PROXY_SOURCE:function(a){return a.Pq}};ig.la.SET_PROXY_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{D7:{c:"String",d:"What kind of proxy to select",U:sc.vSa},group:{c:"String",d:"Optional group filter for proxy",I:h}}}),f:function(a){this.D7=sc.vSa[a.selectType];this.group=a.group},start:function(a){var b=this.D7(a,a.te(),this.group);a.Sq=b}});ig.la.REDUCE_PROXY_HP=ig.ta.extend({t:new ig.u({attributes:{me:{c:"Number",
d:"Number of HP to reduce"}}}),f:function(a){this.me=a.damage||1},start:function(a){a.o_&&a.o_(this.me)}});ig.la.CLEAR_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Sq=q}});ig.la.CLEAR_PREV_HIT=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Re.uD.length=0}});ig.la.CLEAR_TARGET=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.Sn(q)}});ig.la.DETOUR_COMPRESSOR_THREAT=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){var b=
a.v0;if(b&&b instanceof sc.j9){var c=b.b,b=Vec2.length(b.b.V);if(Math.abs(c.V.x)>Math.abs(c.V.y)){c.V.y=c.g.y+c.size.y/2>a.b.g.y+a.b.size.y/2?0.5:-0.5;a.setAttribute("compressorDetourNorth",c.V.y>0);c.V.x=c.V.x>0?1:-1}else{var d=ig.r.cb.b;c.V.x=c.g.x+c.size.x/2>d.g.x+d.size.x/2?1:-1;c.V.y=c.V.y>0?0.6:-0.6;a.setAttribute("compressorDetourNorth",c.V.y>0)}Vec2.length(c.V,b)}}});ig.la.ADD_ACTION_BUFF=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"What entity will get the buff",U:c},pa:{c:"Array",
d:"Stats to be applied.",Xt:{c:"String",U:sc.Qe}},name:{c:"String",d:"Name that can be used to find/modify buff",I:h},Ida:{c:"Boolean",d:"If true: buff is hacked and should be ignored for certain calculations",I:h}}}),f:function(a){this.target=c[a.target]||c.SELF;this.pa=a.stats;this.name=a.name||q;this.Ida=a.hacked||y},start:function(a){var b=this.target(a);if(b&&b.W){var c=new sc.sPa(this.pa,this.name,this.Ida);b.W.Qla(c);a.Hj(c)}}});var I={set:function(a,b){return b},mul:function(a,b){return a*
b}};ig.la.MOD_ACTION_BUFF_PARAM=ig.ta.extend({t:new ig.u({attributes:{target:{c:"String",d:"What entity will get the buff",U:c},name:{c:"String",d:"Name used to search for buff of target entity"},param:{c:"String",d:"What param to modify",U:["hp","attack","defense","focus"]},je:{c:"String",d:"Type of modification",U:I},value:{c:"Number",d:"By what value param is modified"}}}),f:function(a){this.target=c[a.target]||c.SELF;this.name=a.name||q;this.param=a.param;this.value=a.value||0;this.je=I[a.changeType]||
I.set},start:function(a){if((a=this.target(a))&&a.W)for(var b=a.W.ns,c=b.length;c--;){var d=b[c];if(d instanceof sc.sPa&&d.name==this.name){var f=this.je(d.W[this.param],this.value);a.W.ZEb(d,this.param,f)}}}});var G={RECENT_HIT_CENTER:function(a,b){Vec3.Oa(b,0,0,0);for(var c,d,f,i,j=0,k=a.Re.uD,l=k.length;l--;){var n=k[l].lc(ig.Pa.BOTTOM,m),j=j+n.z/k.length;if(c===g){c=d=n.x;f=i=n.y}else{c=Math.min(c,n.x);d=Math.max(d,n.x);f=Math.min(f,n.y);i=Math.max(i,n.y)}}b.z=j;b.x=(c+d)/2;b.y=(f+i)/2}};ig.la.SET_ATTRIB_POS_COMBAT=
ig.ta.extend({t:new ig.u({attributes:{ir:{c:"String",d:"Name of attribute to store position"},ap:{c:"String",d:"How to determine position",U:G}}}),f:function(a){this.ir=a.attrib;this.ap=G[a.posType]},start:function(a){var b=Vec3.create();this.ap(a,b);a.setAttribute(this.ir,b)}})});ig.J=h;
ig.N("game.feature.combat.combat-event-steps").O("impact.base.animation","impact.base.action","impact.base.entity","game.feature.combat.entities.drop","game.feature.combat.entities.combatant","game.feature.combat.entities.combat-proxy","impact.feature.effect.effect-steps").K(function(){ig.s1.PROXY_OWNER=function(a){return a.pb};ig.s1.PROXY_SRC=function(a){return a.Pq};ig.tI.PROXY_OWNER=function(a,b){a.target2=b.pb};ig.tI.PROXY_SRC=function(a,b){a.target2=b.Pq};var a=Vec3.create();ig.oa.SPAWN_ENEMY=
ig.qa.extend({position:q,of:q,hc:q,t0:y,name:q,t:new ig.u({attributes:{position:{c:"Vec3",d:"Point to navigate to",dr:h,kq:h},of:{c:"EnemyType",d:"Enemy information",xc:h},t0:{c:"Boolean",d:"If true, automatically target player"},name:{c:"StringExpression",d:"Name of the enemy to access via action",I:h},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn and despawn",xc:h,I:h}}}),f:function(a){this.position=a.position;if(a.enemyInfo)this.of=new sc.AP(a.enemyInfo);this.t0=a.targetPlayer||y;this.name=
a.name||q;this.Zg=a.spawnCondition||q},Ka:function(){this.of&&this.of.Ka()},start:function(){var b=ig.Ja.vq(this.position,a),b=ig.r.Pe(ig.wa.Enemy,b.x-this.of.hc.size.x/2,b.y-this.of.hc.size.y/2,b.z,{enemyInfo:this.of.pD(),name:ig.Ja.eh(this.name),spawnCondition:this.Zg},h);this.t0&&b.Sn(ig.r.cb,h)}});ig.oa.SPAWN_ENEMY_ON_ENTITY=ig.qa.extend({Q:q,of:q,hc:q,t0:y,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to spawn enemy on"},of:{c:"EnemyType",d:"Enemy information",xc:h},t0:{c:"Boolean",d:"If true, automatically target player"},
name:{c:"StringExpression",d:"Name of the enemy to access via action",I:h},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn and despawn",xc:h,I:h}}}),f:function(a){this.Q=a.entity;if(a.enemyInfo)this.of=new sc.AP(a.enemyInfo);this.t0=a.targetPlayer||y;this.name=a.name||q;this.Zg=a.spawnCondition||q},Ka:function(){this.of&&this.of.Ka()},start:function(a,b){var c=ig.Ja.rd(this.Q,b),j=c.b.g,c=c.b.size,j=ig.r.Pe(ig.wa.Enemy,j.x+c.x/2-this.of.hc.size.x/2,j.y+c.y/2-this.of.hc.size.y/2,j.z,{enemyInfo:this.of.pD(),
name:ig.Ja.eh(this.name),spawnCondition:this.Zg},h);this.t0&&j.Sn(ig.r.cb,h)}});ig.oa.KILL_ENEMIES=ig.qa.extend({hc:q,HZ:y,t:new ig.u({attributes:{hc:{c:"String",d:"If provided: only remove enemy of this type",I:h,U:"enemies"},HZ:{c:"Boolean",d:"If true, do not rumble screen on enemy kill",I:h,ab:"true"}}}),f:function(a){this.hc=a.enemyType;this.HZ=a.noRumble},start:function(){sc.Ta.v9a(this.hc,q,this.HZ,h)}});ig.oa.SET_ENEMY_STATE=ig.qa.extend({Fe:0,cY:0,t:new ig.u({attributes:{Fe:{c:"Actor",d:"Enemy to change",
bh:"Entity"},cY:{c:"EnemyState",d:"State of Enemy to switch to"}}}),f:function(a){this.Fe=a.enemy;this.cY=a.enemyState},start:function(a,b){var c=ig.Ja.rd(this.Fe,b);c&&c.LC(this.cY,h)}});ig.oa.SET_ENEMY_TARGET=ig.qa.extend({Fe:0,target:0,t:new ig.u({attributes:{Fe:{c:"Actor",d:"Enemy to change",bh:"Entity"},target:{c:"Entity",d:"Entity to target",ok:h}}}),f:function(a){this.Fe=a.enemy;this.target=a.target},start:function(a,b){var c=ig.Ja.rd(this.Fe,b),j=ig.Ja.rd(this.target,b);c&&c.Sn(j,h)}});ig.oa.SET_SCREEN_ENEMY_TARGET=
ig.qa.extend({target:0,t:new ig.u({attributes:{target:{c:"Entity",d:"Entity to target",ok:h}}}),f:function(a){this.target=a.target},start:function(a,b){var c=ig.Ja.rd(this.target,b);sc.Ta.yLb(c)}});ig.oa.RESET_SP=ig.qa.extend({target:0,t:new ig.u({attributes:{target:{c:"Entity",d:"Entity to target",ok:h},Lf:{c:"Number",d:"How much SP to reset. 0.5=50%"}}}),f:function(a){this.target=a.target;this.Lf=a.sp},start:function(a,b){var c=ig.Ja.rd(this.target,b);c&&c.W&&c.W.xMa(this.Lf)}});ig.oa.SET_RELATIVE_HP=
ig.qa.extend({t:new ig.u({attributes:{target:{c:"Entity",d:"Entity to set HP of"},value:{c:"Number",d:"Relative amount of HP entity should have. 1= FULL HP"}}}),f:function(a){this.target=a.target;this.value=a.value},start:function(a,b){var c=ig.Ja.rd(this.target,b);c&&c.W&&c.W.tLb(this.value)}});ig.oa.REGEN_HP=ig.qa.extend({t:new ig.u({attributes:{target:{c:"Entity",d:"Entity to target"},value:{c:"Number",d:"Relative amount of HP to regen. 1= FULL HP"},cbb:{c:"Boolean",d:"if true: do not show healing numbers"}}}),
f:function(a){this.value={value:a.value};this.target=a.target;this.cbb=a.showNumbers},start:function(a,b){var c=ig.Ja.rd(this.target,b);c&&c.W&&c.ex(this.value,!this.cbb)}});ig.oa.SET_TYPED_ENEMY_TARGET=ig.qa.extend({target:0,t:new ig.u({attributes:{hc:{c:"String",d:"Type of enemy",U:"enemies"},target:{c:"Entity",d:"Entity to target",ok:h}}}),f:function(a){this.hc=a.enemyType;this.target=a.target},start:function(a,b){for(var c=ig.Ja.rd(this.target,b),j=ig.r.ln,k=j.length;k--;){var l=j[k];l instanceof
ig.wa.Enemy&&l.Zm==this.hc&&l.Sn(c,h)}}});ig.oa.SET_ENEMIES_NAV_TOLERANT=ig.qa.extend({target:0,t:new ig.u({attributes:{}}),f:function(a){this.hc=a.enemyType;this.target=a.target},start:function(a,b){for(var c=ig.Ja.rd(this.target,b),j=ig.r.ln,k=j.length;k--;){var l=j[k];l instanceof ig.wa.Enemy&&l.Zm==this.hc&&l.Sn(c,h)}}});ig.oa.SET_FINAL_DRAMATIC_EFFECT=ig.qa.extend({zDa:q,t:new ig.u({attributes:{zDa:{c:"String",d:"Type of dramatic effect",U:sc.QE,ok:h}}}),f:function(a){this.zDa=sc.QE[a.effectType]||
q},start:function(){sc.Ta.QKb(this.zDa)}});ig.oa.SET_COMBAT_SPEED=ig.qa.extend({speed:0,t:new ig.u({attributes:{speed:{c:"Number",d:"Speed of combat, will scale frequency of enemy attacks",ab:1}}}),f:function(a){this.speed=a.speed||0},start:function(){sc.Ta.B$a(this.speed)}});var b=Vec2.create();ig.oa.MASS_REPLACE_ENTITIES_WITH_ENEMY=ig.qa.extend({$Ka:q,HMb:q,hc:q,target:q,t:new ig.u({attributes:{$Ka:{c:"String",d:"Regular Expression used on entityName to find entities"},of:{c:"EnemyType",d:"Enemy type to swap with entities",
xc:h},target:{c:"Entity",d:"Set enemy target when spawned",I:h}}}),f:function(a){this.$Ka=RegExp(a.regExp);this.of=new sc.AP(a.enemyInfo);this.target=a.target},Ka:function(){this.of&&this.of.Ka()},start:function(a,c){for(var i=this.target&&ig.Ja.rd(this.target,c),j=ig.r.ln,k=j.length;k--;){var l=j[k];if(l&&l.name&&this.$Ka.test(l.name)){var m={enemyInfo:this.of.pD()},m=ig.r.Pe("Enemy",l.b.g.x,l.b.g.y,l.b.g.z,m),n=l.tb(b);m.l(n.x-m.b.size.x/2,n.y-m.b.size.y/2,m.b.g.z);l.face&&Vec2.assign(m.face,l.face);
l.ze();m.Bd(h);i&&m.Sn(i,h)}}}});ig.oa.SWAP_ENTITY_WITH_ENEMY=ig.qa.extend({Q:q,HMb:q,hc:q,Yv:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to swap with enemy",bh:"Entity"},of:{c:"EnemyType",d:"Enemy to swap with entity",xc:h},Yv:{c:"VarName",d:"Instead of killing the enemy, set specified variable to true.",I:h}}}),f:function(a){this.Q=a.entity;this.of=new sc.AP(a.enemyInfo);this.Yv=a.manualKill||q},Ka:function(){this.of&&this.of.Ka()},start:function(a,c){var i=ig.Ja.rd(this.Q,c);if(i){var j=
{enemyInfo:this.of.pD(),name:i.name+"_EnemySwap",manualKill:this.Yv},j=ig.r.Pe("Enemy",i.b.g.x,i.b.g.y,i.b.g.z,j),k=i.tb(b);j.l(k.x-j.b.size.x/2,k.y-j.b.size.y/2,j.b.g.z);i.face&&Vec2.assign(j.face,i.face);i.hide();ig.r.mcb(i,j);j.Bd(h)}}});ig.oa.SWAP_BACK_ENEMY_WITH_ENTITY=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to swap with enemy",bh:"Entity"},z0a:{c:"Boolean",d:"Manually kill enemy, collecting EXP etc."}}}),f:function(a){this.Q=a.entity;this.z0a=a.expCollect},start:function(a,
c){var i=ig.Ja.rd(this.Q,c),j=ig.r.W1a(i.name+"_EnemySwap");if(j&&i){var k=i.tb(b);ig.r.mcb(j,i);j.l(k.x-j.b.size.x/2,k.y-j.b.size.y/2,i.b.g.z);j.face&&Vec2.assign(j.face,i.face);this.z0a?i.hDa():i.ze();j.show()}}});ig.oa.SET_COMBAT_ACTIVE=ig.qa.extend({Aa:y,t:new ig.u({attributes:{Aa:{c:"Boolean",d:"Activity status of combat"}}}),f:function(a){this.Aa=a.active},start:function(){sc.Ta.setActive(this.Aa)}});ig.oa.DO_ENEMY_ACTION=ig.qa.extend({Fe:q,AC:q,t:new ig.u({attributes:{Fe:{c:"Actor",d:"Enemy to change",
bh:"Entity"},AC:{c:"String",d:"Name of action to perform"},Du:{c:"Boolean",d:"If true, do not reset state before switching to action. Also keeps actionAttached!"}}}),f:function(a){this.Fe=a.enemy;this.AC=a.actionName;this.Du=a.noStateReset||y},start:function(a,b){var c=ig.Ja.rd(this.Fe,b);c&&c.Tna&&c.Tna(this.AC,this.Du)}});var c={RELATIVE_HP:{},CURRENT_HP:{},MAX_HP:{Qc:"hp"},ATTACK:{Qc:"attack"},DEFENSE:{Qc:"defense"},FOCUS:{Qc:"focus"}};ig.oa.SET_VAR_COMBAT_STAT=ig.qa.extend({Hd:q,Qc:q,Q:q,t:new ig.u({attributes:{Hd:{c:"VarName",
d:"Variable to store relative hp in"},Q:{c:"Entity",d:"Combatant of which to fetch stat"},Qc:{c:"String",d:"Type of Stat",U:c}}}),f:function(a){this.Hd=a.varName;this.Q=a.entity;this.Qc=c[a.stat]||c.RELATIVE_HP},start:function(a,b){var i=ig.Ja.Fr(this.Hd);if(i){var j=ig.Ja.rd(this.Q,b);if(j&&j.dZ){var k;if(this.Qc.Qc)k=j.W.Td(this.Qc.Qc);else if(this.Qc==c.RELATIVE_HP)k=j.W.Gy();else if(this.Qc==c.CURRENT_HP)k=j.W.Sc;ig.ma.set(i,k)}}else ig.log("SET_VAR_TIME: Variable Name is not a String!")}});ig.oa.MANUAL_COMBATANT_KILL=
ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Combatant to manually kill"}}}),f:function(a){this.Q=a.entity},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c.dZ&&c.hDa()}});ig.oa.MANUAL_COMBATANT_REVIVE=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Combatant to manually revive",bh:"Entity"}}}),f:function(a){this.Q=a.entity},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c.dZ&&c.mxb(1)}});ig.oa.SET_COMBATANT_MANUAL_KILL=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",
d:"Combatant to set manual kill variable to",bh:"Entity"},Hd:{c:"VarName",d:"Variable to set to true when combatant is killed"}}}),f:function(a){this.Q=a.entity;this.Hd=a.varName},start:function(a,b){var c=ig.Ja.rd(this.Q,b);if(c&&c.dZ)c.Yv=this.Hd}});ig.oa.START_PVP_BATTLE=ig.qa.extend({GE:0,Q:q,t:new ig.u({attributes:{GE:{c:"Integer",d:"Number of points to win PVP battle"},Rg:{c:"Array",d:"List of all enemies that participate in battle",Xt:{c:"Entity"}}}}),f:function(a){this.GE=a.winPoints;this.Rg=
a.enemies},start:function(a,b){for(var c=[],j=0;j<this.Rg.length;j++)c.push(ig.Ja.rd(this.Rg[j],b));sc.qi.start(this.GE,c)}});ig.oa.PREPARE_PVP_ROUND=ig.qa.extend({Bp:y,t:new ig.u({attributes:{Bp:{c:"Boolean",d:"If true, automatically stop preparation"}}}),f:function(a){this.Bp=a.autoContinue||y},start:function(){sc.qi.hNb(this.Bp)},ya:function(){return!this.Bp||!sc.qi.jy}});ig.oa.START_PVP_ROUND=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.qi.P0a()}});ig.oa.STOP_PVP_BATTLE=
ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.qi.stop()}});ig.oa.SET_RESPAWN_POINT=ig.qa.extend({t:new ig.u({attributes:{Q:{c:"Actor",d:"Entity to change",bh:"Entity"},If:{c:"Entity",d:"marker Entity to take position from"}}}),f:function(a){this.Q=a.entity;this.If=a.marker},start:function(a,b){var c=ig.Ja.rd(this.Q,b),j=ig.Ja.rd(this.If,b);if(c&&j){Vec3.assign(c.af.g,j.b.g);Vec2.Tm(c.af.g,j.b.size,0.5);Vec2.Tm(c.af.g,c.b.size,-0.5)}}});ig.oa.COMBAT_IF=ig.qa.extend({Bf:q,Mx:y,
uf:{},t:new ig.u({attributes:{Q:{c:"Entity",d:"Combatant from which to evaluate combat if"},Bf:{c:"CombatConditions",d:"Combat conditions for if statement"},Mx:{c:"Boolean",d:"With else case.",w2:h},Sq:{c:"Entity",d:"Temp target to set temporarily while combat condition is evaluated",I:h}},NF:function(a){switch(a){case "thenStep":return q;case "elseStep":return"else";case "_end":return"endif"}return"???"}}),f:function(a){this.Q=a.entity;this.Sq=a.tmpTarget;this.Bf=new sc.OE(a.conditions);this.Mx=
a.withElse},eB:function(){return this.Mx?["thenStep","elseStep"]:["thenStep"]},Lv:function(){var a=ig.Ja.rd(this.Q),b=this.Sq&&ig.Ja.rd(this.Sq),c;if(b){c=a.Sq;a.Sq=b}var j=Math.random(),j=this.Bf.Nb(a,j);if(b)a.Sq=c;return j?this.uf.thenStep?this.uf.thenStep:this.Ok:this.uf.elseStep?this.uf.elseStep:this.Ok}});ig.oa.REMOVE_PROXIES=ig.qa.extend({t:new ig.u({attributes:{group:{c:"String",d:"Only remove proxies with matching group string"}}}),f:function(a){this.group=a.group||q},start:function(){for(var a=
ig.r.entities,b=a.length;b--;){var c=a[b];c&&(c instanceof sc.ww&&c.group==this.group)&&c.oh()}}})});ig.J=h;
ig.N("game.feature.combat.enemy-steps").O("impact.base.animation","impact.base.action","impact.base.entity","game.feature.combat.entities.enemy").K(function(){ig.la.CHANGE_ENEMY_ANNOTATION=ig.ta.extend({t:new ig.u({attributes:{Aa:{c:"String",d:"The current active state",U:sc.xP,I:h},vK:{c:"String",d:"The current passive state",U:sc.n1,I:h},kP:{c:"String",d:"What weapon is preferred for the enemy",U:sc.o9,I:h},eG:{c:"Array",d:"The current active state",Xt:{c:"String",U:sc.sL},I:h},element:{c:"String",
d:"What element should be used",U:sc.xQa,I:h}}}),f:function(a){this.Aa=a.active?sc.xP[a.active]||0:q;this.vK=a.passive?sc.n1[a.passive]||0:q;this.kP=a.weapon?sc.o9[a.weapon]||0:q;var b=a.extra;if(b)for(var c=this.eG=0;c<b.length;++c)this.eG=this.eG|sc.sL[b[c]];else this.eG=q;this.element=a.element?sc.ha[a.element]||0:q},ya:function(a){if(this.Aa!=q)a.rj.Aa=this.Aa;if(this.vK!=q)a.rj.vK=this.vK;if(this.kP!=q)a.rj.kP=this.kP;if(this.eG!=q)a.rj.eG=this.eG;return h}});ig.la.DO_ENEMY_ACTION=ig.ta.extend({AC:q,
t:new ig.u({attributes:{AC:{c:"EnemyActionRef",d:"Name of action to perform"},Du:{c:"Boolean",d:"If true, do not reset state before switching to action. Also keeps actionAttached!"}}}),f:function(a){this.AC=a.actionName;this.Du=a.noStateReset||y},ya:function(a){a.Tna(this.AC,this.Du);return h}});ig.la.DO_ENEMY_ACTION_INLINE=ig.ta.extend({AC:q,t:new ig.u({attributes:{AC:{c:"EnemyActionRef",d:"Name of action to perform"}}}),f:function(a){this.AC=a.actionName},ya:function(a){a.Tna(this.AC,y,h);return h}});
ig.la.SET_AGGRESSION=ig.ta.extend({value:y,t:new ig.u({attributes:{value:{c:"String",d:"Set enemy aggression",U:sc.pI}}}),f:function(a){this.value=sc.pI[a.value]},ya:function(a){a.kM=this.value;return h}});ig.la.SET_ENEMY_ELEMENT_MODE=ig.ta.extend({t:new ig.u({attributes:{element:{c:"String",d:"Element to change to",U:sc.ha},sz:{c:"Boolean",d:"If true: don't show transition effect"}}}),f:function(a){this.element=sc.ha[a.element];this.sz=a.skipEffect||y},start:function(a){!a instanceof ig.wa.Enemy||
a.GK(this.element,this.sz)}})});ig.J=h;
ig.N("game.feature.combat.plug-in").O("game.feature.combat.combat","game.feature.combat.pvp","game.feature.combat.combat-shield","game.feature.combat.combat-force","game.feature.combat.combat-stun","game.feature.combat.combat-assault","game.feature.combat.combat-poi","game.feature.combat.combat-charge","game.feature.combat.combat-sweep","game.feature.combat.stat-change","game.feature.combat.entities.combatant-marble","game.feature.combat.entities.ball","game.feature.combat.entities.combatant","game.feature.combat.entities.food-icon",
"game.feature.combat.entities.drop","game.feature.combat.entities.item-drop","game.feature.combat.entities.enemy","game.feature.combat.entities.enemy-spawner","game.feature.combat.entities.respawn-blocker","game.feature.combat.entities.hit-number","game.feature.combat.entities.burst-spawner","game.feature.combat.entities.stone","game.feature.combat.gui.status-bar","game.feature.combat.gui.pvp-gui","game.feature.combat.gui.hp-bar-boss","game.feature.combat.gui.enemy-display-gui","game.feature.combat.model.combat-condition",
"game.feature.combat.model.combat-params","game.feature.combat.model.combat-status","game.feature.combat.model.enemy-type","game.feature.combat.model.enemy-reaction","game.feature.combat.model.enemy-collab","game.feature.combat.model.enemy-level-scaling","game.feature.combat.model.enemy-tracker","game.feature.combat.model.enemy-booster","game.feature.combat.combat-action-steps","game.feature.combat.combat-event-steps","game.feature.combat.enemy-steps","game.feature.combat.stat-change").K(function(){if(window.Ed){wm.Ek.push("game.feature.combat.editors.enemy-editor");
wm.Ek.push("game.feature.combat.editors.combat-condition-edit");wm.Ek.push("game.feature.combat.editors.enemy-choice-edit");wm.Ek.push("game.feature.combat.editors.combat-edit");wm.Ek.push("game.feature.combat.editors.pvp-edit");wm.Ek.push("game.feature.combat.editors.proxy-edit");wm.Um(/DIRECT_HIT/,"red");wm.Um(/CIRCLE_ATTACK/,"red");wm.Um(/TACKLE/,"red");wm.Um(/COMBAT/,"violet");wm.Um(/ANNOTATION/,"orange")}});ig.J=h;
ig.N("game.feature.game-code.game-code").O("impact.base.game").K(function(){sc.mTa=101;sc.wPb=168;sc.rfb=16;sc.Fwa={Rmb:{text:"sc.gimmick.sparklingShoes",sA:sc.mTa},Yhb:{text:"sc.gimmick.holidayQuest",Rta:"holidayQuest"},Ppb:{text:"sc.gimmick.voiceActing",Icb:"sc.gimmick.voiceActingRemove",c8a:function(){sc.$Oa.toggle()}}};sc.Lhb={"WoN-Boots":sc.Fwa.Rmb,"Holiday-Man":sc.Fwa.Yhb,"Best-VA":sc.Fwa.Ppb};sc.Ohb=ig.Uf.extend({enabled:[],keys:{},f:function(){this.parent("GameCode");ig.ma.Up("gamecode",this)},
Pxb:function(a){a=sc.Lhb[a];if(!a){sc.aq.P7(ig.lang.get("sc.gimmick.unknown"),q,g);return y}var b=y;if(this.enabled.indexOf(a)==-1)this.enabled.push(a);else if(a.Icb){this.enabled.ye(a);b=h}var c=ig.lang.get(b?a.Icb:a.text);a.Rta&&(this.keys[a.Rta]=!b);a.c8a&&a.c8a(b);sc.aq.P7(c,q,g);return h},bm:function(a,b){return this.keys[b[1]]||y},dK:1E3,qx:function(){for(var a=this.enabled.length;a--;){var b=this.enabled[a];b.sA&&sc.q.T.OJ(b.sA)==0&&sc.q.T.sA(b.sA,1)}}});ig.Vf(function(){return sc.Zyb=new sc.Ohb});
sc.submitGameCode=function(a){sc.Zyb.Pxb(a)}});ig.J=h;ig.N("game.feature.game-code.plug-in").O("game.feature.game-code.game-code").K(function(){ig.M5.push("sc.gimmick")});ig.J=h;
ig.N("game.feature.interact.gui.interact-gui").O("impact.feature.gui.gui").K(function(){var a=Vec2.create();ig.lj.Interact=ig.da.extend({UY:0,R:{DEFAULT:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_OUT},NEAR:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_OUT},AWAY:{state:{alpha:0.9},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:0,Va:0,alpha:1},time:0.1,p:KEY_SPLINES.EASE_IN}},s:new ig.ia("media/gui/map-ar.png"),target:q,offset:q,Y:q,n:0,eJa:0,p8a:q,Ik:q,f:function(a,c){this.parent();this.F(24,
24);this.Eb(12,24);this.a.zIndex=-30;this.a.jB=h;this.target=a;this.Y=c;this.j("HIDDEN",h);this.p8a=new sc.xib(this);this.m(this.p8a)},I7:function(a){this.UY=a;var c=h;if(this.Ik){this.Ik.I7(a);this.Ik.wc(this.UY)&&(c=y);c||this.j(a==sc.Eo.HIDDEN?"HIDDEN":"DEFAULT")}c&&(this.Y.XBb(a)?a==sc.Eo.AWAY?this.j("AWAY"):a==sc.Eo.NEAR||a==sc.Eo.BLOCK?this.j("NEAR"):this.j("DEFAULT"):this.j("HIDDEN"))},M_:function(a){this.Ik&&this.yH(this.Ik);if(this.Ik=a){this.DG(this.Ik,0);this.Ik.H(ig.k.Ia,ig.k.Cb)}this.I7(this.UY)},
update:function(){this.n=(this.n+ig.i.ja)%this.Y.GAb(this.UY);this.eJa=(this.eJa+ig.i.ja)%1;this.qj()},remove:function(){this.j("HIDDEN",y,h)},qj:function(){var b=0;this.UY!=sc.Eo.RUNNING&&(b=Math.round(Math.sin(Math.PI*2*(this.eJa/1))*1));this.Ik&&this.Ik.wc(this.UY)&&(b=0);ig.i.Jy(a,Math.round(this.target.b.g.x+this.target.b.size.x/2),Math.round(this.target.b.g.y-this.target.b.g.z-this.target.b.size.z));this.a.g.x=a.x-this.a.size.x/2;this.a.g.y=a.y-this.a.size.y+b+4;this.offset&&Vec2.add(this.a.g,
this.offset)}});sc.xib=ig.da.extend({s:new ig.ia("media/gui/message.png"),x4a:q,f:function(a){this.parent();this.x4a=a},Da:function(a){var c=this.x4a;c.Y.Da(a,c.UY,c.n)}})});ig.J=h;
ig.N("game.feature.interact.map-interact").O("impact.base.game","game.feature.model.game-model","game.feature.interact.gui.interact-gui").K(function(){var a={Ne:1,dir:{x:0,y:0}},b=[],c=Vec2.create(),d=Vec2.create(),f=Vec2.create(),i=Vec2.create(),j={},k=Vec2.create();sc.UE={pka:1,mW:2};sc.Eo={HIDDEN:0,AWAY:1,NEAR:2,BLOCKED:3,FOCUS:4,RUNNING:5};sc.Wjb=ig.Uf.extend({xb:[],jD:q,JGa:y,hidden:y,f:function(){this.parent("MapInteract")},De:function(a){if(this.xb.indexOf(a)==-1){this.xb.push(a);ig.X.vd(a.X)}},
$e:function(a){a.X.remove();this.xb.ye(a)},aU:0,fH:function(){var j=!sc.ba.eDb(),m=h;if(!ig.r.paused){this.vOb();if(this.hidden){j=h;m=y}var n=ig.r.cb;if(n)n.tb(i);else{j=h;m=y}if(this.JGa)if(j){this.jD.Oy.CT&&this.jD.Oy.CT();this.jD=q;this.JGa=y}else m=y;else this.jD=q;for(var j=-1,o=this.xb.length,t;o--;){var p=this.xb[o],r=p.Q;if(r.Ve)this.$e(p);else if(m){t=sc.Eo.AWAY;if(p.lma&&sc.q.Qv())t=sc.EP.HIDDEN;else if(ig.gl.ut(r,16)){r.tb(d);Vec2.sub(d,i,f);var u=y;p.gPa==sc.UE.pka?u=Math.abs(n.b.g.z-
r.b.g.z)<=ig.lf.Rt:p.gPa==sc.UE.mW&&(u=r.b.g.z+r.b.size.z>=n.b.g.z&&n.b.g.z+n.b.size.z>=r.b.g.z);n.b.g.z>n.b.pc&&(u=y);var w=Vec2.length(f);if(u&&w<=40+r.b.size.y/2&&(!p.A4a||ig.r.JS())&&!n.Sy){a.Ne=1;a.dir.x=0;a.dir.y=0;b=[];if(!ig.r.trace(a,i.x,i.y,Math.floor(n.b.g.z+n.b.size.z*0.75),f.x,f.y,2,2,2,ig.ca.IGNORE,n,b)||b[0]==r.b||(1-a.Ne)*w<r.b.size.x/2+16){t=sc.Eo.NEAR;if(p.Oy.S4a&&p.Oy.S4a())t=sc.Eo.BLOCKED;else{u=-1;if(ig.input.qb==ig.Yb.Wc)Vec2.Qb(f,n.face)<Math.PI/2?u=w:w<16&&(u=w+100);else{ig.i.Jy(k,
r.b.g.x+r.b.size.x/2,r.b.g.y-r.b.g.z+r.b.size.y/2-r.b.size.z/2);c.x=sc.ba.Kp()-k.x;c.y=sc.ba.Ln()-k.y;w=Vec2.length(c);r=Math.max(32,(r.b.size.y+r.b.size.z)/2);w<=r&&(u=w)}if(u!=-1&&(j==-1||u<j)){j=u;this.jD=p}}}}}else t=sc.Eo.HIDDEN;p.HH(t)}else p!=this.jD&&p.HH(sc.Eo.HIDDEN)}if(m&&this.jD)if(sc.ba.y4a()&&!ig.La.zh()){m=q;this.jD.Oy.Km&&(m=this.jD.Oy.Km());if(m!==y){this.jD.HH(sc.Eo.RUNNING);ig.La.Md();this.JGa=h}else this.jD.HH(sc.Eo.FOCUS)}else this.jD.HH(sc.Eo.FOCUS)}},vOb:function(){var a=ig.r.CD();
if(this.hidden!=a)if(this.hidden=a)for(a=0;a<this.xb.length;++a)this.xb[a].X.hide()},Uca:function(){this.hidden=h;for(var a=0;a<this.xb.length;++a){this.xb[a].HH(sc.Eo.HIDDEN);this.xb[a].X.a.xf=h;this.xb[a].X.hide()}},Qyb:function(){this.hidden=y;for(var a=0;a<this.xb.length;++a)this.xb[a].X.a.xf=y}});ig.Vf(function(){return sc.cn=new sc.Wjb});sc.as=ig.Ca.extend({Qt:q,eWb:y,Ba:{},Mo:0,f:function(a,b,c){this.Qt=a;this.Mo=c;for(var d in b)this.Ba[sc.Eo[d]]=b[d]},XBb:function(a){return!!this.Ba[a]},
GAb:function(a){return(this.Ba[a]||this.Ba[sc.Eo.NEAR]).length*this.Mo},Da:function(a,b,c){var b=this.Qt.Ly(j,(this.Ba[b]||this.Ba[sc.Eo.NEAR])[Math.floor(c/this.Mo)]),c=this.Qt.width,d=this.Qt.height;a.na(this.Qt.wd,(24-c)/2,24-d,b.x,b.y,c,d)}});sc.OV=ig.Ca.extend({Q:q,Oy:q,offset:q,state:sc.Eo.HIDDEN,Y:q,A4a:y,gPa:sc.UE.mW,X:q,lma:y,f:function(a,b,c,d,f){this.Q=a;this.Oy=b;this.Y=c;this.gPa=d||sc.UE.mW;this.A4a=f||y;this.X=new ig.lj.Interact(a,c)},LB:function(a,b){if(!this.X.offset)this.X.offset=
Vec2.create();this.X.offset.x=a;this.X.offset.y=b},nz:function(a){this.Y=a;this.X.Y=a},M_:function(a){this.X.M_(a)},HH:function(a){this.state=a;this.X.I7(a)}})});ig.J=h;
ig.N("game.feature.map-content.entities.elevator").O("impact.base.entity","game.feature.interact.map-interact","impact.base.actor-entity").K(function(){sc.rL={};sc.rL.cargoShip={size:{x:64,y:48,z:4},vg:{s:"media/entity/objects/elevator.png",x:0,y:24,Vc:64,sd:64,Pd:y},UG:"SOUTH",l0:0.5,q0:{g:{x:26,y:2,z:4},size:{x:10,y:10,z:9},Ba:{sheet:{src:"media/entity/objects/elevator.png",width:16,height:24},SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[0]}]}}};sc.rL.coldDng={size:{x:96,
y:64,z:2},vg:{s:"media/map/cold-dng.png",x:400,y:304,Vc:96,sd:80,Pd:y,offset:{x:0,y:0,z:-1}},UG:"SOUTH",l0:0.5,q0:{g:{x:43,y:0,z:2},size:{x:10,y:6,z:16},Ba:{sheet:{src:"media/map/cold-dng.png",width:16,height:16,offX:448,offY:256,xCount:1},SUB:[{name:"active",time:1,frames:[1]},{name:"disabled",time:1,frames:[0]}]}}};sc.rL.aridInner={size:{x:64,y:48,z:4},vg:{s:"media/map/arid-interior.png",x:384,y:368,Vc:64,sd:56,Pd:y,offset:{x:0,y:0,z:0}},UG:"NORTH",l0:0.5,q0:{g:{x:24,y:0,z:4},size:{x:16,y:8,z:16},
Jj:ig.ca.IGNORE,Ba:{sheet:{src:"media/map/arid-interior.png",width:16,height:24,offX:448,offY:368,xCount:1},renderMode:"lighter",SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[-1]}]}}};sc.rL.aridInnerHuge={size:{x:448,y:256,z:4},vg:{s:"media/map/arid-interior-elevator.png",x:0,y:0,Vc:448,sd:260,Pd:y,offset:{x:0,y:0,z:0}},UG:"NORTH",l0:0,speed:120,YMb:64,q0:{g:{x:216,y:96,z:4},size:{x:16,y:8,z:16},Jj:ig.ca.IGNORE,Ba:{sheet:{src:"media/map/arid-interior.png",width:16,height:24,
offX:448,offY:368,xCount:1},renderMode:"lighter",SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[-1]}]},Cx:{sheet:"area.arid",name:"elevatorAppear"},zG:{sheet:"area.arid",name:"elevatorDisappear"}}};sc.rL.aridDngWeird={size:{x:64,y:13,z:4},vg:{s:"media/map/arid-scaffolding.png",x:416,y:352,Vc:64,sd:32,Pd:y,offset:{x:0,y:0,z:0}},UG:"SOUTH",l0:0,q0:{g:{x:16,y:0,z:4},size:{x:16,y:2,z:14},Jj:ig.ca.IGNORE,Ba:{sheet:{src:"media/map/arid-scaffolding.png",width:16,height:16,offX:480,
offY:352,xCount:1},SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[0]}]}}};sc.rL.aridDngOutside={size:{x:48,y:32,z:4},vg:{s:"media/map/arid-dng-outside.png",x:304,y:24,Vc:48,sd:56,Pd:y},UG:"SOUTH",l0:0,q0:{g:{x:19,y:0,z:4},size:{x:10,y:8,z:12},Ba:{sheet:{src:"media/map/arid-dng-outside.png",width:16,height:24,offX:352,offY:32},SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[0]}]}}};sc.rL.basinKeep={size:{x:32,y:48,z:1},vg:{s:"media/map/jungle-interior.png",
x:480,y:416,Vc:32,sd:96,Pd:y},UG:"SOUTH",l0:0,q0:{g:{x:16,y:0,z:0},size:{x:16,y:0,z:36},Ba:{sheet:{src:"media/map/jungle-interior.png",width:16,height:16,offX:464,offY:416},offset:{z:16},SUB:[{name:"active",time:1,frames:[0]},{name:"disabled",time:1,frames:[0]}]}},sH:{x:0,y:-16},hO:[{x:8,y:12},{x:-8,y:24}],bwb:h};sc.Mgb=ig.Uf.extend({$b:q,em:q,f:function(){this.parent("Elevator");ig.zd.Lg(this)},gNb:function(a){this.$b&&this.eoa();this.$b=a.clone();a=this.$b.play(h);ig.ke.gYa("_elevatorMoving",a)},
eoa:function(a){if(this.$b){this.$b.Ka();this.$b=q;ig.ke.fcb("_elevatorMoving");a&&a.play()}},Bt:function(){this.eoa()}});ig.Vf(function(){return sc.BDa=new sc.Mgb});ig.YE.Elevator=N("ELEVATOR");var a=Vec2.create();ig.wa.Elevator=ig.Kc.extend({UG:q,gIa:Vec2.create(),wr:q,vg:q,Dpa:q,fb:q,Wha:0,UH:q,q8:0,BJ:0,Ul:[],XO:0,Dn:q,ls:q,t8:q,Na:{},YM:y,t:new ig.u({Dd:h,attributes:{name:{c:"String",d:"Name of the elevator. Used to teleport back to this elevator"},fb:{c:"VarCondition",d:"Condition for the elevator to be active",
xc:h},VSb:{c:"String",d:"Type of elevator",U:sc.rL},Ul:{c:"ElevatorDests",d:"Destinations of Elevator",xc:h},Dn:{c:"Event",d:"Event to be performed when using the elevator",xc:h,I:h},ls:{c:"VarCondition",d:"Condition to show the block event when using the elevator"},F0a:{c:"String",d:"If defined: override face dir of marker",U:ig.Jc.un,I:h}},label:function(){return"[ "+this.fb+" ]\n"+this.map+" > "+this.If}}),f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.BLOCK;this.b.Fd=0;this.map=f.map||
q;this.If=f.marker;this.Wha=this.b.g.z;this.YVb=f.moveHeight;this.Na.start=new ig.ka("media/sound/misc/elevator-loop.ogg",0.7);this.Na.end=new ig.ka("media/sound/misc/elevator-end.ogg",0.7);this.F0a=f.faceDir||q;if(a=sc.rL[f.elevatorType]){this.wr=a;this.UG=this.F0a||a.UG;ig.Jc.uq(ig.Jc.un[this.UG]||0,this.gIa);this.vg=a.vg;this.Dpa=new ig.ia(a.vg.s);Vec3.assign(this.b.size,a.size)}this.QCb(f.destinations);this.fb=new ig.de(f.condition);if(ig.r.If==this.name)if(a=ig.ma.get("_system.elevator.exitVel")){this.UH=
this.b.g.z;this.BJ=a;c=this.wr.YMb||32;this.IH(this.b.g.z+(a>0?-c:c));this.q8=3}if(f.blockEvent){this.Dn=new ig.Ja({name:"DOOR BLOCK EVENT",steps:f.blockEvent});this.ls=new ig.de(f.blockEventCondition||"true")}},QCb:function(a){if(a)for(var c=0;c<a.length;++c){var d=a[c];this.Ul.push({label:d.label,height:this.b.g.z+d.zMoveOffset,Ccb:d.teleportMap,GNb:d.teleportMarker,lq:d.activeCondition,MMa:d.showCondition,oYa:d.addedSteps});ig.Ae&&ig.Ae.Cz("Elevator "+c,new ig.Ra(d.label))}},Np:function(){this.ul(1)},
Ge:function(a){this.parent(a);this.Na.start.Ka();this.Na.end.Ka();this.Dpa&&this.Dpa.Tc()},show:function(a){this.parent(a);if(this.wr){a=this.wr.q0;this.t8=ig.r.Pe(sc.Ngb,this.b.g.x+a.g.x,this.b.g.y+a.g.y,this.b.g.z+a.g.z,{data:a,ground:this});this.t8.setActive(this.fb.evaluate(),h)}},$Hb:function(){this.Dn&&this.ls.evaluate()?sc.$r.TK(this.Dn):this.cMb()},R6a:function(a){sc.q.message.jR(sc.N9.ALL);if((a=this.Ul[a])&&!(Math.abs(a.height-this.b.g.z)<ig.lf.Zj)){sc.BDa.gNb(this.Na.start);this.UH=a.height;
var c=this.wr.speed||80;this.BJ=this.UH<this.b.g.z?-c:c;if(Math.random()<=this.wr.l0){this.XO=0.1+0.2;this.b.V.z=this.BJ/4}this.t8.cab(h);a.Ccb&&this.KHb(a);if(this.wr.bwb){a=ig.r.Br(this.b.g.x,this.b.g.y+this.b.size.y,this.b.g.z,this.b.size.x,16,4,this);for(c=a.length;c--;)a[c]instanceof ig.wa.Door&&a[c].close()}}},KHb:function(a){var c=[ig.r.cb];sc.sa.Xk(0)&&c.push(sc.sa.Xk(0));sc.sa.Xk(1)&&c.push(sc.sa.Xk(1));for(var d=[],f=c.length;f--;)d.push({type:"DO_ACTION",entity:c[f],action:[{type:"WAIT_RANDOM",
minTime:0.15,maxTime:0.25},{type:"SET_FACE",face:this.UG,rotate:h},{type:"WAIT",time:2}]});a.oYa&&d.push.apply(d,a.oYa);c=this.tb();c.y=c.y-(this.b.g.z+this.b.size.z);c.y=c.y-1.25*this.BJ;d.push({type:"SET_CAMERA_POS",pos:c,speed:1,transition:"EASE_IN"});d.push({type:"WAIT",time:0.5});d.push({type:"TELEPORT",map:a.Ccb,marker:a.GNb});d.push({type:"WAIT",time:10});a=new ig.Ja({steps:d});ig.r.vi.Dp(a,ig.Qm.PARALLEL);ig.ma.set("_system.elevator.exitVel",this.BJ);this.YM=h},OI:function(a,c,d,f,i){if(c){var j=
this.tb();j.x=j.x+d;j.y=j.y+f;this.wr.sH&&Vec2.add(j,this.wr.sH);a.push({type:"DO_ACTION",entity:c,wait:i,action:[{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_COLL_TYPE",value:"IGNORE"},{type:"SET_RELATIVE_SPEED",value:1},{type:"NAVIGATE_TO_POINT",target:j,precise:y,distance:32},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"NAVIGATE_TO_POINT",target:j,precise:h},{type:"SET_FACE",face:"NORTH",rotate:h}]})}},cMb:function(){if(this.Ul.length){var a=ig.r.cb,c=[];sc.sa.He.length>=1&&(this.wr.hO?this.OI(c,
sc.sa.Xk(0),this.wr.hO[0].x,this.wr.hO[0].y,y):this.OI(c,sc.sa.Xk(0),16,8,y));sc.sa.He.length>=2&&(this.wr.hO?this.OI(c,sc.sa.Xk(1),this.wr.hO[1].x,this.wr.hO[1].y,y):this.OI(c,sc.sa.Xk(1),-16,8,y));this.OI(c,a,0,0,h);if(this.Ul.length>1){c.push({type:"ADD_MSG_PERSON",person:{person:sc.q.T.Ad.name,expression:"DEFAULT"},side:"RIGHT",order:0,clearSide:y});for(var a={type:"SHOW_CHOICE",person:{person:sc.q.T.Ad.name,expression:"DEFAULT"},options:[]},d=0,f=0;f<this.Ul.length;++f){var i=this.Ul[f];a.options.push({label:i.label,
activeCondition:i.lq,showCondition:i.MMa});i=[];this.KUa(i);i.push({type:"MOVE_ELEVATOR",entity:this,floorOption:f,wait:h});a[d]=i;d++}a.options.push({label:ig.lang.get("sc.map-content.elevator.cancel")});a[d]=[];c.push(a)}else{c.push({type:"WAIT",time:0.1});this.KUa(c);c.push({type:"MOVE_ELEVATOR",entity:this,floorOption:0,wait:h})}c=new ig.Ja({steps:c});sc.$r.TK(c)}},KUa:function(a){var c=sc.sa.Xk(0);c&&a.push({type:"WAIT_UNTIL_ACTION_DONE",entity:c});(c=sc.sa.Xk(1))&&a.push({type:"WAIT_UNTIL_ACTION_DONE",
entity:c})},update:function(){if(this.q8>0){this.q8=this.q8-1;if(this.q8<=0){this.q8=0;this.b.V.z=this.BJ}}else if(this.UH!==q){this.b.V.z=this.b.V.z+this.BJ*2*ig.i.ja;var a=(this.UH-this.b.g.z)*10;this.b.V.z=this.BJ>0?this.b.V.z.Rb(10,Math.min(a,this.BJ)):this.b.V.z.Rb(Math.max(a,this.BJ),-10)}if(this.XO>0){a=this.XO;this.XO=this.XO-ig.i.ja;if(a>0.2&&this.XO<=0.2){a=new ig.Fo.fF("RANDOM","WEAK","FAST",0.2,y,h);ig.gE.OW(a)}if(this.XO<=0.2)this.b.V.z=0;if(this.XO<=0)this.XO=0}this.YM||(this.UH!==q&&
Math.abs(this.UH-this.b.g.z)<1?this.rKb():this.UH!==q&&Math.abs(this.UH-this.b.g.z)<4&&sc.BDa.eoa(this.Na.end));this.l(this.b.g.x,this.b.g.y,this.b.g.z+this.b.V.z*ig.i.ja,h);this.parent()},rKb:function(){sc.BDa.eoa(this.Na.end);var a=new ig.Fo.fF("HORIZONTAL","WEAKEST","FAST",0.3,h);ig.gE.OW(a);this.IH(this.UH);ig.r.cb.fIa.z=this.b.g.z+this.b.size.z;this.b.V.z=0;this.UH=q;this.t8.cab(y)},sr:function(){this.t8.IH(this.b.g.z+this.b.size.z)},ag:function(){this.t8.setActive(this.fb.evaluate())},Gh:function(){var a=
this.Ua[0];a.HK(this,this.vg.Vc,this.vg.sd,ig.IE.Z_EXPAND,1,this.vg.offset,this.Dpa,this.vg.x,this.vg.y);a.AU(this.vg.Pd,y)},BF:function(a){this.qKa(a);if(a.Ah&&this.wr.hO)ig.r.rga=this},T7a:function(){sc.sa.He.length>=1&&this.qKa(sc.sa.Xk(0),this.wr.hO[0]);sc.sa.He.length>=2&&this.qKa(sc.sa.Xk(1),this.wr.hO[1])},qKa:function(b,c){if(b){var d=this.b.g.z+this.b.size.z;b.b.aa=this.b.aa;b.b.pc=d;b.b.g.z=d;b.face.x=this.gIa.x;b.face.y=this.gIa.y;d=this.tb(a);c&&Vec2.add(d,c);this.wr.sH&&Vec2.add(d,this.wr.sH);
Vec2.Tm(d,b.b.size,-0.5);b.l(d.x,d.y)}}});sc.Ngb=ig.Wd.extend({GY:q,wf:q,Cu:y,Aa:y,Pv:{rva:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[22,23,24,0,20,21],NEAR:[25]},0.15),bD:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[30,31,32,33,34,0,0],NEAR:[35]},0.15)},Cx:q,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.VIRTUAL;this.GY=f.ground;a=this.Pv.bD;c=this.GY.Ul;for(d=c.length;d--;)if(c[d].height>this.b.g.z){a=this.Pv.rva;break}f=f.data;Vec3.assign(this.b.size,
f.size);this.Bd(f.Ba);this.Ma("active");f.Jj&&this.b.vl(f.Jj);if(f.Cx)this.Cx=new ig.Bi(f.Cx);if(f.zG)this.zG=new ig.Bi(f.zG);this.wf=new sc.OV(this,this,a,sc.UE.pka,h);this.IAa()},setActive:function(a,c){if(this.Aa!=a&&!c){a&&this.Cx&&this.Cx.va(this);!a&&this.zG&&this.zG.va(this)}this.Aa=a;this.IAa()},cab:function(a){this.Cu=a;this.IAa()},IAa:function(){this.Ma(this.Aa?"active":"disabled");!this.Aa||this.Cu?sc.cn.$e(this.wf):sc.cn.De(this.wf)},Km:function(){this.GY.$Hb()},Ge:function(a){sc.cn.$e(this.wf);
this.Cx&&this.Cx.Ka();this.zG&&this.zG.Ka();this.parent(a)}})});ig.J=h;
ig.N("game.feature.map-content.map-content-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.OPEN_RHOMBUS_MAP=ig.qa.extend({t:new ig.u({attributes:{}}),h2:q,t2:q,f:function(a){this.Jb=sc.dc.zi[a.quest];this.cj=a.npc||q;this.map=a.map||q},start:function(a,b){a.Xb=y;sc.q.YK();sc.q.Ss=h;var c=new sc.Amb(function(c,f,i){a.Xb=h;sc.q.Ss=y;ig.r.Mf(c,f?new ig.tC(f):q);c=new ig.sf.gq(new ig.sf.xV(i),0,0);c.iw(1.5);ig.le.wx(c,0.5,KEY_SPLINES.EASE_IN,q);b.J2(c)}.bind(this));ig.X.vd(c)},
ya:function(a){return a.Xb}});ig.oa.MOVE_ELEVATOR=ig.qa.extend({Q:q,G4:0,t:new ig.u({attributes:{Q:{c:"Entity",d:"Elevator Entity",fla:"Elevator"},G4:{c:"Number",d:"The number of the floor option to use."},Ec:{c:"Boolean",d:"If true, wait until teleported"}}}),f:function(a){this.Q=a.entity;this.G4=a.floorOption;this.Ec=a.wait},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c instanceof ig.wa.Elevator&&c.R6a(this.G4)},ya:function(){return!this.Ec}});ig.oa.MOVE_ELEVATOR_START=ig.qa.extend({Q:q,G4:0,
t:new ig.u({attributes:{Q:{c:"Entity",d:"Elevator Entity",fla:"Elevator"}}}),f:function(a){this.Q=a.entity;this.G4=a.floorOption;this.Ec=a.wait},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c instanceof ig.wa.Elevator&&c.R6a(this.G4)},ya:function(){return!this.Ec}});ig.oa.UNTRIGGER_PROP=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Prop entity",fla:"Prop"}}}),f:function(a){this.Q=a.entity},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c instanceof ig.wa.Prop&&c.mOb()}})});ig.J=h;
ig.N("game.feature.map-content.gui.icon-hover-text").O("impact.feature.gui.gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui","game.feature.interact.map-interact").K(function(){sc.rRa=ig.Ue.extend({R:{DEFAULT:{state:{alpha:1,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:0.4,Va:0.5,alpha:0,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT}},gb:new ig.jc("media/gui/message.png",{width:4,height:4,left:6,top:6,right:6,bottom:6,Vb:{"default":{x:0,y:112}}}),dbb:y,f:function(a,
b,c,d){this.parent(134,20);this.a.nd=0.6;this.a.g.y=4+(b||0);this.dbb=c||y;c=b=0;if(d){c=new sc.ea(d,{font:sc.Ea.he,maxWidth:134});c.H(ig.k.Ia,ig.k.$);this.m(c);b=c.a.size.y+1;c=c.a.size.x}a=new sc.ea(a,{font:sc.Ea.he,maxWidth:134});a.H(ig.k.Ia,d?ig.k.$:ig.k.vb);a.l(0,b);this.m(a);if(a.a.size.x>c)c=a.a.size.x;this.F(Math.max(40,c+8),a.a.size.y+4+b);this.Eb(this.a.size.x/2,this.a.size.y);this.j("HIDDEN",h)},I7:function(a){a==sc.Eo.FOCUS||this.dbb&&a==sc.Eo.NEAR?this.j("DEFAULT"):this.j("HIDDEN")},
wc:function(a){return a==sc.Eo.FOCUS},remove:function(){this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.map-content.map-style").O("impact.feature.map-content.map-style").K(function(){ig.kc.rc("default","map",{sheet:"media/entity/style/default-map.png",wk:h,Rq:{x:0,y:160,vh:3,kf:0}});ig.kc.rc("default","puzzle",{sheet:"media/entity/style/default-puzzle.png"});ig.kc.rc("default","puzzle2",{sheet:"media/entity/style/default-puzzle-2.png"});ig.kc.rc("default","destruct",{sheet:"media/entity/style/default-destruct.png"});ig.kc.rc("default","walls",{nt:{ima:"#475ae2",kma:"#e6e9ff",jsa:"#80ff83",
ksa:"#b3c9ff",Gra:"#eb8835",Hra:"#ffe2ca"}});ig.kc.rc("cargo-hold","map",{sheet:"media/entity/style/cargo-hold-map.png",wk:h,Rq:{x:0,y:160,vh:3,kf:0}});ig.kc.rc("cargo-ship-outer","map",{sheet:"media/entity/style/cargo-outer-map.png",wk:y});ig.kc.rc("cargo-ship-bridge","map",{sheet:"media/entity/style/cargo-bridge-map.png",wk:y});ig.kc.rc("rhombus-puzzle","map",{sheet:"media/entity/style/rhombus-dng-map.png",wk:h,Rq:{x:0,y:160,vh:3,kf:0}});ig.kc.rc("rhombus-puzzle","puzzle",{sheet:"media/entity/style/rhombus-dng-puzzle.png"});
ig.kc.rc("rhombus-puzzle","walls",{nt:{ima:"#71a3ff",kma:"#b6dcff",jsa:"#80ff83",ksa:"#b3c9ff",Gra:"#ffba80",Hra:"#ffd6b3"}});ig.kc.rc("rhombus-outside","map",{sheet:"media/entity/style/rhombus-outside-map.png",wk:y,Fv:{x:128,y:0,vh:1},Rq:{x:0,y:96,vh:3,kf:0},MR:{glass:{x:160,y:0,ZM:y}}});ig.kc.rc("rhombus-interior","map",{sheet:"media/entity/style/rhombus-interior-map.png",wk:h,Fv:{x:144,y:0,vh:1,hbb:160,ibb:96},OH:{x:176,y:48}});ig.kc.rc("rookie-harbor-outer","map",{sheet:"media/entity/style/rh-outer-map.png",
wk:y,Rq:{x:0,y:48,vh:3,kf:0}});ig.kc.rc("rookie-harbor-interior","map",{sheet:"media/entity/style/rh-interior-map.png",wk:h,MR:{wood:{x:160,y:0}},OH:{x:160,y:48}});ig.kc.rc("hideout-outer","map",{sheet:"media/entity/style/hideout-outer-map.png",wk:y,Rq:{x:0,y:96,vh:3,kf:0}});ig.kc.rc("hideout-inner","map",{sheet:"media/entity/style/hideout-inner-map.png",wk:y,MR:{dark:{x:160,y:0}},OH:{x:160,y:48}});ig.kc.rc("autumn","map",{sheet:"media/entity/style/autumn-map.png",wk:y,Rq:{x:0,y:48,vh:3,kf:0}});ig.kc.rc("autumn",
"puzzle",{sheet:"media/entity/style/autumn-puzzle.png"});ig.kc.rc("cave","map",{sheet:"media/entity/style/cave.png",wk:h,Rq:{x:0,y:160,vh:3,kf:0}});ig.kc.rc("cave","effect",{sheet:"area.cold-dng"});ig.kc.rc("cave","destruct",{sheet:"media/entity/style/cave-destruct.png"});ig.kc.rc("cave","waterblock",{sheet:"media/map/heat-dng.png",x:384,y:304,Ysa:352,Zsa:448});ig.kc.rc("christmas","map",{sheet:"media/entity/style/cargo-hold-map.png",wk:h});ig.kc.rc("christmas","destruct",{sheet:"media/entity/style/christmas-destruct.png"});
ig.kc.rc("bergen-outer","map",{sheet:"media/entity/style/bergen-map.png",wk:y,Rq:{x:0,y:48,vh:3,kf:0}});ig.kc.rc("bergen-outer","destruct",{sheet:"media/entity/style/cold-dng-destruct.png"});ig.kc.rc("bergen-inner","map",{sheet:"media/entity/style/bergen-inner-map.png",wk:h,OH:{x:160,y:48},Rq:{x:0,y:48,vh:3,kf:0},MR:{wood:{x:160,y:0,ZM:y}}});ig.kc.rc("bergen-inner","destruct",{sheet:"media/entity/style/cold-dng-destruct.png"});ig.kc.rc("bergen-inner","puzzle",{sheet:"media/entity/style/bergen-inner-puzzle.png"});
ig.kc.rc("cold-dng","map",{sheet:"media/entity/style/cold-dng-map.png",wk:h,Rq:{x:0,y:160,vh:3,kf:0}});ig.kc.rc("cold-dng","puzzle",{sheet:"media/entity/style/cold-dng-puzzle.png"});ig.kc.rc("cold-dng","puzzle2",{sheet:"media/entity/style/cold-dng-puzzle-2.png"});ig.kc.rc("cold-dng","walls",{nt:{ima:"#71a3ff",kma:"#b6dcff",jsa:"#80ff83",ksa:"#b3c9ff",Gra:"#ffba80",Hra:"#ffd6b3"}});ig.kc.rc("cold-dng","lorry",{sheet:"media/map/cold-dng.png",cta:176,dta:256,Wqa:128,Xqa:272});ig.kc.rc("cold-dng","effect",
{sheet:"area.cold-dng"});ig.kc.rc("cold-dng","destruct",{sheet:"media/entity/style/cold-dng-destruct.png"});ig.kc.rc("heat-outer","map",{sheet:"media/entity/style/heat-map.png",wk:y,j4:"STONE",Rq:{x:0,y:48,vh:3,kf:0}});ig.kc.rc("heat-outer","destruct",{sheet:"media/entity/style/heat-destruct.png"});ig.kc.rc("heat-inner","map",{sheet:"media/entity/style/heat-interior-map.png",wk:y,j4:"STONE",OH:{x:160,y:0}});ig.kc.rc("heat-inner","puzzle",{sheet:"media/entity/style/heat-dng-puzzle.png"});ig.kc.rc("heat-inner",
"puzzle2",{sheet:"media/entity/style/heat-dng-puzzle-2.png"});ig.kc.rc("heat-inner","destruct",{sheet:"media/entity/style/heat-dng-destruct.png"});ig.kc.rc("heat-dng","map",{sheet:"media/entity/style/heat-dng-map.png",wk:h,j4:"STONE",Rq:{x:0,y:160,vh:3,kf:0},OH:{x:160,y:0}});ig.kc.rc("heat-dng","puzzle",{sheet:"media/entity/style/heat-dng-puzzle.png"});ig.kc.rc("heat-dng","puzzle2",{sheet:"media/entity/style/heat-dng-puzzle-2.png"});ig.kc.rc("heat-dng","destruct",{sheet:"media/entity/style/heat-dng-destruct.png"});
ig.kc.rc("heat-dng","waterblock",{sheet:"media/map/heat-dng.png",x:384,y:304,Ysa:352,Zsa:448});ig.kc.rc("heat-dng","pipes",{sheet:"media/map/heat-dng.png",x:320,y:144});ig.kc.rc("heat-dng","quicksand",{sheet:"media/map/heat-dng.png",x:160,y:272});ig.kc.rc("heat-dng","walls",{nt:{ima:"#5e5aac",kma:"#d6d4f6",jsa:"#80ff83",ksa:"#b3c9ff",Gra:"#d95c3b",Hra:"#e58c61"}});ig.kc.rc("heat-dng","lorry",{sheet:"media/map/heat-dng.png",cta:176,dta:304,Wqa:128,Xqa:304});ig.kc.rc("heat-dng","coals",{sheet:"media/map/heat-dng.png",
x:432,y:144});ig.kc.rc("arid-outer","map",{sheet:"media/entity/style/arid-map.png",wk:y,Rq:{x:0,y:48,vh:3,kf:0},Fv:{x:128,y:0,vh:1}});ig.kc.rc("arid-outer","puzzle",{sheet:"media/entity/style/arid-puzzle.png"});ig.kc.rc("arid-outer","puzzle2",{sheet:"media/entity/style/arid-puzzle-2.png"});ig.kc.rc("unknown-interior","map",{sheet:"media/entity/style/unknown-interior-map.png",wk:h,Fv:{x:144,y:0,vh:1,hbb:160,ibb:96}});ig.kc.rc("unknown-interior","puzzle",{sheet:"media/entity/style/unknown-interior-puzzle.png"});
ig.kc.rc("unknown-interior","puzzle2",{sheet:"media/entity/style/unknown-interior-puzzle-2.png"});ig.kc.rc("unknown-interior","pipes",{sheet:"media/map/arid-interior.png",x:176,y:368});ig.kc.rc("unknown-interior","pipeSwitch",{sheet:"media/map/arid-interior.png",x:224,y:432});ig.kc.rc("unknown-interior","propeller",{sheet:"media/map/arid-interior.png",x:192,y:480});ig.kc.rc("unknown-interior","destruct",{sheet:"media/entity/style/unknown-interior-destruct.png"});ig.kc.rc("unknown-interior","magnet",
{sheet:"media/map/arid-interior.png",x:256,y:512});ig.kc.rc("unknown-interior","tesla",{sheet:"media/map/arid-interior.png",x:288,y:544});ig.kc.rc("unknown-interior","teslaSwitch",{sheet:"media/map/arid-interior.png",x:256,y:544});ig.kc.rc("unknown-interior","anticompressor",{sheet:"media/map/arid-interior.png",x:288,y:592});ig.kc.rc("unknown-interior","dynPlatformSmall",{sheet:"media/map/arid-interior.png",x:416,y:624});ig.kc.rc("unknown-interior","dynPlatformMedium",{sheet:"media/map/arid-interior.png",
x:368,y:624});ig.kc.rc("unknown-interior","effect",{sheet:"area.cold-dng"});ig.kc.rc("unknown-interior","rotateBlocker",{sheet:"media/map/arid-interior.png",x:208,y:656});ig.kc.rc("unknown-interior","waveSwitch",{sheet:"media/map/arid-interior.png",x:224,y:736});ig.kc.rc("unknown-interior","waveblock",{sheet:"media/map/arid-interior.png",x:304,y:656});ig.kc.rc("unknown-interior","waterblock",{sheet:"media/map/arid-interior.png",x:0,y:784,Ysa:144,Zsa:720});ig.kc.rc("unknown-interior","bouncer",{sheet:"media/map/arid-interior.png",
x:128,y:880});ig.kc.rc("jungle-outer","map",{sheet:"media/entity/style/jungle-map.png",wk:y,j4:"CLOTH",Rq:{x:0,y:96,vh:3,kf:0},Fv:{x:128,y:0,vh:1},MR:{blue:{x:160,y:0,ZM:y,Fv:{x:288,y:0,vh:1}}}});ig.kc.rc("jungle-outer","destruct",{sheet:"media/entity/style/jungle-destruct.png"});ig.kc.rc("jungle-outer","puzzle",{sheet:"media/entity/style/shockwave-dng-puzzle.png"});ig.kc.rc("jungle-outer","puzzle2",{sheet:"media/entity/style/shockwave-dng-puzzle-2.png"});ig.kc.rc("jungle-outer","magnet",{sheet:"media/map/shockwave-dng.png",
x:160,y:272});ig.kc.rc("tree-inner","map",{sheet:"media/entity/style/jungle-map.png",wk:y,j4:"CLOTH",Rq:{x:0,y:96,vh:3,kf:0},Fv:{x:128,y:0,vh:1},MR:{blue:{x:160,y:0,ZM:y,Fv:{x:288,y:0,vh:1}}}});ig.kc.rc("jungle-city","map",{sheet:"media/entity/style/jungle-city-map.png",wk:y,Fv:{x:128,y:0,vh:1},Rq:{x:0,y:48,vh:3,kf:0}});ig.kc.rc("jungle-city","destruct",{sheet:"media/entity/style/jungle-destruct.png"});ig.kc.rc("jungle-city","puzzle",{sheet:"media/entity/style/jungle-city-puzzle.png"});ig.kc.rc("jungle-city",
"magnet",{sheet:"media/map/shockwave-dng.png",x:160,y:272});ig.kc.rc("jungle-city","waveblock",{sheet:"media/entity/objects/cargoCrateTeleport.png",x:0,y:0});ig.kc.rc("jungle-city-inner","map",{sheet:"media/entity/style/jungle-interior-map.png",wk:h,OH:{x:160,y:0},MR:{metal:{x:160,y:48},elevator:{x:160,y:96}}});ig.kc.rc("jungle-city-inner","puzzle",{sheet:"media/entity/style/jungle-city-puzzle.png"});ig.kc.rc("jungle-city-inner","magnet",{sheet:"media/map/shockwave-dng.png",x:160,y:272});ig.kc.rc("jungle-city-inner",
"waveblock",{sheet:"media/entity/objects/cargoCrateTeleport.png",x:0,y:0});ig.kc.rc("shockwave-dng","map",{sheet:"media/entity/style/shockwave-dng-map.png",wk:h,j4:"STONE",Rq:{x:0,y:160,vh:3,kf:0},OH:{x:160,y:0}});ig.kc.rc("shockwave-dng","puzzle",{sheet:"media/entity/style/shockwave-dng-puzzle.png"});ig.kc.rc("shockwave-dng","puzzle2",{sheet:"media/entity/style/shockwave-dng-puzzle-2.png"});ig.kc.rc("shockwave-dng","magnet",{sheet:"media/map/shockwave-dng.png",x:160,y:272});ig.kc.rc("shockwave-dng",
"bouncer",{sheet:"media/map/shockwave-dng-props.png",x:0,y:0});ig.kc.rc("shockwave-dng","waterblock",{sheet:"media/map/shockwave-dng.png",x:384,y:304,Ysa:352,Zsa:448});ig.kc.rc("shockwave-dng","waveblock",{sheet:"media/map/shockwave-dng.png",x:96,y:480});ig.kc.rc("shockwave-dng","tesla",{sheet:"media/map/shockwave-dng.png",x:240,y:352});ig.kc.rc("shockwave-dng","waveSwitch",{sheet:"media/map/shockwave-dng.png",x:16,y:696});ig.kc.rc("shockwave-dng","anticompressor",{sheet:"media/map/shockwave-dng.png",
x:240,y:400});ig.kc.rc("shockwave-dng","dynPlatformSmall",{sheet:"media/map/shockwave-dng.png",x:48,y:640});ig.kc.rc("shockwave-dng","dynPlatformMedium",{sheet:"media/map/shockwave-dng.png",x:0,y:640});ig.kc.rc("shockwave-dng","lorry",{sheet:"media/map/shockwave-dng.png",cta:176,dta:304,Wqa:128,Xqa:304});ig.kc.rc("shockwave-dng","rotateBlocker",{sheet:"media/map/shockwave-dng.png",x:256,y:720});ig.kc.rc("shockwave-dng","destruct",{sheet:"media/entity/style/shockwave-dng-destruct.png"})});ig.J=h;
ig.N("game.feature.map-content.sc-doors").O("impact.feature.map-content.entities.door").K(function(){ig.uP.COLD_DUNGEON={size:{x:64,y:16,z:64},f_:1.3,Ct:{sheet:"area.cold-dng",name:"masterDoorOpen"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/cold-dng.png",width:48,height:64,xCount:2,offX:336,offY:576},SUB:[{frames:[0],offset:{x:-8,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",fx:[{type:"SLIDE",dir:"WEST",
start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{frames:[1],offset:{x:8,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",fx:[{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]}]}};ig.uP.HEAT_DUNGEON_ENTRANCE={size:{x:56,y:16,z:48},f_:1.3,xKa:0.5,Ct:{sheet:"area.heat-dng",name:"masterDoorOpen"},Ba:{shapeType:"Y_FLAT",frames:[0],SUB:[{sheet:{src:"media/map/heat-dng-exterior.png",width:32,
height:28,xCount:1,offX:0,offY:128},offset:{x:-12,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng-exterior.png",width:32,height:28,xCount:1,
offX:32,offY:128},offset:{x:12,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng-exterior.png",width:36,height:28,xCount:1,offX:0,offY:100},
offset:{x:-10,y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng-exterior.png",width:28,height:28,xCount:1,offX:36,offY:100},offset:{x:14,
y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]}]}};ig.uP.HEAT_DUNGEON_MASTER_DOOR={size:{x:64,y:16,z:48},f_:1.3,Ct:{sheet:"area.heat-dng",name:"masterDoorOpen"},Ba:{shapeType:"Y_FLAT",
frames:[0],SUB:[{sheet:{src:"media/map/heat-dng.png",width:36,height:28,xCount:1,offX:312,offY:512},offset:{x:-14,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng.png",
width:36,height:28,xCount:1,offX:348,offY:512},offset:{x:14,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng.png",width:40,height:32,xCount:1,
offX:312,offY:480},offset:{x:-12,y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/heat-dng.png",width:32,height:32,xCount:1,offX:352,offY:480},
offset:{x:16,y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]}]}};ig.uP.SHOCKWAVE_DNG_DOOR={size:{x:64,y:16,z:48},f_:1.3,xKa:0.5,Ct:{sheet:"area.shockwave-dng",name:"masterDoorOpen"},
i8a:{sheet:"area.shockwave-dng",name:"masterDoorOpenFast"},Ba:{shapeType:"Y_FLAT",frames:[0],SUB:[{sheet:{src:"media/map/jungle-props.png",width:36,height:28,xCount:1,offX:440,offY:464},offset:{x:-14,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"openFast",fx:[{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"},
{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/jungle-props.png",width:36,height:28,xCount:1,offX:476,offY:464},offset:{x:14,y:-2,z:0},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",
dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"openFast",fx:[{type:"SLIDE",dir:"SOUTH",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"SOUTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/jungle-props.png",width:40,height:32,xCount:1,offX:440,
offY:432},offset:{x:-12,y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"openFast",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,
keySpline:"EASE_IN"},{type:"SLIDE",dir:"WEST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]},{sheet:{src:"media/map/jungle-props.png",width:32,height:32,xCount:1,offX:480,offY:432},offset:{x:16,y:-2,z:14},SUB:[{name:"idle"},{name:"open",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.4,duration:1,keySpline:"EASE_IN"}]},{name:"openFast",fx:[{type:"SLIDE",dir:"NORTH",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"},
{type:"SLIDE",dir:"EAST",start:0,end:1,delay:0.2,duration:0.8,keySpline:"EASE_IN"}]},{name:"close",time:1,fx:[{type:"SLIDE",dir:"NORTH",start:1,end:0,duration:1,keySpline:"EASE_IN"},{type:"SLIDE",dir:"EAST",start:1,end:0,duration:1,keySpline:"EASE_IN"}]}]}]}}});ig.J=h;
ig.N("game.feature.map-content.prop-interact").O("impact.feature.map-content.entities.prop","game.feature.map-content.gui.icon-hover-text").K(function(){sc.nlb={INFO:{W6a:new sc.as(new ig.Vh("media/gui/map-icon.png",40,24,0,168),{FOCUS:[0],NEAR:[1]},0.1),Beb:new sc.as(new ig.Vh("media/gui/map-icon.png",40,24,0,168),{FOCUS:[2],NEAR:[3]},0.1)},GRAB:{W6a:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[40,41,42,41],NEAR:[43]},0.2),Beb:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[40,
41,42,41],NEAR:[43]},0.2)}};sc.Flb=ig.Ca.extend({ep:q,Y:q,wf:q,Pr:q,event:q,hwb:y,t_a:q,f:function(a,b){this.ep=a;this.Y=sc.nlb[b.icon||"INFO"];if(b.event)this.event=new ig.Ja({steps:sc.$r.xAb(b.event,a)});if(b.permaEffect)this.Pr=new ig.Bi(b.permaEffect);var c=this.event?this.Y.Beb:this.Y.W6a;this.hwb=b.combatOkay||y;this.t_a=b.cutsceneType||q;this.wf=new sc.OV(this.ep,this,c,sc.UE.mW,h);this.wf.lma=b.combatOkay!=g?!b.combatOkay:h;if(b.hoverText){c=new sc.rRa(new ig.Ra(b.hoverText),q,q,b.title?new ig.Ra(b.title):
q);this.wf.M_(c)}},$7a:function(){sc.cn.De(this.wf);if(this.Pr)return h},PGb:function(){if(this.ep.G.aZ){this.ep.G.aZ.stop();this.ep.G.aZ=q}if(this.Pr)this.ep.G.aZ=this.Pr.va(this.ep,{duration:-1})},C7a:function(){sc.cn.$e(this.wf);if(this.ep.G.aZ){this.ep.G.aZ.stop();this.ep.G.aZ=q}},Ge:function(){sc.cn.$e(this.wf);this.event&&this.event.Ka();this.Pr&&this.Pr.Ka()},Km:function(){if(this.event)sc.$r.e0(ig.Sz[this.t_a||"CUTSCENE"],this.event,q,this.ep);else return y}});ig.Z9=sc.Flb});ig.J=h;
ig.N("game.feature.map-content.entities.jump-panel").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a={2:{Kk:280,height:32,Vl:0.25},3:{Kk:315,height:48,Vl:0.3},4:{Kk:350,height:64,Vl:0.35},6:{Kk:420,height:96,Vl:0.45},8:{Kk:490,height:128,Vl:0.55}},b=Vec3.create(),c=Vec3.create();ig.wa.JumpPanel=ig.Wd.extend({G:new ig.ud("puzzle"),GN:q,fb:q,t:new ig.u({Dd:h,attributes:{eEb:{c:"String",d:"How height to jump (in tiles).",U:a},fb:{c:"VarCondition",d:"A condition for this if any. ",
xc:h}}}),f:function(b,c,d,f){this.parent(b,c,d,f);this.GN=a[f.jumpHeight]||a["2"];this.fb=new ig.de(f.condition||"");this.qc=this.fb.evaluate();this.b.type=ig.ca.BLOCK;this.b.F(16,16,0);this.Bd({sheet:{src:"media/entity/objects/object-effects.png",width:16,height:16},gfxOffset:{x:0,y:-1},SUB:[{name:"off",time:0.2,frames:[]},{name:"normal",time:0.15,frames:[6,7,8,9,10],repeat:h,globalTiming:h},{name:"glow",time:0.05,frames:[0,0,0,0,0,0,0,0,1,2,3,4,5]}]});window.Ed?this.Ma("glow"):this.Ma(this.qc?"normal":
"off");ig.navigation.bLa(this)},d8a:function(a){if(!this.fb.evaluate()&&a.sa==sc.pd.PLAYER)return y;a.b.yd.height?a.vca(this.GN.Kk*0.43,this.GN.Vl+0.1,100):a.WM(this.GN.Kk,this.GN.height,100,g,y);this.G.va("jumpTrail",a,{duration:this.GN.Vl});this.G.va("jumpButtom",this);this.Ma("glow",h,this.qc?"normal":"off",h);return h},ag:function(){var a=this.fb.evaluate();if(this.qc!=a){(this.qc=a)&&this.G.va("jumpButtom",this);this.Ma(a?"normal":"off");this.w6()}},w6:function(){var a=this.lc(ig.Pa.BOTTOM,b),
d=Vec3.assign(c,a);Vec3.JQ(d,0,-16,this.GN.height);(a=ig.navigation.oFa(a,d,ig.cq.c2))&&a.bMa("partyBlocked",!this.qc)}});var d={9:{Kk:160,height:16,speed:360,Vl:0.4},10:{Kk:160,height:16,speed:400,Vl:0.45},12:{Kk:200,height:16,speed:400,Vl:0.5},14:{Kk:230,height:16,speed:400,Vl:0.55},16:{Kk:240,height:16,speed:400,Vl:0.62},18:{Kk:270,height:16,speed:400,Vl:0.68},20:{Kk:290,height:16,speed:400,Vl:0.74},22:{Kk:310,height:16,speed:440,Vl:0.8},24:{Kk:320,height:16,speed:460,Vl:0.82},26:{Kk:330,height:16,
speed:480,Vl:0.84},28:{Kk:340,height:16,speed:500,Vl:0.86},30:{Kk:350,height:16,speed:520,Vl:0.88},32:{Kk:360,height:16,speed:540,Vl:0.9},34:{Kk:370,height:16,speed:560,Vl:0.92},36:{Kk:380,height:16,speed:580,Vl:0.94},54:{Kk:470,height:16,speed:700,Vl:1.12}},f={NORTH:{dir:{x:0,y:-1},size:{x:16,y:24},ow:8,Pd:y,qm:{x:0,y:-5}},EAST:{dir:{x:1,y:0},size:{x:24,y:16},ow:0,Pd:y,qm:{x:1,y:0}},SOUTH:{dir:{x:0,y:1},size:{x:16,y:24},ow:16,Pd:y,qm:{x:0,y:-6}},WEST:{dir:{x:-1,y:0},size:{x:24,y:16},ow:0,Pd:h,qm:{x:-1,
y:0}}};ig.wa.JumpPanelFar=ig.Wd.extend({Yo:q,G:new ig.ud("puzzle"),GN:q,fb:q,t:new ig.u({Dd:h,attributes:{Yo:{c:"String",d:"Type of jump Panel",U:f},vu:{c:"String",d:"How height to jump (in tiles).",U:d},fb:{c:"VarCondition",d:"A condition for this if any."}}}),f:function(a,b,c,i){this.parent(a,b,c,i);this.Yo=f[i.panelType]||f.NORTH;this.vu=d[i.jumpDistance]||d["12"];this.fb=new ig.de(i.condition||"");this.qc=this.fb.evaluate();this.b.type=ig.ca.BLOCK;this.b.F(this.Yo.size.x,this.Yo.size.y,0);this.Bd({sheet:{src:"media/entity/objects/object-effects.png",
width:16,height:16,offY:16,xCount:8},gfxOffset:this.Yo.qm,tileOffset:this.Yo.ow,flipX:this.Yo.Pd,renderMode:"lighter",SUB:[{name:"off",time:0.2,frames:[]},{name:"normal",time:0.15,frames:[4,5,6,7],repeat:h,globalTiming:h},{name:"glow",time:0.05,frames:[0,0,0,0,0,0,0,0,1,2,3]}]});window.Ed?this.Ma("glow"):this.Ma(this.fb.evaluate()?"normal":"off");ig.navigation.bLa(this)},e8a:function(a){if(!this.fb.evaluate()&&a.sa==sc.pd.PLAYER)return y;Vec2.assign(a.b.V,this.Yo.dir);Vec2.length(a.b.V,this.vu.speed);
Vec2.assign(a.b.wb,this.Yo.dir);Vec2.assign(a.face,this.Yo.dir);a.b.yd.height?a.vca(10,this.vu.Vl+0.1,this.vu.speed):a.WM(this.vu.Kk,this.vu.height,this.vu.speed,0,y);a.b.Ze.Am=0;this.G.va("jumpTrailFar",a,{duration:this.vu.Vl});this.G.va("jumpButtom",this);this.Ma("glow",h,this.qc?"normal":"off",h);return h},ag:function(){var a=this.fb.evaluate();if(this.qc!=a){(this.qc=a)&&this.G.va("jumpButtom",this);this.Ma(a?"normal":"off");this.w6()}},w6:function(){var a=this.lc(ig.Pa.BOTTOM,b),d=Vec3.assign(c,
a);Vec2.Tm(d,this.Yo.dir,16);(a=ig.navigation.oFa(a,d))&&a.bMa("partyBlocked",!this.qc)}});var i={DEFAULT:{size:{x:24,y:24},ow:0},NORTH:{dir:{x:0,y:-1},size:{x:24,y:24},ow:1},EAST:{dir:{x:1,y:0},size:{x:24,y:24},ow:4},SOUTH:{dir:{x:0,y:1},size:{x:24,y:24},ow:2},WEST:{dir:{x:-1,y:0},size:{x:24,y:24},ow:3}},j={4:{Kk:185,height:32,speed:175,Vl:0.4},"4_2":{Kk:190,height:32,speed:190,Vl:0.4},8:{Kk:250,height:48,speed:260,Vl:0.8}};ig.wa.JumpPanelFloat=ig.Wd.extend({Yo:q,G:new ig.ud("puzzle"),GN:q,fb:q,
dir:q,t:new ig.u({Dd:h,attributes:{Yo:{c:"String",d:"Type of jump Panel",U:i},vu:{c:"String",d:"How height to jump (in tiles).",U:j},fb:{c:"VarCondition",d:"A condition for this if any."}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.Cd.size=24;this.Yo=i[d.panelType]||i.DEFAULT;this.vu=j[d.jumpDistance]||j["4"];this.fb=new ig.de(d.condition||"");this.qc=this.fb.evaluate();this.b.type=ig.ca.TRIGGER;this.b.F(this.Yo.size.x,this.Yo.size.y,0);this.Bd({sheet:{src:"media/entity/objects/object-effects.png",
width:24,height:24,offX:128+this.Yo.ow*24,offY:144,xCount:2},SUB:[{name:"off",time:0.2,frames:[]},{name:"normal",time:0.1,frames:[0],repeat:h,globalTiming:h},{name:"glow",time:0.1,frames:[0]}]});window.Ed?this.Ma("glow"):this.Ma(this.fb.evaluate()?"normal":"off");ig.navigation.bLa(this)},oq:function(a){if(!this.fb.evaluate()&&a.sa==sc.pd.PLAYER)return y;if(this.Yo.dir){Vec2.assign(a.b.V,this.Yo.dir);Vec2.assign(a.b.wb,this.Yo.dir);Vec2.assign(a.face,this.Yo.dir)}Vec2.length(a.b.V,this.vu.speed);a.b.yd.height?
a.vca(10,this.vu.Vl+0.1,this.vu.speed):a.WM(this.vu.Kk,this.vu.height,this.vu.speed,0,y);a.b.Ze.Am=0;this.G.va("jumpTrailFar",a,{duration:this.vu.Vl});this.G.va("jumpButtom",this)},ag:function(){var a=this.fb.evaluate();if(this.qc!=a){(this.qc=a)&&this.G.va("jumpButtom",this);this.Ma(a?"normal":"off");this.w6()}},w6:function(){var a=this.lc(ig.Pa.BOTTOM,b),d=Vec3.assign(c,a);this.Yo.dir&&Vec2.Tm(d,this.Yo.dir,16);(a=ig.navigation.oFa(a,d))&&a.bMa("partyBlocked",!this.qc)}})});ig.J=h;
ig.N("game.feature.map-content.entities.teleport-central").O("impact.base.entity","impact.base.actor-entity","impact.feature.effect.effect-sheet","game.feature.interact.map-interact","game.feature.npc.entities.npc-waypoint").K(function(){function a(a,b,c,d){var f=c.b.g.z+200*d,i=c.tb();i.y=i.y-(c.b.g.z+Constants.gI+8);c=Vec2.create(i);c.y=c.y-64*d;a.push({type:"SET_CAMERA_POS",pos:i,speed:"NORMAL",transition:"EASE_IN_OUT",zoom:1});a.push({type:"DO_ACTION",entity:b,action:[{type:"SET_FLOAT_HEIGHT",
value:8},{type:"SHOW_EFFECT",effect:{sheet:"puzzle.wave-teleport",name:"panelFloat"+(d>0?"Up":"Down")},duration:-1,actionDetached:h},{type:"WAIT",time:0.25}],wait:h,keepState:h});a.push({time:0.1,ignoreSlowDown:y,type:"WAIT"});a.push({color:"white",alpha:1,time:0.6,lighter:h,type:"SET_OVERLAY"});a.push({type:"DO_ACTION",entity:b,action:[{type:"SET_SLIP_THROUGH",value:h},{type:"Z_INTERPOLATE",newZPos:f,duration:0.6,keySpline:"EASE_IN"},{type:"SET_Z_GRAVITY_FACTOR",value:0}],wait:y,keepState:h});a.push({type:"SET_SCREEN_BLUR",
alpha:0.3});a.push({type:"SET_CAMERA_POS",pos:c,speed:0.6,transition:"EASE_IN",zoom:1});a.push({time:0.6,ignoreSlowDown:y,type:"WAIT"});a.push({type:"CLEAR_SCREEN_BLUR"})}sc.b2={iY:{},EIb:function(a,b){if(a){this.iY[a]||(this.iY[a]=[]);this.iY[a].push(b)}},kOb:function(a,b){if(a){var c=this.iY[a];if(c){c.ye(b);c.length==0&&delete this.iY[a]}}},$zb:function(a,b){var c=this.iY[a];if(!c)return q;for(var d=c.length,d=0;d<c.length;++d){var f=c[d];if(f.B5==b)return f}return c[0]},cFa:function(a){if(a)return this.iY[a]}};
var b={CIRCLE:{Nb:function(a){var b=ig.r.cb.b,d=b.g.x+b.size.x-(a.g.x+a.size.x/2),a=b.g.y+b.size.y-(a.g.y+a.size.y/2);return d*d+a*a<c*c},nb:function(a){ig.qy.tA(a.g.x+a.size.x/2,a.g.y+a.size.y/2,0,c,c,"green",86400,h)}},RECT_OVERLAP:{Nb:function(a){var b=ig.r.cb.b,c=a.g.x-d,i=a.g.y-f,n=a.g.y+a.size.y+f;return b.g.x<a.g.x+a.size.x+d&&b.g.x+b.size.x>c&&b.g.y<n&&b.g.y+b.size.y>i},nb:function(a){var b=a.size.x+d*2,c=a.size.y+f*2;ig.qy.tA(a.g.x-d+b/2,a.g.y-f+c/2,0,b,c,"green",86400)}}},c=112,d=112,f=
64;ig.wa.TeleportCentral=ig.Kc.extend({map:"",If:"",G:new ig.ud("puzzle"),Hg:q,Ira:0,Jra:0,mo:q,I5a:q,G5a:q,H5a:3,v3a:h,oca:"RECT_OVERLAP",HE:q,t:new ig.u({Dd:h,attributes:{Ira:{c:"Number",d:"Probability that NPCs will enter through this exit"},Jra:{c:"Number",d:"Probability that NPCs will exit through this exit"},G:{c:"Boolean",d:"True if ground effects should be displayed",ab:h},mo:{c:"Landmarks",d:"landmark to activate",rRb:h,I:h},target:{c:"Entity",d:"Optional target to focus when landmark is activated",
I:h},fb:{c:"VarCondition",d:"Condition for the landmark to activate",xc:h,I:h},oca:{c:"String",d:"Type of detection",U:b,ab:"RECT_OVERLAP",I:h}},Kq:h,Lq:h,label:function(){return this.mo?this.mo+" > "+this.oca:""},Uk:h,Sl:"rgba(255,255,0, 0.5)",kD:"rgba(120,120,0, 0.8)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;d.size||this.b.F(32,32,0);this.dir=d.dir||"SOUTH";this.Ira=d.npcRunnerEnterProb||0;this.Jra=d.npcRunnerExitProb||0;this.v3a=d.effects==g?h:d.effects;if(d.landmark){this.mo=
d.landmark;this.G5a=new ig.de(d.condition||"");this.oca=d.detectType||"RECT_OVERLAP";this.I5a=d.target||q}this.HE=new sc.Rya(this)},update:function(){this.parent();if(this.mo&&!sc.map.XGa(this.mo,q,h))if(this.H5a>0)this.H5a--;else if(!sc.q.oe()&&(this.G5a.evaluate()&&!sc.qi.wc())&&b[this.oca].Nb(this.b)){var a=ig.Ja.rd(this.I5a);sc.map.eYa(this.mo,q,a?a:this)}},Ge:function(a){this.parent(a);this.Hg&&this.Hg.stop()},show:function(a){this.parent(a);if(!window.Ed&&this.v3a)this.Hg=this.G.va("teleportEffect",
this,{duration:-1})},q4:J(),rZ:J(),BF:function(a){var b=sc.b2.$zb(this.name,y);if(b)b.BF(a);else{b=this.b;a.b.aa=b.aa;a.b.pc=b.pc;a.b.g.z=b.g.z;ig.Jc.uq(ig.Jc.un.SOUTH||0,a.face);a.l(b.g.x+b.size.x/2-a.b.size.x/2,b.g.y+b.size.y/2-a.b.size.y/2)}},ppa:function(){if(!this.Ira&&!this.Jra)return q;for(var a=sc.b2.cFa(this.name),b=a.length,c=[],d=q;b--;){var f=a[b];c.push({Q:f,dir:f.dir,type:f.B5?sc.IL.EXIT:sc.IL.ENTER,ap:sc.bka.CENTER,XOb:h});d=d||f.map}return{xb:c,r4:this.Ira,v4:this.Jra,map:d}},EFa:M("HE")});
var i={SOLID:{s:function(a,b,c,d){return{shapeType:"Z_FLAT",offset:{x:0,y:4,z:0},sheet:{src:a,width:32,height:32,xCount:b,offX:c,offY:d},SUB:[{name:"inactive",time:1,frames:[0],repeat:y},{name:"active",time:1,frames:[1],repeat:y},{name:"red",time:1,frames:[2],repeat:y}]}}},AR:{s:function(){return{offset:{x:0,y:5,z:0},SUB:[{shapeType:"Z_FLAT",sheet:{src:"media/entity/objects/upgrade-symbol.png",width:32,height:32,xCount:2,offX:160,offY:0},frames:[0,0,0,1,2,3,4,5],time:0.07,repeat:h,SUB:[{name:"inactive"},
{name:"active"},{name:"red"}]},{renderMode:"lighter",sheet:{src:"media/entity/objects/upgrade-symbol.png",width:32,height:40,xCount:1,offX:224},wallY:1,shapeType:"Z_EXPAND",frames:[0,1,2],time:0.1,repeat:h,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}]}}},RHOMBUS_SQR_LEFT:{s:function(){return{shapeType:"Z_FLAT",offset:{x:0,y:4,z:0},sheet:{src:"media/map/rhombus-outside.png",width:32,height:32,xCount:1,offX:480,offY:0},time:1,frames:[0],repeat:y,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}}},
RHOMBUS_SQR_RIGHT:{s:function(){return{shapeType:"Z_FLAT",offset:{x:1,y:4,z:0},sheet:{src:"media/map/rhombus-outside.png",width:32,height:32,xCount:1,offX:480,offY:0},time:1,frames:[0],repeat:y,flipX:h,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}}},BERGEN_LEFT:{s:function(){return{shapeType:"Z_FLAT",offset:{x:0,y:4,z:0},sheet:{src:"media/map/bergen-trail.png",width:32,height:32,xCount:1,offX:256,offY:576},time:1,frames:[0],repeat:y,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}}},
HEAT_RIGHT:{s:function(){return{shapeType:"Z_FLAT",offset:{x:0,y:4,z:0},sheet:{src:"media/map/heat-area.png",width:32,height:32,xCount:1,offX:64,offY:688},time:1,frames:[0],repeat:y,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}}},WAVE_UP:{s:function(){return{shapeType:"Z_FLAT",renderMode:"lighter",offset:{x:0,y:4,z:0},sheet:{src:"media/entity/objects/upgrade-symbol.png",width:32,height:32,xCount:4,offX:0,offY:96},time:0.2,frames:[0,1,2,3],repeat:h,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}},
Fx:function(b,c,d){a(b,c,d,1)},IFa:{sheet:"puzzle.wave-teleport",name:"panelGlowUp"}},WAVE_DOWN:{s:function(){return{shapeType:"Z_FLAT",renderMode:"lighter",offset:{x:0,y:4,z:0},sheet:{src:"media/entity/objects/upgrade-symbol.png",width:32,height:32,xCount:4,offX:0,offY:96},time:0.2,frames:[3,2,1,0],repeat:h,SUB:[{name:"inactive"},{name:"active"},{name:"red"}]}},Fx:function(b,c,d){a(b,c,d,-1)},IFa:{sheet:"puzzle.wave-teleport",name:"panelGlowDown"}},RHOMBUS_SQR_STATION:{s:function(){return{shapeType:"Z_FLAT",
offset:{x:0,y:4,z:0},sheet:{src:"media/map/rhombus-outside.png",width:32,height:32,xCount:2,offX:416,offY:0},time:1,repeat:y,SUB:[{name:"inactive"},{name:"active",frames:[1]},{name:"red",frames:[0]}]}},OR:function(a,b){var c=a instanceof sc.G1?160:480;a instanceof sc.F1&&(c=c+(sc.sa.WEa(a.q.name)+1)*48);var d=a.Ah?"":"NPC";return[{type:"ADD_Z_POS_DELTA",zDelta:c},{type:"SET_Z_VEL",value:-400},{type:"SET_Z_GRAVITY_FACTOR",value:0},{type:"SHOW_ANIMATION",anim:"idle"},{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],
name:"trainTrail"+d},duration:-1,actionDetached:y},{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],name:"trainCubeNoStart"+d},duration:-1,actionDetached:y},{type:"Z_INTERPOLATE",duration:c/300,newZPos:a.b.g.z,keySpline:"EASE_OUT"}]},QR:function(a,b,c){if(!(a instanceof ig.wa.Combatant))a.target=c;a=a.Ah?"":"NPC";return[{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],name:"trainCube"+a},duration:-1,actionDetached:y},{type:"SHOW_ANIMATION",anim:"idle"},{type:"WAIT",time:0.25},{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],
name:"trainTrail"+a},duration:-1,actionDetached:y},{type:"SET_RELATIVE_SPEED",value:1},{type:"SET_TEMP_TARGET",kind:"NAMED_ENTITY",key:c.name},{type:"SET_FACE_FIX",value:h},{type:"SET_SPEED",value:50},{type:"STICKY_CIRCLE_AROUND",target:"TARGET",distance:48,duration:0.1,ccw:h,distAdjustSpeed:100,zDistance:1500},{type:"SET_SPEED",value:100},{type:"STICKY_CIRCLE_AROUND",target:"TARGET",distance:48,duration:0.1,ccw:h,distAdjustSpeed:200,zDistance:1500},{type:"SET_SPEED",value:200},{type:"STICKY_CIRCLE_AROUND",
target:"TARGET",distance:48,duration:0.8,ccw:h,distAdjustSpeed:300,zDistance:1500}]},Fx:function(a,b,c){b=c.tb();b.y=b.y-(c.b.g.z+Constants.gI+8);c=Vec2.create(b);c.y=c.y-160;a.push({type:"SET_CAMERA_POS",pos:b,speed:"NORMAL",transition:"EASE_IN_OUT",zoom:1});a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({type:"SET_SCREEN_BLUR",alpha:0.3});a.push({type:"SET_CAMERA_POS",pos:c,speed:1,transition:"EASE_IN",zoom:1});a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({color:"white",alpha:1,
time:0.3,lighter:h,type:"SET_OVERLAY"});a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({type:"CLEAR_SCREEN_BLUR"})},cu:["map.rhombus-sqr"]},RHOMBUS_SQR_STATION_START:{s:function(){return{shapeType:"Z_FLAT",offset:{x:0,y:4,z:0},sheet:{src:"media/map/rhombus-outside.png",width:32,height:32,xCount:1,offX:416,offY:32},time:1,repeat:y,SUB:[{name:"inactive"},{name:"active",frames:[0]},{name:"red",frames:[1]}]}},OR:function(a,b,c){var d=a instanceof sc.G1?160:320;a instanceof sc.F1&&(d=d+(sc.sa.WEa(a.q.name)+
1)*48);var c="tmp._skyRail."+c.name+".enter",f=b.lc(ig.Pa.TOP),i=Vec3.JQ(f,0,d,0,Vec3.create()),a=a.Ah?"":"NPC";return[{type:"SET_POS",newPos:i},{type:"CHANGE_VAR_NUMBER",varName:c,changeType:"add",value:1},{type:"SET_Z_GRAVITY_FACTOR",value:0},{type:"SHOW_ANIMATION",anim:"idle"},{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],name:"trainTrail"+a},duration:-1,actionDetached:y},{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],name:"trainCubeNoStart"+a},duration:-1,actionDetached:y},{type:"INTERPOLATE_POSITION",
duration:d/300,newPos:f,keySpline:"EASE_OUT"},{type:"CHANGE_VAR_NUMBER",varName:c,changeType:"sub",value:1}]},QR:function(a,b,c){if(!(a instanceof ig.wa.Combatant))a.target=c;var a=a.Ah?"":"NPC",d=b.lc(ig.Pa.TOP);Vec3.JQ(d,0,320,0);c="tmp._skyRail."+c.name+".exit";return[{type:"SHOW_EFFECT",effect:{sheet:b.cu[0],name:"trainCube"+a},duration:-1,actionDetached:y},{type:"SHOW_ANIMATION",anim:"idle"},{type:"CHANGE_VAR_NUMBER",varName:c,changeType:"add",value:1},{type:"WAIT",time:0.25},{type:"SHOW_EFFECT",
effect:{sheet:b.cu[0],name:"trainTrail"+a},duration:-1,actionDetached:y},{type:"SET_RELATIVE_SPEED",value:1},{type:"SET_Z_GRAVITY_FACTOR",value:0},{type:"SET_FACE_FIX",value:h},{type:"INTERPOLATE_POSITION",duration:1,newPos:d,keySpline:"EASE_IN"},{type:"CHANGE_VAR_NUMBER",varName:c,changeType:"sub",value:1},{type:"WAIT",time:1}]},Fx:function(a,b,c){b=c.tb();b.y=b.y-(c.b.g.z+Constants.gI+8);c=Vec2.create(b);c.y=c.y+160;a.push({type:"SET_CAMERA_POS",pos:b,speed:"NORMAL",transition:"EASE_IN_OUT",zoom:1});
a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({type:"SET_SCREEN_BLUR",alpha:0.3});a.push({type:"SET_CAMERA_POS",pos:c,speed:1,transition:"EASE_IN",zoom:1});a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({color:"white",alpha:1,time:0.3,lighter:h,type:"SET_OVERLAY"});a.push({time:0.3,ignoreSlowDown:y,type:"WAIT"});a.push({type:"CLEAR_SCREEN_BLUR"})},cu:["map.rhombus-sqr"]}};ig.YE.TeleportField=function(a){return"TeleportField["+(a.yf.name||"")+"]"};ig.wa.TeleportField=ig.Wd.extend({SF:q,
map:q,If:q,dir:"SOUTH",rD:q,Cda:q,zN:y,YHa:q,FNb:new sc.as(new ig.Vh("media/gui/map-icon.png",40,48,160,168),{FOCUS:[1],NEAR:[0]},0.1),wf:q,G:{jeb:new ig.ud("scene.upgrade"),b9a:new ig.ud("puzzle"),Mf:new ig.ud("teleport"),Xd:q},Dn:q,ls:q,mi:q,t:new ig.u({Dd:h,attributes:{nSb:{c:"Entity",d:"Central Entity the field belongs to",fla:"TeleportCentral",I:h},dir:{c:"String",d:"View direction of teleport ground.",U:ig.Jc.Lk,ab:"SOUTH"},map:{c:"Maps",d:"Map to be loaded",bh:"Map",I:h},If:{c:"Marker",d:"Marker on map to teleport player to"},
Zg:{c:"VarCondition",d:"Condition for teleporter to appear",xc:h},KXb:{c:"LangLabel",d:"Label displayed for teleporter"},YHa:{c:"VarCondition",d:"Condition for a long teleport sequence",ab:"false"},EWb:{c:"Boolean",d:"If true, show exit graphics and behave like exit even without map defined"},Dn:{c:"Event",d:"Event to be performed when entering the teleport ground",xc:h,I:h},ls:{c:"VarCondition",d:"Condition to show the block event when entering this teleport ground"},mi:{c:"String",d:"Graphical appearance of teleporter.",
U:i}},label:function(){return!this.map?"":this.map+" > "+this.If},Sl:"rgba(255,255,0, 0.5)",kD:"rgba(120,120,0, 0.8)"}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.SF=d.central&&d.central.name;sc.b2.EIb(this.SF,this);this.map=d.map;this.If=d.marker;this.dir=d.dir;this.B5=d.map||d.pseudoExit;this.YHa=new ig.de(d.longTelCond);var a=ig.Rf.get("map"),c=b=0,f=g,o=1;if(a.Rq){b=a.Rq.x;c=a.Rq.y;f=a.Rq.vh;o=a.kf||1}this.b.F(24,24,o);this.mi=i[d.gfxType]||i.SOLID;if(this.mi.IFa)this.Cda=
new ig.Bi(this.mi.IFa);if(this.mi.cu){this.cu=[];for(o=0;o<this.mi.cu.length;++o)this.cu[o]=new ig.ud(this.mi.cu[o])}this.Bd(this.mi.s(a.sheet,f,b,c));if(d.blockEvent){this.Dn=new ig.Ja({name:"DOOR BLOCK EVENT",steps:d.blockEvent});this.ls=new ig.de(d.blockEventCondition||"true")}if(this.Kpa()){this.wf=new sc.OV(this,this,this.FNb,sc.UE.mW,h);d=new sc.rRa(new ig.Ra(d.teleportLabel),24,h);this.wf.M_(d);this.wf.LB(1,0)}this.Ma(this.B5?"red":"active")},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();
this.G.Xd=q}this.Kpa()&&sc.cn.De(this.wf);if(!a){this.Ya.alpha=0;this.G.jeb.va("symbolAppear",this,{})}},po:function(){if(this.rD){this.rD.stop();this.rD=q}this.Kpa()&&sc.cn.$e(this.wf);this.G.Xd=this.G.jeb.va("symbolHide2",this,{callback:this})},Aj:function(a){if(a.ek()){this.G.Xd=q;this.hide()}},Ge:function(a){this.parent(a);this.Kpa()&&sc.cn.$e(this.wf);this.Cda&&this.Cda.Ka();if(this.cu)for(a=this.cu.length;a--;)this.cu[a].Tc();sc.b2.kOb(this.SF,this)},Kpa:function(){return this.map||this.Dn},
oq:function(a){!a instanceof ig.Jc||this.G.Xd||this.rD||this.Rbb()},update:function(){if(this.rD){for(var a=ig.r.nG(this),b=y,c=a.length;c--;)if(a[c]instanceof ig.Jc){b=h;break}if(this.rD&&!b){this.rD.stop();this.rD=q;this.Ma(this.B5?"red":"active")}}if(!this.zN){this.vIb();this.zN=h}this.parent()},vIb:function(){if(!this.rD&&!this.G.Xd){var a=ig.r.nG(this);if(a.length>0){for(var b=a.length,c=y;b--;)c=c||a[b]instanceof ig.Jc;c&&this.Rbb()}}},Rbb:function(){if(!this.rD)this.rD=this.Cda?this.Cda.va(this,
{duration:-1}):this.G.b9a.va("teleportBlock",this,{duration:-1})},q4:function(a){var b=this.mG(a,!this.mi.QR);this.mi.QR&&b.push.apply(b,this.mi.QR(a,this,ig.r.Is[this.SF]));b=new ig.Xe("doorAction",b);a.Zf(b,h)},rZ:function(a){ig.bt.Pw(a);this.G.Mf.va(a.NO=="none"?"showDefaultSilent":"showDefault",a,{});if(this.mi.OR){a=this.mi.OR(a,this,ig.r.Is[this.SF]);return new ig.Xe("doorAction",a)}return q},mG:function(a,b){var c=a.NO=="none",d=[{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_FACE_FIX",
value:y},{type:"SET_COLL_TYPE",value:"IGNORE"},{type:"SET_RELATIVE_SPEED",value:1},{type:"NAVIGATE_TO_POINT",target:this.lc(ig.Pa.BOTTOM),distance:32},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"SET_COLL_TYPE",value:"TRIGGER"},{type:"NAVIGATE_TO_POINT",target:this.lc(ig.Pa.BOTTOM),precise:h},{type:"STOP_XY"},{type:"SET_FACE",face:this.dir,rotate:h}];b&&d.push({type:"SHOW_EFFECT",effect:{sheet:"teleport",name:c?"hideDefaultSilent":"hideDefault"},duration:0,wait:h,actionDetached:h});return d},OI:function(a,
b,c,d){if(b)if(c){var f=sc.b2.cFa(this.SF);if(f&&!(f.length<=c.length))for(var i=f.length;i--;)if(f[i].B5&&c.indexOf(f[i])==-1){f[i].OI(a,b,q,d);c.push(f[i]);break}}else{c=this.mG(b,y);!d&&this.mi.QR&&c.push.apply(c,this.mi.QR(b,this,ig.r.Is[this.SF]));a.push({type:"DO_ACTION",entity:b,action:c,wait:d});if(d&&this.mi.QR){c=this.mi.QR(b,this,ig.r.Is[this.SF]);a.push({type:"DO_ACTION",entity:b,action:c,wait:y})}}},Km:function(){if(this.Dn&&this.ls.evaluate()){sc.$r.TK(this.Dn);return h}var a=ig.r.cb,
b=[],c=[this];sc.sa.He.length>=1&&this.OI(b,sc.sa.Xk(0),c,y);sc.sa.He.length>=2&&this.OI(b,sc.sa.Xk(1),c,y);this.OI(b,a,q,h);b.push({type:"SET_TELEPORT_COLOR",lighter:h,color:"white"});if(c=this.YHa.evaluate())if(this.mi.BEb)this.mi.BEb(b,a,this);else{b.push({type:"SET_CAMERA_TARGET",entity:a,speed:"NORMAL",transition:"EASE_IN_OUT",zoom:1});b.push({type:"SHOW_EFFECT",entity:a,effect:{sheet:"teleport",name:"hideSlow"}});b.push({time:0.2,ignoreSlowDown:y,type:"WAIT"});b.push({type:"SET_CAMERA_ZOOM",
zoom:3,duration:4,transition:"EASE_IN"});b.push({color:"white",alpha:1,time:3,lighter:h,type:"SET_OVERLAY"});b.push({zoomType:"LIGHT",fadeIn:0.5,duration:4,fadeOut:1,type:"SET_ZOOM_BLUR",name:q});b.push({time:4,ignoreSlowDown:y,type:"WAIT"})}else if(this.mi.Fx)this.mi.Fx(b,a,this);else{b.push({type:"SET_CAMERA_TARGET",entity:a,speed:"FAST",transition:"EASE_IN_OUT",zoom:1});b.push({time:0.1,ignoreSlowDown:y,type:"WAIT"});b.push({color:"white",alpha:1,time:1,lighter:h,type:"SET_OVERLAY"});b.push({type:"SET_CAMERA_ZOOM",
zoom:1.5,duration:1,transition:"EASE_IN"});b.push({type:"SHOW_EFFECT",entity:a,effect:{sheet:"teleport",name:"hideDefault"}});b.push({time:1.2,ignoreSlowDown:y,type:"WAIT"})}b.push({type:"TELEPORT",map:this.map,marker:this.If});b.push({time:3,ignoreSlowDown:y,type:"WAIT"});a=new ig.Ja({steps:b});c?sc.$r.TK(a):ig.r.vi.Dp(a,ig.Qm.BLOCKING);return h},ag:function(){this.zN=y},BF:function(a){var b=this.b;a.b.aa=b.aa;a.b.pc=b.pc;a.b.g.z=b.g.z;ig.Jc.uq(ig.Jc.un[this.dir]||0,a.face);a.l(b.g.x+b.size.x/2-
a.b.size.x/2,b.g.y+b.size.y/2-a.b.size.y/2);if(a.Ah&&this.mi.OR)ig.r.rga=this},T7a:function(a){if(this.mi.OR){var b=this.mi.OR(a,this,ig.r.Is[this.SF]),b=new ig.Xe("doorAction",b);b.sq=h;a.Zf(b)}a=[this];sc.sa.He.length>=1&&this.IUa(sc.sa.Xk(0),a);sc.sa.He.length>=2&&this.IUa(sc.sa.Xk(1),a)},IUa:function(a,b){if(a){var c=sc.b2.cFa(this.SF);if(c&&!(c.length<=b.length))for(var d=c.length;d--;)if(!c[d].B5&&b.indexOf(c[d])==-1){c[d].BF(a);c[d].nqb(a);b.push(c[d]);break}}},nqb:function(a){if(this.mi.OR){var b=
this.mi.OR(a,this,ig.r.Is[this.SF]),b=new ig.Xe("doorAction",b);b.sq=h;a.Zf(b)}},g5a:function(){return!!this.rD}})});ig.J=h;
ig.N("game.feature.map-content.gui.rhombus-map").O("impact.feature.gui.base.box","impact.feature.gui.gui","impact.feature.interact.button-interact","game.feature.menu.gui.menu-misc","game.feature.gui.base.numbers","game.feature.menu.gui.enemies.enemy-pages").K(function(){sc.Amb=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},Gb:q,Z:q,ua:q,UHa:[],Hp:q,bla:y,Pl:y,pj:0,Ci:Vec2.vc(-1E4,-1E4),bo:Vec2.vc(-1E4,-1E4),info:q,jo:q,fc:q,
r5:q,f:function(a){this.parent();this.a.zIndex=90;this.a.Nt=h;this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.Gb=a||q;this.Z=new ig.$s;this.ua=new sc.R9;this.ua.CS=h;this.ua.Rk(function(a){a&&a.Q&&this.info.ga(a.Q.description)}.bind(this));this.ua.jn(function(){this.info.ga("",0.2);this.r5.hide()}.bind(this));this.ua.$l=function(){ig.input.qb==ig.Yb.Wc&&(sc.ba.Au()&&this.Hp)&&this.Hp.cc()}.bind(this);this.Z.hh(this.ua);this.fc=new ig.da;this.fc.F(ig.i.width,ig.i.height);this.m(this.fc);this.cursor=
new sc.gxa;this.m(this.cursor);this.info=new sc.B9(this.a.size.x,21,h);this.info.H(ig.k.ra,ig.k.Cb);this.m(this.info);this.info.j("DEFAULT");this.jo=new sc.B9(this.a.size.x,21,h);this.jo.H(ig.k.hb,ig.k.$);this.jo.text.H(ig.k.hb,ig.k.vb);this.jo.ga(ig.lang.get("sc.gui.menu.rhombus.help"));this.m(this.jo);this.jo.j("DEFAULT");this.r5=new sc.Cmb;this.m(this.r5);ig.La.De(this.Z);this.zwb();this.j("DEFAULT",h)},update:function(){this.bla=y;if(!ig.La.zh()&&this.ua.wc()){if(this.pj!=ig.input.qb){this.Pl=
ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb;var a=q;if(ig.input.qb==ig.Yb.Wc){a=this.Ci;this.AW(a);this.bo.x=a.x;this.bo.y=a.y;this.yC();this.bla=y;if(this.Hp)this.Hp.focus=y;this.Hp=q;this.info.ga("",0.2);this.cursor.moveTo(this.bo.x,this.bo.y)}else if(ig.input.qb==ig.Yb.xm){this.Ci.x=this.bo.x;this.Ci.y=this.bo.y;this.cursor.Om()}this.cursor.CEb()}if(ig.input.qb==ig.Yb.Wc){var b=a=0,c=0,d=y;if((c=sc.ba.Cf(ig.Nd.wn))<-0.5){a=(-100+c*100)*ig.i.Sa;d=h}else if((c=sc.ba.Cf(ig.Nd.wn))>0.5){a=(100+c*100)*
ig.i.Sa;d=h}if((c=sc.ba.Cf(ig.Nd.xn))<-0.5){b=(-100+c*100)*ig.i.Sa;d=h}else if((c=sc.ba.Cf(ig.Nd.xn))>0.5){b=(100+c*100)*ig.i.Sa;d=h}if(d){this.bla=h;this.bo.x=a>=0?Math.floor(this.bo.x+a):Math.ceil(this.bo.x+a);this.bo.y=b>=0?Math.floor(this.bo.y+b):Math.ceil(this.bo.y+b);this.yC();this.cursor.moveTo(this.bo.x,this.bo.y)}}}},zwb:function(){for(var a=ig.r.ln,b=a.length;b--;){var c=a[b];if(c instanceof ig.wa.RhombusPoint&&(!c.fb||c.fb.evaluate())){c=this.ywb(c);this.ua.jd(c);this.UHa.push(c);this.fc.m(c)}}},
ywb:function(a){var b=new sc.Dmb(a,this),c=b.a,a=a.b;ig.i.Jy(d,Math.round(a.g.x+a.size.x/2),Math.round(a.g.y-a.g.z-a.size.z/2+a.size.y/2));if(d.x<0)d.x=0;if(d.x>ig.i.width)d.x=ig.i.width;if(d.y<0)d.y=0;if(d.y>ig.i.height)d.y=ig.i.height;c.g.x=d.x-c.size.x/2;c.g.y=d.y-c.size.y/2;return b},cc:function(a){for(var b=this.UHa.length;b--;)this.UHa[b].j("HIDDEN");this.r5.hide();this.j("HIDDEN",y,h,function(){ig.La.$e(this.Z);this.Gb&&this.Gb(a.map,a.If,a)}.bind(this),0)},Z0a:function(a,b,c){if(this.Hp==
c){if(ig.input.qb==ig.Yb.Wc){this.bo.x=a;this.bo.y=b;this.cursor.nu(a,b)}}else{this.bo.x=a;this.bo.y=b;if(this.Hp&&this.Hp.focus)this.Hp.focus=y;if((this.Hp=c)&&!this.Hp.focus)this.Hp.focus=h;this.cursor.nu(a,b);this.r5.show(this.Hp)}},Om:function(a){if(this.Hp==a){if(this.Hp)this.Hp.focus=y;this.Hp=q;this.info.ga("",0.2);this.cursor.Om();this.r5.hide()}},AW:function(a){if(a.x<=-1E4||a.y<=-1E4){a.x=ig.i.width/2;a.y=ig.i.height/2}},yC:function(){var a=this.bo.x;this.bo.x=a.Rb(5,ig.i.width-Math.floor(this.cursor.a.size.x/
2));a=this.bo.y;this.bo.y=a.Rb(41,ig.i.height-this.cursor.a.size.y-4)}});sc.Cmb=ig.Ue.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:432,y:304},flipped:{x:456,y:304}}}),s:new ig.ia("media/gui/rhombus-map.png"),title:q,Ee:q,Y:q,f:function(){this.parent(148,100);this.title=new sc.ea("",{font:sc.Ea.he});this.title.H(ig.k.Ia,ig.k.$);this.title.l(0,
2);this.m(this.title);(new ig.mf("#CCCCCC",144,82)).l(3,18);this.Y=new ig.ec(this.s,0,0,142,80);this.Y.H(ig.k.Ia,ig.k.$);this.Y.l(0,17);this.m(this.Y);this.Ee=new sc.Bmb;this.m(this.Ee);this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.nc("#CCCCCC",3,this.title.a.size.y+1,142,1)},show:function(a){this.fBa(a.a);this.setData(a.Q);this.j("DEFAULT");this.Aa=h},hide:function(a){this.j("HIDDEN",a);this.Aa=y},setData:function(a){this.title.ga(a.title);this.Y.offsetY=a.Y*80},fBa:function(a){var b=this.a,
c=b.xe.alpha==0;d.x=a.g.x+Math.floor(a.size.x/2);d.y=a.g.y+Math.floor(a.size.y/2);a=d.y+-46;d.y=Math.max(10,Math.min(ig.i.height-100-10,d.y+-46));if(c)b.g.y=d.y;var k=38+(a-d.y);if(d.x+173<ig.i.width){this.ii="default";if(c)b.g.x=d.x+20+10;b.kd(d.x+20,d.y,0.2,KEY_SPLINES.EASE);this.Ee.pz(-10,Math.max(7,Math.min(125,k)),y)}else{this.ii="flipped";if(c)b.g.x=d.x-b.size.x-20-10-1;b.kd(d.x-b.size.x-20-1,d.y,0.2,KEY_SPLINES.EASE);this.Ee.pz(b.size.x+1,Math.max(7,Math.min(125,38+(a-d.y))),h)}this.Ee.LF=
y;this.Ee.$h=y;if(k<7){this.Ee.LF=h;this.Ee.$h=h}else if(k>125)this.Ee.LF=h}});sc.Bmb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},Pd:y,$h:y,LF:y,f:function(){this.parent();this.F(9,15);this.j("DEFAULT")},pz:function(a,b,c,d,l){this.l(a,b);this.Pd=c||y;this.$h=d||y;this.LF=l||y},Da:function(a){a.na(this.s,0,0,this.LF?444:434,337,9,15,this.Pd,this.$h)}});var a=[0.1,0.1,0.1,0.1],b=[0,0,0,0],
c=sc.gd.submit,d=Vec2.vc(0,0);sc.Dmb=ig.vn.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Xa:0},time:0.2,p:KEY_SPLINES.LINEAR}},s:new ig.ia("media/gui/rhombus-map.png"),Q:q,Gb:q,Y:0,origin:y,yr:0,Qca:0,f:function(a,b){this.parent(h,y);this.F(16,16);this.Eb(8,8);this.Q=a;this.Gb=b;this.origin=a.map==ig.r.T8a;this.Y=this.Q.Y*24;this.j("HIDDEN",h);this.j("DEFAULT",y,y,J().bind(this))},cc:function(){if(ig.input.qb==ig.Yb.xm){var a=Math.floor(sc.ba.Ln());if(a<=21||a>=
299)return}c.play();this.Gb.cc(this.Q)},update:function(){if(this.focus){this.yr=this.yr+ig.i.Sa;if(this.yr>=a[this.Qca]){this.Qca=(this.Qca+1)%b.length;this.yr=0}}},Da:function(a){this.focus&&a.na(this.s,-this.a.Db.x,-this.a.Db.y,144+32*b[this.Qca],0,32,32).yi("lighter");a.na(this.s,this.a.Db.x-12,this.a.Db.y-12,144+this.Y,48+(this.origin?24:0),24,24);this.origin&&a.na(this.s,-21,-13,208,32,22,17)},JG:function(){if(!ig.La.zh()){if(ig.input.qb==ig.Yb.Wc){var a=this.lG();if(this.Gb.bla){this.Gb.Om(this);
return y}if(a<=10){a=this.a;this.Gb.Z0a(a.g.x+Math.floor(a.size.x/2)-1,a.g.y+Math.floor(a.size.y/2)+1,this,h);return h}this.Gb.Om(this)}else if(ig.input.qb==ig.Yb.xm){var b=Math.floor(sc.ba.Kp()),c=Math.floor(sc.ba.Ln()),a=this.a;(b=b>=a.g.x&&b<=a.g.x+a.size.x&&c>=a.g.y&&c<=a.g.y+a.size.y)?this.Gb.Z0a(a.g.x+Math.floor(a.size.x/2)-1,a.g.y+Math.floor(a.size.y/2)+1,this):this.Gb.Om(this);return b}return y}},Om:function(){this.yr=0;this.Qca=-1;this.Gb.Om(this)},lG:function(){return Math.floor(Vec2.HR(this.Gb.bo.x,
this.Gb.bo.y,this.a.g.x+Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))}})});ig.J=h;
ig.N("game.feature.map-content.entities.rhombus-point").O("impact.base.entity","game.feature.map-content.gui.rhombus-map").K(function(){ig.wa.RhombusPoint=ig.Kc.extend({t:new ig.u({Dd:h,attributes:{title:{c:"LangLabel",d:"Name of the teleport location"},description:{c:"LangLabel",d:"Short description of the location",gs:h},map:{c:"Maps",d:"Map to be teleported to",bh:"Map"},If:{c:"Marker",d:"Marker on Map to be teleported to"},fb:{c:"VarCondition",d:"optional condition for this location to show",
I:h},Y:{c:"Integer",d:"Index of the preview icon to use."}},Kq:h,Lq:h,B_:2,Uk:h,Sl:"rgba(255, 128, 30, 0.5)",kD:"rgba(128, 128, 0, 1)",UIa:h}),title:q,description:q,fb:q,map:q,If:q,Y:0,f:function(a,b,c,d){this.parent(a,b,c,d);this.F(16,16,0);this.b.type=ig.ca.NONE;this.title=ig.Ra.ic(d.title);this.description=ig.Ra.ic(d.description);this.map=d.map;this.If=d.marker;this.Y=d.icon||0;this.fb=d.condition?new ig.de(d.condition):q}})});ig.J=h;
ig.N("game.feature.map-content.plug-in").O("game.feature.map-content.entities.elevator","game.feature.map-content.map-content-steps","game.feature.map-content.gui.icon-hover-text","game.feature.map-content.map-style","game.feature.map-content.sc-doors","game.feature.map-content.prop-interact","game.feature.map-content.entities.jump-panel","game.feature.map-content.entities.teleport-central","game.feature.map-content.entities.rhombus-point").K(function(){ig.M5.push("sc.map-content");window.Ed&&wm.Ek.push("game.feature.map-content.editors.map-content-editor")});
ig.J=h;
ig.N("game.feature.model.model-steps").O("impact.base.action","impact.base.event","game.feature.player.player-model","game.feature.model.game-model").K(function(){ig.oa.START_DEMO_HIGHSCORE_TIMER=ig.qa.extend({t:new ig.u({attributes:{}}),start:function(){sc.q.cNb()}});ig.oa.STOP_DEMO_HIGHSCORE_TIMER=ig.qa.extend({bH:y,t:new ig.u({attributes:{bH:{c:"Boolean",d:"True if this is for the observatory challenge.",ab:y}}}),f:function(a){this.bH=a.observatory||y},start:function(){sc.q.tNb(this.bH)}});ig.oa.SET_TASK=
ig.qa.extend({ik:q,tHa:y,t:new ig.u({attributes:{ik:{c:"LangLabel",d:"Current task of the game.",gs:h},tHa:{c:"Boolean",d:"Keep Task displayed all the time"}},width:500}),f:function(a){this.ik=new ig.Ra(a.task);this.tHa=a.keepDisplayed},start:function(){sc.q.GU(this.ik,this.tHa)}});ig.oa.SET_PERMA_TASK=ig.qa.extend({ik:q,t:new ig.u({attributes:{ik:{c:"LangLabel",d:"Current perma task of the game. Displayed in Synopsis",gs:h}},width:500}),f:function(a){this.ik=new ig.Ra(a.task)},start:function(){sc.q.vMa(this.ik)}});
ig.oa.SET_PAUSE_MUSIC_STOP=ig.qa.extend({stop:y,t:new ig.u({attributes:{stop:{c:"Boolean",d:"If true: stop music in pause menu."}},width:500}),f:function(a){this.stop=a.stop||y},start:function(){sc.q.gga=this.stop}});ig.oa.SET_MOBILITY_BLOCK=ig.qa.extend({value:q,t:new ig.u({attributes:{value:{c:"String",d:"Type of Mobility block. SAVE also blocks teleport",U:sc.BP}}}),f:function(a){this.value=a.value},start:function(){sc.q.hLb(this.value)}});ig.oa.ACTIVATE_CANCEL_BUTTON=ig.qa.extend({text:q,t:new ig.u({attributes:{text:{c:"LangLabel",
d:"If defined: enable cancel button with this text. If undefined: disable cancel button"}},width:500}),f:function(a){if(a.text)this.text=new ig.Ra(a.text)},start:function(){sc.q.A$a(this.text)}});ig.oa.CLEAR_CANCEL_BUTTON=ig.qa.extend({t:new ig.u({attributes:{},width:500}),f:J(),start:function(){sc.q.A$a()}});ig.oa.SET_FORCE_COMBAT=ig.qa.extend({value:y,t:new ig.u({attributes:{value:{c:"Boolean",d:"True if combat should remain active."}}}),f:function(a){this.value=a.value||y},start:function(){sc.q.zU(this.value,
h)}});ig.oa.INCREASE_COMBAT_RANK=ig.qa.extend({value:y,t:new ig.u({attributes:{value:{c:"Number",d:"Increase Combat Rank by this weight. 1=one enemy"}}}),f:function(a){this.value=a.value},start:function(){sc.q.c4a(this.value)}});ig.oa.CLEAR_TASK=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.q.GU(q,y)}});ig.oa.SET_PLAYER_CORE=ig.qa.extend({Gp:q,value:q,t:new ig.u({attributes:{Gp:{c:"String",d:"Type of Core.",U:sc.ng},value:{c:"Boolean",d:"True to activate core."}}}),f:function(a){this.Gp=
sc.ng[a.core];this.value=a.value},start:function(){sc.q.T.EKb(this.Gp,this.value)}});ig.oa.SET_PLAYER_SP_LEVEL=ig.qa.extend({aa:q,t:new ig.u({attributes:{aa:{c:"String",d:"Type of Core.",U:{"0":"0 SP",1:"4 SP",2:"8 SP",3:"12 SP",4:"16 SP"}}}}),f:function(a){this.aa=a.level},start:function(){sc.q.T.DO(this.aa)}});ig.oa.INCREASE_PLAYER_SP_LEVEL=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.q.T.DO(sc.q.T.W_+1)}});ig.oa.ADD_PLAYER_EXP=ig.qa.extend({exp:0,aa:0,t:new ig.u({attributes:{exp:{c:"NumberExpression",
d:"Experience count."},aa:{c:"Number",d:"Level of experience",I:h}}}),f:function(a){this.exp=a.exp;this.aa=a.level||0},start:function(){var a=this.aa||sc.q.T.aa,b=ig.Ja.eh(this.exp),a=sc.q.T.MW(b,a,g,g,sc.IV.Zmb);sc.pa.bc("player","expOther",a)}});ig.oa.SET_ALL_PLAYER_CORE=ig.qa.extend({value:q,t:new ig.u({attributes:{value:{c:"Boolean",d:"True to activate core."}}}),f:function(a){this.value=a.value},start:function(){sc.q.T.FKb(this.value)}})});ig.J=h;
ig.N("game.feature.model.plug-in").O("game.feature.model.base-model","game.feature.model.game-model","game.feature.model.model-steps","game.feature.model.options-model").K(function(){if(window.Ed){wm.Um(/TASK/,"violet");wm.Um(/CORE/,"violet");wm.Ek.push("game.feature.model.editors.options-editors")}});ig.J=h;ig.N("game.feature.skills.plug-in").O("game.feature.skills.skills","game.feature.skills.skilltree").K(J());ig.J=h;
ig.N("game.feature.msg.entities.event-trigger").O("impact.base.entity").K(function(){sc.$r={xAb:function(a,c){a=ig.copy(a);a.unshift(this.Dza({player:h},c));a.unshift(this.Dza({party:"Member2"},c));a.unshift(this.Dza({party:"Member3"},c));a.unshift({type:"SET_CAMERA_TARGET",entity:c,speed:"FAST",transition:"EASE_IN_OUT"});return a},Dza:function(a,c){return{type:"DO_ACTION",entity:a,action:[{type:"SET_FACE_TO_ENTITY",entity:c,rotate:h},{type:"SET_FACE_FIX",value:h},{type:"SET_RELATIVE_SPEED",value:0.3},
{type:"MOVE_TO_ENTITY_DISTANCE",entity:c,min:24,max:40,subRadius:y,maxTime:0.3}]}},TK:function(a,c,d){return ig.r.vi.Dp(a,ig.Qm.BLOCKING,this.Hfa.bind(this),this.OZ.bind(this),c,d)},VMb:function(a,c,d){return ig.r.vi.Dp(a,ig.Qm.BLOCKING,this.LFb.bind(this),this.OZ.bind(this),c,d)},Hfa:function(){sc.q.Cca(y)},LFb:function(){sc.q.Cca(h)},OZ:function(){sc.q.dY()},fNb:function(a,c){var d=ig.r.vi.Dp(a,ig.Qm.BLOCKING,this.LGb.bind(this),this.KGb.bind(this),c);d.hga=h;return d},LGb:function(){sc.q.message.bab(h)},
KGb:function(){sc.q.message.bab(y);sc.q.message.csa(y)},TMb:function(a,c,d){a=ig.r.vi.Dp(a,ig.Qm.INTERRUPTABLE,this.wFb.bind(this),this.vFb.bind(this),c,d);a.hga=h;return a},wFb:function(){sc.jb.setActive(h)},vFb:function(){sc.jb.setActive(y)},e0:function(a,c,d,f){return a==ig.Sz.CUTSCENE?sc.$r.TK(c,d,f):a==ig.Sz.COMBAT_CUTSCENE?sc.$r.VMb(c,d,f):a==ig.Sz.AUTO_CONTROL?sc.$r.TMb(c,d,f):a==ig.Sz.INTERRUPTABLE?ig.r.vi.Dp(c,ig.Qm.INTERRUPTABLE,g,g,d,f):ig.r.vi.Dp(c,ig.Qm.PARALLEL,g,g,d,f)}};ig.Sz={PARALLEL:1,
CUTSCENE:2,INTERRUPTABLE:3,AUTO_CONTROL:4,COMBAT_CUTSCENE:5};ig.vwa={ALWAYS:0,ONCE_PER_ENTRY:1,ONCE:2};ig.YE.EventTrigger=function(a){return"EVENT["+(a.yf.name||"")+"]"};ig.wa.EventTrigger=ig.Kc.extend({gD:q,wE:q,doa:q,event:q,yy:q,DE:q,t:new ig.u({Dd:h,attributes:{gD:{c:"String",d:"Type of event. Cutscenes will stop the movement of the player and can't be executed in parallel. Auto Control events will take over the player's control.",U:ig.Sz},wE:{c:"VarCondition",d:"Condition for the event to start",
xc:h},doa:{c:"VarCondition",d:"Condition for the event to not start (even if start condition is true)",xc:h,ab:"false"},event:{c:"Event",d:"Event to be performed",xc:h},TXb:{c:"String",d:"How often should this event be run?",U:ig.vwa},FVb:{c:"EventLoadCondition",d:"If true: condition is checked on map entry and event is only loaded if ture. onStart => Use start conditions, custom => use custom conditions",I:h}},label:N(""),Uk:h,Sl:"rgba(255,0,0, 0.5)",UIa:h}),f:function(a,c,d,f){this.parent(a,c,d,
f);this.b.type=ig.ca.NONE;this.b.F(16,16,0);this.gD=ig.Sz[f.eventType]||ig.Sz.PARALLEL;this.wE=new ig.de(f.startCondition);this.doa=new ig.de(f.endCondition);if(a=ig.vwa[f.triggerType||"ALWAYS"])this.DE=(a==ig.vwa.ONCE?"map.":"tmp.")+"_entity"+this.zu+"_triggered";a=h;(c=f.loadCondition)&&(this.doa.evaluate()?a=y:this.DE&&ig.ma.get(this.DE)?a=y:c.onStart&&!this.wE.evaluate()?a=y:c.custom&&((new ig.de(c.custom)).evaluate()||(a=y)));if(f.event&&a)this.event=new ig.Ja({name:this.name,steps:f.event})},
Ge:function(a){this.parent(a);this.event&&this.event.Ka();(this.gD==ig.Sz.CUTSCENE||this.gD==ig.Sz.COMBAT_CUTSCENE)&&(this.yy&&this.yy.ko())&&sc.$r.OZ()},update:function(){if(ig.r.RGa()){if((!this.yy||!this.yy.ko())&&this.wE.evaluate()&&!this.doa.evaluate()){if(this.DE&&ig.ma.get(this.DE)||ig.r.kia)return;this.event||e(Error("Tried to start Event that has not been loaded! Event name: "+this.name));this.yy=sc.$r.e0(this.gD,this.event)}this.yy&&this.yy.ko()&&!this.yy.zh()&&this.DE&&ig.ma.set(this.DE,
h)}},ag:function(){sc.q.Oo()||this.update()}});var a={IGNORE:0,ABOVE:1,BELOW:2};ig.YE.LocationEvent=function(a){return"LOCAL_EVENT["+(a.yf.name||"")+"]"};ig.wa.LocationEvent=ig.Kc.extend({wE:q,event:q,DE:q,t:new ig.u({Dd:h,attributes:{wE:{c:"VarCondition",d:"Condition for the event to start",xc:h},event:{c:"Event",d:"Event to be performed when entity is in screen (always parallel)",xc:h},Se:{c:"Number",d:"If specified, only trigger when distance to entity is below the given radius",I:h},Spa:{c:"String",
info:"How height comparison matters",U:a}},label:N(""),Uk:h,Sl:"rgba(255,0,122, 0.5)",sxb:function(a){return a.radius||0},UIa:h}),f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.IGNORE;this.b.F(16,16,0);this.wE=new ig.de(f.startCondition);this.DE="map.locEvent.trig"+this.zu;this.Se=f.radius||0;this.Spa=a[f.heightCompare]||0;if(f.event)this.event=new ig.Ja({name:this.name,steps:f.event});ig.ma.get(this.DE)?this.b.kn(ig.jk.STATIC):this.b.kn(ig.jk.ON_SCREEN)},Ge:function(a){this.parent(a);
this.event&&this.event.Ka()},update:function(){if(!sc.q.Qv()&&!sc.q.message.i5a()&&sc.q.BN()&&sc.q.ko()&&ig.gl.ut(this,-48,-32)&&this.wE.evaluate()){var b=ig.r.cb.b;if(!(this.Se&&ig.qd.lBb(this.b,b)>this.Se)&&(!this.Spa||!(this.Spa==a.ABOVE&&b.g.z<this.b.g.z||this.Spa==a.BELOW&&b.g.z>this.b.g.z))){this.b.kn(ig.jk.STATIC);if(!ig.ma.get(this.DE)){ig.ma.set(this.DE,1);sc.$r.e0(ig.Sz.PARALLEL,this.event)}}}}})});ig.J=h;
ig.N("game.feature.msg.gui.message-box").O("impact.feature.gui.gui","game.feature.gui.base.boxes","game.feature.gui.base.text").K(function(){sc.nkb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},SUB:{state:{alpha:0.8},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0.3,Xa:0.3},time:0.2,p:KEY_SPLINES.LINEAR}},text:q,Gc:q,wsa:q,f:function(a,b,c,d,f,i){this.parent();this.wsa=f;ig.Xn[ig.dh]&&ig.Xn[ig.dh].Boa&&(a=202);this.text=new sc.ea(c,{maxWidth:a,speed:d,bestRatio:4,
optimize:h});this.Gc=new sc.sw(this.text.a.size.x,this.text.a.size.y,b);this.text.l(this.Gc.NP,this.Gc.OP);this.text.x$a(i);this.a.size.x=this.Gc.a.size.x;this.a.size.y=this.Gc.a.size.y;this.a.Db.x=this.Gc.a.Db.x;this.a.Db.y=this.Gc.a.Db.y;this.m(this.Gc);this.m(this.text)},Vta:function(){this.Gc.Vta()},rMa:function(a){this.text.gg.dH=a},On:function(){return this.text.gg.On()},Nq:function(){this.text.finish()}});sc.Dfb=ig.da.extend({s:new ig.ia("media/gui/message.png"),R:{DEFAULT:{state:{alpha:1},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0,Xa:1},time:0.2,p:KEY_SPLINES.LINEAR}},t3:q,xa:[],Z:q,ua:q,kba:q,W6:0,Ww:0,nh:1,f:function(a,b,c,d,f){this.parent();this.a.align.y=ig.k.Cb;this.a.nd=0.9;this.t3=a;this.Z=new ig.$s;this.ua=new sc.wh;this.Z.hh(this.ua);this.nh=d?d<1?1:d:1;for(var d=Math.ceil(this.t3.length/this.nh),i=0,j=0,f=f||sc.Zs,k=0,l=0,m=0,n=0;n<a.length;++n){var o=a[n].lq.evaluate();if(a[n].MMa.evaluate()){o=new sc.mc(this.t3[n].label,g,o,sc.Mc.wI);o.Lvb=n;var t=this;
o.cc=function(){t.remove();sc.q.message.dKb(this.Lvb)};if(a[n].mq){o.re.H(ig.k.Ia,ig.k.vb);o.re.l(0,0)}o.l(3+i,3+j);if(a[n].hcb){this.ua.jd(o,0,k);for(var p=1;p<this.nh;p++)this.ua.hYa(p,k)}else this.ua.jd(o,l,k);j=j+(o.a.size.y+0);k++;m<j&&(m=j);if(k>=d){j=0;i=i+(f+1);l++;k=0}f=Math.max(f,o.a.size.x);this.xa[n]=o}}this.kba=new sc.$eb(f*this.nh+6+(this.nh-1),m-0+6-1,h);this.kba.a.nd=this.a.nd;this.m(this.kba);this.Ww=0.3;for(n=0;n<a.length;++n)if(this.xa[n]){a[n].hcb?this.xa[n].mE(f*this.nh):this.xa[n].mE(f);
this.m(this.xa[n])}this.F(this.kba.a.size.x,this.kba.a.size.y+12);this.a.Db.y=this.a.size.y;a=b-this.a.size.x/2;this.W6=this.a.size.x/2;if(a+this.a.size.x+2>ig.i.width){this.W6=this.W6+(a+this.a.size.x+2-ig.i.width);a=ig.i.width-this.a.size.x-2}else if(a<2){this.W6=this.W6+(a-2);a=2}this.l(a,c);this.j("HIDDEN",h);this.j("DEFAULT")},update:function(){if(this.Ww){this.Ww=this.Ww-ig.i.Sa;if(this.Ww<=0){this.Ww=0;ig.La.De(this.Z)}}},Da:function(a){a.na(this.s,this.W6-8,this.a.size.y-12,32,32,16,12)},
remove:function(){ig.La.$e(this.Z);this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.msg.gui.dream-msg").O("impact.base.image","impact.feature.interact.gui.focus-gui","game.feature.interact.button-group").K(function(){sc.vP={TOP:1,BOTTOM:2};var a=Vec2.create();sc.tQa=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.EASE_OUT},TRANSPARENT:{state:{alpha:0.6},time:0.2,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.EASE_IN}},time:0,f:function(a,c,d,f,i,j,k,l){this.parent();this.a.zIndex=90;this.a.Nt=h;this.target=a;this.ap=c;this.offset=
d;this.time=i||0;this.ob=new sc.ea(f,j);this.m(this.ob);this.F(this.ob.a.size.x,this.ob.a.size.y);this.j(l?"TRANSPARENT":"DEFAULT",h);this.ob.gg.dH=this.raa.bind(this);this.aC=this.ob.gg.On();this.Gb=k;if(!this.time)this.Kf=new sc.Xx(this);this.time||(ig.i.Un?this.km():ig.La.De(this.Kf));this.qj()},Zl:function(){this.km()},z$a:function(a,c){this.Ef.a.g.x=a;this.Ef.a.g.y=c},raa:function(){this.aC=h},Km:function(){if(this.aC){this.Kf&&ig.La.$e(this.Kf);this.km()}else this.ob.finish()},km:function(){this.j("HIDDEN",
y,h);this.Gb&&this.Gb()},update:function(){this.target&&this.qj();if(this.time){this.time=this.time-ig.i.ja;this.time<=0&&this.km()}!this.a.al&&(this.aC&&ig.i.Un&&!this.time)&&this.km();this.parent()},Da:function(a){this.bgColor&&a.nc(this.bgColor,0,0,this.a.size.x,this.a.size.y)},qj:function(){if(this.target){var b=this.target.b.g.y-this.target.b.g.z,b=this.ap==sc.vP.TOP?b-this.target.b.size.z:b+this.target.b.size.y;ig.i.Jy(a,Math.round(this.target.b.g.x+this.target.b.size.x/2),Math.round(b));this.a.g.x=
a.x-this.a.size.x/2;this.a.g.y=a.y;this.a.g.y=this.ap==sc.vP.TOP?this.a.g.y-(8+this.a.size.y):this.a.g.y+8}else{this.a.g.x=ig.i.width/2-this.a.size.x/2;this.a.g.y=ig.i.height/2-this.a.size.y/2}this.offset&&Vec2.add(this.a.g,this.offset);this.a.g.x=this.a.g.x.Rb(0,ig.i.width-this.a.size.x);this.a.g.y=this.a.g.y.Rb(0,ig.i.height-this.a.size.y)}})});ig.J=h;
ig.N("game.feature.msg.gui.message-overlay").O("impact.feature.gui.gui","game.feature.msg.gui.message-box","game.feature.model.options-model").K(function(){function a(){var a=sc.options.get("text-speed")!=g?sc.options.get("text-speed"):ig.Rd.se.Bwa;if(ig.i.Un)a=ig.Rd.se.zg;return a}ig.Ux=ig.da.extend({R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.5,p:KEY_SPLINES.LINEAR}},kfa:q,U8a:q,Tq:q,wv:q,h3:q,f:function(){this.parent();this.a.zIndex=50;this.a.size.x=ig.i.width;
this.a.size.y=ig.i.height;sc.P.Wa(sc.q,this);sc.P.Wa(sc.q.message,this);this.Kf=new sc.Xx(this);this.Tq=new ig.Ux.JPa;this.Tq.H(ig.k.hb,ig.k.$);this.m(this.Tq);this.wv=new ig.Ux.JPa;this.wv.H(ig.k.hb,ig.k.Cb);this.m(this.wv);this.U8a=new sc.Elb;this.m(this.U8a);this.kfa=new ig.hkb;this.kfa.H(ig.k.hb,ig.k.Cb);this.m(this.kfa);this.Tq.j("HIDDEN_TOP",h);this.wv.j("HIDDEN_BOTTOM",h);this.m(new sc.Nnb)},Ab:function(a,c,d){if(a instanceof sc.w9){if(c==sc.zf.Ew||c==sc.zf.nQa){if(a.oe()&&!ig.Xw.wc()){this.Tq.j("DEFAULT");
this.wv.j("DEFAULT")}else{this.Tq.j("HIDDEN_TOP");this.wv.j("HIDDEN_BOTTOM")}this.kfa.j("DEFAULT")}}else if(a==sc.q.message&&c==sc.cf.IRa){if(d){this.a.xf=h;this.a.zIndex=1201;ig.X.eNa();this.Tq.j("DEFAULT");this.wv.j("DEFAULT")}else{this.Tq.j("HIDDEN_TOP",y,y,this.RGb.bind(this));this.wv.j("HIDDEN_BOTTOM")}this.kfa.j("DEFAULT")}},RGb:function(){this.a.xf=y;this.a.zIndex=50;ig.X.eNa()}});ig.Ux.JPa=ig.da.extend({R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN_TOP:{state:{alpha:1,offsetY:-21},
time:0.3,p:KEY_SPLINES.EASE_IN},HIDDEN_BOTTOM:{state:{alpha:1,offsetY:-21},time:0.3,p:KEY_SPLINES.EASE_IN}},f:function(){this.parent();this.a.size.y=21;this.a.size.x=ig.i.width},Da:function(a){a.nc("black",0,0,ig.i.qf(this.a.size.x),ig.i.qf(this.a.size.y))}});ig.Ux.hfb=ig.da.extend({s:new ig.ia("media/gui/message.png"),R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.3,p:KEY_SPLINES.EASE_IN}},f:function(){this.parent();this.a.nd=1;this.a.size.x=ig.i.width;this.a.size.y=
128;if(!this.constructor.pattern)this.constructor.pattern=this.s.createPattern(144,0,16,128,ig.nf.Eg.Yn)},Da:function(a){a.Qk(this.constructor.pattern,0,0,0,0,this.a.size.x,this.a.size.y)}});sc.TP={BLINK:{wJ:h,Sua:8,bi:-48},OPEN_UP:{Ym:0.5,Sua:0},PRE_CLOSE:{Ec:0.3,Sua:0},CLOSE_DOWN:{Ym:0.2,inverse:h,Sua:8,LC:"HIDDEN"}};sc.Elb=ig.da.extend({s:new ig.ia("media/gui/message.png"),UYa:new ig.jc("media/gui/message.png",{width:16,height:0,left:24,top:16,right:24,bottom:0,Vb:{upper:{x:64,y:96},lower:{x:64,
y:112}}}),$b:{KCb:new ig.ka("media/sound/hud/calling.ogg",1),Wfa:new ig.ka("media/sound/hud/calling.ogg",1),open:new ig.ka("media/sound/hud/take-call.ogg",1),close:new ig.ka("media/sound/hud/end-call.ogg",1),zxb:new ig.ka("media/sound/hud/end-call.ogg",1),handle:q},RYa:new ig.Xz("media/gui/message.png",ig.nf.Eg.Yn,8,48,128,80,2,1),R:{DEFAULT:{state:{},time:0.3,p:KEY_SPLINES.JUMPY},PRE_HIDDEN:{state:{alpha:0.5},time:0.3,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0.4,Va:0},time:0.1,p:KEY_SPLINES.LINEAR}},
lt:0,fX:0,wBa:y,text:q,f:function(){this.parent();this.j("HIDDEN",h);this.H(ig.k.Ia,ig.k.vb);this.text=new sc.ea(ig.lang.get("sc.gui.msg.private"));this.text.H(ig.k.Ia,ig.k.$);this.text.l(0,4);this.m(this.text);this.F(ig.i.width,32);this.Eb(ig.i.width,16);sc.P.Wa(sc.q.message,this)},Kta:function(a,c){this.lt=a;this.fX=0;this.lt==sc.TP.OPEN_UP&&this.text.ga(ig.lang.get("sc.gui.msg.private"));a.Ym?this.kd(0,a.bi||0,a.Ym,KEY_SPLINES.EASE_OUT):this.l(0,a.bi||0);this.text.kd(0,this.lt.Sua,0.1,KEY_SPLINES.EASE_IN_OUT);
this.lt.LC&&this.j("PRE_HIDDEN");this.$b.handle&&this.$b.handle.stop();if(!c&&!sc.q.gZ()){this.$b.handle=q;this.lt==sc.TP.OPEN_UP?this.$b.open.play():this.lt==sc.TP.CLOSE_DOWN&&this.$b.close.play()}},e5a:function(){return this.lt==sc.TP.OPEN_UP&&this.fX>=0.3},update:function(){if(this.lt){this.fX=this.fX+ig.i.Sa;if(this.lt.Ec){if(this.fX>=this.lt.Ec){this.Kta(sc.TP.CLOSE_DOWN,this.wBa);this.wBa=y}}else if(this.lt.wJ){this.F(ig.i.width,32);this.Eb(ig.i.width,16);var a=(1+Math.sin(this.fX*Math.PI*3.6)).Rb(0,
1);this.a.nd=a;this.text.a.nd=a;ig.i.Un&&sc.q.message.eHb()}else if(this.lt.Ym){a=this.fX;this.a.nd=1;this.text.a.nd=1;a=a/this.lt.Ym;a=Math.min(a,1);a=KEY_SPLINES.EASE_OUT.get(a);this.lt.inverse&&(a=1-a);this.F(ig.i.width,Math.floor(32*(1-a)+310*a));if(this.lt.inverse&&a<=0){this.lt=q;this.Eb(ig.i.width,16);this.j("HIDDEN");sc.q.message.FM()}else if(!this.lt.inverse&&a>=1){this.lt=q;sc.q.message.FM()}}}},Da:function(a){var c=this.a.size.x,d=this.a.size.y,f=(c-200)/2;this.UYa.nb(a,200,16,"upper",
f,0);this.UYa.nb(a,200,16,"lower",f,d-16);var i=d-32;if(i>1){a.ks().ge(0.9);d=Math.min(48,Math.floor(i/2));f=Math.min(48,i-d);i=i-d-f;a.Qk(this.RYa.Iy(0),0,16,0,0,c,d);a.Qk(this.RYa.Iy(1),0,16+d+i,0,48-f,c,f);i>0&&a.nc("#001428",0,16+d,c,i);a.Xs()}},Ab:function(a,c,d){if(c==sc.cf.Qxa){this.j("DEFAULT");a=d?ig.lang.get("sc.gui.msg.outgoing"):ig.lang.get("sc.gui.msg.incoming");this.text.ga(a);this.Kta(sc.TP.BLINK);this.$b.handle=d?this.$b.Wfa.play(h):this.$b.KCb.play(h)}else if(c==sc.cf.qTa)this.Kta(sc.TP.OPEN_UP);
else if(c==sc.cf.wQa){this.wBa=d;this.Kta(sc.TP.PRE_CLOSE,d)}else if(c==sc.cf.oQa){this.$b.handle&&this.$b.handle.stop();!d&&!sc.q.gZ()&&this.$b.zxb.play();this.j("HIDDEN");sc.q.message.FM()}}});ig.hkb=ig.da.extend({R:{DEFAULT:{state:{},time:0.5,p:KEY_SPLINES.EASE_IN}},tX:y,xb:{},sx:{},gJ:q,R5:q,t7:q,zt:[],Gma:q,h3:q,X9:64,mQb:8,f:function(){this.parent();this.a.size.x=ig.i.width;this.a.size.y=ig.i.height;this.h3=new ig.Ux.hfb;this.h3.H(ig.k.hb,ig.k.Cb);this.m(this.h3);this.h3.Li=1E7;this.R5=new ig.Ux.Tz(this,
q,h,-1E3);this.R5.l(-104,0);this.m(this.R5);this.t7=new ig.Ux.Tz(this,q,y,-1E3);this.t7.l(ig.i.width-24,0);this.m(this.t7);this.gJ=new sc.mkb;this.gJ.H(ig.k.Ia,ig.k.vb);this.gJ.l(0,-80);this.m(this.gJ);this.gJ.hide(h);sc.P.Wa(sc.q.message,this)},update:function(){if(this.tX&&ig.i.Un){this.tX=y;sc.q.message.FM()}},Ab:function(b,c,d){if(c==sc.cf.Qxa)this.tX=y;else if(c==sc.cf.KRa)if(this.tX)sc.q.message.FM();else{ig.La.Md(0);this.Nq()}else if(c==sc.cf.qSa){var f=d;this.sx[f]=new ig.Ux.Dlb(this,b.NEa(f),
b.jS(f)==sc.Zz.LEFT,b.qFa(f));this.xb[f]=new ig.Ux.Tz(this,f,b.jS(f)==sc.Zz.LEFT,b.qFa(f),b.S1a(f));this.m(this.sx[f]);this.m(this.xb[f]);this.yla(this.sx[f]);this.iAa(this.xb[f]);this.gJ.mn||this.gJ.hide()}else if(c==sc.cf.sSa){f=d;this.sx[f].remove();this.xb[f].remove();delete this.sx[f];delete this.xb[f];this.yla()}else if(c==sc.cf.rSa){var f=d,i=b.qFa(f),j=b.jS(f)==sc.Zz.LEFT,d=this.sx[f],k=this.xb[f];d.xu!=j&&k.y3();d.Li=i;k.Li=i;d.setExpression(b.NEa(f));k.E$a(b.S1a(f));k.mMa(j);d.mMa(j);this.iAa(k);
this.yla()}else if(c==sc.cf.GQa){f=d;this.sx[f].setExpression(b.NEa(f),h)}else if(c==sc.cf.YRa){this.tX=y;f=d.mq?ig.$g.zl.at:ig.$g.zl.CL;i=a();this.gJ.ih(d.text,f,i,this.TJa.bind(this),d.mn)}else if(c==sc.cf.TPa)this.gJ.hide();else if(c==sc.cf.mxa){var f=d.name,c=ig.i.width-256,l=2,j=i=-1E3;for(k in this.xb){this.xb[k].xu?j=Math.max(j,this.xb[k].Li):i=Math.max(i,this.xb[k].Li);l-- >0||(c=c-this.X9)}c=Math.min(c,175);k=f?this.xb[f]:d.left?this.R5:this.t7;f&&this.iAa(k);c=k.bub(c,d.text);d=c.a.size.y+
13+2;k=this.zt.length;for(l=y;k--;){var m=this.zt[k];m.Vta();l=l||m.wsa.Li<(m.wsa.xu?j:i);if(d+m.a.size.y>128||l&&d+m.a.size.y>80){m.kd(m.a.g.x,m.a.g.y+m.a.size.y,0.2,KEY_SPLINES.EASE_OUT);m.j("HIDDEN",y,h);this.zt.splice(k,1)}else{m.kd(m.a.g.x,d,0.2,KEY_SPLINES.EASE_OUT);m.j("SUB")}d=d+(m.a.size.y+2)}this.zt.push(c);f||this.yla()}else if(c==sc.cf.$Sa){f=d.name;this.Gma=new sc.Dfb(d.options,this.sx[f].a.g.x+64,this.sx[f].a.g.y+128,d.nh,d.Vca);this.m(this.Gma)}else if(c==sc.cf.RPa){for(f in this.sx)if(!d||
b.jS(f)==d){this.sx[f].remove();this.xb[f].remove();delete this.sx[f];delete this.xb[f]}(!d||d==sc.Zz.LEFT)&&this.R5.y3();(!d||d==sc.Zz.RIGHT)&&this.t7.y3();this.Gma&&this.Gma.remove()}for(var n in this.sx)break;b.ODb()&&(n=y);ig.Xw.wc()&&(n=y);this.h3.j(n?"DEFAULT":"HIDDEN")},TJa:function(){ig.i.Un||sc.q.message.Bp?sc.q.message.FM():this.tX=h},y3:function(){for(var a=this.zt.length;a--;)this.zt[a].j("HIDDEN",y,h);this.zt=[]},Nq:function(){if(sc.q.message.f3)this.gJ.Nq();else{var a=this.zt.length-
1;a>=0&&this.zt[a].Nq()}},yla:function(a){this.a.children.sort(function(a,b){var c=a.X.Li||0,d=b.X.Li||0;a.X.QGa||(c=c+1E5);b.X.QGa||(d=d+1E5);return d-c});var c=sc.q.message,d=0,f=0,i;for(i in this.sx)c.jS(i)==sc.Zz.LEFT?f++:d++;f=0+(f==1?this.X9/2:0);d=ig.i.width-128-(d==1?this.X9/2:0);this.R5.A3a()&&(f=f+48);this.t7.A3a()&&(d=d-48);if(ig.Xw.wc()){f=f+48;d=d-48}for(var j=c.vx?22:0,k=this.a.children,l=k.length;l--;){var m=k[l],n=m.X;if(!n.QGa&&!m.al&&(i=n.name)&&this.sx[i]){var o;if(c.jS(i)==sc.Zz.LEFT){o=
f;f=f+this.X9}else{o=d;d=d-this.X9}if(n==a||n.a.pBb()==0){n.l(o,j);this.xb[i].l(o,j)}else{var t;if(Math.abs(m.g.x-o)>200){t=KEY_SPLINES.EASE_IN_OUT;n=0.6}else{t=KEY_SPLINES.EASE_OUT;n=0.2}m.kd(o,j,n,t,0,h);this.xb[i].kd(o,j,n,t,0,h)}}}},iAa:function(a){if(a.Zi){a.F$a(h);var c=sc.q.message,d=c.jS(a.name),f;for(f in this.xb){var i=this.xb[f];i!=a&&c.jS(f)==d&&i.F$a(y)}}}});ig.Ux.Tz=ig.da.extend({name:q,QGa:h,xu:y,Li:0,HC:new ig.ka("media/sound/hud/dialog-beep-2.ogg",1,0.02),R:{DEFAULT:{state:{},time:0.3,
p:KEY_SPLINES.EASE_OUT},HIDDEN_LEFT:{state:{alpha:0,offsetX:-32},time:0.3,p:KEY_SPLINES.EASE_IN},HIDDEN_RIGHT:{state:{alpha:0,offsetX:32},time:0.3,p:KEY_SPLINES.EASE_IN}},f:function(a,c,d,f,i){this.parent();this.F(128,128);this.a.align.y=ig.k.Cb;this.Lb=a;this.name=c;this.xu=d;this.Li=f;this.j(this.xu?"HIDDEN_LEFT":"HIDDEN_RIGHT",h);this.j("DEFAULT");if(!this.name)this.Li=-1E3;i&&this.E$a(i)},bub:function(b,c){var d=this.xu?sc.sw.aA.zya:sc.sw.aA.Aya,f=a();if(!ig.i.Un&&ig.Xw.wc())f=ig.Rd.se.mj;d=new sc.nkb(b,
d,c,f,this,ig.Xw.wc()?q:this.HC);d.H(this.xu?ig.k.hb:ig.k.ra,ig.k.Cb);d.l(112,13);this.Lb.tX=y;d.rMa(this.Lb.TJa.bind(this.Lb));this.m(d);d.j("HIDDEN",h);d.j("DEFAULT");d.On()&&this.Lb.TJa();return d},A3a:function(){for(var a=this.a.children.length;a--;)if(!this.a.children[a].al)return h;return y},y3:function(){for(var a=0;a<this.a.children.length;a++)this.a.children[a].R.HIDDEN&&this.a.children[a].j("HIDDEN",h,h)},F$a:function(a){this.Zi&&this.Zi.j(a?"DEFAULT_RIGHT":"HIDDEN_RIGHT")},E$a:function(a){if(!a&&
this.Zi){this.Zi.j("HIDDEN_RIGHT",y,h);this.Zi=q}else if(!this.Zi&&a){this.Zi=new ig.Ux.ugb(a);this.Zi.H(ig.k.Ia,ig.k.Cb);this.Zi.l(0,-1);this.m(this.Zi);this.Zi.j("HIDDEN_RIGHT",h);this.Zi.j("DEFAULT_RIGHT")}else this.Zi&&this.Zi.ga(a)},mMa:L("xu"),remove:function(){this.j(this.xu?"HIDDEN_LEFT":"HIDDEN_RIGHT",y,h);for(var a=0;a<this.a.children.length;++a)this.a.children[a].R.HIDDEN&&this.a.children[a].j("HIDDEN",y,h)}});ig.Ux.Dlb=ig.da.extend({name:q,Me:q,xu:y,Li:0,n:0,Zi:q,R:{DEFAULT:{state:{Xa:-1},
time:0.3,p:KEY_SPLINES.EASE_OUT},DEFAULT_RIGHT:{state:{Xa:1},time:0.3,p:KEY_SPLINES.EASE_OUT},HIDDEN_LEFT:{state:{Xa:-1,alpha:0,offsetX:-32},time:0.3,p:KEY_SPLINES.EASE_IN},HIDDEN_RIGHT:{state:{Xa:1,alpha:0,offsetX:32},time:0.3,p:KEY_SPLINES.EASE_IN}},f:function(a,c,d,f){this.parent();this.F(128,128);this.Eb(64,64);this.a.align.y=ig.k.Cb;this.Lb=a;this.name=c.Ad.name;this.Me=c;this.xu=d;this.Li=f;this.j(this.xu?"HIDDEN_LEFT":"HIDDEN_RIGHT",h);this.j(this.xu?"DEFAULT":"DEFAULT_RIGHT");if(ig.Xw.wc())this.a.nd=
0.5},mMa:function(a){this.xu=a;this.j(this.xu?"DEFAULT":"DEFAULT_RIGHT",h)},setExpression:function(a,c){if(c||this.Me!=a){this.Me=a;this.n=0}},remove:function(){this.j(this.xu?"HIDDEN_LEFT":"HIDDEN_RIGHT",y,h);for(var a=0;a<this.a.children.length;++a)this.a.children[a].j(this.xu?"HIDDEN_LEFT":"HIDDEN_RIGHT",y,h)},update:function(){this.n=this.n+ig.i.Sa},Da:function(a){var c=this.Me.Ad.data;sc.$ja.sDa(a,this.Me,this.n,(128-c.face.width)/2,128-c.face.height)}});ig.Ux.ugb=ig.da.extend({gb:new ig.jc("media/gui/message.png",
{width:16,height:0,left:16,top:14,right:16,bottom:0,Vb:{"default":{x:48,y:32}}}),R:{DEFAULT:{state:{Xa:-1},time:0.3,p:KEY_SPLINES.EASE},DEFAULT_RIGHT:{state:{Xa:1},time:0.3,p:KEY_SPLINES.EASE},HIDDEN_LEFT:{state:{Xa:-1,alpha:0,offsetY:-10},time:0.3,p:KEY_SPLINES.EASE},HIDDEN_RIGHT:{state:{Xa:1,alpha:0,offsetY:-10},time:0.3,p:KEY_SPLINES.EASE}},text:q,f:function(a){this.parent();this.a.nd=0.7;a=new sc.ea(a,{font:sc.Ea.font});a.H(ig.k.Ia,ig.k.$);this.text=a;this.F(a.a.size.x+32,a.a.size.y);this.Eb(this.a.size.x/
2,this.a.size.y/2);this.m(a)},Da:function(a){this.gb.nb(a,this.a.size.x,14,"default",0,2)},ga:function(a){this.text.ga(a);this.F(this.text.a.size.x+32,this.text.a.size.y);this.Eb(this.a.size.x/2,this.a.size.y/2)}});sc.$ja={};sc.$ja.sDa=function(a,c,d,f,i,j,k){var l=c.Ad,m=c.IJ,n=l.data,l=l.uoa,c=c.Gca,o=n.face.parts,m=n.face.expressions[m],t,p;if(j){t=n.face.centerX-Math.floor(j/2);p=n.face.centerY-Math.floor(k/2)}if(m){var n=m.anim,r=m.time,u=m.repeat||y,w=m.faces,m=q;if(n){m=Math.floor(d/r);u?u>
1?m>u&&(m=(m-u)%(n.length-u)+u):m=m%n.length:m=m.Rb(0,n.length-1);m=w[n[m]]}else m=w[0];for(u=n=d=0;u<m.length;++u){var r=o[u][m[u]],w=r.destX+d,z=r.destY+n,d=d+(r.subX||0),n=n+(r.subY||0);if(u==0){t=t+d;p=p+n}var v=l;r.img&&(v=c[r.img]);if(j){if(!r.hideOnClip&&!(t>=w+r.width||t+j<=w||p>=z+r.height||p+k<=z)){var x=Math.max(0,t-w),A=Math.max(0,p-z),F=Math.min(0,t+j-w-r.width)-x,B=Math.min(0,p+k-z-r.height)-A;a.na(v,f-t+x+w,i-p+A+z,r.srcX+x,r.srcY+A,r.width+F,r.height+B)}}else a.na(v,f+w,i+z,r.srcX,
r.srcY,r.width,r.height)}}}});ig.J=h;
ig.N("game.feature.msg.gui.message-board").O("impact.feature.gui.gui","game.feature.gui.base.boxes","game.feature.gui.base.text").K(function(){sc.lkb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.EASE_IN}},text:q,f:function(){this.parent();var a=230;ig.Xn[ig.dh]&&ig.Xn[ig.dh].Boa&&(a=202);this.text=new sc.ea("WHATEVER",{maxWidth:a,textAlign:ig.$g.zl.CL,bestRatio:10,optimize:h});this.text.H(ig.k.hb,ig.k.$);this.m(this.text);
this.j("HIDDEN",h)},ih:function(b,d,f,i){var j=0,k=0;this.text.Dha(d);this.text.MLb(f);this.text.gg.dH=i;this.text.l(0,k);this.text.ga(b);k=k+this.text.a.size.y;j=Math.max(j,this.text.a.size.x);this.F(j,k);this.j("HIDDEN",h);this.j("DEFAULT",y,y,q,f==ig.Rd.se.zg?a:0)},On:function(){return this.text.gg.On()},Nq:function(){this.text.finish()}});var a=0.1,b=Vec2.create();sc.mkb=ig.da.extend({R:{DEFAULT:{state:{alpha:1},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,Va:0.1,Xa:0.5},time:0.2,p:KEY_SPLINES.LINEAR}},
Gc:q,content:q,mn:q,tc:{start:Vec2.create(),end:Vec2.create(),n:0},f:function(){this.parent();this.Gc=new sc.sw(8,8,sc.sw.aA.NONE);this.m(this.Gc);this.content=new sc.lkb;this.content.H(ig.k.hb,ig.k.$);this.m(this.content);this.xab(q)},xab:function(a){this.mn=a;var b=0,f=-80;if(a){f=56;b=96;a==sc.Zz.LEFT&&(b=-b)}if(this.a.g.x!=b||this.a.g.y!=f)this.a.hi=="HIDDEN"?this.l(b,f):this.kd(b,f,0.3,KEY_SPLINES.EASE_IN_OUT)},FUb:M("mn"),ih:function(b,d,f,i,j){this.content.ih(b,d,f,i);this.xab(j);b=this.content.a.size;
d=b.x+20;f=b.y+12;j=250;ig.Xn[ig.dh]&&ig.Xn[ig.dh].Boa&&(j=220);d=Math.max(j,d);f=Math.max(36,f);this.content.l((d-b.x)/2,(f-b.y)/2);if(this.a.hi=="HIDDEN"){this.j("DEFAULT");this.F(d,f)}else if(this.a.size.x!=d||this.a.size.y!=f){Vec2.assign(this.tc.start,this.a.size);Vec2.Oa(this.tc.end,d,f);this.tc.n=a}this.content.On()&&i()},Nq:function(){this.content.Nq()},F:function(a,b){this.parent(a,b);this.Eb(a/2,b/2);this.Gc.F(a,b)},update:function(){if(this.tc.n){this.tc.n=this.tc.n-ig.i.Sa;if(this.tc.n<
0)this.tc.n=0;var c=1-this.tc.n/a,c=KEY_SPLINES.EASE_IN_OUT.get(c),c=Vec2.an(this.tc.start,this.tc.end,c,b);this.F(this.tc.end.x,c.y)}},hide:function(a){this.j("HIDDEN",a)}})});ig.J=h;
ig.N("game.feature.msg.msg-steps").O("impact.base.action","impact.base.event","game.feature.msg.message-model","game.feature.character.character","game.feature.gui.widget.demo-stats","game.feature.gui.widget.demo-highscore","game.feature.msg.gui.dream-msg").K(function(){ig.oa.SHOW_MSG=ig.qa.extend({Oh:q,Me:q,message:q,Bp:y,hB:0,t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Talking person"},message:{c:"LangLabel",d:"Message to display",gs:h},Bp:{c:"Boolean",d:"Automatically continue after message"}},
label:function(){return"<em>"+wmPrint("PersonExpression",this.Oh)+"</em>: <i>"+wmPrint("LangLabel",this.message)+"</i>"+(this.Bp?", <i>autoContinue</i>":"")}}),f:function(a){this.Oh=a.person.person;this.Me=new sc.lI(a.person.person,a.person.expression);this.message=new ig.Ra(a.message);this.Bp=a.autoContinue||y;ig.Ae&&ig.Ae.Cz("MSG "+this.Oh,this.message);if(this.Oh=="main.lea"&&a.message&&a.message.en_US)this.hB=(this.hB=a.message.en_US.match(/hi[.!?]/gi))?this.hB.length:0},Ka:function(){this.Me.Tc()},
start:function(){this.hB&&sc.pa.bc("misc","hiCount",this.hB||0);sc.q.message.setExpression(this.Oh,this.Me);sc.q.message.HO(this.Oh,this.message,this.Bp||this.Ok&&this.Ok instanceof ig.oa.SHOW_CHOICE);ig.Ae&&ig.Ae.yE("MSG "+this.Oh,this.message)},ya:function(){return!sc.q.message.HG()}});ig.YE.SHOW_MSG=function(a){var b="MSG[";a.Oh&&(b=b+(a.Oh.Oh+">"+a.Oh.IJ));return b+"]"};ig.oa.RING_PRIVATE_MSG=ig.qa.extend({Wfa:y,t:new ig.u({attributes:{Wfa:{c:"Boolean",d:"If true: this is an outgoing call"}}}),
f:function(a){this.Wfa=a.outgoing},start:function(){sc.q.message.$9a(this.Wfa)},ya:function(){return!sc.q.message.HG()}});ig.oa.START_PRIVATE_MSG=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.q.message.a5a()?sc.q.message.Ubb():sc.q.message.$9a()},ya:function(){if(!sc.q.message.HG()){if(!sc.q.message.a5a())return h;sc.q.message.Ubb()}return y}});ig.oa.END_PRIVATE_MSG=ig.qa.extend({t:new ig.u({attributes:{rbb:{c:"Boolean",d:"If true: skip sounds"}}}),f:function(a){this.rbb=a.skipSounds||
y},start:function(){sc.q.message.k0a(this.rbb)},ya:function(){return!sc.q.message.HG()}});ig.oa.SHOW_OFFSCREEN_MSG=ig.qa.extend({W5a:q,message:q,Bp:y,t:new ig.u({attributes:{mn:{c:"String",d:"Side to display message at.",U:sc.Zz},message:{c:"LangLabel",d:"Message to display",gs:h},Bp:{c:"Boolean",d:"Automaticallt continue after message"}},width:400,label:function(){return"<em>OFFSCREEN ("+(this.mn=="LEFT"?"left":"right")+")</em>: <i>"+wmPrint("LangLabel",this.message)+"</i>"+(this.Bp?", <i>autoContinue</i>":
"")}}),f:function(a){this.W5a=a.side=="LEFT";this.message=new ig.Ra(a.message);this.Bp=a.autoContinue||y;ig.Ae&&ig.Ae.Cz("MSG Offscreen",this.message)},start:function(){sc.q.message.oMb(this.W5a,this.message,this.Bp||this.Ok&&this.Ok instanceof ig.oa.SHOW_CHOICE);ig.Ae&&ig.Ae.yE("MSG Offscreen",this.message)},ya:function(){return!sc.q.message.HG()}});ig.oa.SHOW_CHOICE=ig.qa.extend({Oh:q,Me:q,nh:q,Vca:0,options:[],uf:{},t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Talking person"},options:{c:"ChoiceOptions",
d:"List of options",w2:h},nh:{c:"Integer",d:"Number of buttons columns.",I:h,ab:2},Vca:{c:"Integer",d:"Override the default button width. NOTE: Buttons still get matched when a text is to large.",I:h}},NF:function(a){return a=="_end"?"END_SHOW_CHOICE":this.options[a]?"Choice: "+wmPrint("LangLabel",this.options[a].label):"???"}}),f:function(a){this.Oh=a.person&&a.person.person;if((this.nh=a.columns)&&this.nh<1)this.nh=1;this.Vca=a.forceWidth||0;if(a.person)this.Me=new sc.lI(a.person.person,a.person.expression);
for(var a=a.options||[],b=0;b<a.length;++b){this.options[b]={label:new ig.Ra(a[b].label),lq:new ig.de(a[b].activeCondition),MMa:new ig.de(a[b].showCondition),hcb:a[b].stretch||y,mq:a[b].center||y};ig.Ae&&ig.Ae.Cz("Choice "+b,this.options[b].label)}},Ka:function(){this.Me&&this.Me.Tc()},start:function(){this.Me&&sc.q.message.setExpression(this.Oh,this.Me);sc.q.message.bMb(this.Oh,this.options,this.nh,this.Vca)},ya:function(){return!sc.q.message.HG()},eB:function(){for(var a=[],b=0;b<this.options.length;++b)a.push(b);
return a},Lv:function(){return this.uf[sc.q.message.R5a]||this.Ok}});ig.oa.ADD_MSG_PERSON=ig.qa.extend({Me:q,mn:0,Li:0,jR:y,name:q,t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Person + Expression to add"},name:{c:"LangLabel",d:"Name to display under portrait if any",I:h},mn:{c:"String",d:"Side to display Person at.",U:sc.Zz},Li:{c:"Number",d:"Determines the order in which people are displayed on one side. LOWER values are in FRONT"},jR:{c:"Boolean",d:"Clear the side before adding the person"}}}),
f:function(a){this.Me=new sc.lI(a.person.person,a.person.expression);this.mn=sc.Zz[a.side];this.Li=a.order;this.jR=a.clearSide;if(a.name)this.name=new ig.Ra(a.name)},Ka:function(){this.Me.Tc()},start:function(){this.jR&&sc.q.message.jR(this.mn);sc.q.message.kYa(this.Me,this.mn,this.Li,this.name)}});ig.oa.REMOVE_MSG_PERSON=ig.qa.extend({Oh:q,t:new ig.u({attributes:{Oh:{c:"Character",d:"Person to remove"}}}),f:function(a){this.Oh=a.person},start:function(){sc.q.message.fJb(this.Oh)}});ig.oa.SET_MSG_EXPRESSION=
ig.qa.extend({Oh:q,Me:q,t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Person + Expression to change"}}}),f:function(a){this.Oh=a.person.person;this.Me=new sc.lI(a.person.person,a.person.expression)},Ka:function(){this.Me.Tc()},start:function(){sc.q.message.setExpression(this.Oh,this.Me)}});ig.oa.CLEAR_MSG=ig.qa.extend({mn:q,t:new ig.u({attributes:{mn:{c:"String",d:"Side to clear",U:sc.N9,ab:"ALL"}}}),f:function(a){this.mn=sc.N9[a.side]},start:function(){sc.q.message.jR(this.mn)}});ig.oa.SHOW_CENTER_MSG=
ig.qa.extend({Ez:q,text:q,t:new ig.u({attributes:{Ez:{c:"LangLabel",d:"Title of Box"},text:{c:"LangLabel",d:"Message in Box",gs:h}},width:500}),f:function(a){this.Ez=new ig.Ra(a.titleText);this.text=new ig.Ra(a.text);ig.Ae&&ig.Ae.Cz("Center MSG Title",this.Ez);ig.Ae&&ig.Ae.Cz("Center MSG Content",this.text)},start:function(a){a.Xb=y;var b=new sc.rP(this.Ez.toString()+"\n"+this.text.toString(),{maxWidth:300,speed:ig.Rd.se.FASTEST},"black",0.9,function(){a.Xb=h});ig.X.vd(b);ig.Ae&&ig.Ae.yE("Center MSG Title",
this.Ez);ig.Ae&&ig.Ae.yE("Center MSG Content",this.text)},ya:function(a){return a.Xb}});ig.oa.SHOW_DREAM_MSG=ig.qa.extend({Ez:q,text:q,time:0,t:new ig.u({attributes:{text:{c:"LangLabel",d:"Message in Box",gs:h},Q:{c:"Entity",d:"Entity the dream text will be displayed above or below. Text will be centered on screen if not specified",I:h},ap:{c:"String",d:"Whether to display text above or below entity.",U:sc.vP,ab:"TOP"},offset:{c:"Vec2",d:"Offset added to position"},time:{c:"Number",d:"If set the message will stay on for the given amount of time",
I:h},he:{c:"Boolean",d:"If true: use small font",I:h}},width:500}),f:function(a){this.text=new ig.Ra(a.text);ig.Ae&&ig.Ae.Cz("Dream Text",this.text);this.Q=a.entity;this.ap=sc.vP[a.posType]||sc.vP.TOP;this.offset=a.offset;this.time=a.time||0;this.he=a.smallFont||y},start:function(a,b){a.n=0;var c=ig.Ja.rd(this.Q,b),c=new sc.tQa(c,this.ap,this.offset,this.text.toString(),this.time,{maxWidth:400,speed:ig.Rd.se.n$,textAlign:ig.$g.zl.at,font:this.he?sc.Ea.he:sc.Ea.font},function(){a.n=0.2});ig.X.vd(c);
ig.Ae&&ig.Ae.yE("Dream Text",this.text)},ya:function(a){if(a.n){a.n=a.n-ig.i.ja;if(a.n<=0)return h}return y}});ig.la.SHOW_DREAM_MSG=ig.qa.extend({text:q,time:0,t:new ig.u({attributes:{text:{c:"LangLabel",d:"Message in Box",gs:h},Q:{c:"Entity",d:"Entity the dream text will be displayed above or below. If not defined, will be displayed above action entity",I:h},ap:{c:"String",d:"Whether to display text above or below entity.",U:sc.vP,ab:"TOP"},offset:{c:"Vec2",d:"Offset added to position"},time:{c:"Number",
d:"If set the message will stay on for the given amount of time"}},width:500}),f:function(a){this.text=new ig.Ra(a.text);ig.Ae&&ig.Ae.Cz("Dream Text",this.text);this.Q=a.entity;this.ap=sc.vP[a.posType]||sc.vP.TOP;this.offset=a.offset;this.time=a.time||1},start:function(a){var b=ig.Ja.rd(this.Q)||a,b=new sc.tQa(b,this.ap,this.offset,this.text.toString(),this.time,{maxWidth:140,speed:ig.Rd.se.n$,textAlign:ig.$g.zl.at,font:sc.Ea.he},q,h);b.a.zIndex=-30;ig.X.vd(b);ig.Ae&&ig.Ae.yE("Dream Text",this.text);
a.Hj(b);a.ib=a.ib+this.time},ya:function(a){return a.ib<=0}});sc.Fya={TUTORIAL:{wMb:h,title:"sc.gui.bigChoice.tutorial.title",Eeb:"sc.gui.bigChoice.tutorial.yes",V6a:"sc.gui.bigChoice.tutorial.no"},GENERIC:{title:"sc.gui.bigChoice.generic.title",Eeb:"sc.gui.bigChoice.generic.yes",V6a:"sc.gui.bigChoice.generic.no"}};ig.oa.SHOW_TUTORIAL_START=ig.qa.extend({pT:q,title:q,content:q,a4a:q,uf:{},t:new ig.u({attributes:{pT:{c:"String",d:"Type of Message",U:sc.Fya,ab:"TUTORIAL"},title:{c:"LangLabel",d:"Title of Toturial"},
content:{c:"LangLabel",d:"Content of Tutorial",gs:h},wd:{c:"Image",d:"Image to be shown over content text",I:h}},NF:function(a){switch(a){case "acceptStep":return"on Accept";case "cancelStep":return"on Cancel";case "_end":return"Tutorial End"}return"???"},width:500}),f:function(a){this.pT=sc.Fya[a.msgType]||sc.Fya.TUTORIAL;this.title=new ig.Ra(a.title);this.content=new ig.Ra(a.content);this.a4a=a.image;ig.Ae&&ig.Ae.Cz("Tutorial MSG Title",this.title);ig.Ae&&ig.Ae.Cz("Tutorial MSG Content",this.content)},
start:function(a){if(this.pT.wMb&&sc.options.get("skip-tutorials")){a.Xb=h;a.accept=y}else{a.Xb=y;a.accept=y;var b=new sc.Mpb(this.pT,this.title.toString(),this.content.toString(),this.a4a,function(b){a.Xb=h;a.accept=b});ig.X.vd(b);ig.Ae&&ig.Ae.yE("Tutorial MSG Title",this.title);ig.Ae&&ig.Ae.yE("Tutorial MSG Content",this.content)}},ya:function(a){return a.Xb},eB:function(){return["acceptStep","cancelStep"]},Lv:function(a){return a.accept?this.uf.acceptStep?this.uf.acceptStep:this.Ok:this.uf.cancelStep?
this.uf.cancelStep:this.Ok}});ig.oa.SHOW_MODAL_CHOICE=ig.qa.extend({text:q,options:[],uf:{},t:new ig.u({attributes:{text:{c:"LangLabel",d:"Text of modal dialog"},options:{c:"ModalChoiceOptions",d:"All the options of the modal dialog"}},NF:function(a){return a=="_end"?"END_MODAL_DIALOG_CHOICE":this.options[a]?"Choice: "+wmPrint("LangLabel",this.options[a].label):"???"}}),f:function(a){this.text=new ig.Ra(a.text);for(var a=a.options||[],b=0;b<a.length;++b){this.options[b]=new ig.Ra(a[b].label);ig.Ae&&
ig.Ae.Cz("Modal Choice "+b,this.options[b])}},start:function(a){a.Xb=y;a.UF=q;sc.q.YK();sc.q.Ss=h;sc.aq.KMa(this.text.toString(),sc.dv.NONE,this.options,function(b){sc.q.Ss=y;a.Xb=h;a.UF=b.data})},ya:function(a){return a.Xb},eB:function(){for(var a=[],b=0;b<this.options.length;++b)a.push(b);return a},Lv:function(a){return this.uf[a.UF]||this.Ok}});ig.oa.SHOW_TUTORIAL_MSG=ig.qa.extend({g:q,size:q,text:q,direction:q,$ma:0,t:new ig.u({attributes:{text:{c:"LangLabel",d:"Tutorial Text description",gs:h},
g:{c:"Vec2",d:"Marker Square position"},size:{c:"Vec2",d:"Marker Square size"},direction:{c:"String",d:"Direction to show text relative to marker square.",U:sc.cQ},$ma:{c:"Number",d:"Point where text line touches marker box. Between 0 to 1. 0= left corner, 1=right corner.",ab:0.5},TU:{c:"Boolean",d:"If true: Stop time while displaying the message"}},width:500}),f:function(a){this.text=new ig.Ra(a.text);this.g=a.pos;this.size=a.size;this.direction=sc.cQ[a.direction]||sc.cQ.TOP_LEFT;this.$ma=a.connectPos||
0;this.TU=a.stopTime||y},start:function(a){a.Xb=y;var b=new sc.iUa(this.g.x,this.g.y,this.size.x,this.size.y,this.text.toString(),this.direction,this.$ma,this.TU,function(){a.Xb=h});ig.X.vd(b)},ya:function(a){return a.Xb}});var a={PLAYER:function(a){ig.r.cb.lc(ig.Pa.CENTER,a)},CROSSHAIR:function(a){var b=ig.r.cb.X.Xh;b&&b.lc(ig.Pa.CENTER,a)},ENEMY:function(a){for(var b=ig.r.ln,c=b.length,j=q;c--;){var k=b[c];if(k instanceof ig.wa.Enemy&&ig.gl.ut(k,-16)){j=k;break}}j=j||ig.r.cb;j.lc(ig.Pa.CENTER,a)}},
b=Vec3.create(),c=Vec2.create();ig.oa.SHOW_TUTORIAL_PLAYER_MSG=ig.qa.extend({g:q,size:q,text:q,direction:q,$ma:0,t:new ig.u({attributes:{text:{c:"LangLabel",d:"Tutorial Text description",gs:h},ZB:{c:"String",d:"Marker Square position",U:a},size:{c:"Vec2",d:"Marker Square size"},TU:{c:"Boolean",d:"If true: Stop time while displaying the message"}},width:500}),f:function(b){this.text=new ig.Ra(b.text);this.ZB=a[b.targetType]||a.PLAYER;this.size=b.size;this.TU=b.stopTime||y},start:function(a){a.Xb=y;
var f=this.text.toString();this.ZB(b);var i=ig.i.Jy(c,b.x,b.y-b.z),j=0,j=i.x<ig.i.width/2?i.y<ig.i.height/2?sc.cQ.BOTTOM_RIGHT:sc.cQ.TOP_RIGHT:i.y<ig.i.height/2?sc.cQ.BOTTOM_LEFT:sc.cQ.TOP_LEFT;i.x=i.x-this.size.x/2;i.y=i.y-this.size.y/2;i.x=Math.round(i.x);i.y=Math.round(i.y);f=new sc.iUa(i.x,i.y,this.size.x,this.size.y,f,j,0.5,this.TU,function(){a.Xb=h});ig.X.vd(f)},ya:function(a){return a.Xb}});ig.oa.SHOW_DEMO_HIGHSCORE=ig.qa.extend({bH:y,t:new ig.u({attributes:{bH:{c:"Boolean",d:"True if this is for the observatory challenge.",
ab:y}}}),f:function(a){this.bH=a.observatory||y},start:function(a){a.Xb=y;var b=new sc.pgb(function(){a.Xb=h},this.bH);ig.X.vd(b)},ya:function(a){return a.Xb}});ig.oa.SHOW_DEMO_TIME=ig.qa.extend({bH:y,t:new ig.u({attributes:{bH:{c:"Boolean",d:"True if this is for the observatory challenge.",ab:y}}}),f:function(a){this.bH=a.observatory||y},start:function(a){a.Xb=y;var b=new sc.rgb(function(){a.Xb=h},this.bH);ig.X.vd(b)},ya:function(a){return a.Xb}});ig.oa.SHOW_GET_MSG=ig.qa.extend({text:q,lb:q,Ceb:y,
t:new ig.u({attributes:{pT:{c:"String",d:"Type of get message",U:["ACTIVATED","OBTAINED","REMOVED","ENEMY","EXTENDED","WORD","FRIENDSHIP","PARTY","USED","HAND_OVER","RESET"]},object:{c:"LangLabel",d:"Object of get message"}},width:500}),f:function(a){var b=a.msgType;if(b){if(b=="WORD")this.Ceb=h;if(ig.lang){b=ig.lang.get("sc.gui.get-msg."+b);a=(new ig.Ra(a.object)).toString();this.text=ig.lang.d3a(b,a,"\\i[<]"+a+"\\i[>]")}}else this.text="UNKNOWN MSG TYPE";this.lb=ig.mh.sZ("ability-got")},Ka:function(){this.lb.Ka()},
start:function(a){a.Xb=y;this.Ceb&&sc.pa.bc("misc","words",1);var b=new sc.rP(this.text,{maxWidth:300,textAlign:ig.$g.zl.at,speed:ig.Rd.se.FASTEST},"white",0.3,function(){a.Xb=h});b.z$a(0,-64);ig.X.vd(b);ig.mh.dea(this.lb,1,ig.KE.MEDIUM)},ya:function(a){return a.Xb}});ig.oa.SHOW_SIDE_MSG=ig.qa.extend({Me:q,message:q,hB:0,t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Person + Exporession of message"},message:{c:"LangLabel",d:"Message to display",gs:h}},label:function(){return"<b>SHOW_SIDE_MSG</b> <em>"+
wmPrint("PersonExpression",this.Oh)+"</em>: <i>"+wmPrint("LangLabel",this.message)+"</i>"}}),f:function(a){this.Me=new sc.lI(a.person.person,a.person.expression);this.message=new ig.Ra(a.message);ig.Ae&&ig.Ae.Cz("Side MSG "+this.Me.Ad.name,this.message);if(this.Me.Ad.name=="main.lea"&&a.message&&a.message.en_US)this.hB=(this.hB=a.message.en_US.match(/hi[.!?]/gi))?this.hB.length:0},Ka:function(){this.Me.Tc()},start:function(){this.hB&&sc.pa.bc("misc","hiCount",this.hB||0);ig.Ae&&ig.Ae.yE("Side MSG "+
this.Me.Ad.name,this.message);sc.q.message.fbb(this.Me,this.message)}});ig.YE.SHOW_SIDE_MSG=function(a){var b="SIDE MSG[";a.Oh&&(b=b+(a.Oh.Oh+">"+a.Oh.IJ));return b+"]"};ig.oa.CLEAR_SIDE_MSG=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.q.message.Cba()}});ig.oa.SHOW_BOARD_MSG=ig.qa.extend({text:q,title:q,mq:q,t:new ig.u({attributes:{text:{c:"LangLabel",d:"Text to display.",gs:h},mq:{c:"Boolean",d:"Center the text."},mn:{c:"String",d:"If defined: moved board message to side of screen, allowing to display persons in parallel",
U:sc.Zz,I:h},Bp:{c:"Boolean",d:"Automatically continue after message"}},width:600}),f:function(a){this.text=new ig.Ra(a.text);this.mq=a.center;this.mn=sc.Zz[a.side]||q;this.Bp=a.autoContinue||y;ig.Ae&&ig.Ae.Cz("BOARD MSG TEXT",this.text)},start:function(){sc.q.message.$Lb(this.text,this.mq,this.mn,this.Bp);ig.Ae&&ig.Ae.yE("BOARD MSG TEXT",this.text)},ya:function(){return!sc.q.message.HG()}});ig.YE.SHOW_BOARD_MSG=N("BOARD_MSG");ig.oa.CLEAR_BOARD_MSG=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),
start:function(){sc.q.message.GM()}})});ig.J=h;ig.N("game.feature.msg.plug-in").O("game.feature.msg.entities.event-trigger","game.feature.msg.gui.message-box","game.feature.msg.gui.dream-msg","game.feature.msg.gui.message-overlay","game.feature.msg.gui.message-board","game.feature.msg.gui.side-message-hud","game.feature.msg.message-model","game.feature.msg.msg-steps").K(function(){if(window.Ed){wm.Ek.push("game.feature.msg.editors.msg-editor");wm.Um(/MSG/,"red");wm.Um(/SHOW_CHOICE/,"red")}});
ig.J=h;ig.N("game.feature.interact.screen-interact").O("impact.feature.interact.interact").K(function(){sc.Xx=ig.tRa.extend({cZa:q,Aeb:y,FYa:y,f:function(a,b){this.cZa=a;this.Aeb=b?b:y},update:function(){if(sc.ba.y4a(this.Aeb,this.FYa)){ig.La.Md();this.cZa.Km()}}})});ig.J=h;
ig.N("game.feature.interact.skip-interact").O("impact.feature.interact.interact").K(function(){function a(a,c){return a.Li-c.Li}sc.cW={vQa:1,kQa:2,dya:3};sc.Mnb=ig.Uf.extend({xb:[],f:J(),De:function(b){if(this.xb.indexOf(b)==-1){var c=this.K4();this.xb.push(b);this.xb.sort(a);b=this.K4();if(c!=b){c&&c.Oy.x6(sc.cW.kQa);b.Oy.x6(sc.cW.vQa)}}},$e:function(a){var c=this.K4();this.xb.ye(a);a=this.K4();if(c!=a){c&&c.Oy.x6(sc.cW.kQa);a&&a.Oy.x6(sc.cW.vQa)}},K4:function(){return this.xb[0]},YNb:function(){var a=
this.K4();a&&a.Oy.x6(sc.cW.dya)}});sc.GTa=ig.Ca.extend({Oy:q,Li:0,f:function(a,c){this.Oy=a;this.Li=c},wc:function(){return sc.IU.K4()==this}});ig.Vf(function(){return sc.IU=new sc.Mnb})});ig.J=h;ig.N("game.feature.interact.plug-in").O("game.feature.interact.map-interact","game.feature.interact.gui.interact-gui","game.feature.interact.screen-interact","game.feature.interact.skip-interact").K(J());ig.J=h;
ig.N("game.feature.trade.gui.trade-menu").O("game.feature.trade.trade-model","impact.base.image","impact.feature.gui.gui","game.feature.menu.gui.menu-misc","game.feature.trade.gui.trade-dialog","game.feature.trade.gui.equip-toggle-stats").K(function(){sc.upb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{},time:0.3,p:KEY_SPLINES.EASE_IN}},info:q,jr:q,F8:q,back:q,jo:q,Wcb:q,kb:q,hva:q,jva:q,kva:q,ddb:q,hg:q,k6:q,f:function(a){this.parent();
this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);this.a.zIndex=1180;this.a.xf=h;this.ddb=a.options||q;this.hva=new sc.qpb;this.m(this.hva);this.jva=new sc.wpb;this.m(this.jva);this.kva=new sc.hUa;this.m(this.kva);this.info=new sc.B9;this.info.alpha=1;this.info.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21},time:0.3,p:KEY_SPLINES.EASE_IN}};this.info.H(ig.k.hb,ig.k.Cb);this.m(this.info);this.F8=new ig.mf("#000000",ig.i.width,21);this.F8.a.R={DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21},time:0.3,p:KEY_SPLINES.EASE_IN}};this.F8.j("HIDDEN",h);this.m(this.F8);this.hg=new ig.da;this.hg.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-21},time:0.2,p:KEY_SPLINES.LINEAR}};this.hg.H(ig.k.ra,ig.k.$);this.hg.F(125,21);this.hg.l(144,0);this.k6=new sc.Tb(99999999,{transitionTime:0.2});this.k6.H(ig.k.ra,ig.k.$);this.k6.za(sc.q.T.df,h);this.k6.l(14,7);this.hg.m(this.k6);a=new sc.ea(ig.lang.get("sc.gui.trade.credits"),
{font:sc.Ea.Ib});a.l(0,7);this.hg.m(a);a=new ig.ec(this.s,488,32,12,10);a.H(ig.k.ra,ig.k.$);a.l(0,6);this.hg.m(a);this.m(this.hg);this.hg.j("HIDDEN",h);this.jr=new sc.cwa;this.info.m(this.jr);this.jr.text.we.offset.x=-1;this.jr.text.we.offset.y=-4;this.jr.text.UGa=function(){return sc.Fb.OF};a=new sc.mc("\\i[back]"+ig.lang.get("sc.gui.menu.back"),sc.a1,h,sc.Mc.$c,sc.gd.back);a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetX:-sc.a1},time:0.2,p:KEY_SPLINES.LINEAR}};a.H(ig.k.ra,
ig.k.$);a.cc=function(){this.bM()}.bind(this);a.setData({description:ig.lang.get("sc.gui.trade.end")});a.j("HIDDEN",h);this.Sk=a;this.m(this.Sk);a=new sc.mc("\\i[help4]"+ig.lang.get("sc.gui.trade.toggle"),q,h,sc.Mc.$c);a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-sc.Mc.$c.height},time:0.2,p:KEY_SPLINES.LINEAR}};a.ac=q;a.cc=function(){if(sc.Fb.Iv>=0){sc.gd.submit.play();sc.Fb.Ucb()}}.bind(this);a.H(ig.k.ra,ig.k.$);a.dg=h;a.l(73,0);a.setData({description:ig.lang.get("sc.gui.trade.toggleDes")});
a.j("HIDDEN",h);this.Wcb=a;a=new sc.mc("\\i[help]"+ig.lang.get("sc.gui.menu.hotkeys.help"),g,h,sc.Mc.$c);a.dg=h;a.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{offsetY:-a.a.size.x},time:0.2,p:KEY_SPLINES.LINEAR}};a.cc=this.qaa.bind(this);a.H(ig.k.ra,ig.k.$);a.l(73,0);a.j("HIDDEN",h);this.jo=a;this.m(this.jo);this.hg.l(this.jo.a.size.x+this.Sk.a.size.x+12,0)},IDa:function(){sc.P.Hc(sc.Fb,this);sc.P.Wa(sc.Fb,this);sc.Fb.IDa(this.ddb);sc.Fb.Z.Aba();sc.Fb.Z.Jd(this.Sk,this.usb.bind(this));
sc.Fb.Z.Jd(this.jo,this.paa.bind(this));sc.Fb.Z.Jd(this.Wcb,this.Csb.bind(this));this.hva.Yd();this.jva.Yd();this.kva.Yd();this.jr.ga("");this.j("DEFAULT",h);this.info.j("DEFAULT");this.F8.j("DEFAULT");this.Sk.j("DEFAULT");this.jo.j("DEFAULT");this.hg.j("DEFAULT");var a=sc.Fb.P4().get[0];if(sc.yb.A5(a.id)){sc.Fb.lE(a.id);sc.Fb.Rj("",y)}},paa:function(){return sc.ba.Hs()},qaa:function(){this.jo.j("HIDDEN");this.hg.j("HIDDEN");this.Lqb();ig.X.vd(this.kb);this.kb.Dt()},usb:function(){return sc.ba.Cq()},
Csb:function(){return sc.ba.rIa()},Lqb:function(){if(!this.kb){this.kb=new sc.Yq(this,ig.lang.get("sc.gui.menu.help-texts.trade.title"),ig.lang.get("sc.gui.menu.help-texts.trade.pages"),function(){this.jo.j("DEFAULT",y,y,q,0.2);this.hg.j("DEFAULT",y,y,q,0.2)}.bind(this));this.kb.a.zIndex=15E4;this.kb.a.xf=h}},bM:function(){sc.P.Hc(sc.Fb,this);this.hva.pl();this.jva.pl();this.kva.pl();sc.q.Zw();sc.Fb.Z.Aba();sc.Fb.kyb();this.kb=q;ig.La.Md(0.2);this.Sk.j("HIDDEN");this.jo.j("HIDDEN");this.info.j("HIDDEN");
this.F8.j("HIDDEN");this.hg.j("HIDDEN");this.j("HIDDEN",y,h)},Ab:function(a,b,c){a==sc.Fb&&(b==sc.dt.oC?this.info.ga(sc.Fb.iB,c||y?0.5:0):b==sc.dt.Y8?this.jr.ga(sc.Fb.OF,c||y?0.5:0):b==sc.dt.YTa&&this.k6.za(sc.q.T.df))}})});ig.J=h;
ig.N("game.feature.npc.entities.npc-entity").O("game.feature.npc.entities.sc-actor","game.feature.character.character","game.feature.interact.map-interact","game.feature.trade.gui.trade-menu").K(function(){var a=new ig.bv({jumpingEnabled:h,maxVel:180,weight:200}),b=Vec3.create();Vec2.create();var c=new ig.Xe("",[{type:"SET_FACE_TO_ENTITY",entity:{player:h},rotate:h}]),d=new ig.Xe("",[{type:"SET_FACE",face:{actorAttrib:"preEventFace"},rotate:h}]);sc.QV={PUSHABLE:0,FIXED_POS:1,FIXED_FACE:2};sc.aF={BOTH:0,
MALE:1,FEMALE:2};ig.YE.NPC=function(a){return"NPC["+(a.yf.name||"")+"]"};ig.wa.NPC=sc.Jc.extend({fR:q,Ad:q,To:[],ZIa:q,CC:-1,ti:{},hidden:y,wf:q,$w:y,kca:y,XIa:new ig.ud("npc"),Pv:{Jm:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[0,1,2,3,4,5,5,5],NEAR:[6]},0.1),Eha:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24,0,240),{FOCUS:[0,0,1,2,3,0,0,0,0],NEAR:[4],AWAY:[5]},0.1),Jb:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24,0,216),{FOCUS:[1,0,1,2,3,2],NEAR:[4],AWAY:[5]},0.1),dWb:new sc.as(new ig.Vh("media/gui/map-icon.png",
24,24),{FOCUS:[0,1,2,3,4,5,5,5],NEAR:[6],AWAY:[7]},0.1),Fb:new sc.as(new ig.Vh("media/gui/map-icon.png",40,24,0,144),{FOCUS:[0,1,2,3],NEAR:[4],AWAY:[5]},0.3),cPb:new sc.as(new ig.Vh("media/gui/map-icon.png",40,24,0,192),{FOCUS:[2],NEAR:[2],AWAY:[2]},0.3),dPb:new sc.as(new ig.Vh("media/gui/map-icon.png",40,24,0,192),{FOCUS:[0],NEAR:[1],AWAY:[1]},0.3)},Xea:q,yy:q,Vna:y,rw:q,dV:q,Pr:q,Zi:q,f4:q,Pna:q,af:{g:Vec3.create()},t:new ig.u({Dd:h,attributes:{fR:{c:"Character",d:"Character of NPC",bh:"Character"},
To:{c:"NPCStates",d:"Different states of the NPC",xc:h},AF:{c:"Analyzable",d:"Analyzable if any.",Zka:h,I:h,xc:h},rS:{c:"VarCondition",d:"Condition for entity to become transparent",I:h,lv:70}},label:N(""),Uk:h,Sl:"rgba(0,0,255, 0.5)"}),Xd:q,bj:q,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.F(12,12,28);this.b.aN=h;this.ZIa=d.npcStates;this.wf=new sc.OV(this,this,this.Pv.Jm,sc.UE.mW,h);this.wf.lma=h;Vec3.assign(this.af.g,this.b.g);if(this.fR=d.characterName){if(window.Ed){this.t=this.t.copy();this.t.Uk=
y}this.Ad=new sc.i9(this.fR);this.Ad.Yt(this)}if(d.analyzable){this.Zi=d.analyzable.text||q;this.f4=d.analyzable.active||q}else{this.Zi=d.displayName||q;this.f4=d.displayTrigger||q}if(d.hideCondition)this.bj=new ig.r1(d.hideCondition)},SJa:function(){this.YBa()},Aha:function(a){Vec3.Oa(this.af.g,a.x-this.b.size.x/2,a.y-this.b.size.y/2,a.z)},YBa:function(){var a=this.b;if(a.g.z<ig.r.Xy&&!this.ria&&!this.b.rm){if(a.V.z<0)a.V.z=0;this.XM()}else{this.b.yd.height&&!this.Jg&&!ig.qd.oqa(this.b)&&(a.pc>=
ig.r.Xy&&!ig.Pb.qqa(ig.Pb.pN(this.b,y,h)))&&Vec3.assign(this.af.g,this.b.g);if(!(a.g.z>a.pc||this.Jg||a.Fd==0)){a=this.RU.Pb;if(ig.Pb.vea(a)){var c=this.lc(ig.Pa.BOTTOM,b);a==ig.hd.WATER&&ig.r.G.PA.Cg("waterSplash",c.x,c.y,c.z);this.XM(a)}else!ig.qd.oqa(this.b)&&(!ig.Pb.qqa(this.RU.Pb)&&!this.af.n)&&Vec3.assign(this.af.g,this.b.g)}}},XM:function(){Vec3.Oa(this.b.V,0,0,0);this.l(this.af.g.x,this.af.g.y,this.af.g.z);this.hf.path.ZKa();ig.r.G.cj.va("appear",this)},opa:function(){return{type:"NPC",Zi:this.Zi,
f4:this.f4,IWb:this.Pna,disabled:this.hidden}},Eq:function(c){c||e(Error("Character loading failed for character '"+this.fR));c=this.Ad.data;c.size&&Vec3.assign(this.b.size,c.size);c.shadow==g&&(c.shadow=16);this.mb=new ig.Al(c.animSheet);for(var d in c.walkAnimSet)this.WO(d,c.walkAnimSet[d]);var j=new ig.bv;j.YS(c,a);for(var k in c.configs){var l=c.configs[k];this.ti[k]=new ig.bv;this.ti[k].YS(l,j)}this.JK(d);if(d=this.ZIa)for(k=0;k<d.length;++k)this.To.push(new sc.Nkb(d[k],this));this.ZIa=q;if(window.Ed){if(this.To[0]){Vec2.assign(this.face,
this.To[0].face);d=Vec3.assign(b,this.b.g);this.Mq(this.ti[this.To[0].fd]);this.l(d.x,d.y,d.z)}}else this.Gia(h);this.Xea=new ig.Xe("",[{type:"SET_FACE_TO_ENTITY",entity:this,rotate:h}]);this.Xea.sq=h;this.Bd()},Ge:function(a){this.parent(a);this.Ad.Tc();this.mb.Tc();for(a=0;a<this.To.length;++a)this.To[a].Ka()},update:function(){if(this.kca){this.$w=y;this.Gia(y,h);this.kca=y}this.wf.X.a.nd=this.Ya.alpha;this.bj&&this.bj.update(this);this.parent()},N7a:function(){sc.cn.$e(this.wf);this.hide()},XT:function(){if(!this.yy||
!this.yy.ko()||!this.Vna){this.yy=q;if(this.ed&&this.ed.sq)this.$w=h;if(!this.ed&&!this.$w)if(this.G3a())this.Vga();else{var a=this.To[this.CC];a&&a.Yea&&this.Zf(a.Yea)}if(!this.ed&&this.hidden&&!this.Og&&!this.kca){sc.cn.$e(this.wf);this.Ya.alpha=0;this.hide()}if(!this.ed&&!sc.q.oe()&&(this.Bsa||this.$w)){this.Bsa=y;this.kca=h}}},ag:function(){this.Gia(y);this.bj&&this.bj.ag(this)},xta:function(a){if(a||this.Og){this.$w=y;this.Gia(h,h)}else this.kca=h},G7:function(a){this.ti[a]?this.Mq(this.ti[a]):
ig.warn("NPC: No such config available: "+a)},BUb:function(){for(var a=this.To.length;a--;)if(this.To[a].fb.evaluate())break;return a!=this.CC},Gia:function(a,c){var d=this.ed&&this.ed.sq&&this.Og,k=this.$w||this.ed&&this.ed.sq&&!this.Og;a&&(k=y);for(var l=this.To.length;l--;)if(this.To[l].fb.evaluate())break;if(!d||this.To[l]&&!this.To[l].hidden)if(c||a||l!=this.CC){this.Pr&&this.Pr.stop();this.Pr=q;this.Bsa=k;this.evb();var m=this.To[this.CC],n=!m||m.hidden;this.CC=l;if(l==-1){sc.cn.$e(this.wf);
if(!k){this.hidden=h;this.Ei();this.hide()}}else{l=this.To[this.CC];if(!k){var o=this.ti[l.fd];l.i7!=sc.QV.PUSHABLE?o.kH("weight",-1):o.lCa();var t;if(d){t=this.ed;this.Ei()}if(a)var p=Vec3.assign(b,this.b.g);this.Mq(this.ti[this.To[0].fd]);a&&this.l(p.x,p.y,p.z);this.Mq(o);this.hidden=l.hidden;d&&this.Zf(t)}if(a)if(this.hidden)this.hide();else{this.Ya.alpha=1;this.show()}this.eLb(l);k||!l.uB?sc.cn.$e(this.wf):sc.cn.De(this.wf);if(!k)if(a||n&&this.hidden&&this.Og){this.l(l.position.x-this.b.size.x/
2,l.position.y-this.b.size.y/2,l.position.z);Vec2.assign(this.face,l.face);if(l.TT)this.Pr=l.TT.va(this,{duration:-1})}else{k=q;if(n&&this.Og){if(m){this.l(m.position.x-this.b.size.x/2,m.position.y-this.b.size.y/2,m.position.z);Vec2.assign(this.face,m.face)}this.show();this.Ya.alpha=0;l.Cx?l.Cx.va(this):this.XIa.va("appear",this,{duration:0});if(m&&m.ur)k=(m=ig.Ja.rd(m.ur))&&m.rZ(this)}if(l.TT)this.Pr=l.TT.va(this,{duration:-1});!d&&l.i7!=sc.QV.FIXED_FACE&&this.Zf(l.c0);k&&this.IKa(k,h,h)}}}},eLb:function(a){if(a.oK==
sc.qC.aQ){this.wf.nz(this.Pv.Fb);this.wf.M_(a.uB.No)}else if(a.oK==sc.qC.WV)this.wf.nz(this.Pv.Jb);else if(a.oK==sc.qC.aW)this.wf.nz(this.Pv.Eha);else{this.wf.nz(this.Pv.Jm);this.wf.M_(q)}},ULb:function(a){this.Wrb();this.wf.M_(this.dV);this.rw=a||q;sc.cn.De(this.wf);this.rw.XC?this.wf.nz(this.Pv.dPb):this.wf.nz(this.Pv.cPb);this.dV.ga(a.Fzb(),a);this.dV.show()},wVb:function(){return this.dV&&this.dV.VDb()},fvb:function(){this.rw=q;this.dV.hide();sc.cn.$e(this.wf)},Wrb:function(){if(!this.dV)this.dV=
new sc.fqb},Km:function(){var a;if(!sc.dc.E3a()){if(this.rw){if(!this.rw.XC)return y;a=this.rw.XC;this.rw.Hfa()}else{var b=this.To[this.CC];b.uB&&(a=b.oK==sc.qC.aQ?b.uB.event:b.uB)}if(a)this.yy=ig.r.vi.Dp(a,ig.Qm.BLOCKING,this.Hfa.bind(this),this.OZ.bind(this),q,this,{character:this.fR})}},Hfa:function(){var a=this.To[this.CC];ig.r.cb.Zf(this.Xea);var b=sc.sa.Xk(0),d=sc.sa.Xk(1);b&&b.Zf(this.Xea);d&&d.Zf(this.Xea);if(a.i7!=sc.QV.FIXED_FACE){this.setAttribute("preEventFace",ig.copy(this.face));this.Vna=
h;this.$w?this.$w=y:this.Cua();this.Zf(c);this.$w=h}a=this.tb();a.y=a.y-this.b.g.z;ig.le.wx(new ig.sf.gq(new ig.sf.Exa(a),0,0),"FAST");sc.q.Cca()},OZ:function(){this.$w=y;if(this.ed&&this.ed.sq)this.Bsa=h;if(!this.Bsa&&this.Vna)if(this.G3a())this.Zf(d);else{var a=this.To[this.CC];a&&this.Zf(a.c0)}else this.Gia(y,h);this.rw&&this.rw.OZ();ig.le.vKa("FAST");sc.q.dY()},wNa:function(){var a=this.To[this.CC];a.uB&&a.oK==sc.qC.aQ&&a.uB.wNa()},evb:function(){this.Zvb();this.Vna=y}});sc.qC={Mmb:0,aQ:1,WV:2,
aW:3};sc.Nkb=ig.Ca.extend({t:new ig.u({attributes:{fb:{c:"VarCondition",d:"Condition for this page to be active",lla:24},position:{c:"Vec3",d:"Position of NPC for this page",kq:h,I:h},i7:{c:"String",d:"How NPC will react on touches and talking",oQ:h,U:sc.QV,ab:"FIXED_POS"},face:{c:"Face",d:"Face direction.",oQ:h},fd:{c:"CharConfig",d:"Configuration of Charater for this page",oQ:h},action:{c:"Action",d:"Action to perform constantly",xc:h,oQ:h,Dqb:h,I:h},Cx:{c:"Effect",d:"Action to perform constantly",
xc:h,oQ:h,I:h},zG:{c:"Effect",d:"Action to perform constantly",xc:h,oQ:h,I:h},TT:{c:"Effect",d:"Action to perform constantly",xc:h,oQ:h,I:h},hidden:{c:"Boolean",d:"If true: NPC is hidden.",oQ:h,Dqb:h},ur:{c:"Entity",d:"Door that NPC should enter from/leave to (only specify when hidden!)",I:h,oQ:h},event:{c:"NPCEvent",d:"Type of npc event. e.g. simple event or trade."}}}),fb:q,position:Vec3.create(),fd:q,face:Vec2.create(),hidden:y,ur:q,c0:q,Yea:q,i7:sc.QV.PUSHABLE,uB:q,oK:q,Cx:q,TT:q,f:function(a,
b){this.fb=new ig.de(a.condition);if(a.position)ig.Ja.vq(a.position,this.position);else{b.tb(this.position);this.position.z=b.b.g.z}ig.Jc.uq(ig.Jc.un[a.face]||0,this.face);this.hidden=a.hidden||y;this.fd=a.config;if(!b.ti[this.fd]){for(var c in b.ti)break;this.fd=c}this.ur=a.door;this.i7=sc.QV[a.reactType||"PUSHABLE"];c=[{type:"NAVIGATE_TO_POINT",target:this.position,maxTime:0,teleportOnFail:h,precise:!this.ur&&this.i7==sc.QV.FIXED_POS}];this.hidden?c.push({type:"SHOW_EFFECT",effect:a.hideFx?ig.copy(a.hideFx):
{sheet:"npc",name:"disappear"},duration:0,wait:!this.ur,actionDetached:h}):c.push({type:"SET_FACE",face:a.face||0,rotate:h});this.ur&&c.push({type:"ENTER_DOOR",door:this.ur});this.c0=new ig.Xe("[NPC]",c);if(a.showFx)this.Cx=new ig.Bi(a.showFx);if(a.permaFx)this.TT=new ig.Bi(a.permaFx);if(a.action&&a.action.length>0&&!this.hidden)this.Yea=new ig.Xe("[NPC]",a.action);if(a.event)if(a.event instanceof Array){if(a.event.length>0){c={name:"NPC EVENT",steps:a.event};this.uB=new ig.Ja(c);this.oK=sc.qC.Mmb}}else if(a.event instanceof
Object)if(a.event.trade){this.uB=new sc.tpb(a.event.trade,b);this.oK=sc.qC.aQ}else if(a.event.quest){c={name:"NPC EVENT",steps:a.event.quest};this.uB=new ig.Ja(c);this.oK=sc.qC.WV}else if(a.event.shop){c={name:"NPC EVENT",steps:a.event.shop};this.uB=new ig.Ja(c);this.oK=sc.qC.aW}},Ka:function(){this.uB&&this.uB.Ka();this.c0&&this.c0.Ka();this.Yea&&this.Yea.Ka();this.Cx&&this.Cx.Ka();this.TT&&this.TT.Ka()}});ig.Zr.qQb={v3:ig.wa.NPC,FV:{sizeOverride:q,terrain:0},J4:function(){typeof this.terrain=="string"&&
(this.terrain=ig.hd[this.terrain]||0)},apply:function(a){this.sizeOverride&&a.b.F(this.sizeOverride.x,this.sizeOverride.y,this.sizeOverride.z,h);a.Pb=this.terrain||0},load:function(a){this.terrain=a.Pb}}});ig.J=h;
ig.N("game.feature.npc.entities.npc-runner-entity").O("game.feature.npc.entities.sc-actor","game.feature.character.character","game.feature.interact.map-interact","game.feature.trade.gui.trade-menu").K(function(){var a=new ig.bv({jumpingEnabled:h,maxVel:180,weight:200,collType:ig.ca.IGNORE,soundType:"none"}),b={NORTH:{x:0,y:1},EAST:{x:-1,y:0},SOUTH:{x:0,y:-1},WEST:{x:1,y:0}},c=Vec2.create(),d=Vec3.create();sc.wkb=sc.Jc.extend({XIa:new ig.ud("npc"),fR:q,Ad:q,ti:{},LKa:0,G:{ZOb:new ig.ud("scene.water")},
f:function(b,c,d,k){this.parent(b,c,d,k);this.b.F(12,12,28);this.b.aN=h;this.Ad=k.character;b=this.Ad.data;b.size&&Vec3.assign(this.b.size,b.size);b.shadow==g&&(b.shadow=16);this.mb=k.animSheet;for(var l in b.walkAnimSet)this.WO(l,b.walkAnimSet[l]);l=new ig.bv;l.YS(b,a);for(var m in b.configs){c=new ig.bv;c.YS(b.configs[m],l);c.kH("weight",20);c.kH("relativeVel",k.speed);this.Mq(c);break}this.Bd();this.OCb(k.enter,k.exit,k.waypoints,k.partyIdx)},OCb:function(a,b,c,d){var l=Vec3.create(),a=this.P1a(a,
sc.IL.ENTER,d,l),m=Vec3.create(),b=this.P1a(b,sc.IL.EXIT,d,m);this.l(l.x-this.b.size.x/2,l.y-this.b.size.y/2,l.z);ig.Jc.uq(ig.Jc.un[a.dir]||0,this.face);this.Ya.alpha=0;this.XIa.va("appear",this,{duration:0});l=q;a.Q.rZ&&(l=a.Q.rZ(this));m=[{type:"NAVIGATE_TO_POINT",target:m,maxTime:0,precise:y},{type:"SHOW_EFFECT",effect:{sheet:"npc",name:"disappear"},duration:0,wait:y,actionDetached:h},{type:"ENTER_DOOR",door:b.Q}];if(c)for(b=c.length;b--;){var n=c[b],d=Vec3.create();n.lc(ig.Pa.BOTTOM,d);var o=
n.b.size.x-this.b.size.x,n=n.b.size.y-this.b.size.y;d.x=d.x+(Math.random()-0.5)*o;d.y=d.y+(Math.random()-0.5)*n;m.unshift({type:"NAVIGATE_TO_POINT",target:d,maxTime:0,precise:y})}a.XOb&&m.unshift({type:"WAIT",time:0.1+Math.random()*1});c=new ig.Xe("[NPC]",m);this.Zf(c);l&&this.IKa(l,h,h)},P1a:function(a,c,d,k){for(var l=a.xb,m=[],n=a.xb.length;n--;){a=l[n];a.type&c&&(c!=sc.IL.ENTER||!a.Q.g5a||!a.Q.g5a())&&m.push(a)}m.length==0&&(m=l);a=m[d%m.length];c=a.Q;c.lc(ig.Pa.BOTTOM,k);if(a.ap==sc.bka.SIDE){d=
b[a.dir];k.x=k.x+d.x*(c.b.size.x/2+this.b.size.x/2);k.y=k.y+d.y*(c.b.size.y/2+this.b.size.y/2);if(!d.x){l=Math.max(0,c.b.size.x-64)/2;k.x=k.x+(2*Math.random()-1)*l}if(!d.y){c=Math.max(0,c.b.size.y-64)/2;k.y=k.y+(2*Math.random()-1)*c}}return a},update:function(){this.parent();var a=this.b,b=y;if(a.type==ig.ca.IGNORE)for(var j=ig.r.Br(a.g.x,a.g.y,a.g.z,a.size.x,a.size.y,a.size.z,this),k=j.length;k--;){var l=j[k];if(l instanceof sc.Jc&&l.b.type!==ig.ca.TRIGGER){ig.qd.Wk(l.b,a,c);Vec2.length(c,80*(1-
this.LKa/1).Rb(0,1));Vec2.add(a.Ku,c);b=h}}this.LKa=b?this.LKa+ig.i.ja:0;if(ig.Pb.pN(a,h)==ig.hd.WATER){a=this.lc(ig.Pa.BOTTOM,d);this.G.ZOb.Cg("circularSmallSplash",a.x,a.y,a.z);this.ze()}(sc.q.Qv()||!sc.YIa.hCb())&&!ig.gl.ut(this,16)&&this.ze();this.ed||this.ze()},Ge:function(a){this.parent(a)}})});ig.J=h;
ig.N("game.feature.npc.npc-runners").O("impact.base.game").K(function(){sc.CI={};var a=[{name:"cross-worlds.triblader-male-blue",dp:1},{name:"cross-worlds.triblader-female-purple",dp:1},{name:"cross-worlds.hexacast-male-dark",dp:1},{name:"cross-worlds.hexacast-male-red",dp:1},{name:"cross-worlds.pentafist-male-dark",dp:1},{name:"cross-worlds.pentafist-female-rasta",dp:1},{name:"cross-worlds.quadroguard-female-gray",dp:1},{name:"cross-worlds.quadroguard-male-black",dp:1},{name:"cross-worlds.sphero-female-green",
dp:0.25},{name:"cross-worlds.sphero-male-brown",dp:0.25}];sc.CI.CROSSCENTRAL={MC:a,s6:80,f6:3,x7:0.5};sc.CI.RHOMBUS_SQUARE={MC:a,s6:40,f6:3,x7:0.4};sc.CI.CROWDED={MC:a,s6:20,f6:3,x7:0.2};sc.CI.LIVELY={MC:a,s6:10,f6:3,x7:0.3};sc.CI.REGULAR={MC:a,s6:6,f6:2,x7:0.5};sc.CI.FEW={MC:a,s6:2,f6:2,x7:0.5};sc.IL={ENTER:1,EXIT:2,ENTER_EXIT:3};sc.bka={CENTER:1,SIDE:2};sc.Mkb=ig.Uf.extend({m6a:q,Kj:q,Ny:q,Iea:[],Aa:y,Ul:{DJ:[],koa:0,$A:[],qoa:0},n:0,Z_:0,q_a:0,Pha:q,yeb:q,vua:q,Gbb:0,f:function(){this.parent("NPC Runners")},
jZa:function(){this.Z_=0;this.vua=this.Pha=q;this.Iea.length=0},fMa:function(a){if(this.Kj!=a){this.Kj&&this.IZa();this.Kj=a;this.jZa();if(this.Kj){this.Ny={MC:[],EEa:0,lIa:60/this.Kj.s6};for(var a=this.Kj.MC,c=0;c<a.length;++c){var d=a[c],f={Ad:new sc.i9(d.name),mb:q,dp:d.dp,Mh:d.speed||0};this.Ny.MC.push(f);this.Ny.EEa=this.Ny.EEa+d.dp;f.Ad.Yt(this)}this.n=this.Ny.lIa*(0.05+Math.random()*0.1)}}},Eq:function(a,c){for(var d=this.Ny.MC,f=d.length;f--;)if(d[f].Ad==c)d[f].mb=new ig.Al(c.data.animSheet)},
hCb:function(){return!!this.Ny},zJb:function(){this.fMa(this.m6a)},IZa:function(){if(this.Ny){for(var a=this.Ny.MC,c=a.length;c--;){var d=a[c];d.Ad.Tc();d.mb.Tc()}this.Ny=this.Kj=q}},EGa:function(){for(var a=ig.r.kda("NPCWaypoint"),c=a.length;c--;)a[c].EGa();sc.bSa.rJb()},bKb:function(){this.Ul.DJ.length=0;this.Ul.$A.length=0;this.Ul.koa=0;this.Ul.qoa=0;for(var a=ig.r.entities,c=a.length;c--;){var d=a[c];if(d&&d.ppa){var f=d.ppa();if(f){for(var i=0,j=f.xb.length;j--;)i=i|f.xb[j].type;f.type=i;f.Q=
d;if(f.r4&&i&sc.IL.ENTER){this.Ul.DJ.push(f);this.Ul.koa=this.Ul.koa+f.r4}if(f.v4&&i&sc.IL.EXIT){this.Ul.$A.push(f);this.Ul.qoa=this.Ul.qoa+f.v4}}}}this.Aa=this.Ul.DJ.length>0&&this.Ul.$A.length>0;if(this.Ul.DJ.length==1&&this.Ul.$A.length==1&&this.Ul.DJ[0]==this.Ul.$A[0])this.Aa=y},KMb:function(){this.Pha=this.C2a(y,q);this.vua=this.C2a(h,this.Pha);this.yeb=this.FBb(this.Pha.Q,this.vua.Q);var a=Math.random();this.q_a=this.Z_=Math.ceil(Math.pow(a,2)*this.Kj.f6);this.Gbb=Math.random()<=this.Kj.x7?
0.8+Math.random()*0.1:0.5+Math.random()*0.1;this.Ebb()},Ebb:function(){var a=this.Pha,c=this.vua,d=this.gBb();ig.r.Pe(sc.wkb,0,0,0,{enter:a,exit:c,partyIdx:this.q_a-this.Z_,waypoints:this.yeb,character:d.Ad,animSheet:d.mb,speed:d.speed||this.Gbb});this.Z_--},C2a:function(a,c){var d=a?this.Ul.qoa:this.Ul.koa,f=a?this.Ul.$A:this.Ul.DJ;c&&(d=d-(a?c.v4:c.r4));for(var d=Math.random()*d,i=f.length;i--;){var j=f[i];if(j!=c){d=d-(a?j.v4:j.r4);if(d<=0)return j}}},FBb:function(a,c){return sc.bSa.aKb(a.HE,c.HE)},
gBb:function(){do for(var a,c=Math.random()*this.Ny.EEa,d=this.Ny.MC,f=d.length;f--;){var i=d[f],c=c-i.dp;if(c<=0){a=i;break}}while(this.Iea.indexOf(a)!=-1);this.Iea.push(a);this.Iea.length>Math.floor(this.Ny.MC.length/2)&&this.Iea.shift();return a},aU:100,fH:function(){if(this.Kj&&this.Aa&&!sc.q.Qv()&&!ig.r.paused&&!ig.Wv){this.n=this.n-ig.i.ja;if(this.n<=0){this.Z_>0?this.Ebb():this.KMb();this.n=this.Z_?0.3:this.Ny.lIa*(0.4+Math.random()*0.6)}}},PG:120,Ms:function(a){a=sc.CI[a.attributes&&a.attributes.npcRunners]||
q;this.jZa();this.m6a=a;this.fMa(a)},dK:120,qx:function(){this.EGa();this.bKb()},fj:function(){this.IZa()}});ig.Vf(function(){return sc.YIa=new sc.Mkb})});ig.J=h;
ig.N("game.feature.npc.npc-steps").O("impact.base.action","impact.base.event","game.feature.npc.npc-runners").K(function(){ig.oa.DO_THE_SHAKE=ig.qa.extend({Oh:q,IJ:q,message:q,t:new ig.u({attributes:{Oh:{c:"PersonExpression",d:"Talking person"}},label:N("<em style='color: greenyellow'>DO THE SHAKE</em>")}),f:function(a){if(a.person&&a.person.person){this.Oh=a.person.person;this.Me=new sc.lI(a.person.person,a.person.expression)}else this.Oh=a.person},Ka:function(){this.Me&&this.Me.Tc()},start:function(){this.Me&&
sc.q.message.setExpression(this.Oh,this.Me);var a=ig.lang.get("sc.gui.shakeit.first");this.message=ig.lang.get("sc.gui.shakeit.start")+" ";this.message=this.message+(a[Math.floor(Math.random()*(a.length-1))]+" ");a=ig.lang.get("sc.gui.shakeit.second");this.message=this.message+(a[Math.floor(Math.random()*(a.length-1))]+" ");a=ig.lang.get("sc.gui.shakeit.third");this.message=this.message+(a[Math.floor(Math.random()*(a.length-1))]+"!");sc.q.message.HO(this.Oh,this.message,y)},ya:function(){return!sc.q.message.HG()}});
ig.oa.RESET_NPC=ig.qa.extend({cj:q,t:new ig.u({attributes:{cj:{c:"NPC",d:"NPC to reset"}}}),f:function(a){this.cj=a.npc},start:function(a,b){var c=ig.Ja.rd(this.cj,b);if(c&&c instanceof ig.wa.NPC){c.Ei();c.xta()}}});ig.oa.SET_NPC_RUNNERS=ig.qa.extend({vs:q,t:new ig.u({attributes:{vs:{c:"String",d:"Frequency of NPC Runners. Null = no NPC runners",U:sc.CI,ok:h}}}),f:function(a){this.vs=a.frequency},start:function(){sc.YIa.fMa(sc.CI[this.vs]||q)}});ig.oa.RESET_NPC_RUNNERS=ig.qa.extend({t:new ig.u({attributes:{}}),
f:J(),start:function(){sc.YIa.zJb()}});ig.oa.SET_NPC_CONFIG=ig.qa.extend({cj:q,fd:q,t:new ig.u({attributes:{cj:{c:"NPC",d:"NPC to change"},fd:{c:"String",d:"Config name to apply"}}}),f:function(a){this.cj=a.npc;this.fd=a.config},start:function(a,b){var c=ig.Ja.rd(this.cj,b);c&&c instanceof ig.wa.NPC&&c.G7(this.fd)}});ig.la.RESET_NPC=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a instanceof ig.wa.NPC&&a.xta();return h}});ig.la.APPLY_NPC_CONFIG=ig.qa.extend({fd:q,t:new ig.u({attributes:{fd:{c:"String",
d:"Config name to apply"}}}),f:function(a){this.fd=a.config},ya:function(a){var b=a.ti[this.fd];b&&b.apply(a);return h}})});ig.J=h;
ig.N("game.feature.npc.plug-in").O("game.feature.npc.entities.sc-actor","game.feature.npc.entities.npc-entity","game.feature.npc.entities.npc-runner-entity","game.feature.npc.entities.npc-waypoint","game.feature.npc.npc-runners","game.feature.npc.npc-steps").K(function(){if(window.Ed){wm.Ek.push("game.feature.npc.editors.npc-editor");wm.yu&&(wm.yu.npcRunners={c:"String",U:sc.CI,d:"What kind of NPCs will be running around this map",ok:h})}});ig.J=h;
ig.N("game.feature.player.entities.crosshair").O("impact.base.entity").K(function(){var a=Vec2.create();Vec2.create();var b=Vec3.create(),c=Vec2.create(),d=Vec2.create(),f=Vec2.create(),i=Vec2.create(),j=Vec2.create(),k=Vec3.create(),l=Vec3.create(),m={},n={};ig.wa.Crosshair=ig.Kc.extend({offset:{x:8,y:8,z:0},Pt:new ig.Vh("media/entity/map-gui/crosshair.png",32,32),Wn:q,JM:q,oO:Math.PI/2,XI:0.5,NEb:Math.PI/128,Ema:y,Tp:0,YF:0,nn:1,fma:1,wJ:h,ada:y,Aa:y,Nm:y,u3:0,yWa:Vec2.vc(0,1),nW:Vec2.vc(0,1),jv:[],
nA:0,Na:{pX:new ig.ka("media/sound/move/targeting-charged.mp3",0.4)},Oha:0,ISb:[{x:0,y:-100,Vj:3,Pd:0,$h:0},{x:70,y:-70,Vj:4,Pd:0,$h:0},{x:100,y:0,Vj:5,Pd:0,$h:0},{x:70,y:70,Vj:4,Pd:0,$h:1},{x:0,y:100,Vj:3,Pd:0,$h:1},{x:-70,y:70,Vj:4,Pd:1,$h:1},{x:-100,y:0,Vj:5,Pd:1,$h:0},{x:-70,y:-70,Vj:4,Pd:1,$h:0}],f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.Ze.vg=0;this.b.F(0,0,0);this.YF=this.XI;Vec2.Oa(this.b.g,ig.i.width/2,ig.i.height/2);this.Wn=d.thrower;this.JM=d.controller;this.b.time.parent=
this.Wn.b;for(a=0;a<12;a++)this.jv.push(ig.r.Pe(ig.wa.CrosshairDot,-1E3,-1E3,0))},Np:function(){this.ul(1,h)},hda:function(a){return Vec2.assign(a,this.nW)},vpa:function(a){var a=Vec2.assign(a,this.nW),b=this.Tp*(0.5-Math.random());Vec2.rotate(a,b);return a},KG:function(){return window.Ri&&ig.r.DXb||this.Nm?h:this.Ema&&!this.Tp&&this.JM.qea(this)&&this.YF>this.XI},CMa:function(){this.wJ=h;return this.YF=0},tKb:L("fma"),L_:L("nn"),yKb:function(){this.u3=0.2},l9a:function(a){var b=this.Wn.W?this.Wn.W.Ag("AIM_STABILITY"):
0,a=a*Math.max(0,1-b);this.Tp=Math.min(this.oO,this.Tp+this.oO*a);this.wJ=this.wJ||this.Tp>this.oO/2*this.nn*this.fma},zab:L("Nm"),setActive:function(a){if(this.Aa!=a){this.Aa=a;this.JM.m7a(this);if(this.Aa)this.Tp=this.oO*0.75;else{a=sc.q.xe==sc.yw.k1?2:1;this.Wn.vf&&this.Wn.vf.LB(0,0,a)}}},sr:function(){this.JM.Udb(this);var a=Vec2.Lc(Vec2.sub(this.ila(f),this.b.g));if(Vec2.Ig(a))a.y=1;var b=Vec2.Qb(a,this.yWa),c=this.NEb;if(!this.Nm&&b>2*c){c=this.Wn.W?this.Wn.W.Ag("AIM_STABILITY"):0;this.Tp=this.Tp+
b/2*Math.max(0,1-c);if(this.Tp>this.oO)this.Tp=this.oO;this.wJ=this.wJ||this.Tp>this.oO/2*this.nn*this.fma}Vec2.assign(this.yWa,a);Vec2.assign(this.nW,a);if(this.u3>0)this.u3=this.u3-ig.i.Sa;if(!this.Aa)this.YF=this.XI;if(!this.Aa||ig.i.fm<=0&&!sc.jb.wc())for(a=0;a<this.jv.length;++a){this.jv[a].Ma("normal",h);this.jv[a].l(-1E3,-1E3)}else{if(this.Nm)this.YF=this.XI;this.YF=this.YF+ig.i.ja;if(this.Tp>0){if(this.Nm)this.Tp=this.Tp-ig.i.Sa/this.XI*this.oO*2;else{c=this.nn*this.fma;this.Tp=this.Tp-ig.i.ja/
this.XI*this.oO*c}if(this.Tp<0){this.Tp=0;if(this.YF>this.XI)this.YF=this.XI}}this.KG();b=Vec2.Oa(i,this.b.g.x-ig.r.screen.x-ig.i.width/2,this.b.g.y-ig.r.screen.y-ig.i.height/2);c=this.JM.q1a(a,b);if(this.JM.qea(this)&&this.Wn.vf){c=((c-104)/40).Rb(0,1);c=c*c;this.Wn.wM.length>0&&(c=c*0.5);if(c>0){Vec2.length(b,72*c);Vec2.eb(b,this.Wn.vf.offset)>2&&this.Wn.vf.LB(b.x,b.y,0,this.nW.x,this.nW.y)}else this.Wn.vf.LB(0,0,0,this.nW.x,this.nW.y)}b=this.Tp/2;if(this.KG()){if(this.Oha<=0)this.Oha=0.1;this.Oha=
this.Oha-ig.i.ja}else this.Oha=0;c=Vec2.assign(k,this.Wn.b.g);c.x=c.x+(this.Wn.b.size.x/2-Constants.kC/2);c.y=c.y+(this.Wn.b.size.y/2-Constants.kC/2);c.z=this.Wn.b.g.z;if(this.Wn.WG!==g&&this.Wn.WG>=0)c.z=Math.min(this.Wn.b.g.z,this.Wn.WG);c.z=c.z+Constants.gI;var d;if(!b&&this.KG()){d=this.wJ?"chargedBlink":"charged";if(this.wJ){this.wJ=y;this.Na.pX.play()}}else d="normal";var j=this.Nm||this.JM.qea(this)?1:0.4,n=this.Tp||!this.Ema?0:Math.floor((this.YF-2*this.XI)/0.05).Rb(0,10),m=b?6:12;this.nA=
0;Vec2.rotate(a,b);var v=Vec3.Oa(l,Constants.kC,Constants.kC,Constants.xPa);this.FAa(c,a,v,j,d,n,m,3);if(b){Vec2.rotate(a,-2*b);this.FAa(c,a,v,j,d,n,m,3)}for(;this.nA<this.jv.length;++this.nA){this.jv[this.nA].Ma("normal",h);this.jv[this.nA].l(-1E3,-1E3)}}},Gh:function(){var a=this.Ua[0];if(!this.Aa||ig.i.fm<=0&&!sc.jb.wc())if(this.u3>0){var b=this.ila(f);b.x=b.x+-sc.nP;b.y=b.y+ +sc.nP;a.qg="lighter";a.l(b.x,b.y,0);a.F(sc.nP*2,0,sc.nP*2,0);a.Bj(this.Pt.wd,0,64);a.ge(this.u3/0.2)}else a.ge(0);else{var c=
this.KG(),b=this.JM.qea()?1:0.4,d=0;this.Tp==0&&c&&(d=4+Math.floor(Math.min(2,(this.YF-this.XI)/0.1)));var c=this.b.g.x-16,i=this.b.g.y-this.b.g.z+16;a.qg="source-over";a.l(c,i,0);a.F(32,0,32,0);d=this.Pt.Ly(m,d);a.Bj(this.Pt.wd,d.x,d.y);a.ge(b)}},Ge:function(a){for(var b=0;b<this.jv.length;b++)this.jv[b].ze();this.parent(a)},FAa:function(a,f,j,k,l,m,z,v,x){var A=12;Vec2.length(f,24*A);var F=this.KG(),B=ig.r.Ie.Il(n),C=[];ig.r.Ie.B2=h;var K=ig.r.trace(B,a.x,a.y,a.z,f.x,f.y,j.x,j.y,j.z,ig.ca.PROJECTILE,
q,C),I=ig.r.Ie.B2=y,G=q,D=-1;Vec2.assign(b,f);Vec2.Bk(b,B.Ne);Vec2.add(b,a);b.z=a.z;for(var E=0;E<C.length;++E){var H=C[E].Q;if(H!=x){var Q=H.b3||H.GG&&H.GG(b,B,F),P=!this.Tp&&H.x5&&H.x5(F),U=y;if(Q||P)if(H.b.type==ig.ca.BLOCK)U=D==-1;else{var T=H.tb(c),V=Vec2.eb(a,T);if(D==-1||V<D){D=V;Vec2.assign(d,T);U=h}}if(U){I=y;G=q;Q?I=h:P&&(G=H)}}}if(D!=-1){E=Vec2.sub(d,a);B.Ne=Vec2.ug(E,f)/Vec2.ug(f,f)}A=A*Math.max(0,B.Ne);Vec2.length(f,24);x=y;for(E=1;E<A+0.8;E++){x=Math.round(a.x)+f.x*(E>A-0.2?A-0.1:E);
F=Math.round(a.y)+f.y*(E>A-0.2?A-0.1:E);if(this.jv[this.nA]){this.jv[this.nA].l(x+j.x/2-Constants.kC/2,F+j.y/2-Constants.kC/2);this.jv[this.nA].b.g.z=a.z;this.jv[this.nA].b.aa=ig.r.Hy(a.z);this.jv[this.nA].Ma(l,h,l=="chargedBlink"?"charged":q);this.jv[this.nA].Ya.alpha=k;this.jv[this.nA].b.Cd.size=l=="charged"?4:0;++this.nA}else return;x=h;if(!--z)return}if(x||--z)if(G||K&&!I&&m&&v){v=v-1;Vec2.length(f,24*A);Vec2.add(a,f);if(G){a.x=a.x+j.x/2;a.y=a.y+j.x/2;v=G.uca(a,f,j,v);a.x=a.x-j.x/2;a.y=a.y-j.x/
2;m=z}else{A=Vec2.ug(f,B.dir);Vec2.sub(f,Vec2.Bk(B.dir,2*A,i));m=Math.min(z,m)}this.FAa(a,f,j,Math.max(0.25,k*0.75),l,m,m,v,G)}},ila:function(a){Vec2.assign(a,this.Wn.b.g);a.x=Math.round(a.x)+this.Wn.b.size.x/2;a.y=Math.round(a.y-this.Wn.b.g.z)+this.Wn.b.size.y/2-Constants.gI-Constants.kC/2;return a}});ig.wa.CrosshairDot=ig.Wd.extend({JF:{},Pt:new ig.Vh("media/entity/map-gui/crosshair.png",8,8,32,0),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(Constants.kC,Constants.kC,
Constants.xPa);this.b.time.Im=h;this.Bd({offset:{x:0,y:0,z:(16-Constants.kC)/2},sheet:this.Pt,SUB:[{name:"normal",time:1,frames:[0]},{name:"charged",time:0.07,frames:[1],repeat:y},{name:"chargedBlink",time:0.07,frames:[2,3,1],repeat:y}]})},update:function(){this.Ya.alpha=ig.i.fm<=0&&!sc.jb.wc()?0:1;this.parent()}});sc.zlb=ig.Ca.extend({ada:y,qea:function(){return sc.ba.pv()},q1a:function(a,b){var c=this.ada?a:Vec2.UN(b,ig.i.height/ig.i.width,1,j);return Vec2.length(c)},m7a:function(a){if(a.Aa)this.ada=
sc.ba.ED()},Udb:function(b){if(this.ada){if(sc.ba.ED()){var c=Vec2.Lc(Vec2.sub(b.ila(f),b.b.g)),d=Vec2.Oa(a,sc.ba.Cf(ig.Nd.bA)*ig.i.height*0.6,sc.ba.Cf(ig.Nd.Dw)*ig.i.height*0.6);Vec2.an(c,d,ig.i.Sa*18);b.ila(b.b.g);b.b.g.x=b.b.g.x+c.x;b.b.g.y=b.b.g.y+c.y}}else ig.i.npa(b.b.g,sc.ba.Kp(),sc.ba.Ln())}});sc.mhb=ig.Ca.extend({cl:Vec2.create(),ada:y,qea:N(h),q1a:N(0),m7a:J(),Udb:function(a){Vec2.assign(a.b.g,this.cl)}})});ig.J=h;
ig.N("game.feature.player.player-level-notifier").K(function(){sc.Alb=ig.Ca.extend({EVb:new ig.ka("media/sound/battle/level-up.ogg"),f:J(),c$a:function(a,b,c){a=this.vAb(a,b);b.hCa();ig.r.vi.Dp(a,c?ig.Qm.PARALLEL:ig.Qm.BLOCKING,this.GGb.bind(this),this.FGb.bind(this))},GGb:function(){sc.q.Txb()},FGb:function(){sc.q.Zw();sc.Ep.Ws("LEVEL_UP",{level:sc.q.T.aa})},vAb:function(a,b){var c={steps:[{type:"PLAY_SOUND",sound:"media/sound/battle/level-up.ogg",volume:1},{type:"DO_ACTION",entity:a,action:[{type:"WAIT",
time:-1}]},{type:"ADD_SLOW_MOTION",name:"levelUp",factor:0,time:0.5},{type:"WAIT",time:0.1,ignoreSlowDown:h},{type:"SET_ENTITY_STATIC_TIME",entity:a,value:h,global:h},{type:"DO_ACTION",entity:a,keepState:h,action:[{type:"SHOW_ANIMATION",anim:"levelUpPre",followUp:"levelUpStand"},{type:"WAIT",time:-1}]},{type:"SET_CAMERA_TARGET",entity:a,speed:0.6,transition:"EASE_IN_OUT",wait:h,zoom:1.5,waitSkip:0.2},{type:"ADD_GUI",name:q,guiInfo:{type:"LevelUpHud",settings:{deltaValues:ig.copy(b.LN)}}},{type:"SET_ZOOM_BLUR",
zoomType:"MEDIUM",fadeIn:0.1,duration:0.2,fadeOut:0.5},{type:"WAIT_UNTIL_TRUE",condition:"tmp._levelUpFinished"},{type:"DO_ACTION",entity:a,action:[{type:"SHOW_ANIMATION",anim:"levelUpPreJump"},{type:"WAIT",time:0.2},{type:"SHOW_ANIMATION",anim:"levelUpJump"},{type:"JUMP",jumpHeight:"M",wait:h,ignoreSounds:h}]},{type:"WAIT",time:0.5,ignoreSlowDown:h},{type:"CLEAR_SLOW_MOTION",name:"levelUp",time:0.1},{type:"SET_ENTITY_STATIC_TIME",entity:a,value:y,global:h}]};return new ig.Ja(c)}})});ig.J=h;
ig.N("game.feature.player.item-consumption").O("game.feature.inventory.inventory").K(function(){sc.Bib=ig.Ca.extend({Na:{USb:new ig.ka("media/sound/move/eat.ogg",1)},f:J(),QJb:function(a,b,c){if(c&&sc.yb.getItem(c).type==sc.kh.CONS){a=this.xs(c);ig.r.cb.Zf(a)}},Htb:function(a,b,c){var d=sc.yb.getItem(c),b=d.time||0;d.effect&&d.effect.va&&d.effect.va(a);if(d.stats){for(var a=d.stats,d=q,f=a.length,i=y;f--;){d=sc.Qe[a[f]];switch(d.change){case sc.ce.HEAL:this.PJb(d);break;case sc.ce.STATS:case sc.ce.MODIFIER:i=
h}}i&&this.SJb(a,b,c)}else e(Error("Use Items must have defined a stats property"))},PJb:function(a){var b=ig.r.cb,a=a.value-1,a=a*(1+b.W.Ag("ITEM_BOOST")),a=new sc.Kja(b.W,{value:a,absolute:y});b.ex(a)},SJb:function(a,b,c){sc.q.T.W.Ztb(a,b,c)},xs:function(a){var b=sc.yb.getItem(a).useSpeed||sc.Q1.NORMAL,c=sc.yb.getItem(a).foodSprite||"SANDWICH",d="itemEatFast",f=1,i=1.2;if(b==sc.Q1.SLOW){d="itemEatSlow";f=0.6}else if(b==sc.Q1.FAST){d="itemEatFastest";i=0.8}return this.owb([{type:"START_ITEM_CONSUME"},
{type:"FOCUS_CAMERA",speed:i,transition:"EASE_IN_OUT",zoom:1.5},{type:"SET_FACE",face:"SOUTH"},{type:"SHOW_FOOD_ICON",icon:c},{type:"SHOW_ANIMATION",anim:"itemFetch",wait:h},{type:"SHOW_ANIMATION",anim:"itemHold"},{type:"WAIT",time:0.2},{type:"PLAY_SOUND",sound:"media/sound/move/eat.ogg",volume:1,speed:f},{type:"CHANGE_FOOD_ICON",state:"BUBBLE"},{type:"SHOW_ANIMATION",anim:d,wait:h},{type:"CHANGE_FOOD_ICON",state:"DONE"},{type:"CONSUME_ITEM",item:a},{type:"SHOW_ANIMATION",anim:"itemEffect"},{type:"WAIT",
time:0.4}])},owb:function(a){sc.q.T.W.Ag("ITEM_GUARD")&&a.unshift({type:"SET_HIT_STABLE",value:"MASSIVE"});a=new ig.Xe("consumeItem",a);a.sq=h;return a}})});ig.J=h;
ig.N("game.feature.player.entities.player-base").O("game.feature.combat.entities.ball","game.feature.combat.entities.combatant","game.feature.player.entities.crosshair","game.feature.player.player-level-notifier","game.feature.player.item-consumption").K(function(){sc.G1=ig.wa.Combatant.extend({sa:sc.pd.PLAYER,c6:sc.pP.ORGANIC,ti:{Jm:q,pv:q},WG:-1,og:{me:0,n:0,GEa:new ig.ud("guard"),Hg:q,nna:q},AXb:y,$D:{ANa:q,G8:0},f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.kj=0;this.b.F(16,
16,24);this.WO("normal",{idle:"idle",hover:"hover",hoverMove:"hover",move:"walk",run:"run",brake:"brake",preIdle:"preIdle",damage:"damage",fall:"fall",jump:"jump"});this.WO("battle",{idle:"idle",hover:"hover",hoverMove:"hover",move:"walk",run:"run",brake:"brake",preIdle:"preIdle",damage:"damage",fall:"fall",jump:"jump"});this.WO("aiming",{idle:"aim",move:"aimMove",moveRev:"aimMoveRev",damage:"damage"});this.JK("normal");this.ti.Jm=new ig.bv({walkAnims:"normal",maxVel:180,relativeVel:1,accelSpeed:0.8,
friction:1.6,airFriction:0.7,hitStable:"LIGHT",jumpingEnabled:h,shadow:16,stepSfxFrames:[2,5],floatHeight:0});this.ti.FF=new ig.bv({walkAnims:"battle",maxVel:180,relativeVel:1,accelSpeed:0.8,friction:1.6,airFriction:0.7,hitStable:"LIGHT",jumpingEnabled:h,shadow:16,stepSfxFrames:[2,5],floatHeight:0});this.ti.pv=new ig.bv({walkAnims:"aiming",maxVel:100,accelSpeed:0.7,friction:1.6,airFriction:0.7,hitStable:"LIGHT",faceDirFixed:h,jumpingEnabled:h,shadow:16,stepSfxFrames:0,floatHeight:0});this.Mq(this.ti.Jm)},
LR:function(a){var b=sc.hl[a];b||e(Error("Unknown Action Type: "+a));b=this.q.xs(b);this.$D.ANa=a;this.$D.G8=0.05;this.Zf(b)},Sbb:function(){var a="neutral";this.og.me>0.75?a=a+"4":this.og.me>0.5?a=a+"3":this.og.me>0.25&&(a=a+"2");var b=this.W.Ag("GUARD_AREA");b>=2?a=a+"_top":b>=1&&(a=a+"_full");if(a!=this.og.nna){this.og.Hg&&this.og.Hg.stop();this.og.nna=a;this.og.Hg=this.og.GEa.va(a,this,{duration:-1})}},Hxb:function(){if(!(this.og.me>=1)){this.og.Hg&&this.og.Hg.stop();this.og.Hg=q;this.og.nna=
q}},Owb:function(a){var b=this.og.me;this.og.me=this.og.me+a/7;if(b<=0.75&&this.og.me>=1)this.og.me=0.99;if(this.og.me>=1){this.og.Hg&&this.og.Hg.stop();this.og.Hg=this.og.GEa.va("guardBroken",this,{duration:-1});this.S7a&&this.S7a();this.og.n=5;this.og.me=1;sc.Ta.yJ(this,this,sc.QE.GUARD_BREAK);return h}this.og.n=1;this.Sbb();return y},o9a:function(a){if(!a)if(this.og.n>0){this.og.n=this.og.n-ig.i.ja;if(this.og.n<0){this.og.n=0;if(this.og.me==1){this.og.Hg&&this.og.Hg.stop();this.og.Hg=q;this.og.me=
0}}}else if(this.og.me>0){this.og.me=this.og.me-ig.i.ja/10;if(this.og.me<0)this.og.me=0}},update:function(){if(this.$D.G8){this.$D.G8=this.$D.G8-ig.i.ja;if(this.$D.G8<=0){this.$D.G8=0;this.$D.ANa=q}}ig.wa.Combatant.prototype.update.call(this)},Wya:function(a){this.parent(a);this.xdb()},kAa:function(a){this.parent(a);this.xdb()},xdb:function(){sc.q.zU(sc.Ta.NDb())}})});ig.J=h;
ig.N("game.feature.player.entities.player").O("game.feature.combat.entities.ball","game.feature.player.entities.player-base","game.feature.combat.entities.combatant","game.feature.player.entities.crosshair","game.feature.player.player-level-notifier","game.feature.player.item-consumption").K(function(){function a(a){for(var b=j.length,c=0;b--;)if(a.time>=j[b]){c=b+1;break}return c=Math.min(a.Jl,c)}function b(a,b){if(a[b]>0){a[b]=a[b]-ig.i.ja;a[b]<=0&&(a[b]=0)}}Vec2.create();var c={hs:"ATTACK_SPECIAL"},
d={hs:"THROW_SPECIAL"},f={hs:"GUARD_SPECIAL"},i={hs:"DASH_SPECIAL"},j=[0.25,0.5,1],k={A8:y,h6:y,VW:y,bma:y,Cn:y,og:y,Ac:y,dca:0,eca:0,FXb:y,jf:0,Nh:Vec2.create()},l={};ig.wa.Player=sc.G1.extend({RB:{QQ:q,aba:q},X4:{d8:new ig.ud("equip.sparkling-boots")},ro:q,q:q,state:0,Jcb:0,$I:0,wA:0,VH:Vec2.create(),Uua:Vec2.create(),i4:y,O5:Vec2.create(),xR:0,ffa:3,F5:0,rfa:0,t5a:Vec2.create(),Cea:Vec2.create(),wN:{n:0,Pg:[]},X:{},vf:q,wM:[],fIa:Vec3.create(),ak:{action:0,charge:0,dash:0,reaim:0,move:0},vCa:{BHa:q},
Uw:Vec2.create(),JX:Vec2.create(),rq:0,wR:0,KR:0,MNa:y,QCa:y,ST:0,Pc:{time:-1,p3:0,s8:y,type:q,Jl:0,fx:q,Cp:0,kK:q,c7:Vec2.create()},oSb:y,Jv:y,AK:y,Sy:q,HJ:0,IHa:q,nHa:q,Ah:h,f:function(a,b,c,d){this.parent(a,b,c,d);this.IHa=new sc.Alb;this.nHa=new sc.Bib;if(sc.q){this.q=sc.q.T;sc.P.Wa(this.q,this);sc.P.Wa(sc.q,this);this.l4a()}sc.P.Wa(sc.UT,this);this.Pc.fx=new sc.hwa(this,h);sc.Ta.RAa(this)},l4a:function(){this.W=this.q.W;this.W.WLa(this);this.mb=this.hBa||this.q.mb;sc.P.Wa(this.W,this);this.Bd();
this.h_a();this.jP(h);this.UCb()},tta:function(a){this.hBa=a;this.Aia()},UCb:function(){this.wN.Pg.length=0;if(this.q.name=="Lea"){var a=new ig.Xe("PLAYER_IDLE",[{type:"CHANGE_STAT_MAP_NUMBER",map:"misc",stat:"yawns",value:1,changeType:"add"},{type:"SET_FACE",face:"SOUTH_EAST",rotate:h},{type:"SHOW_ANIMATION",anim:"idleStretch",wait:h}],y,y);this.wN.Pg.push(a)}},Aia:function(a){var b=q;if(!sc.q.oe()&&!ig.Xw.wc()){var c=sc.UT.J1a("Appearance");c&&c.loaded&&(b=c)}if(b!=this.RB.aba){if(!a){if(this.RB.QQ){this.RB.QQ.F7(q);
this.RB.QQ.stop();this.RB.QQ=q}b?this.RB.QQ=b.fx.va("skinOn",this,{callback:this}):this.RB.aba.fx.va("skinOff",this)}this.RB.aba=b}if(this.hBa)this.mb=this.hBa;else{a=this.q.mb;if(this.RB.aba&&!this.RB.QQ)a=this.RB.aba.mb;this.mb=a}},Aj:function(a){if(a==this.RB.QQ&&a.state>=ig.ev.fka){this.RB.QQ=q;this.Aia()}},Nga:function(a){this.parent(a);this.q.Paa(-1E3)},jP:function(a){this.iU=this.W.Ag("HP_REGEN");this.lg.aia=1.5;this.X.Xh&&this.X.Xh.tKb(1+this.W.Ag("AIM_SPEED"));if(this.W)this.W.ICa=1.5+this.W.Ag("CRITICAL_DMG");
this.NNa=this.W.Ag("STUN_THRESHOLD");this.Aia(a);this.ti.pv.kH("maxVel",100*(1+this.W.Ag("AIMING_MOVEMENT")));this.ffa=Math.round(3+this.W.Ag("DASH_STEP"));this.QK.dJ=this.W.Ag("SPIKE_DMG")},t3a:function(a){return this.wM.indexOf(a)!=-1},SAa:function(a,b){if(this.wM.indexOf(a)==-1){this.wM.push(a);this.DAa(b||"NORMAL")}},rta:function(a,b){this.wM.ye(a);this.DAa(b||"NORMAL")},DAa:function(a){var b=q;if(this.wM.length==0)b=new ig.sf.gq(new ig.sf.xV(this),0,0);else{b=[this];b.push.apply(b,this.wM);b=
new ig.sf.gq(new ig.sf.PV(b,h),0,0)}b.xHa=h;this.vf?ig.le.p7(this.vf,b,a,KEY_SPLINES.EASE_IN_OUT):ig.le.wx(b,a,KEY_SPLINES.EASE_IN_OUT);this.vf=b},R7a:function(){if(ig.le){for(;ig.le.Ts.length>0;)ig.le.vKa();this.DAa()}sc.sa.IGb();Vec3.assign(this.af.g,this.b.g);Vec3.assign(this.fIa,this.b.g)},pK:function(a){a=="step"&&sc.pa.bc("player","steps",1);this.q.PJ(sc.mTa)?a=="step"?this.X4.d8.va("step",this):a=="dash"?this.X4.d8.va("dash",this):a=="jump"&&this.X4.d8.va("jump",this,{angle:Vec2.Wm(this.face)}):
this.q.PJ(sc.rfb)&&(a=="step"?this.X4.d8.va("stepHoliday",this):a=="dash"?this.X4.d8.va("dashHoliday",this):a=="jump"&&this.X4.d8.va("jumpHoliday",this,{angle:Vec2.Wm(this.face)}))},Zf:function(a,b,c){this.b.jf=1;this.parent(a,b,c)},Sna:function(a){this.LR(a);this.q.LCb(sc.hl[a]);this.ak.action=this.ak.charge=this.ak.move=this.ak.reaim=this.ak.dash=100},SLa:function(a){this.ak.action=a.action;this.ak.charge=a.charge||a.action;this.ak.dash=a.dash;this.ak.reaim=a.reaim;this.ak.move=a.move},Ima:function(){this.ak.action=
this.ak.move=this.ak.charge=this.ak.reaim=this.ak.dash=0},Qab:function(a){this.Pc.fx.Ac(this.q.sg,a);this.W.g7a(sc.RP[a-1]);this.vf.iw(1+a*0.5/3,0.5,KEY_SPLINES.JUMPY);if(a>=2){a=new ig.Uya(a==2?"LIGHT":"MEDIUM",0.2,0,0.3);ig.C_.dBa(a)}},Jma:function(){if(this.Pc.time!=-1){this.W.g7a(0);this.Pc.time=-1;ig.Ru.Bba("playerCharge",0);this.X.Xh.zab(y);this.b.time.uA=y;this.Pc.fx.stop();this.vf.iw(1,0.5,KEY_SPLINES.EAST_IN_OUT)}},Ge:function(a){this.Jma();this.parent(a);sc.P.Hc(this.q,this);sc.P.Hc(sc.q,
this);sc.P.Hc(this.W,this);sc.P.Hc(sc.UT,this);sc.Ta.gLa(this);if(!a){a=ig.ma.get("stats.deaths")||0;ig.r.af();ig.ma.set("stats.deaths",a+1)}},show:function(){this.parent();this.X.Xh=ig.r.Pe(ig.wa.Crosshair,0,0,0,{thrower:this,controller:new sc.zlb});this.jP()},rzb:function(a,b){return this.rq>0.33?i:a.st||sc.ba.st()&&Vec2.Ig(b.Nh)?this.q.ki(sc.ng.GUARD)?f:c:sc.ba.Qwb()?i:this.state==1||(this.state==2||this.state==5)&&this.q.ki(sc.ng.THROWING)&&sc.ba.pv()?d:c},Azb:function(){return this.Pc.time<=
0?0:a(this.Pc)},CAb:function(a){for(var b=0,a=a.hs;b<3&&this.q.xs(sc.hl[a+(b+1)]);)b++;return b},Tha:function(a){if(!this.q.ki(sc.ng.SPECIAL))return y;var b=this.CAb(a),f=this.q.W.rpa(),i=0;f>=sc.RP[2]?i=3:f>=sc.RP[1]?i=2:f>=sc.RP[0]&&(i=1);b=Math.min(b,i);if(i==0){if(!this.Pc.kK||this.Pc.kK.On()){i=ig.lang.get("sc.gui.combat.no-sp");this.Pc.kK=new sc.gW(this,i,0.5);ig.X.vd(this.Pc.kK)}}else{this.Pc.kK&&!this.Pc.kK.On()&&this.Pc.kK.remove();this.Pc.kK=q}if(b==0)return y;this.Pc.Jl=b;this.Pc.type=
a;Vec2.Oa(this.Pc.c7,0,0);a==d?this.e9a(1):a==c&&this.e9a(3);return h},pzb:function(a,b){for(var c=a.hs;b&&!this.q.xs(sc.hl[c+b]);)b--;if(!b)return 0;this.q.W.cna(sc.RP[b-1]);return c+b},e9a:function(a){this.state=a;if(a==1){this.X.Xh.setActive(h);this.Mq(this.ti.pv)}else{this.X.Xh.setActive(y);this.Mq(this.ti.Jm)}},uDb:function(){return this.CD()||this.Pc.time!=-1},CD:function(){return this.su()||this.W.Wf()||this.Sy||this.ed&&this.ed.sq},update:function(){this.$D.mEb=q;for(var a=this.wM.length;a--;){var c=
this.wM[a];c.Ve&&this.rta(c)}if(this.wA>0){this.wA=this.wA-ig.i.ja;if(this.wA<=0)this.$I=this.wA=0}if(this.ST>0){this.ST=this.ST-ig.i.ja;if(this.ST<0)this.ST=0}if(!sc.v5.HG()){b(this.ak,"charge");b(this.ak,"action");b(this.ak,"dash");b(this.ak,"reaim");b(this.ak,"move");this.q.zOb(sc.Ta.WGa(this));if(this.HJ){this.HJ=this.HJ-ig.i.Sa;if(this.HJ<=0)this.HJ=0}if(this.su()&&this.Sy){this.Sy.uGb();this.HJ=0.05;this.Sy=q}a=this.azb();if(this.KR>0){this.KR=this.KR-ig.i.ja;if(this.KR<=0||this.W.Wf()){this.KR=
0;Vec2.Oa(this.Uw,0,0);this.Gr=sc.Wb.LIGHT}else if(this.vj>0&&this.vj<=0.2)this.vj=1E-5}if(this.qcb){this.qcb=y;sc.Ta.$ab(this,this.q.sg)}if(this.CD()){this.Jma();this.Ima();this.o9a(y);sc.Ta.KZa(this);this.wR=this.rq=this.xR=0;this.su()&&this.lg.time>=this.lg.aia?this.OFa(l,a,h,h):this.su()&&this.vj<=0.2?this.OFa(l,a,h):this.Uw.x=this.Uw.y=0;this.wA=this.$I=0;a=this.ed&&this.ed.sq?0:4;if(this.state!=a){this.state=a;this.nB=y;if(this.state==0){this.Mq(this.ti.Jm);this.Vw.apply(this)}this.X.Xh.setActive(y);
Vec2.Oa(this.VH,0,0);this.i4=y}this.parent()}else{if(this.q.Nda()&&this.b.g.z==this.b.pc&&sc.q.Y4a()){c=(c=(c=this.b.Nc&&this.b.Nc.Mj)&&c.xi||c)&&c.Q;(!c||!c.Wf||!c.Wf())&&this.IHa.c$a(this,this.q)}this.ed&&(this.ed.name=="PLAYER_IDLE"&&!Vec2.Ig(a.Nh))&&this.Ei();this.ed||this.Ima();if(!this.Jg&&this.b.g.z==this.b.pc)this.WG=-1;this.OFa(l,a);this.RBb(l,a);this.QBb(l,a);this.UBb(l,a);if(this.rq>0){ig.r.mu&&sc.pa.bc("player","dashTime",ig.i.gz);this.rq=this.rq-ig.i.ja;if(this.rq<=0){this.rq=0;this.X.Xh.L_(1);
!l.st&&!l.uea&&this.Vw.apply(this)}}else{this.xR=0;this.DOb(l,a)}if(this.state!=5||l.WB==5)this.X.Xh.Aa&&(this.state!=2||l.st)&&!l.uea?this.X.Xh.hda(this.face):ig.input.qb==ig.Yb.xm&&l.st&&this.X.Xh.hda(this.face);this.VBb(l,a);this.Pc.ZSb=y;!sc.q.oe()&&(this.state!=0||!Vec2.Ig(this.b.wb)||l.st)?sc.Ta.Zab(this,this.q.sg):sc.Ta.KZa(this);this.parent();if(this.wN.n>0&&this.rk=="idle"&&!this.CD()&&!sc.q.oe()){this.wN.n=this.wN.n-ig.i.ja;if(this.wN.n<=0){a=this.wN.Pg[Math.floor(this.wN.Pg.length*Math.random())];
this.Zf(a)}}else this.wN.n=10+Math.random()*5}}},azb:function(){k.A8=y;k.h6=y;k.Wla=y;k.VW=y;k.Cn=y;k.bma=y;k.Ac=y;k.dca=0;k.eca=0;k.og=y;k.jf=this.b.jf;Vec2.assign(k.Nh,0,0);if(ig.r.CD()){this.HJ=0.05;return k}k.Ac=sc.ba.Ac();if(!ig.La.zh()){if(this.q.ki(sc.ng.THROWING)){k.Wla=sc.ba.Wla();k.VW=sc.ba.pv();k.A8=sc.ba.A8();k.bma=sc.ba.Nub()}if(!this.Jv&&this.q.ki(sc.ng.CLOSE_COMBAT)){k.Cn=this.q.ki(sc.ng.THROWING)?sc.ba.Kub():sc.ba.g1a();k.h6=sc.ba.h6()}}if(this.q.ki(sc.ng.GUARD))k.og=sc.ba.st();k.jf=
!this.Jv&&this.q.ki(sc.ng.MOVE)?sc.ba.Nh(k.Nh,this.b.jf):1;if(Vec2.Ig(k.Nh))this.rfa=0;else{var a=Vec2.Qb(k.Nh,this.O5);if(!Vec2.Ig(this.O5)&&Math.abs(a)>Math.PI/3)this.rfa=0;this.rfa=this.rfa+ig.i.Sa}a=y;if(this.Pc.time>=0||sc.v5.kea)a=h;k.VW&&(a=h);ig.input.qb==ig.Yb.xm&&(a=h);if(this.F5<=0&&!Vec2.u4(this.O5,k.Nh))this.F5=2/60;if(this.F5>0){this.F5=this.F5-ig.i.Sa;if(!sc.v5.kea&&this.F5>0&&(k.Nh.x!=0||k.Nh.y!=0)){if(k.Nh.x==0)k.Nh.x=this.O5.x;if(k.Nh.y==0)k.Nh.y=this.O5.y}}Vec2.assign(this.O5,k.Nh);
if(!this.Jg&&sc.ba.RCa()&&this.wR<0.2&&(a||this.rfa>0.05)){k.dca=k.Nh.x;k.eca=k.Nh.y}return k},OFa:function(a,b,c,d){if(this.wR>0)this.wR=this.wR-ig.i.ja;if(!this.ak.dash&&(b.dca||b.eca)&&this.rq<=0.4&&this.wR<=0){if(b.dca)this.Uw.x=b.dca;if(b.eca)this.Uw.y=b.eca;if(d){this.KR=0.3;this.Gr=sc.Wb.MASSIVE}}a.Jga=this.rq<=(this.xR<this.ffa?0.15:0.1);if(c)a.Jga=y;if(!this.Jg&&this.q.ki(sc.ng.DASH)){if((this.Uw.x!=0||this.Uw.y!=0)&&a.Jga){if(this.KR){this.KR=0;this.MNa=h;this.r_();this.Gr=sc.Wb.LIGHT;sc.Ta.LMa(this,
sc.f9.STUN_CANCEL)}else this.MNa=y;this.WMb();a.Jga=y}}else{this.xR=0;this.rq=this.Uw.x=this.Uw.y=0}},RBb:function(a,b){var c=this.og.me<1&&a.Jga&&!this.ak.action&&(this.Pc.time==-1||this.Pc.type==f);a.st=y;var d=this.q.xs(sc.hl.GUARD),i=this.q.xs(sc.hl.PERFECT_GUARD);if(c)if(b.og){if(this.$I&&!this.wA)this.wA=0.1;if(this.ed!=d&&this.ed!=i){this.rq=0;if(this.ST>0)this.Zf(d);else{this.Zf(i);this.ST=0.5}}this.X.Xh.L_(0.25);a.st=h;ig.r.mu&&sc.pa.bc("combat","guardTime",ig.i.gz);this.AK&&ig.ma.add("playerVar.input.guardTime",
ig.i.ja)}else if(this.Pc.time!=-1&&this.Pc.type==f)a.st=h;else if(this.ed==d||this.ed==i){this.Ei();this.X.Xh.L_(1)}this.o9a(a.st)},QBb:function(b,c){if(this.Pc.Cp>0){this.Pc.Cp=this.Pc.Cp-ig.i.Sa;if(this.Pc.Cp<0)this.Pc.Cp=0}else if(c.Ac&&this.Pc.time==-1&&this.ak.charge!=-1&&this.ak.charge<0.2){var d=this.rzb(b,c);if(this.Tha(d)){this.rq=this.wA=this.$I=0;this.Uw.x=this.Uw.y=0;this.Pc.s8=y;this.Pc.time=0;this.Pc.p3=0}}b.Zla=0;b.uea=y;if(this.Pc.time>=0){b.uea=h;if(!this.ak.charge){if(this.Pc.time==
0){ig.Ru.add(0.1,0.2,"playerCharge");this.Qab(1);this.X.Xh.zab(h);if(!b.st){this.ed&&this.Ei();this.LR("CHARGING")}this.b.time.uA=h;this.X.Xh.Aa?this.X.Xh.hda(this.face):Vec2.Ig(c.Nh)||Vec2.assign(this.face,c.Nh)}Vec2.Ig(c.Nh)||Vec2.assign(this.Pc.c7,c.Nh);d=a(this.Pc);ig.r.mu&&sc.pa.bc("combat","charging",ig.i.gz);this.Pc.time=this.Pc.time+ig.i.Sa;if(!sc.jb.wc())this.Pc.p3=this.Pc.p3+ig.i.Sa;if(this.Pc.Jl<3)this.Pc.time=Math.min(this.Pc.time,j[this.Pc.Jl]-0.05);var f=a(this.Pc);if(d>=1&&f!=d){this.Pc.p3=
0;this.Qab(f)}}if((this.Pc.p3>1||!c.Ac)&&this.Pc.time>=j[0]){b.Zla=a(this.Pc);b.uea=y;this.Jma();if(this.Pc.p3>1)this.Pc.Cp=0.5}}},UBb:function(a,b){a.WB=-1;if(a.uea){if(!this.Pc.s8)if(this.Pc.type!=f&&a.st){this.Pc.s8=h;this.Tha(f)}else if(this.Pc.type!=i&&!a.st&&this.Pc.time<0.1&&sc.ba.RCa()&&!Vec2.Ig(b.Nh)){this.Pc.s8=h;this.Tha(i)}else if(this.Pc.type==c&&this.q.ki(sc.ng.THROWING)&&sc.ba.tvb()){this.Pc.s8=h;this.Tha(d)}else if(this.Pc.type==d&&sc.ba.svb()){this.Pc.s8=h;this.Tha(c)}}else{if(this.state==
4){this.state=0;a.WB=this.state}if(a.Zla){this.state=5;if(this.Pc.type==d){this.X.Xh.vpa(this.VH);this.X.Xh.CMa()}a.WB=this.state}else if(this.state==0&&(b.Cn||b.h6)){this.state=3;a.WB=this.state}else if(this.state==0&&(b.Wla||!this.HJ&&!this.rq&&b.VW)){this.state=1;a.WB=this.state}else if(this.state==1)if(b.A8||b.bma&&(!this.rq||a.Jga)){this.X.Xh.vpa(this.VH);this.state=2;a.WB=this.state;this.dOa=this.X.Xh.KG();this.X.Xh.CMa();this.X.Xh.L_(0.25)}else{if(!b.VW){this.state=0;a.WB=this.state}}else if(this.state==
2||this.state==3||this.state==5){var j=b.A8&&this.ak.action>=0&&this.ak.action<0.2||b.bma&&!this.ak.action;if(this.X.Xh.Aa&&!this.i4&&j){this.X.Xh.vpa(this.VH);this.dOa=this.X.Xh.KG();this.X.Xh.CMa()}if((b.Cn||b.h6)&&this.ak.action>=0&&this.ak.action<0.2)this.i4=h;if(!this.ak.action&&!Vec2.Ig(this.VH)){this.state=2;a.WB=this.state}else if(!this.ak.action&&this.i4){this.state=3;a.WB=this.state}else if(!this.ed||a.st||!this.ak.move&&(b.Nh.x!=0||b.Nh.y!=0)||!this.ak.reaim&&b.VW){if(this.$I&&!this.wA)this.wA=
0.1;if(this.rq<=0&&!a.st){this.Ei();this.Ima()}if(b.VW){this.state=1;a.WB=this.state}else{this.state=0;a.WB=this.state;this.Ma("preIdle",h,"idle")}}}}},DOb:function(a,b){if(a.st){this.state==1&&ig.r.mu&&sc.pa.bc("combat","aiming",ig.i.gz);Vec2.Oa(this.b.wb,0,0);(b.Nh.x||b.Nh.y)&&Vec2.assign(this.face,b.Nh)}else if(this.state==0||this.state==1){this.state==1&&ig.r.mu&&sc.pa.bc("combat","aiming",ig.i.gz);if(!this.ed||this.ed.nsa){Vec2.assign(this.b.wb,b.Nh);this.b.jf=b.jf}this.Jg&&(Vec2.ug(this.b.wb,
this.Cea)>=0&&Vec2.eb(this.b.g,this.t5a)<8?Vec2.add(this.b.wb,this.Cea):Vec2.Oa(this.Cea,0,0))}else this.Jg||Vec2.Oa(this.b.wb,0,0)},VBb:function(a,b){a.WB!=-1&&this.zM();switch(a.WB){case 0:this.AK&&ig.ma.set("playerVar.input.aiming",y);this.JK("normal");this.Mq(this.ti.Jm);this.X.Xh.setActive(y);break;case 1:this.AK&&ig.ma.set("playerVar.input.aiming",h);this.HJ=0;this.Mq(this.ti.pv);this.rq<=0&&(!this.Jg&&!a.st)&&this.Zf(this.q.xs(sc.hl.AIM_START));this.JK("aiming");this.X.Xh.Ema=this.q.ki(sc.ng.CHARGE);
this.X.Xh.Aa||this.X.Xh.setActive(h);this.X.Xh.L_(1);break;case 3:this.AK&&ig.ma.set("playerVar.input.aiming",y);ig.input.qb==ig.Yb.xm&&(this.q.ki(sc.ng.THROWING)&&sc.options.get("close-circle"))&&this.X.Xh.yKb();this.$I++;this.wA=0;var j;if(this.$I<=3)j=this.$I%2==1?"ATTACK_REV":"ATTACK";else{j="ATTACK_FINISHER";this.wA=this.$I=0}ig.ma.add("playerVar.input.melee",1);sc.pa.bc("player","close",1);this.Mbb(j,b);break;case 2:if(this.AK){ig.ma.set("playerVar.input.aiming",y);ig.ma.add("playerVar.input.thrown",
1)}this.Jcb++;j=this.Jcb%2==0?this.dOa?"THROW_CHARGED_REV":"THROW_NORMAL_REV":this.dOa?"THROW_CHARGED":"THROW_NORMAL";this.Xbb(j,b);break;case 5:j=this.pzb(this.Pc.type,a.Zla);if(sc.options.get("combat-art-name")){var k=this.q.TEa(sc.hl[j]);if(k){k=new sc.gW(this,k.toString(),1);k.gcb();ig.X.vd(k)}}sc.pa.bc("combat","specials",1);sc.pa.bc("combat","specials-"+this.q.sg+"-level-"+a.Zla,1);if(this.Pc.type==c){sc.pa.bc("combat","specialsClose",1);Vec2.Ig(this.Pc.c7)||Vec2.assign(this.face,this.Pc.c7);
this.Mbb(j,b)}else if(this.Pc.type==d){sc.pa.bc("combat","specialsThrow",1);this.Xbb(j,b)}else if(this.Pc.type==f){sc.pa.bc("combat","specialsGuard",1);this.Sna(j)}else if(this.Pc.type==i){sc.pa.bc("combat","specialsDash",1);Vec2.Ig(this.Pc.c7)||Vec2.assign(this.JX,this.Pc.c7);this.X.Xh.setActive(y);this.setAttribute("dashDir",this.JX);this.Sna(j)}}},Xbb:function(a,b){if(this.rq>0)this.wR=0.3;this.rq=0;Vec2.assign(this.face,this.VH);this.b.g.z==this.b.pc?this.setAttribute("dashDir",Vec2.assign(this.JX,
b.Nh)):this.setAttribute("dashDir",Vec2.Oa(this.JX,0,0));Vec2.assign(this.Uua,this.VH);Vec2.Oa(this.VH,0,0);this.Sna(a)},Mbb:function(a,b){if(this.rq>0)this.wR=0.3;this.rq=0;this.i4=y;this.X.Xh.setActive(y);this.b.g.z==this.b.pc?this.setAttribute("dashDir",Vec2.assign(this.JX,b.Nh)):this.setAttribute("dashDir",Vec2.Oa(this.JX,0,0));Vec2.Ig(b.Nh)||Vec2.assign(this.face,b.Nh);this.Sna(a)},WMb:function(){if(this.state==3){this.AK&&ig.ma.add("playerVar.input.attackDashCancel",1);sc.pa.bc("player","atkDashCancel",
1)}this.$I=0;this.xR++;this.i4=this.QCa=y;Vec2.Oa(this.VH,0,0);this.X.Xh.Aa||Vec2.assign(this.face,this.Uw);this.setAttribute("dashDir",Vec2.assign(this.JX,this.Uw));this.Uw.x=this.Uw.y=0;if(this.Pc.time>=0){if(this.Pc.time<=0.2)return;this.Jma();this.Pc.Cp=0.5}if(this.state==2)this.state=1;else if(this.state==3){this.JK("normal");this.Mq(this.ti.Jm);this.state=0}if(this.xR<=this.ffa){sc.pa.bc("player","dash",1);sc.pa.bc("player","steps",3)}this.Ima();this.X.Xh.l9a(0.2);this.X.Xh.L_(0.5);this.nB=
y;this.rq=0.36;this.pK("dash");var a=this.xR<=this.ffa?"DASH":"DASH_SLOW";this.$D.mEb=a;this.LR(a);this.xR<=this.ffa&&sc.Ta.nMb(this,this.q.sg)},sr:function(){this.Sy&&this.Sy.tGb&&this.Sy.tGb(this)},XT:function(){this.Sy&&this.Sy.vGb&&this.Sy.vGb()},dvb:function(){if(this.Sy){this.Sy=q;if(sc.ba.pv())this.HJ=0.05}},HJa:function(a,b,c,d,f,i){this.AK&&(i?ig.ma.add("playerVar.input.shieldedHits",1):ig.ma.add("playerVar.input.hits",1));if(i){sc.pa.bc("combat","shieldedHits",1);if(i==sc.cA.DI){ig.ma.add("playerVar.input.perfectShield",
1);sc.pa.bc("combat","perfectShield",1);if(this.W.Ag("PERFECT_GUARD_RESET")>=1)this.ST=0}if(this.W.Ag("GUARD_SP")){a=this.W.Ag("GUARD_SP");this.W.Ula(a*c.Yi*(i==sc.cA.DI?2:1))}}else sc.pa.bc("combat","damageHits",1);return y},S7a:function(){sc.pa.bc("combat","shieldBreaks",1);this.state=4;this.Ei()},P7a:function(){if(!this.QCa){sc.pa.bc("player","perfectDash",1);this.QCa=h}},Sra:function(a){sc.pa.bc("combat","damageTaken",a)},B7a:function(a,b){sc.pa.bc("combat","healed",b)},Sfa:function(a,b,c,d){if(!ig.ma.get("playerVar.damageStatsIgnore")){sc.pa.bc("combat",
"damageGiven",c.me);sc.pa.Uta("combat","maxDamage",c.me)}this.vCa.BHa=a;if(c.uJ){sc.pa.bc("combat","critHits",1);b.a3?sc.pa.bc("combat","critHitsThrow",1):sc.pa.bc("combat","critHitsClose",1)}if(b.b8){b.a3||sc.pa.bc("player","closeHits",1);this.q.Sfa(a,b,c)}this.parent(a,b,c,d)},EJa:function(a,b){sc.pa.bc("player","jumps",1);this.WG=this.b.g.z+a;Vec2.assign(this.t5a,this.b.g);a>=16?Vec2.assign(this.Cea,this.b.wb):Vec2.Oa(this.Cea,0,0);this.parent(a,b)},Q7a:function(a){if(a.xua){Vec3.assign(this.af.g,
this.fIa);this.Hga(ig.hd.HOLE)}},ag:function(){this.fb&&this.fb.evaluate();if(!this.Jv&&ig.ma.get("playerVar.staticFloat")){this.Jv=h;this.ti.Jm.kH("floatHeight",6);this.ti.pv.kH("floatHeight",6);this.Mq(this.ti.Jm)}else if(this.Jv&&!ig.ma.get("playerVar.staticFloat")){this.Jv=y;this.ti.Jm.lCa();this.ti.pv.lCa();this.Mq(this.ti.Jm)}if(this.AK!=ig.ma.get("playerVar.recordInput"))if(this.AK=ig.ma.get("playerVar.recordInput")){ig.ma.set("playerVar.input.thrown",0);ig.ma.set("playerVar.input.aiming",
y);ig.ma.set("playerVar.input.guardTime",0);ig.ma.set("playerVar.input.shieldedHits",0);ig.ma.set("playerVar.input.hits",0);ig.ma.set("playerVar.input.perfectShield",0);ig.ma.set("playerVar.input.attackDashCancel",0);ig.ma.set("playerVar.input.melee",0)}},Ab:function(a,b,c){if(a==this.W)b==sc.ei.bs&&this.jP();else if(a==this.q)if(b==sc.dd.wP){this.h_a();this.jP()}else b==sc.dd.hja?this.l4a():b==sc.dd.bs?this.jP():b==sc.dd.A9?this.nHa.Htb(this,this.q,c):b==sc.dd.u1&&this.jP();else a==sc.UT?c=="Appearance"&&
this.Aia():a==sc.q&&b==sc.zf.Ew&&this.Aia()},h_a:function(){this.ro=this.q.Soa()},XM:function(a,b,c){(a==ig.hd.WATER||a==ig.hd.HOLE||a==ig.hd.COAL||a==ig.hd.QUICKSAND||a==ig.hd.HIGHWAY)&&sc.pa.bc("player","respawns",1);a==ig.hd.WATER?sc.pa.bc("player","waterDeath",1):a==ig.hd.COAL?sc.pa.bc("player","coalDeath",1):a==ig.hd.QUICKSAND?sc.pa.bc("player","sandDeath",1):a==ig.hd.HOLE?sc.pa.bc("player","holeDeath",1):a==ig.hd.HIGHWAY&&sc.pa.bc("player","highwayDeath",1);this.parent(a,b,c)},bsa:function(){for(var a=
ig.r.QAb(this),b=a.length;b--;){var c=a[b];(c instanceof ig.wa.WavePushPullBlock||c instanceof ig.wa.PushPullBlock)&&c.gw()}},KG:function(){return this.X.Xh.KG()},uMa:L("q8a"),UOa:function(a){this.nHa.QJb(this,this.q,a)},bm:function(a,b){return b[1]=="hasElementShield"?this.C3a("elementOrbShield"):this.parent(a,b)}});window.Ivb=function(){var a=ig.r.cb;if(a&&!a.Swb&&a.b.g.x==1)a.Swb=h}});ig.J=h;
ig.N("game.feature.party.party").O("impact.feature.storage.storage","impact.base.event","game.feature.menu.map-model","game.feature.model.game-model").K(function(){var a=Vec3.create();Vec2.create();sc.LL={W9:1,tja:2};sc.mSa=2;var b=[1,0.9,0.75],c=[1,0.8,0.6];sc.Tt=["Lea","Shizuka","Shizuka0","Emilie","Sergey","Schneider","Schneider2","Hlin","Grumpy","Buggy","Glasses","Apollo","Joern"];sc.cF={STATUS:0,NAME:1,LEVEL:2};sc.KL={UNKNOWN:0,CONTACT:1,FRIEND:2};sc.eka={};sc.eka.TARGET={WHATEVER:{ZJa:y,Fta:y},
MY_ENEMY:{ZJa:y,Fta:h},OTHERS:{ZJa:h,Fta:y}};sc.eka.BEHAVIOUR={OFFENSIVE:{kDa:0.2,jDa:0.75},DEFENSIVE:{kDa:0.4,jDa:1,mFb:h},DO_NOTHING:{kDa:0.4,jDa:1,Una:h,g8a:h}};sc.eka.ARTS={NORMAL:{yh:1},OFTEN:{yh:4},NEVER:{yh:0}};sc.o$={PARTY_JOIN:1,PARTY_LEAVE:2,CONTACT:3};sc.ulb=ig.Uf.extend({Uo:[],$k:{},He:[],ZD:{},Gn:{},sy:y,oZ:y,cla:y,PS:y,k0:{TARGET:"WHATEVER",BEHAVIOUR:"OFFENSIVE",ARTS:"NORMAL"},yF:{FF:0,aP:0,N2:0},f:function(){for(var a=0;a<sc.Tt.length;++a)this.eub(sc.Tt[a]);this.fj();ig.zd.Lg(this);
ig.ma.Up("party",this,"VarPartyEditor");sc.P.Wa(sc.q,this)},tG:function(a){return sc.eka[a][this.k0[a]]||{}},wva:function(a,b){this.k0[a]=b},qBb:function(a,b){if(a=="TARGET"){if(b==0)return"WHATEVER";if(b==1)return"MY_ENEMY";if(b==2)return"OTHERS"}else if(a=="BEHAVIOUR"){if(b==0)return"OFFENSIVE";if(b==1)return"DEFENSIVE";if(b==2)return"DO_NOTHING"}else if(a=="ARTS"){if(b==0)return"NORMAL";if(b==1)return"OFTEN";if(b==2)return"NEVER"}},XLa:function(a,b){if(this.Gn[a])this.Gn[a].status=b},dab:function(a,
b){if(this.Gn[a])this.Gn[a].bz=b||y},cLb:function(a,b){if(this.Gn[a])this.Gn[a].NN=b||y},eub:function(a){var b=new sc.tlb(a);this.$k[a]=b},SUb:function(a){for(var a=a.split(","),b=0;b<a.length;++b)this.jYa(a[b],q,h)},jYa:function(a,b,c,d){if(this.He.indexOf(a)==-1){this.XLa(a,sc.KL.FRIEND);this.dab(a,h);this.He.push(a);this.$k[a].tO();if(!b&&d){this.Baa(a,y,y);this.FW()}else if(!c)if(b){this.Baa(a,h,y,b);this.FW()}else this.cla=h;sc.P.Ga(this,sc.LL.W9);ig.r.Yj()}},eJb:function(a,b,c){if(this.DN(a)){this.He.splice(this.He.indexOf(a),
1);this.Gn[a].NN=y;if(!b&&c){this.jAa(a,q,h);this.FW()}else if(b){this.jAa(a,b);this.FW()}else this.cla=h;this.$k[a].tO();sc.P.Ga(this,sc.LL.W9);ig.r.Yj()}},Y9a:function(){for(var a=this.He.length;a--;){var b=this.He[a];this.$k[b].cZ()||this.yLa(b)}},yLa:function(a){var b=this.He.indexOf(a);this.$k[a].tO();if(b!=-1){this.Baa(a,h,y,q);this.FW()}},Ab:function(a,b){b==sc.zf.Ew&&a.oe()&&this.Y9a()},JGb:function(a){this.$k[a].Tra();sc.Ep.Ws("PARTY_MEMBER_EVENT",{member:[a],eventType:"DIES"});sc.q.Es()||
this.Y9a()},fEb:function(){this.oZ=this.sy=h;sc.P.Ga(this,sc.LL.tja);for(var a=this.He.length;a--;){var b=this.ZD[this.He[a]];b&&b.hide()}sc.Ep.fZa("DUNGEON_TRANSITION")||sc.Ep.Ws("DUNGEON_TRANSITION",{mapTransition:q,areaTransition:"ENTER"})},IGb:function(){this.ZD={};this.H9a();var a=sc.map.z5(h),b=q,c=q;if(sc.map.z5()){if(!this.sy){this.sy=h;sc.P.Ga(this,sc.LL.tja);b="ENTER"}}else{if(this.sy){this.sy=y;sc.P.Ga(this,sc.LL.tja);b="LEAVE"}this.GJb()}if(a!=this.oZ)c=(this.oZ=a)?"ENTER":"LEAVE";(b||
c)&&sc.Ep.Ws("DUNGEON_TRANSITION",{mapTransition:b,areaTransition:c})},GJb:function(){for(var a=0;a<this.He.length;++a)this.$k[this.He[a]].cZ()&&this.Baa(this.He[a],y,h);this.FW()},ZUb:M("sy"),DN:function(a){return this.WEa(a)!=-1},sqa:function(a){return this.Gn[a].status==sc.KL.FRIEND},KDb:function(a){return(a=this.Gn[a])&&a.NN},LDb:function(a){return(a=this.Gn[a])&&a.bz},Wf:function(){for(var a=this.He.length;a--;)if(!this.ZD[this.He[a]].Wf())return y;return ig.r.cb.Wf()},WEa:function(a){return this.He.indexOf(a)},
bUb:function(){return this.He.length},x2a:function(){if(this.sy)return 0;for(var a=this.He.length,b=0;a--;)this.gS(this.He[a]).cZ()&&(b=b+1);return b},aFa:function(){return c[this.x2a()]},gS:function(a){return this.$k[a]},VAb:function(a){return this.ZD[a]||q},Xk:function(a){return this.ZD[this.He[a]]||q},w2a:function(a){return(a=this.He[a])&&this.$k[a]},MW:function(a,c,d,k,l){var m=this.He.length;if(l&&l.Z3a||this.sy)m=0;for(var m=b[m]||1,n=this.He.length;n--;)this.$k[this.He[n]].MW(a*m,c,d,k,l);
return m},Dia:function(){for(var a=this.He.length,b=[];a--;){var c=this.He[a];this.$k[c].rdb()&&b.push(c)}b.length>0&&sc.Ep.Ws("PARTY_MEMBER_EVENT",{member:b,eventType:"EQUIP_UPDATE"})},tJb:function(b){var c=this.ZD[b];if(c){b=this.PVa(a,b,y);c.l(b.x,b.y,b.z)}},H9a:function(){this.yF.N2=0;this.yF.FF=0;this.yF.aP=0},PVa:function(b,c,d){var k=ig.r.cb,c=this.He.indexOf(c);if(d){b=k.lc(ig.Pa.BOTTOM,b);d=c==1?-16:16;if(Math.abs(k.face.x)>Math.abs(k.face.y)){b.y=b.y+d;b.x=b.x+(k.face.x>0?-8:8)}else{b.x=
b.x+d;b.y=b.y+(k.face.y>0?-8:8)}b.x=b.x-k.b.size.x/2;b.y=b.y-k.b.size.y/2}else if(k.b.g.z!=k.b.pc)b=Vec3.assign(b,k.af.g);else{ig.navigation.Uoa(b,k.lc(ig.Pa.BOTTOM,a),k.b.size,k,q,48,1,0,ig.y1.BEHIND_FACE,y);b.x=b.x-k.b.size.x/2;b.y=b.y-k.b.size.y/2}return b},jxb:function(){if(!this.sy){for(var a in this.ZD)this.DN(a)||this.jAa(a);for(var b=this.He.length;b--;){a=this.He[b];this.ZD[a]||this.Baa(a,h,y)}this.FW()}},Baa:function(b,c,d,k){var l=ig.r.cb;if(k){d=k.lc(ig.Pa.BOTTOM,a);d.x=d.x-l.b.size.x/
2;d.y=d.y+(k.b.size.y/2-l.b.size.y)}else d=this.PVa(a,b,d);c=ig.r.Pe(sc.F1,d.x,d.y,d.z,{partyMemberName:b},!k&&c);this.ZD[b]=c;if(k){Vec2.assign(c.face,k.face);k.N7a?k.N7a():k.hide()}else Vec2.assign(c.face,l.face);c.Bd(h);if(k)c.yfa=h},FW:function(){for(var a=0;a<this.He.length;++a){var b=this.ZD[this.He[a]];if(b)if(this.He.length==1){b.sH.x=0;b.sH.y=-16}else{b.sH.x=a==1?-16:16;b.sH.y=-8}}},jAa:function(b,c,d){var k=this.ZD[b];if(k){if(c){c.xta(h);var l=k.lc(ig.Pa.BOTTOM,a);l.x=l.x-c.b.size.x/2;
l.y=l.y+(k.b.size.y/2-c.b.size.y);c.l(l.x,l.y,l.z);ig.gl.Lma(c);c.show();c.xta()}k.oEb(d||!!c);delete this.ZD[b]}},bm:function(a,b){if(b[0]=="party"){var c=b[1];return c=="has"?this.He.indexOf(b[2])!=-1:c=="alive"?!this.sy&&this.He.indexOf(b[2])!=-1&&this.gS(b[2]).cZ():c=="size"?this.He.length+1:q}},xK:600,az:function(){if(!ig.Wv&&!ig.r.paused){if(this.cla){this.jxb();this.cla=y}for(var a=this.He.length;a--;)this.$k[this.He[a]].update()}},fj:function(){for(var a in this.$k)this.$k[a].reset();this.He.length=
0;this.H9a();this.wva("TARGET","WHATEVER");this.wva("BEHAVIOUR","OFFENSIVE");this.wva("ARTS","NORMAL");this.oZ=this.sy=y;for(a=0;a<sc.Tt.length;++a)this.Gn[sc.Tt[a]]={status:sc.KL.UNKNOWN,bz:h,NN:y};sc.P.Ga(this,sc.LL.W9)},Fu:function(a){var b={},c;for(c in this.$k)b[c]=this.$k[c].oD();c={};for(var d in this.Gn)c[d]={status:this.Gn[d].status,online:this.Gn[d].bz,locked:this.Gn[d].NN};a.party={models:b,currentParty:ig.copy(this.He),contacts:c,strategies:ig.copy(this.k0),dungeonBlocked:this.sy,lastAreaDungeon:this.oZ}},
Bt:function(a){if(a=a.party){for(var b in this.$k)this.$k[b].kMa(a.models[b]);this.He=ig.copy(a.currentParty);for(var c in this.Gn)if(a.contacts[c]){this.Gn[c].status=a.contacts[c].status||0;this.Gn[c].bz=a.contacts[c].online||y;this.Gn[c].NN=a.contacts[c].locked||y}if(a.strategies)for(c in this.k0)this.k0[c]=a.strategies[c]||this.k0[c];this.sy=a.dungeonBlocked;this.oZ=a.lastAreaDungeon||y}else this.fj();sc.P.Ga(this,sc.LL.W9)}});ig.Vf(function(){return sc.sa=new sc.ulb});var d=ig.copy(sc.Tt);d.unshift("Member3");
d.unshift("Member2");ig.Ja.p9a("party",function(a){return a.indexOf("Member")==0?sc.sa.Xk(a.substr(6,1)*1-2):sc.sa.VAb(a)},{c:"String",U:d})});ig.J=h;
ig.N("game.feature.player.player-steps").O("impact.base.animation","impact.base.action","impact.base.entity","game.feature.player.player-config","game.feature.combat.model.combat-params","impact.feature.camera.camera","game.feature.combat.entities.food-icon","game.feature.party.party").K(function(){function a(a,b){for(var c=a.kl,d=c.length;d--;){var f=c[d];if(f instanceof sc.Cxa){f.add!=b&&c.splice(d,1);return h}}return y}var b={NONE:0,MONEY:1};ig.oa.SAVE_PLAYER_MODEL_VALUE=ig.qa.extend({pra:q,t:new ig.u({attributes:{pra:{c:"String",
d:"Mode value to set",U:b}},label:function(){return"<i>SET</i> "+this.pra+" TO <b>player.model.value</b>"}}),f:function(a){this.pra=b[a.modelType]||b.NONE},start:function(){var a=g;switch(this.pra){case b.MONEY:a=sc.q.T.df>=1E3}a!=g&&ig.ma.set("player.model.value",a)}});ig.oa.ADD_PLAYER_CAMERA_TARGET=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to target"},speed:{c:"String",d:"Speed of camera transition",U:ig.sf.fA,I:h}}}),f:function(a){this.Q=a.entity;this.speed=a.speed},start:function(a,
b){var c=ig.Ja.rd(this.Q,b);c&&ig.r.cb.SAa(c,this.speed)}});ig.oa.REMOVE_PLAYER_CAMERA_TARGET=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to target"},speed:{c:"String",d:"Speed of camera transition",U:ig.sf.fA,I:h}}}),f:function(a){this.Q=a.entity;this.speed=a.speed},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&ig.r.cb.rta(c,this.speed)}});ig.oa.LEARN_SKILL=ig.qa.extend({td:q,t:new ig.u({attributes:{td:{c:"Integer",d:"Skill ID"}}}),f:function(a){this.td=a.skill},start:function(){sc.q.T.P5(this.td)}});
ig.oa.DO_INLINE_LEVELUP=ig.qa.extend({td:q,t:new ig.u({attributes:{}}),f:J(),start:function(){if(sc.q.T.Nda()){sc.q.dY();ig.r.cb.IHa.c$a(ig.r.cb,sc.q.T,h)}},ya:function(){if(sc.q.ko()){sc.q.Cca();return h}return y}});var c={NEUTRAL:0,HEAT:1,COLD:2,SHOCK:3,WAVE:4,ALL_AVAILABLE:5};ig.oa.RESET_SKILL_TREE=ig.qa.extend({element:q,t:new ig.u({attributes:{element:{c:"String",d:"element to reset",U:c,ab:c.mPb}},label:function(){return"RESET <b>"+this.element+"</b> SKILLTREE"}}),f:function(a){this.element=
c[a.element||"NEUTRAL"]},start:function(){if(this.element>=5)for(var a=0;a<5;a++)sc.q.T.xG(a)&&sc.q.T.fE(a);else sc.q.T.fE(this.element)}});ig.oa.SET_ELEMENT_LOAD=ig.qa.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"Value of load. 0=empty, 1=full (instant elemental overload)"}}}),f:function(a){this.value=a.value||0},start:function(){sc.q.T.OKb(this.value)}});ig.oa.SWITCH_PLAYER_CONFIG=ig.qa.extend({name:q,fd:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of player config",U:sc.Tt}}}),
f:function(a){this.name=a.name;this.fd=new sc.VV(this.name)},Ka:function(){this.fd.Tc()},start:function(){sc.q.T.G7(this.fd)}});ig.oa.WAIT_UNTIL_PLAYER_CHARGED=ig.qa.extend({aa:q,t:new ig.u({attributes:{aa:{c:"Number",d:"Wait until this level of charge has been reached"}}}),f:function(a){this.aa=a.level},ya:function(){return this.aa<=ig.r.cb.Azb()}});ig.oa.SWITCH_ELEMENT_MODE=ig.qa.extend({element:q,t:new ig.u({attributes:{element:{c:"String",d:"Element to switch to",U:sc.ha},sz:{c:"Boolean",d:"If true: do no show effects of changing elements"}}}),
f:function(a){this.element=sc.ha[a.element]||sc.ha.NEUTRAL;this.sz=a.skipEffect},start:function(){sc.q.T.GK(this.element,h,this.sz)}});ig.oa.SWITCH_TO_ELEMENT_WITH_COMBAT_ART=ig.qa.extend({t:new ig.u({attributes:{EYa:{c:"String",d:"Type of combat art",U:["THROW","ATTACK","DASH","GUARD"]},aa:{c:"Integer",d:"Minimum Level"},sz:{c:"Boolean",d:"If true: do no show effects of changing elements"}}}),f:function(a){this.EYa=a.artType;this.aa=a.level;this.sz=a.skipEffect},start:function(){for(var a in sc.ha)if(sc.q.T.O4(this.EYa,
sc.ha[a])>=this.aa){sc.q.T.GK(sc.ha[a],h,this.sz);break}}});var d=Vec3.create(),f=Vec2.create();ig.la.SHOOT_PROXY_PLAYER=ig.ta.extend({BB:q,Aca:q,align:0,Qq:0,t:new ig.u({attributes:{proxy:{c:"ProxyRef",d:"Ball the entity will shoot",I:h},Aca:{c:"String",d:"Ball the entity will shoot",I:h,U:["QUICK","CHARGED"]},align:{c:"String",d:"If defined: use specified alignment to shoot ball",I:h,U:ig.Pa},Qq:{c:"Number",d:"If defined: start projectile with given distance from center",I:h}}}),f:function(a){a.elementProxy?
this.Aca=a.elementProxy:this.BB=sc.dq.bU(a.proxy);if(a.align)this.align=ig.Pa[a.align];this.Qq=a.startDist||0},ya:function(a){var b;if(b=this.Aca?this.Aca=="CHARGED"&&a.q8a?a.q8a:sc.VV.U1a(a,sc.Ta.bpa(a),this.Aca=="CHARGED"):sc.dq.hS(this.BB,a)){if(this.align)a.lc(this.align,d);else{var c=a.WG===g?-1:a.WG;d.x=a.b.g.x+a.b.size.x/2;d.y=a.b.g.y+a.b.size.y/2;d.z=c<0?a.b.g.z:Math.min(a.b.g.z,c);d.z=d.z+Constants.gI}c=a.Uua||a.face;if(this.Qq){Vec2.assign(f,c);Vec2.length(f,this.Qq);Vec2.add(d,f)}b.Vn(d.x,
d.y,d.z,a,c)}return h}});ig.la.SET_PLAYER_ACTION_BLOCK=ig.ta.extend({dSb:q,t:new ig.u({attributes:{SYa:{c:"Object",d:"Block Time Data"}}}),f:function(a){assertContent(a,"blockData");this.SYa=a.blockData},ya:function(a){a.SLa&&a.SLa(this.SYa);return h}});ig.la.SET_PLAYER_ANIM_SHEET=ig.ta.extend({mb:q,t:new ig.u({attributes:{mb:{c:"AnimSheetRef",d:"Animations of enemy"}}}),f:function(a){this.mb=new ig.Al(a.animSheet)},Ka:function(){this.mb.Tc()},ya:function(a){a.tta&&a.tta(this.mb);return h}});ig.la.CLEAR_PLAYER_ANIM_SHEET=
ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),ya:function(a){a.tta&&a.tta(q);return h}});ig.la.SET_PLAYER_INVINCIBLE=ig.ta.extend({yh:y,t:new ig.u({attributes:{yh:{c:"Number",d:"Factor multiplied with base invincibility",ab:1}}}),f:function(a){this.yh=a.factor||1},ya:function(a){var b=3+a.W.Td("focus")/250+1*a.W.Ag("DASH_INVINC");a.MNa&&(b=b+12);b=b/60*this.yh;a.Ah||(b=b+0.2);a.Ds=b;return h}});ig.la.PLAYER_ADJUST_FACE=ig.ta.extend({time:0,t:new ig.u({attributes:{time:{c:"Number",d:"Duration over which to adjust face"}}}),
f:function(a){this.time=a.time||0},start:function(a){a.ib=a.ib+this.time},ya:function(a){var b=a.te();b.Ah&&b.X.Xh.Aa&&b.X.Xh.hda(a.face);return a.ib<=0}});ig.la.PLAYER_ADJUST_MOVE_DIR=ig.ta.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){if(a.Ah){sc.ba.Nh(f,1);Vec2.Ig(f)||Vec2.assign(a.face,f)}}});ig.la.PLAYER_MOVE_TO_DIR=ig.ta.extend({t:new ig.u({attributes:{time:{c:"Number",d:"Duration for which player will move along pressed direction"},gj:{c:"Number",d:"Speed in which player will rotate to pressed direction. In rotations per seconds.",
ab:0.2,I:h},lp:{c:"Boolean",d:"If true: Stop before falling down from edge when further moving forward"},tYa:{c:"Boolean",d:"If true: allow player to stop if no direction is pressed"}}}),f:function(a){this.time=a.time||0;this.gj=a.rotateSpeed||0;this.lp=a.stopBeforeEdge;this.tYa=a.allowStop},start:function(a){a.ib=a.ib+this.time},ya:function(a){var b=y;if(a.Ah){sc.ba.Nh(f,1);Vec2.Ig(f)?this.tYa&&(b=h):this.gj?Vec2.GB(a.face,f,this.gj*Math.PI*2*ig.i.ja):Vec2.assign(a.face,f)}b?Vec2.Oa(a.b.wb,0,0):
Vec2.assign(a.b.wb,a.face);if(this.lp&&ig.qd.EN(a.b,h)){Vec2.Oa(a.b.wb,0,0);Vec2.Oa(a.b.V,0,0)}return a.ib<=0}});sc.Cxa=ig.Ca.extend({add:y,speed:q,f:function(a,b){this.add=a;this.speed=b},Zl:function(a){this.add?ig.r.cb.rta(a,this.speed):ig.r.cb.SAa(a,this.speed)}});ig.la.ADD_PLAYER_CAMERA_TARGET=ig.ta.extend({t:new ig.u({attributes:{speed:{c:"String",d:"Speed of camera transition",U:ig.sf.fA,I:h},mv:{c:"Boolean",d:"If true: Do NOT undo change when action is cancelled"},WJa:{c:"Boolean",d:"If true: Only add target if it was previously removed within the action. Use this if the goal is to temporary remove a camera target."}}}),
f:function(a){this.speed=a.speed;this.mv=a.actionDetached;this.WJa=a.onlyAfterRemove||y},start:function(b){if(!ig.r.cb.t3a(b)){var c=!this.WJa&&!this.kl;if(!this.mv)if(a(b,h))c=h;else if(!this.WJa){var d=new sc.Cxa(h,this.speed);b.Hj(d)}c&&ig.r.cb.SAa(b,this.speed)}}});ig.la.REMOVE_PLAYER_CAMERA_TARGET=ig.ta.extend({t:new ig.u({attributes:{speed:{c:"String",d:"Speed of camera transition",U:ig.sf.fA,I:h},mv:{c:"Boolean",d:"If true: Do NOT undo change when action is cancelled"}}}),f:function(a){this.speed=
a.speed;this.mv=a.actionDetached},start:function(b){if(ig.r.cb.t3a(b)){ig.r.cb.rta(b,this.speed);if(!this.mv&&!a(b,y)){var c=new sc.Cxa(y,this.speed);b.Hj(c)}}}});ig.la.ADD_PLAYER_SHIELD=ig.ta.extend({t:new ig.u({attributes:{w8a:{c:"Boolean",d:"If true: add perfect guard"}}}),f:function(a){var b={type:"PLAYER",settings:{baseFactor:1,strength:"REGULAR",hitResist:"HEAVY",stableOverride:"MASSIVE",range:0.5}};this.Tn=new sc.mV[b.type](b.settings);this.w8a=a.perfectGuard||q},Ka:function(){this.Tn&&this.Tn.Ka()},
ya:function(a){var b=a.te(),c=0;this.w8a&&(c=0.1*(1+b.W.Ag("PERFECT_GUARD_WINDOW")));var d=b.W.Ag("GUARD_AREA");this.Tn.ri=d>=1?1:0.5;this.Tn.pn=d>=2?sc.dA.BLOCK_ABOVE:sc.dA.REGULAR;b=b.aBa(this.Tn,c);a.Hj(b);return h}});var i={Zl:function(){sc.q.T.j0a(y)}};ig.la.START_ITEM_CONSUME=ig.ta.extend({item:q,t:new ig.u({attributes:{}}),f:J(),start:function(a){sc.q.T.eNb();a.Hj(i)}});ig.la.SHOW_FOOD_ICON=ig.ta.extend({Y:q,t:new ig.u({attributes:{Y:{c:"String",d:"The icon to display",U:sc.Dwa},offset:{c:"Vec2",
d:"Offset position of sprite",I:h}}}),f:function(a){this.Y=sc.Dwa[a.icon]||0;this.offset=a.offset||q},start:function(a){a=ig.r.Pe(sc.XQa,0,0,0,{icon:this.Y,combatant:a});this.offset&&a.HH(sc.zV.HOLD,this.offset)}});ig.la.CHANGE_FOOD_ICON=ig.ta.extend({state:q,t:new ig.u({attributes:{state:{c:"String",d:"New state of food icon",U:sc.zV},offset:{c:"Vec2",d:"Offset position of sprite",I:h}}}),f:function(a){this.state=sc.zV[a.state];this.offset=a.offset||q},start:function(a){for(var a=a.kl,b=a.length;b--;)a[b]instanceof
sc.XQa&&a[b].HH(this.state,this.offset)}});ig.la.CONSUME_ITEM=ig.ta.extend({item:q,t:new ig.u({attributes:{item:{c:"Item",d:"The item to consume."}}}),f:function(a){this.item=a.item||0},start:function(a){sc.q.T.UOa(this.item);sc.q.T.j0a(h);a.dE(i)}})});ig.J=h;
ig.N("game.feature.player.crosshair-steps").O("impact.base.animation","impact.base.action","impact.base.entity").K(function(){var a=q;ig.oa.ACTIVATE_CROSSHAIR=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Entity to focus camera on"}}}),f:function(a){this.Q=a.entity},start:function(b,d){var f=ig.Ja.rd(this.Q,d);if(f){a=ig.r.Pe(ig.wa.Crosshair,0,0,0,{thrower:f,controller:new sc.mhb});a.Ema=h}}});ig.oa.DEACTIVATE_CROSSHAIR=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){a&&
a.ze()}});ig.oa.SET_CROSSHAIR_TARGET=ig.qa.extend({g:q,t:new ig.u({attributes:{g:{c:"Vec2",d:"Target position for CrossHair",dr:h,kq:h}}}),f:function(a){this.g=a.pos},start:function(){a.setActive(h);ig.Ja.vG(this.g,a.JM.cl)}});ig.oa.SET_CROSSHAIR_SPEED=ig.qa.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",d:"Speed of CrossHair. 1 is default, 0 is pause"}}}),f:function(a){this.value=a.value},start:function(){a.L_(this.value)}});ig.oa.REDUCE_CROSSHAIR_PRECISION=ig.qa.extend({value:q,t:new ig.u({attributes:{value:{c:"Number",
d:"Amount to reduce. 0=nothing, 1=maximum"}}}),f:function(a){this.value=a.value},start:function(){a.l9a(this.value)}});var b=Vec2.create();ig.oa.GET_CROSSHAIR_DIR=ig.qa.extend({uc:q,t:new ig.u({attributes:{uc:{c:"VarName",d:"Variable to contain (random) CrossHair direction."}}}),f:function(a){this.uc=a.variable},start:function(){a.vpa(b);ig.ma.set(this.uc,b)}})});ig.J=h;
ig.N("game.feature.player.modifiers").O("impact.base.game").K(function(){sc.Af={};sc.Af.AIM_SPEED={Y:8};sc.Af.AIM_STABILITY={Y:32};sc.Af.AIMING_MOVEMENT={Y:23};sc.Af.KNOCKBACK={Y:11};sc.Af.RANGED_DMG={Y:10};sc.Af.MELEE_DMG={Y:12};sc.Af.CRITICAL_DMG={Y:14};sc.Af.BREAK_DMG={Y:43};sc.Af.SPIKE_DMG={Y:25};sc.Af.ASSAULT={Y:13};sc.Af.CROSS_COUNTER={Y:42};sc.Af.BERSERK={Y:46};sc.Af.DASH_INVINC={Y:15};sc.Af.DASH_STEP={Y:24,tB:h};sc.Af.GUARD_STRENGTH={Y:20};sc.Af.GUARD_SP={Y:29};sc.Af.GUARD_AREA={Y:31,tB:h};
sc.Af.PERFECT_GUARD_WINDOW={Y:27};sc.Af.PERFECT_GUARD_RESET={Y:28,tB:h};sc.Af.STUN_THRESHOLD={Y:16};sc.Af.OVERHEAT_REDUCTION={Y:22};sc.Af.HP_REGEN={Y:17};sc.Af.SP_REGEN={Y:47};sc.Af.ITEM_GUARD={Y:48,tB:h};sc.Af.ONCE_MORE={Y:45,tB:h};sc.Af.XP_PLUS={Y:9};sc.Af.DROP_CHANCE={Y:19};sc.Af.MONEY_PLUS={Y:26};sc.Af.XP_ZERO={Y:18,tB:h};sc.Af.RANK_PLANTS={Y:30,tB:h};sc.Af.ITEM_BOOST={Y:21};sc.Af.APPETITE={Y:44};sc.Af.COND_HEALING={Y:41};sc.Af.COND_EFFECT_HEAT={Y:33};sc.Af.COND_EFFECT_COLD={Y:34};sc.Af.COND_EFFECT_SHOCK=
{Y:35};sc.Af.COND_EFFECT_WAVE={Y:36};sc.Af.COND_EFFECT_ALL={Y:49};sc.Af.COND_GUARD_HEAT={Y:37};sc.Af.COND_GUARD_COLD={Y:38};sc.Af.COND_GUARD_SHOCK={Y:39};sc.Af.COND_GUARD_WAVE={Y:40};sc.Af.SPIDER_SLOW_DOWN_GUARD={Y:50,tB:h};sc.Af.BEGONE_ICE={Y:51,tB:h};var a=0,b;for(b in sc.Af){sc.Af[b].Li=a;a++}});ig.J=h;
ig.N("game.feature.player.player-skin").O("impact.base.game","game.feature.player.player-model","game.feature.model.game-model").K(function(){var a={"holiday-hat":{item:168,autoAdd:y,type:"Appearance",settings:{sheet:"player-skins.xmas",fx:"skins.xmas",gui:"xmas.png"}}};sc.Blb=ig.Ca.extend({nbb:q,name:q,f:function(a,c,d){this.nbb=a;this.name=c;a=new ig.xjb(this);this.b_a(d);a.Cyb()},Eq:function(){this.loaded=h;sc.UT.qsb(this)},b_a:q});sc.TV={};sc.TV.Appearance=sc.Blb.extend({mb:q,fx:q,IY:q,b_a:function(a){this.mb=
new ig.Al(a.sheet);this.fx=new ig.ud(a.fx);this.IY=new ig.ia("media/gui/skins/"+a.gui)},Ka:function(){this.mb.Tc();this.fx.Tc()}});sc.TV.Appearance.Zcb="skins";sc.hTa={iTa:1};sc.Clb=ig.Uf.extend({Uo:[],nua:{},pHa:{},sna:{},f:function(){this.parent("PlayerSkins");for(var b in a)this.q9a(b,a[b]);sc.P.Wa(sc.q.T,this);ig.x4.addListener(this,"skin")},BJa:function(a){this.q9a(a.id,a)},q9a:function(a,c){this.nua[a]&&e(Error("Tried to register skin of id '"+a+"' twice."));this.nua[a]={item:c.item,Lub:c.autoAdd,
type:c.type,yf:c.settings};this.pHa[c.item]=a},LOb:function(){for(var a in sc.TV)this.KOb(a)},KOb:function(a){for(var c=this.sna[a],d=q,f=sc.q.T,i=f.dva[sc.TV[a].Zcb].items,j=i.length;j--;){var k=i[j];if(f.PJ(k)){d=this.pHa[k];break}}if(!(!d&&!c||d&&c&&c.name==d)){if(c){c.Ka();this.sna[a]=q}d&&(this.sna[a]=this.Tqb(d));sc.P.Ga(this,sc.hTa.iTa,a)}},J1a:function(a){return this.sna[a]},Tqb:function(a){var c=this.nua[a];return!c?q:new sc.TV[c.type](c.type,a,c.yf)},qsb:function(a){sc.P.Ga(this,sc.hTa.iTa,
a.nbb)},Gvb:function(){for(var a in sc.TV)this.Fvb(sc.TV[a].Zcb)},Fvb:function(a){for(var c=sc.q.T,a=c.dva[a].items,d=a.length;d--;){var f=a[d],i=this.pHa[f];i?this.nua[i].Lub&&!c.Dr(f)&&c.sA(f,1,h):c.removeItem(f,c.Dr(f))}},Ab:function(a,c){a==sc.q.T&&(c==sc.dd.u1||c==sc.dd.k$||c==sc.dd.L1)&&this.LOb()},dK:1E3,qx:function(){this.Gvb()}});ig.Vf(function(){return sc.UT=new sc.Clb})});ig.J=h;
ig.N("game.feature.player.plug-in").O("game.feature.player.entities.crosshair","game.feature.player.entities.player","game.feature.player.player-steps","game.feature.player.crosshair-steps","game.feature.player.player-model","game.feature.player.modifiers","game.feature.player.player-skin").K(function(){window.Ed&&wm.Ek.push("game.feature.player.editors.player-editors")});ig.J=h;
ig.N("game.feature.puzzle.components.push-pullable").O("impact.base.entity","game.feature.interact.map-interact").K(function(){var a=Vec2.create(),b=Vec2.create(),c=Vec3.create(),d={};sc.a$={ALL:0,LEFT_RIGHT:1,UP_DOWN:2};sc.Gxa={};sc.Gxa.OTa=new ig.ka("media/sound/puzzle/push-start.ogg",1);sc.Gxa.zjb=new ig.ka("media/sound/puzzle/push-loop.ogg",1);sc.FSa=ig.Ca.extend({Q:q,Aa:y,ru:q,Fna:y,wf:q,Pv:{gC:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[40,41,42,41],NEAR:[43],RUNNING:[46,47]},
0.2),Vpa:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[40,41,42,41],NEAR:[43],RUNNING:[44,45]},0.2)},dna:Vec2.create(),cl:Vec2.create(),In:0,pxb:100,e8:0,ZX:0,OJb:q,Cpa:0,em:q,Kg:q,f:function(a){this.Q=a;this.Sf=Vec3.create(this.Q.b.g);this.Aa=y;this.wf=new sc.OV(a,this,this.Pv.Vpa,sc.UE.pka,y);this.OJb=new ig.Fo.fF("RANDOM","WEAKEST","FAST",-1,0,q);this.wf.LB(0,-8);this.Kg=ig.navigation.eS(this.Q)},setActive:function(a){(this.Aa=a)?sc.cn.De(this.wf):sc.cn.$e(this.wf)},wc:M("Aa"),Km:function(){if(this.In==
0){var a=ig.r.cb;a.Sy=this;this.Cpa=0;var b=this.KAb();a.Zf(b,h)}},CT:function(){if(this.ru)this.Fna=h},S4a:function(){if(this.ru)return y;var b=ig.r.cb,i=this.eFa(c),j=b.tb(a),j=Vec2.sub(c,j),k=ig.r.Ie.Il(d);return this.Q.KKa==sc.a$.LEFT_RIGHT&&(i=="NORTH"||i=="SOUTH")||this.Q.KKa==sc.a$.UP_DOWN&&(i=="WEST"||i=="EAST")?h:ig.r.Uq(k,b,j.x,j.y,0,0,ig.lf.Rt,ig.ca.VIRTUAL)},gw:function(a,b){if(this.Aa&&!this.ru){if(a){Vec3.assign(this.Sf,a);this.Sf.x=this.Sf.x-this.Q.b.size.x/2;this.Sf.y=this.Sf.y-this.Q.b.size.y/
2}if(!Vec3.u4(this.Q.b.g,this.Sf)){if(!b){var d=this.Q.lc(ig.Pa.BOTTOM,c);ig.r.G.PA.Cg("hole_fall",d.x,d.y,d.z)}this.Q.l(this.Sf.x,this.Sf.y,this.Sf.z);Vec3.Oa(this.Q.b.V,0,0,0);if(!b){this.Q.Ya.alpha=0;ig.r.G.Mf.va("showQuick",this.Q)}for(var d=ig.r.nG(this.Q),k=d.length;k--;){var l=d[k];if(!l.Ah){var m=l.b.Nc.zs;l.l(this.Sf.x+m.x,this.Sf.y+m.y,this.Sf.z+this.Q.b.size.z);l.b.sha(q);if(!b){if(l.Ya)l.Ya.alpha=0;ig.r.G.Mf.va("showQuick",l)}}}}}},am:function(){var d=this.Q.b;if(this.Aa){var i=0;d.g.z==
d.pc&&(i=ig.Pb.pN(this.Q.b,y));(d.g.z<ig.r.Xy||ig.Pb.vea(i))&&this.gw()}var i=ig.r.cb,j=this.In;if(this.In==2||this.In==3||this.In==4){var k=Vec2.assign(b,this.cl),l=this.Q.b.g;Vec2.sub(b,l);var m=this.pxb;this.ZX=this.ZX+ig.i.ja;if(this.e8<0.3){this.e8=this.e8+ig.i.ja;m=m*(this.e8/0.3).Rb(0,1)}m=ig.i.ja*m;if(Vec2.length(k)>m){Vec2.length(k,m);this.Q.l(l.x+k.x,l.y+k.y)}else{this.Q.l(this.cl.x,this.cl.y);this.Kg&&this.Kg.update();k=ig.gl.rY(this.Q);if(this.In==4){k&&k.UGb(this.Q);this.In=0}else{this.In=
this.ru?1:0;this.Q.Ma("default");if(k&&k.V7a&&k.V7a(this.Q,c)){Vec2.assign(this.cl,c);this.setActive(y);this.zma();this.In=4}}}}if(this.Aa&&(this.In==0||this.In==1)){if(!this.ru){this.In=0;this.Gua();return}if(i.PFa()){this.In=0;this.Cpa=this.Cpa+ig.i.ja;if(this.Cpa>0.3){i.Ei();this.zma();this.Fna=y}this.Gua();return}d=this.Q.b;if(d.g.z!=d.pc||i.b.g.z-i.b.pc>ig.lf.Rt||this.Fna){this.Fna=y;this.In=0;this.zma();this.Gua();return}if(this.In==0){this.In=1;Vec2.assign(this.dna,i.b.g);Vec2.sub(this.dna,
this.Q.b.g)}k=b;sc.ba.Nh(k,1);Vec2.assign(a,this.Q.b.g);Vec2.add(a,this.dna);i.l(a.x,a.y,this.Q.b.g.z);if((this.ru=="EAST"||this.ru=="WEST")&&k.x)this.M6a(k.x<0?-4:4,0);else if((this.ru=="NORTH"||this.ru=="SOUTH")&&k.y)this.M6a(0,k.y<0?-4:4)}if(this.In&&this.ru){Vec2.assign(a,this.Q.b.g);Vec2.add(a,this.dna);i.l(a.x,a.y);i.b.rm=h;d.Dda=h;i.eo=h;this.In==1?i.Ma("gripStand"):this.In==2?i.Ma("gripPull"):this.In==3&&i.Ma("gripPush")}if(this.In!=j)this.e8=this.ZX=0;(this.In==0||this.In==1)&&this.Gua()},
Ge:function(){this.Kg&&this.Kg.remove()},Eu:function(){var a=ig.r.cb;this.In&&this.ru&&a.l(g,g,this.Q.b.g.z)},aYb:J(),Gua:function(){if(this.em){this.em.stop();this.em=q}},zma:function(){var a=ig.r.cb;a.b.rm=y;a.b.g.z-a.b.pc<=1&&a.l(g,g,a.b.pc);a.eo=y;this.Q.b.Dda=y;a.dvb();this.ru=q;sc.sa.PS=y},uGb:function(){this.zma()},eFa:function(b){var c=ig.r.cb;this.Q.lc(ig.Pa.BOTTOM,b);var d=c.tb(a),d=Vec2.sub(d,b);if(Math.abs(d.x)>Math.abs(d.y)){c=this.Q.b.size.x/2+c.b.size.x/2;if(d.x<0){b.x=b.x-c;b="EAST"}else{b.x=
b.x+c;b="WEST"}}else{c=this.Q.b.size.y/2+c.b.size.y/2;if(d.y<0){b.y=b.y-c;b="SOUTH"}else{b.y=b.y+c;b="NORTH"}}return b},KAb:function(){var a=Vec3.create(),b=this.eFa(a);b=="WEST"||b=="EAST"?this.wf.nz(this.Pv.Vpa):this.wf.nz(this.Pv.gC);this.ru=b;sc.sa.PS=h;this.ZX=this.e8=0;return new ig.Xe("gripStart",[{type:"MOVE_TO_POINT",target:a,precise:y},{type:"SET_FACE",face:b},{type:"SHOW_ANIMATION",anim:"gripStand"},{type:"ALIGN_PUSH_PULL_POS",component:this,duration:0.05}])},M6a:function(a,b){var c=ig.r.cb,
k;a?k=this.ru=="EAST"&&a<0||this.ru=="WEST"&&a>0:b&&(k=this.ru=="NORTH"&&b>0||this.ru=="SOUTH"&&b<0);var l=ig.r.Ie.Il(d);if(!ig.r.Uq(l,this.Q,a,b,0,0,1,ig.ca.BLOCK,q,c)&&(!k||!ig.r.Uq(l,c,a,b,0,0,ig.lf.Rt,ig.ca.BLOCK,q,c))){if(!this.em)this.em=sc.Gxa.zjb.play(h);this.Q.Ma(a?"moveH":"moveV");if(this.ZX>=0.13){this.ZX=this.ZX-0.13;var m;a?m=a>0?"boxMediumEast":"boxMediumWest":b&&(m=b>0?"boxMediumSouth":"boxMediumNorth");ig.r.G.YX.va(m,this.Q)}this.In=k?2:3;Vec2.assign(this.cl,this.Q.b.g);Vec2.JQ(this.cl,
a,b);this.cl.x=Math.round(this.cl.x/4)*4;this.cl.y=Math.round(this.cl.y/4)*4}}})});ig.J=h;
ig.N("game.feature.puzzle.entities.block").O("impact.base.entity").K(function(){ig.wa.Block=ig.Wd.extend({Pt:new ig.Vh("media/entity/objects/block.png",32,32),n:0,style:0,t:new ig.u({Dd:h,attributes:{style:Number}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.F(16,16,16);if(d.style)this.style=d.style;this.Bd({sheet:this.Pt,SUB:[{name:"normal",time:1,frames:[0]},{name:"touched",time:1,frames:[1]}]})},update:function(){this.n=this.n-ig.i.ja;this.n<=0&&this.Ma("normal");this.parent()},
oq:function(){this.Ma("touched");this.n=0.2}})});ig.J=h;
ig.N("game.feature.puzzle.entities.blockers").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.Y0={};ig.wa.Blocker=ig.Wd.extend({Aa:y,maxHeight:0,minHeight:0,uc:q,t:new ig.u({Dd:h,attributes:{eSb:{c:"String",d:"Type of blocking object",U:sc.Y0,ok:h},fb:{c:"VarCondition",d:"Condition for blocker to be active",xc:h}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.fb=new ig.de(d.condition);this.Aa=this.fb.evaluate();if(a=sc.Y0[d.blockerType]){this.F(a.size.x,
a.size.y,a.size.z);this.b.shape=a.oJ;this.minHeight=a.minHeight;this.maxHeight=this.b.size.z;b=ig.Rf.get("puzzle");a.Ba.sheet.src=b.sheet;this.Bd(a.Ba);if(this.Aa){this.Ma("on");this.F(this.b.size.x,this.b.size.y,this.maxHeight)}else{this.Ma("off");this.F(this.b.size.x,this.b.size.y,this.minHeight)}}else this.b.F(32,32,0)},update:function(){this.parent()},ag:function(){var a=this.fb.evaluate();if(this.Aa!=a)if(this.Aa=a){this.F(this.b.size.x,this.b.size.y,this.maxHeight);this.Ma("goOn",h,"on")}else this.Ma("goOff",
h,"off",y,h)},PQ:function(){this.F(this.b.size.x,this.b.size.y,this.minHeight)}});sc.Y0.diagonalNW={size:{x:32,y:32,z:24},oJ:ig.Tf.SLOPE_NW,minHeight:2,Ba:{sheet:{src:q,width:32,height:64,offY:128},SUB:[{name:"off",time:0.1,frames:[0],repeat:y},{name:"on",time:0.02,frames:[5,6],repeat:h},{name:"goOn",time:0.05,frames:[1,2,3,4],repeat:y},{name:"goOff",time:0.05,frames:[4,3,2,1],repeat:y}]}};sc.Y0.diagonalNE={size:{x:32,y:32,z:24},oJ:ig.Tf.SLOPE_NE,minHeight:2,Ba:{sheet:{src:q,width:32,height:64,offY:128},
flipX:h,SUB:[{name:"off",time:0.1,frames:[0],repeat:y},{name:"on",time:0.02,frames:[5,6],repeat:h},{name:"goOn",time:0.05,frames:[1,2,3,4],repeat:y},{name:"goOff",time:0.05,frames:[4,3,2,1],repeat:y}]}};sc.Y0.diagonalSE={size:{x:32,y:32,z:24},oJ:ig.Tf.SLOPE_SE,minHeight:2,Ba:{sheet:{src:q,width:32,height:64,offY:192},flipX:h,wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:y},{name:"on",time:0.02,frames:[5,6],repeat:h},{name:"goOn",time:0.05,frames:[1,2,3,4],repeat:y},{name:"goOff",time:0.05,frames:[4,
3,2,1],repeat:y}]}};sc.Y0.diagonalSW={size:{x:32,y:32,z:24},oJ:ig.Tf.SLOPE_SW,minHeight:2,Ba:{sheet:{src:"media/entity/objects/blockers.png",width:32,height:64,offY:192},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:y},{name:"on",time:0.02,frames:[5,6],repeat:h},{name:"goOn",time:0.05,frames:[1,2,3,4],repeat:y},{name:"goOff",time:0.05,frames:[4,3,2,1],repeat:y}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.bomb").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create();Vec3.create();ig.wa.BombPanel=ig.Wd.extend({Kl:0,uv:q,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},tT:{c:"Boolean",d:"No camera-follow with heat"}}}),G:{uv:new ig.ud("puzzle.bomb")},f:function(a,c,d,f){this.parent(a,c,d,f);this.tT=f.noHeatFocus;this.b.type=ig.ca.BLOCK;this.b.F(24,24,1);this.b.Fd=1;a=ig.Rf.get("puzzle2");
this.Bd({sheet:{src:a.sheet,width:24,height:24,xCount:2,offX:0,offY:88},SUB:[{name:"on",time:1,frames:[1],repeat:y},{name:"off",time:1,frames:[0],repeat:y},{name:"blink",time:0.04,frames:[0],repeat:y},{name:"blink",time:0.04,frames:[1,1,1,1,1,1,1,1],framesAlpha:[0,0.2,0.5,0.8,1,0.8,0.5,0.2],repeat:h}]});this.Ma("on")},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showDefault",this,{})}this.Bbb(a)},po:function(){if(this.uv){this.uv.oh();
this.uv=q}this.Kl=0;this.G.Xd=ig.r.G.Mf.va("hideDefault",this,{align:ig.Pa.CENTER,callback:this})},Aj:function(a){if(a.ek()){this.G.Xd=q;this.hide()}},update:function(){if(this.Kl){this.Kl=this.Kl-ig.i.ja;this.Kl<=0&&this.Bbb()}this.parent()},Bbb:function(b){this.Kl=0;this.Ma("on");var c=this.tb(a);this.uv=ig.r.Pe(sc.b9,c.x,c.y,this.b.g.z+this.b.size.z,{panel:this});this.uv.tT=this.tT;b||this.G.uv.va("appear",this.uv,{})},dCb:function(){return!!this.uv},CFb:function(){this.uv=q;this.Ma("off")},BFb:function(){this.Ma("blink");
this.Kl=1.5}});sc.b9=ig.Wd.extend({Mi:q,n:0,pb:q,e5:y,G:{uv:new ig.ud("puzzle.bomb")},vf:q,tT:y,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1;this.b.kj=0.5;this.b.F(20,20,16);this.b.Ze.Am=0.06;this.b.Cd.size=20;this.b.aN=h;this.b.l(a-this.b.size.x/2,c-this.b.size.y/2,d);this.Mi=f.panel||q;a=ig.Rf.get("puzzle2");this.Bd({shapeType:"Y_FLAT",offset:{x:0,y:-3,z:0},sheet:{src:a.sheet,width:24,height:24,xCount:5,offX:0,offY:64},SUB:[{name:"off",time:1,frames:[0],repeat:y},
{name:"ticking",time:0.1,frames:[2,1,0,1],repeat:h},{name:"ticking",time:1,frames:[3],repeat:y},{name:"ticking",time:1,frames:[4],repeat:y},{name:"tickingEnd",time:0.03,frames:[0,0,2,2],repeat:h},{name:"tickingEnd",time:0.03,frames:[3,3,3,3],framesAlpha:[0,0,1,1],repeat:h},{name:"tickingEnd",time:0.03,frames:[4,4,4,4],framesAlpha:[0,0,1,1],repeat:h}]});this.Ma("off")},oh:function(){this.G.Xd=ig.r.G.Mf.va("hideDefault",this,{align:ig.Pa.CENTER,callback:this})},Aj:function(a){if(a.ek()){this.G.Xd=q;
this.ze()}},start:function(a,c,d,f){if(!this.n){this.Ma("ticking");this.n=3;this.Mi&&this.Mi.CFb();Vec2.assign(this.b.V,a);Vec2.length(this.b.V,d||180);this.b.V.z=f||200;this.pb=c;this.Hg=this.G.uv.va("active",this,{duration:-1})}},jMa:function(){this.n=0.75;this.Ma("tickingEnd");if(this.Ua.length>1){this.Ua[1].gp(0,0);this.Ua[2].gp(0,0)}this.Hg&&this.Hg.stop();this.Hg=this.G.uv.va("almost",this,{duration:-1})},w4:function(){if(!this.Ve){var a=this.lc(ig.Pa.CENTER,Vec3.create());this.G.uv.Cg("explosion",
a.x,a.y,a.z);a.z=a.z-24;this.Mi&&this.Mi.BFb();if(this.pb){a=new sc.vw(this.pb,{attack:{type:"MASSIVE",element:"HEAT",damageFactor:2,spFactor:0,hints:["BOMB"],noHack:h},pos:a,radius:8,zHeight:40,duration:0.1,expandRadius:40,alwaysFull:h,party:"OTHER"});sc.Ta.js(a)}this.vf&&ig.le.Os(this.vf,"SLOW",KEY_SPLINES.EASE_IN_OUT);this.ze()}},s0a:function(a,c){if(!this.Ve&&!this.e5){this.e5=h;var d=this.b;this.b.aN=y;Vec2.assign(d.wb,a);d.Ch=400;d.di=2E3;Vec2.assign(d.V,a);Vec2.length(d.V,400);this.n=2;this.pb=
c;this.Hg&&this.Hg.stop();if(!this.tT){this.vf=new ig.sf.gq(new ig.sf.PV([this,ig.r.cb]),0,0);ig.le.wx(this.vf,"FAST",KEY_SPLINES.EASE_IN_OUT)}this.G.uv.va("bombHeatTrail",this,{duration:-1,angle:Vec2.Wm(a),offset:{z:6}})}},update:function(){this.b.g.z<ig.r.Xy&&this.w4();if(this.e5){(this.b.Vs>0||this.b.Zo>0)&&this.w4();this.n=this.n-ig.i.ja;this.n<=0&&this.w4()}else if(this.n>0){this.n=this.n-ig.i.ja;this.n<=0&&this.w4();this.rk=="ticking"&&this.n<=0.75&&this.jMa()}if(this.rk=="ticking"&&this.Ua.length>
1){var a=this.Ua[1],c=this.Ua[2],d=a.size.y+a.size.z,f=(this.n-0.75)/0.75,f=f.Rb(0,1),f=Math.ceil(8*(1-f));a.gp(d-1-f,1);c.gp(d-7-f,7)}a=this.b;a.Ze.Pb=ig.Pb.pN(a,h)==ig.hd.ICE?0.02:1;this.parent()},sj:function(b){if(this.e5)return y;var c=b.aj(this),d=b.qu(this,a),f=b.Nn&&!b.zb.wi("CHARGED")&&b.zb.element==sc.ha.HEAT;if(!b.zb.wi("DEEP_FLAME")&&b.Nn&&!b.zb.wi("CHARGED")&&(!this.n||!f)){sc.Ta.Oi(this,c,sc.Wb.NONE,b.Gf(),h,y,h);return h}sc.Ta.Oi(this,c,sc.Wb.MEDIUM,b.Gf(),y,y,h);if(b.zb.wi("DEEP_FLAME")){c=
b.te();c.target&&ig.qd.Wk(this.b,c.target.b,d);this.s0a(d,b.te())}else!f&&b.zb.element==sc.ha.HEAT?this.s0a(d,b.te()):this.n?this.w4():this.start(d,b.tq());return h},hH:function(a){if(this.b.g.z>=-1&&!this.b.rm){var c=this.tb();a<-50&&ig.r.G.YX.Cg("medium",c.x,c.y,this.b.g.z);if((a=ig.gl.rY(this))&&a.nma)this.b.V.z=0}},x5:N(h),uca:function(a,c,d){this.tb(a);Vec3.assign(d,this.b.size);return 0},GG:function(a,c,d){return this.e5||!d||this.n&&!sc.q.T.sg==sc.ha.HEAT?h:y}});sc.oL.BOMB_PANEL={t:{attributes:{ready:{c:"Boolean",
d:"If true: Bomb panel has to include a bomb "}}},Mca:function(a,c,d){for(var d=d.ready,f=c.length;f--;){var i=c[f];i instanceof ig.wa.BombPanel&&(!d||i.dCb())&&a.push(i)}return a}}});ig.J=h;
ig.N("game.feature.puzzle.entities.water-bubble").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create();Vec3.create();ig.wa.WaterBubblePanel=ig.Wd.extend({Kl:0,R3:q,Aa:y,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},z3:{c:"Number",d:"Time coal will be cooled by ice disks created from these bubbles",I:h}}}),G:{sheet:new ig.ud("puzzle.water-bubble")},f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.NONE;this.b.F(24,
24,0);this.b.Fd=1E3;a=ig.Rf.get("puzzle2");this.Bd({sheet:{src:a.sheet,width:24,height:24,xCount:2,offX:0,offY:112},SUB:[{name:"on",time:1,frames:[1],repeat:y},{name:"off",time:1,frames:[0],repeat:y},{name:"blink",time:0.04,frames:[0],repeat:y},{name:"blink",time:0.02,frames:[1,1,1,1,1,1,1,1],framesAlpha:[0,0.2,0.5,0.8,1,0.8,0.5,0.2],repeat:h}]});this.z3=f.coalCoolTime;this.Ma("on")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showDefault",this,{})}this.b.Fd=1E3;this.Aa=h;
this.Cbb(a)},po:function(){this.Aa=y;this.b.Fd=0;this.b.V.z=0;if(this.R3){this.R3.Mi=q;this.R3.O4a()&&this.R3.YYa()}ig.r.G.Mf.va("hideDefault",this,{callback:this})},Aj:function(a){a.ek()&&this.hide()},update:function(){if(this.Kl){this.Kl=this.Kl-ig.i.ja;this.Kl<=0&&this.Cbb()}this.parent()},Cbb:function(b){if(this.Aa){this.Kl=0;this.Ma("on");var c=this.tb(a),c=ig.r.Pe(sc.H$,c.x,c.y,this.b.g.z+8,{panel:this,coalCoolTime:this.z3});if(!b){this.G.sheet.va("appear",c,{});c.TIa=2}this.R3=c}},DFb:function(){this.Ma("off")},
v6:function(){this.R3=q;this.Ma("blink");this.Kl=1.5}});Vec2.create();sc.H$=ig.Wd.extend({Mi:q,state:1,n:0,Wha:0,pb:q,e5:y,G:{sheet:new ig.ud("puzzle.water-bubble"),handle:q,xq:q},vf:q,tT:y,target:q,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1;this.b.kj=0.5;this.b.Vm=0.5;this.b.F(20,20,16);this.b.Ze.Am=0.2;this.b.Ch=125;this.b.yd.height=8;this.Wha=d;this.b.yd.yl=2;this.b.Cd.size=16;this.b.l(a-this.b.size.x/2,c-this.b.size.y/2,d);this.Mi=f.panel||q;this.z3=f.coalCoolTime;
this.Bd({shapeType:"Y_FLAT",offset:{x:0,y:-3,z:0},sheet:{src:"media/entity/objects/object-effects.png",width:24,height:24,xCount:4,offX:128,offY:16},SUB:[{name:"idle",time:0.1,frames:[0,1,2,3],repeat:h}]});this.Ma("idle");if(f.target){this.b.Vm=1;this.Eoa(f.target,f.targetTime)}if(f.combatant)this.pb=f.combatant},O4a:function(){return this.state==1},Eoa:function(a,c){this.target=a;this.state=2;this.n=c;ig.qd.Wk(this.b,this.target.b,this.b.wb);Vec2.assign(this.b.V,this.b.wb);Vec2.length(this.b.V,this.b.Ch);
this.b.vl(ig.ca.IGNORE);this.G.sheet.va("selfExplode",this,{duration:-1})},i3:function(a,c){if(this.state==1)this.state=3;Vec2.assign(this.b.V,a);Vec2.length(this.b.V,c||180);if(!this.n){this.n=10;this.Mi&&this.Mi.DFb()}if(this.G.xq){this.G.xq.F7(q);this.G.xq.stop()}this.G.xq=this.G.sheet.va("hit",this,{callback:this})},jMa:function(){this.state=4;this.G.handle=this.G.sheet.va("almostBurst",this,{duration:-1})},dDb:function(){if(!(this.Ve||this.state==5)){this.state=5;this.Mi&&this.Mi.v6();this.ze()}},
YYa:function(){if(!(this.Ve||this.state==5)){this.state=5;if(this.G.handle){this.G.handle.stop();this.G.handle=q}this.G.sheet.va("burst",this,{callback:this,align:"CENTER"});this.Mi&&this.Mi.v6()}},Aj:function(a){if(!this.Ve&&a.state==ig.ev.mC)a==this.G.xq?this.G.xq=q:this.ze()},yg:function(a,c){if(!this.Ve){var d=this.lc(ig.Pa.BOTTOM,Vec3.create());this.G.sheet.Cg("steamExplosion",d.x,d.y,d.z,q,{angle:Vec2.Wm(a)});d.z=d.z-8;this.Mi&&this.Mi.v6();if(c){d=new sc.vw(c,{attack:{type:"MASSIVE",element:"HEAT",
damageFactor:1,spFactor:0,hints:["STEAM"],noHack:h},pos:d,radius:8,zHeight:16,duration:0.2,expandRadius:60,alwaysFull:h,party:"OTHER",centralAngle:0.3,dir:ig.copy(a)});sc.Ta.js(d)}this.vf&&ig.le.Os(this.vf,"SLOW",KEY_SPLINES.EASE_IN_OUT);this.ze()}},cCa:function(a){if(!this.Ve){var c=this.lc(ig.Pa.BOTTOM,Vec3.create());this.G.sheet.Cg("steamExplosion2",c.x,c.y,c.z,q,{});c.z=c.z-8;this.Mi&&this.Mi.v6();if(a=a||this.pb){c=new sc.vw(a,{attack:{type:"MASSIVE",element:"HEAT",damageFactor:1,spFactor:0,
hints:["STEAM"],noHack:h},pos:c,radius:8,zHeight:16,duration:0.2,expandRadius:32,alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(c)}this.vf&&ig.le.Os(this.vf,"SLOW",KEY_SPLINES.EASE_IN_OUT);this.ze()}},uia:function(){if(!this.Ve){var b=this.tb(a);ig.r.Pe(sc.Rja,b.x,b.y,this.b.g.z+8,{panel:this.Mi,coalCoolTime:this.z3});this.ze()}},start:function(a,c,d){if(!this.n){this.Ma("ticking");this.n=3;Vec2.assign(this.b.V,a);Vec2.length(this.b.V,d||180);this.pb=c;this.Hg=this.G.uv.va("active",this,{duration:-1})}},
update:function(){this.TIa&&this.TIa--;if(this.target){ig.qd.Wk(this.b,this.target.b,a);Vec2.GB(this.b.wb,a,Math.PI*0.5*ig.i.ja);this.b.yd.height=Math.max(8,this.target.b.g.z+12-this.b.pc);Vec2.length(a)<48&&this.cCa()}else if(this.state!=1)this.b.yd.height=Math.max(8,this.Wha-this.b.pc);else if(this.Mi)this.Wha=this.Mi.b.g.z+8;if(this.state!=5&&this.n>0){this.n=this.n-ig.i.ja;this.n<=0&&(this.target?this.cCa():this.YYa());this.state==3&&this.n<=3&&this.jMa()}this.parent()},sj:function(b){var c=b.Gf();
if(c!=sc.ha.HEAT&&b.sa!=sc.pd.PLAYER||this.state==5)return y;var d=b.aj(this),f=b.qu(this,a);c==sc.ha.HEAT?this.TIa?this.dDb():b.zb&&b.zb.wi("STEAM")?this.cCa(b.te()):this.yg(f,b.te()):c==sc.ha.COLD?this.uia(f):this.i3(f,120);c=sc.Wb.LIGHT;if(!b.Nn||b.zb.wi("CHARGED"))c=sc.Wb.MEDIUM;sc.Ta.Oi(this,d,c,b.Gf(),y,y,h);return h},x5:N(h),uca:function(a,c,d){this.tb(a);Vec3.assign(d,this.b.size);return 0},GG:function(){return sc.q.T.sg==sc.ha.HEAT?h:y}})});ig.J=h;
ig.N("game.feature.puzzle.entities.compressor").O("impact.base.entity","impact.base.actor-entity","impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create(),b=Vec2.create(),c=Vec2.create(),d=Vec2.create(),f=Vec2.create(),i=Vec3.create(),j=[0,3,6,10],k={3:"Shock",4:"Wave"};ig.wa.Compressor=ig.Wd.extend({EA:0,Ev:0,ps:0,os:q,gy:0,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},a1a:{c:"Boolean",d:"If true follow compressor ball with camera"},rBa:{c:"Number",
d:"Additional factor to slow down ball speed when going along or through walls",I:h}}}),G:{sheet:new ig.ud("puzzle.compressor"),Xd:q},Na:{Ac:new ig.ka("media/sound/puzzle/wave-charge.ogg",0.5,0)},f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.F(16,16,24);this.b.Fd=1E3;this.a1a=d.followCamera||y;this.rBa=d.ballSpeed||1;a=ig.Rf.get("puzzle2");this.Bd({shapeType:"Z_FLAT",wallY:1,SUB:[{sheet:{src:a.sheet,width:16,height:16,xCount:3,offX:208,offY:176},SUB:[{name:"off",time:1,
frames:[0],repeat:y},{name:"shock",time:1,frames:[1],repeat:y},{name:"wave",time:1,frames:[2],repeat:y}]},{offset:{x:0,y:0,z:6},sheet:{src:a.sheet,width:16,height:16,xCount:3,offX:208,offY:160},SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"shock",time:0.05,frames:[1,0,1,0,1,0,1,0],repeat:y},{name:"wave",time:0.05,frames:[2,0,2,0,2,0,2,0],repeat:y}]}]});this.Ma("off");m=0},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",
this,{})}},po:function(){this.nJb();this.G.Xd=ig.r.G.Mf.va("hideFast",this,{callback:this})},Aj:function(a){if(a==this.G.Xd&&a.ek()){this.G.Xd=q;this.hide()}},swb:function(){var a=this.tb();if(this.ps==sc.ha.SHOCK)this.os=ig.r.Pe(sc.kwa,a.x,a.y,this.b.g.z+12,{speed:this.rBa});else if(this.ps==sc.ha.WAVE)this.os=ig.r.Pe(sc.oja,a.x,a.y,this.b.g.z+12,{speed:this.rBa})},update:function(){if(this.EA){this.Ev=this.Ev-ig.i.ja;if(this.Ev<=0){this.os&&this.os.oh();this.os=q;this.EA--;if(this.EA)this.Ev=0.4;
else{this.ps=0;this.Ma("off")}}}var a=j[this.EA]||0;if(this.gy>a){this.gy=this.gy-ig.i.ja*(this.gy-a>3?40:7.5);if(this.gy<a)this.gy=a}else if(this.gy<a){this.gy=this.gy+ig.i.ja*40;if(this.gy>a)this.gy=a}this.parent()},nJb:function(){this.ps=this.EA=this.Ev=this.gy=0;if(this.os){this.os.oh();this.os=q}},Gh:function(){ig.Wd.prototype.Gh.call(this);if(this.gy)this.Ua[1].g.z=this.Ua[1].g.z+Math.round(this.gy)},sj:function(b){if(this.G.Xd)return y;var c=b.aj(this),d=b.Gf();if(b.tq().sa!=sc.pd.PLAYER||
b instanceof sc.j9)return y;var f=!b.Nn||b.zb&&b.zb.wi("CHARGED"),i=sc.Wb.NONE;if(d==sc.ha.WAVE||d==sc.ha.SHOCK){d==sc.ha.WAVE&&this.Ma("wave",h,q,h);d==sc.ha.SHOCK&&this.Ma("shock",h,q,h);if(d!=this.ps){this.os&&this.os.oh();this.os=q;this.ps=d;this.EA=0}if(!this.os&&this.EA<3){this.EA=Math.min(3,this.EA+1);if(this.EA>=3){this.G.sheet.va("chargeFinal"+k[d],this,{offset:{x:0,y:0,z:16}});this.Ev=5;this.swb()}else{ig.ah.gh(this.Na.Ac,this,y,{speed:1+(this.EA-1)*0.2});this.G.sheet.va("charge"+k[d],this,
{offset:{x:0,y:0,z:6+j[this.EA]}});this.Ev=0.4}}sc.Ta.Oi(this,c,i,b.Gf(),y,y,h)}else sc.Ta.Oi(this,c,sc.Wb.NONE,b.Gf(),y,y,h);if(this.os){c=b.qu(this,a);if(f){this.G.sheet.va("shoot"+k[this.ps],this,{offset:{x:0,y:0,z:16}});this.os.XLb(c,b.te(),this.a1a);this.os=q;this.Ev=this.EA=0;this.Ma("off",h,q,h)}else this.os.wT(c)}return h},x5:N(h),uca:function(a,b,c){this.lc(ig.Pa.BOTTOM,a);a.z=a.z+12;this.os&&Vec3.assign(c,this.os.b.size);return 1},GG:function(a,b,c){return!this.os||!c?h:y}});var l={};sc.j9=
ig.Wd.extend({element:q,Sf:Vec2.create(),$Ia:Vec2.create(),KZ:0,Sv:0,Fba:[],Eba:0,Dba:[],W2a:0,nn:1,G:{sheet:new ig.ud("puzzle.compressor"),jO:q,I8:q},f:function(a,b,c,d){this.parent(a,b,c,d);this.W2a=++m;this.b.type=ig.ca.PROJECTILE;this.b.F(16,16,16);this.b.g.x=this.b.g.x-this.b.size.x/2;this.b.g.y=this.b.g.y-this.b.size.y/2;this.b.Fd=0;this.b.ht=0;this.b.Ze.Am=0;this.b.Ze.vg=0;this.b.Vm=1;Vec2.assign(this.Sf,this.b.g);this.nn=d.speed||1},Ge:function(a){this.parent(a);this.vf&&ig.le.Os(this.vf,
"NORMAL",KEY_SPLINES.EASE_IN_OUT);this.Fba.length=0},wT:function(a){Vec2.assign(this.$Ia,a);Vec2.length(this.$Ia,8);this.KZ=0.1},XLb:function(a,b,c){this.b.V.x=a.x;this.b.V.y=a.y;Vec2.length(this.b.V,400);this.Ya.Qb=Vec3.Wm(this.b.V);this.pb=b;this.G.I8=this.G.sheet.va("trail"+k[this.element],this,{duration:-1,offset:{x:0,y:0,z:4}});this.Sv=10;this.zb=new sc.mL(b.W,{element:this.element,hints:["COMPRESSED"]});if(c){this.vf=new ig.sf.gq(new ig.sf.PV([this,ig.r.cb],h),0,0);ig.le.wx(this.vf,"FAST",KEY_SPLINES.EASE_IN_OUT)}},
oh:function(){this.ze()},update:function(){this.Eba=this.Eba+ig.i.ja;if(this.Dba.length>0&&this.Dba[0]<=this.Eba){this.Fba.shift();this.Dba.shift()}if(this.KZ){this.KZ=this.KZ-ig.i.ja;if(this.KZ<=0){this.b.l(this.Sf.x,this.Sf.y,this.b.g.z);this.KZ=0}else{var b=KEY_SPLINES.EASE_OUT.get(1-this.KZ/0.1),b=Math.sin(b*Math.PI);Vec2.assign(a,this.Sf);Vec2.Tm(a,this.$Ia,b);this.b.l(a.x,a.y,this.b.g.z)}}if(this.Sv){this.Sv=this.Sv-ig.i.ja;this.Sv<=0&&this.ze()}m>=this.W2a+4&&this.ze();this.parent()},oq:function(a){if(this.zb&&
(a.me||a.sj)&&this.Fba.indexOf(a)==-1)if(a.me&&a.sa!=this.pb.sa){if(a.me(this,this.zb)){this.Fba.push(a);this.Dba.push(this.Eba+0.5);(a.b.type==ig.ca.BLOCK||a.b.type==ig.ca.FENCE)&&this.oh()}}else if(a.sj&&a.sj(this)){this.n7a&&this.n7a(a);a instanceof ig.wa.WaveTeleport&&this.oh();if(!this.Ve){this.Fba.push(a);this.Dba.push(this.Eba+0.5)}}},vJa:N(y),aj:function(a,b){return this.zY(a,b)},qu:function(a,b){var c=b||{};Vec2.assign(c,this.b.V);return c},Gf:M("element"),tq:M("pb"),te:function(){return this.pb.te()},
cda:M("zb"),sj:function(a){if(!this.zb)return y;if(a.zb&&a.zb.wi("ANTI_COMPRESSOR")){var b="suck"+(this.element==sc.ha.SHOCK?"Shock":"Wave"),c=this.lc(ig.Pa.CENTER);this.G.sheet.va(b,a.tq(),{target2Point:c});this.oh();return h}return y}});sc.oja=sc.j9.extend({t:new ig.u({Dd:y,attributes:{}}),lga:y,ysa:0,LHb:y,Iva:0,bN:{n:0,dir:Vec2.create()},f:function(a,b,c,d){this.parent(a,b,c,d);this.element=sc.ha.WAVE;this.G.jO=this.G.sheet.va("ballWave",this,{duration:-1,offset:{x:0,y:0,z:4}})},update:function(){var b=
this.tb(a);(b.x<=0||b.x>=ig.r.size.x||b.y<=0||b.y>=ig.r.size.y)&&this.oh();if(this.bN.n){this.bN.n=this.bN.n-ig.i.ja;if(this.bN.n<=0){this.bN.n=0;Vec2.assign(this.b.V,this.bN.dir);Vec2.length(this.b.V,200*this.nn)}}if(this.lga&&!this.bN.n){this.Iva=this.Iva+ig.i.ja;if(this.Iva>1.5)this.oh();else if(this.ysa>4){if(!ig.r.sea(b.x-8,b.y-8,this.b.g.z,16,16,this.b.size.z,h)){this.LHb=this.lga=y;this.G.jO.stop();this.G.jO=this.G.sheet.va("ballWave",this,{duration:-1,offset:{x:0,y:0,z:4}});this.G.I8=this.G.sheet.va("trailWave",
this,{duration:-1,offset:{x:0,y:0,z:4}});var b=this.b,c=this.tb(a);c.x=c.x-b.V.x*this.b.size.x/2.05;c.y=c.y-b.V.y*this.b.size.y/2.05;this.G.sheet.Cg("waveWallLeave",c.x,c.y,this.b.g.z,q,{angle:Math.PI+Vec2.Wm(b.V)});Vec2.length(this.b.V,400);this.b.vl(ig.ca.PROJECTILE);this.Ya.Qb=Vec3.Wm(this.b.V)}}else this.ysa=this.ysa+ig.i.ja*200}else this.Iva=0;this.parent()},n7a:function(b){if(b instanceof ig.wa.RegenDestruct){b=this.tb(a);b=new sc.vw(this.pb,{attack:{type:"MEDIUM",element:"WAVE",damageFactor:0,
spFactor:0,hints:["COMPRESSED"]},pos:Vec3.vc(b.x,b.y,this.b.g.z),radius:32,zHeight:4,duration:0.1,expandRadius:0,alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(b)}},oq:function(d,f){var i=this.b.Nc;if(i&&i.KA&&!this.lga&&this.kDb(d)){var j=ig.qd.Wk(d.b,this.b,a),k=Vec2.assign(b,i.Cm);Vec2.Bk(k,Vec2.ug(j,i.Cm));i=d.tb(c);Vec2.add(i,k);Vec2.o0(i,this.b.size.x/2,this.b.size.y/2);this.b.l(i.x,i.y);this.b.Nc.V7=y}this.parent(d,f)},kDb:function(a){return a instanceof ig.wa.RotateBlocker||a instanceof
ig.wa.OneTimeSwitch&&a.Hx=="waveSwitch"?h:y},oS:function(b){if(!this.Ve&&!this.lga&&b.KA){var c=ig.r.Ie.Il(l),d=this.b,f=Vec2.assign(a,d.V);Vec2.length(f,this.b.size.x+ig.i.ja*2);b=ig.r.trace(c,d.g.x+d.size.x/2-1,d.g.y+d.size.y/2-1,d.g.z,f.x,f.y,2,2,d.size.z,ig.ca.PROJECTILE)?c.dir:b.Cm;Vec2.assign(this.bN.dir,b);Vec2.Oa(d.V,0,0);this.bN.n=0.2;d=this.tb(a);d.x=d.x+b.x*this.b.size.x/2.05;d.y=d.y+b.y*this.b.size.y/2.05;this.G.sheet.Cg("waveWallOrth",d.x,d.y,this.b.g.z,q,{angle:Math.PI+Vec2.Wm(b)});
this.Ya.Qb=Vec3.Wm(this.b.V);this.b.vl(ig.ca.TRIGGER);this.lga=h;this.ysa=0;this.G.jO.stop();if(this.G.I8){this.G.I8.stop();this.G.I8=q}this.G.jO=this.G.sheet.va("ballWaveAlt",this,{duration:-1,offset:{x:0,y:0,z:4}})}}});var m=0;sc.kwa=sc.j9.extend({t:new ig.u({Dd:y,attributes:{}}),tz:Vec2.create(),d3:0,gP:0,web:0,f:function(a,b,c,d){this.parent(a,b,c,d);this.element=sc.ha.SHOCK;this.G.jO=this.G.sheet.va("ballShock",this,{duration:-1,offset:{x:0,y:0,z:4}})},update:function(){if(this.gP){this.gP=this.gP-
ig.i.ja;if(this.gP<0)this.gP=0}if(!Vec2.Ig(this.tz)){var i=Vec2.assign(a,this.b.V);Vec2.Bk(i,ig.i.ja);if(this.d3>0){this.d3=this.d3-Vec2.length(i);if(this.d3<=0)this.d3=0}else{var j=ig.r.Ie.Il(l);if(!ig.r.Uq(j,this,i.x,i.y,0,0,0,ig.ca.PROJECTILE,q,q)){var k=q,j=ig.r.Ie.Il(l),m=[],r=ig.r.Uq(j,this,this.tz.x*4,this.tz.y*4,i.x,i.y,0,ig.ca.PROJECTILE,m,q);if(r&&!Vec2.u4(j.dir,this.tz)&&Vec2.ug(this.b.V,j.dir)<0){Vec2.Tm(i,this.tz,4*j.Ne);Vec2.Tm(i,j.dir,-1);k=j.dir}else if(!r){var u=Vec2.assign(b,i);
Vec2.Bk(u,-3);Vec2.Tm(i,this.tz,4);j=ig.r.Ie.Il(l);if(r=ig.r.Uq(j,this,u.x,u.y,i.x,i.y,0,ig.ca.PROJECTILE,q,q)){Vec2.Tm(i,u,j.Ne);Vec2.Tm(i,j.dir,-1);k=j.dir}else this.NZa()}if(!k&&r)for(j=m.length;j--;)m[j].Q.Vma?Vec2.length(this.b.V,200*m[j].Q.Vma*this.nn):Vec2.length(this.b.V,200*this.nn);if(k){if(!this.gP){this.G.sheet.va("shockWallTurn",this);this.gP=0.1}m=Vec2.assign(d,k);Vec2.hz(m);Vec2.ug(m,this.tz)>0&&Vec2.Lc(m);j=Vec2.assign(b,0,0);Vec2.Tm(j,this.b.V,-0.5);r=Vec2.Tm(i,m,128,f);Line2.AN(j,
this.b.V,i,r,c)&&this.b.l(this.b.g.x+c.x,this.b.g.y+c.y);Vec2.Lc(m);Vec2.assign(this.tz,k);Vec2.assign(this.b.V,m);Vec2.length(this.b.V,200*this.nn);this.Ya.Qb=Vec3.Wm(this.b.V);this.d3=2}}}}this.parent()},oS:function(b){if(b.KA){if(Vec2.Ig(this.tz)){this.G.sheet.va("shockWallConnect",this);this.Sv=this.Sv/(0.5*this.nn)}else if(!this.gP){this.G.sheet.va("shockWallTurn",this);this.gP=0.1}Vec2.assign(a,b.Cm);Vec2.Lc(a);Vec2.length(a,1);this.b.l(this.b.g.x+a.x,this.b.g.y+a.y);this.b.Nc.V7=y;Vec2.hz(a);
(Vec2.Ig(this.tz)?Vec2.ug(a,this.b.V):-Vec2.ug(a,this.tz))<0&&Vec2.Lc(a);Vec2.assign(this.tz,b.Cm);Vec2.assign(this.b.V,a);Vec2.length(this.b.V,200*this.nn);this.Ya.Qb=Vec3.Wm(this.b.V)}},NZa:function(){if(!Vec2.Ig(this.tz)){Vec3.Oa(this.tz,0,0);Vec2.length(this.b.V,400);this.Sv=this.Sv*0.5*this.nn}},Mab:function(b,c){this.NZa();var d=ig.qd.Toa(i,this.b,b.b);this.l(d.x,d.y,d.z);Vec2.assign(a,c);Vec2.length(a,400);Vec2.length(this.b.V,4);Vec2.add(a,this.b.V);Vec2.assign(this.b.V,a);Vec2.length(this.b.V,
400);this.web++}});ig.wa.AntiCompressor=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Anti Compressor to spawn",xc:h,I:h}}}),G:{sheet:new ig.ud("puzzle.compressor")},f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.TRIGGER;this.b.F(16,16,24);this.b.Fd=1E3;(a=ig.Rf.get("anticompressor"))&&this.Bd({sheet:{src:a.sheet,width:16,height:16,xCount:1,offX:a.x,offY:a.y},SUB:[{size:{x:16,y:16,z:0},SUB:[{name:"idle",time:1,frames:[0],repeat:y},{name:"suck",time:1,
frames:[0],repeat:y}]},{shapeType:"Y_FLAT",renderMode:"lighter",SUB:[{name:"idle",time:0.05,frames:[1,1,1,1,1,1,1,1,1,1,1,1],framesGfxOffset:[0,0,0,0,0,-6,0,-5,0,-4,0,-3,0,-2,0,-1,0,0,0,0,0,0,0,0],framesAlpha:[0,0,0.2,0.4,0.6,0.8,1,1,0.8,0.6,0.4,0.2],repeat:h}]}]});this.Ma("idle")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",this,{})}},po:function(){ig.r.G.Mf.va("hideFast",this,{callback:this})},Aj:function(a){a.ek()&&this.hide()},sj:function(a){if(a instanceof sc.j9){var b=
"suck"+(a.element==sc.ha.SHOCK?"Shock":"Wave"),c=a.lc(ig.Pa.CENTER);this.G.sheet.va(b,this,{target2Point:c});a.oh();return h}return y}});ig.wa.CompressorBouncer=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Bouncer to spawn",xc:h,I:h},dir:{c:"Face",d:"Direction to face",U:ig.Jc.Lk},fb:{c:"VarCondition",d:"Condition for bouncer to be active",xc:h}}}),G:{sheet:new ig.ud("puzzle.compressor")},face:Vec2.create(),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.TRIGGER;
this.b.F(8,8,24);this.b.Fd=1E3;this.fb=new ig.de(d.condition);this.dir=ig.Jc.Lk[d.dir]||ig.Jc.Lk.NORTH;ig.Jc.uq(this.dir,this.face);(a=ig.Rf.get("bouncer"))&&this.Bd({DOCTYPE:"MULTI_DIR_ANIMATION",sheet:{src:a.sheet,width:16,height:32,offX:a.x,offY:a.y,xCount:4},dirs:4,flipX:[0,0,0,1],tileOffsets:[0,4,8,4],size:{x:16,y:0,z:32},wallY:0,offset:{y:4},SUB:[{name:"off",time:0.1,frames:[0],repeat:y,wallY:1,offset:{y:-4},size:{x:16,y:16,z:0}},{name:"turnOn",time:0.05,frames:[1,2],repeat:y},{name:"on",time:0.05,
frames:[3],repeat:y},{name:"turnOff",time:0.05,frames:[2,1],repeat:y}]});this.qc=this.fb.evaluate();this.Ma(this.qc?"on":"off")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",this,{})}},po:function(){ig.r.G.Mf.va("hideFast",this,{callback:this})},Aj:function(a){a.ek()&&this.hide()},sj:function(a){if(!this.qc)return y;if(a.Mab){a.Mab(this,this.face);return h}return y},ag:function(){var a=this.fb.evaluate();if(a!=this.qc)(this.qc=a)?this.Ma("turnOn",h,"on",h):this.Ma("turnOff",
h,"off",h)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.water-block").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a={SQUARE:{shape:ig.Tf.RECTANGLE,bi:128,Pd:y,Hh:0},CORNER_NE:{shape:ig.Tf.SLOPE_NE,bi:64,Pd:y,Hh:0},CORNER_SE:{shape:ig.Tf.SLOPE_SE,bi:0,Pd:y,Hh:1},CORNER_SW:{shape:ig.Tf.SLOPE_SW,bi:0,Pd:h,Hh:1},CORNER_NW:{shape:ig.Tf.SLOPE_NW,bi:64,Pd:h,Hh:0}},b=Vec2.create();ig.wa.WaterBlock=ig.Wd.extend({Kl:0,iy:0,state:1,vba:0,n:0,Vma:0.5,G:{sheet:new ig.ud("puzzle.water-bubble"),handle:q,
xq:q},t:new ig.u({Dd:h,attributes:{iy:{c:"String",d:"Type of block",U:a},vba:{c:"Number",d:"Number of seconds for steam or ice state to persist",ab:5}}}),f:function(b,d,f,i){this.parent(b,d,f,i);this.b.type=ig.ca.BLOCK;this.b.F(32,32,32);this.iy=a[i.blockType]||a.SQUARE;this.b.shape=this.iy.shape;this.vba=i.changeDuration||5;this.Kg=ig.navigation.eS(this,ig.HL.S9);(b=ig.Rf.get("waterblock"))&&this.Bd({namedSheets:{block:{src:b.sheet,width:32,height:64,xCount:4,offX:b.x,offY:b.y+this.iy.bi},puddle:{src:b.sheet,
width:32,height:32,xCount:1,offX:b.Ysa,offY:b.Zsa}},sheet:"block",flipX:this.iy.Pd,wallY:this.iy.Hh,pivot:{x:16,y:52},size:{x:32,y:32,z:32},SUB:[{name:"water",time:0.2,frames:[0,1,2],repeat:h,framesAlpha:[0.7,0.7,0.7]},{name:"frozen",time:0.2,frames:[3],repeat:h},{name:"melting",time:0.2,frames:[0,1,2],repeat:h},{name:"melting",time:0.2,frames:[3],repeat:h,aboveZ:1},{sheet:"puddle",size:{x:32,y:32,z:0},pivot:{x:16,y:16},wallY:1,time:1,frames:[0],repeat:y,SUB:[{name:"puddle"},{name:"regen"}]},{name:"regen",
time:1,frames:[0],repeat:y}]});this.Pb=ig.hd.WATER;this.Ma("water")},Ge:function(a){this.parent(a);this.Kg&&this.Kg.remove();this.Kg=q},yg:function(a,b){if(this.state!=3){this.b.size.z=0;this.state=3;this.Pb=0;this.G.sheet.va("blockSteam",this,{align:"CENTER"});var f=this.lc(ig.Pa.BOTTOM,Vec3.create());if(b){f=new sc.vw(b,{attack:{type:"MASSIVE",element:"HEAT",damageFactor:2,spFactor:0,hints:["STEAM"]},pos:f,radius:8,zHeight:24,duration:0.1,expandRadius:32,alwaysFull:h,party:"OTHER",centralAngle:1});
sc.Ta.js(f)}this.n=this.vba;this.Kg.update(ig.HL.qxa);this.G.handle=this.G.sheet.va("blockRecharge",this,{align:"CENTER",duration:-1});this.Ma("puddle")}},isFrozen:function(){return this.state==2},uia:function(){if(this.state!=2){this.Kg.update(ig.HL.XV);this.state=2;this.Ma("frozen");this.Pb=ig.hd.ICE;this.G.sheet.va("blockFreeze",this,{});this.n=this.vba}},B6a:function(){this.state=1;this.Kg.update(ig.HL.S9);this.Ma("melting");this.G.sheet.va("blockMelt",this,{spriteFilter:[1],callback:this});this.Pb=
ig.hd.WATER;this.n=0},Aj:function(a){if(a.state==ig.ev.mC)a==this.G.xq?this.G.xq=q:this.rk=="melting"&&this.Ma("water")},zIb:function(){this.b.vl(ig.ca.BLOCK);this.state=1;this.b.size.z=32;this.Kg.update(ig.HL.S9);this.Pb=ig.hd.WATER;this.Ma("water");this.G.handle&&this.G.handle.stop();this.G.handle=q;this.G.sheet.va("blockAppear",this,{align:"CENTER"})},i3:function(){this.G.xq&&this.G.xq.stop();this.G.xq=this.G.sheet.va("blockHit",this,{callback:this})},oq:function(a,d){if(this.state==1&&d&&!Vec2.Ig(d)){a instanceof
sc.Rja&&this.uia();if(a instanceof ig.wa.Combatant){this.i3();Vec2.assign(b,d);Vec2.Lc(b);sc.Ta.Oi(a,a.lc(ig.Pa.CENTER),sc.Wb.LIGHT,sc.ha.NEUTRAL,y,y,h);a.Ei();var f=a.UX(b,a.su()?"LIGHT":"MEDIUM",y,y);a.b.V.z=100;a.vj=Math.max(a.vj,f)}}},Ifa:function(a){if(a instanceof sc.Rja&&this.state==1){this.uia();a.Zda()}},sj:function(a){if(this.state==3)return y;var d=a.aj(this),f=a.qu(this,b);if(a.zb&&a.zb.wi("STEAM"))return y;var i=a.Gf();if(this.state==2&&i!=sc.ha.HEAT)return y;i==sc.ha.HEAT?this.state==
2?this.B6a():this.yg(f,a.te()):i==sc.ha.COLD?this.uia(f):this.i3();f=sc.Wb.LIGHT;if(!a.Nn||a.zb.wi("CHARGED"))f=sc.Wb.MEDIUM;sc.Ta.Oi(this,d,f,a.Gf(),y,y,h);return h},update:function(){if(this.n>0){this.n=this.n-ig.i.ja;if(this.n<=0){this.n=0;this.state==2?this.B6a():this.zIb()}}if(this.state==3){var a=1-this.n/this.vba;this.Ya.Xa=a;this.Ya.Va=a}else{this.Ya.Xa=1;this.Ya.Va=1}this.parent()}})});ig.J=h;
ig.N("game.feature.puzzle.entities.ice-disk").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create(),b=Vec3.create();sc.Rja=ig.Wd.extend({n:0,pb:q,state:1,G:{sheet:new ig.ud("puzzle.water-bubble"),handle:q,xq:q},vf:q,f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1;this.b.kj=0;this.b.Vm=1;this.b.F(16,16,16);this.b.K7(4,4);this.b.Ze.Am=0.2;this.b.Cd.size=24;this.b.l(a-this.b.size.x/2,b-this.b.size.y/2,f);this.kU=5;this.b.di=2E5;this.Bd({shapeType:"Y_FLAT",
offset:{x:0,y:0,z:0},sheet:{src:"media/entity/objects/object-effects.png",width:24,height:24,xCount:1,offX:224,offY:16},SUB:[{name:"idle",time:0.1,frames:[0],repeat:h}]});this.Ma("idle");this.Mi=i.panel||q;this.z3=i.coalCoolTime;this.n=8;this.Ya.alpha=0;this.b.V.z=150;this.G.sheet.va("iceAppear",this,{})},xMb:function(a,b){if(!this.Ve&&this.state!=2){this.state=2;var f=this.b;f.Ch=400;f.Ze.vg=0;f.Ze.Am=0;f.Cra=h;f.di=9001;Vec2.assign(f.V,a);Vec2.round(f.V,Math.PI*0.03);Vec2.length(f.V,400);this.n=
1.5;this.zb=new sc.mL(b.W,{element:sc.ha.COLD,hints:["ICE_DISK"]});if(!this.pb)this.pb=b;this.G.handle&&this.G.handle.stop();this.b.vl(ig.ca.IGNORE);this.G.sheet.va("iceTrail",this,{duration:-1,angle:Vec2.Wm(a),offset:{z:6}})}},d_a:function(a){this.state=3;Vec2.Oa(this.b.V,0,0);ig.bt.Pw(this);this.G.sheet.va("iceAbsorb",this,{callback:this,align:"CENTER"});this.vf&&ig.le.Os(this.vf,"SLOW",KEY_SPLINES.EASE_IN_OUT);a&&this.l(a.x-this.b.size.x/2,a.y-this.b.size.y/2,a.z)},Ge:function(a){a||this.Mi&&this.Mi.v6();
this.parent(a)},Bua:function(){if(!this.Ve){Vec2.Oa(this.b.V,0,0);this.state=3;this.G.sheet.va("iceMelt",this,{callback:this,align:"CENTER"})}},Aj:function(a){this.Ve||a.state==ig.ev.mC&&this.ze()},oS:function(a){if(!this.Ve){if(a.KA){var b=this.tb();b.x=b.x+a.Cm.x*this.b.size.x/2.05;b.y=b.y+a.Cm.y*this.b.size.y/2.05;if(!this.kU){this.Zda();return}this.kU--;this.G.sheet.Cg("iceBounce",b.x,b.y,this.b.g.z,q,{angle:Vec2.Wm(a.Cm)})}this.parent(a)}},Zda:function(){if(!this.Ve){this.vf&&ig.le.Os(this.vf,
"SLOW",KEY_SPLINES.EASE_IN_OUT);var a=this.lc(ig.Pa.BOTTOM,Vec3.create());this.G.sheet.Cg("iceBreak",a.x,a.y,a.z,q,{});this.ze()}},aOb:function(){if(!this.Ve){this.vf&&ig.le.Os(this.vf,"SLOW",KEY_SPLINES.EASE_IN_OUT);var a=this.lc(ig.Pa.BOTTOM,Vec3.create());ig.r.Pe(sc.bgb,a.x,a.y,this.b.g.z,{panel:this.Mi,coalCoolTime:this.z3});this.Mi=q;this.ze()}},update:function(){if(this.n){this.n=this.n-ig.i.ja;if(this.state==1&&this.b.di!=-1&&this.b.g.z==this.b.pc)this.b.di=-1;if(this.n<=0){this.n=0;this.state==
1?this.Bua():this.Zda()}}this.b.g.z<ig.r.Xy&&this.Zda();this.b.g.z==this.b.pc&&ig.Pb.pN(this.b,h)==ig.hd.COAL&&this.aOb();this.parent()},sj:function(b){var d=b.Gf();if(this.state==3||d!=sc.ha.HEAT&&this.state!=1)return y;var f=b.aj(this),i=b.qu(this,a);sc.Ta.Oi(this,f,sc.Wb.MEDIUM,b.Gf(),y,y,h);d==sc.ha.HEAT?this.Bua():this.xMb(i,b.te());return h},hH:function(a){if(this.b.g.z>=-1&&!this.b.rm){var d=this.lc(ig.Pa.BOTTOM,b);a<-30&&this.G.sheet.Cg("iceLand",d.x,d.y,d.z,q,{})}},oq:function(a){this.state==
2&&(a.me&&a.sa!=this.pb.sa?a.me(this,this.zb)&&this.Zda():a instanceof ig.wa.RegenDestruct&&a.sj(this)&&this.d_a(a.lc(ig.Pa.BOTTOM)))},x5:N(h),uca:function(a,b,f){this.tb(a);a.z=this.b.g.z;Vec3.assign(f,this.b.size);return 3},GG:function(a,b,f){return!f||sc.q.T.sg==sc.ha.HEAT?h:y},aj:function(a,b){return this.zY(a,b)},qu:function(a,b){var f=b||{};Vec2.assign(f,this.b.V);return f},Gf:function(){return sc.ha.COLD},tq:M("pb"),te:function(){return this.pb.te()},cda:M("zb")});sc.bgb=ig.Wd.extend({n:0,
G:{sheet:new ig.ud("puzzle.water-bubble")},f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.BLOCK;this.Pb=ig.hd.STONE;this.b.Fd=1;this.b.F(28,28,2);this.b.l(a-this.b.size.x/2,b-this.b.size.y/2,f);a=ig.Rf.get("coals");this.Bd({shapeType:"Y_FLAT",offset:{x:0,y:2,z:0},size:{x:32,y:32,z:0},sheet:{src:a.sheet,width:32,height:32,xCount:1,offX:a.x,offY:a.y},SUB:[{name:"idle",time:0.1,frames:[0],repeat:h}]});this.Ma("idle");this.Mi=i.panel||q;this.n=i.coalCoolTime||5;this.G.sheet.va("coalsAppear",
this,{})},Ge:function(a){a||this.Mi&&this.Mi.v6();this.parent(a)},Bua:function(){this.Ve||this.G.sheet.va("coalsDisappear",this,{callback:this,align:"CENTER"})},Aj:function(a){this.Ve||a.state==ig.ev.mC&&this.ze()},update:function(){if(this.n){this.n=this.n-ig.i.ja;if(this.n<=0){this.n=0;this.Bua()}}this.parent()}})});ig.J=h;
ig.N("game.feature.puzzle.entities.key-panel").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.combat.entities.ball","game.feature.menu.map-model").K(function(){var a={REGULAR:{item:sc.JE.DUNGEON_KEY,Mi:{size:{x:16,y:16,z:1},f8:{x:48,y:88,Vc:24,sd:24}},fx:{Aa:"active",pX:"chargeActive"},KYa:new sc.$va({animation:{name:"default",sheet:{src:"media/entity/balls/default.png",width:24,height:24,offY:120,offX:24},time:0.05,repeat:h,frames:[0,1,2,3]},effects:"ball-special",maxBounce:3,
timer:1.5,effectKeys:{bounce:"keyBounce",wall:"keyWall",air:"keyAir",trail:"keyTrail"},attack:{type:"HEAVY",damageFactor:1.3,skillBonus:"RANGED_DMG",hints:["CHARGED","DUNGEON_KEY"]},speed:400,trail:h})},MASTER:{item:sc.JE.DUNGEON_MASTER_KEY,Mi:{size:{x:24,y:24,z:1},f8:{x:48,y:112,Vc:32,sd:32}},fx:{Aa:"activeMaster",pX:"chargeActiveMaster"},KYa:new sc.$va({animation:{name:"default",sheet:{src:"media/entity/balls/default.png",width:24,height:24,offY:144,offX:24},time:0.05,repeat:h,frames:[0,1,2,3]},
effects:"ball-special",maxBounce:3,timer:1.5,effectKeys:{bounce:"keyBounceMaster",wall:"keyWallMaster",air:"keyAirMaster",trail:"keyTrailMaster"},attack:{type:"HEAVY",damageFactor:1.3,skillBonus:"RANGED_DMG",hints:["CHARGED","DUNGEON_MASTER_KEY"]},speed:400,trail:h})}};ig.wa.KeyPanel=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},jZ:{c:"String",d:"Type of Key Panel",U:a}}}),G:{key:new ig.ud("puzzle.key"),Naa:q,gR:q},cC:q,Aa:y,jZ:q,f:function(b,
c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.BLOCK;this.b.Fd=1E3;this.jZ=a[f.keyType]||a.REGULAR;b=this.jZ.Mi;this.b.F(b.size.x,b.size.y,b.size.z);c=ig.Rf.get("puzzle2");this.Bd({sheet:{src:c.sheet,width:b.f8.Vc,height:b.f8.sd,xCount:2,offX:b.f8.x,offY:b.f8.y},shapeType:"Z_FLAT",offset:{x:0,y:(b.f8.sd-b.size.y)/2,z:0},SUB:[{name:"on",time:1,frames:[1],repeat:y},{name:"off",time:1,frames:[0],repeat:y}]});this.Ma("off")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;this.G.key.va("keyPanelAppear",
this,{})}},Eab:function(a){!a&&this.cC&&this.cC.uMa(q);this.cC=a;this.setActive(this.cC&&this.y3a());this.cC&&!this.Aa&&this.G.key.va("noKeysBlink",this)},setActive:function(a){this.Aa=a;this.Ma(this.Aa?"on":"off");if(this.Aa&&!this.G.Naa){this.cC.uMa(this.jZ.KYa);this.G.Naa=this.G.key.va(this.jZ.fx.Aa,this,{duration:-1})}if(!this.Aa&&this.G.Naa){this.cC&&this.cC.uMa(q);this.G.Naa.stop();this.G.Naa=q}if(!this.Aa&&this.G.gR){this.G.gR.stop();this.G.gR=q}},y3a:function(){return sc.map.Poa(this.jZ.item)},
update:function(){if(this.cC)if(ig.gl.rY(this.cC)!=this)this.Eab(q);else{this.setActive(this.y3a());if(this.Aa)if(!this.G.gR&&this.cC.KG())this.G.gR=this.G.key.va(this.jZ.fx.pX,this,{duration:-1});else if(this.G.gR&&!this.cC.KG()){this.G.gR.stop();this.G.gR=q}}this.parent()},oq:function(a){!this.cC&&a==ig.r.cb&&this.Eab(a)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.ball-changer").O("impact.base.actor-entity","impact.base.entity","impact.base.game","game.feature.combat.model.combat-params","impact.feature.effect.effect-sheet").K(function(){var a=Vec3.create();ig.wa.BallChanger=ig.Wd.extend({qc:y,fb:q,BM:q,e4:0,rca:q,TQ:0,rLa:y,t:new ig.u({Dd:h,attributes:{BM:{c:"BallChangerType",d:"Type of BallChanger",xc:h},fb:{c:"VarCondition",d:"Condition for BallChanger to be active"},TQ:{c:"Number",d:"How long the ball will be alive after bouncing with this block. (default=0.5)",
I:h,ab:0.5},rLa:{c:"Boolean",d:"If true, bounces are reset when this changer is hit",I:h,ab:h}},Uk:h,Sl:"rgba(255,255,0, 0.5)"}),fx:{sheet:new ig.ud("puzzle.ball-changer")},f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.IGNORE;this.b.di=-1;this.b.Fd=1E3;Vec3.Oa(this.b.size,24,24,24);this.fb=new ig.de(f.condition);this.TQ=f.ballTime||0;this.rLa=f.resetBounce||y;if(f.changerType){if(window.Ed){this.t=this.t.copy();this.t.Uk=y}a=f.changerType;this.BM=new sc.W8[a.type](a.settings);a=ig.Rf.get("puzzle2");
c=this.BM.Y;this.Bd({namedSheets:{base:{src:a.sheet,width:16,height:16,offX:144,offY:64},sphere:{src:a.sheet,width:16,height:16,offX:192,offY:64,xCount:4},icon:{src:a.sheet,width:16,height:16,offX:144,offY:80,xCount:3}},SUB:[{size:{x:16,y:16,z:0},offset:{y:-4},sheet:"base",SUB:[{name:"off",time:1,frames:[0]},{name:"on",time:1,frames:[2]},{name:"show",time:0.06,frames:[1,2]},{name:"hide",time:0.06,frames:[1,0]},{name:"used",time:0.15,frames:[1,2,1,0],repeat:h}]},{size:{x:16,y:0,z:16},offset:{z:12,
y:-5},renderMode:"lighter",sheet:"sphere",SUB:[{name:"on",time:0.15,frames:[0,1,2,3,0,1,2,3],repeat:h,tileOffset:4+this.BM.Rha*4,framesGfxOffset:[0,0,0,1,0,1,0,1,0,0,0,-1,0,-1,0,-1]},{name:"show",time:0.03,frames:[0,1,2,3]},{name:"hide",time:0.03,frames:[3,2,1,0]}]},{size:{x:16,y:0,z:16},offset:{z:13,y:-4},sheet:"icon",frames:[c,c,c,c,c,c,c,c],flipX:this.BM.Pd,flipY:this.BM.$h,framesGfxOffset:[0,0,0,1,0,1,0,1,0,0,0,-1,0,-1,0,-1],time:0.15,repeat:h,SUB:[{name:"on"}]}]});this.qc=this.fb.evaluate();
this.Ma(this.qc?"on":"off")}},update:function(){if(this.rca&&this.rca.Ve){this.qc&&this.Ma("show",h,"on",h);this.rca=q}if(this.e4>0){this.e4=this.e4-ig.i.ja;if(this.e4<=0){this.qc&&this.Ma("show",h,"on",h);this.e4=0}}this.parent()},ag:function(){var a=this.fb.evaluate();if(a!=this.qc){this.qc=a;this.fx.sheet.va("appear",this);this.Ma(this.qc?"show":"hide",h,this.qc?"on":"off",h)}},sj:function(b){if(!b.Nn||this.rca||b.zb&&b.zb.wi("NO_PUZZLE")||!this.fb.evaluate())return y;this.TQ&&b&&b.zta(this.TQ/
b.nn);this.rLa&&b&&b.I9a();if(!this.BM.Ffa(b,this))return y;this.Ma("hide",h,"used",h);if(this.BM.lZa){var c=ig.qd.Toa(a,b.b,this.b);b.b3a(c)}b.K2(this);this.BM.ueb?this.rca=b:this.e4=0.2;return y}});sc.cja=ig.Ca.extend({Y:0,Rha:0,Pd:y,$h:y,lZa:y,ueb:y,Ffa:J()});sc.W8={};sc.W8.CHANGE_DIR=sc.cja.extend({t:new ig.u({attributes:{dir:{c:"Face",d:"Direction to face",U:ig.Jc.un}}}),dir:Vec2.create(),$b:new ig.ka("media/sound/puzzle/redirect.ogg",1),f:function(a){this.lZa=h;a=ig.Jc.un[a.dir];ig.Jc.uq(a,
this.dir);switch(a){case ig.Jc.un.NORTH:this.Y=0;break;case ig.Jc.un.EAST:this.Y=1;break;case ig.Jc.un.SOUTH:this.Y=0;this.$h=h;break;case ig.Jc.un.WEST:this.Y=1;this.Pd=h;break;case ig.Jc.un.NORTH_EAST:this.Y=2;break;case ig.Jc.un.SOUTH_EAST:this.Y=2;this.$h=h;break;case ig.Jc.un.SOUTH_WEST:this.Y=2;this.Pd=this.$h=h;break;case ig.Jc.un.NORTH_WEST:this.Y=2;this.Pd=h}},Ffa:function(a){if(a.rOa<0.07)return y;ig.ah.gh(this.$b,a);a.Svb();a.pvb(this.dir);return h}});sc.W8.CHANGE_SPEED=sc.cja.extend({t:new ig.u({attributes:{yh:{c:"Number",
d:"Relative speed factor",ab:0.5}}}),yh:q,ueb:h,$b:{mNa:new ig.ka("media/sound/puzzle/speed-up.ogg",1),cNa:new ig.ka("media/sound/puzzle/slow-down.ogg",1)},f:function(a){this.yh=a.factor||0.5;this.Y=3},Ffa:function(a){this.yh>1?ig.ah.gh(this.$b.mNa,a):this.yh<1&&ig.ah.gh(this.$b.cNa,a);a.zta();a.VBa(this.yh,h);return h}});sc.W8.RESET_SPEED=sc.cja.extend({t:new ig.u({attributes:{}}),yh:q,$b:{reset:new ig.ka("media/sound/puzzle/reset.ogg",1),mNa:new ig.ka("media/sound/puzzle/speed-up.ogg",1),cNa:new ig.ka("media/sound/puzzle/slow-down.ogg",
1)},f:function(){this.Y=4},Ffa:function(a){var c=a.nn;a.vJb()&&(c>1?ig.ah.gh(this.$b.cNa,a):c<1?ig.ah.gh(this.$b.mNa,a):ig.ah.gh(this.$b.reset,a));return h}});sc.W8.CHANGE_ELEMENT=sc.cja.extend({t:new ig.u({attributes:{element:{c:"String",d:"Element to change to",U:["HEAT","COLD","SHOCK","WAVE"]}}}),element:q,G:new ig.ud("puzzle.ball-changer"),Zca:q,f:function(a){this.element=sc.ha[a.element];switch(this.element){case sc.ha.HEAT:this.Y=5;this.Rha=1;this.Zca="heatConvert";break;case sc.ha.COLD:this.Y=
6;this.Rha=2;this.Zca="coldConvert";break;case sc.ha.SHOCK:this.Y=7;this.Rha=3;this.Zca="shockConvert";break;case sc.ha.WAVE:this.Y=8;this.Rha=4;this.Zca="waveConvert"}},Ffa:function(a,c){var d=a.te();if(d.Ah)if(d=sc.VV.U1a(d,this.element,a.zb.wi("CHARGED"))){this.G.va(this.Zca,c,{align:ig.Pa.BOTTOM,offset:{z:12}});a.w$a(d.data,h)}return h}})});ig.J=h;
ig.N("game.feature.puzzle.entities.walls").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.rUa={BLOCK:0,PBLOCK:1,NPBLOCK:2};sc.d2={CONTINUE:0,STOP:1};sc.uC={CONTINUE:0,STOP:1,CORNER_LEFT:2,CORNER_RIGHT:3};ig.wa.WallBase=ig.Kc.extend({fb:q,Aa:y,bPa:0,Pia:0,Hva:[],SB:y,vT:y,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.size.z=1;if(!f.size){this.b.size.x=8;this.b.size.y=8}this.vT=f.noNavMapBlock||y;this.b.type=ig.ca.BLOCK;this.b.time.Im=h;this.bPa=f.collType||"BLOCK";this.Pia=
f.wallZHeight||32;this.fb=new ig.de(f.condition);this.SB=f.skipRender||y;this.Aa=this.fb.evaluate()},Ge:function(a){this.parent(a)},SOa:function(a){for(var c=0;c<this.Hva.length;++c)this.Hva[c].setActive(this.Aa,a)},ag:function(){var a=this.fb.evaluate();if(this.Aa!=a){this.Aa=a;this.SOa()}}});var a={};ig.wa.WallHorizontal=ig.wa.WallBase.extend({s:q,Hu:q,Q5:0,Xga:0,t:new ig.u({Dd:h,Kq:h,attributes:{SB:{c:"Boolean",d:"True if the wall should be invisible",ab:y},Q5:{c:"String",d:"Left End Type",U:sc.d2},
Xga:{c:"String",d:"Right End Type",U:sc.d2},fb:{c:"VarCondition",d:"Condition for wall to be active",xc:h},Jj:{c:"String",d:"Collision Types of Wall. BLOCK - Blocks all, PBLOCK - Blocks only projectiles, NPBLOCK - Blocks only non projectiles",U:sc.rUa},Pia:{c:"Number",d:"Total height of the wall, when active",ab:32},vT:{c:"Boolean",d:"If true: do not block nav map"}}}),f:function(a,c,d,f){this.parent(a,c,d,f);a=ig.Rf.get("puzzle");this.s=new ig.ia(a.sheet);this.Hu=new ig.Xz(a.sheet,ig.nf.Eg.Yn,8,
16,176,64,1,1);this.Q5=sc.d2[f.leftEnd]||sc.d2.CONTINUE;this.Xga=sc.d2[f.rightEnd]||sc.d2.CONTINUE},show:function(a){this.parent(a);this.Hva.push(ig.r.Pe("WallBlocker",this.b.g.x,this.b.g.y,this.b.g.z+this.b.size.z,{size:{x:this.b.size.x-0-0,y:8,z:this.Pia},collType:this.bPa,skipRender:this.SB,noNavMapBlock:this.vT}));this.SOa(h)},Np:function(){this.ul(1+(this.Q5?1:0)+(this.Xga?1:0))},update:function(){this.parent()},Gh:function(){if(!this.SB){var b=this.b,c=this.Q5?8:0,d=b.size.x-(this.Q5?8:0)-(this.Xga?
8:0),f=0;if(d>0){this.Ua[f].l(b.g.x+c,b.g.y,b.g.z);this.Ua[f].F(d,b.size.y,b.size.z,b.size.y);this.Ua[f].Bj(this.Hu.Iy(0),0,0);f++}if(this.Q5){this.Ua[f].l(b.g.x,b.g.y,b.g.z);this.Ua[f].F(8,b.size.y,b.size.z,b.size.y);var i=this.s.Ly(a,2,8,16,176,64);this.Ua[f].Bj(this.s,i.x,i.y);f++}if(this.Xga){this.Ua[f].l(b.g.x+d+c,b.g.y,b.g.z);this.Ua[f].F(8,b.size.y,b.size.z,b.size.y);i=this.s.Ly(a,3,8,16,176,64);this.Ua[f].Bj(this.s,i.x,i.y)}}}});ig.wa.WallVertical=ig.wa.WallBase.extend({s:q,Hu:q,F0:0,g3:0,
t:new ig.u({Dd:h,Lq:h,attributes:{SB:{c:"Boolean",d:"True if the wall should be invisible",ab:y},F0:{c:"String",d:"Top End Type",U:sc.uC},g3:{c:"String",d:"Bottom End Type",U:sc.uC},fb:{c:"VarCondition",d:"Condition for wall to be active",xc:h},Jj:{c:"String",d:"Collision Types of Wall. BLOCK - Blocks all, PBLOCK - Blocks only projectiles, NPBLOCK - Blocks only non projectiles",U:sc.rUa},Pia:{c:"Number",d:"Total height of the wall, when active",ab:32},vT:{c:"Boolean",d:"If true: do not block nav map"}}}),
f:function(a,c,d,f){this.parent(a,c,d,f);a=ig.Rf.get("puzzle");this.s=new ig.ia(a.sheet);this.Hu=new ig.Xz(a.sheet,ig.nf.Eg.OL,8,16,184,64,1,1);this.F0=sc.uC[f.topEnd]||sc.uC.CONTINUE;this.g3=sc.uC[f.bottomEnd]||sc.uC.CONTINUE},show:function(a){this.parent(a);this.Hva.push(ig.r.Pe("WallBlocker",this.b.g.x+0,this.b.g.y+0,this.b.g.z+this.b.size.z,{size:{x:8,y:this.b.size.y-0-0,z:this.Pia},collType:this.bPa,skipRender:this.SB,noNavMapBlock:this.vT}));this.SOa(h)},Np:function(){this.ul(1+(this.F0?1:0)+
(this.g3?1:0))},update:function(){this.parent()},Gh:function(){if(!this.SB){var b=this.b,c=this.F0?9:1,d=b.size.y-(this.F0?8:0)-(this.g3?8:0),f=0;if(d>0){this.Ua[f].l(b.g.x,b.g.y+c,b.g.z);this.Ua[f].F(b.size.x,d,b.size.z,0);this.Ua[f].Bj(this.Hu.Iy(0),0,0);f++}if(this.F0){var i=0;switch(this.F0){case sc.uC.STOP:i=i+5;break;case sc.uC.CORNER_LEFT:i=i+4;break;case sc.uC.CORNER_RIGHT:i=i+6}i=this.s.Ly(a,i,8,16,176,64);this.Ua[f].l(b.g.x,b.g.y,b.g.z);this.Ua[f].F(b.size.x,8,b.size.z,8);this.Ua[f].Bj(this.s,
i.x,i.y);f++}if(this.g3){i=0;switch(this.g3){case sc.uC.STOP:i=i+8;break;case sc.uC.CORNER_LEFT:i=i+7;break;case sc.uC.CORNER_RIGHT:i=i+9}i=this.s.Ly(a,i,8,16,176,64);this.Ua[f].l(b.g.x,b.g.y+d+c,b.g.z);this.Ua[f].F(b.size.x,8,b.size.z,8);this.Ua[f].Bj(this.s,i.x,i.y)}}}});ig.wa.WallBlocker=ig.Kc.extend({maxHeight:0,lR:q,n:0,fxa:0.3,Gwa:0.1,SB:y,Kg:q,vT:y,yDa:q,t:new ig.u({Dd:y,attributes:{Jj:{c:"String",d:"Top End Type",U:ig.ca}}}),f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.BLOCK;
this.b.time.Im=h;this.vT=f.noNavMapBlock;if(!ig.i.Z5a)this.Na={JBb:new ig.ka("media/sound/puzzle/barrier-up.ogg",0.9,y),IBb:new ig.ka("media/sound/puzzle/barrier-down.ogg",0.9,y)};this.SB=f.skipRender||y;this.b.type=ig.ca[f.collType];a=ig.Rf.get("walls").nt;d=c="#fff";switch(f.collType){case "BLOCK":d=a.ima;c=a.kma;this.b.type=ig.ca.FENCE;break;case "PBLOCK":d=a.jsa;c=a.ksa;break;case "NPBLOCK":d=a.Gra;c=a.Hra;this.b.type=ig.ca.NPFENCE}this.lR=new ig.pwa(new ig.Oka(c,"white"),new ig.Oka(d,"white"));
this.yDa=new ig.Xz("media/entity/objects/object-effects.png",ig.nf.Eg.eF,16,16,176,0,1,1);this.maxHeight=this.b.size.z},Ge:function(a){this.Kg&&this.Kg.remove();this.yDa.Tc();this.parent(a)},Np:function(){this.ul(2)},update:function(){if(this.n>0)this.n=this.n-ig.i.ja},Gh:function(){if(!this.SB){var a=this.b,c=this.Ua[0],d=this.Ua[1];if(a.size.z==0&&this.n<=0){c.Bj(q);d.Bj(q)}else{var f=0,i=0;if(this.n>0){f=((this.n-(a.size.z?this.Gwa:0))/this.fxa).Rb(0,1);f=KEY_SPLINES[a.size.z?"EASE_IN":"EASE_OUT"].get(f);
i=((this.n-(a.size.z?0:this.fxa))/this.Gwa).Rb(0,1);a.size.z||(i=1-i)}this.lR.vX.VLa(i);this.lR.wX.VLa(i);i=a.size.z?(1-f)*this.maxHeight:f*this.maxHeight;f=(a.size.z?1-f:f)*0.76;c.l(a.g.x,a.g.y,a.g.z);c.F(a.size.x,a.size.y,i);c.Bj(this.lR);c.zC=1;c.ge(f);d.l(a.g.x,a.g.y,a.g.z);d.F(a.size.x,a.size.y,i);d.ge(f);d.zC=1;d.qg="lighter";d.Bj(this.yDa.Iy(0),a.g.x+ig.r.Z2*16,a.g.y-a.g.z-a.size.z+ig.r.Z2*16)}}},setActive:function(a,c){this.F(this.b.size.x,this.b.size.y,a?this.maxHeight:0);if(a&&!this.Kg&&
!this.vT)this.Kg=ig.navigation.eS(this);else if(!a&&this.Kg){this.Kg.remove();this.Kg=q}if(!c){this.n=this.Gwa+this.fxa;this.Na&&(a?ig.ah.gh(this.Na.JBb,this):ig.ah.gh(this.Na.IBb,this))}}})});ig.J=h;
ig.N("game.feature.puzzle.entities.glowing-line").O("impact.base.entity").K(function(){ig.wa.GlowingLine=ig.Kc.extend({Hu:q,n:0,Z4:y,t:new ig.u({Dd:h,attributes:{fb:{c:"VarCondition",d:"Condition on which the line will glow"}},Kq:h,Lq:h,B_:16,label:N("")}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.time.Im=h;d.size||this.b.F(8,8,0);a=ig.Rf.get("puzzle");this.Hu=new ig.Xz(a.sheet,ig.nf.Eg.h$,16,16,176,80,4,1);this.fb=new ig.de(d.condition);this.Z4=this.fb.evaluate()},Np:function(){this.ul(1)},
update:function(){if(this.n>0)this.n=this.n-ig.i.ja},Gh:function(){var a=this.Z4?3:0;this.n>0&&(a=a-Math.min(2,Math.floor(this.n/0.05)));var b=this.b,c=this.Ua[0];c.l(b.g.x,b.g.y,b.g.z);c.F(b.size.x,b.size.y,b.size.z);c.Bj(this.Hu.Iy(a),0,0)},ag:function(){var a=this.fb&&this.fb.evaluate();if(a&&!this.Z4){this.Z4=h;this.n=0.25}else if(!a&&this.Z4){this.Z4=y;this.n=0}}})});ig.J=h;
ig.N("game.feature.puzzle.entities.lorry").O("impact.base.entity","impact.feature.effect.effect-sheet","impact.base.actor-entity").K(function(){sc.Ywa={};sc.Xwa={PERMA_MOVE:{jO:h},ON_TOUCH_PERMA_MOVE:{esa:h},ON_TOUCH_MOVE_ONCE:{esa:h,O7a:h},WHILE_TOUCH_MOVE:{esa:h,eGb:h,O7a:h}};sc.GP={};sc.GP.SLOW=60;sc.GP.DEFAULT=90;sc.GP.FAST=120;sc.GP.FASTER=180;sc.GP.FASTEST=240;var a=Vec3.create(),b=Vec3.create(),c=new ig.ud("puzzle.lorry");ig.wa.Lorry=ig.Wd.extend({Vqa:q,Kl:0,DZ:q,yN:Vec2.create(),Cu:y,Mh:0,
Hn:0,JU:0,wK:0,zj:q,nma:h,Hg:q,qfa:{zga:q,NCa:q,p6:q,Mb:[],V6:0},t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},Vqa:{c:"String",d:"Type/Size of the Lorry",U:sc.Ywa},DZ:{c:"String",d:"How the platform moves",U:sc.Xwa},yN:{c:"String",d:"The initial direction of the platform",U:ig.Jc.Lk},speed:{c:"String",d:"Speed of lorry",U:sc.GP},ura:{c:"VarCondition",d:"Additional condition for lorry to move",I:h}}}),f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.BLOCK;
this.DZ=sc.Xwa[j.moveType]||sc.Xwa.PERMA_MOVE;ig.Jc.uq(ig.Jc.Lk[j.initDir],this.yN);this.Mh=sc.GP[j.speed]||sc.GP.DEFAULT;this.ura=new ig.de(j.moveCondition||q);a=ig.Rf.get("lorry");if(this.Vqa=j=sc.Ywa[j.lorryType]){this.b.F(j.size.x,j.size.y,j.size.z);this.Bd({sheet:{src:a.sheet,width:j.s.Vc,height:j.s.sd,xCount:j.s.vh,offX:a.Wqa+j.s.x,offY:a.Xqa+j.s.y},SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]})}this.DZ.jO&&(!window.Ed&&this.ura.evaluate())&&this.CU(h,
h)},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;c.va("lorryAppear",this,{align:"TOP"})}},gw:function(b,f){var i=this.lc(ig.Pa.TOP,a);c.Cg("lorryDisappear",i.x,i.y,i.z);this.l(b.x,b.y,b.z);this.c3a(f);this.CU(y,h);this.wK=this.JU=this.Hn=this.Ya.alpha=0;c.va("lorryAppear",this,{align:"TOP"})},CU:function(a,b){this.Cu=a;this.Ma(this.Cu?"on":"off");if(this.Cu&&!this.zj){this.Hg=c.va("lorryRuns",this,{duration:-1});this.zj=new ig.Bw(this,ig.mk.XL,0.2,0.2,-1,1);ig.pg.ey(this.zj);b||c.va("lorryActivate",
this,{align:"TOP"})}else if(!this.Cu&&this.zj){this.Hg&&this.Hg.stop();this.zj.stop();this.zj=q;b||c.va("lorryDeactivate",this,{align:"TOP"})}},update:function(){this.qfa.NCa||this.c3a(this.yN);if(this.Cu)if(this.wK>0){this.wK=this.wK-ig.i.ja;if(this.wK<=0)this.wK=0;if(this.DZ.O7a){var a=ig.r.nG(this);a.indexOf(ig.r.cb)==-1&&this.CU(y)}}else{this.dFb();if(this.DZ.eGb){a=ig.r.nG(this);if(a.indexOf(ig.r.cb)==-1){this.Hn=0;this.CU(y)}}}this.parent()},dFb:function(){var c=this.lc(ig.Pa.BOTTOM,a),f=this.qfa,
i;if(!this.JU&&this.Hn>=this.Mh||this.JU&&this.Hn<=15){this.Hn=this.Hn.Rb(15,this.Mh);i=this.Hn*ig.i.ja}else{var j=this.JU?-this.JU:this.Mh*2;i=this.Hn*ig.i.ja+j*ig.i.ja*ig.i.ja;this.Hn=this.Hn+j*ig.i.ja}for(j=y;i;){var k=f.Mb[f.V6],l=Vec3.sub(k,c,b),m=Vec3.length(l);if(m<=i){i=i-m;Vec3.assign(c,k);if(!this.rNb()){i=0;j=h}}else{Vec3.length(l,i);Vec3.add(c,l);i=0}}i=this.b;i.l(c.x-i.size.x/2,c.y-i.size.y/2,c.z,h);if(j){this.JU=0;this.Lc();this.wK=1}else if(!this.JU){i=this.Hn*0.5;c=f.NCa.c2a(c,f.zga,
i);if(c<i)this.JU=0.5*this.Hn*this.Hn/c}},oq:function(a){if(this.ura.evaluate()&&this.DZ.esa&&a.Ah&&!this.Cu){this.wK=0.4;this.CU(h)}},ag:function(){var a=this.ura.evaluate();if(!a&&this.Cu){this.Hn=0;this.CU(y)}else if(a&&!this.Cu){a=ig.r.nG(this);if(!this.DZ.esa||a.indexOf(ig.r.cb)!=-1){this.wK=0.4;this.CU(h)}}},rNb:function(){var a=this.qfa;if(a.V6<a.Mb.length-1){a.V6++;return h}if(a.p6){var b=a.Mb.last();a.p6.ZAb(a,b);return h}return y},Lc:function(){for(var a=this.qfa,b=[],c=a.Mb.length;c--;)b.push(a.Mb[c]);
a.Mb=b;a.V6=b.length-a.V6;b=a.zga;a.zga=a.p6;a.p6=b},c3a:function(b){for(var c=this.lc(ig.Pa.BOTTOM,a),i=ig.r.Br(c.x-1,c.y-1,c.z-1,2,2,2,this),j=i.length;j--;)i[j]instanceof ig.wa.LorryRail&&i[j].lAb(this.qfa,c,b)},BF:function(a){a.b.aa=this.b.aa;a.b.g.z=a.b.pc=this.b.pc+this.b.size.z;a.face.x=this.yN.x;a.face.y=this.yN.y;a.l(this.b.g.x+this.b.size.x/2-a.b.size.x/2,this.b.g.y+this.b.size.y/2-a.b.size.y/2);this.CU(h,h);this.Hn=this.Mh}});ig.wa.LorryRespawner=ig.Wd.extend({f6a:q,LD:q,yN:Vec2.create(),
N5:0,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},KVb:{c:"Entity",d:"The lorry entity to be respawned at this point"},yN:{c:"String",d:"The initial direction of the platform",U:ig.Jc.Lk}},Uk:h,Sl:"rgba(0,255,255, 0.5)"}),f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.NONE;this.b.F(32,32,0);ig.Jc.uq(ig.Jc.Lk[j.initDir],this.yN);this.f6a=j.lorryEntity;this.N5=0},xyb:function(){if((this.LD=ig.Ja.rd(this.f6a))&&this.LD.Vqa){var a=ig.Rf.get("lorry"),
b=this.LD.Vqa;if(b){var c=this.b,j=b.size.x-this.b.size.x,k=b.size.y-this.b.size.y;c.F(b.size.x,b.size.y,0);this.Bd({sheet:{src:a.sheet,width:b.s.Vc-2,height:b.s.sd-2,offX:a.Wqa+b.s.x+1,offY:a.Xqa+b.s.y+1+b.s.sd*2},renderMode:"lighter",SUB:[{name:"default",time:1,frames:[0],repeat:y}]});this.l(c.g.x-j/2,c.g.y-k/2,c.g.z)}}},update:function(){this.LD||this.xyb();if(this.LD){var a=1,b=ig.r.cb;ig.gl.rY(b)==this.LD&&(a=0);var c=ig.qd.Fy(this.b,this.LD.b);!this.LD.Cu&&c>48&&(c=200);c<48?a=0:c<200&&(a=a*
((c-48)/152));var a=KEY_SPLINES.EASE_OUT.get(a),j=ig.i.ja*10;this.N5=j*a+this.N5*(1-j);this.Ya.alpha=this.N5;this.Ya.Xa=this.N5;this.Ya.Va=this.N5;a=ig.qd.Fy(b.b,this.b);if(c>=200&&a<=48){this.LD.gw(this.b.g,this.yN);c=b.b;this.LD.b.FS(c.g.x,c.g.y,c.g.z,c.size.x,c.size.y,c.size.z)&&b.l(c.g.x,c.g.y,c.g.z+this.LD.b.size.z)}}this.parent()}});sc.Ywa.BIG={size:{x:48,y:48,z:2},s:{x:0,y:0,Vc:48,sd:48,vh:1}};sc.bq={};ig.wa.LorryRail=ig.Wd.extend({xb:[],ml:q,a_a:y,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",
d:"Condition for Enemy to spawn",xc:h},HWb:{c:"String",d:"Type of rail",U:sc.bq},TRb:{c:"LorryAltTypes",d:"Other types depending on var conditions",I:h}}}),f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.TRIGGER;j.size||this.b.F(16,16,0);if((a=sc.bq[j.railType])&&(a.Xa||a.Va)){(!a.Xa&&this.b.size.x!=16||!a.Va&&this.b.size.y!=16)&&this.b.F(16,16,0);if(window.Ed){this.t=this.t.copy();this.t.Kq=a.Xa;this.t.Lq=a.Va;this.t.B_=16}}else this.b.F(a.s.Vc?a.s.Vc:16,16,0);this.$8a(j.railType,q);if(j.altTypes){j=
j.altTypes;for(a=0;a<j.length;++a)this.$8a(j[a].railType,new ig.de(j[a].condition))}this.Hdb(h)},Np:function(){this.ul(this.xb.length)},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;c.va("railAppear",this)}},Zma:function(){if(!this.a_a){for(var a=this.xb.length;a--;)this.kwb(this.xb[a]);this.a_a=h}},kwb:function(a){if(a)for(var b=2;b--;){for(var c=a.Mb[b?0:a.Mb.length-1],c=ig.r.Br(c.x-1,c.y-1,c.z-1,2,2,2,this),j=q,k=c.length;k--;)c[k]instanceof ig.wa.LorryRail&&(j=c[k]);a.Xg.push(j)}},$8a:function(a,
b){var c={fb:b,sheet:q,Rp:q,Mb:[],Xg:[]},j=ig.Rf.get("lorry"),k=sc.bq[a];if(j&&k){k.Xa||k.Va?c.Rp=new ig.Xz(j.sheet,k.Xa?ig.nf.Eg.Yn:ig.nf.Eg.OL,16,16,j.cta+k.s.x,j.dta+k.s.y,1,1):c.sheet={s:new ig.ia(j.sheet),x:j.cta+k.s.x,y:j.dta+k.s.y,Vc:k.s.Vc||16,sd:16};j=k.Mb;for(k=0;k<j.length;++k){var l=j[k],m=Vec3.create(this.b.g);m.x=m.x+this.b.size.x*l.x;m.y=m.y+this.b.size.y*l.y;m.z=m.z+this.b.size.z*(l.z||0);c.Mb.push(m)}}this.xb.push(c)},lAb:function(a,c,i){this.Zma();var j=this.ml,c=Vec3.sub(j.Mb[0],
c,b);Vec2.ug(c,i)<=0?this.Lla(a,j,y):this.Lla(a,j,h)},c2a:function(a,b,c){this.Zma();for(var j=this.ml,k,l,m=-1;m<this.xb.length;++m){j=m==-1?this.ml:this.xb[m];if(!(m!=-1&&j==this.ml))if(j.Xg[0]==b){k=j.Mb.last();l=j.Xg[1]}else if(j.Xg[1]==b){k=j.Mb[0];l=j.Xg[0]}}if(!k)return 0;a=Vec3.eb(a,k);return a<c&&l?a+l.c2a(k,this,c-a):a},ZAb:function(a,b){this.Zma();var c;c=this.SVa(a,this.ml,b,-1);if(c!=0)for(var j=this.xb.length;j--;){c=this.SVa(a,this.xb[j],b,c);if(c==0)break}},SVa:function(a,b,c,j){var k=
Vec3.eb(c,b.Mb[0]),c=Vec3.eb(c,b.Mb.last());if(k<=c&&(j==-1||k<j)){this.Lla(a,b,y);return k}if(c<k&&(j==-1||c<j)){this.Lla(a,b,h);return c}return j},Lla:function(a,b,c){a.NCa=this;a.V6=1;if(c){a.zga=b.Xg[1];a.p6=b.Xg[0];a.Mb.length=0;for(c=b.Mb.length;c--;)a.Mb.push(b.Mb[c])}else{a.zga=b.Xg[0];a.p6=b.Xg[1];a.Mb.length=0;a.Mb.push.apply(a.Mb,b.Mb)}},Hdb:function(a){for(var b=this.xb.length;b--;){var i=this.xb[b];if(!i.fb||i.fb.evaluate()){if(this.ml!=i){a||c.va("railSwitch",this);this.ml=i}break}}},
update:function(){this.Zma();this.parent()},Ge:function(a){this.parent(a);for(a=this.xb.length;a--;){var b=this.xb[a];b.Rp&&b.Rp.Tc();b.sheet&&b.sheet.s.Tc()}},K$a:function(a,b){var c=this.b;b.sheet?a.HK(this,b.sheet.Vc,b.sheet.sd,"NO_EXPAND",0,q,b.sheet.s,b.sheet.x,b.sheet.y):b.Rp&&a.HK(this,c.size.x,c.size.y,"NO_EXPAND",0,q,b.Rp.Iy(0),0,0);a.Eb(c.size.x/2,c.size.y/2);a.Eb(c.size.x/2,c.size.y/2);a.setTransform(1,1,this.Ya.Qb);a.ge(this.Ya.alpha);this.Ya.L0(this)},Gh:function(){var a=0.4,b=this.Ua.length-
1,c=this.xb.length,j=this.Ua[b--];for(this.K$a(j,this.ml);c--;)if(this.xb[c]!=this.ml){j=this.Ua[b--];this.K$a(j,this.xb[c]);j.ge(j.alpha*a);a=a*0.4}},ag:function(){this.Hdb()}});sc.bq.HORIZONTAL={s:{x:32,y:0},Xa:h,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.bq.VERTICAL={s:{x:32,y:16},Va:h,Mb:[{x:0.5,y:0},{x:0.5,y:1}]};sc.bq.CURVE_SE={s:{x:0,y:0},Mb:[{x:1,y:0.5},{x:0.5,y:1}]};sc.bq.CURVE_SW={s:{x:16,y:16},Mb:[{x:0,y:0.5},{x:0.5,y:1}]};sc.bq.CURVE_NE={s:{x:0,y:16},Mb:[{x:0.5,y:0},{x:1,y:0.5}]};sc.bq.CURVE_NW=
{s:{x:16,y:0},Mb:[{x:0.5,y:0},{x:0,y:0.5}]};sc.bq.DIAG1={s:{x:0,y:0,Vc:32},Mb:[{x:0.75,y:0},{x:0.25,y:1}]};sc.bq.DIAG2={s:{x:0,y:16,Vc:32},Mb:[{x:0.25,y:0},{x:0.75,y:1}]};sc.bq.HORIZONTAL_SWITCH={s:{x:32,y:32},Xa:h,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.bq.VERTICAL_SWITCH={s:{x:32,y:48},Va:h,Mb:[{x:0.5,y:0},{x:0.5,y:1}]};sc.bq.CURVE_SE_SWITCH={s:{x:0,y:32},Mb:[{x:1,y:0.5},{x:0.5,y:1}]};sc.bq.CURVE_SW_SWITCH={s:{x:16,y:32},Mb:[{x:0,y:0.5},{x:0.5,y:1}]};sc.bq.CURVE_NE_SWITCH={s:{x:0,y:48},Mb:[{x:0.5,y:0},
{x:1,y:0.5}]};sc.bq.CURVE_NW_SWITCH={s:{x:16,y:48},Mb:[{x:0.5,y:0},{x:0,y:0.5}]};sc.bq.STOP_WEST={s:{x:48,y:0},Mb:[{x:1,y:0.5},{x:0.5,y:0.5}]};sc.bq.STOP_EAST={s:{x:48,y:16},Mb:[{x:0,y:0.5},{x:0.5,y:0.5}]};sc.bq.STOP_SOUTH={s:{x:48,y:32},Mb:[{x:0.5,y:0},{x:0.5,y:0.5}]};sc.bq.STOP_NORTH={s:{x:48,y:48},Mb:[{x:0.5,y:1},{x:0.5,y:0.5}]}});ig.J=h;
ig.N("game.feature.puzzle.entities.one-time-switch").O("impact.base.entity").K(function(){sc.JL={};ig.wa.OneTimeSwitch=ig.Wd.extend({dk:q,b3:h,n:0,h1a:0,uc:"",qc:y,Na:{hx:new ig.ka("media/sound/battle/hit-7.ogg",0.4),rM:new ig.ka("media/sound/puzzle/switch-activate-2.ogg",1)},Hx:q,data:q,fx:{},Hg:q,ws:q,t:new ig.u({Dd:h,attributes:{Hx:{c:"String",d:"Type of Switch",U:sc.JL},uc:{c:"VarName",d:"Variable to be se to true when switch is activated"},ov:{c:"VarName",d:"Variable to increase by one when switch is activated"},
Mw:{c:"Number",d:"If >0: only keep switch active for said amount of time"},Oca:{c:"Integer",d:"If >0: if addValue reached fixCount, remain active permanently"},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h,I:h}},label:function(){return"[ "+this.uc+" ]\n"+this.ov+"++"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1E3;this.Hx=d.switchType;if(a=sc.JL[d.switchType]){if(a.Jj)this.b.type=a.Jj;Vec3.assign(this.b.size,a.size);Vec2.assign(this.b.padding,a.padding);
this.dk=a.dk;this.h1a=this.b.size.z;b=a.Ba;if(a.Kx)if(c=ig.Rf.get(a.Kx)){b=ig.copy(b);if(b.sheet){b.sheet.src=c.sheet;if(c.x!==g)b.sheet.offX=c.x;if(c.y!==g)b.sheet.offY=c.y}else if(b.namedSheets)for(var f in b.namedSheets){var i=b.namedSheets[f];i.src=c.sheet;c.x!==g&&(i.offX=i.offX+c.x);c.y!==g&&(i.offY=i.offY+c.y)}}this.Bd(b);this.data=a;if(a.fx)for(var j in a.fx)this.fx[j]=new ig.Bi(a.fx[j])}this.uc=d.variable;this.ov=d.addValue;this.Mw=d.activeTime;this.Oca=d.fixCount||0;if(!this.Mw)this.b.time.Im=
h;ig.ma.JB(this.uc,0);ig.ma.JB(this.ov,0);if(this.Oca&&ig.ma.get(this.ov)>=this.Oca){this.qc=h;this.Mw=0}if(this.uc)this.qc=ig.ma.get(this.uc);if(this.qc)this.b.size.z=this.data.mm;this.Ma(this.qc?"on":"off")},show:function(a){this.parent(a);if(this.ws){this.ws.stop();this.ws=q}if(!a){this.Ya.alpha=0;this.fx.show?this.fx.show.va(this,{}):ig.r.G.Mf.va("showQuick",this,{})}},po:function(){if(this.Mw&&this.qc){this.n=0;this.zO()}this.fx.hide?this.ws=this.fx.hide.va(this,{callback:this}):ig.r.G.Mf.va("hideQuick",
this,{callback:this})},Aj:function(a){if(a==this.ws&&a.ek()){this.ws=q;this.hide()}},Ge:function(a){this.Mw&&this.qc&&this.zO();for(var b in this.fx)this.fx[b].Ka();this.parent(a)},update:function(){if(this.n){this.n=this.n-ig.i.ja;if(this.n<=0){this.n=0;this.zO();this.Hg&&this.Hg.stop();this.Hg=q;this.fx.Pcb&&this.fx.Pcb.va(this);this.mb.Kda("tmpOnEnd")?this.Ma("tmpOnEnd",h,"off"):this.Ma("off")}else if(this.n<this.data.Msa&&this.rk!="tmpOnSlow"){if(this.fx.Qcb){this.Hg&&this.Hg.stop();this.Hg=this.fx.Qcb.va(this,
{duration:-1})}this.Ma("tmpOnSlow",h)}}this.parent()},sj:function(a){if(this.ws||a.zb&&a.zb.wi("NO_PUZZLE"))return y;if(this.dk(this,a)){if(this.qc&&!this.Mw)return h;if(!this.qc){ig.ma.set(this.uc,h);ig.ma.add(this.ov,1);this.qc=h}this.data.dGa||sc.Ta.Oi(this,a.aj(this),sc.Wb.MASSIVE,a.Gf(),y,y,h);ig.ah.gh(this.Na.hx,this);ig.ah.gh(this.Na.rM,this);if(this.Mw){this.Hg&&this.Hg.stop();this.Hg=this.fx.qia&&this.fx.qia.va(this,{duration:-1});this.Ma("tmpOn",h,q);this.n=this.Mw}else this.J7()}else{if(this.data.W3a)return y;
sc.Ta.Oi(this,a.aj(this),sc.Wb.NONE,a.Gf(),y,y,h)}return h},PQ:function(a){a=="preOn"&&this.O0a()},J7:function(){this.Hg&&this.Hg.stop();this.Hg=q;this.fx.Ora&&this.fx.Ora.va(this);this.mb.Kda("preOn")?this.Ma("preOn",h,q,h,h):this.O0a()},O0a:function(){this.b.size.z=this.data.mm;this.mb.Kda("preOnEnd")?this.Ma("preOnEnd",h,"on"):this.Ma("on",h)},ag:function(){if(this.uc){var a=ig.ma.get(this.uc);if(this.qc!=a){this.qc=a;this.b.size.z=this.qc?this.mm:this.h1a;this.Ma(this.qc?"on":"off",h,q,h)}}if(this.Mw&&
this.Oca&&ig.ma.get(this.ov)>=this.Oca){this.n=this.Mw=0;this.J7()}},zO:function(){this.qc=y;ig.ma.set(this.uc,y);ig.ma.sub(this.ov,1)}});sc.JL["default"]={size:{x:16,y:16,z:17},padding:{x:4,y:4},mm:0,Kx:"puzzle",Ba:{offset:{x:0,y:0,z:0},sheet:{src:q,width:16,height:32},SUB:[{name:"off",time:0.1,frames:[0,1,2,3],repeat:h},{name:"preOn",time:0.03,frames:[8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,10,11,11,11,8,8,8,8,8,12,13],repeat:y},{name:"preOnEnd",time:0.1,frames:[14,15],repeat:y},{name:"on",
time:1,frames:[15],repeat:y},{name:"tmpOn",time:0.025,frames:[4,5,6,7],repeat:h},{name:"tmpOnSlow",time:0.05,frames:[4,5,6,7],repeat:h}]},dk:function(a,b){return b.sa==sc.pd.PLAYER}};sc.JL["turret-switch"]={size:{x:24,y:24,z:21},padding:{x:0,y:0},mm:21,Ba:{offset:{x:-1,y:1,z:0},sheet:{src:"media/entity/objects/switch-special.png",width:24,height:48},SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"preOn",time:0.03,frames:[0,1,1,1,2],repeat:y},{name:"preOnEnd",time:0.03,frames:[3],repeat:y},{name:"on",
time:1,frames:[3],repeat:y}]},dk:function(a,b){return b.sa==sc.pd.ENEMY}};sc.JL.propeller={size:{x:16,y:16,z:24},padding:{x:4,y:4},mm:21,Msa:1,Kx:"propeller",Ba:{sheet:{src:"media/map/heat-dng.png",width:24,height:32,offX:320,offY:256},SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"tmpOn",time:0.033,frames:[3,4,5],repeat:h},{name:"tmpOnSlow",time:0.05,frames:[1,2,0],repeat:h},{name:"tmpOnEnd",time:0.05,frames:[0,0,1,1,2,2,0,0,0,1,1,1,2,2,2,2],repeat:y},{name:"on",time:0.033,frames:[3,4,5],
repeat:h}]},fx:{qia:{sheet:"puzzle.propeller",name:"tmpOn"},Qcb:{sheet:"puzzle.propeller",name:"tmpOnSlow"},Pcb:{sheet:"puzzle.propeller",name:"tmpOnEnd"}},dk:function(a,b){return b.zb&&b.zb.wi("STEAM")}};sc.JL.steamPipe={Jj:ig.ca.BLOCK,size:{x:16,y:16,z:10},padding:{x:0,y:0},mm:10,Msa:1,W3a:h,dGa:h,Kx:"pipeSwitch",Ba:{sheet:{src:"media/map/heat-dng.png",width:16,height:24,offX:368,offY:208,xCount:1},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"on",time:0.1,frames:[1],repeat:h},{name:"tmpOn",
time:0.05,frames:[0],repeat:h},{name:"tmpOn",time:0.05,frames:[1,1,1,1,1,1],framesAlpha:[1,0.75,0.5,0.5,0.75,1],repeat:h},{name:"tmpOnSlow",time:0.05,frames:[1,0],repeat:h}]},fx:{qia:{sheet:"puzzle.water-bubble",name:"steamSwitchTmp"},Ora:{sheet:"puzzle.water-bubble",name:"steamSwitchOn"}},dk:function(a,b){return b.zb&&b.zb.wi("STEAM_PIPE")}};sc.JL.teslaSwitch={Jj:ig.ca.VIRTUAL,size:{x:16,y:16,z:16},padding:{x:0,y:0},mm:16,Msa:1,dGa:h,Kx:"teslaSwitch",Ba:{sheet:{src:"media/map/shockwave-dng.png",
width:16,height:32,offX:208,offY:368,xCount:2},wallY:0,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"on",time:0.1,frames:[1],repeat:h},{name:"tmpOn",time:0.05,frames:[0],repeat:h},{name:"tmpOn",time:0.05,frames:[1,1,1,1,1,1],framesAlpha:[1,0.75,0.5,0.5,0.75,1],repeat:h},{name:"tmpOnSlow",time:0.05,frames:[1,0],repeat:h}]},fx:{qia:{sheet:"puzzle.tesla",name:"switchOnTmp"},Ora:{sheet:"puzzle.tesla",name:"switchOn"}},dk:function(a,b){return b.zb&&b.zb.wi("LIGHTNING")}};sc.JL.arSwitch={size:{x:16,
y:16,z:17},padding:{x:4,y:4},mm:0,Ba:{offset:{x:0,y:0,z:0},sheet:{src:"media/entity/objects/dungeon-ar.png",width:16,height:32,offX:192,offY:64,xCount:4},renderMode:"lighter",SUB:[{name:"off",time:0.1,frames:[0,1,2,3],repeat:h},{name:"preOn",time:0.03,frames:[8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,10,11,11,11,8,8,8,8,8,12,13],repeat:y},{name:"preOnEnd",time:0.1,frames:[14,15],repeat:y},{name:"on",time:1,frames:[15],repeat:y},{name:"tmpOn",time:0.025,frames:[4,5,6,7],repeat:h},{name:"tmpOnSlow",
time:0.05,frames:[4,5,6,7],repeat:h}]},fx:{show:{sheet:"ar",name:"arSwitchShow"},hide:{sheet:"ar",name:"arSwitchHide"}},dk:function(a,b){return b.sa==sc.pd.PLAYER}};sc.JL.waveSwitch={Jj:ig.ca.BLOCK,size:{x:24,y:24,z:24},padding:{x:0,y:0},mm:24,Msa:1,W3a:h,dGa:y,Kx:"waveSwitch",Ba:{namedSheets:{box:{src:"media/map/shockwave-dng.png",width:24,height:48,offX:0,offY:0,xCount:1},shock:{src:"media/map/shockwave-dng.png",width:24,height:40,offX:24,offY:8}},SUB:[{wallY:1,sheet:"box",SUB:[{name:"on",time:0.1,
frames:[0],repeat:h},{name:"off",time:0.1,frames:[0],repeat:h},{name:"tmpOn",time:0.1,frames:[0],repeat:h},{name:"tmpOnSlow",time:0.1,frames:[0],repeat:h},{name:"tmpOnEnd",time:0.1,frames:[0],repeat:h}]},{sheet:"shock",renderMode:"lighter",SUB:[{name:"off",time:0.05,frames:[0,1,2,3],repeat:h},{name:"tmpOn",time:0.033,frames:[4,5,-1,-1,-1,5],repeat:h},{name:"tmpOnSlow",time:0.033,frames:[4,5,-1,5],repeat:h},{name:"tmpOnEnd",time:0.066,frames:[5],repeat:h}]}]},fx:{qia:{sheet:"puzzle.compressor",name:"waveSwitchTmpOn"},
Ora:{sheet:"puzzle.compressor",name:"waveSwitchOn"}},dk:function(a,b){return b.zb&&b.zb.wi("COMPRESSED")&&b.Gf()==sc.ha.WAVE}}});ig.J=h;
ig.N("game.feature.puzzle.entities.element-shield").O("impact.base.entity","impact.base.actor-entity","impact.feature.effect.effect-sheet").K(function(){function a(a){return a instanceof sc.q9}var b=["---","Heat","Cold","Shock","Wave"],c=Vec2.create(),d=Vec3.create();ig.wa.ElementShieldSrc=ig.Wd.extend({Kl:0,$ba:q,Aa:y,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},element:{c:"String",d:"Element of shield",U:["HEAT","COLD","SHOCK","WAVE"],ab:"HEAT"},mJa:{c:"VarName",
d:"Add 1 if shield is activated",I:h}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.F(16,16,0);this.b.Fd=1E3;this.element=d.element||"HEAT";this.mJa=d.onActivateAdd||q;a=ig.Rf.get("puzzle2");this.Bd({sheet:{src:a.sheet,width:16,height:16,xCount:1,offX:32,offY:48},SUB:[{name:"idle",time:1,frames:[0],repeat:y}]});this.Ma("on")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showQuick",this,{})}this.Aa=h;this.Fbb(a)},po:function(){this.Aa=y;if(this.$ba){this.$ba.Mi=
q;this.$ba.oh()}ig.r.G.Mf.va("hideQuick",this,{callback:this})},Aj:function(a){a.ek()&&this.hide()},update:function(){if(this.Kl){this.Kl=this.Kl-ig.i.ja;this.Kl<=0&&this.Fbb()}this.parent()},Fbb:function(a){if(this.Aa){this.Kl=0;this.Ma("on");var b=this.tb(c);this.$ba=ig.r.Pe(sc.wwa,b.x,b.y,this.b.g.z+12,{panel:this,element:this.element},!a)}},dHb:function(){this.$ba=q;this.Kl=1;this.mJa&&ig.ma.add(this.mJa,1)}});sc.wwa=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{element:{c:"String",d:"Element of shield",
U:["HEAT","COLD","SHOCK","WAVE"]}}}),G:{sheet:new ig.ud("puzzle.shield")},Na:{Ac:new ig.ka("media/sound/puzzle/element-ball-charge.ogg",1,0)},Mi:q,state:0,Ac:{Qa:0,prev:0,n:0},Ev:0,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.IGNORE;this.b.F(16,16,16);this.b.Fd=1;this.b.yd.height=12;this.b.yd.yl=3;this.b.yd.er=5;this.b.Cd.size=16;this.b.kj=0.5;this.b.Vm=0;this.b.Ze.Am=0.2;this.b.l(a-this.b.size.x/2,b-this.b.size.y/2,c);this.b.K7(2,2);this.element=sc.ha[d.element];this.Mi=d.panel;this.ELa=
0;a=new ig.Bw(this,ig.mk.L,0.1,0.1,-1,1,y);a.LB(0,4,0);ig.pg.ey(a);this.Bd({shapeType:"Y_FLAT",wallY:0,sheet:{src:"media/entity/objects/object-effects.png",width:24,height:24,xCount:5,offX:128,offY:64},SUB:[{time:1,frames:[0],repeat:y,SUB:[{name:"idle"},{name:"charge"}]},{time:1,renderMode:"lighter",repeat:y,SUB:[{name:"idle",frames:[1+(this.element-1)*2]},{name:"idle",frames:[-1,-1,-1,-1,0,1,2,3,4,5,-1,-1,-1,-1,-1,-1,-1,-1],time:0.05,tileOffset:9,repeat:h},{name:"charge",frames:[1+(this.element-
1)*2]},{name:"charge",frames:[2+(this.element-1)*2]}]}]});this.Ma("idle")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;this.G.sheet.va("show"+b[this.element],this,{offset:{x:0,y:0,z:4}})}},Aj:function(a){if(!this.Ve&&a.state==ig.ev.mC){if(a==this.G.xq)this.G.xq=q;this.rqa()&&this.ze()}},Zl:function(){this.state<3&&this.oh()},update:function(){var a=this.MGa()?3:this.Ac.Qa||Vec2.length(this.b.V)>20?2:1;this.ELa=(this.ELa+a*ig.i.ja)%1;if(this.Ac.n){this.Ac.n=this.Ac.n-ig.i.ja;if(this.Ac.n<=
0){this.Ac.n=0;this.Ac.Qa||this.Ma("idle")}}if(this.Ev){this.Ev=this.Ev-ig.i.ja;if(this.Ev<=0)if(this.MGa())this.oh();else{this.Ac.prev=this.Lza();this.Ac.Qa--;this.Ac.n=0.1;this.Ev=this.Ac.Qa>0?0.1:0}}this.parent()},Gh:function(){ig.Wd.prototype.Gh.call(this);if(this.Ua.length>0&&!this.rqa()){var a=this.ELa/1,b=this.Ua[0];b.Eb(12,12);b.setTransform(1,1,a*Math.PI*2);b.ge(0.6)}if(this.rk=="charge"&&this.Ua.length>=3){a=this.Lza()/4;a=a==1?24:2+Math.round(20*a);b=24-a;this.Ua[1].gp(0,a);this.Ua[2].gp(b,
0)}else{this.Ua[1]&&this.Ua[1].gp(0,0);this.Ua[2]&&this.Ua[2].gp(0,0)}},Lza:function(){var a=this.Ac.n/0.1;return this.Ac.prev*a+this.Ac.Qa*(1-a)},i3:function(a,b,c){if(this.Mi&&this.state==0)this.state=1;Vec2.assign(this.b.V,a);Vec2.length(this.b.V,b||180);c&&Vec2.Lc(this.b.V)},sj:function(a){if(this.state>=3)return h;a.aj(this);var d=a.Gf(),j=a.tq().te();if(j.sa!=sc.pd.PLAYER)return y;var k=a.qu(this,c),d=this.element==d,l=1;if(a instanceof sc.kwa||a instanceof sc.oja){l=2;a.oh()}if(d){this.Ac.prev=
this.Lza();this.Ac.Qa=this.Ac.Qa+l;this.Ac.n=0;this.Ev=0.3*l;if(this.Ac.Qa>=4){this.Ac.Qa=4;this.state=3;ig.r.Pe(sc.q9,0,0,0,{source:this,element:this.element,target:j})}this.Ma("charge")}this.JZa();j="hit";if(d){j="charge"+b[this.element];l=1+(this.Ac.Qa-1)*0.2;ig.ah.gh(this.Na.Ac,this,y,{speed:l})}if(this.Ac.Qa>=4){this.Ev=0.3;Vec2.Bk(this.b.V,0);this.b.time.Im=h;this.G.xq=this.G.sheet.va(j+"Max",this,{duration:-1,offset:{x:0,y:0,z:4}});sc.Ta.yJ(this,ig.r.cb,sc.QE.ELEMENT_SHIELD,h)}else this.G.xq=
this.G.sheet.va(j,this,{callback:this,duration:0.3,offset:{x:0,y:0,z:4}});l=150;if(this.MGa()){l=!a.Nn?350:250;d=y}else if(a.Nn)a.zb.wi("CHARGED")||(l=100);else{l=100;d=y}!d||ig.qd.Fy(this.b,ig.r.cb.b)>32?this.i3(k,l,d):Vec2.Bk(this.b.V,0.5);return h},GG:N(h),O4a:function(){return this.state==0},MGa:function(){return this.state==3},rqa:function(){return this.state==4},JZa:function(){if(this.G.xq){this.G.xq.F7(q);this.G.xq.stop()}},oh:function(){if(!this.rqa()){this.Mi&&this.Mi.dHb();this.state=4;
this.JZa();this.G.xq=this.G.sheet.va("destroy"+b[this.element],this,{callback:this,offset:{x:0,y:0,z:4}})}}});sc.q9=ig.Wd.extend({G:{sheet:new ig.ud("puzzle.shield"),handle:q},target:q,n:0,m0a:y,f:function(c,d,j,k){this.parent(c,d,j,k);this.b.type=ig.ca.NONE;this.b.F(48,48,0);this.element=k.element;this.target=k.target;c=k.source;this.Bd({guiSprites:h,sheet:{src:"media/entity/objects/object-effects.png",width:48,height:48,xCount:2,offX:0,offY:64},offset:{y:256,z:256},SUB:[{time:1,frames:[0],repeat:y,
name:"default"},{time:1,renderMode:"lighter",repeat:y,SUB:[{name:"default",frames:[1+this.element],offset:{y:257,z:257}},{name:"default",frames:[1],offset:{y:258,z:258}}]}]});this.Ma("default");this.n=8.4;this.qj();d=this.G.sheet.va("shieldAppear",this);d.IK();d=this.G.sheet.va("shieldStart"+b[this.element],this.target,{offset:{z:12},target2:c,target2Offset:{x:0,y:0,z:4}});d.IK();this.G.handle=this.G.sheet.va("shieldAura",this,{duration:-1});this.target.GA(a);this.target.it(this);c=[1,1,1,1];c[this.element-
1]=0;c=new sc.mV.DIRECTIONAL({baseFactor:1,elementFactors:c,strength:"BLOCK_ALL",hitResist:"MASSIVE",stableOverride:"MASSIVE",neutralize:h,duration:-1,range:1},"elementOrbShield");this.J3=this.target.aBa(c,0)},dw:function(){this.n&&this.oh()},qj:function(){var a=this.target.lc(ig.Pa.BOTTOM,d);Vec2.Tm(a,this.b.size,-0.5);a.z=a.z+12;this.l(a.x,a.y,a.z)},sr:function(){this.qj();if(this.n){this.n=this.n-ig.i.ja;if(this.n/8<0.25&&!this.m0a){this.m0a=h;if(this.G.handle){this.G.handle.stop();this.G.handle=
this.G.sheet.va("shieldAuraEnd",this,{duration:-1})}}if(sc.q.oe())this.n=0;this.n<=0&&this.oh()}},oh:function(){this.n=0;this.J3.dw();if(this.G.handle){this.G.handle.stop();this.G.handle=q}this.G.sheet.va("shieldClear"+b[this.element],this,{callback:this})},Aj:function(a){this.Ve||a.state==ig.ev.mC&&this.ze()},Gh:function(){ig.Wd.prototype.Gh.call(this);if(this.Ua.length>=2){var a=this.n/2;this.Ua[1].Eb(24,24);this.Ua[1].rotate=a*Math.PI*2}if(this.n<=8){var a=this.n/8,b=1;a<0.25&&(b=Math.abs(Math.cos((0.25-
a)*8/0.15*Math.PI)));this.Ua.length>=2&&this.Ua[1].ge(b);if(this.Ua.length>=3){b=Math.ceil(4+KEY_SPLINES.EASE_IN_OUT.get(1-a)*40);a=0.5*(1-a);this.Ua[2].gp(b,0);this.Ua[2].setTransform(1,1,a*Math.PI*2)}}}});sc.q9.MZa=function(){ig.r.cb.GA(a)}});ig.J=h;
ig.N("game.feature.puzzle.entities.floor-switch").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.Cwa={PERMANENT:{vsa:h},WHILE_ON_TOP:{delay:0}};ig.wa.FloorSwitch=ig.Wd.extend({dk:q,b3:h,Hx:q,uc:"",qc:y,Y5:q,AO:0,G:{sheet:new ig.ud("puzzle")},t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Anti Compressor to spawn",xc:h,I:h},Hx:{c:"String",d:"Type of floor switch",U:sc.Cwa},uc:{c:"VarName",d:"Variable to be increased by 1 when switch is activated. IMPORTANT: MUST BE TMP when switchType ist NOT PERMANENT!"},
Y5:{c:"VarCondition",d:"If specified: Switch will always stick while condition is true",I:h}},label:function(){return"[ "+this.uc+" ]"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.Fd=1;this.b.time.Im=h;this.b.F(16,16,1);a=ig.Rf.get("puzzle2");this.Bd({sheet:{src:a.sheet,width:16,height:16,offX:0,offY:48},SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]});this.Hx=sc.Cwa[d.switchType]||sc.Cwa.PERMANENT;this.uc=d.variable;if(d.lockCondition)this.Y5=
new ig.de(d.lockCondition);ig.ma.JB(this.uc,0);if(this.Hx.vsa)this.qc=ig.ma.get(this.uc);if(!this.Hx.vsa&&this.Y5&&this.Y5.evaluate()){this.qc=h;ig.ma.add(this.uc,1)}if(this.qc)this.b.size.z=1;this.Ma(this.qc?"on":"off")},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",this,{})}},po:function(){ig.r.G.Mf.va("hideFast",this,{callback:this})},Aj:function(a){if(a.ek()){this.ui();this.hide()}},update:function(){if((this.qc||this.AO)&&!this.Hx.vsa&&(!this.Y5||!this.Y5.evaluate())){var a=
ig.r.nG(this),b=this.b,b=ig.r.Br(b.g.x,b.g.y,b.g.z,b.size.x,b.size.y,b.size.z+1,this);!this.tZa(a)&&!this.tZa(b)&&this.ui()}if(this.AO){this.AO=this.AO-ig.i.ja;if(this.AO<=0){this.AO=0;this.Pf(h)}}this.parent()},Pf:function(a){if(!this.qc)if(!a&&this.Hx.delay){if(!this.AO)this.AO=this.Hx.delay}else{this.Ma("on");this.qc=h;ig.ma.add(this.uc,1);this.G.sheet.va("floorSwitchActivate",this)}},ui:function(){this.AO=0;if(this.qc){this.qc=y;this.Ma("off");ig.ma.sub(this.uc,1);this.G.sheet.va("floorSwitchDeactivate",
this)}},oq:function(a){this.PGa(a)&&this.Pf()},Ifa:function(a){this.PGa(a)&&this.Pf()},tZa:function(a){for(var b=a.length;b--;)if(this.PGa(a[b]))return h;return y},PGa:function(a){return a.Ah?!this.qc&&!this.Hx.vsa&&!ig.qd.HDb(this.b,a.b,4,4)?y:h:a instanceof ig.wa.PushPullBlock||a instanceof ig.wa.WavePushPullBlock||a instanceof ig.wa.SlidingBlock?h:y}});sc.oL.FLOOR_SWITCH={t:{attributes:{}},Mca:function(a,b){for(var c=b.length;c--;){var d=b[c];d instanceof ig.wa.FloorSwitch&&a.push(d)}return a}}});
ig.J=h;
ig.N("game.feature.puzzle.entities.magnet").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.combat.combat-target-event","impact.base.actor-entity").K(function(){var a=Vec2.create(),b={};sc.lV.MAGNET_PULL={t:{attributes:{}},Nb:N(h)};ig.wa.Magnet=ig.Wd.extend({dir:0,Zp:0,A_a:0,face:Vec2.create(),Waa:[],Jq:{n:0,entities:[],h_:[],BIa:[],Xb:y},G:{sheet:new ig.ud("puzzle.magnet"),handle:q},t:new ig.u({Dd:h,attributes:{dir:{c:"Face",d:"Direction to face",U:ig.Jc.Lk},Waa:{c:"MagnetAltDirs",d:"Other types depending on var conditions",
I:h}}}),f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.VIRTUAL;this.b.F(16,16,24);this.b.Fd=1E3;this.dir=this.Zp=this.A_a=ig.Jc.Lk[i.dir]||0;ig.Jc.uq(this.dir,this.face);if(a=ig.Rf.get("magnet")){this.Bd({DOCTYPE:"MULTI_DIR_ANIMATION",sheet:{src:a.sheet,width:16,height:32,offX:a.x,offY:a.y},shapeType:"Y_FLAT",SUB:[{dirs:8,flipX:[0,0,0,0,0,1,1,1],tileOffsets:[0,3,1,4,2,4,1,3],dirOffsets:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[1,0,0],[1,0,0],[1,0,0]],SUB:[{name:"off",time:0.1,frames:[0],
repeat:y}]},{dirs:4,flipX:[0,0,0,1],tileOffsets:[0,1,2,1],dirOffsets:[[0,0,0],[0,0,0],[0,0,0],[1,0,0]],SUB:[{name:"on",time:0.05,frames:[0,5],repeat:h}]}]});this.Ma("off")}if(i.altDirs){i=i.altDirs;for(a=0;a<i.length;++a)this.Waa[a]={fb:new ig.de(i[a].condition),dir:ig.Jc.Lk[i[a].dir]}}this.Edb(h)},update:function(){if(this.dHa()){this.dIb();if(this.Jq.n>0){this.K0a();this.Jq.n=this.Jq.n-ig.i.ja;if(this.Jq.n<=0)this.Jq.n=0}if(!this.dHa()){this.G.handle.stop();this.G.handle=q;this.Jq.entities.length=
0;this.Ma("off")}}else if(this.Zp!=this.dir){var b=ig.Jc.uq(this.Zp,a);if(Vec2.GB(this.face,b,Math.PI*2*ig.i.ja*3))this.dir=this.Zp}this.parent()},jNb:function(){this.dir=this.Zp;ig.Jc.uq(this.dir,this.face);this.Jq.n=0.4;this.Ma("on");this.G.handle=this.G.sheet.va("active",this,{duration:-1,offset:{x:0,y:0,z:14},angle:Vec2.Wm(this.face)});this.K0a()},K0a:function(){var b=-8,d=-8,f=16,i=16;if(this.face.x){f=640;b=this.face.x<0?-640:0}if(this.face.y){i=640;d=this.face.y<0?-640:0}for(var j=this.b,k=
this.tb(a),b=ig.r.Br(k.x+b,k.y+d,j.g.z+4,f,i,16,this,this.Jq.entities),d=b.length;d--;){f=b[d];if(f.Xra&&f.Xra()){f.b.Fd=0;f.IEb=this.id;this.G.sheet.va("pull",f,{duration:-1});this.Jq.entities.push(f);this.Jq.h_.push(f)}}},dHa:function(){return this.Jq.n>0||this.Jq.h_.length>0},dIb:function(){for(var c=h,d=this.Jq.h_.length,f=b;d--;){var i=this.Jq.h_[d];if(i.IEb==this.id){var j=ig.qd.Wk(this.b,i.b,a),f=this.face.x?Math.abs(j.x)-i.b.size.x/2-this.b.size.x/2:Math.abs(j.y)-i.b.size.y/2-this.b.size.y/
2;if(f>0){var f=Math.min(ig.i.ja*300,f),j=-this.face.x*f,k=-this.face.y*f,f=ig.r.Ie.Il(b);ig.r.Uq(f,i,j,k,0,0,0,ig.ca.IGNORE);if(f.Ne>0){this.Jq.BIa[d]=h;c=y;i.l(i.b.g.x+j*f.Ne,i.b.g.y+k*f.Ne,i.b.g.z,h)}}}}if(c){for(d=this.Jq.h_.length;d--;){i=this.Jq.h_[d];ig.bt.Pw(i);i.FJa(this.Jq.BIa[d]);i.b.Fd=1;i.b.V.z=0}this.Jq.h_.length=0;this.Jq.BIa.length=0}},ag:function(){this.Edb(y)},Edb:function(a){for(var b=this.A_a,f=this.Waa.length;f--;)if(this.Waa[f].fb.evaluate()){b=this.Waa[f].dir;break}if(b!=this.Zp){this.dir=
this.Zp;this.Zp=b}if(a){this.dir=this.Zp;ig.Jc.uq(this.dir,this.face)}},sj:function(a){var b=a.aj(this);a.Gf()==sc.ha.SHOCK&&!this.dHa()&&this.jNb();sc.Ta.Oi(this,b,sc.Wb.NONE,a.Gf(),y,y,h);return h}})});ig.J=h;
ig.N("game.feature.puzzle.entities.multi-hit-switch").O("impact.base.entity").K(function(){sc.P9={};ig.wa.MultiHitSwitch=ig.Wd.extend({dk:q,b3:h,mm:0,uc:"",qc:y,oGa:0,V3:0,a4:0,LX:0,ava:0,pia:0,vD:new ig.ka("media/sound/battle/hit-7.ogg",0.4),nwb:new ig.ka("media/sound/puzzle/counter.ogg",1),F2:new ig.ka("media/sound/puzzle/switch-activate-2.ogg",1),fx:{},t:new ig.u({Dd:h,attributes:{Hx:{c:"String",d:"Type of Switch",U:sc.P9},uc:{c:"VarName",d:"Variable to be se to true when switch is activated"},
ov:{c:"VarName",d:"Variable to increase by one when switch is activated"},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h,I:h}},label:function(){return"Hits: "+this.oGa+" [ "+this.uc+" ]\n"+this.ov+"++"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.time.Im=h;if(a=sc.P9[d.switchType]){Vec3.assign(this.b.size,a.size);Vec2.assign(this.b.padding,a.padding);this.dk=a.dk;this.oGa=a.Hf;this.mm=a.mm;this.a4=a.a4;this.LX=a.LX;if(a.Kx){b=ig.Rf.get("puzzle");a.Ba.sheet.src=
b.sheet}if(a.fx)for(var f in a.fx)this.fx[f]=new ig.Bi(a.fx[f]);this.Bd(a.Ba)}this.uc=d.variable;this.ov=d.addValue;ig.ma.JB(this.uc,0);ig.ma.JB(this.ov,0);if(this.qc=ig.ma.get(this.uc))this.b.size.z=this.mm;this.Ma(this.qc?"on":"off")},show:function(a){this.parent(a);if(this.ws){this.ws.stop();this.ws=q}if(!a){this.Ya.alpha=0;this.fx.show?this.fx.show.va(this,{}):ig.r.G.Mf.va("showQuick",this,{})}},po:function(){this.fx.hide?this.ws=this.fx.hide.va(this,{callback:this}):ig.r.G.Mf.va("hideQuick",
this,{callback:this})},Aj:function(a){if(a==this.ws&&a.ek()){this.ws=q;this.hide()}},Ge:function(a){for(var b in this.fx)this.fx[b].Ka();this.parent(a)},update:function(){this.parent();if(!(this.qc||this.V3<=0))if(this.ava<=0)if(this.pia<=0){this.V3--;this.pia=this.LX;this.iXa()}else this.pia=this.pia-ig.i.ja;else this.ava=this.ava-ig.i.ja},sj:function(a){if(!this.qc&&this.dk(this,a)){this.ava=this.a4;this.pia=this.LX;this.V3++;ig.ah.gh(this.vD,this);if(this.V3>=this.oGa){this.qc=h;this.Ma("switch",
h,q,h,h);sc.Ta.Oi(this,a.aj(this),sc.Wb.MASSIVE,a.Gf(),y,y,h);ig.ah.gh(this.F2,this);ig.ma.set(this.uc,h);ig.ma.add(this.ov,1)}else{this.iXa();ig.ah.gh(this.nwb,this);sc.Ta.Oi(this,a.aj(this),sc.Wb.LIGHT,a.Gf(),y,y,h)}}else sc.Ta.Oi(this,a.aj(this),sc.Wb.NONE,a.Gf(),y,y,h);return h},PQ:function(a){if(a=="switch"){this.b.size.z=this.mm;this.Ma("switch_end",h,"on")}},iXa:function(){this.Ma(this.V3?"step"+this.V3:"off")}});sc.P9["default"]={size:{x:16,y:16,z:17},padding:{x:4,y:4},mm:0,Hf:5,a4:0.3,LX:0.05,
Kx:h,Ba:{offset:{x:0,y:0,z:0},sheet:{src:q,width:16,height:32,offY:32},SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"switch",time:0.05,frames:[5,6,7,8,9,5,6,7,8,9,5,6,6,7,7,8,8,9,9,9,10,10,10,10,11,12],repeat:y},{name:"switch_end",time:0.03,frames:[13],repeat:y},{name:"on",time:1,frames:[13],repeat:y},{name:"step1",time:1,frames:[1],repeat:y},{name:"step2",time:1,frames:[2],repeat:y},{name:"step3",time:1,frames:[3],repeat:y},{name:"step4",time:1,frames:[4],repeat:y}]},dk:function(a,b){return b.sa==
sc.pd.PLAYER}};sc.P9.arSwitch={size:{x:16,y:16,z:17},padding:{x:4,y:4},mm:0,Hf:5,a4:0.3,LX:0.05,Kx:y,Ba:{offset:{x:0,y:0,z:0},sheet:{src:"media/entity/objects/dungeon-ar.png",width:16,height:32,offY:256},renderMode:"lighter",SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"switch",time:0.05,frames:[5,6,7,8,9,5,6,7,8,9,5,6,6,7,7,8,8,9,9,9,10,10,10,10,11,12],repeat:y},{name:"switch_end",time:0.03,frames:[13],repeat:y},{name:"on",time:1,frames:[13],repeat:y},{name:"step1",time:1,frames:[1],repeat:y},
{name:"step2",time:1,frames:[2],repeat:y},{name:"step3",time:1,frames:[3],repeat:y},{name:"step4",time:1,frames:[4],repeat:y}]},fx:{show:{sheet:"ar",name:"arSwitchShow"},hide:{sheet:"ar",name:"arSwitchHide"}},dk:function(a,b){return b.sa==sc.pd.PLAYER}};sc.P9.old={size:{x:16,y:16,z:17},mm:0,Hf:4,a4:0.3,LX:0.05,Ba:{offset:{x:-1,y:1,z:0},sheet:{src:"media/entity/objects/switch2.png",width:16,height:32},SUB:[{name:"off",time:1,frames:[16],repeat:y},{name:"switch",time:0.03,frames:[4,5,6,7,4,5,6,7,4,
5,6,7,4,5,6,7,4,5,6,6,7,7,7,4,4,4,4,4,8,9],repeat:y},{name:"switch_end",time:0.03,frames:[10,11,12,13,14,15],repeat:y},{name:"on",time:1,frames:[15],repeat:y},{name:"step1",time:1,frames:[17],repeat:y},{name:"step2",time:1,frames:[18],repeat:y},{name:"step3",time:1,frames:[19],repeat:y}]},dk:function(a,b){return b.sa==sc.pd.PLAYER}}});ig.J=h;
ig.N("game.feature.puzzle.entities.bounce-switch").O("impact.base.entity","impact.base.game","impact.feature.effect.effect-sheet").K(function(){sc.ifb=ig.Uf.extend({dx:{},G:new ig.ud("puzzle"),f:function(){this.parent("BounceSwitchGroups")},HIb:function(a,b){var c=this.Cr(a.group);c.hoa=a;c.uc=b;ig.ma.JB(c.uc,y);if(this.TGa(a.group))for(var d=c.JF.length;d--;)c.JF[d].Jfa(h)},CIb:function(a){this.Cr(a.group).JF.push(a)},gyb:function(a){var b=this.Cr(a);this.vta(a);b.vf&&ig.le.Os(b.vf,"NORMAL",KEY_SPLINES.EASE_IN_OUT);
b.hEa&&b.gX==b.JF.length?this.DJb(a):this.pJb(a)},pJb:function(a){for(var a=this.Cr(a),b=a.JF.length;b--;)a.JF[b].CJa();a.hoa.CJa();a.hEa=y;a.gX=0},DJb:function(a){a=this.Cr(a);ig.ma.set(a.uc,h);for(var b=a.JF.length;b--;)a.JF[b].Jfa(y);a.hoa.Jfa()},uKb:function(a,b){this.vta(a);var c=this.dx[a];c.G6=new ig.sf.gq(new ig.sf.PV([b,ig.r.cb]),0,0);ig.le.wx(c.G6,"FAST",KEY_SPLINES.EASE_IN_OUT)},vKb:function(a,b){this.vta(a);var c=this.dx[a];c.G6=new ig.sf.gq(new ig.sf.Exa(b),0,0);ig.le.wx(c.G6,"FAST",
KEY_SPLINES.EASE_IN_OUT)},vta:function(a){a=this.dx[a];a.G6&&ig.le.Os(a.G6,"FAST",KEY_SPLINES.EASE_IN_OUT)},N4a:function(a,b){a=this.Cr(a);return a.mr&&a.mr!=b},TGa:function(a){return(a=this.Cr(a))&&ig.ma.get(a.uc)},HTb:function(a){return this.Cr(a).hoa},LTb:function(a){return this.Cr(a).gX},AFb:function(a,b){var c=this.Cr(a.group);if(c.mr&&c.mr!=b)return y;if(!c.mr){c.mr=b;this.G.va("bounceTrail",b,{duration:-1,align:ig.Pa.CENTER});b.VBa(0.75)}c.gX++;return c.gX},mHb:function(a,b){var c=this.Cr(a.group);
if(c.mr&&c.mr!=b)return y;c.mr=b;c.hEa=h;return c.gX==c.JF.length?h:y},Eu:function(){for(var a in this.dx){var b=this.dx[a];if(b.mr&&b.mr.Ve){b.mr=q;this.gyb(a)}}},fj:function(){this.dx={}},Ms:function(){this.dx={}},Cr:function(a){this.dx[a]||(this.dx[a]={hoa:q,uc:q,JF:[],gX:0,hEa:y,mr:q,vf:q,G6:q});return this.dx[a]}});ig.Vf(function(){return sc.IC=new sc.ifb});ig.wa.BounceSwitch=ig.Wd.extend({b3:h,uc:q,group:q,qc:y,G:new ig.ud("puzzle"),Na:{hx:new ig.ka("media/sound/puzzle/highlight-switch-1.ogg",
1),rM:new ig.ka("media/sound/puzzle/highlight-switch-2.ogg",1),uyb:new ig.ka("media/sound/puzzle/highlight-switch-3.ogg",1)},n:0,vf:q,t:new ig.u({Dd:h,attributes:{uc:{c:"VarName",d:"Variable to be se to true when switch is activated"},group:{c:"String",d:"Group Name to assign bouncing blocks to switch"}},label:function(){return"<"+this.group+">\n[ "+this.uc+" ]"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.time.Im=h;Vec3.Oa(this.b.size,24,24,24);this.group=d.group;
this.uc=d.variable;window.Ed||sc.IC.HIb(this,d.variable);a=ig.Rf.get("puzzle2");this.Bd({namedSheets:{base:{src:a.sheet,width:24,height:28,offX:168,xCount:2},cube:{src:a.sheet,width:16,height:24,offX:224,xCount:2},top:{src:a.sheet,width:8,height:8,offX:216,offY:48}},SUB:[{size:{x:24,y:26,z:0},offset:{y:0},sheet:"base",SUB:[{name:"off",time:0.1,frames:[0]},{name:"rolling",time:0.1,frames:[0]},{name:"rollingEnd",time:0.1,frames:[0]},{name:"flyDown",time:0.033,frames:[0,0,1]},{name:"impact",time:0.05,
frames:[2]},{name:"on",time:0.1,frames:[3]}]},{size:{x:16,y:16,z:8},offset:{z:12,y:-4},sheet:"cube",repeat:h,SUB:[{name:"off",time:0.1,frames:[0,1,2,3]},{name:"rolling",time:0.03,frames:[0,1,2,3]},{name:"rollingEnd",time:0.06,frames:[0,1,2,3,3,0,0,0],repeat:y},{name:"flyDown",time:0.033,frames:[0,0,-1],repeat:y,framesGfxOffset:[0,2,0,6,0,0]}]},{size:{x:8,y:8,z:0},offset:{z:20,y:-8},sheet:"top",repeat:h,frames:[0],time:0.05,SUB:[{name:"off"},{name:"rolling",frames:[0,1,2,3,4]},{name:"rollingEnd",frames:[0,
1,2,3,4]}]}]});if(this.qc=sc.IC.TGa(this.group))this.b.size.z=0;this.Ma(this.qc?"on":"off")},update:function(){if(this.n>0){this.n=this.n-ig.i.ja;if(this.n<=0){this.Ma("rollingEnd",h,q,h,h);this.n=0}}this.parent()},sj:function(a){if(this.qc||!a.Nn||sc.IC.N4a(this.group,a)){sc.Ta.Oi(this,a.aj(this),sc.Wb.NONE,a.Gf(),y,y,h);return h}if(!this.qc){this.qc=h;this.Ma("rolling");if(sc.IC.mHb(this,a)){sc.Ta.Oi(this,a.aj(this),sc.Wb.MASSIVE,a.Gf(),y,y,h);this.G.va("bounceFinal",this);ig.ah.gh(this.Na.hx,this)}else{sc.Ta.Oi(this,
a.aj(this),sc.Wb.NONE,a.Gf(),y,y,h);ig.ah.gh(this.Na.uyb,this)}}return h},PQ:function(a){if(a=="rollingEnd")this.Ma("flyDown",h,q,h,h);else if(a=="flyDown"){this.b.size.z=0;if(this.vf){ig.le.Os(this.vf,"NORMAL",KEY_SPLINES.EASE_IN_OUT);this.vf=q}this.G.va("bounceHit",this,{offset:{z:4}});this.Ma("impact",h,"on");ig.ah.gh(this.Na.rM,this)}},CJa:function(){this.G.va("bounceDenied",this);this.qc=y;this.Ma("off")},Jfa:function(){this.n=0.5;this.vf=new ig.sf.gq(new ig.sf.xV(this),0,0);ig.le.wx(this.vf,
"FAST",KEY_SPLINES.EASE_OUT);var a=new ig.Fo.fF("RANDOM","STRONGER","FASTER",0.3,h);ig.gE.OW(a)}});sc.iV={};ig.wa.BounceBlock=ig.Wd.extend({group:q,VQ:0,gra:0,n:q,jSb:q,G:new ig.ud("puzzle"),TQ:0,Na:{rM:new ig.ka("media/sound/puzzle/highlight-block.ogg",0.8)},t:new ig.u({Dd:h,attributes:{iy:{c:"String",d:"Type of Switch",U:sc.iV},group:{c:"String",d:"Group of bounce switch this block belongs to"},action:{c:"BounceAction",d:"Action to perform when block is hit",xc:h,I:h},TQ:{c:"Number",d:"How long the ball will be alive after bouncing with this block. (default=0.5)",
I:h}},label:function(){return"[ "+this.uc+" ]\n"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.time.Im=h;this.b.di=-1;this.b.Fd=1E3;Vec3.Oa(this.b.size,16,16,24);this.n=new ig.Vt;this.group=d.group;this.TQ=d.ballTime||0.5;window.Ed||sc.IC.CIb(this);if(d.action){a=d.action;this.action={VEb:a.minHit,le:a.camera}}if(d=sc.iV[d.blockType]){Vec3.assign(this.b.size,d.size);this.b.shape=d.shape;a=ig.Rf.get("puzzle2");d.Ba.namedSheets.block.src=a.sheet;if(d.Ba.namedSheets.ground)d.Ba.namedSheets.ground.src=
a.sheet;this.Bd(d.Ba)}this.gra=this.b.size.z;sc.IC.TGa(this.group)?this.Jfa(h):this.VQ=0;this.Ma(this.VQ?"on":"off")},sj:function(a,b){if(!a.Nn||sc.IC.N4a(this.group,a)){sc.Ta.Oi(this,a.aj(this),sc.Wb.NONE,a.Gf(),y,y,h);return h}if(!b||Vec2.Ig(b))return y;if(!this.VQ){this.VQ=1;var c=sc.IC.Cr(this.group);ig.ah.gh(this.Na.rM,this,y,{speed:1-(c.JF.length+2-c.gX)*0.03});a.I9a();a.zta(this.TQ/a.nn);a.dCa(0.025);sc.Ta.Oi(this,a.aj(this),sc.Wb.HEAVY,a.Gf(),y,y,h);this.G.va("bounceHit",this);this.Ma("on");
c=sc.IC.AFb(this,a);if(this.action&&this.action.VEb<=c){c=this.action.le.type;c=="reset"?sc.IC.vta(this.group):c=="ball"?sc.IC.uKb(this.group,a):c=="fixed"&&sc.IC.vKb(this.group,this.action.le.value)}}return y},Jfa:function(a){this.VQ=2;a?this.b.F(this.b.size.x,this.b.size.y,0):this.n.set(1,ig.Ol.br);this.Ma("on")},CJa:function(){this.VQ==0&&this.G.va("bounceDenied",this);this.VQ=0;this.Ma("off")},update:function(){if(!this.n.Xb()){this.n.ja();var a=KEY_SPLINES.EASE_IN_OUT.get(this.n.get());this.VQ==
2&&(a=1-a);a=Math.round(this.gra*a);this.b.F(this.b.size.x,this.b.size.y,a)}this.parent()},Gh:function(){ig.Wd.prototype.Gh.call(this);if(this.Ua.length)this.Ua[0].src.y=this.Ua[0].src.y-(this.gra-this.b.size.z)}});sc.iV["default"]={size:{x:24,y:24,z:23},shape:ig.Tf.RECTANGLE,Ba:{namedSheets:{block:{src:q,width:24,height:48}},sheet:"block",SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]}};sc.iV.slopeNE={size:{x:24,y:24,z:23},shape:ig.Tf.SLOPE_NE,Ba:{namedSheets:{block:{src:q,
width:24,height:48,offX:48},ground:{src:q,width:24,height:24,offX:144}},SUB:[{sheet:"block",aboveZ:1,SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]},{sheet:"ground",size:{x:24,y:24,z:0},frames:[0],SUB:[{name:"off"},{name:"on"}]}]}};sc.iV.slopeSE={size:{x:24,y:24,z:23},shape:ig.Tf.SLOPE_SE,Ba:{namedSheets:{block:{src:q,width:24,height:48,offX:96},ground:{src:q,width:24,height:24,offX:144,offY:24}},SUB:[{sheet:"block",wallY:1,SUB:[{name:"off",time:1,frames:[0],
repeat:y},{name:"on",time:1,frames:[1],repeat:y}]},{sheet:"ground",size:{x:24,y:23,z:1},frames:[0],wallY:1,SUB:[{name:"off"},{name:"on"}]}]}};sc.iV.slopeSW={size:{x:24,y:24,z:23},shape:ig.Tf.SLOPE_SW,Ba:{namedSheets:{block:{src:q,width:24,height:48,offX:96},ground:{src:q,width:24,height:24,offX:144,offY:24}},flipX:h,SUB:[{sheet:"block",wallY:1,SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]},{sheet:"ground",size:{x:24,y:23,z:1},frames:[0],wallY:1,SUB:[{name:"off"},
{name:"on"}]}]}};sc.iV.slopeNW={size:{x:24,y:24,z:23},shape:ig.Tf.SLOPE_NW,Ba:{namedSheets:{block:{src:q,width:24,height:48,offX:48},ground:{src:q,width:24,height:24,offX:144}},flipX:h,SUB:[{sheet:"block",aboveZ:1,SUB:[{name:"off",time:1,frames:[0],repeat:y},{name:"on",time:1,frames:[1],repeat:y}]},{sheet:"ground",size:{x:24,y:24,z:0},frames:[0],SUB:[{name:"off"},{name:"on"}]}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.thermo-pole").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.combat.combat-poi").K(function(){var a=Vec3.create();sc.uL={dx:{},DIb:function(a,b){if(a.group){var c=this.Cr(a.group);c.F_a[a.element]=a;if(b){c.LM=a;for(var d=c.Hf=c.Iu.length;d--;)c.Iu[d].r7a(a.element)}}},GIb:function(a){if(a.group){var b=this.Cr(a.group);b.Iu.push(a);if(b.LM){b.Hf=b.Iu.length;a.r7a(b.LM.element)}}},Cr:function(a){this.dx[a]||(this.dx[a]={F_a:{},Iu:[],mr:q,
LM:q,Hf:0});return this.dx[a]},B_a:function(a){a&&delete this.dx[a]},GJa:function(a,b,c){var d=b.Gf();if(!d)return y;if(!a.group)return h;var f=this.Cr(a.group),d=f.F_a[d]||q;if(f.mr&&f.mr!=b&&!c||f.LM&&f.LM!=d){this.A7a(a);c=y}if(d&&!d.qc()){if(c||f.Hf>=f.Iu.length)return h;f.mr=b;f.LM=d;f.Hf++;b=f.Hf==f.Iu.length;d.GJa(a,b,f.Iu);if(b)for(b=f.Iu.length;b--;){c=f.Iu[b];a!=c&&c.PFb()}}return h},qzb:function(a){if(!a.group)return b.Z1;a=this.Cr(a.group);return!a.LM?b.Z1:a.Hf<a.Iu.length?b.glb:b.wL},
bGb:function(a){a=this.Cr(a.group);a.mr=q;for(a=a.Iu.length;a--;);},EFb:function(a){a=this.Cr(a.group);if(a.Hf==a.Iu.length)return y;if(a.mr.Ve){a.mr=q;a.Hf=0;for(var b=a.Iu.length;b--;)a.Iu[b].Qra();return h}return y},A7a:function(a){if(!a.group)return q;var b=this.Cr(a.group);b.LM.Qra();b.LM=q;b.Hf=0;b.mr=q;for(var c=b.Iu.length;c--;){var d=b.Iu[c];d!=a&&d.Qra()}}};sc.Y1={};sc.Y1.LONG={size:{x:16,y:16,z:48},src:{x:0,y:144},KC:32};sc.Y1.LONG_64={size:{x:16,y:16,z:80},src:{x:80,y:144},KC:64};sc.Y1.SHORT=
{size:{x:16,y:16,z:16},src:{x:0,y:208}};var b={NONE:{oia:y},Z1:{oia:h,blink:h},glb:{oia:y,blink:h},wL:{oia:y},nwa:{oia:h}};ig.wa.ElementPole=ig.Wd.extend({data:q,s:q,group:q,Ac:{state:b.NONE,element:0,yga:0,n:0,Uv:[]},G:{sheet:new ig.ud("puzzle.thermo-pole"),handle:q},t:new ig.u({Dd:h,attributes:{xWb:{c:"String",d:"Type of Pole",U:sc.Y1},group:{c:"String",d:"Group of ThermoPoleDest this pole belongs to"}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1E3;this.group=
d.group;this.data=sc.Y1[d.poleType]||sc.Y1.SHORT;this.b.F(this.data.size.x,this.data.size.y,this.data.size.z);Vec2.Oa(this.b.padding,4,4);if(a=ig.Rf.get("puzzle2"))this.s=new ig.ia(a.sheet);this.Ac.n=new ig.Vt(y);sc.uL.GIb(this)},Ge:function(a){sc.uL.B_a(this.group);this.s&&this.s.Tc();this.parent(a)},Np:function(){this.ul(3)},update:function(){if(this.Ac.state!=b.NONE){this.Ac.n.ja();if(this.Ac.state.oia&&this.Ac.n.Xb())this.Ac.state==b.nwa?this.Ac.state=b.NONE:this.Ona()}this.parent()},Gh:function(){if(this.s){var a=
this.data.src,c=this.b.size.y+this.b.size.z;this.Ua[0].HK(this,16,c,"NO_EXPAND",1,q,this.s,a.x,a.y);var d=this.Ua[1],f=this.Ua[2];if(this.Ac.state==b.nwa){var m=this.Ac.yga*16;d.HK(this,16,c,"NO_EXPAND",1,q,this.s,a.x+m,a.y);c=d.size.y+d.size.z;a=Math.round(this.Ac.n.get()*c);d.gp(a,0);d.ge(1);d.qg="lighter";f.FH()}else if(this.Ac.element){var m=this.Ac.element*16,n=this.Ac.n.n,o=0.3,t=4;if(this.Ac.state.blink){o=0.5;t=8}n=(1-o+o/2*Math.sin(Math.PI*2*n*t))*(4*n*t).Rb(0,1);d.gp(0,0);d.HK(this,16,c,
"NO_EXPAND",1,q,this.s,a.x+m,a.y);d.qg="lighter";d.ge(Math.min(n*2,1));if(n>0.5){f.HK(this,16,c,"NO_EXPAND",1,q,this.s,a.x+m,a.y);f.qg="lighter";f.ge(n*2-1)}else f.FH()}else{d.FH();f.FH()}this.Ya.L0(this)}},WBa:function(a,b,c,d){this.Ac.yga=this.Ac.element;this.Ac.element=a;!d&&(c!=this.Ac.state||this.Ac.yga!=this.Ac.element)&&this.OMa(a,b,c);this.Ac.n.set(8,ig.Ol.br);this.Ac.state=c;if(!this.Ac.Uv.length)if(this.data.KC){this.Qaa(4-this.data.KC/2);this.Qaa(4+this.data.KC/2)}else this.Qaa(4)},Ft:function(a){this.Ac.state==
b.Z1&&this.Ac.n.rab(a)},Qaa:function(a){var b=new ig.Bw(this,ig.mk.XL,0.1,0.3,-1,1,y);b.LB(0,0,a);ig.pg.ey(b);this.Ac.Uv.push(b)},Ona:function(){this.G.handle&&this.G.handle.stop();this.G.sheet.va("discharge",this);this.G.handle=q;this.Ac.n.set(0.5,ig.Ol.br);this.Ac.yga=this.Ac.element;this.Ac.element=0;this.Ac.state=b.nwa;for(var a=this.Ac.Uv.length;a--;)this.Ac.Uv[a].stop();this.Ac.Uv.length=0},OMa:function(a,c,f){c=d[a]+"Circle"+(c?"Down":"Up");this.G.sheet.va(c,this,{offset:{z:12}});if(f==b.Z1){this.G.handle&&
this.G.handle.stop();c=d[a]+"Temp";this.G.handle=this.G.sheet.va(c,this,{offset:{x:1,z:this.data.KC?12+this.data.KC:12},duration:-1})}},sj:function(c){if(!c.Nn||c.sa!=sc.pd.PLAYER)return y;var d=c.Gf();if(!sc.uL.GJa(this,c,this.Ac.element==d)){sc.Ta.Oi(this,c.aj(this),sc.Wb.NONE,c.Gf(),y,y,h);return h}var f=y;this.Ac.state!=b.Z1&&c.dCa(0.015);if(this.data.KC){var f=c.b.g.z>this.b.g.z+this.b.size.z/2,l=ig.qd.Toa(a,c.b,this.b);l.z=f?this.b.g.z+12:this.b.g.z+this.data.KC+12;c.b3a(l,0.5)}this.WBa(d,f,
sc.uL.qzb(this));if(this.Ac.element!=this.Ac.yga){if(this.Ac.state==b.wL)return h;c.n<0.2&&c.zta(0.2)}c.K2(this);return y},PFb:function(){this.G.handle&&this.G.handle.stop();this.G.handle=q;this.WBa(this.Ac.element,y,b.wL)},r7a:function(a){this.WBa(a,y,b.wL,h)},jWb:J(),Qra:function(){this.Ac.element&&this.Ona()},x5:function(){return this.data.KC},uca:function(a,b,c,d){if(c.x!=Constants.kC)return 0;b=a.z>this.b.g.z+this.b.size.z/2;this.tb(a);a.z=b?this.b.g.z+12:this.b.g.z+this.data.KC+12;return d},
GG:N(y)});var c={rxa:1,OPa:2,sxa:3};ig.wa.ElementPoleDest=ig.Wd.extend({group:q,element:q,state:c.rxa,t:new ig.u({Dd:h,attributes:{group:{c:"String",d:"Group of ThermoPoleDest this pole belongs to"},element:{c:"String",d:"Element of Destination",U:["HEAT","COLD","SHOCK","WAVE"]},uc:{c:"VarName",d:"Variable to be se to true when switch is activated"},Mw:{c:"Number",d:"If >0: only keep switch active for said amount of time"}}}),G:{sheet:new ig.ud("puzzle.thermo-pole"),handle:q,zj:q},f:function(a,b,
d,f){this.parent(a,b,d,f);this.b.type=ig.ca.VIRTUAL;this.b.F(16,16,0);this.b.Fd=1E3;this.group=f.group;this.element=sc.ha[f.element]||sc.ha.HEAT;this.uc=f.variable;this.Mw=f.activeTime;a=ig.Rf.get("puzzle2");this.Bd({sheet:{src:a.sheet,width:16,height:16,offX:0,offY:240},SUB:[{time:0.1,frames:[0],repeat:h,SUB:[{name:"off"},{name:"tmpOn"},{name:"tmpOnEnd"},{name:"on"}]},{tileOffset:this.element*2-1,repeat:h,SUB:[{name:"off",time:0.3,frames:[0,0,0,0],framesGfxOffset:[0,1,0,0,0,-1,0,0]},{name:"tmpOn",
time:0.1,frames:[1,1,1,1],framesAlpha:[1,0.66,0.33,0.66,1]},{name:"tmpOnEnd",time:0.033,frames:[1,1,1,1],framesAlpha:[1,0.5,0.25,0.5,1]},{name:"on",time:0.1,frames:[1,1,1,1],framesAlpha:[1,0.9,0.8,0.9,1]}]}]});if(a=ig.ma.get(this.uc)){this.jdb();this.state=c.sxa}sc.uL.DIb(this,a)},Ge:function(a){this.n&&this.vOa();sc.uL.B_a(this.group);this.parent(a)},update:function(){if(this.n){this.n=this.n-ig.i.ja;this.n<=1&&this.rk!="tmpOnEnd"&&this.Ma("tmpOnEnd");if(this.n<=0){this.n=0;sc.uL.A7a(this);this.vOa()}}if(this.state==
c.OPa&&sc.uL.EFb(this)){this.state=c.IDLE;this.Ma("off",h)}this.parent()},qc:function(){return this.state==c.sxa},GJa:function(a,b,f){var l=d[this.element]+"Charge";this.state=b?c.sxa:c.OPa;a.G.handle&&a.G.handle.stop();if(b)for(b=f.length;b--;){var m=this.G.sheet.va(l,this,{target2:f[b],target2Align:ig.Pa.TOP});if(f[b]==a){m.F7(this);this.G.handle=m}}else a.G.handle=this.G.sheet.va(l+"Prepare",this,{target2:a,target2Align:ig.Pa.TOP,duration:-1})},Aj:function(a){a.state==ig.ev.fka&&this.cOb()},Qra:function(){this.vOa()},
cOb:function(){this.G.handle=q;sc.uL.bGb(this);this.G.sheet.va(d[this.element]+"Activate",this);ig.ma.set(this.uc,h);this.jdb()},jdb:function(){if(!this.G.zj){var a=new ig.Bw(this,ig.mk.L,0.1,0.1,-1,1,y);a.LB(0,0,0);ig.pg.ey(a);this.G.zj=a}if(this.Mw){this.n=this.Mw;this.Ma("tmpOn",h)}else this.Ma("on",h)},vOa:function(){this.G.zj&&this.G.zj.stop();this.G.zj=q;ig.ma.set(this.uc,y);this.G.handle&&this.G.handle.F7(q);this.G.handle=q;this.n=0;this.state=c.rxa;this.Ma("off",h)}});var d={};d[sc.ha.HEAT]=
"flame";d[sc.ha.COLD]="ice";d[sc.ha.SHOCK]="shock";d[sc.ha.WAVE]="wave";var f={fI:0,$c:1,Sob:2};sc.oL.ELEMENT_POLE={t:{attributes:{element:{c:"String",d:"Element the pole is charged to",U:sc.ha},size:{c:"String",d:"Type of Pole to select",U:f}}},Mca:function(a,c,d){for(var l=sc.ha[d.element],d=f[d.size],m=c.length;m--;){var n=c[m];n instanceof ig.wa.ElementPole&&!(n.Ac.state!=b.Z1&&n.Ac.state!=b.wL)&&n.Ac.element==l&&!(d==f.$c&&n.data.KC)&&(d!=f.Sob||n.data.KC)&&a.push(n)}return a}}});ig.J=h;
ig.N("game.feature.puzzle.entities.push-pull-block").O("impact.base.actor-entity","impact.base.entity","game.feature.puzzle.components.push-pullable").K(function(){sc.UV={};ig.wa.PushPullBlock=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{hIb:{c:"String",d:"Type of push pull block",U:sc.UV},Zg:{c:"VarCondition",d:"Condition for Block to spawn",xc:h}}}),G:{sheet:new ig.ud("puzzle"),Xd:q},cm:q,xua:h,Vma:0.5,KKa:0,nma:h,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.Fd=1E3;this.b.kj=
0;this.b.di=-1;this.b.Cd.size=32;if(a=sc.UV[d.pushPullType]){this.Pb=a.Pb;Vec3.assign(this.b.size,a.size);if(a.Kx){b=ig.Rf.get("puzzle");a.Ba.sheet.src=b.sheet}this.Bd(a.Ba);this.KKa=a.direction||sc.a$.ALL}this.cm=new sc.FSa(this)},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}this.cm.setActive(h);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showQuick",this)}},po:function(){this.G.Xd=ig.r.G.Mf.va("hideQuick",this,{align:ig.Pa.CENTER,callback:this});this.cm.setActive(y)},Aj:function(a){if(a.ek()&&
this.G.Xd){this.G.Xd=q;this.hide()}},update:function(){this.cm.am();this.parent()},sr:function(){this.cm.Eu();if(this.b.g.z==this.b.pc){this.b.Fd=1;this.b.kj=0.3}},gw:function(a,b){this.cm.gw(a,b)},Km:function(){this.cm.Km()},CT:function(){this.cm.CT()},Ge:function(a){this.parent(a);this.cm.Ge()},Xra:function(){if(!this.afa&&!this.cm.wc())return y;this.afa=h;this.b.vl(ig.ca.NPBLOCK);this.cm.setActive(y);return h},FJa:function(a){this.afa=y;a&&this.G.sheet.va("boxThud",this);this.b.vl(ig.ca.BLOCK);
this.cm.setActive(h)}});sc.UV.Large={size:{x:32,y:32,z:32},Pb:ig.hd.METAL,Kx:h,Ba:{sheet:{src:q,width:32,height:64,offX:224,offY:128},aboveZ:1,wallY:0.05,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"moveV",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h},{name:"moveH",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h}]}};sc.UV.BergenLeftRight={size:{x:32,y:32,z:32},Pb:ig.hd.WOOD,direction:sc.a$.LEFT_RIGHT,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:32,
height:64,offX:32,offY:32},aboveZ:1,wallY:0.05,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"moveV",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h},{name:"moveH",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h}]}};sc.UV.BergenUpDown={size:{x:32,y:32,z:32},Pb:ig.hd.WOOD,direction:sc.a$.UP_DOWN,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:32,height:64,offX:64,offY:32},aboveZ:1,wallY:0.05,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"moveV",
time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h},{name:"moveH",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h}]}};sc.UV.SmallTest={size:{x:16,y:16,z:16},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:16,height:32},aboveZ:1,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"move",time:0.05,frames:[0,1,2,1],repeat:h}]},ad:{idle:"default",move:"move"}};ig.wa.WavePushPullBlock=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{hIb:{c:"String",d:"Type of push pull block",
U:sc.UV},Zg:{c:"VarCondition",d:"Condition for Block to spawn",xc:h}}}),cm:q,mga:y,xua:h,Vma:0.5,nma:h,G:{sheet:new ig.ud("puzzle"),Xd:q},f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.Fd=1E3;this.b.kj=0;this.b.di=-1;this.b.Cd.size=32;this.b.F(32,32,32);a=ig.Rf.get("waveblock");this.Bd({sheet:{src:a.sheet,width:32,height:64,offX:a.x,offY:a.y},aboveZ:1,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"phasing",time:1,frames:[0],repeat:y,renderMode:"lighter"},{name:"moveV",
time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h},{name:"moveH",time:0.03,frames:[0,0],framesGfxOffset:[0,0,0,0],repeat:h}]});this.cm=new sc.FSa(this)},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}this.cm.setActive(h);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showQuick",this)}},po:function(){this.G.Xd=ig.r.G.Mf.va("hideQuick",this,{align:ig.Pa.CENTER,callback:this});this.cm.setActive(y)},Aj:function(a){if(a.ek()&&this.G.Xd){this.G.Xd=q;this.hide()}},update:function(){this.cm.am();
this.parent()},sr:function(){this.cm.Eu();if(this.b.g.z==this.b.pc){this.b.Fd=1;this.b.kj=0.3}},Km:function(){this.cm.Km()},CT:function(){this.cm.CT()},Ge:function(a){this.parent(a);this.cm.Ge()},gw:function(a,b){this.cm.gw(a,b)},dw:function(){if(this.mga){this.mga=y;this.Ma("default")}},YM:function(){this.mga=y;this.Ma("default")},sj:function(a){if(this.mga)return y;if(this.cm.wc()){if(a.Gf()!=sc.ha.WAVE||!(a.Nn&&a.zb.wi("CHARGED")||a instanceof sc.oja))return y;this.mga=h;a.it(this);this.Ma("phasing");
return y}},Xra:function(){if(!this.afa&&!this.cm.wc())return y;this.afa=h;this.b.vl(ig.ca.NPBLOCK);this.cm.setActive(y);return h},FJa:function(a){this.afa=y;a&&this.G.sheet.va("boxThud",this);this.b.vl(ig.ca.BLOCK);this.cm.setActive(h)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.push-pull-dest").O("impact.base.actor-entity","impact.base.entity","game.feature.puzzle.components.push-pullable").K(function(){var a=Vec2.create(),b=Vec3.create();sc.Axa={};var c={PERMANENT:1,TEMP:2};ig.wa.PushPullDest=ig.Wd.extend({uc:q,Pva:0,saveType:0,$Z:q,zsa:y,iPa:0,S6:0,lca:y,G:new ig.ud("puzzle"),$b:{AEb:new ig.ka("media/sound/puzzle/push-click.ogg",1)},t:new ig.u({Dd:h,attributes:{GWb:{c:"String",d:"Type of push pull dest",U:sc.Axa},Pva:{c:"Number",d:"Z Movememnt aber PushPullable has been placed"},
saveType:{c:"String",d:"How state of box should be saved",U:c},uc:{c:"String",d:"Variable to increase when push-pullable is placed"}}}),f:function(a,b,i,j){this.parent(a,b,i,j);this.b.type=ig.ca.BLOCK;this.b.Fd=0;this.b.kj=0.3;this.b.di=-1;this.b.Cd.size=16;this.S6=new ig.Vt;this.uc=j.variable||q;this.Pva=j.zMove||0;this.saveType=c[j.saveType||"PERMANENT"];this.iPa=this.b.g.z;if(a=sc.Axa[j.pushPullDestType]){this.Pb=a.Pb;Vec3.assign(this.b.size,a.size);if(a.Kx){b=ig.Rf.get("puzzle");a.Ba.sheet.src=
b.sheet}this.Bd(a.Ba)}this.yEb()},V7a:function(b,c){var i=ig.qd.Wk(this.b,b.b,a);if(Vec2.length(i)<=8){Vec2.assign(c,this.b.g);return h}return y},UGb:function(a){this.VJb(a);this.S6.set(0.2,ig.Ol.br);this.G.va("boxLockIn",a)},VJb:function(a){this.$Z={id:a.zu};this.zsa=h;ig.ma.set(this.YVa(),this.$Z);this.uc&&ig.ma.add(this.uc,1)},yEb:function(){(this.$Z=ig.ma.get(this.YVa()))&&this.IH(this.iPa+this.Pva)},YCb:function(){if(!this.zsa&&this.$Z){var a=ig.r.Wzb(this.$Z.id);if(a){var c=this.lc(ig.Pa.BOTTOM,
b);a.gw(c,h);a.cm.setActive(y);this.zsa=h}}},YVa:function(){return(this.saveType==c.TEMP?"tmp.":"map.")+"entity"+this.zu+"_placed"},update:function(){if(!this.S6.Xb()){this.S6.ja();var a=this.S6.get();if(this.lca)this.IH(this.iPa+a*this.Pva);else if(a==1){this.$b.AEb.play();this.S6.set(Math.abs(0.4),ig.Ol.br);this.lca=h}}this.parent()},sr:function(){!this.zsa&&this.$Z&&this.YCb()},Km:function(){this.cm.Km()},CT:function(){this.cm.CT()}});sc.Axa.DEFAULT={size:{x:32,y:32,z:0},Pb:ig.hd.METAL,Kx:h,Ba:{sheet:{src:q,
width:32,height:32,offX:224,offY:96},aboveZ:1,SUB:[{name:"default",time:1,frames:[0],repeat:y}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.sliding-block").O("impact.base.actor-entity","impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a=Vec2.create(),b={};ig.wa.SlidingBlock=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{}}),Cu:y,Nh:Vec2.create(),nma:h,xua:h,G:{sheet:new ig.ud("puzzle.sliding-block"),handle:q},f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.BLOCK;this.b.Fd=1;this.b.kj=0.3;this.b.di=-1;this.b.Cd.size=16;this.b.F(32,32,32);this.Pb=ig.hd.METAL;a=ig.Rf.get("puzzle");
this.Bd({sheet:{src:a.sheet,width:32,height:64,offX:224,offY:192},aboveZ:1,wallY:0.1,SUB:[{name:"default",time:1,frames:[0],repeat:y}]})},sj:function(c){var d=c.aj(this),f=y;!c.Nn&&!c.zb.wi("BOMB")&&(f=h);c.Nn&&!c.zb.wi("CHARGED")&&(f=h);if(this.Cu||f){sc.Ta.Oi(this,d,sc.Wb.NONE,c.Gf(),h,y,h);return h}Vec2.Lc(ig.Jc.uq(c.eda(this),this.Nh));c=Vec2.assign(a,this.Nh);d=ig.r.Ie.Il(b);if(ig.r.Uq(d,this,c.x,c.y,0,0,0,ig.ca.IGNORE))this.G.sheet.va("blocked",this);else{this.Cu=h;this.G.handle=this.G.sheet.va("slide",
this,{duration:-1})}return h},update:function(){if(this.Cu){var c=Vec2.assign(a,this.Nh);Vec2.length(c,400*ig.i.ja);var d=ig.r.Ie.Il(b);if(ig.r.Uq(d,this,c.x,c.y,0,0,1,ig.ca.IGNORE,q,q,1)){Vec2.Bk(c,d.Ne);this.Cu=y;this.G.handle&&this.G.handle.stop();this.b.V.z=0}d=this.b;this.l(d.g.x+c.x,d.g.y+c.y,d.g.z,h)}this.parent()}})});ig.J=h;
ig.N("game.feature.puzzle.entities.switch").O("impact.base.entity").K(function(){ig.wa.Switch=ig.Wd.extend({b3:h,uc:"",qc:y,Na:{hx:new ig.ka("media/sound/battle/hit-7.ogg",0.4),rM:new ig.ka("media/sound/puzzle/switch-activate-2.ogg",1)},t:new ig.u({Dd:h,attributes:{uc:{c:"VarName",d:"Variable set to true when switch is hit"}},label:function(){return"[ "+this.uc+" ]"}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.VIRTUAL;this.b.F(16,16,24);this.b.K7(4,4);this.b.Fd=1E3;a=ig.Rf.get("puzzle");
this.Bd({sheet:{src:a.sheet,width:24,height:24,offX:0,offY:64},repeat:h,time:0.15,SUB:[{name:"off",frames:[6]},{name:"switchOn",frames:[6]},{name:"on",frames:[6]},{name:"switchOff",frames:[6]},{name:"off",frames:[0,0,0,0,0,0],framesSpriteOffset:[0,0,12,0,0,12,0,0,13,0,0,14,0,0,14,0,0,13]},{name:"switchOn",time:0.07,frames:[1,2],framesSpriteOffset:[0,0,13,0,0,13]},{name:"on",frames:[3,3,3,3,3,3],framesSpriteOffset:[0,0,12,0,0,12,0,0,13,0,0,14,0,0,14,0,0,13]},{name:"switchOff",time:0.07,frames:[4,5],
framesSpriteOffset:[0,0,13,0,0,13]}]});this.uc=d.variable;ig.ma.JB(this.uc,0);this.qc=ig.ma.get(this.uc);this.Ma(this.qc?"on":"off")},sj:function(a){if(a.zb&&a.zb.wi("NO_PUZZLE"))return y;ig.ma.set(this.uc,!ig.ma.get(this.uc));sc.Ta.Oi(this,a.aj(this),sc.Wb.MEDIUM,a.Gf(),y,y,h);ig.ah.gh(this.Na.hx,this);ig.ah.gh(this.Na.rM,this);return h},ag:function(){var a=ig.ma.get(this.uc);if(this.qc!=a){this.qc=a;this.Ma(this.qc?"switchOn":"switchOff",h,this.qc?"on":"off",h)}}})});ig.J=h;
ig.N("game.feature.puzzle.entities.destructible").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.tp={};var a=Vec2.create();ig.wa.Destructible=ig.Wd.extend({of:q,jga:q,Ura:q,$ra:q,ix:q,Hf:0,xX:q,Na:{hx:new ig.ka("media/sound/battle/block-hit.ogg",1),Cp:new ig.ka("media/sound/battle/hit-block.ogg",0.5)},G:{Sb:new ig.ud("puzzle.destructible"),tga:q,Ob:q,Zb:q,KX:0,yR:0,$T:q,vv:q},ri:{key:q,delay:0,Sv:-1,padding:0},LG:q,vD:q,zA:y,Kg:q,Bm:0,XN:y,Nia:0,t:new ig.u({Dd:h,attributes:{C_a:{c:"String",
d:"Type of destructible object",U:sc.tp,ok:h},of:{c:"EnemyType",d:"Enemy to spawn after destruction",xc:h,ok:h},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},zA:{c:"Boolean",CUa:"If true, block path map and update when destroyed"},jga:{c:"Boolean",d:"If true, then destructible stays destroyed after reentering map"},Ura:{c:"VarName",d:"Variable to increase by one when destroyed",I:h},$ra:{c:"VarName",d:"Variable to increase by one when destroyed",I:h}}}),f:function(a,c,d,f){this.parent(a,
c,d,f);this.b.type=ig.ca.BLOCK;this.b.Fd=1;this.b.kj=0.5;this.jga=f.permaDestruct||y;this.Ura=f.onDestructIncrease||q;this.$ra=f.onPreDestructIncrease||q;c=ig.Rf.get("effect");if(a=sc.tp[f.desType]){this.Hf=a.Hf;this.b.size=a.size;if(a.Jj)this.b.type=a.Jj;this.ix=a.ix||[1,1,1,1];this.vD=a.vD;this.xX=a.dk;this.G.KX=(a.KX||0)*2*Math.PI;this.G.yR=a.yR||0.1;this.XN=a.XN||y;this.LG=a.LG;this.Pb=a.Pb||q;if(this.LG||a.wHb)this.jga=h;a.ri&&ig.merge(this.ri,a.ri);if(a.Zb){d=ig.copy(a.Zb);if(!d.sheet)d.sheet=
c.sheet;this.G.Zb=new ig.Bi(d)}if(a.Ob)this.G.Ob=new ig.Bi(a.Ob);if(a.e_)this.G.tga=new ig.Bi(a.e_);if(f.enemyInfo&&f.enemyInfo.type)this.of=new sc.AP(f.enemyInfo);c=ig.Rf.get("destruct");a=ig.copy(a.Ba);if(a.namedSheets)for(var i in a.namedSheets)a.namedSheets[i].src=c.sheet;else if(!a.sheet.src)a.sheet.src=c.sheet;this.Bd(a)}else{this.b.size.x=32;this.b.size.y=32}this.zA=f.blockNavMap;if(!window.Ed&&this.jga&&ig.ma.get(this.Q1a())){this.Nia=2;this.ze()}this.Bm=Math.random()*5+1},show:function(a){this.parent(a);
if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",this,{})}if(this.zA)this.Kg=ig.navigation.eS(this)},Ge:function(a){this.parent(a);this.cua();this.Kg&&this.Kg.remove();this.of&&this.of.Ka();this.G.Zb&&this.G.Zb.Ka();this.G.Ob&&this.G.Ob.Ka();this.G.tga&&this.G.tga.Ka()},LJa:function(){this.cua()},Q1a:function(){return"map._entity"+this.zu+"_destroyed"},update:function(){if(this.G.vv){if(this.G.yR>0){this.G.yR=this.G.yR-ig.i.ja;this.G.yR<=0&&this.z8()}}else if(!this.G.$T){if(this.Bm<=0)this.Bm=Math.random()*
2+4;this.Bm=this.Bm-ig.i.ja;if(!this.XN&&this.Ua.length>1){var a=this.Ua[1],c=a.size.y+a.size.z,d=c,f=0;if(this.Bm<1){d=Math.round((this.Bm-0.08)/0.92*c);d<0&&(d=0);f=Math.round((1-this.Bm/0.92)*c);f<0&&(f=0)}a.gp(d,f)}}if(this.ri.Sv>=0){this.ri.Sv=this.ri.Sv-ig.i.ja;this.ri.Sv<0&&this.oh(h)}this.parent()},Aj:function(a){if(a==this.G.$T){if(this.G.$T.ek()){this.G.$T=q;this.oh()}}else if(a==this.G.vv&&this.G.vv.ek()){if(this.G.yR>0){this.G.yR=0;this.z8()}this.ze()}},sj:function(b){if(this.G.$T||this.G.vv||
(!b.zb||!b.zb.wi("BOMB"))&&!ig.gl.ut(this,40))return y;var c=b.eda(this,a),d=b.zb&&b.zb.wi("CHARGED"),f=d?sc.Wb.MEDIUM:sc.Wb.LIGHT,i=b.aj(this);if(!this.ix[c]||this.xX&&!this.xX(b)){if(!this.ix[c]){this.G.Sb.va("shieldBlink",this,{spriteFilter:[2]});ig.ah.gh(this.Na.Cp,this)}return y}if(this.LG){if(!b.zb||!b.zb.wi(this.LG))return y;c=sc.JE[this.LG];if(sc.map.Poa(c)==0)return h;sc.q.T.removeItem(sc.map.Qoa(c),1)}this.Hf=this.Hf-(d?2:1);this.Hf<=0&&(f=sc.Wb.MASSIVE);sc.Ta.Oi(this,i,f,b.Gf(),y,y,h);
this.Hf<=0?this.qNa():this.vD&&ig.ah.gh(this.vD,this);return h},qNa:function(){if(!this.Ve&&!this.G.vv&&!this.G.$T){this.Nia=1;this.$ra&&ig.ma.add(this.$ra,1);this.Hf=0;this.G.tga?this.G.$T=this.G.tga.va(this,{align:"CENTER",callback:this}):this.oh();this.ri.key&&this.E4a(this.ri.XMb)}},oh:function(a){if(!this.Ve&&!this.G.vv){this.Hf=0;this.Ma("hit",h);var c=this.tb();this.b.type=ig.ca.IGNORE;a||this.cua();if(this.G.Ob)this.G.vv=this.G.Ob.Cg(c.x,c.y,this.b.g.z+this.b.size.z/2,this,{callback:this});
else{this.z8();this.ze()}}},cua:function(){if(this.Nia==1){this.Nia=2;this.jga&&ig.ma.set(this.Q1a(),h);this.Ura&&ig.ma.add(this.Ura,1)}},E4a:function(a){for(var c=this.b,d=this.ri.padding,c=ig.r.Br(c.g.x-d,c.g.y-d,c.g.z-d,this.b.size.x+2*d,this.b.size.y+2*d,this.b.size.z+2*d,this),d=c.length;d--;){var f=c[d];f.Y7a&&f.Y7a(this.ri.key,a)}},Y7a:function(a,c){if(!this.G.vv&&!this.G.$T&&this.ri.key==a&&!(this.ri.Sv>=0)){this.ri.Sv=c;this.Nia=1;this.cua();this.E4a(c+this.ri.delay)}},z8:function(){var a=
this.tb();this.G.Zb&&this.G.Zb.Cg(a.x,a.y,this.b.g.z,q,{angle:this.KX});if(this.of){a={enemyInfo:this.of.pD()};ig.r.Pe("Enemy",this.b.g.x,this.b.g.y,this.b.g.z,a).Ds=0.05}},GG:function(a,c){var d=c.dir;return this.ix[Math.abs(d.x)>Math.abs(d.y)?ig.Jc.Lk[d.x>0?"WEST":"EAST"]:ig.Jc.Lk[d.y>0?"NORTH":"SOUTH"]]}});sc.tp.boxMedium={Hf:1,size:{x:24,y:24,z:22},Ob:{sheet:"puzzle.destructible",name:"medium"},Zb:{sheet:"cube-debris",name:"medium"},Ba:{sheet:{src:q,width:24,height:48,offX:64},SUB:[{name:"default",
time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.boxMedNorth={Hf:1,size:{x:24,y:24,z:22},Ob:{sheet:"puzzle.destructible",name:"medium"},Zb:{sheet:"cube-debris",name:"medium"},ix:[1,0,0,0],Ba:{sheet:{src:q,width:24,height:48,offX:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"default",time:1,frames:[2],repeat:y,aboveZ:1}]}};sc.tp.boxMedEast={Hf:1,size:{x:24,y:24,z:22},Ob:{sheet:"puzzle.destructible",
name:"medium"},Zb:{sheet:"cube-debris",name:"medium"},ix:[0,1,0,0],Ba:{sheet:{src:q,width:24,height:48,offX:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"default",time:1,frames:[5],repeat:y,aboveZ:1}]}};sc.tp.boxMedSouth={Hf:1,size:{x:24,y:24,z:22},Ob:{sheet:"puzzle.destructible",name:"medium"},Zb:{sheet:"cube-debris",name:"medium"},ix:[0,0,1,0],Ba:{sheet:{src:q,width:24,height:48,offX:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},
{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"default",time:1,frames:[3],repeat:y,aboveZ:1}]}};sc.tp.boxMedWest={Hf:1,size:{x:24,y:24,z:22},Ob:{sheet:"puzzle.destructible",name:"medium"},Zb:{sheet:"cube-debris",name:"medium"},ix:[0,0,0,1],Ba:{sheet:{src:q,width:24,height:48,offX:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"default",time:1,frames:[4],repeat:y,aboveZ:1}]}};sc.tp.boxLarge={Hf:2,size:{x:32,y:32,z:32},Ob:{sheet:"puzzle.destructible",
name:"large"},Zb:{sheet:"cube-debris",name:"large"},vD:new ig.ka("media/sound/battle/block-hit.ogg",0.7),Ba:{sheet:{src:q,width:32,height:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.iceBlock={Hf:1,size:{x:24,y:24,z:24},Pb:ig.hd.ICE,Ob:{sheet:"puzzle.destructible",name:"iceBlockBoom"},dk:function(a){return a.zb&&a.zb.element==sc.ha.HEAT},Ba:{sheet:{src:q,width:24,height:48,offX:96,offY:96},SUB:[{name:"default",time:1,frames:[0],
repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.bombBlock={Hf:1,size:{x:32,y:32,z:32},Ob:{sheet:"puzzle.destructible",name:"bombBlockBoom"},Zb:{name:"bombBlockDebris"},dk:function(a){return a.zb&&a.zb.wi("BOMB")},Ba:{sheet:{src:q,width:32,height:48,offX:0,offY:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.bombWallNorth={Hf:1,size:{x:32,y:4,z:48},Ob:{sheet:"puzzle.destructible",name:"bombBlockBoom"},Zb:{name:"bombBlockDebrisWall"},
KX:0.5,dk:function(a){return a.zb&&a.zb.wi("BOMB")},Ba:{sheet:{src:q,width:32,height:48,offX:0,offY:112},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.bombWallEast={Hf:1,size:{x:16,y:32,z:32},Ob:{sheet:"puzzle.destructible",name:"bombBlockBoom"},Zb:{name:"bombBlockDebrisWall"},KX:0.75,dk:function(a){return a.zb&&a.zb.wi("BOMB")},Ba:{sheet:{src:q,width:16,height:64,offX:64,offY:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",
time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.bombWallWest={Hf:1,size:{x:16,y:32,z:32},Ob:{sheet:"puzzle.destructible",name:"bombBlockBoom"},Zb:{name:"bombBlockDebrisWall"},KX:0.25,dk:function(a){return a.zb&&a.zb.wi("BOMB")},Ba:{sheet:{src:q,width:16,height:64,offX:64,offY:64},flipX:h,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.keyWallNorth={Hf:1,size:{x:32,y:4,z:32},e_:{sheet:"puzzle.destructible",name:"keyDoorPre"},LG:"DUNGEON_KEY",
Ba:{sheet:{src:q,width:32,height:32,offX:96,offY:48},offset:{x:0,y:-4,z:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.keyPillar={Hf:1,Jj:ig.ca.FENCE,size:{x:16,y:16,z:96},e_:{sheet:"puzzle.destructible",name:"keyPillarPre"},Ob:{sheet:"puzzle.destructible",name:"keyPillarBoom"},ri:{key:"KEY_PILLAR",delay:0.1,padding:8,XMb:1},LG:"DUNGEON_KEY",Ba:{sheet:{src:q,width:16,height:48,offX:176,offY:48},pivot:{x:8,y:48},SUB:[{name:"default",
time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.keyPillarAR={Hf:1,Jj:ig.ca.FENCE,size:{x:16,y:16,z:96},e_:{sheet:"puzzle.destructible",name:"keyPillarPre"},Ob:{sheet:"puzzle.destructible",name:"keyPillarBoom"},ri:{key:"KEY_PILLAR",delay:0.1,padding:8},dk:N(y),wHb:h,XN:h,Ba:{namedSheets:{floor:{src:q,width:16,height:16,offX:144,offY:80},ar:{src:q,width:16,height:48,offX:160,offY:48}},SUB:[{name:"default",sheet:"floor",time:1,frames:[0],repeat:y,shapeType:"Z_FLAT",
pivot:{x:8,y:16}},{name:"default",sheet:"ar",time:0.05,frames:[0,0,0,0,0,0],framesAlpha:[1,1,1,0.8,0.6,0.8],repeat:h,renderMode:"lighter",pivot:{x:8,y:48}}]}};sc.tp.masterKeyWallColdDungeon={Hf:1,size:{x:64,y:4,z:64},e_:{sheet:"puzzle.destructible",name:"keyDoorMasterPre"},LG:"DUNGEON_MASTER_KEY",Ba:{sheet:{src:"media/map/cold-dng.png",width:64,height:64,offX:176,offY:416,xCount:1},offset:{x:0,y:-4,z:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};
sc.tp.masterKeyWallHeatDungeon={Hf:1,size:{x:64,y:4,z:48},e_:{sheet:"puzzle.destructible",name:"keyDoorMasterPre"},LG:"DUNGEON_MASTER_KEY",Ba:{sheet:{src:"media/map/heat-dng.png",width:64,height:48,offX:320,offY:544,xCount:1},offset:{x:0,y:-4,z:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.masterKeyWallTreeDungeon={Hf:1,size:{x:64,y:4,z:48},e_:{sheet:"puzzle.destructible",name:"keyDoorMasterPre"},LG:"DUNGEON_MASTER_KEY",Ba:{sheet:{src:"media/map/shockwave-dng.png",
width:64,height:48,offX:320,offY:544,xCount:1},offset:{x:0,y:-4,z:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.autumnWall={Hf:1,size:{x:32,y:8,z:40},Ob:{sheet:"puzzle.destructible",name:"wallBlockBoom"},Zb:{sheet:"area.autumn",name:"wallBoom"},vD:new ig.ka("media/sound/battle/block-hit.ogg",0.7),Ba:{sheet:{src:"media/map/autumn-outside.png",width:32,height:48,offX:32,offY:768},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",
time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.autumnWall2={Hf:1,size:{x:48,y:8,z:40},Ob:{sheet:"puzzle.destructible",name:"wallBlockBoom"},Zb:{sheet:"area.autumn",name:"wallBoom"},vD:new ig.ka("media/sound/battle/block-hit.ogg",0.7),Ba:{sheet:{src:"media/map/autumn-outside.png",width:48,height:48,offX:32,offY:816},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}};sc.tp.autumnWall3={Hf:1,size:{x:32,y:8,z:40},Ob:{sheet:"puzzle.destructible",name:"wallBlockBoom"},
Zb:{sheet:"area.autumn",name:"wallBoom"},vD:new ig.ka("media/sound/battle/block-hit.ogg",0.7),Ba:{sheet:{src:"media/map/autumn-outside.png",width:32,height:48,offX:32,offY:864},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.item-destruct").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.menu.menu-model").K(function(){sc.bd={};var a=Vec3.create();ig.wa.ItemDestruct=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{C_a:{c:"String",d:"Type of destructible object",U:sc.bd,ok:h},Rc:{c:"ItemsDropRate",d:"Items dropped",xc:h},jO:{c:"Boolean",d:"True if cannot be respawned",ab:"false",I:h},NUb:{c:"Boolean",d:"True if cannot be destroyed",ab:"true",I:h},trigger:{c:"String",
d:"var tp set to true once the prop has been destroyed. Only works once.",I:h},MUb:{c:"VarName",d:"add 1 to the given variable",I:h},of:{c:"EnemyType",d:"Enemy to spawn after destruction",xc:h,ok:h}}}),Bm:0,vDa:y,D5:[],wOa:q,mKa:y,Apa:q,of:q,o0a:-1,oma:q,xna:q,trigger:"",g4a:y,f:function(a,c,d,f){this.parent(a,c,d,f);this.b.type=ig.ca.VIRTUAL;this.b.Fd=1;this.b.kj=0.5;this.b.kn(ig.jk.uxa);a=sc.bd[f.desType];this.mKa=f.perma||y;this.trigger=f.trigger||"";this.g4a=f.indest||y;if(a){if(f.enemyInfo&&
f.enemyInfo.type){this.of=new sc.AP(f.enemyInfo);this.o0a=f.enemyInfo.chance||-1}this.wOa=a;Vec3.assign(this.b.size,a.size);if(a.gB!=g)this.b.Fd=a.gB;this.oma=new ig.Bi(a.Ob);this.xna=new ig.Bi(a.Zb);this.Bd(a.Ba)}else{this.b.size.x=32;this.b.size.y=32}if(f._globalSettingKey)this.Apa={key:f._globalSettingKey,bb:f.desType};if(f=f.items){f.sort(function(a,b){return a.prob-b.prob});for(c=a=0;c<f.length;++c){a=a+f[c].prob;this.D5.push({id:f[c].id,dp:a})}}f=ig.ma.get(this.$$()+".respawnTime");this.mKa?
ig.ma.get("map.itemDestructPerma"+this.zu)&&this.ZLa():f&&f>sc.Ta.time&&this.ZLa();this.Bm=Math.random()*5+1},$$:function(){return"session.map.itemDestruct"+this.zu},Ge:function(a){this.parent(a);this.oma&&this.oma.Ka();this.xna&&this.xna.Ka();this.of&&this.of.Ka()},update:function(){if(this.Bm<=0)this.Bm=Math.random()*2+4;this.Bm=this.Bm-ig.i.ja;this.parent();if(this.Ua.length>1){var a=this.Ua[1],c=a.size.y+a.size.z,d=c,f=0;if(this.Bm<1){d=Math.round((this.Bm-0.15)/0.85*c);d<0&&(d=0);f=Math.round((1-
this.Bm/0.85)*c);f<0&&(f=0)}a.gp(d,f)}},sj:function(a){if(this.vDa||this.g4a||!ig.qd.ut(this.b,0))return y;var c=a.zb&&a.zb.wi("CHARGED")?sc.Wb.MEDIUM:sc.Wb.LIGHT,d=a.aj(this),c=sc.Wb.HEAVY;sc.pa.bc("player","propsDestroyed",1);sc.Ta.Oi(this,d,c,a.Gf(),y,y,h);this.oh();return h},oh:function(){this.ZLa();var b=this.tb(a);this.wOa.ld&&Vec3.add(b,this.wOa.ld);this.oma.Cg(b.x,b.y,this.b.g.z+this.b.size.z/2);this.xna.Cg(b.x,b.y,this.b.g.z+this.b.size.z/2);this.Bxb();ig.ma.set(this.$$()+".respawnTime",
sc.Ta.time+300);this.mKa&&ig.ma.set("map.itemDestructPerma"+this.zu,h);this.trigger&&!ig.ma.get(this.trigger)&&ig.ma.set(this.trigger,h);if(this.of&&Math.random()<=this.o0a){b={enemyInfo:this.of.pD()};ig.r.Pe("Enemy",this.b.g.x,this.b.g.y,this.b.g.z,b).Ds=0.05}},ZLa:function(){this.vDa=h;this.Ma("dropped",h);this.b.type=ig.ca.IGNORE;this.b.kn(ig.jk.gv)},Bxb:function(){for(var a=Math.random(),c=sc.q.T.W,d=c.Ag("RANK_PLANTS")?sc.q.D1a():1,c=((c.Ag("DROP_CHANCE")||0)+1)*d,d=0;d<this.D5.length;++d){var f=
this.D5[d];if(a<=f.dp*c){this.Apa&&sc.e.zGa(this.Apa.key,this.Apa.bb);sc.DV.PO(this,ig.Pa.CENTER,ig.r.cb,f.id,1,sc.zL.PROP);break}}},GG:function(){return!this.vDa}});sc.bd.StoneOfValor={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burstValor"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],
repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd.StoneOfSpace={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burstSpace"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:32},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd.StoneOfTruth={size:{x:16,y:16,z:22},ld:{x:0,
y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burstTruth"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd.StoneOfSpirit={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burstSpirit"},Ba:{shapeType:"Y_FLAT",
sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:96},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd.StoneOfAges={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burstAges"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:128},SUB:[{name:"default",
time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd.StoneOfNothing={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.stones",name:"burst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/destructible-stones.png",width:24,height:32,offY:160},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],
repeat:y}]}};sc.bd.AutumnPlantA={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offX:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Ground-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",
name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offX:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Ground-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",
width:24,height:32,offY:32},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Water-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,
frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Water-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:96},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Special"]={size:{x:16,
y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Water-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",
name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:160},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Ground-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",
width:24,height:32,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Ground-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:32,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",
time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Water-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:64,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Water-2"]=
{size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:96,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},
Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",width:24,height:32,offY:128,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Autumn-Fall-Water-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.autumn",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/autumn-destructibles.png",
width:24,height:32,offY:160,offX:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantA-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:0,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,
frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantA-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:0,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantA-Rare"]={size:{x:16,
y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:144,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},
Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:0,offY:448},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:0,offY:480},SUB:[{name:"default",
time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-Rare"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:144,offY:448},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],
repeat:y}]}};sc.bd["Bergen-PlantA-1-Snow"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:72,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantA-2-Snow"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",
name:"small"},Zb:{sheet:"area.bergen",name:"plantBurstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:72,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantA-Snow-Rare"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",
width:24,height:32,offX:144,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-1-Snow"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:72,offY:448},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",
time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-2-Snow"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:72,offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-PlantB-Snow-Rare"]=
{size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"plantBurstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:144,offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-Snow-Crystal"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",
name:"burstSnow"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:24,height:32,offX:216,offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Bergen-Vase-1"]={size:{x:16,y:10,z:18},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.bergen",name:"vase-break"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/bergen-trail.png",width:16,height:28,offX:224,
offY:964},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-1"]={size:{x:14,y:16,z:16},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:16,height:32,offX:192,offY:560},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"dropped",
time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-2"]={size:{x:14,y:16,z:16},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:16,height:32,offX:192,offY:592},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-3"]={size:{x:14,y:16,z:16},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",
name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:16,height:32,offX:192,offY:624},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-4"]={size:{x:24,y:16,z:16},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:32,height:32,
offX:240,offY:560},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-Special-A"]={size:{x:36,y:24,z:24},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:40,height:48,offX:72,offY:560},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,
aboveZ:1},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Cold-Dng-Egg-Special-B"]={size:{x:36,y:24,z:24},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cold-dng",name:"eggs"},Ba:{wallY:0.4,sheet:{src:"media/map/cold-dng.png",width:40,height:48,offX:72,offY:608},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Cactus-1"]={size:{x:16,y:16,z:22},ld:{x:0,
y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:320},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Cactus-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",
sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:352},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Cactus-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:384},SUB:[{name:"default",time:1,frames:[0],
repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Dry-Cactus-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-props.png",width:24,height:32,offX:176,offY:128},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Dry-Cactus-2"]=
{size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-props.png",width:24,height:32,offX:176,offY:160},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Palmapple-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",
name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Palmapple-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:448},
SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Palmapple-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",
time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Dry-Bush-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurstRed"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:320},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Dry-Bush-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",
name:"small"},Zb:{sheet:"area.heat",name:"plantBurstRed"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:352},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Dry-Bush-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"plantBurstRed"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",
width:24,height:32,offX:280,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Bones-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"boneBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:512},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],
repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Bones-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"boneBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:208,offY:544},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Bones-Special"]={size:{x:16,y:16,z:22},ld:{x:0,
y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"boneBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:512},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Hill-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"termiteDust"},Ba:{wallY:1,shapeType:"Y_FLAT",
sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Hill-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"termiteDust"},Ba:{wallY:1,shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:448},SUB:[{name:"default",time:1,frames:[0],
repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Heat-Hill-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"termiteDust"},Ba:{wallY:1,shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:24,height:32,offX:280,offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};
sc.bd["Bakii-Vase"]={size:{x:16,y:12,z:20},ld:{x:0,y:0,z:9},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.heat",name:"vase-break"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/heat-area.png",width:16,height:32,offX:464,offY:320},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",
name:"plantBurstViolet"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:224},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstViolet"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,
offX:0,offY:256},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstViolet"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:288},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],
repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Bees-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"honeyBurst"},gB:0,Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:320},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Bees-2"]={size:{x:16,y:16,z:22},ld:{x:0,
y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"honeyBurst"},gB:0,Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:352},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Bees-3"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"honeyBurst"},gB:0,
Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:352},flipX:h,SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Waterplant-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstWater"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,
offY:224},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Waterplant-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstWater"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:256},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},
{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Waterplant-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstWater"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:288},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Waterplant-Closed-1"]={size:{x:16,
y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstWater"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Waterplant-Closed-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",
name:"plantBurstWater"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:0,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Shroom-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"shroomBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,
offX:72,offY:320},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Shroom-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"shroomBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:352},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},
{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Shroom-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"shroomBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:384},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-Dotted-1"]={size:{x:16,y:16,z:22},
ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstViolet"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:416},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-Dotted-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstViolet"},
Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,offY:448},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Jungle-Flower-Dotted-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"plantBurstViolet"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:24,height:32,offX:72,
offY:480},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y}]}};sc.bd["Sapphire-Bush-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,offX:0,offY:704},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",
time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Bush-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,offX:0,offY:736},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Bush-Special"]={size:{x:16,y:16,
z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",name:"plantBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,offX:0,offY:768},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Bamboo-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",
name:"bambooBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,offX:72,offY:704},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Bamboo-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",name:"bambooBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,
offX:72,offY:736},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Bamboo-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:12},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.forest",name:"bambooBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/forest.png",width:24,height:32,offX:72,offY:768},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,
frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Cobalt-1"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cave-cobalt",name:"cobaltBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/cave-cobalt.png",width:24,height:32,offX:0,offY:0},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};
sc.bd["Sapphire-Cobalt-2"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.cave-cobalt",name:"cobaltBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/cave-cobalt.png",width:24,height:32,offX:0,offY:32},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd["Sapphire-Cobalt-Special"]={size:{x:16,y:16,z:22},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",
name:"small"},Zb:{sheet:"area.cave-cobalt",name:"cobaltBurst"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/cave-cobalt.png",width:24,height:32,offX:0,offY:64},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd.TrashBag1={size:{x:32,y:16,z:16},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"trashBag"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",
width:32,height:32,offX:352,offY:528},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd.TrashBag2={size:{x:32,y:16,z:16},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"trashBag"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:32,height:32,offX:352,offY:560},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",
time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd.TrashBag3={size:{x:32,y:16,z:24},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"trashBag"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:32,height:40,offX:352,offY:592},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}};sc.bd.TrashBag4=
{size:{x:32,y:16,z:24},ld:{x:0,y:0,z:8},Ob:{sheet:"puzzle.destructible",name:"small"},Zb:{sheet:"area.jungle",name:"trashBag"},Ba:{shapeType:"Y_FLAT",sheet:{src:"media/map/jungle-props.png",width:32,height:40,offX:352,offY:632},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y},{name:"dropped",time:1,frames:[2],repeat:y,shapeType:"Z_FLAT"}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.regen-destruct").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.J1={};var a=Vec2.create();ig.wa.RegenDestruct=ig.Wd.extend({ix:q,xX:q,G:{Sb:new ig.ud("puzzle.destructible"),Ob:q,Zb:q,hU:q,vv:q,jU:q},zA:y,Kg:q,Bm:0,aLa:0,Lu:0,Jj:q,qCa:q,kf:0,t:new ig.u({Dd:h,attributes:{C_a:{c:"String",d:"Type of regen destructible object",U:sc.J1,ok:h},Zg:{c:"VarCondition",d:"Condition for destructible to spawn",xc:h},lq:{c:"VarCondition",d:"Condition for destructible to be active. Otherwise is always 'destroyed'",
xc:h},zA:{c:"Boolean",d:"If true, block path map and update when destroyed"},KWb:{c:"Number",d:"Time in seconds for destruct to regenerate",ab:1}}}),f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.BLOCK;this.b.Fd=1;this.b.kj=0.5;this.bxb=i.desType;b=ig.Rf.get("effect");if(a=ig.copy(sc.J1[i.desType])){this.b.size=a.size;this.kf=a.size.z;this.Jj=a.Jj||ig.ca.BLOCK;this.b.vl(this.Jj);this.ix=a.ix||[1,1,1,1];this.vD=a.vD;this.xX=a.dk;this.XN=a.XN||y;this.qCa=a.vJa||q;this.Pb=a.Pb||q;if(a.Zb){f=
ig.copy(a.Zb);if(!f.sheet)f.sheet=b.sheet;this.G.Zb=new ig.Bi(f)}if(a.Ob)this.G.Ob=new ig.Bi(a.Ob);if(a.hU)this.G.hU=new ig.Bi(a.hU);b=ig.Rf.get("destruct");f=a.Ba;if(b)if(f.namedSheets)for(var j in a.Ba.namedSheets){if(!f.namedSheets[j].src)f.namedSheets[j].src=b.sheet}else if(!f.sheet.src)f.sheet.src=b.sheet;this.Bd(f);this.Ma("default")}else{this.b.size.x=32;this.b.size.y=32}this.zA=i.blockNavMap;this.Bm=Math.random()*5+1;this.aLa=i.regenTime;this.lq=new ig.de(i.activeCondition)},show:function(a){this.parent(a);
if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",this,{})}if(this.zA)this.Kg=ig.navigation.eS(this);this.lq.evaluate()||this.oh(h,h)},Ge:function(a){this.parent(a);this.Kg&&this.Kg.remove();this.G.Zb&&this.G.Zb.Ka();this.G.Ob&&this.G.Ob.Ka();this.G.hU&&this.G.hU.Ka()},tNa:function(){this.Ma("cut",h);this.aLa?this.Lu=this.aLa:this.pta()},wc:function(){return this.lq.evaluate()&&!this.Lu},pta:function(){if(this.Jj!=ig.ca.BLOCK)for(var a=ig.r.nG(this),b=a.length;b--;)a[b].XM&&a[b].XM();this.b.vl(this.Jj);
this.b.size.z=this.kf;if(this.G.hU){this.Ma("transition",h);this.G.jU=this.G.hU.va(this,{align:"CENTER",spriteFilter:[1],callback:this})}else this.Ma("regen",h,"default")},BIb:function(){this.Ma("default",h);this.Bm=Math.random()*5+1;if(this.Ua.length>1){var a=this.Ua[1];a.gp(a.size.y+a.size.x,0)}},update:function(){if(this.Lu)if(this.lq.evaluate()){this.Lu=this.Lu-ig.i.ja;if(this.Lu<=0){this.Lu=0;this.pta()}}else this.Lu=1E-5;else if(!this.G.jU&&!this.G.vv){if(this.Bm<=0)this.Bm=Math.random()*2+
4;this.Bm=this.Bm-ig.i.ja;if(!this.XN&&this.Ua.length>1){var a=this.Ua[1],b=a.size.y+a.size.z,f=b,i=0;if(this.Bm<1){f=Math.round((this.Bm-0.08)/0.92*b);f<0&&(f=0);i=Math.round((1-this.Bm/0.92)*b);i<0&&(i=0)}a.gp(f,i)}}this.parent()},Aj:function(a){if(a==this.G.jU){if(this.G.jU.ek()){this.G.jU=q;this.BIb()}}else if(a==this.G.vv&&this.G.vv.ek()){this.G.vv=q;this.tNa()}},sj:function(b){if(this.Lu||this.G.vv||!ig.gl.ut(this,40))return y;var d=b.eda(this,a),f=b.zb&&b.zb.wi("CHARGED")?sc.Wb.MEDIUM:sc.Wb.LIGHT,
i=b.aj(this);if(!this.ix[d]||this.xX&&!this.xX(b,this)){if(!this.ix[d]){this.G.Sb.va("shieldBlink",this,{spriteFilter:[2]});ig.ah.gh(this.Na.Cp,this)}return y}f=sc.Wb.MASSIVE;sc.Ta.Oi(this,i,f,b.Gf(),y,y,h);if(this.G.jU){this.G.jU.stop();this.G.jU=q}this.oh();return h},oh:function(a,b){if(!this.Lu&&!this.G.vv){this.Hf=0;var f=this.tb();this.b.vl(ig.ca.BLOCK);this.b.size.z=0;if(b)this.tNa();else if(this.mb.Kda("transition")&&this.G.Ob){this.Ma("transition",h);this.G.vv=this.G.Ob.Cg(f.x,f.y,this.b.g.z+
this.b.size.z/2,this,{spriteFilter:[1],callback:this});this.z8()}else{!a&&this.G.Ob&&this.G.Ob.Cg(f.x,f.y,this.b.g.z+this.b.size.z/2,this);this.Ma("destroy",h,"cut");this.z8();this.tNa()}this.Ua.length>1&&this.Ua[1].gp(0,0)}},ag:function(){this.Og||this.b.size.z>0&&!this.lq.evaluate()&&this.oh(h)},oq:function(a,b){this.b.size.z>0&&this.qCa&&this.qCa(a,b,this)},z8:function(){var a=this.tb();this.G.Zb&&this.G.Zb.Cg(a.x,a.y,this.b.g.z,q,{angle:this.KX})},GG:function(a,b){var f=b.dir;return this.ix[Math.abs(f.x)>
Math.abs(f.y)?ig.Jc.Lk[f.x>0?"WEST":"EAST"]:ig.Jc.Lk[f.y>0?"NORTH":"SOUTH"]]}});sc.J1.iceBlock={size:{x:24,y:24,z:24},Ob:{sheet:"puzzle.destructible",name:"iceBlockBoomQuick"},hU:{sheet:"puzzle.destructible",name:"iceBlockRegen"},Pb:ig.hd.ICE,dk:function(a){return a.zb&&a.zb.element==sc.ha.HEAT},Ba:{namedSheets:{fullIce:{src:q,width:24,height:48,offX:96,offY:96},bottomIce:{src:q,width:24,height:24,offX:144,offY:96}},SUB:[{sheet:"bottomIce",shapeType:"Z_FLAT",frames:[0],repeat:y,SUB:[{name:"cut"},
{name:"transition"}]},{shapeType:"Z_EXPAND",sheet:"fullIce",SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"default",time:1,frames:[1],repeat:y,aboveZ:1},{name:"transition",time:1,frames:[0],repeat:y}]}]}};var b=Vec2.create();sc.J1.flame={size:{x:32,y:32,z:24},XN:h,Jj:ig.ca.NPFENCE,Ob:{sheet:"puzzle.flame",name:"boom"},nyb:"puzzle.flame",dk:function(a,b){if(a.zb&&a.zb.wi("ICE_DISK"))return h;b.Ma("shuffle",h,"default",h);a.K2&&a.K2(b);return y},vJa:function(a,d,f){if(d&&a instanceof ig.wa.Combatant){Vec2.assign(b,
d);Vec2.Lc(b);f.Ma("shuffle",h,"default",h);sc.Ta.Oi(a,a.lc(ig.Pa.CENTER),sc.Wb.LIGHT,sc.ha.HEAT,y,y,y);a.Ei();var i=a.UX(b,a.su()?"MEDIUM":"HEAVY",y,y);a.vj=Math.max(a.vj,i)}if(d&&a instanceof sc.H$){f.Ma("shuffle",h,"default",h);Vec2.assign(b,d);Vec2.Lc(b);a.yg(b,a.pb||ig.r.cb)}},Ba:{namedSheets:{flame:{src:"media/entity/effects/heat.png",width:32,height:48,offX:288,offY:288},bottom:{src:q,width:16,height:16,offX:168,offY:96}},SUB:[{sheet:"bottom",shapeType:"Z_FLAT",frames:[0],repeat:y,offset:{x:0,
y:-8,z:0},SUB:[{name:"default"},{name:"destroy"},{name:"cut"},{name:"regen"},{name:"shuffle"}]},{sheet:"flame",offset:{x:0,y:0,z:8},SUB:[{name:"default",time:0.1,frames:[3,4,5,6],repeat:h},{name:"destroy",time:0.066,frames:[2,1,0],repeat:y},{name:"regen",time:0.066,frames:[0,1,2],repeat:y},{name:"shuffle",time:0.05,frames:[0,1,2],repeat:y}]}]}};sc.J1.shock={size:{x:16,y:16,z:48},XN:h,Jj:ig.ca.NPFENCE,Ob:{sheet:"puzzle.tesla",name:"boom"},nyb:"puzzle.flame",dk:function(a,b){if(a.Gf()==sc.ha.WAVE&&
a.zb&&a.zb.wi("COMPRESSED"))return h;a.K2&&a.K2(b);return y},vJa:function(a,d){if(d&&a instanceof ig.wa.Combatant){Vec2.assign(b,d);Vec2.Lc(b);sc.Ta.Oi(a,a.lc(ig.Pa.CENTER),sc.Wb.LIGHT,sc.ha.SHOCK,y,y,y);a.Ei();var f=a.UX(b,a.su()?"MEDIUM":"HEAVY",y,y);a.vj=Math.max(a.vj,f)}if(d&&a instanceof sc.H$){Vec2.assign(b,d);Vec2.Lc(b);a.yg(b,a.pb||ig.r.cb)}},Ba:{namedSheets:{shock:{src:"media/map/shockwave-dng.png",width:16,height:40,offX:16,offY:744},bottom:{src:"media/map/shockwave-dng.png",width:16,height:16,
offX:0,offY:768},ball:{src:"media/map/shockwave-dng.png",width:16,height:16,offX:0,offY:736,xCount:1}},SUB:[{sheet:"bottom",shapeType:"Z_FLAT",frames:[0],repeat:y,SUB:[{name:"default"},{name:"destroy"},{name:"cut"},{name:"regen"}]},{sheet:"shock",offset:{x:0,y:-8,z:0},renderMode:"lighter",SUB:[{name:"default",time:0.05,frames:[0,1,2,3,4,5],repeat:h},{name:"destroy",time:0.066,frames:[4,4,4,4],framesAlpha:[0.8,0.6,0.3,0],repeat:y},{name:"regen",time:0.05,frames:[0,1,2,3,4,5],framesAlpha:[0.2,0.4,0.6,
0.8],repeat:y}]},{sheet:"ball",shapeType:"Y_FLAT",SUB:[{name:"default",time:0.1,frames:[0,0,0,0,0,0],repeat:h,framesSpriteOffset:[0,0,32,0,0,33,0,0,33,0,0,32,0,0,31,0,0,31]},{name:"cut",time:0.5,frames:[1],repeat:y,shapeType:"Z_FLAT"},{name:"destroy",time:0.05,frames:[1,1,1,1,1,1,1,1,1],repeat:y,framesSpriteOffset:[0,0,30,0,0,28,0,0,24,0,0,18,0,0,10,0,0,2,0,0,0,0,0,1,0,0,0]},{name:"regen",time:0.05,frames:[0,0,0,0,0,0],repeat:y,framesSpriteOffset:[0,0,8,0,0,16,0,0,24,0,0,28,0,0,30,0,0,31]}]}]}};sc.oL.REGEN_DESTRUCT=
{t:{attributes:{cDa:{c:"String",d:"Type of Regen Destruct",U:sc.J1},Aa:{c:"Boolean",d:"If true: Regen panel has to be active "}}},Mca:function(a,b,f){for(var i=f.active,f=f.destructType,j=b.length;j--;){var k=b[j];k instanceof ig.wa.RegenDestruct&&k.bxb==f&&(!i||k.wc())&&a.push(k)}return a}}});ig.J=h;
ig.N("game.feature.puzzle.entities.extract-platform").O("game.config","impact.base.entity").K(function(){sc.vja={};ig.wa.ExtractPlatform=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{aTb:{c:"String",d:"Type of extractable platform",U:sc.vja},mm:{c:"Number",d:"The z position when active."},wGa:{c:"Number",d:"The z position when inactive."},fb:{c:"VarCondition",d:"Condition for the platform to move up",xc:h}}}),fb:q,Pb:q,S0:0,Wia:0,mm:0,wGa:0,vF:y,L$:0,FXa:0,MXa:0,f:function(a,b,c,d){this.parent(a,b,c,
d);this.b.type=ig.ca.BLOCK;this.b.kj=0;this.L$=this.b.g.z;this.fb=new ig.de(d.condition);this.mm=d.activeZHeight||0;a=sc.vja[d.extractType];this.S0=this.Wia=a.D0a;Vec3.assign(this.b.size,a.size);this.vF=this.fb.evaluate();window.Ed||(this.vF?this.IH(this.L$-this.b.size.z+this.mm):this.IH(this.L$-this.b.size.z+this.wGa));this.Bd(a.Ba)},update:function(){this.parent();if(this.S0<this.Wia){this.S0=this.S0+ig.i.ja;var a=Math.min(1,Math.max(0,this.S0)/this.Wia),a=KEY_SPLINES.LINEAR.get(a),b=this.FXa*(1-
a)+this.MXa*a;if(a==1)this.S0=this.Wia;this.IH(b)}},ag:function(){var a=this.fb.evaluate();if(this.vF!=a){this.vF=a;this.FXa=this.b.g.z;this.MXa=this.vF?this.L$-this.b.size.z+this.mm:this.L$-this.b.size.z+this.wGa;this.S0=0}}});sc.vja.Small={size:{x:16,y:16,z:16},D0a:0.3,Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:16,height:32},SUB:[{name:"default",time:1,frames:[0],repeat:y}]}};sc.vja.Large={size:{x:32,y:32,z:32},D0a:0.3,Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",
width:32,height:64,offY:32},SUB:[{name:"default",time:1,frames:[0],repeat:y}]}}});ig.J=h;
ig.N("game.feature.puzzle.entities.dynamic-platform").O("impact.base.actor-entity","impact.base.entity").K(function(){var a=Vec3.vc(0,0,0);sc.lC={};ig.wa.DynamicPlatform=ig.Jc.extend({t:new ig.u({Dd:h,attributes:{vWb:{c:"String",d:"Type of extractable platform",U:sc.lC},kp:{c:"DynamicPlatformDests",d:"the states to iterate. ",xc:h},ssa:{c:"VarCondition",d:"Condition to pause the platform to move.",xc:h,ab:"false"},rsa:{c:"EntityAnim",d:"Animation to be played on pause",I:h},rXb:{c:"Boolean",d:"True if actions should be interrupted when switching states.",
ab:h},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h,I:h}}}),xe:q,kp:[],ssa:q,rsa:q,tv:q,paused:y,sbb:y,Ila:y,Daa:y,fx:{},f:function(b,c,d,f){this.parent(b,c,d,f);this.sbb=f.skipWait;b=sc.lC[f.platformType];Vec3.assign(this.b.size,b.size);this.Pb=b.Pb;c=b.Ba;if(b.ONa)if(d=ig.Rf.get(b.ONa)){c=ig.copy(b.Ba);c.sheet.src=d.sheet;c.sheet.offX=d.x;c.sheet.offY=d.y;c.sheet.xCount=d.vh}if(b.fx)for(var i in b.fx)this.fx[i]=new ig.Bi(b.fx[i]);this.mb=new ig.Al(c);for(var j in b.ad)this.WO(j,b.ad[j]);
i=32;if(b.FMa!==g)i=b.FMa;this.tv=new ig.bv({collType:ig.ca.BLOCK,walkAnims:j,zGravityFactor:0,weight:-1,maxVel:180,relativeVel:1,accelSpeed:1.5,friction:1.6,airFriction:0.7,shadow:i,shadowType:ig.nL.STATIC_SIZE});this.ssa=new ig.de(f.pauseCondition);this.rsa=f.pauseAnimation;j=this.lc(ig.Pa.BOTTOM,a);f=f.states;i=q;if(f)for(b=0;b<f.length;b++){i=f[b];var c=i.useAbsolute?i.position:Vec3.add(i.position,j,Vec3.create()),d=[{type:"INTERPOLATE_POSITION",newPos:c,keySpline:i.keySpline,duration:i.duration||
0}],k=new ig.bv({walkAnims:i.animation},this.tv);this.kp.push({action:i.action?new ig.Xe(q,i.action):q,fb:new ig.de(i.condition),fd:k,g:c,c0:new ig.Xe(q,d),aNb:i.duration||0,OHb:i.playOnce||y})}if(window.Ed)this.kp.length>0&&this.Mq(this.kp[0].fd);else{this.Ydb(h);this.Tdb()}this.Bd()},show:function(a){this.parent(a);if(this.ws){this.ws.stop();this.ws=q}if(!a){this.Ya.alpha=0;this.fx.show?this.fx.show.va(this,{}):ig.r.G.Mf.va("showQuick",this,{})}},po:function(){this.fx.hide?this.ws=this.fx.hide.va(this,
{callback:this}):ig.r.G.Mf.va("hideQuick",this,{callback:this})},Aj:function(a){if(a==this.ws&&a.ek()){this.ws=q;this.hide()}},update:function(){this.parent()},XT:function(){if(!this.PFa()&&!this.paused)if(this.Ila){this.B8a();this.Ila=y}else{(!this.xe.OHb||!this.Daa)&&this.Zf(this.xe.action);this.Daa=h}},Ge:function(a){this.parent(a);this.mb.Ka();for(var c in this.fx)this.fx[c].Ka()},Ydb:function(a){for(var c=this.kp.length,d=q,f=q;c--;){d=this.kp[c];if(d.fb.evaluate()){f=d;break}}if(f!=this.xe){this.xe=
f;this.xe.played=y;if(a||this.sbb||!this.Daa)this.B8a(a);else{this.Daa=y;this.Ila=h}}},B8a:function(a){this.Mq(this.xe.fd);if(a){this.l(this.xe.g.x-this.b.size.x/2,this.xe.g.y-this.b.size.y/2,this.xe.g.z);this.Ila=y}else if(this.xe.aNb!=0)this.Zf(this.xe.c0);else{this.Zf(this.xe.action);this.Daa=h}},ag:function(){this.Ydb();this.Tdb()},Tdb:function(){var a=this.ssa&&this.ssa.evaluate();if(a!=this.paused)if(this.paused=a){this.Cua();if(this.rsa){this.Ma(this.rsa,h,q,h);this.eo=h}Vec2.Oa(this.b.wb,
0,0);Vec2.Oa(this.b.V,0,0)}else{this.eo=y;this.Vga()}}});sc.lC.DefaultSmall={size:{x:32,y:32,z:2},ONa:"dynPlatformSmall",Pb:ig.hd.METAL,Ba:{sheet:{src:q,width:32,height:32,offX:0,offY:0},SUB:[{name:"on",time:1,frames:[0],repeat:y},{name:"off",time:1,frames:[1],repeat:y}]},ad:{on:{idle:"on"},off:{idle:"off"}}};sc.lC.DefaultMedium={size:{x:32,y:32,z:2},ONa:"dynPlatformMedium",Pb:ig.hd.METAL,Ba:{sheet:{src:q,width:32,height:32,offX:0,offY:0},SUB:[{name:"on",time:1,frames:[0],repeat:y},{name:"off",time:1,
frames:[1],repeat:y}]},ad:{on:{idle:"on"},off:{idle:"off"}}};sc.lC.Small={size:{x:16,y:16,z:16},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:16,height:32},SUB:[{name:"default",time:1,frames:[0],repeat:y},{name:"move",time:0.05,frames:[0,1,2,1],repeat:h}]},ad:{"default":{idle:"default",move:"move"}}};sc.lC.Large={size:{x:32,y:32,z:32},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/puzzle-elements-1.png",width:32,height:64,offY:32},SUB:[{name:"default",time:1,
frames:[0],repeat:y},{name:"move",time:0.05,frames:[0,1,2,1],repeat:h}]},ad:{"default":{idle:"default",move:"move"}}};sc.lC.RhombusMedium={size:{x:32,y:32,z:32},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/dynamic-blocks.png",width:32,height:64},SUB:[{name:"redOn",time:1,frames:[0],repeat:y},{name:"redOff",time:1,frames:[1],repeat:y},{name:"greenOn",time:1,frames:[2],repeat:y},{name:"greenOff",time:1,frames:[3],repeat:y},{name:"blueOn",time:1,frames:[4],repeat:y},{name:"blueOff",time:1,frames:[5],
repeat:y}]},ad:{greenOn:{idle:"greenOn"},greenOff:{idle:"greenOff"},redOn:{idle:"redOn"},redOff:{idle:"redOff"},blueOn:{idle:"blueOn"},blueOff:{idle:"blueOff"}}};sc.lC.Floating={size:{x:32,y:32,z:0},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/dynamic-blocks.png",width:32,height:36},shapeType:"Z_EXPAND",offset:{x:0,y:0,z:-4},SUB:[{name:"redOn",time:1,frames:[0],repeat:y},{name:"redOff",time:1,frames:[1],repeat:y},{name:"greenOn",time:1,frames:[2],repeat:y},{name:"greenOff",time:1,frames:[3],
repeat:y},{name:"blueOn",time:1,frames:[4],repeat:y},{name:"blueOff",time:1,frames:[5],repeat:y}]},ad:{greenOn:{idle:"greenOn"},greenOff:{idle:"greenOff"},redOn:{idle:"redOn"},redOff:{idle:"redOff"},blueOn:{idle:"blueOn"},blueOff:{idle:"blueOff"}}};sc.lC.FloatingBig={size:{x:64,y:64,z:0},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/entity/objects/dynamic-blocks.png",width:64,height:68,offY:40},shapeType:"Z_EXPAND",offset:{x:0,y:0,z:-4},SUB:[{name:"blueOn",time:1,frames:[0],repeat:y},{name:"blueOff",time:1,
frames:[1],repeat:y}]},ad:{blueOn:{idle:"blueOn"},blueOff:{idle:"blueOff"}}};sc.lC.AridBig={size:{x:80,y:72,z:2},Pb:ig.hd.METAL,Ba:{sheet:{src:"media/map/arid-interior.png",width:80,height:72,offX:336,offY:672},shapeType:"Z_EXPAND",wallY:1,SUB:[{name:"default",time:1,frames:[0],repeat:y}]},ad:{"default":{idle:"default"}}};sc.lC.ArWallH={size:{x:32,y:8,z:24},FMa:0,Pb:ig.hd.LASER,Ba:{sheet:{src:"media/entity/objects/dungeon-ar.png",width:32,height:32,offX:56,offY:144},renderMode:"lighter",SUB:[{name:"default",
time:0.05,frames:[0,0],framesAlpha:[1,0.8],repeat:h}]},ad:{on:{idle:"default"}},fx:{show:{sheet:"teleport",name:"barrierShow"},hide:{sheet:"teleport",name:"barrierHide"}}};sc.lC.ArWallV={size:{x:8,y:32,z:24},FMa:0,Pb:ig.hd.LASER,Ba:{sheet:{src:"media/entity/objects/dungeon-ar.png",width:8,height:56,offX:24,offY:176},renderMode:"lighter",SUB:[{name:"default",time:0.05,frames:[0,0],framesAlpha:[1,0.8],repeat:h}]},ad:{on:{idle:"default"}},fx:{show:{sheet:"teleport",name:"barrierShow"},hide:{sheet:"teleport",
name:"barrierHide"}}}});ig.J=h;
ig.N("game.feature.puzzle.entities.ol-platform").O("impact.base.entity","impact.feature.base.entities.object-layer-view").K(function(){sc.dSa={SLOWEST:25,SLOWER:50,SLOW:75,MEDIUM:100,FAST:150};var a=Vec3.create(),b=Vec3.create();ig.wa.OLPlatform=ig.Kc.extend({t:new ig.u({Dd:h,Kq:h,Lq:h,B_:4,attributes:{FHa:{c:"String",d:"Object Layer from which to display graphic.",U:{object1:1,object2:1,object3:1}},kf:{c:"Number",d:"Z height of displayed object"},Hh:{c:"Number",d:"Wall Y Value"},Pb:{c:"String",d:"Type of ground terrain",
U:ig.hd},kp:{c:"OlPlatformStates",d:"States of the platform",xc:h},speed:{c:"String",d:"Speed of transition",U:sc.dSa},DNa:{c:"Boolean",d:"Speed independent of distance"},zWb:{c:"Boolean",d:"Make sound positional",ab:y},shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf,I:h},Zg:{c:"VarCondition",d:"Condition for prop to appear",xc:h,I:h}},Uk:y,Sl:"rgba(120,255,120, 0.5)",kD:"rgba(80,244,80, 0.5)",Yaa:h}),Pb:q,Df:q,Sf:Vec3.create(),kp:[],speed:0,DNa:y,xua:h,neb:y,$b:{move:new ig.ka("media/sound/puzzle/push-start.ogg",
1)},xQ:Vec3.create(),n:q,xe:q,LU:y,Kg:q,SKa:y,f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.BLOCK;this.b.size.z=i.zHeight||0;this.Pb=i.terrain||0;this.speed=sc.dSa[i.speed||"MEDIUM"];this.Hh=(i.wallY||0).Rb(0,1);this.DNa=i.staticSpeed||y;this.neb=i.positionSound||y;this.b.shape=ig.Tf[i.shape||"RECTANGLE"];this.Df=ig.r.rda(i.layer);Vec3.assign(this.Sf,this.b.g);this.n=new ig.Vt;if(a=i.states)for(b=0;b<a.length;++b){f=a[b];i=q;f.layer&&(i=ig.r.rda(f.layer));this.kp.push({fb:new ig.de(f.condition),
g:Vec3.add(f.offset,this.Sf,Vec3.create()),Df:i,Sha:KEY_SPLINES[f.spline||"EASE_IN_OUT"]})}this.ul(ig.MP.tpa(this,this.Df));window.Ed||this.Jz(h)},show:function(a){this.parent(a);this.Kg=ig.navigation.eS(this)},Ge:function(){this.Kg&&this.Kg.remove();this.parent()},Jz:function(a){for(var d=this.kp.length,f=q;d--;){var i=this.kp[d];if(i.fb.evaluate()){f=i;break}}if(f&&f!=this.xe){Vec3.assign(this.xQ,this.b.g);if(a)Vec3.assign(this.b.g,f.g);else{a=this.$b.move.play();this.lc(ig.Pa.CENTER,b);this.neb&&
a.Qta(b,800);a=Vec3.eb(this.xQ,f.g);this.DNa&&(a=32);a=a/this.speed;this.n.set(a,ig.Ol.br);this.SKa=a>1}if(this.xe&&this.xe.Df!=f.Df)this.LU=y}this.xe=f},update:function(){this.parent();if(!this.n.Xb()){this.n.ja();var b=this.n.get();if(this.SKa&&this.n.n>1){this.SKa=y;this.Kg&&this.Kg.update()}b=this.xe.Sha.get(b);Vec3.an(this.xQ,this.xe.g,b,a);this.l(a.x,a.y,a.z,h);this.n.Xb()&&this.Kg&&this.Kg.update()}},Gh:function(){if(!this.LU){var b=this.xe&&this.xe.Df||this.Df,d=Vec3.sub(this.b.g,this.Sf,
a);if(ig.MP.Gh(this,b,this.Hh,d))this.LU=y}},ag:function(){this.Jz()}})});ig.J=h;
ig.N("game.feature.puzzle.entities.enemy-counter").O("game.feature.combat.combat","impact.base.entity").K(function(){ig.wa.EnemyCounter=ig.Wd.extend({s:q,WA:q,GDa:0,tH:0,d_:0,Osa:q,sga:q,Xb:y,iua:q,n:0,HRa:0.5,Na:{count:new ig.ka("media/sound/puzzle/counter.ogg",0.7),Xb:new ig.ka("media/sound/puzzle/switch-activate-2.ogg",1)},G:{sheet:new ig.ud("puzzle"),Xd:q},t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"VarCondition to make enemy counter appear",xc:h},WA:{c:"String",d:"Enemy Group that is considered for counting"},
GDa:{c:"Number",d:"Number of enemies that needs to be defeated"},Osa:{c:"VarName",d:"Variable to be set to true when all enemies are defeated."},sga:{c:"VarName",d:"Variable to be set to true when the last marble reached the counter."},ny:{c:"VarName",d:"Variable to be set to the current enemyCount value."},iua:{c:"VarCondition",d:"if provided: shuffle when condition evaluates to true",I:h}},label:function(){return""+this.d6+" => ["+this.Osa+"] > ["+this.sga+"]"}}),f:function(a,c,d,f){this.parent(a,
c,d,f);this.b.type=ig.ca.BLOCK;this.b.F(32,30,2);this.b.time.Im=h;a=ig.Rf.get("puzzle");this.s=new ig.ia(a.sheet);this.WA=f.enemyGroup;this.GDa=f.enemyCount;this.Osa=f.preVariable;this.sga=f.postVariable;this.ny=f.countVariable;this.iua=f.shuffleCondition?new ig.de(f.shuffleCondition):q;this.d_=this.tH=(this.Xb=ig.ma.get(this.sga))?0:this.GDa;sc.Ta.UAa(this);this.ny&&ig.ma.set(this.ny,this.d_)},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}if(!a){this.Ya.alpha=0;this.G.sheet.va("enemyCounterAppear",
this,{})}},po:function(){this.G.Xd=this.G.sheet.va("enemyCounterDisappear",this,{callback:this})},Aj:function(a){if(a.ek()){this.G.Xd=q;this.hide()}},Np:function(){this.ul(4)},update:function(){if(this.n>0)this.n=this.n-ig.i.ja},wJa:function(a,c){if(this.tH>0&&c==sc.gja.DEFEATED&&a.sa==sc.pd.ENEMY&&(!this.WA||a.WA==this.WA)){this.tH--;this.tH==0&&ig.ma.set(this.Osa,h);return this}},MFb:function(){this.Uwb()},Gh:function(){var a=this.Xb?64:0,c=this.b;this.Ua[0].l(c.g.x,c.g.y,c.g.z);this.Ua[0].F(c.size.x,
c.size.y,c.size.z,c.size.y);this.Ua[0].Eb(c.size.x/2,(c.size.y+c.size.z)/2);this.Ua[0].Bj(this.s,0+a,96);this.Ua[0].ge(this.Ya.alpha);this.Ua[0].setTransform(this.Ya.Xa,this.Ya.Va,this.Ya.Qb);if(this.n>0){this.Ua[3].l(c.g.x,c.g.y,c.g.z);this.Ua[3].F(c.size.x,c.size.y,c.size.z);this.Ua[0].Eb(c.size.x/2,(c.size.y+c.size.z)/2);this.Ua[3].Bj(this.s,32+a,96);this.Ua[3].ge(this.n/this.HRa*this.Ya.alpha);this.Ua[3].setTransform(this.Ya.Xa,this.Ya.Va,this.Ya.Qb)}else this.Ua[3].Bj(q);if(this.Xb){this.Ua[1].Bj(q);
this.Ua[2].Bj(q)}else{var d=this.d_;this.iua&&this.iua.evaluate()&&(d=Math.floor(Math.random()*100));a=Math.floor(d/10);d=d%10;this.Ua[1].l(c.g.x+9,c.g.y+6,c.g.z);this.Ua[1].F(16,16,0,0);this.Ua[1].Bj(this.s,128+a%5*16,96+(a>=5?16:0));this.Ua[1].ge(this.Ya.alpha);this.Ua[1].setTransform(this.Ya.Xa,this.Ya.Va,this.Ya.Qb);this.Ua[2].l(c.g.x+14,c.g.y+11,c.g.z);this.Ua[2].F(16,16,0,0);this.Ua[2].Bj(this.s,128+d%5*16,96+(d>=5?16:0));this.Ua[2].ge(this.Ya.alpha);this.Ua[2].setTransform(this.Ya.Xa,this.Ya.Va,
this.Ya.Qb)}},Ge:function(a){sc.Ta.u9a(this);this.parent(a)},Uwb:function(){if(this.d_>0){this.n=this.HRa;this.d_--;this.ny&&ig.ma.set(this.ny,this.d_);if(this.d_==0){this.Xb=h;ig.ma.set(this.sga,h);ig.ah.gh(this.Na.Xb,this)}else ig.ah.gh(this.Na.count,this)}}});var a={DEFAULT:0,INCREASE:1};ig.wa.KillCounter=ig.Kc.extend({WA:q,K5:0,mode:a.DEFAULT,tH:0,uc:q,Xb:y,t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Spawn Condition",xc:h},BSb:{c:"Select",d:"DEFAULT: set count to kill count and trigger when all killed. INCREASE: just increase countVar every time an enemy dies.",
U:a},WA:{c:"String",d:"Enemy Group that is considered for counting"},K5:{c:"Number",d:"Number of kills to do."},uc:{c:"VarName",d:"Variable to be set to true when all kill count is reached"},ny:{c:"VarName",d:"Variable to be set to the current enemyCount value."}},Uk:h,Kq:h,Lq:h,Sl:"rgba(0,0,255, 0.5)",kD:"rgba(0,0,120, 0.8)",label:function(){return this.mode==a.DEFAULT?""+this.K5+" => ["+this.uc+"]":this.ny+"++"}}),f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.NONE;f.size||this.b.F(32,
32,0);this.mode=f.countMode?a[f.countMode]:a.DEFAULT;this.b.time.Im=h;this.WA=f.enemyGroup;this.K5=f.killCount;this.uc=f.variable;this.ny=f.countVariable;this.tH=(this.Xb=this.uc?ig.ma.get(this.uc):y)?0:this.K5;sc.Ta.UAa(this);this.ny&&this.mode==a.DEFAULT&&ig.ma.set(this.ny,this.tH)},wJa:function(b,c){if(this.tH>0&&c==sc.gja.DEFEATED&&b.sa==sc.pd.ENEMY&&(!this.WA||b.WA==this.WA))if(this.mode==a.DEFAULT){this.tH--;this.ny&&ig.ma.set(this.ny,this.tH);if(this.tH==0){ig.ma.set(this.uc,h);this.Xb=h}}else this.mode==
a.INCREASE&&this.ny&&ig.ma.add(this.ny,1)},Ge:function(a){sc.Ta.u9a(this);this.parent(a)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.group-switch").O("impact.base.entity").K(function(){sc.Hwa={};sc.CP={};sc.CP.LOCAL=0;sc.CP.GLOBAL=1;var a={};ig.wa.GroupSwitch=ig.Wd.extend({dk:q,b3:h,lq:q,group:q,qw:sc.CP.LOCAL,G2:q,Lw:q,mm:0,zoa:q,qc:y,Na:{hx:new ig.ka("media/sound/battle/hit-7.ogg",0.4),rM:new ig.ka("media/sound/puzzle/switch-activate-2.ogg",1)},time:0,n:0,kHa:y,t:new ig.u({Dd:h,attributes:{Hx:{c:"String",d:"Type of Group Switch",U:sc.Hwa},qw:{c:"String",d:"Update type for the group switch",
U:sc.CP},group:{c:"String",d:"The associated group for this switch. Must be set for global type switches."},Mw:{c:"Number",d:"the time the switch (or all switches in the group if global) stays active."},G2:{c:"VarName",d:"Variable is set to true when all switches are activated"},Lw:{c:"VarName",d:"This variable stored the number of active switches in this group"},zoa:{c:"VarName",d:"Set to true when one of the first switches in a group is hit.",I:h}},label:function(){return"[ "+this.G2+" ]\n"+this.Lw+
"++"}}),f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.VIRTUAL;this.b.time.Im=h;b=sc.Hwa[f.switchType];ig.Rf.get("switch");if(b){Vec3.assign(this.b.size,b.size);this.dk=b.dk;this.mm=b.mm;if(b.Kx){c=ig.Rf.get("puzzle");b.Ba.sheet.src=c.sheet}this.Bd(b.Ba)}this.qw=sc.CP[f.updateType];this.group=f.group;this.n=this.time=f.activeTime;this.lq=new ig.de(f.activeCondition||"false");this.G2=f.activeBoolVar;this.Lw=f.activeCountVar;this.zoa=f.firstTrigger||q;this.Lw&&ig.ma.JB(this.Lw,0);ig.ma.JB(this.G2,
0);a[this.group]||(a[this.group]={entities:[],b6:q,Pla:0});a[this.group].entities.push(this);(this.qc=ig.ma.get(this.G2))?this.b.size.z=this.mm:this.Lw&&ig.ma.set(this.Lw,0);this.Ma(this.qc?"on":"off")},Ge:function(b){this.qc||this.Lw&&ig.ma.set(this.Lw,0);delete a[this.group];this.parent(b)},zO:function(){this.Ma("off",h,q,h,y);this.kHa=0;this.qc=y},J7:function(){this.qc=h;this.Ma("switch",h,q,h,h)},update:function(){if(!this.qc&&this.n<this.time){this.n=this.n+ig.i.ja;if(this.n>=this.time){this.n=
this.time;var b=a[this.group];if(this.qw==sc.CP.LOCAL){this.Lw&&ig.ma.sub(this.Lw,1);this.zO();b.Pla--}else if(this.qw==sc.CP.GLOBAL&&this==b.b6){this.Lw&&ig.ma.set(this.Lw,0);for(var c=b.entities.length;c--;)b.entities[c].zO();b.b6=q;b.Pla=0}}}this.parent()},sj:function(b){if(!this.qc&&!this.kHa&&this.dk(this,b)){this.kHa=h;this.Ma("spinning",h,q,h,y);sc.Ta.Oi(this,b.aj(this),sc.Wb.MASSIVE,b.Gf(),y,y,h);ig.ah.gh(this.Na.hx,this);ig.ah.gh(this.Na.rM,this);b=a[this.group];this.n=0;if(this.qw==sc.CP.GLOBAL&&
!b.b6){b.b6=this;this.zoa&&ig.ma.set(this.zoa,h)}b.Pla++;this.Lw&&ig.ma.add(this.Lw,1);if(b.Pla==b.entities.length){for(var c=b.entities.length;c--;)b.entities[c].J7();ig.ma.set(this.G2,h)}}else sc.Ta.Oi(this,b.aj(this),sc.Wb.NONE,b.Gf(),y,y,h);return h},PQ:function(a){if(a=="switch"){this.b.size.z=this.mm;this.Ma("switch_end",h,"on")}}});sc.Hwa["default"]={size:{x:16,y:16,z:17},mm:0,Kx:h,Ba:{offset:{x:0,y:0,z:0},sheet:{src:q,width:16,height:32},SUB:[{name:"off",time:0.1,frames:[0,1,2,3],repeat:h},
{name:"spinning",time:0.03,frames:[4,5,6,7],repeat:h},{name:"switch",time:0.03,frames:[8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,11,8,9,10,10,11,11,11,8,8,8,8,8,12,13],repeat:y},{name:"switch_end",time:0.1,frames:[14,15],repeat:y},{name:"on",time:1,frames:[15],repeat:y}]},dk:function(a,c){return c.sa==sc.pd.PLAYER}}});ig.J=h;
ig.N("game.feature.puzzle.entities.chest").O("impact.base.actor-entity","impact.base.entity","game.feature.interact.map-interact","game.feature.inventory.inventory","game.feature.menu.menu-model").K(function(){sc.ME={};sc.d1={};sc.d1.BRONZE=154;sc.d1.SILVER=155;sc.d1.GOLD=156;ig.wa.Chest=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{ly:{c:"String",d:"Type of the chest.",U:sc.ME},item:{c:"Item",d:"The item to spawn."},zc:{c:"Number",d:"Amount of the given item. 0 = 1.",ab:1},Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",
xc:h},uc:{c:"VarName",d:"the value to add 1 to",I:h},trigger:{c:"VarName",d:"trigger to set to true the only 'once' when chest is activated",I:h},rS:{c:"VarCondition",d:"Condition for entity to become transparent",I:h}},label:function(){return this.vWa+" + "+this.zc}}),n6a:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[50,51,52,51],NEAR:[53]},0.2),KEb:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24),{FOCUS:[55,56,57,58,57,58,57,56],NEAR:[54]},0.2),G:{sheet:new ig.ud("map.chest"),handle:q},
wf:q,Xd:q,CN:y,aCa:y,item:q,zc:0,ly:q,IVb:y,vWa:q,EQ:q,nWa:y,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.NONE;this.b.Fd=1;this.wf=new sc.OV(this,this,this.n6a,sc.UE.mW,y);this.wf.lma=h;this.EQ=d.trigger||q;a=sc.ME[d.chestType]||sc.ME["default"];this.item=d.item||0;this.ly=a;this.b.F(17,13,12);this.aCa=(a=d.variable||"")&&a!=""?a:"map.chest_"+this.zu;this.vWa=ig.Ra.ic(sc.yb.getItem(this.item).name)||"NULL";this.zc=d.amount||1;this.Bd({SUB:[{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/treasure.png",
width:16,height:24},time:0.05,frames:[0,0,0,0,0,0,0,0,1,2,3,4,5],repeat:h,SUB:[{name:"idle"},{name:"idleBronze"},{name:"idleSilver"},{name:"idleGold"},{name:"idleKey"},{name:"idleMasterKey"}]},{shapeType:"Y_FLAT",sheet:{src:"media/entity/objects/treasure.png",width:24,height:24,offY:56},SUB:[{name:"idleBronze",time:0.05,frames:[3],repeat:h},{name:"idleSilver",time:0.05,frames:[2],repeat:h},{name:"idleGold",time:0.05,frames:[0],repeat:h},{name:"idleKey",time:0.05,frames:[4],repeat:h},{name:"idleMasterKey",
time:0.05,frames:[5],repeat:h}]},{sheet:{src:"media/entity/objects/treasure.png",width:24,height:32,offY:24},gfxOffset:{x:0,y:4},SUB:[{name:"open",time:0.1,frames:[0,1,2,3],repeat:y},{name:"end",time:0.1,frames:[4],repeat:y,shapeType:"Z_FLAT"}]}]});if(ig.ma.get(this.aCa)){this.CN=h;this.Ma("end",h,q,h)}else{this.Ma(this.ly.bb||"idle",h,q,h);this.b.yd.height=6;this.b.yd.yl=2;this.b.Cd.size=16}this.Ya.alpha=1;if(d.hideCondition)this.bj=new ig.r1(d.hideCondition)},Srb:function(){this.nWa=h;var a=sc.map.s1a(this.item);
if(a=="DUNGEON_KEY")this.ly=sc.ME.Key;else if(a=="DUNGEON_MASTER_KEY")this.ly=sc.ME.MasterKey;!this.CN&&this.ly.bb&&this.Ma(this.ly.bb,h,q,h)},Aj:function(a){if(this.Xd){if(a.ek()){this.Xd=q;this.hide()}}else a.ek()&&this.VWa()},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showDefault",this,{})}if(!this.CN){this.RXa();sc.cn.De(this.wf)}},RXa:function(){var a=this.ly.item?y:h;a||(a=sc.q.T.wq(this.ly.item));a?this.wf.nz(this.n6a):this.wf.nz(this.KEb)},po:function(){sc.cn.$e(this.wf);
this.Xd=ig.r.G.Mf.va("hideDefault",this,{callback:this})},update:function(){this.nWa||this.Srb();this.bj&&this.bj.update(this);this.parent()},Km:function(){var a=ig.r.cb;if(a.ed&&a.ed.sq)return y;if(this.CN)return h;if(this.ly.item&&!sc.q.T.wq(this.ly.item)){if(this.EQ&&!ig.ma.get(this.EQ)){ig.ma.set(this.EQ,h);return h}return y}var b=[{type:"SET_TERRAIN_FRICTION_IGNORE",value:h},{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"SET_FACE_TO_ENTITY",entity:this,rotate:h},
{type:"SET_FACE_FIX",value:h},{type:"MOVE_TO_ENTITY_DISTANCE",entity:this,min:16,max:20,maxTime:0.2},{type:"SHOW_ANIMATION",anim:"chestOpen"}],c=this.ly.Ct?1.2:0.8;if(this.EQ&&!ig.ma.get(this.EQ)){b.push({type:"CHANGE_VAR_BOOL",varName:this.EQ,changeType:"set",value:h});b.push({type:"WAIT",time:0.8})}else{b.push({type:"OPEN_CHEST",entity:this});b.push({type:"WAIT",time:c})}b.push({type:"SHOW_ANIMATION",anim:"preIdle",wait:h});b=new ig.Xe("openChest",b);b.sq=h;a.Zf(b)},l8a:function(){this.ly.Ct?this.G.sheet.va(this.ly.Ct,
this,{callback:this,spriteFilter:[1]}):this.VWa()},VWa:function(){if(!this.CN){this.CN=h;this.G.sheet.va("openRegular",this);sc.DV.PO(this,ig.Pa.CENTER,ig.r.cb,this.item,this.zc,sc.zL.CHEST);sc.pa.bc("chests",sc.map.gi.path,1);sc.pa.bc("chests","total",1);sc.pa.Ni("chests","totalRate",sc.map.T4(h));sc.cn.$e(this.wf);this.Ma("open",h,q,h,h);ig.ma.add(this.aCa,1);ig.ma.set(this.EQ,h);this.b.yd.height=0;this.b.Cd.size=0}},hVb:M("CN"),PQ:function(a){a=="open"&&this.Ma("end",h,q,h)},ag:function(){this.CN||
this.RXa();this.bj&&this.bj.ag(this)}});ig.la.OPEN_CHEST=ig.ta.extend({Q:0,f:function(a){this.Q=a.entity},start:function(){var a=ig.Ja.rd(this.Q);a&&a.l8a&&a.l8a()}});sc.ME.Default={bb:"idle"};sc.ME.Bronze={item:sc.d1.BRONZE,bb:"idleBronze",Ct:"keyOpenBronze"};sc.ME.Silver={item:sc.d1.SILVER,bb:"idleSilver",Ct:"keyOpenSilver"};sc.ME.Gold={item:sc.d1.GOLD,bb:"idleGold",Ct:"keyOpenGold"};sc.ME.Key={bb:"idleKey"};sc.ME.MasterKey={bb:"idleMasterKey"}});ig.J=h;
ig.N("game.feature.puzzle.entities.quick-sand").O("impact.feature.influencer.influencer","impact.feature.terrain.terrain","impact.feature.effect.effect-sheet").K(function(){ig.Pb.qta(ig.hd.QUICKSAND);ig.vmb=ig.Ca.extend({yj:q,n:0,G:{sheet:new ig.ud("puzzle.quicksand"),handle:q},f:J(),am:function(a,b){var c=b.b,d=b.RU.TBa==ig.hd.QUICKSAND&&c.g.z==c.pc;c.rt!=ig.hI.LOOSE&&(d=y);b.af&&b.af.n&&(d=y);if(!this.yj&&d){this.yj=new ig.CV;this.yj.l6=0.9;a.L2(this.yj);this.n=0;this.G.handle=this.G.sheet.va("sandTrail",
b,{duration:-1})}else if(this.yj&&!d){this.n/2>0.3&&b.WM(100,0,80);this.EDa(a,0.1)}if(this.yj){this.n=this.n+ig.i.ja;d=this.n/2;this.yj.e3a=c.size.z*d;this.yj.l6=1-d*0.7;if(this.n>=2)if((c=ig.gl.rY(b))&&c.X7a){this.EDa(a,1);c.X7a(b)}else{this.EDa(a,0);b.Hga&&b.Hga(ig.hd.QUICKSAND)}}},EDa:function(a,b){b?this.yj.oha(0.1):a.p_(this.yj);this.G.handle.stop();this.yj=this.G.handle=q}});ig.Rwa.I2(ig.vmb);ig.wa.QuicksandHole=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",
xc:h},map:{c:"Maps",d:"Map to be loaded",bh:"Map"},If:{c:"Marker",d:"Marker on map to teleport player to"}},label:function(){return"[ "+this.uc+" ]\n"+this.ov+"++"}}),G:{sheet:new ig.ud("puzzle.quicksand")},f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.F(32,32,0);a=ig.Rf.get("quicksand");this.Bd({sheet:{src:a.sheet,width:32,height:32,offX:a.x,offY:a.y},SUB:[{name:"defaukt",time:0.2,frames:[0,1,2,3],repeat:h}]});this.map=d.map;this.If=d.marker;this.yj=new ig.CV;this.yj.kab(sc.Mwa.wSa,
0,0,40);this.yj.rLb(this)},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showAlpha",this,{})}},update:function(){this.parent()},X7a:function(a){this.G.sheet.va("sandDive",a);a=new ig.Ja({steps:[{type:"TELEPORT",map:this.map,marker:this.If}]});ig.r.vi.Dp(a,ig.Qm.BLOCKING)},Ifa:function(a){a.Aq&&a.Aq.L2(this.yj)},z7a:function(a){a.Aq&&a.Aq.p_(this.yj)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.spiderweb").O("impact.feature.influencer.influencer","impact.feature.terrain.terrain","impact.feature.effect.effect-sheet").K(function(){ig.gob=ig.Ca.extend({yj:q,n:0,G:{sheet:new ig.ud("puzzle.quicksand"),handle:q},f:J(),am:function(a,b){if(b.sa!=sc.pd.ENEMY){var c=b.b,d=b.RU.TBa==ig.hd.SPIDERWEB&&c.g.z==c.pc;b.Ah&&sc.q.T.W.Ag("SPIDER_SLOW_DOWN_GUARD")>0&&(d=y);c.rt!=ig.hI.LOOSE&&(d=y);b.af&&b.af.n&&(d=y);if(!this.yj&&d){this.yj=new ig.CV;a.L2(this.yj);this.n=0}else this.yj&&
!d&&this.Kxb(a,0.1);if(this.yj){this.n=this.n+ig.i.ja;c=(this.n/0.3).Rb(0,1);this.yj.l6=0.9-c*0.6}}},Kxb:function(a,b){b?this.yj.oha(b):a.p_(this.yj);this.yj=q}});ig.Rwa.I2(ig.gob)});ig.J=h;
ig.N("game.feature.puzzle.entities.steam-pipes").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){sc.hA={};var a=4/220,b=Vec2.create(),c=Vec2.create(),d=Vec3.create();sc.iW={Xsa:function(a,c,d){for(var c=this.gpa(b,a,c),k=ig.r.Br(c.x-1,c.y-1,a.b.g.z-1,4,4,4,a),l=k.length;l--;){var m=k[l];if(m.YKa&&m.YKa(c,d))return h}d&&d.stop(c,a.b.g.z);return y},B1a:function(a,b,d,k){var l=this.gpa(c,a,b[0]),m=Vec2.eb(l,d),l=this.gpa(c,a,b[1]),a=Vec2.eb(l,d);return k&&Math.min(m,a)>k?-1:
m<a?0:1},gpa:function(a,b,c){a=Vec2.assign(a,c);Vec2.FZ(a,b.b.size);Vec2.add(a,b.b.g);return a}};sc.Kob=ig.Kc.extend({zj:q,f:function(a,b,c,d){this.parent(a,b,c,d);this.F(0,0,0);this.zj=new ig.Bw(this,ig.mk.S,0.1,0.3,-1,1,h);ig.pg.ey(this.zj)},stop:function(a,b){var c=new sc.vw(ig.r.cb,{attack:{type:"MASSIVE",element:"HEAT",damageFactor:0,spFactor:0,hints:["STEAM_PIPE"]},pos:Vec3.vc(a.x,a.y,b),radius:4,zHeight:4,duration:0.1,expandRadius:0,alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(c);this.zj.stop();
this.ze()}});ig.wa.SteamPipe=ig.Kc.extend({pH:q,s:q,yg:{i8:0,duration:0,Vha:0,eD:0,V5:0,GKa:y,EY:q},t:new ig.u({Yaa:h,Dd:h,attributes:{pH:{c:"String",d:"Type of rail",U:sc.hA}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;a=ig.Rf.get("pipes");d=this.pH=sc.hA[d.pipeType]||sc.hA.HORIZONTAL;if(a&&d){if(!d.Xa||this.b.size.x%16!=0)this.b.size.x=d.size.x;if(!d.Va||this.b.size.y%16!=0)this.b.size.y=d.size.y;this.b.size.z=d.size.z;if(d.Xa||d.Va){if(window.Ed){this.t=this.t.copy();this.t.Kq=
d.Xa;this.t.Lq=d.Va;this.t.B_=16}b=d.Xa?ig.nf.Eg.Yn:ig.nf.Eg.OL;this.s={pattern:new ig.Xz(a.sheet,b,d.s.Vc||16,d.s.sd|16,a.x+d.s.x,a.y+d.s.y,1,1),JFa:new ig.Xz(a.sheet,b,d.s.Vc||16,d.s.sd|16,a.x+d.s.x,a.y+d.s.y+32,1,1)}}else this.s={sheet:new ig.ia(a.sheet),x:a.x+d.s.x,y:a.y+d.s.y}}else this.b.F(16,16,6)},Ge:function(a){if(this.s){this.s.pattern&&this.s.pattern.Tc();this.s.JFa&&this.s.JFa.Tc();this.s.sheet&&this.s.sheet.Tc()}this.parent(a)},Np:function(){this.ul(4);for(var a=this.b,b=this.Ua.length;b--;){var c=
this.Ua[b];c.F(a.size.x,a.size.y,this.pH.Nu,a.size.y);c.Wta(this,q,q,0)}},update:function(){if(this.yg.duration){if(!this.yg.GKa){this.yg.Vha=this.yg.Vha+ig.i.ja;if(this.yg.Vha>=this.yg.duration){var a=this.pH.Mb[1-this.yg.i8];sc.iW.Xsa(this,a,this.yg.EY);this.yg.GKa=h}}this.yg.V5=this.yg.V5+ig.i.ja;if(this.yg.EY&&this.yg.V5>=this.yg.duration)this.yg.EY=q;if(this.yg.EY&&this.yg.V5>=0){var d=this.pH.Mb[this.yg.i8],a=this.pH.Mb[1-this.yg.i8],a=Vec2.an(d,a,this.yg.V5/this.yg.duration,b),a=sc.iW.gpa(c,
this,a),d=Math.round(this.yg.EY.b.g.z*0.8+(this.b.g.z+(this.b.size.z==32?17:2))*0.2);this.yg.EY.l(a.x,a.y,d)}this.yg.eD=this.yg.eD+ig.i.ja;if(this.yg.eD>=this.yg.duration)this.yg.duration=0}this.parent()},Gh:function(){var b=this.Ua[0];this.s.pattern?b.Bj(this.s.pattern.Iy(0),0,0):b.Bj(this.s.sheet,this.s.x,this.s.y);for(b=3;b--;){var c=this.Ua[b+1];if(this.yg.duration){this.s.pattern?c.Bj(this.s.JFa.Iy(0),0,0):c.Bj(this.s.sheet,this.s.x,this.s.y+32);c.gp(0,0,0,0);c.qg="lighter";var d=this.pH.Mb[this.yg.i8],
k=(1-this.yg.Vha/this.yg.duration).Rb(0,1);this.nVa(c,d,k);d=this.pH.Mb[1-this.yg.i8];k=((this.yg.eD+b*a)/this.yg.duration).Rb(0,1);this.nVa(c,d,k)}else c.FH()}},nVa:function(a,b,c){if(b.y==0.5){c=Math.round(a.size.x*c);b.x==1?a.vk.left=c:a.vk.right=c}else{c=Math.round((a.size.y+a.size.z)*c);b.y==1?a.vk.top=c:a.vk.bottom=c}},YKa:function(a,b){a=sc.iW.B1a(this,this.pH.Mb,a,4);if(a==-1)return y;this.yg.i8=a;this.yg.duration=(this.pH.Xa?this.b.size.x:this.pH.Va?this.b.size.y:16)/220;this.yg.Vha=0;this.yg.eD=
-40/220;this.yg.V5=-8/220;this.yg.GKa=y;b||(b=ig.r.Pe(sc.Kob,a.x,a.y,this.b.g.z,{}));this.yg.EY=b;this.yg.zj=q;return h}});sc.hA.HORIZONTAL={s:{x:32,y:0},Xa:h,size:{x:16,y:12,z:5},Nu:4,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.hA.VERTICAL={s:{x:32,y:16},Va:h,size:{x:16,y:16,z:5},Nu:0,Mb:[{x:0.5,y:0},{x:0.5,y:1}]};sc.hA.CURVE_SE={s:{x:0,y:0},size:{x:16,y:12,z:5},Nu:4,Mb:[{x:1,y:0.5},{x:0.5,y:1}]};sc.hA.CURVE_SW={s:{x:16,y:0},size:{x:16,y:12,z:5},Nu:4,Mb:[{x:0,y:0.5},{x:0.5,y:1}]};sc.hA.CURVE_NE={s:{x:0,y:16},
size:{x:16,y:16,z:5},Nu:0,Mb:[{x:0.5,y:0},{x:1,y:0.5}]};sc.hA.CURVE_NW={s:{x:16,y:16},size:{x:16,y:16,z:5},Nu:0,Mb:[{x:0.5,y:0},{x:0,y:0.5}]};sc.hA.END_NORTH={s:{x:48,y:6},size:{x:16,y:16,z:5},Nu:10,Mb:[{x:0.5,y:0},{x:0.5,y:1}]};sc.hA.OVEN_EAST={s:{x:64,y:0},size:{x:16,y:12,z:32},Nu:20,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.hA.OVEN_WEST={s:{x:80,y:0},size:{x:16,y:12,z:32},Nu:20,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.hA.UPPER_PIPE={s:{x:96,y:0,Vc:16,sd:32},size:{x:16,y:12,z:32},Nu:20,Xa:h,Mb:[{x:0,y:0.5},{x:1,
y:0.5}]};sc.sC={};ig.wa.SteamTurnout=ig.Wd.extend({bOb:q,$Nb:q,fb:q,Mb:[],qc:y,G:{sheet:new ig.ud("puzzle.water-bubble")},t:new ig.u({Yaa:h,Dd:h,attributes:{bOb:{c:"String",d:"Default turn of turnout",U:sc.sC},$Nb:{c:"String",d:"Alternative turn of turnout",U:sc.sC},fb:{c:"VarCondition",d:"Condition to switch to turnAlt"}}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.F(16,16,10);a=ig.Rf.get("pipes");b=sc.sC[d.turnDefault]||sc.sC.CURVE_NE;c=sc.sC[d.turnAlt]||sc.sC.CURVE_NE;
this.Mb.push(b.Mb);this.Mb.push(c.Mb);this.Bd({shapeType:"XY_EXPAND",Hh:1,sheet:{src:a.sheet,width:16,height:24,xCount:3,offX:a.x,offY:a.y+64},SUB:[{name:"off",time:0.1,frames:[b.Vj],repeat:h},{name:"on",time:0.1,frames:[c.Vj],repeat:h}]});this.fb=new ig.de(d.condition);this.qc=this.fb.evaluate();this.Ma(this.qc?"on":"off")},YKa:function(a,b){this.G.sheet.va("steamTurnout",this);var c=this.Mb[this.qc?1:0],d=sc.iW.B1a(this,c,a,4);d==-1?b.stop(a,this.b.g.z):sc.iW.Xsa(this,c[1-d],b);return h},ag:function(){var a=
this.fb.evaluate();if(this.qc!=a){this.qc=a;this.G.sheet.va("turnoutChange",this);this.Ma(this.qc?"on":"off",h)}}});sc.sC.HORIZONTAL={Vj:2,Mb:[{x:0,y:0.5},{x:1,y:0.5}]};sc.sC.VERTICAL={Vj:5,Mb:[{x:0.5,y:0},{x:0.5,y:1}]};sc.sC.CURVE_SE={Vj:0,Mb:[{x:1,y:0.5},{x:0.5,y:1}]};sc.sC.CURVE_SW={Vj:1,Mb:[{x:0,y:0.5},{x:0.5,y:1}]};sc.sC.CURVE_NE={Vj:3,Mb:[{x:0.5,y:0},{x:1,y:0.5}]};sc.sC.CURVE_NW={Vj:4,Mb:[{x:0.5,y:0},{x:0,y:0.5}]};ig.wa.SteamOven=ig.Wd.extend({G:{sheet:new ig.ud("puzzle.water-bubble"),handle:q},
t:new ig.u({Dd:h,attributes:{}}),f:function(a,b,c,d){this.parent(a,b,c,d);this.b.type=ig.ca.BLOCK;this.b.F(16,16,32);a=ig.Rf.get("pipes");this.Bd({namedSheets:{floor:{src:a.sheet,width:16,height:16,xCount:1,offX:a.x+80,offY:a.y+64},top:{src:a.sheet,width:16,height:32,xCount:1,offX:a.x+64,offY:a.y+64}},SUB:[{name:"default",sheet:"floor",time:0.2,frames:[0,1,2,1],repeat:h,size:{x:16,y:16,z:0}},{name:"default",sheet:"top",time:0.1,frames:[0],repeat:h,size:{x:16,y:16,z:16},offset:{x:0,y:0,z:12}}]});this.Ma("default");
this.zj=new ig.Bw(this,ig.mk.L,0,0.2,-1,1,h);this.zj.LB(0,0,-16);ig.pg.ey(this.zj)},oq:function(a,b){if(b&&!Vec2.Ig(b)&&a instanceof sc.Rja&&a.b.g.z==this.b.g.z){this.oNb();var c=this.lc(ig.Pa.BOTTOM,d);a.d_a(c)}},oNb:function(){this.G.sheet.va("ovenActivate",this);sc.iW.Xsa(this,{x:0,y:0.5});sc.iW.Xsa(this,{x:1,y:0.5})}})});ig.J=h;
ig.N("game.feature.puzzle.entities.tesla-coil").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){function a(a,b){return b.eb-a.eb}var b=Vec3.create();sc.Yx={};ig.wa.TeslaCoil=ig.Wd.extend({CM:0,XBa:q,source:y,Lca:y,G:{sheet:new ig.ud("puzzle.tesla"),handle:q},b0a:q,t:new ig.u({Dd:h,attributes:{wSb:{c:"String",d:"Type of TeslaCoil",U:sc.Yx},WOa:{c:"VarName",d:"Var set to true when tesla coil begins charging",I:h},XOa:{c:"VarName",d:"Var set to true when tesla coil discharges",
I:h},align:{c:"String",d:"Alignment of effect relative to target",U:ig.Pa,I:h}}}),f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=ig.ca.VIRTUAL;this.b.di=-1;this.b.Fd=1E3;if(a=sc.Yx[i.coilType]||sc.Yx.SOURCE){Vec3.assign(this.b.size,a.size);this.source=a.source;this.Lca=a.Lca||y;if(a.Jj)this.b.type=a.Jj;this.SX=a.SX||q;b=a.Ba;if(b.sheet.src)this.Bd(b);else if(f=ig.Rf.get("tesla")){b=ig.copy(a.Ba);b.sheet.src=f.sheet;b.sheet.offX=b.sheet.offX+f.x;b.sheet.offY=b.sheet.offY+f.y;this.Bd(b)}this.Ma("off")}this.WOa=
i.varOnCharge||q;this.XOa=i.varOnDischarge||q;this.b0a=i.align||q},Zl:function(){this.ze()},myb:function(a){this.XBa=a;this.CM=0.1},SX:q,Ona:function(c){this.XOa&&ig.ma.set(this.XOa,h);this.Ua.length>1&&this.Ua[1].gp(0,0);this.Ma("flash",h,"off",h);var d=this.lc(ig.Pa.BOTTOM,b);d.z=d.z-32;for(var f=ig.r.lN(d,96,1,160,q,q,q,this,c),d=f.length,i=[];d--;){var j=f[d];if(j instanceof ig.wa.TeslaCoil&&!j.source||j instanceof ig.wa.OneTimeSwitch&&j.Hx=="teslaSwitch"){var k=ig.qd.Fy(j.b,this.b);i.push({joa:j,
eb:k})}}if(i.length){i.sort(a);for(d=i.length;d--;){f=y;for(j=d+1;!f&&j<i.length;++j){k=ig.qd.Fy(i[d].joa.b,i[j].joa.b);k<i[d].eb&&(f=h)}f?i.splice(d,1):c.push(i[d].joa)}for(d=i.length;d--;){k=i[d].joa;if(k instanceof ig.wa.TeslaCoil)k.SX?k.SX(c,this.b0a):k.myb(c);else if(k instanceof ig.wa.OneTimeSwitch){f=k.lc(ig.Pa.BOTTOM,b);f=new sc.vw(ig.r.cb,{attack:{type:"MASSIVE",element:"HEAT",damageFactor:0,spFactor:0,hints:["LIGHTNING"]},pos:Vec3.vc(f.x,f.y,f.z),radius:4,zHeight:4,duration:0.1,expandRadius:0,
alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(f)}this.G.sheet.va("lightning",k,{align:ig.Pa.TOP,target2:this,target2Align:ig.Pa.TOP})}}else this.G.sheet.va("fail",this,{align:ig.Pa.TOP})},update:function(){if(this.CM){this.CM=this.CM-ig.i.ja;if(this.CM<=0){this.CM=0;if(this.G.handle){this.G.handle.stop();this.G.handle=q}this.Ona(this.XBa||[this]);this.XBa=q}else this.source&&this.Ua.length>=2&&this.Ua[1].gp(48-27*(1-this.CM/(this.Lca?0.5:1)),0)}this.parent()},sj:function(a){if(!this.source)return y;
var b=a.aj(this),f=a.Gf();if(!this.CM&&f==sc.ha.SHOCK&&a.zb&&a.zb.wi("COMPRESSED")){this.WOa&&ig.ma.set(this.WOa,h);this.CM=this.Lca?0.5:1;this.Ma("charge");this.G.handle=this.G.sheet.va("charging",this,{duration:-1,align:ig.Pa.TOP});this.G.sheet.Cg("chargeStart",b.x,b.y,b.z,this)}sc.Ta.Oi(this,b,sc.Wb.NONE,a.Gf(),y,y,h);return h}});sc.Yx.SOURCE={size:{x:16,y:16,z:32},Ba:{sheet:{src:q,width:24,height:48,offX:0,offY:0,xCount:2},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"charge",
time:0.1,frames:[0],repeat:h},{name:"charge",time:0.1,frames:[1],repeat:h,renderMode:"lighter"},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},source:h};sc.Yx.SOURCE_FAST={size:{x:16,y:16,z:32},Ba:{sheet:{src:q,width:24,height:48,offX:0,offY:0,xCount:2},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"charge",time:0.1,frames:[0],repeat:h},{name:"charge",time:0.1,frames:[1],
repeat:h,renderMode:"lighter"},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},source:h,Lca:h};sc.Yx.SOURCE_LOOSE={size:{x:16,y:16,z:32},Ba:{sheet:{src:"media/entity/objects/tesla-loose.png",width:24,height:64,offX:24,offY:0,xCount:2},wallY:0.125,offset:{x:4,y:0,z:-16},shapeType:"Z_EXPAND",SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"charge",time:0.1,frames:[0],repeat:h},
{name:"charge",time:0.1,frames:[1],repeat:h,renderMode:"lighter"},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},source:h};sc.Yx.SOURCE_LOOSE_FLIP={size:{x:16,y:16,z:32},Ba:{sheet:{src:"media/entity/objects/tesla-loose.png",width:24,height:64,offX:24,offY:0,xCount:2},wallY:0.125,offset:{x:-4,y:0,z:-16},flipX:h,shapeType:"Z_EXPAND",SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"charge",
time:0.1,frames:[0],repeat:h},{name:"charge",time:0.1,frames:[1],repeat:h,renderMode:"lighter"},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},source:h};sc.Yx.EXTENDER={size:{x:16,y:16,z:16},Ba:{sheet:{src:q,width:16,height:32,offX:16,offY:48,xCount:2},wallY:0.5,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,
1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]}};sc.Yx.EXTENDER_LOOSE={size:{x:16,y:16,z:16},Ba:{sheet:{src:"media/entity/objects/tesla-loose.png",width:16,height:40,offX:88,offY:0,xCount:2},wallY:0.5,shapeType:"Z_EXPAND",offset:{x:0,y:0,z:-8},SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]}};sc.Yx.EXTENDER_LOOSE_FLIP=
{size:{x:16,y:16,z:16},Ba:{sheet:{src:"media/entity/objects/tesla-loose.png",width:16,height:40,offX:88,offY:0,xCount:2},wallY:0.5,flipX:h,shapeType:"Z_EXPAND",offset:{x:0,y:0,z:-8},SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]}};sc.Yx.EXTENDER_IGNORE={size:{x:16,y:16,z:16},Jj:ig.ca.IGNORE,Ba:{sheet:{src:q,width:16,height:32,offX:16,
offY:48,xCount:2},wallY:0.5,shapeType:"Y_FLAT",SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]}};sc.Yx.GROUND_DISCHARGE={size:{x:16,y:16,z:16},Ba:{sheet:{src:q,width:16,height:32,offX:16,offY:80,xCount:2},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,
1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},SX:function(a,d){this.Ma("flash",h,"off",h);this.G.sheet.va("groundShock",this,{align:d||ig.Pa.BOTTOM});var f=this.lc(ig.Pa.BOTTOM,b),f=new sc.vw(ig.r.cb,{attack:{type:"MASSIVE",element:"SHOCK",damageFactor:1,spFactor:0,hints:["GROUND_SHOCK"]},pos:Vec3.vc(f.x,f.y,f.z),radius:16,zHeight:48,duration:0.2,expandRadius:64,alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(f)}};sc.Yx.WHALE_DISCHARGE={size:{x:16,y:16,
z:16},Ba:{sheet:{src:"media/entity/objects/tesla-loose.png",width:16,height:24,offX:88,offY:0,xCount:2},wallY:1,offset:{x:0,y:-8,z:0},SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],repeat:y,renderMode:"lighter"}]},SX:function(){this.Ma("flash",h,"off",h);this.G.sheet.va("groundShock",this,{align:ig.Pa.BOTTOM});var a=this.lc(ig.Pa.BOTTOM,b),a=new sc.vw(ig.r.cb,{attack:{type:"MASSIVE",
element:"SHOCK",damageFactor:1,spFactor:0,hints:["GROUND_SHOCK"]},pos:Vec3.vc(a.x,a.y,a.z-16),radius:16,zHeight:16,duration:0.2,expandRadius:64,alwaysFull:h,party:"PLAYER",centralAngle:1});sc.Ta.js(a)}};sc.Yx.GROUND_DISCHARGE_FISH={size:{x:16,y:16,z:16},Ba:{sheet:{src:q,width:16,height:32,offX:16,offY:80,xCount:2},wallY:1,SUB:[{name:"off",time:0.1,frames:[0],repeat:h},{name:"flash",time:0.1,frames:[0],repeat:y},{name:"flash",time:0.05,frames:[1,1,1,1,1,1,1,1],framesAlpha:[1,1,1,0.9,0.8,0.6,0.4,0.2],
repeat:y,renderMode:"lighter"}]},SX:function(a,d){this.Ma("flash",h,"off",h);this.G.sheet.va("groundShock",this,{align:d||ig.Pa.BOTTOM});var f=this.lc(ig.Pa.BOTTOM,b),f=new sc.vw(ig.r.cb,{attack:{type:"NONE",element:"NEUTRAL",damageFactor:1,spFactor:0,hints:["DISCHARGE_FISH"],hitInvincible:h,limiter:"SIGNAL"},pos:Vec3.vc(f.x,f.y,f.z-32),radius:128,zHeight:96,duration:0,expandRadius:0,alwaysFull:h,party:"OTHER",centralAngle:1});sc.Ta.js(f)}}});ig.J=h;
ig.N("game.feature.puzzle.entities.wave-teleport").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.combat.combat-target-event").K(function(){var a=Vec2.create(),b=Vec2.create(),c=Vec2.create();sc.lV.WAVE_TELEPORT={t:{attributes:{Qb:{c:"Number",d:"Minimum angle different between vectors pointing to old and new target position. 0.5= at least 90 degree difference. 1.0= essentially impossible (180 degree)"}}},Nb:function(a,f,i,j){f=ig.qd.Wk(a.b,f.b,b);a=a.tb(c);Vec2.sub(a,i.newPos);
Vec2.Lc(a);return Vec2.Qb(f,a)>=j.angle*Math.PI}};ig.wa.WaveTeleport=ig.Wd.extend({G:{sheet:new ig.ud("puzzle.wave-teleport"),handle:q,Xd:q},Ix:0,AE:[],t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h}}}),nKa:y,XCa:y,f:function(a,b,c,j){this.parent(a,b,c,j);this.b.type=ig.ca.TRIGGER;this.b.F(16,16,24);this.b.Cd.size=16;this.b.Fd=9001;this.b.K7(4,4);this.Bd({shapeType:"Y_FLAT",offset:{x:0,y:-4,z:8},sheet:{src:"media/entity/objects/object-effects.png",width:24,
height:24,xCount:5,offX:128,offY:40},SUB:[{name:"idle",time:0.1,frames:[0],repeat:h,framesAlpha:[0.5]},{name:"idle",time:0.133,frames:[1,2,3,4],repeat:h,renderMode:"lighter"}]});this.Ma("idle")},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}if(!a){this.Ya.alpha=0;this.G.sheet.va("appear",this,{align:ig.Pa.CENTER})}},Zl:function(){this.G.Xd=this.G.sheet.va("disappear",this,{align:ig.Pa.CENTER,callback:this});this.nKa=h},po:function(){this.G.Xd=this.G.sheet.va("disappear",
this,{align:ig.Pa.CENTER,callback:this})},Aj:function(a){if(a.ek()&&this.G.Xd){this.G.Xd=q;this.Ix?this.XCa=h:this.nKa?this.ze():this.hide()}},vNa:function(){if(this.AE.length==0){this.AE.push(ig.r.cb);for(var b=sc.sa.He.length;b--;){var c=sc.sa.Xk(b);c&&this.AE.push(c)}}c=new ig.Xe("derp",[{type:"WAIT",time:-1}]);c.sq=h;for(b=this.AE.length;b--;){var i=this.AE[b],j=i.tb(a);this.G.sheet.Cg("trail",j.x,j.y,i.b.g.z+12,q,{target2:this,target2Align:ig.Pa.CENTER});this.G.sheet.va("hide",i,{target2:this,
target2Align:ig.Pa.CENTER});if(i instanceof ig.wa.Combatant){i.Ds=-1;i.Zf(c)}i=ig.r.nG(i);for(j=i.length;j--;)i[j]instanceof ig.wa.WavePushPullBlock||this.G.sheet.va("hide",i[j],{target2:this,target2Align:ig.Pa.CENTER})}this.Ix=0.1},YM:function(){for(var b=0,c=new ig.Xe("derp",[{type:"WAIT",time:0}]),i=this.AE.length,j=0;j<i;++j){var k=this.AE[j],l=this.tb(a);k.s$a&&k.s$a(sc.lV.WAVE_TELEPORT,{newPos:l});if(k instanceof ig.wa.Combatant)k.Ds=0;if(k instanceof sc.F1)k.gw();else{for(var m=ig.r.nG(k),
n=l.x-k.b.size.x/2,l=l.y-k.b.size.y/2,o=this.b.g.z+b,t=m.length;t--;)if(m[t]instanceof ig.wa.WavePushPullBlock)m[t].b.sha(q);else{this.G.sheet.va("show",m[t]);var p=m[t].b;p.sha(q);p.l(p.g.x+n-k.b.g.x,p.g.y+l-k.b.g.y,p.g.z+o-k.b.g.z)}k.l(n,l,o);b=b+k.b.size.z}if(k.Ah){ig.le.F4a(k.vf)&&ig.le.V9a("FASTER",KEY_SPLINES.EASE_IN_OUT);c.sq=h}this.G.sheet.va("show",k);k.Zf&&k.Zf(c);k.YM&&k.YM()}this.AE.length=0},update:function(){this.Ya.Qb=this.Ya.Qb+ig.i.ja*1;if(this.Ix){this.Ix=this.Ix-ig.i.ja;if(this.Ix<=
0){this.Ix=0;this.YM();if(this.XCa){this.XCa=h;this.nKa?this.ze():this.hide()}}}this.parent()},cCb:function(){for(var a=this.b,a=ig.r.Br(a.g.x-8,a.g.y-8,a.g.z,a.size.x+16,a.size.y+16,a.size.z,this),b=a.length;b--;){var c=a[b];if(c instanceof ig.wa.WavePushPullBlock||c instanceof ig.wa.PushPullBlock)return h}return y},sj:function(a){var b=a.aj(this),c=a.Gf();if(!(this.cCb()||a.Nn&&!a.zb.wi("CHARGED"))&&(a.Nn||a instanceof sc.oja)&&a.te().Ah&&c==sc.ha.WAVE&&!this.Ix){for(var c=a.XA,j=c.length;j--;)if(c[j].YM){this.AE.push(c[j]);
c.splice(j,1)}if(this.AE.length==0&&a.Nn&&!ig.gl.ut(this,32)||this.AE.length==0&&ig.qd.Fy(this.b,ig.r.cb.b)<48||this.AE.length==0&&ig.r.cb.ed&&ig.r.cb.ed.sq)return y;sc.Ta.Oi(this,b,sc.Wb.NONE,a.Gf(),y,y,h);this.vNa();return h}return y},GG:function(a,b,c){return!c||sc.q.T.sg!=sc.ha.WAVE||ig.qd.Fy(this.b,ig.r.cb.b)<48?y:h}})});ig.J=h;
ig.N("game.feature.puzzle.puzzle-steps").O("impact.base.action","impact.base.event","impact.base.entity").K(function(){var a=Vec3.create(),b=Vec3.create(),c=Vec2.create();ig.oa.DESTROY_DESTRUCTIBLE=ig.qa.extend({Q:q,t:new ig.u({attributes:{Q:{c:"Entity",d:"Destructible to destroy"}}}),f:function(a){this.Q=a.entity||q},start:function(a,b){var c=ig.Ja.rd(this.Q,b);c&&c.qNa&&c.qNa()}});ig.la.ALIGN_PUSH_PULL_POS=ig.ta.extend({XZa:q,duration:0,f:function(a){this.XZa=a.component;this.duration=a.duration},
start:function(a){a.$a.Sf=a.lc(ig.Pa.BOTTOM);a.$a.duration=this.duration;a.ib=a.$a.duration},ya:function(b){var c=1-(b.ib/b.$a.duration).Rb(0,1);this.XZa.eFa(a);Vec3.an(b.$a.Sf,a,c,a);b.l(a.x-b.b.size.x/2,a.y-b.b.size.y/2,a.z,h);return c>=1}});ig.oa.RESET_PUSH_PULL_POS=ig.qa.extend({t:new ig.u({attributes:{Q:{c:"Entity",d:"Pushpull entity"},g:{c:"Vec3",d:"If defined, reset to this position",wC:h,dr:h,kq:h,I:h}}}),f:function(a){this.Q=a.entity;this.g=a.pos||q},start:function(a,b){var c=ig.Ja.rd(this.Q,
b);c&&c.gw&&c.gw(this.g)}});ig.la.DO_WAVE_TELEPORT=ig.ta.extend({Q:q,f:function(a){this.Q=a.entity},start:function(){this.Q.YM()}});ig.la.THROW_BOMB=ig.ta.extend({s:q,offset:q,align:q,speed:q,Kk:q,Yua:q,t:new ig.u({attributes:{offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},speed:{c:"Number",d:"The XY speed of the thrown bomb",I:h},Kk:{c:"Number",d:"The z speed of the thrown bomb",I:h},
Yua:{c:"Number",d:"Time in seconds the timer of the bomb should be advanced"}}}),f:function(a){this.offset=a.offset;this.align=a.align;this.speed=a.speed;this.Kk=a.zVel;this.Yua=a.timeAdvance||0;a=ig.Rf.get("puzzle2");this.s=new ig.ia(a.sheet)},Ka:function(){this.s.Tc()},start:function(b){var c=b.lc(this.align,a);this.offset&&Vec3.add(c,this.offset);c=ig.r.Pe(sc.b9,c.x,c.y,c.z,{});c.start(b.face,b,this.speed,this.Kk);c.n=c.n-this.Yua}});var d=[];ig.la.RAIN_BOMB=ig.ta.extend({s:q,count:q,offset:q,
align:q,Lb:q,T0:q,t:new ig.u({attributes:{count:{c:"Integer",d:"Number of bombs"},offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},Lb:{c:"Vec2",d:"Area on which to rain the bombs randomly"},T0:{c:"Number",d:"Value to +- vary the z height"}}}),f:function(a){this.count=a.count;this.offset=a.offset;this.align=a.align;this.Lb=a.area;this.T0=a.zVary||0;a=ig.Rf.get("puzzle2");this.s=new ig.ia(a.sheet)},
Ka:function(){this.s.Tc()},start:function(b){b=b.lc(this.align,a);this.offset&&Vec3.add(b,this.offset);for(var f=this.count;f--;){var k=5;do{var l=y,m=Vec2.Oa(c,0,0);m.x=(Math.random()-0.5)*this.Lb.x;m.y=(Math.random()-0.5)*this.Lb.y;for(var n=d.length;n--;)if(Vec2.eb(d[n],m)<48){l=h;break}}while(k--&&l);d.push(Vec2.create(m));k=(Math.random()-0.5)*this.T0;m=ig.r.Pe(sc.b9,b.x+m.x,b.y+m.y,b.z+k,{});m.tT=h;m.b.kj=0.25}d.length=0}});ig.oa.SPAWN_BOMB=ig.qa.extend({s:q,g:q,offset:q,align:q,Lb:q,T0:q,t:new ig.u({attributes:{Gq:{c:"Vec3",
d:"Where to spawn bomb",dr:h,kq:h},kf:{c:"Number",d:"From how height the bomb will fall"},T0:{c:"Number",d:"Value to +- vary the z height"}}}),f:function(a){this.Gq=a.point;this.kf=a.zHeight;this.T0=a.zVary||0;a=ig.Rf.get("puzzle2");this.s=new ig.ia(a.sheet)},Ka:function(){this.s.Tc()},start:function(){var b=ig.Ja.vq(this.Gq,a);b.z=b.z+(this.kf+(Math.random()-0.5)*this.T0);b=ig.r.Pe(sc.b9,b.x,b.y,b.z,{});b.tT=h;b.b.kj=0.25}});ig.oa.SPAWN_BUBBLE=ig.qa.extend({offset:q,t:new ig.u({attributes:{Gq:{c:"Vec3",
d:"Where to spawn bubble",dr:h,kq:h}}}),f:function(a){this.Gq=a.point},start:function(){var b=ig.Ja.vq(this.Gq,a);ig.r.Pe(sc.H$,b.x,b.y,b.z,{})}});ig.oa.DESTROY_BOMBS=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),Ka:J(),start:function(){for(var a=ig.r.kda(sc.b9),b=a.length;b--;)a[b].w4()}});ig.la.SHOOT_BUBBLE=ig.ta.extend({s:q,offset:q,align:q,speed:q,Kk:q,Yua:q,t:new ig.u({attributes:{offset:{c:"Offset",d:"Offset relative to entity ground center from which to shoot"},align:{c:"String",d:"Alignment relative to entity from which to shoot",
U:ig.Pa},duration:{c:"Number",d:"Time in seconds until bubble explodes",ab:3}}}),f:function(a){this.offset=a.offset;this.align=ig.Pa[a.align]||ig.Pa.BOTTOM;this.s=new ig.ia("media/entity/objects/object-effects.png");this.duration=a.duration||3},Ka:function(){this.s.Tc()},start:function(b){var c=b.lc(this.align,a);this.offset&&Vec3.add(c,this.offset);ig.r.Pe(sc.H$,c.x,c.y,c.z,{combatant:b.te(),target:b.Qd(),targetTime:this.duration})}});ig.la.SET_ELEMENT_POLE_TIMER=ig.ta.extend({t:new ig.u({attributes:{time:{c:"Number",
d:"Minimum time that currently targeted element pole should have, if temporary"}}}),f:function(a){this.time=a.time},start:function(a){(a=a.Sq)&&a instanceof ig.wa.ElementPole&&a.Ft(this.time)}});ig.la.PLACE_WAVE_TELEPORT=ig.ta.extend({t:new ig.u({attributes:{align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa}}}),f:function(a){this.align=ig.Pa[a.align]},start:function(b){var c=b.lc(this.align,a);c.x=c.x-8;c.y=c.y-8;c=ig.r.Pe(ig.wa.WaveTeleport,c.x,c.y,c.z,{});b.Hj(c)}});
var f={EXTENDER_LOOSE:["EXTENDER_LOOSE","EXTENDER_LOOSE_FLIP"],SOURCE_LOOSE:["SOURCE_LOOSE","SOURCE_LOOSE_FLIP"],WHALE_DISCHARGE:["WHALE_DISCHARGE"]};ig.la.PLACE_TESLA_COIL=ig.ta.extend({t:new ig.u({attributes:{align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},Hcb:{c:"String",d:"Type of Teslacoil",U:f}}}),f:function(a){this.align=ig.Pa[a.align];this.Hcb=f[a.teslaType]||f.EXTENDER_LOOSE},start:function(b){var c=b.lc(this.align,a);c.x=c.x-8;c.y=c.y-8;var d=this.Hcb.random(),
c=ig.r.Pe(ig.wa.TeslaCoil,c.x,c.y,c.z,{coilType:d});b.Hj(c)}});ig.la.PLACE_ELEMENT_SHIELD=ig.ta.extend({t:new ig.u({attributes:{align:{c:"String",d:"Alignment relative to entity from which to shoot",U:ig.Pa},element:{c:"String",d:"Element of Shield Ball",U:["HEAT","COLD","SHOCK","WAVE"]}}}),f:function(a){this.align=ig.Pa[a.align];this.element=a.element},start:function(b){var c=b.lc(this.align,a),c=ig.r.Pe(sc.wwa,c.x,c.y,c.z,{element:this.element},h);b.Hj(c)}});ig.la.WAIT_UNTIL_ELEMENT_SHIELD_USED=
ig.ta.extend({t:new ig.u({attributes:{}}),f:function(a){this.align=ig.Pa[a.align];this.element=a.element},ya:function(a){for(var a=a.kl,b=a.length;b--;)if(a[b]instanceof sc.wwa&&!a[b].rqa())return y;return h}});ig.la.STOP_PLAYER_ELEMENT_SHIELD=ig.ta.extend({t:new ig.u({attributes:{}}),f:function(a){this.align=ig.Pa[a.align];this.element=a.element},start:function(){sc.q9.MZa()}});ig.oa.STOP_PLAYER_ELEMENT_SHIELD=ig.qa.extend({t:new ig.u({attributes:{}}),f:function(a){this.align=ig.Pa[a.align];this.element=
a.element},start:function(){sc.q9.MZa()}});ig.la.DO_PLATFORM_SHOCKWAVE=ig.ta.extend({t:new ig.u({attributes:{align:{c:"String",d:"Alignment relative to entity from which to start shockwave",U:ig.Pa},offset:{c:"Offset",d:"Offset to position"},height:{c:"Number",d:"How high platforms should move"},duration:{c:"Number",d:"Duration of height movement"},ri:{c:"Number",d:"Total range of impact"},A0a:{c:"Number",d:"How fast to expand shockwave along xy (pixels per seconds)"},iK:{c:"Number",d:"Minimum distance to center for platform to move"},
color:{c:"String",d:"Color to blink while going up",I:h}}}),f:function(a){this.align=ig.Pa[a.align];this.offset=a.offset||q;this.height=a.height||24;this.ri=a.range||600;this.duration=a.duration||1;this.A0a=a.expandSpeed||200;this.iK=a.minDistance||0;this.color=a.color||q},start:function(b){b=b.lc(this.align,a);this.offset&&Vec3.add(b,this.offset);sc.dja.dNb(b,this.height,this.ri,this.A0a,this.duration,this.iK,this.color)}});ig.oa.FIX_SHOCKWAVE_PLATFORMS=ig.qa.extend({t:new ig.u({attributes:{tKa:{c:"Vec3",
d:"Point of first platform to be fixed",dr:h,kq:h},uKa:{c:"Vec3",d:"If defined: Rise all platforms overlapping with the bounding box of A and B",dr:h,kq:h,I:h},height:{c:"Number",d:"How high platforms should be fixed"},minHeight:{c:"Number",d:"If defined, will vary height randomly between this value and height",I:h}}}),f:function(a){this.tKa=a.pointA||q;this.uKa=a.pointB||q;this.height=a.height||24;this.minHeight=a.minHeight||q},start:function(){if(this.tKa)for(var c=ig.Ja.vq(this.tKa,a),d=this.uKa?
ig.Ja.vq(this.uKa,b):c,f=Math.min(c.x,d.x),l=Math.max(c.x,d.x),m=Math.min(c.y,d.y),d=Math.max(c.y,d.y),c=ig.r.Br(f-1,m-1,c.z-1,l-f+2,d-m+2,2),f=c.length;f--;)if(c[f]instanceof ig.wa.BossPlatform){l=this.height;this.minHeight&&(l=Math.round(l-(this.height-this.minHeight)*Math.random()));c[f].RKb(l)}}});ig.oa.RELEASE_FIXED_PLATFORMS=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.dja.dLa()}})});ig.J=h;
ig.N("game.feature.puzzle.entities.rotate-blocker").O("impact.base.entity","impact.feature.effect.effect-sheet","game.feature.interact.map-interact").K(function(){sc.Rxa={NE:0,SE:1,SW:2,NW:3};var a=[{Qb:0,oJ:ig.Tf.SLOPE_NE,bb:"ne"},{Qb:0.25,oJ:ig.Tf.SLOPE_SE,bb:"se"},{Qb:0.5,oJ:ig.Tf.SLOPE_SW,bb:"sw"},{Qb:0.75,oJ:ig.Tf.SLOPE_NW,bb:"nw"}];ig.wa.RotateBlocker=ig.Wd.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h,I:h},dir:{c:"String",d:"Start direction of triangular block shape",
U:sc.Rxa},fb:{c:"VarCondition",d:"Condition for RotateBlocker to be active"}}}),Aa:h,DX:0,kna:0,nca:0,hP:0,Pv:{gC:new sc.as(new ig.Vh("media/gui/map-icon.png",24,24,120,24),{FOCUS:[0,1,2,2],NEAR:[3]},0.133)},G:{sheet:q},f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.BLOCK;this.F(32,32,32);this.DX=sc.Rxa[f.dir]||sc.Rxa.NE;b=a[this.DX];this.nca=this.kna=b.Qb;this.b.shape=b.oJ;(c=ig.Rf.get("rotateBlocker"))&&this.Bd({namedSheets:{ground:{src:c.sheet,width:32,height:32,offX:c.x,offY:c.y,xCount:1},
block:{src:c.sheet,width:32,height:64,offX:c.x+32,offY:c.y}},SUB:[{sheet:"ground",shapeType:"Z_FLAT",frames:[1],SUB:[{name:"off"},{name:"ne"},{name:"se"},{name:"sw"},{name:"nw"},{name:"turn"}]},{sheet:"block",renderMode:"lighter",SUB:[{name:"ne",frames:[1],flipX:y},{name:"se",frames:[0],flipX:y,wallY:1},{name:"sw",frames:[0],flipX:h,wallY:1},{name:"nw",frames:[1],flipX:h}]},{sheet:"ground",shapeType:"Y_FLAT",renderMode:"lighter",frames:[0],SUB:[{name:"turn",offset:{z:1}},{name:"turn",offset:{z:4}},
{name:"turn",offset:{z:8}},{name:"turn",offset:{z:12}},{name:"turn",offset:{z:16}},{name:"turn",offset:{z:20}},{name:"turn",offset:{z:24}},{name:"turn",offset:{z:28}},{name:"turn",offset:{z:32}}]}]});this.Ma(b.bb);this.wf=new sc.OV(this,this,this.Pv.gC,sc.UE.pka,y);this.G.sheet=new ig.ud("puzzle.rotate-blocker");this.fb=new ig.de(f.condition)},show:function(a){this.parent(a);if(this.G.Xd){this.G.Xd.stop();this.G.Xd=q}window.Ed||this.setActive(this.fb.evaluate(),h);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showFast",
this,{})}},po:function(){sc.cn.$e(this.wf);this.G.Xd=ig.r.G.Mf.va("hideFast",this,{callback:this})},setActive:function(b,c){this.hP=0;this.Aa=b;if(this.G.gca){this.G.gca.F7(q);this.G.gca=q}if(this.Aa){this.b.vl(ig.ca.BLOCK);this.Ma(a[this.DX].bb);sc.cn.De(this.wf);c||this.G.sheet.va("appear",this,{spriteFilter:[1]})}else{this.b.vl(ig.ca.TRIGGER);sc.cn.$e(this.wf);c?this.Ma("off"):this.G.gca=this.G.sheet.va("disappear",this,{spriteFilter:[1]})}},Aj:function(a){if(a==this.G.gca){this.G.gca=q;this.Ma("off")}else if(a==
this.G.Xd){this.G.Xd=q;this.hide()}},Ge:function(a){this.G.sheet.Tc();this.parent(a)},Km:function(){this.fP((this.DX+1)%4);var a=ig.r.cb,c=new ig.Xe("openChest",[{type:"SET_WALK_ANIMS",config:"normal"},{type:"SET_RELATIVE_SPEED",value:0.5},{type:"SET_FACE_TO_ENTITY",entity:this,rotate:h},{type:"SET_FACE_FIX",value:h},{type:"SHOW_ANIMATION",anim:"chestOpen"},{type:"MOVE_TO_ENTITY_DISTANCE",entity:this,min:28,max:40,maxTime:0.2},{type:"WAIT",time:0.2}]);c.sq=h;a.Zf(c);return y},sj:function(a){a.Nn&&
a.dCa(0.025);return y},fP:function(b){this.G.sheet.va("rotate",this);this.DX=b;this.kna=this.nca%1;b=a[this.DX];this.nca=b.Qb||1;this.b.shape=b.oJ;this.Ma("turn");this.hP=0.2+0.1},update:function(){if(this.hP){this.hP=this.hP-ig.i.ja;if(this.hP<=0){this.hP=0;this.Ma(a[this.DX].bb);this.kna=this.nca%1}}this.parent()},Gh:function(){ig.Wd.prototype.Gh.call(this);if(this.hP)for(var a=this.Ua.length-1,c=0.1/(a-1),d=0;a--;){var f=this.Ua[a+1],i=1-((this.hP-0.1+d)/0.2).Rb(0,1),i=KEY_SPLINES.EASE_IN_OUT.get(i),
i=this.kna*(1-i)+this.nca*i;f.Eb(16,16);f.setTransform(1,1,i*2*Math.PI);d=d+c}},ag:function(){var a=this.fb.evaluate();a!=this.Aa&&this.setActive(a)}})});ig.J=h;
ig.N("game.feature.puzzle.entities.boss-platform").O("impact.base.entity","impact.feature.base.entities.object-layer-view").K(function(){var a=Vec3.create(),b=Vec2.create();sc.dja={list:[],FIb:function(a){this.list.push(a)},lOb:function(a){this.list.push(a)},dNb:function(a,d,f,i,j,k,l){for(var i=f/i,m=this.list.length;m--;){var n=this.list[m],o=n.tb(b);Vec2.sub(o,a);o=Vec2.length(o);if(o<f&&o>=k){var t=1-1*(o/f);n.wT(d*t,(o-k)/(f-k)*i,j*(1-0.35*(o/f)),t,l)}}},dLa:function(){for(var a=this.list.length;a--;)this.list[a].dLa()}};
ig.wa.BossPlatform=ig.Kc.extend({t:new ig.u({Dd:h,Kq:h,Lq:h,B_:4,attributes:{FHa:{c:"String",d:"Object Layer from which to display graphic.",U:{object1:1,object2:1,object3:1}},kf:{c:"Number",d:"Z height of displayed object"},shape:{c:"String",d:"Height-Shape of Block Entity",U:ig.Tf,I:h},Hh:{c:"Number",d:"Wall Y Value"}},Uk:y,Sl:"rgba(120,255,120, 0.5)",kD:"rgba(80,244,80, 0.5)",Yaa:h}),Pb:q,Df:q,Sf:Vec3.create(),m6:[],D4:0,bx:0,color:q,Em:0,HJb:h,s:q,f:function(a,b,f,i){this.parent(a,b,f,i);this.b.type=
ig.ca.BLOCK;this.b.size.z=i.zHeight||0;this.Pb=i.terrain||0;this.Hh=(i.wallY||0).Rb(0,1);this.b.shape=ig.Tf[i.shape||"RECTANGLE"];this.Df=ig.r.rda(i.layer);Vec3.assign(this.Sf,this.b.g);this.n=new ig.Vt;this.ul(0);this.TNb=ig.MP.tpa(this,this.Df);this.b.kn(ig.jk.gv);sc.dja.FIb(this);this.s=new ig.ia("media/map/arid-heaven.png")},show:function(a){this.parent(a)},Ge:function(){this.parent();sc.dja.lOb(this);this.s.Tc()},update:function(){var a=0;this.Em=0;this.color=q;for(var b=this.m6.length;b--;){var f=
this.m6[b];f.n.ja();if(f.state==2){var i=f.n.get(),a=a+f.height*Math.sin(i*Math.PI);this.Em=this.Em+f.EG*Math.sin(i*Math.PI);this.color=f.color;if(f.fixed&&i>=0.5&&this.bx==2)this.bx=3}if(f.n.Xb())if(f.state==1){f.state=2;f.n.set(f.duration,ig.Ol.br)}else f.state==2&&this.m6.splice(b,1)}if(this.bx==3)a=this.D4;a=this.Sf.z+Math.round(a);this.l(this.Sf.x,this.Sf.y,a,h);if(this.m6.length==0){this.color=q;if(this.bx==4)this.bx=this.D4=0;this.b.kn(ig.jk.gv)}this.parent()},wT:function(a,b,f,i,j){if(!(this.bx>=
2)){a={state:1,height:a,duration:f,EG:i,color:j||"#444",n:new ig.Vt};if(this.bx==1){a.height=this.D4;a.fixed=h;this.bx=2}a.n.set(b,ig.Ol.br);this.m6.push(a);this.b.kn(ig.jk.RE)}},RKb:function(a){this.bx=1;this.D4=a},dLa:function(){if(this.bx&&this.bx<4){var a={state:2,height:this.D4,duration:0.4,EG:1,color:"#000",n:new ig.Vt};a.n.set(0.4,ig.Ol.br);a.n.rab(0.2);this.m6.push(a);this.b.kn(ig.jk.RE);this.bx=4}},Gh:function(){if(!this.color&&this.bx<2)this.ul(0);else{this.ul(this.TNb+(this.bx?1:0));var b=
this.Df,d=Vec3.sub(this.b.g,this.Sf,a);ig.MP.Gh(this,b,this.Hh,d);if(this.bx){b=this.Ua[this.Ua.length-1];d=this.b;b.l(d.g.x,d.g.y,d.g.z+d.size.z);b.F(d.size.x,d.size.y,0,0);b.zC=1;b.Bj(this.s,96,128);b.ge(Math.min(1,(this.b.g.z-this.Sf.z)/this.D4*4))}if(this.color)for(d=this.Ua.length;d--;){b=this.Ua[d];b.RIa=h;b.Sta(this.color,this.Em)}}}})});ig.J=h;
ig.N("game.feature.puzzle.plug-in").O("game.feature.puzzle.components.push-pullable","game.feature.puzzle.entities.block","game.feature.puzzle.entities.blockers","game.feature.puzzle.entities.bomb","game.feature.puzzle.entities.water-bubble","game.feature.puzzle.entities.compressor","game.feature.puzzle.entities.water-block","game.feature.puzzle.entities.ice-disk","game.feature.puzzle.entities.key-panel","game.feature.puzzle.entities.ball-changer","game.feature.puzzle.entities.walls","game.feature.puzzle.entities.glowing-line",
"game.feature.puzzle.entities.lorry","game.feature.puzzle.entities.one-time-switch","game.feature.puzzle.entities.element-shield","game.feature.puzzle.entities.floor-switch","game.feature.puzzle.entities.magnet","game.feature.puzzle.entities.multi-hit-switch","game.feature.puzzle.entities.bounce-switch","game.feature.puzzle.entities.thermo-pole","game.feature.puzzle.entities.push-pull-block","game.feature.puzzle.entities.push-pull-dest","game.feature.puzzle.entities.sliding-block","game.feature.puzzle.entities.switch",
"game.feature.puzzle.entities.destructible","game.feature.puzzle.entities.item-destruct","game.feature.puzzle.entities.regen-destruct","game.feature.puzzle.entities.extract-platform","game.feature.puzzle.entities.dynamic-platform","game.feature.puzzle.entities.ol-platform","game.feature.puzzle.entities.enemy-counter","game.feature.puzzle.entities.group-switch","game.feature.puzzle.entities.chest","game.feature.puzzle.entities.quick-sand","game.feature.puzzle.entities.spiderweb","game.feature.puzzle.entities.steam-pipes",
"game.feature.puzzle.entities.tesla-coil","game.feature.puzzle.entities.wave-teleport","game.feature.puzzle.puzzle-steps","game.feature.puzzle.entities.rotate-blocker","game.feature.puzzle.entities.boss-platform").K(function(){window.Ed&&wm.Ek.push("game.feature.puzzle.editors.puzzle-editors")});ig.J=h;
ig.N("game.feature.menu.menu-steps").O("impact.base.utils","impact.base.event","impact.base.action","game.feature.menu.menu-model","game.feature.menu.map-model","game.feature.menu.lore-model").K(function(){ig.oa.ADD_PLANT=ig.qa.extend({key:q,bb:q,t:new ig.u({attributes:{a_:{c:"DropSelect",d:"drop to update"}}}),f:function(a){this.key=a.plant;this.bb=ig.HFa.b2a("ENTITY","ItemDestruct")[this.key].desType},start:function(){sc.e.zGa(this.key,this.bb)}});ig.oa.UNLOCK_ENEMY=ig.qa.extend({Fe:q,dX:q,t:new ig.u({attributes:{Fe:{c:"EnemySearch",
d:"Enemy to unlock, note that this enemy, use this only for special enemies."},dX:{c:"Boolean",d:"if true 'special' will be displayed instead of kill count",ab:h}}}),f:function(a){this.Fe=a.enemy;this.dX=a.asSpecial==g?h:a.asSpecial},start:function(){sc.pa.Ni("combat","kill"+this.Fe,this.dX?-1:1);sc.pa.Ni("combat","enemyCompletionRate",sc.Ta.QJ(h))}});ig.oa.UNLOCK_LORE=ig.qa.extend({Oe:q,JZ:y,t:new ig.u({attributes:{Oe:{c:"LoreSelect",d:"Lore to unlock. Unlocks ALL entries "},JZ:{c:"Boolean",d:"True if notification should be displayed",
ab:y}}}),f:function(a){this.Oe=a.lore;this.JZ=a.notify||y},start:function(){sc.Oe.xia(this.Oe,this.JZ)}});ig.oa.UNLOCK_LORE_ALL=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){window.Ri&&sc.Oe.iOb()}});ig.oa.UNLOCK_LORE_FIRST_TIME=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.Oe.sFb()}});ig.oa.UNLOCK_LORE_ENTRY=ig.qa.extend({Oe:q,cG:q,JZ:y,t:new ig.u({attributes:{Oe:{c:"LoreSelect",d:"Lore to the entry is associated with",bh:"Lore"},cG:{c:"LoreEntrySelect",d:"The entry to unlock"},
JZ:{c:"Boolean",d:"True if notification should be displayed",ab:y}}}),f:function(a){this.Oe=a.lore;this.cG=a.entry;this.JZ=a.notify||y},start:function(){sc.Oe.odb(this.Oe,this.cG,this.JZ)}});ig.oa.ACTIVATE_LANDMARK=ig.qa.extend({Lb:q,mo:q,t:new ig.u({attributes:{Lb:{c:"Area",d:"Area to select landmark from",U:"areas",bh:"Area"},mo:{c:"Landmarks",d:"Landmark to activate"}}}),f:function(a){this.Lb=a.area;this.mo=a.landmark},start:function(){sc.map.eYa(this.mo,this.Lb)}});ig.oa.SET_LANDMARK_ACTIVE_STATE=
ig.qa.extend({Lb:q,mo:q,t:new ig.u({attributes:{Lb:{c:"Area",d:"Area to select landmark from",U:"areas",bh:"Area"},mo:{c:"Landmarks",d:"Landmark to set state of. If not defined: Set state of all landmarks of area (if found)",I:h},state:{c:"Boolean",d:"New Active State of Landmark"}}}),f:function(a){this.Lb=a.area;this.mo=a.landmark;this.state=a.state},start:function(){this.mo?sc.map.bLb(this.mo,this.state,this.Lb):sc.map.pKb(this.Lb,this.state)}});ig.oa.UNDO_OPENED_CHEST_TRACK=ig.qa.extend({t:new ig.u({attributes:{map:{c:"Maps",
d:"Map of the chest",bh:"Map"},Lb:{c:"Area",d:"Area of the map",U:"areas",bh:"Area"},wZa:{c:"Integer",d:"Entity id of the chest that is no more"},uc:{c:"String",d:"Alternative Variable used for chest. Do NOT add map. prefix!",I:h}}}),f:function(a){this.map=a.map;this.Lb=a.area;this.wZa=a.chestId||0;this.uc=a.variable||q},start:function(){var a="maps."+this.map.vm("","").np()+".",a=this.uc?a+this.uc:NaN+this.wZa;if(ig.ma.get(a)){ig.ma.set(a,y);sc.pa.RH("chests",this.Lb,1);sc.pa.RH("chests","total",
1)}}});ig.oa.OPEN_SHOP=ig.qa.extend({Eha:q,t:new ig.u({attributes:{Eha:{c:"Shop",d:"The Shop to access. Below you can see the content",bh:"Shop"}}}),f:function(a){this.Eha=a.shop||q},start:function(){sc.e.nE=this.Eha;sc.e.xO(h,sc.Fc.aW);sc.q.uy(h);sc.q.nO=sc.Dg.Vx}});ig.oa.OPEN_QUEST_HUB=ig.qa.extend({Zpa:q,t:new ig.u({attributes:{Zpa:{c:"QuestHub",d:"The hub to access.",bh:"QuestHub"}}}),f:function(a){this.Zpa=a.hub||q},start:function(){sc.e.dU=this.Zpa;sc.e.xO(h,sc.Fc.HSa);sc.q.uy(h);sc.q.nO=sc.Dg.Vx}});
ig.oa.UNDO_VISITED_AREA=ig.qa.extend({Zpa:q,t:new ig.u({attributes:{Lb:{c:"String",U:"areas",d:"Visited area to be undone. WARNING: Will delete ALL map variables of those maps"}}}),f:function(a){this.Lb=a.area;this.DYa=new sc.Sva(this.Lb)},Ka:function(){this.DYa.Tc()},start:function(){sc.map.eOb(this.Lb,this.DYa)}})});ig.J=h;
ig.N("game.feature.menu.plug-in").O("game.feature.menu.area-loadable","game.feature.menu.menu-steps","game.feature.menu.gui.menu-misc","game.feature.menu.gui.base-menu","game.feature.menu.gui.main-menu","game.feature.menu.gui.start-menu","game.feature.menu.gui.equip.equip-menu","game.feature.menu.gui.list-boxes","game.feature.menu.gui.circuit.circuit-menu","game.feature.menu.gui.circuit.circuit-misc","game.feature.menu.gui.item.item-menu","game.feature.menu.gui.map.map-menu","game.feature.menu.gui.social.social-menu",
"game.feature.menu.gui.save.save-menu","game.feature.menu.gui.options.options-menu","game.feature.menu.gui.shop.shop-menu","game.feature.menu.gui.synop.synop-menu","game.feature.menu.gui.quests.quest-menu","game.feature.menu.gui.quest-hub.quest-hub-menu","game.feature.menu.gui.enemies.enemy-menu","game.feature.menu.gui.lore.lore-menu","game.feature.menu.gui.help.help-menu","game.feature.menu.gui.status.status-menu","game.feature.menu.gui.museum.museum-menu","game.feature.menu.gui.stats.stats-menu",
"game.feature.menu.gui.trophy.trophy-menu","game.feature.menu.gui.trade.trader-menu","game.feature.menu.gui.botanics.botanics-menu","game.feature.menu.menu-model","game.feature.menu.lore-model").K(function(){if(window.Ed){wm.yu&&(wm.yu.area={c:"String",U:"areas",d:"Area of the map.",ab:"fallback"});wm.Ek.push("game.feature.menu.editors.area-editors");wm.Ek.push("game.feature.menu.editors.lore-editors");wm.Ek.push("game.feature.menu.editors.shop-editors");wm.Ek.push("game.feature.menu.editors.drop-editors");
wm.Ek.push("game.feature.menu.editors.toggle-set-editors");wm.Um(/LORE/,"orange")}});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-item-menu").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.interact.button-group","game.feature.menu.gui.list-boxes","game.feature.menu.gui.menu-misc").K(function(){var a=Vec2.vc(0,0);sc.Mxa=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},Pd:y,$h:y,LF:y,f:function(){this.parent();this.F(9,15);this.j("DEFAULT")},
pz:function(a,c,d,f,i){this.l(a,c);this.Pd=d||y;this.$h=f||y;this.LF=i||y},Da:function(a){a.na(this.s,0,0,this.LF?444:434,337,9,15,this.Pd,this.$h)}});sc.lmb=ig.Ue.extend({s:new ig.ia("media/gui/basic.png"),gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:432,y:304},flipped:{x:456,y:304}}}),R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},Sb:q,anchor:q,list:q,Ee:q,Ha:q,Og:h,f:function(a,c){this.parent(175,
147);this.Sb=a.a;this.anchor=c.a;this.Ha=new sc.wh(y,ig.tw.dQ);this.Ha.Rk(this.Ofa.bind(this));this.Ha.Ql(this.JJa.bind(this));this.Ha.jn(function(){sc.Kb.Cc("",h);sc.Kb.Rj("",h)}.bind(this));sc.P.Wa(sc.Kb,this);this.list=new sc.kV(1,0,20);this.list.Z=sc.Kb.Z;this.list.l(2,13);this.list.F(171,123);this.list.Lta(this.Ha);this.list.O7=y;this.m(this.list);var d=new sc.ea(ig.lang.get("sc.gui.menu.select"),{speed:ig.Rd.se.zg,font:sc.Ea.Ib});d.l(8,6);this.m(d);d=new sc.ea(ig.lang.get("sc.gui.menu.quantity"),
{speed:ig.Rd.se.zg,font:sc.Ea.Ib});d.l(6,6);d.H(ig.k.ra,ig.k.$);this.m(d);var d=sc.q.T.W,f={size:sc.Ff.jF,color:sc.Od.wm};this.qB=new sc.Tb(4,f);this.qB.H(ig.k.ra,ig.k.Cb);this.qB.l(6,3);this.qB.za(d.xY());this.m(this.qB);this.VC=new sc.Tb(4,f);this.VC.H(ig.k.ra,ig.k.Cb);this.VC.l(20,3);this.VC.za(d.rR);this.m(this.VC);d=new ig.ec(this.s,208,18,5,5);d.H(ig.k.ra,ig.k.Cb);d.l(14,4);this.m(d);d=new sc.ea(ig.lang.get("sc.gui.menu.item.buff")+":",{font:sc.Ea.Ib});d.H(ig.k.ra,ig.k.Cb);d.l(28,2);this.m(d);
this.Ee=new sc.Mxa;this.m(this.Ee);this.j("HIDDEN",h)},update:function(){if(this.a.lm&&(this.Ha.wc()&&!ig.La.zh())&&sc.ba.Cq()){sc.gd.back.play();sc.Kb.HDa()}},Da:function(a){this.parent(a);a.nc("#7E7E7E",2,135,171,1)},Fia:function(a){var c=this.list.qG(),d=this.Ha.Qa.y;if(!sc.options.get("quick-cursor"))d=c=0;this.Ha.clear();this.list.clear(h);for(var f=sc.q.T,i=f.iFa(sc.kh.CONS,sc.Of.ORDER,h),j=q,k=j=q,k=q,l=0,m=0,n=0;n<i.length;n++){m=f.Rc[i[n]]||0;l++;k=sc.yb.getItem(i[n]);new ig.Ra(k.name);j=
"\\i["+(k.icon+sc.yb.Er(k.rarity||0)||"item-default")+"]"+ig.Ra.ic(k.name);k=ig.Ra.ic(k.description);j=new sc.WE(j,142,26,m||1,i[n],k,g,g);f.fZ(i[n])&&this.Stb(j);this.list.Sd(j)}this.list.Go=d;d=Math.min(d,Math.max(0,l-1));ig.input.Id?this.Ha.tl(0,d):this.Ha.Sg(0,d,y,a);this.list.FK(c,h)},show:function(){if(this.Og){this.Og=y;this.Fia(h);var b=this.a;a.x=this.Sb.g.x+this.anchor.g.x+Math.floor(this.anchor.size.x/2);a.y=this.Sb.g.y+this.anchor.g.y+Math.floor(this.anchor.size.y/2);var c=a.y+-46;a.y=
Math.max(10,Math.min(ig.i.height-137-10-22-70,a.y+-46));b.g.y=a.y;if(a.x+240<ig.i.width){this.ii="default";b.g.x=a.x+27+30;b.kd(a.x+27,a.y,0.2,KEY_SPLINES.EASE_OUT);this.Ee.pz(-10,42+(c-a.y),y)}else{this.ii="flipped";b.g.x=a.x-b.size.x-27-30-1;b.kd(a.x-b.size.x-27-1,a.y,0.2,KEY_SPLINES.EASE_OUT);this.Ee.pz(b.size.x+1,42+(c-a.y),h)}b=sc.q.T.W;this.qB.za(b.xY());this.VC.za(b.rR);ig.La.Md(0.2);this.list.Pf(sc.Kb.Z);this.j("DEFAULT")}},hide:function(){if(!this.Og){this.Og=h;this.list.ui(sc.Kb.Z);sc.Kb.Rj("",
h);this.j("HIDDEN")}},Stb:function(a){var c=new ig.ec(this.gb.s,256,480,19,17);c.l(0,0);a.m(c)},Ofa:function(a){sc.Kb.Cc(a.data.description);a.data.id&&(sc.yb.tea(a.data.id)?sc.Kb.Rj(sc.yb.M4(a.data.id),q,a.data.id):sc.Kb.Rj("",y))},JJa:function(a){if(a.data){ig.r.cb.UOa(a.data.id);sc.Kb.ZMa=h;sc.q.Zw()}},Ab:function(a,c){a==sc.Kb&&(c==sc.il.eW?sc.Kb.eHa()?this.show():this.hide():c==sc.il.uV&&this.hide())}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-misc").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.gui.base.numbers","game.feature.combat.combat","game.feature.menu.gui.enemies.enemy-pages","game.feature.quick-menu.gui.quick-item-menu").K(function(){var a=Vec2.vc(0,0),b=[1,1,1,1],c=q;sc.qmb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:456,y:304},flipped:{x:456,y:304}}}),R:{DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0,offsetX:-65},time:0.2,p:KEY_SPLINES.LINEAR}},f:function(){this.parent(50,40);this.l(2,23);this.H(ig.k.hb,ig.k.Cb);this.j("HIDDEN",h)},show:function(a,b){if(a){this.rh();for(var c=sc.yb.getItem(sc.Kb.JC).stats,j=c.length,k=50,l=1;j--;){var m=sc.Qe[c[j]];if(m.type.key!="heal"){m=new sc.jmb(m);m.l(1,l);k=Math.max(k,m.a.size.x);l=l+m.a.size.y;this.m(m)}}this.a.size.x=k+4;this.a.size.y=Math.max(16,l);this.j("DEFAULT")}else this.j("HIDDEN",y,y,q,b)},
hide:function(a){this.j("HIDDEN",a)}});sc.jmb=ig.da.extend({Y:q,description:q,f:function(a){this.parent();this.Y=new sc.ea("\\i["+a.icon+"]\\i["+a.grade+"]",{font:sc.Ea.Ib});this.Y.l(2,2);this.m(this.Y);var b=this.upa(a.type,a.change),b=a.negative?b+(" \\c[1]- "+-1*this.wda(a.type,a.value,a.change)+"%\\c[0]"):b+(" \\c[2]+ "+this.wda(a.type,a.value,a.change)+"%\\c[0]");this.f0=new sc.ea(b,{font:sc.Ea.he});this.f0.l(19,0);this.m(this.f0);this.F(this.f0.a.size.x+21,14)},upa:function(a,b,c){var j="param";
if(b==sc.ce.STATS)if(a.key=="elemFactor")switch(a.index){case 0:j="heat";break;case 1:j="cold";break;case 2:j="shock";break;case 3:j="wave"}else a.key=="hp"?j="maxhp":a.key=="attack"?j="atk":a.key=="defense"?j="def":a.key=="focus"&&(j="foc");else if(b==sc.ce.MODIFIER)j=(!c?"modifier.":"")+a.key;else if(b==sc.ce.HEAL)return"ERROR ERROR";return ig.lang.get("sc.gui.menu.equip."+(c?"descriptions.":"")+j)},wda:function(a,b,c){c==sc.ce.STATS&&(b=a.key=="elemFactor"?(b-1)*-1:b-1);return Math.round(b*100)}});
sc.mmb=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:5,height:5,left:5,top:5,right:5,bottom:5,Vb:{"default":{x:100,y:425}}}),R:{HIDDEN:{state:{alpha:0,Va:0.2},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE}},location:q,LY:y,f:function(){this.parent(188,20,h);this.location=new sc.ea("Autumn's Rise - Entrance");this.location.l(26,1);this.m(this.location);this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.na(this.gb.s,9,1,418,33,12,18)},show:function(a){this.yOb();
if(a){this.LY=h;this.j("DEFAULT",y,y,function(){this.j("HIDDEN",y,y,function(){this.LY=y}.bind(this),2)}.bind(this),0.2)}else{this.LY=y;this.a.WK=q;this.j("DEFAULT")}},hide:function(a){this.LY||this.j("HIDDEN",a)},Uca:function(){this.LY=y;this.a.WK=q;this.j("HIDDEN",y)},hWb:function(){if(this.LY&&this.a.hi==="DEFAULT"&&this.a.bb.n<0){this.LY=y;this.j("HIDDEN",h)}},yOb:function(){this.location.ga(sc.map.G1a()+" - "+sc.map.Xoa());this.F(this.location.a.size.x+30,20);this.a.Db.y=this.a.size.y}});sc.kmb=
ig.da.extend({Di:{},Lua:[],Vsa:q,f:function(){this.parent()},JIb:function(a){if(sc.Kxa[a]&&!this.Di[a]){var b=new sc.Kxa[a];this.Di[a]=b;this.m(b)}},mYa:function(a){if(a){this.Lua.push(a);this.DG(a,1)}},show:function(a,b,c){if(this.Vsa!=a){this.Vsa&&this.hide(this.Vsa);this.Vsa=a}(a=this.Di[a])&&!a.Aa&&a.show(b,c)},hide:function(a){var b=this.Di[a];b&&b.Aa&&this.Di[a].hide()},xJb:function(){for(var a=this.Lua.length;a--;)this.Lua[a].remove();this.Lua.length=0},reset:function(){for(var a in this.Di)this.Di[a].hide(h)}});
sc.Kxa={};sc.Kxa.Enemy=ig.Ue.extend({gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:432,y:304},flipped:{x:456,y:304}}}),R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE}},title:q,Ee:q,yA:q,EC:q,FC:q,GC:q,AH:q,anchor:q,Fe:q,Aa:y,f:function(){this.parent(127,140);this.title=new sc.ea("",{font:sc.Ea.he});this.title.H(ig.k.Ia,ig.k.$);this.title.l(0,2);this.m(this.title);var a=21;this.yA=this.oy("maxhp",
0,4,a);a=a+14;this.EC=this.oy("atk",1,4,a);a=a+14;this.FC=this.oy("def",2,4,a);a=a+14;this.GC=this.oy("foc",3,4,a);a=a+18;this.AH=new sc.IQa;this.AH.l(4,a);this.m(this.AH);this.Ee=new sc.Mxa;this.m(this.Ee);this.j("HIDDEN",h)},Da:function(a){this.parent(a);a.nc("#CCCCCC",3,this.title.a.size.y+1,121,1)},show:function(a){this.fBa(a.a);this.setData(a.Q.Zm,a.Q);this.j("DEFAULT");this.Aa=h},hide:function(a){this.j("HIDDEN",a);this.Aa=y},setData:function(a,f){var i=sc.Ta.Jn[a];this.title.ga(sc.Ta.jda(a));
this.AH.hide();c||(c=new ig.de);c.lz(i.hideStats||"false");if(c.evaluate()){this.yA.oc.zx=h;this.EC.oc.zx=h;this.FC.oc.zx=h;this.GC.oc.zx=h;this.yA.za(9999,h);this.EC.za(999,h);this.FC.za(999,h);this.GC.za(999,h)}else{this.yA.oc.zx=y;this.EC.oc.zx=y;this.FC.oc.zx=y;this.GC.oc.zx=y;if(f.W){this.yA.za(f.W.Td("hp"),h);this.EC.za(f.W.Td("attack"),h);this.FC.za(f.W.Td("defense"),h);this.GC.za(f.W.Td("focus"),h);this.AH.sab(f.W.Td("elemFactor")||b,h)}}},oy:function(a,b,c,j){a=new sc.xwa(ig.lang.get("sc.gui.menu.equip."+
a),b);a.l(c,j);this.m(a);return a},fBa:function(b){var c=this.a,i=c.xe.alpha==0;a.x=b.g.x+Math.floor(b.size.x/2);a.y=b.g.y+Math.floor(b.size.y/2);b=a.y+-46;a.y=Math.max(10,Math.min(ig.i.height-140-10,a.y+-46));if(i)c.g.y=a.y;var j=38+(b-a.y);if(a.x+173<ig.i.width){this.ii="default";if(i)c.g.x=a.x+20+10;c.kd(a.x+20,a.y,0.2,KEY_SPLINES.EASE);this.Ee.pz(-10,Math.max(7,Math.min(125,j)),y)}else{this.ii="flipped";if(i)c.g.x=a.x-c.size.x-20-10-1;c.kd(a.x-c.size.x-20-1,a.y,0.2,KEY_SPLINES.EASE);this.Ee.pz(c.size.x+
1,Math.max(7,Math.min(125,38+(b-a.y))),h)}this.Ee.LF=y;this.Ee.$h=y;if(j<7){this.Ee.LF=h;this.Ee.$h=h}else if(j>125)this.Ee.LF=h}});sc.LSa=ig.da.extend({gb:new ig.jc("media/gui/menu.png",{width:4,height:4,left:4,top:4,right:4,bottom:4,Vb:{"default":{x:480,y:126}}}),name:q,SQ:Vec2.vc(0,0),f:function(a,b,c){this.parent();this.name=new sc.ea(a,{font:sc.Ea.Ib,maxWidth:c||0});this.name.l(4,1);this.m(this.name);this.F(this.name.a.size.x+7,b?this.name.a.size.y+1:9)},Da:function(a){this.gb.nb(a,this.a.size.x,
this.a.size.y,"default");a.na(this.gb.s,this.a.size.x/2-1.5-this.SQ.x,this.SQ.y<0?-2:this.a.size.y-1,480,122,3,3,y,this.SQ.y<0?h:y)},pz:function(b,c){var i=b.Yf;if(i){var j=this.a;a.x=i.x+b.size.x/2-j.size.x/2;a.y=i.y-(c.b.size.y+14);if(a.x<0){a.x=a.x*-1;a.x=a.x+1;this.SQ.x=Math.max(4,Math.min(j.size.x-4,a.x))}else if(a.x+j.size.x>ig.i.width){a.x=ig.i.width-(a.x+j.size.x+1);this.SQ.x=-Math.max(4,Math.min(j.size.x-4,-a.x))}else{a.x=0;this.SQ.x=0}if(a.y<0){this.SQ.y=-1;a.y=c.b.size.y+6;this.FU("HIDDEN",
"offsetY",-8)}else{a.y=-(c.b.size.y+14);this.SQ.y=0;this.FU("HIDDEN","offsetY",8)}this.l(this.tb(b)+a.x,b.g.y+a.y)}},tb:function(a){return a.g.x+a.size.x/2-this.a.size.x/2}});sc.imb=ig.da.extend({gb:new ig.jc("media/gui/menu.png",{width:4,height:0,left:4,top:9,right:4,bottom:0,Vb:{"default":{x:480,y:112}}}),Nea:q,eDa:0,tc:q,cWb:y,f:function(a,b){this.parent();this.F(32,9);var c=(b&&b.KN?b.KN:sc.Ta.Rzb(a))||1;this.eDa=this.uAb(c);this.Nea=new sc.Tb(99,{leadingZeros:2,size:sc.Ff.jF,color:this.eDa});
this.Nea.H(ig.k.ra,ig.k.$);this.Nea.l(4,2);this.m(this.Nea);this.Nea.za(c)},update:function(){if(this.tc){this.tc.n=this.tc.n+ig.i.Sa;var a=Math.min(1,Math.max(0,this.tc.n)/this.tc.time),a=this.tc.p.get(a);this.a.size.x=Math.round(this.tc.QH*(1-a)+this.tc.width*a);this.a.size.y=Math.round(this.tc.Tu*(1-a)+this.tc.height*a);if(a==1)this.tc=q}},Da:function(a){this.gb.nb(a,this.a.size.x,this.a.size.y,"default");a.na(this.gb.s,this.a.size.x/2-1.5,this.a.size.y-1,480,122,3,3);a.na(this.gb.s,this.a.size.x-
27,2,493,112+this.eDa*6,9,5)},Ym:function(a,b,c,j,k){if(c)this.tc={QH:this.a.size.x,width:a||0,Tu:this.a.size.y,height:b||0,time:c,p:j||KEY_SPLINES.EASE,n:0-(k||0)};else{this.a.size.x=a;this.a.size.y=b}},uAb:function(a){var b=sc.q.T,c=b.aa,c=(0.8*b.w1a()+0.2*c)/a,a=1-c;return a>=0.25?sc.Od.Nl:a>=0.15?sc.Od.bF:a<=-0.2?sc.Od.zw:sc.Od.$n}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-screen-types").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.feature.interact.gui.focus-gui","game.feature.gui.base.numbers","game.feature.combat.combat","game.feature.quick-menu.gui.quick-misc").K(function(){var a=Vec2.vc(0,0);sc.f$={};sc.Qz={RED:0,BLUE:1,GREEN:2,ORANGE:3,YELLOW:4,GREY:5,PURPLE:6};sc.gF={DEFAULT:0,INSTANT:1};sc.Nxa=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE},
HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},type:q,Q:q,screen:q,cB:h,LK:sc.gF.DEFAULT,color:sc.Qz.GREY,EE:q,ym:0,f:function(a,c,d){this.parent(h,y);this.type=a||q;this.Q=c.Q;this.screen=d;this.screen.JIb(a);this.a.BU(h);this.EE=new ig.ec(this.s,504+this.color*14,144,13,13);this.EE.H(ig.k.Ia,ig.k.vb);this.EE.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}};this.m(this.EE);this.EE.j("HIDDEN",h);this.F(16,16);this.j("HIDDEN",h)},
update:function(){this.Mv()&&this.a.hi=="HIDDEN"&&this.Uaa();if(this.cB&&this.ym<0.5){this.ym=this.ym+ig.i.Sa;if(this.ym>=0.5)this.ym=0}},Da:function(a){var c=this.ym/0.5;a.ks().Eb(8,8).MB(0.8+c,0.8+c);a.na(this.s,0,0,504,120,15,15).ge(this.EE.a.xe.alpha*(1-c));a.Xs()},F:function(a,c){this.parent(a,c)},JG:function(){if(sc.Kb.yea()&&!ig.La.zh()&&this.cB&&sc.Kb.tDb()){if(ig.input.qb==ig.Yb.Wc){if(sc.Kb.bca){sc.Kb.co==this&&this.screen.hide(this.type);sc.Kb.qva(this);return y}if(Math.floor(Vec2.HR(sc.Kb.cursor.x,
sc.Kb.cursor.y,this.a.g.x+Math.floor(this.a.size.x/2),this.a.g.y+Math.floor(this.a.size.y/2)))<=10){var a=this.a;sc.Kb.Y0a(a.g.x+Math.floor(a.size.x/2),a.g.y+Math.floor(a.size.y/2),this,h);sc.Kb.co==this&&this.screen.show(this.type,this)}else{sc.Kb.co==this&&this.screen.hide(this.type);sc.Kb.qva(this)}}else if(ig.input.qb==ig.Yb.xm){var c=Math.floor(sc.ba.Kp()),d=Math.floor(sc.ba.Ln()),a=this.a;if(c=c>=a.g.x&&c<=a.g.x+a.size.x&&d>=a.g.y&&d<=a.g.y+a.size.y){if(sc.Kb.co&&sc.Kb.co!=this){sc.Kb.qva(sc.Kb.co);
this.screen.hide(this.type)}sc.Kb.Y0a(a.g.x+Math.floor(a.size.x/2),a.g.y+Math.floor(a.size.y/2),this);this.screen.show(this.type,this)}else{sc.Kb.co==this&&this.screen.hide(this.type);sc.Kb.qva(this)}return c}return y}},Lo:function(){this.parent()},ai:function(){this.parent()},U$a:function(a){this.color=a||0;this.EE.offsetX=504+this.color*14},show:function(a){this.j("DEFAULT",a);this.LK==sc.gF.INSTANT&&this.EE.j("DEFAULT")},hide:function(a){this.j("HIDDEN",a);this.LK==sc.gF.INSTANT&&this.EE.j("HIDDEN")},
Uaa:function(b,c){if(this.Q){var d=this.a,f=this.Q.b;ig.i.Jy(a,Math.round(f.g.x+f.size.x/2),Math.round(f.g.y-f.g.z-f.size.z/2+f.size.y/2));if(a.x<0)a.x=0;if(a.x>ig.i.width)a.x=ig.i.width;if(a.y<0)a.y=0;if(a.y>ig.i.height)a.y=ig.i.height;d.g.x=a.x-d.size.x/2+(b|0);d.g.y=a.y-d.size.y/2+(c|0)+4}},nJa:function(){this.ym=-0.1;this.LK==sc.gF.DEFAULT&&this.EE.j("DEFAULT");this.EE.j("DEFAULT")},Pra:function(){this.LK==sc.gF.DEFAULT&&this.EE.j("HIDDEN");sc.Kb.co==this&&this.screen.hide(this.type)}});sc.f$.Analyzable=
sc.Nxa.extend({gf:q,fxb:y,f:function(a,c,d){this.parent(a,c,d);this.U$a(c.color);this.LK=c.showType||0;if(a=ig.Ra.ic(c.text)){c.visible&&((new ig.de(c.visible)).evaluate()||(a="???"));this.gf=new sc.LSa(a,h,200);this.gf.Eb(this.gf.a.size.x/2,0);this.gf.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,Xa:0.3,offsetY:8},time:0.2,p:KEY_SPLINES.LINEAR}};this.gf.j("HIDDEN",h);this.screen.mYa(this.gf)}else this.cB=y},nJa:function(){if(this.gf){this.gf.pz(this.a,this.Q);this.parent()}},
Pra:function(){if(this.gf){this.parent();this.gf.j("HIDDEN")}},Lo:function(){this.gf&&this.gf.j("DEFAULT")},ai:function(){this.gf&&this.gf.j("HIDDEN")},Uaa:function(){this.parent();this.gf&&this.gf.pz(this.a,this.Q)}});sc.f$.NPC=sc.Nxa.extend({color:sc.Qz.BLUE,gf:q,fxb:y,f:function(a,c,d){this.parent(a,c,d);a=q;c=this.Q;if(c.Zi)a=ig.Ra.ic(c.Zi);else if(c.Ad.data.name)a=ig.Ra.ic(c.Ad.data.name,h);else if(c.Pna)a=c.Pna;if(c.To[c.CC])switch(c.To[c.CC].oK){case sc.qC.aQ:this.color=sc.Qz.GREEN;a=a?ig.lang.get("sc.gui.trade.trader")+
": "+a:ig.lang.get("sc.gui.trade.trader");break;case sc.qC.aW:this.color=sc.Qz.GREEN;a=a?ig.lang.get("sc.gui.trade.shop")+": "+a:ig.lang.get("sc.gui.trade.shop");break;case sc.qC.WV:this.LK=sc.gF.INSTANT;this.color=sc.Qz.PURPLE;a=a?ig.lang.get("sc.gui.trade.quest")+": "+a:ig.lang.get("sc.gui.trade.quest")}this.U$a(this.color);if(a){c.f4&&((new ig.de(c.f4)).evaluate()||(a="???"));this.gf=new sc.LSa(a);this.gf.Eb(this.gf.a.size.x/2,0);this.gf.a.R={DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,
Xa:0.3,offsetY:8},time:0.2,p:KEY_SPLINES.LINEAR}};this.gf.j("HIDDEN",h);this.screen.mYa(this.gf)}else this.cB=y},nJa:function(){if(this.gf){this.gf.pz(this.a,this.Q);this.parent()}},Pra:function(){if(this.gf){this.parent();this.gf.j("HIDDEN")}},Lo:function(){this.gf&&this.gf.j("DEFAULT")},ai:function(){this.gf&&this.gf.j("HIDDEN")},Uaa:function(){this.parent();this.gf&&this.gf.pz(this.a,this.Q)}});sc.f$.Enemy=sc.Nxa.extend({color:sc.Qz.RED,aa:q,f:function(a,c,d){this.parent(a,c,d);this.aa=new sc.imb(this.Q.Zm,
this.Q);this.aa.H(ig.k.Ia,ig.k.vb);this.m(this.aa)},Uaa:function(){this.parent();var a=this.Q.b.size.z/2+this.Q.b.size.y/2,a=this.Q.JR?a-this.Q.JR:this.Q.PF?a-(this.Q.PF+48):a-(this.Q.b.size.z+this.Q.b.size.y+8);this.aa.l(0,a)}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-screen").O("impact.base.image","impact.feature.gui.gui","game.feature.quick-menu.gui.quick-screen-types","game.feature.menu.gui.menu-misc","game.feature.quick-menu.gui.quick-misc").K(function(){sc.pmb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR}},focusOffset:{x:0,y:0},focus:y,lh:0,fi:0,Ui:0,pj:0,Pl:y,f:function(){this.parent();this.F(23,23)},Oc:function(){sc.P.Wa(sc.Kb,
this)},Ic:function(){sc.P.Hc(sc.Kb,this)},update:function(){if(this.pj!=ig.input.qb){this.Pl=ig.input.qb==ig.Yb.Wc;this.pj=ig.input.qb}if(this.lh<this.fi){this.lh=this.lh+ig.i.ja;if(this.lh>=this.fi){this.lh=this.fi;this.Ui=this.focus?2:0}else this.Ui=Math.floor((this.fi?1:-1)*(this.lh/this.fi)*2)}},Da:function(a){this.focus?a.na(this.s,-1,-1,512+(this.focus?24:0),160,23,23):this.Pl&&a.na(this.s,-1,-1,512+(this.focus?24:0),160,23,23)},nu:function(a,b){this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/
2)-this.focusOffset.y);this.focus=h;this.lh=0;this.fi=0.2;this.Ui=0},Om:function(){this.focus=y;this.fi=this.lh=0.2;this.Ui=0},moveTo:function(a,b,c,d){c&&ig.input.qb==ig.Yb.Wc?this.kd(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y,d,KEY_SPLINES.EASE):this.l(a-Math.floor(this.a.size.x/2),b-Math.floor(this.a.size.y/2)-this.focusOffset.y);if(this.focus){this.lh=0;this.fi=0.2;this.Ui=3;this.focus=y}},Ab:function(a,b){if(a==sc.Kb)if(b==sc.il.lRa){this.fi=this.lh=0.2;this.Ui=
0}else b==sc.il.RQa?this.nu(sc.Kb.cursor.x,sc.Kb.cursor.y):b==sc.il.jUa?this.Om():b==sc.il.zQa&&(this.focus||this.nu(sc.Kb.cursor.x,sc.Kb.cursor.y))}});sc.omb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},ua:q,cursor:q,entities:[],BS:q,Pca:q,yX:[],background:q,Ci:Vec2.vc(-1E4,-1E4),JDa:y,f:function(){this.parent();this.F(ig.i.width,ig.i.height);sc.P.Wa(sc.Kb,this);this.ua=new sc.R9;this.ua.CS=
h;this.ua.Rk(J().bind(this));this.ua.jn(J().bind(this));if(!this.constructor.oj)this.constructor.oj=this.s.createPattern(512,352,64,64,ig.nf.Eg.eF);this.background=new ig.da;this.background.a.R={DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};this.background.Da=function(a){a.Qk(this.constructor.oj,0,0,0,0,this.a.size.x,this.a.size.y).yi("lighter")}.bind(this);this.background.j("HIDDEN",h);this.m(this.background);this.fna();this.fna(h);this.fna(y,
h);this.fna(h,h);this.BS=new ig.da;this.BS.F(ig.i.width,ig.i.height);this.m(this.BS);this.cursor=new sc.pmb;this.cursor.j("HIDDEN",h);this.m(this.cursor);this.Pca=new sc.kmb;this.m(this.Pca)},update:function(){sc.Kb.bca=y;if(this.a.lm&&this.ua.wc()&&!ig.La.zh())if(sc.ba.Cq()){sc.gd.back.play();sc.Kb.HDa()}else{if(sc.Kb.Kea!=ig.input.qb){sc.Kb.Kea=ig.input.qb;sc.Kb.$ca=ig.input.qb==ig.Yb.Wc;var a=q;if(ig.input.qb==ig.Yb.Wc){a=this.Ci;this.t5(a);sc.Kb.cursor.x=a.x;sc.Kb.cursor.y=a.y;this.ID();sc.Kb.J9a();
this.cursor.moveTo(sc.Kb.cursor.x,sc.Kb.cursor.y)}else if(ig.input.qb==ig.Yb.xm){this.Ci.x=sc.Kb.cursor.x;this.Ci.y=sc.Kb.cursor.y;this.cursor.Om()}sc.Kb.NNb()}if(ig.input.qb==ig.Yb.Wc){var b=a=0,c=0,d=y;if((c=sc.ba.Cf(ig.Nd.wn))<-0.5){a=(-100+c*100)*ig.i.Sa;d=h}else if((c=sc.ba.Cf(ig.Nd.wn))>0.5){a=(100+c*100)*ig.i.Sa;d=h}if((c=sc.ba.Cf(ig.Nd.xn))<-0.5){b=(-100+c*100)*ig.i.Sa;d=h}else if((c=sc.ba.Cf(ig.Nd.xn))>0.5){b=(100+c*100)*ig.i.Sa;d=h}if(d){sc.Kb.bca=h;sc.Kb.cursor.x=a>=0?Math.floor(sc.Kb.cursor.x+
a):Math.ceil(sc.Kb.cursor.x+a);sc.Kb.cursor.y=b>=0?Math.floor(sc.Kb.cursor.y+b):Math.ceil(sc.Kb.cursor.y+b);this.ID();this.cursor.moveTo(sc.Kb.cursor.x,sc.Kb.cursor.y)}}}},show:function(){this.BS.rh();this.entities.length=0;this.ua.clear();this.Pca.xJb();for(var a=q,a=q,b=ig.r.ln,c=b.length;c--;){var d=b[c];if(d&&d.opa&&(d.c5a&&d.c5a()||ig.gl.ut(d,0))){a=d.opa();if(!a.disabled&&sc.f$[a.type]){a.Q=d;a=new sc.f$[a.type](a.type,a,this.Pca);a.Uaa(0,0);this.BS.m(a);a.show();this.entities.push(a);this.ua.jd(a)}}}this.Pca.reset();
this.j("DEFAULT")},hide:function(){for(var a=this.BS.a.children.length;a--;){this.BS.a.children[a].X.hide();this.BS.a.children[a].al=h}for(a=this.entities.length;a--;)this.entities[a].Pra();for(a=this.yX.length;a--;)this.yX[a].j("DEFAULT")},DJ:function(){sc.Kb.Z.hh(this.ua);for(var a=this.entities.length;a--;){this.entities[a].ai();this.entities[a].nJa()}for(a=this.yX.length;a--;)this.yX[a].j("DEFAULT");sc.Kb.J9a();this.cursor.Oc();this.cursor.j("DEFAULT");if(sc.Kb.Kea!=ig.input.qb){sc.Kb.$ca=ig.input.qb==
ig.Yb.Wc;sc.Kb.Kea=ig.input.qb}this.Hyb();ig.La.Md(0.2);this.background.j("DEFAULT");this.JDa=h},$A:function(){this.cursor.Om();this.cursor.Ic();this.cursor.j("HIDDEN");for(var a=this.entities.length;a--;)this.entities[a].Pra();for(a=this.yX.length;a--;)this.yX[a].j("HIDDEN");this.background.j("HIDDEN");sc.Kb.Z.sl(this.ua);this.JDa=y},Hyb:function(){if(this.JDa){var a=this.Ci;a.x=sc.Kb.cursor.x;a.y=sc.Kb.cursor.y;this.ID();this.cursor.moveTo(sc.Kb.cursor.x,sc.Kb.cursor.y)}else if(ig.input.qb==ig.Yb.Wc){a=
this.Ci;this.t5(a);sc.Kb.cursor.x=ig.i.width/2;sc.Kb.cursor.y=ig.i.height/2;this.ID();this.cursor.moveTo(sc.Kb.cursor.x,sc.Kb.cursor.y)}},t5:function(a){if(a.x<=-1E4||a.y<=-1E4){a.x=ig.i.width/2;a.y=ig.i.height/2}},ID:function(){var a=sc.Kb.cursor.x;sc.Kb.cursor.x=a.Rb(1,ig.i.width-Math.floor(this.cursor.a.size.x/2)-1);a=sc.Kb.cursor.y;sc.Kb.cursor.y=a.Rb(1,ig.i.height-this.cursor.a.size.y-1)},fna:function(a,b){var c=new ig.ec(this.s,512,280,104,65);c.H(a?ig.k.ra:ig.k.hb,b?ig.k.Cb:ig.k.$);c.a.R={DEFAULT:{state:{},
time:0.2,p:KEY_SPLINES.EASE},HIDDEN:{state:{alpha:0,offsetX:-20},time:0.2,p:KEY_SPLINES.LINEAR}};c.j("HIDDEN",h);c.Pd=a||y;c.$h=b||y;c.qg="lighter";this.yX.push(c);this.m(c)},Ab:function(a,b){a==sc.Kb&&(b==sc.il.eW?sc.Kb.yea()?this.DJ():this.$A():b==sc.il.uV&&this.$A())}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.circle-menu").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.interact.button-group").K(function(){var a=Vec2.vc(0,0);sc.Fmb=ig.vn.extend({s:new ig.ia("media/gui/menu.png"),R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},state:0,alpha:1,fr:0,ju:Vec2.vc(0,0),origin:Vec2.vc(40,40),foa:Vec2.vc(0,0),data:q,ac:q,fo:q,f:function(a,c,d){this.parent(h,h);this.l(this.origin.x,
this.origin.y);this.F(32,32);this.Eb(16,16);this.state=a;this.ju.x=c;this.ju.y=d;this.ac=sc.gd.submit;this.fo=sc.gd.Dv},kB:function(){this.parent();this.ac&&this.ac.play()},Lo:function(){this.parent();if(this.focus){this.fr=0;this.alpha=1}},update:function(){this.fr=(this.fr+ig.i.Sa)%1;var a=this.fr/1,a=KEY_SPLINES.EASE_IN_OUT.get(1-(a>0.5?1-(a-0.5)*2:a*2));this.alpha=0.8*a+0.2},Da:function(a){a.na(this.s,0,0,400,304,32,32);this.Aa?this.focus?a.na(this.s,0,0,400,336,32,32).ge(this.alpha):this.Yc&&
a.na(this.s,0,0,400,336,32,32):this.focus&&a.na(this.s,0,0,400,272,32,32);a.na(this.s,8,8,432+(this.state-1)*16,352+(this.Aa?0:16),16,16)},show:function(a,c){c&&this.ff(y);this.j("DEFAULT",y,y,q,a);this.kd(this.ju.x,this.ju.y,0.2,KEY_SPLINES.EASE_OUT,a)},hide:function(){this.ai();this.ff(y);this.j("HIDDEN");this.kd(this.origin.x,this.origin.y,0.2,KEY_SPLINES.LINEAR)},Pf:function(){this.j("DEFAULT");this.kd(this.foa.x,this.foa.y,0.1,KEY_SPLINES.LINEAR)},ui:function(){this.j("HIDDEN");this.ai();this.kd(this.ju.x,
this.ju.y,0.1,KEY_SPLINES.LINEAR)}});sc.Oib=ig.da.extend({R:{HIDDEN:{state:{alpha:0},time:0.1,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.1,p:KEY_SPLINES.LINEAR}},wc:h,Jf:q,button:q,f:function(a){this.parent();this.F(32,32);this.button=a;this.Jf=new sc.Tb(60,{leadingZeros:2,size:sc.Ff.mj,noZero:h,color:sc.Od.Nl});this.Jf.H(ig.k.Ia,ig.k.vb);this.Jf.za(0);this.m(this.Jf)},update:function(){this.Jf.za(Math.ceil(sc.q.T.kx))}});sc.rmb=ig.wh.extend({Na:{focus:new ig.ka("media/sound/menu/menu-hover.ogg",
0.9)},f:function(){this.parent();this.hYa(0,0)},TLa:function(a,c,d,f){a&&this.jd(a,0,1);c&&this.jd(c,0,2);d&&this.jd(d,0,3);f&&this.jd(f,0,4)},Jr:function(){return sc.ba.Au()||sc.ba.OG()||sc.ba.CH()||sc.ba.Zu()||sc.ba.gu()},xJ:function(a){if(!a){sc.ba.Au()&&this.LGa();this.Ipa(1)&&sc.ba.OG()?this.Sg(0,1):this.Ipa(2)&&sc.ba.Zu()?this.Sg(0,2):this.Ipa(3)&&sc.ba.CH()?this.Sg(0,3):this.Ipa(4)&&sc.ba.gu()&&this.Sg(0,4)}},Sg:function(a,c,d,f,i){if(!this.Z||!this.Z.eg)if(i||!(this.Qa.x==a&&this.Qa.y==c)){this.elements[this.Qa.x][this.Qa.y]&&
this.elements[this.Qa.x][this.Qa.y].ai();this.Qa.x=a%this.elements.length;this.Qa.y=c%this.elements[this.Qa.x].length;f=f!=g?f:y;a=this.elements[this.Qa.x][this.Qa.y];a.yk&&!this.OO?a.Yc||!f&&this.Na.focus&&this.Na.focus.play():!f&&this.Na.focus&&this.Na.focus.play();a.Lo();d||this.uQ(a)}},Ipa:function(a){return this.elements[0][a]}});sc.umb=ig.da.extend({s:new ig.ia("media/gui/menu.png"),R:{HIDDEN:{state:{alpha:0,Xa:0.5,Va:0.5,Qb:1},time:0.2,p:KEY_SPLINES.LINEAR},PRE_DEFAULT:{state:{alpha:0,Xa:0.5,
Va:0.5,Qb:-1},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.EASE_OUT}},Ha:q,Rc:q,map:q,Nb:q,sa:q,xa:[],f:function(){this.parent();this.F(112,112);this.Eb(56,56);sc.P.Wa(sc.Kb,this);this.Ha=new sc.rmb;this.Ha.Ql(function(a){if(a.state!=g)switch(a.state){case sc.hm.VE:sc.Kb.Sxb();this.Nla(a);break;case sc.hm.$j:this.Nla();sc.e.xO(h,sc.Fc.$j);sc.q.uy(h);sc.q.nO=sc.Dg.Vx;break;case sc.hm.c9:sc.Kb.Oxb();this.Nla();break;case sc.hm.PP:sc.Kb.Yxb();this.Nla(a)}}.bind(this));this.ECa();
this.j("HIDDEN",h)},update:function(){this.qj()},Da:function(a){a.na(this.s,16,16,320,288,80,80)},DJ:function(){this.j("PRE_DEFAULT",h);this.j("DEFAULT");(!sc.q.Aea()||sc.q.k5a())&&!sc.jb.wc()?this.map.setActive(y):this.map.setActive(h);sc.qi.wc()||sc.q.T.kx>0?this.Rc.setActive(y):this.Rc.setActive(h);!sc.q.T.ki(sc.ng.MENU_SOCIAL)||sc.sa.He.length<=0?this.sa.setActive(y):this.sa.setActive(h);for(var a=this.xa.length;a--;)this.xa[a].show();this.qj();sc.Kb.Z.hh(this.Ha)},$A:function(){this.j("HIDDEN");
for(var a=this.xa.length;a--;)this.xa[a].hide();sc.Kb.Z.sl(this.Ha)},show:function(){this.j("DEFAULT")},hide:function(){this.j("HIDDEN")},ECa:function(){for(var b=[],c=0;c<360;c=c+90){a.x=56-35*Math.sin(c*Math.PI/180);a.y=56-35*Math.cos(c*Math.PI/180);b.push({x:a.x,y:a.y})}this.Rc=this.ala("items",sc.hm.VE,b,0,1);this.Nb=this.ala("analyze",sc.hm.c9,b,0,2);this.sa=this.ala("party",sc.hm.PP,b,0,3);this.map=this.ala("map",sc.hm.$j,b,0,4);this.Rc.m(new sc.Oib(this.Rc));this.Ha.TLa(this.Nb,this.Rc,this.map,
this.sa)},Nla:function(){for(var a=this.xa.length;a--;)this.xa[a].ai()},ala:function(a,c,d){var f=new sc.Fmb(c,Math.floor(d[c-1].x-16)+1,Math.floor(d[c-1].y-16)+1);f.data=ig.lang.get("sc.gui.quick-menu.description."+a);f.foa.x=Math.floor(d[0].x-16)+1;f.foa.y=Math.floor(d[0].y-16)+5;this.m(f);return this.xa[c-1]=f},qj:function(){var b=ig.r.cb,c=this.a;if(b){b=b.b;ig.i.Jy(a,Math.round(b.g.x+b.size.x/2),Math.round(b.g.y-b.g.z-b.size.z/2+b.size.y/2));c.g.x=a.x-c.size.x/2;c.g.y=a.y-c.size.y/2;c.g.x=Math.max(0,
Math.min(ig.i.width-c.size.x,c.g.x));c.g.y=Math.max(0,Math.min(ig.i.height-c.size.y,c.g.y))}},btb:function(a){var a=a-1,c=this.xa.length;if(this.xa[a]){for(;c--;)c!=a&&this.xa[c].ui();this.xa[a].Pf()}else{for(;c--;)this.xa[c].show(0,h);sc.Kb.d5a()&&!ig.input.Id&&(sc.Kb.Bga==sc.hm.VE?this.xa[0].Lo():sc.Kb.Bga==sc.hm.PP?this.xa[2].Lo():sc.Kb.Bga==sc.hm.c9&&this.Ha.Sg(0,1,y,h,h))}},Ab:function(a,c){if(a==sc.Kb&&c==sc.il.eW)if(sc.Kb.yea())this.hide();else{this.show();this.btb(sc.Kb.xe)}}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-party").O("impact.base.image","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","game.feature.interact.button-group","game.feature.menu.gui.list-boxes","game.feature.menu.gui.menu-misc","game.feature.quick-menu.gui.quick-item-menu").K(function(){var a=Vec2.vc(0,0);sc.tmb=ig.Ue.extend({s:new ig.ia("media/gui/basic.png"),gb:new ig.jc("media/gui/menu.png",{width:8,height:8,left:8,top:8,right:8,bottom:8,Vb:{"default":{x:432,y:304},flipped:{x:456,y:304}}}),
R:{HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR}},Sb:q,anchor:q,Ee:q,rows:[],EX:[],Ha:q,Og:h,f:function(a,c){this.parent(202,115);this.Sb=a.a;this.anchor=c.a;this.Ha=new sc.SSa;this.Ha.Bca=h;this.Ha.OO=h;this.Ha.Rk(this.Ofa.bind(this));this.Ha.Ql(this.JJa.bind(this));this.Ha.jn(function(){sc.Kb.Cc("",h);sc.Kb.Rj("",h)}.bind(this));this.Ha.Y$a(N(h).bind(this));sc.P.Wa(sc.Kb,this);var d=new sc.ea(ig.lang.get("sc.gui.quick-menu.strategy.headers.target"),
{font:sc.Ea.Ib});d.l(9,4);this.m(d);d=new sc.ea(ig.lang.get("sc.gui.quick-menu.strategy.headers.behaviour"),{font:sc.Ea.Ib});d.l(9,41);this.m(d);d=new sc.ea(ig.lang.get("sc.gui.quick-menu.strategy.headers.arts"),{font:sc.Ea.Ib});d.l(9,78);this.m(d);this.Ee=new sc.Mxa;this.m(this.Ee);this.$Aa("TARGET",0);this.$Aa("BEHAVIOUR",1);this.$Aa("ARTS",2);this.j("HIDDEN",h)},update:function(){if(this.a.lm&&(this.Ha.wc()&&!ig.La.zh())&&sc.ba.Cq()){sc.gd.back.play();sc.Kb.HDa()}},Da:function(a){this.parent(a);
a.nc("#7E7E7E",2,11,198,1);a.nc("#7E7E7E",2,48,198,1);a.nc("#7E7E7E",2,85,198,1)},$Aa:function(a,c){this.rows[c]=[];var d=this.DCa(a,0,c,sc.Mc.Dja);d.l(8,15+c*37);this.m(d);d=this.DCa(a,1,c,sc.Mc.wL);d.l(38,15+c*37);this.m(d);d=this.DCa(a,2,c,sc.Mc.Eja);d.l(68,15+c*37);this.m(d);d=new ig.ec(this.gb.s,560,213,9,7);d.l(102,22+c*37);this.m(d);d=new sc.ea("");d.l(115,17+c*37);this.m(d);this.EX[c]=d},DCa:function(a,c,d,f){f=new sc.mc("\\i[party-"+a+"-"+c+"]",29,h,f,q,h);f.re.l(c==0?2:0,0);f.data={description:ig.lang.get("sc.gui.quick-menu.strategy.description."+
a)[c],id:c,Vp:d,key:a};f.zfa=h;this.Ha.jd(f,c,d);return this.rows[d][c]=f},show:function(){if(this.Og){this.Og=y;var b=this.a;a.x=this.Sb.g.x+this.anchor.g.x+Math.floor(this.anchor.size.x/2);a.y=this.Sb.g.y+this.anchor.g.y+Math.floor(this.anchor.size.y/2);var c=a.y+-46;a.y=Math.max(10,Math.min(ig.i.height-115-10-22,a.y+-46));b.g.y=a.y;if(a.x+240<ig.i.width){this.ii="default";b.g.x=a.x+27+30;b.kd(a.x+27,a.y,0.2,KEY_SPLINES.EASE_OUT);this.Ee.pz(-10,42+(c-a.y),y)}else{this.ii="flipped";b.g.x=a.x-b.size.x-
27-30-1;b.kd(a.x-b.size.x-27-1,a.y,0.2,KEY_SPLINES.EASE_OUT);this.Ee.pz(b.size.x+1,42+(c-a.y),h)}ig.La.Md(0.2);this.yta("TARGET",0);this.yta("BEHAVIOUR",1);this.yta("ARTS",2);sc.Kb.Z.hh(this.Ha);this.j("DEFAULT")}},hide:function(){if(!this.Og){this.Og=h;sc.Kb.Z.sl(this.Ha);this.j("HIDDEN")}},yta:function(a,c){var d=this.jG(sc.sa.k0[a],c);this.eE(this.rows[c][d],this.rows[c]);this.Ha.EU(this.rows[c][d]);this.EX[c].ga(ig.lang.get("sc.gui.quick-menu.strategy.names."+a)[d])},eE:function(a,c){for(var d=
c.length;d--;)c[d]!=a&&c[d].ff(y)},jG:function(a,c){if(c==0){if(a=="WHATEVER")return 0;if(a=="MY_ENEMY")return 1;if(a=="OTHERS")return 2}else if(c==1){if(a=="OFFENSIVE")return 0;if(a=="DEFENSIVE")return 1;if(a=="DO_NOTHING")return 2}else if(c==2){if(a=="NORMAL")return 0;if(a=="OFTEN")return 1;if(a=="NEVER")return 2}},Ofa:function(a){a.data&&a.data.description&&sc.Kb.Cc(a.data.description)},JJa:function(a){if(a.data){a=a.data;sc.sa.wva(a.key,sc.sa.qBb(a.key,a.id));this.yta(a.key,a.Vp)}},Ab:function(a,
c){a==sc.Kb&&(c==sc.il.eW?sc.Kb.fHa()?this.show():this.hide():c==sc.il.uV&&this.hide())}})});ig.J=h;
ig.N("game.feature.quick-menu.gui.quick-menu").O("impact.base.image","impact.feature.gui.gui","game.feature.quick-menu.gui.quick-screen","game.feature.quick-menu.gui.circle-menu","game.feature.quick-menu.gui.quick-item-menu","game.feature.quick-menu.gui.quick-party","game.feature.menu.gui.menu-misc").K(function(){sc.nmb=ig.da.extend({pU:q,Rc:q,Yla:q,sa:q,location:q,info:q,jr:q,k3:q,Sk:q,f:function(){this.parent();this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);this.a.zIndex=1180;
this.a.xf=h;sc.P.Wa(sc.q,this);sc.P.Wa(sc.map,this);sc.P.Wa(sc.Kb,this);sc.P.Wa(sc.message,this);this.Yla=new sc.omb;this.m(this.Yla);this.pU=new sc.umb;this.m(this.pU);this.Rc=new sc.lmb(this.pU,this.pU.Rc);this.m(this.Rc);this.sa=new sc.tmb(this.pU,this.pU.Rc);this.m(this.sa);this.info=new sc.B9;this.info.H(ig.k.hb,ig.k.Cb);this.m(this.info);this.jr=new sc.cwa;this.info.m(this.jr);this.k3=new sc.qmb;this.m(this.k3);this.location=new sc.mmb;this.location.H(ig.k.hb,ig.k.Cb);this.location.l(0,16);
this.m(this.location);this.j("DEFAULT")},TUa:function(){return sc.ba.Cq()},tza:function(){sc.Kb.loa();sc.cn.Uca();sc.q.nCa();this.jr.ga("");this.k3.hide(h);this.pU.DJ();this.Yla.show();sc.options.get("quick-location")!=sc.e$.NONE&&this.location.show();ig.La.Md(0.2)},bM:function(){sc.Kb.Z.Aba();this.pU.$A();this.Yla.hide();this.info.j("HIDDEN");sc.Kb.jyb();ig.La.Md(0.2);this.location.hide();this.k3.hide();sc.cn.Qyb()},Ysb:function(){sc.Kb.eHa()||sc.Kb.fHa()?this.info.j("DEFAULT"):this.info.j("HIDDEN");
if(sc.Kb.yea()||sc.Kb.eHa()||sc.Kb.fHa())this.location.hide();else if(sc.options.get("quick-location")!=sc.e$.NONE){this.location.kd(0,10,0.2,KEY_SPLINES.LINEAR);this.location.show()}},Ab:function(a,b,c){if(a==sc.q){a.oe()&&this.location.Uca();if(b==sc.zf.cs){sc.q.Kr()&&this.location.Uca();sc.q.jx()?this.tza():this.bM()}}else if(a==sc.Kb)if(b==sc.il.eW){this.Ysb();this.k3.hide();this.jr.ga("")}else if(b==sc.il.oC)this.info.ga(sc.Kb.iB,c||y?0.5:0);else{if(b==sc.il.Y8){c=c||y;this.jr.ga(sc.Kb.OF,c?
0.5:0);this.k3.show(sc.Kb.JC,c?0.5:0)}}else a==sc.map?b==sc.JP.ERa&&sc.options.get("quick-location")==sc.e$.$j&&!sc.q.oe()&&sc.q.T.ki(sc.ng.QUICK_MENU)&&this.location.show(h):a==sc.message&&b==sc.cf.nxa&&this.location.Uca()}})});ig.J=h;
ig.N("game.feature.quick-menu.entities.analyzable").O("impact.base.entity","game.feature.quick-menu.gui.quick-screen-types").K(function(){var a={DEFAULT:{showType:sc.gF.DEFAULT,color:sc.Qz.GREY},QUEST:{showType:sc.gF.INSTANT,color:sc.Qz.PURPLE},SPECIAL:{showType:sc.gF.DEFAULT,color:sc.Qz.YELLOW}};ig.YE.Analyzable=function(a){return"Analyzable["+(a.yf.xub||"")+"]"};ig.wa.Analyzable=ig.Kc.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"Condition for Enemy to spawn",xc:h},xub:{c:"Select",
d:"Type of the Analyzable",U:a,ab:"DEFAULT"},visible:{c:"VarCondition",d:'Condition to check if text is visible, if not "???" will be shown instead'},text:{c:"LangLabel",d:"Name to display above the entity",Zka:h,gs:h,ok:h},eb:{c:"Number",d:"If defined will be visible at the border if below the given distance",I:h}},label:N(""),Uk:h,Sl:"rgba(0,255,0, 0.5)"}),color:sc.Qz.GREY,text:q,visible:q,f:function(b,c,d,f){this.parent(b,c,d,f);this.b.type=ig.ca.IGNORE;this.b.F(16,16,0);this.text=f.text||q;this.visible=
f.visible||q;this.eb=f.distance||0;if(f.analType){this.color=a[f.analType].color||sc.Qz.GREY;this.LK=a[f.analType].showType||sc.gF.DEFAULT}else{this.color=sc.Qz[f.color]||sc.Qz.GREY;this.LK=f.showType?sc.gF[f.showType]:0}},c5a:function(){return this.eb&&ig.qd.Fy(this.b,ig.r.cb.b)<this.eb?h:y},opa:function(){return{type:"Analyzable",color:this.color,text:this.text,visible:this.visible,LK:this.LK}}})});ig.J=h;
ig.N("game.feature.quick-menu.plug-in").O("game.feature.quick-menu.quick-menu-model","game.feature.quick-menu.gui.quick-menu","game.feature.quick-menu.gui.circle-menu","game.feature.quick-menu.gui.quick-item-menu","game.feature.quick-menu.entities.analyzable").K(function(){window.Ed&&wm.Ek.push("game.feature.quick-menu.editors.quick-menu-editors")});ig.J=h;
ig.N("game.feature.tutorial.input-forcer").O("impact.base.game","impact.feature.gui.gui").K(function(){sc.vib=ig.da.extend({Ez:q,g5:q,R:{DEFAULT:{state:{alpha:1},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{alpha:0,Xa:1.5,Va:1.5},time:0.1,p:KEY_SPLINES.EASE_OUT}},f:function(){this.parent();this.a.Nt=h;this.F(ig.i.width,ig.i.height);this.Eb(ig.i.width/2,ig.i.height/2);this.Ez=new sc.ea("",{maxWidth:300,textAlign:ig.$g.zl.at});this.Ez.H(ig.k.Ia,ig.k.vb);this.Ez.l(0,-64);this.m(this.Ez);this.g5=new sc.ea("",
{maxWidth:300,textAlign:ig.$g.zl.at});this.g5.H(ig.k.Ia,ig.k.vb);this.g5.l(0,64);this.m(this.g5)},show:function(a,b){this.Ez.ga(ig.Ra.ic(b.title));ig.input.qb==ig.Yb.Wc?this.g5.ga(ig.Ra.ic(b.x8)):this.g5.ga(ig.Ra.ic(b.y8));ig.X.vd(this);this.j("HIDDEN",h);this.j("DEFAULT")},remove:function(){this.j("HIDDEN",y,h)}});sc.uib=ig.Uf.extend({IQ:q,Tua:{title:q,y8:q,x8:q},X:q,Vi:y,PM:q,zj:q,kea:y,Na:{start:new ig.ka("media/sound/hud/popup-2.ogg",1)},f:function(){this.parent("InputForcer");this.X=new sc.vib},
nha:function(a,b,f,i){this.IQ=sc.EP[a]||q;this.Tua.title=b;this.Tua.x8=i;this.Tua.y8=f;this.update()},HG:M("Vi"),FZa:function(){this.Vi&&this.yVa();this.IQ=q},qVb:M("kea"),aU:10,fH:function(){this.update()},fj:function(){this.FZa()},update:function(){if(this.IQ){var a=this.IQ.Nb();!a&&!this.Vi?this.ltb(this.IQ.Ei):a&&this.Vi&&this.yVa();if(a&&!this.IQ.Aqa)this.IQ=q;if(a)this.kea=h}else this.kea=y},ltb:function(a){this.X.show(this.IQ,this.Tua);ig.Ru.add(0,0,"forceInput");ig.Ru.XR();ig.ke.Fga();this.Na.start.play();
this.PM=new ig.tV(h);this.PM.Zta(q,0.8,-1,0.2,0.2);ig.pg.Oaa(this.PM);this.Vi=h;a&&ig.r.cb.Ei();this.zj=new ig.Bw(ig.r.cb,ig.mk.L,0,0,-1,1,y);ig.pg.ey(this.zj)},yVa:function(){ig.ke.pga();ig.Ru.Bba("forceInput",0);ig.Ru.XR();this.PM.stop();this.zj.stop();this.Vi=y;this.X.remove();var a=ig.r.cb;a&&(a.ed&&a.ed.sq)&&a.Ei()}});ig.Vf(function(){return sc.v5=new sc.uib});sc.EP={};var a=Vec2.create(),b=Vec2.create();sc.EP.DODGE_RIGHT={Ei:h,Nb:function(){if(!sc.ba.RCa())return y;sc.ba.Nh(a,0,h);if(Vec2.Ig(a))return y;
Vec2.Oa(b,1,0);return Vec2.Qb(b,a)>Math.PI*0.2?y:h},Aqa:y};sc.EP.ATTACK_LEFT={Ei:h,Nb:function(){return!sc.ba.g1a()?y:h},Aqa:y};sc.EP.CHARGE_HOLD={Nb:function(){return!sc.ba.Ac()?y:h},Aqa:h};sc.EP.CHARGE_RELEASE={Nb:function(){return sc.ba.Ac()?y:h},Aqa:y}});ig.J=h;
ig.N("game.feature.tutorial.tutorial-steps").O("impact.base.action","game.feature.tutorial.input-forcer").K(function(){ig.oa.START_FORCE_INPUT=ig.qa.extend({GGa:q,title:q,y8:q,x8:q,t:new ig.u({attributes:{GGa:{c:"String",d:"Name of player config",U:sc.EP},title:{c:"LangLabel",d:"Title of input forcer"},y8:{c:"LangLabel",d:"Text for Keyboard"},x8:{c:"LangLabel",d:"Text for Gamepad"}}}),f:function(a){this.GGa=a.inputEntry;this.title=a.title;this.y8=a.textKeyboard;this.x8=a.textGamepad},start:function(){sc.v5.nha(this.GGa,
this.title,this.y8,this.x8)},ya:function(){return!sc.v5.HG()}});ig.oa.CLEAR_FORCE_INPUT=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.v5.FZa()}})});ig.J=h;ig.N("game.feature.tutorial.plug-in").O("game.feature.tutorial.input-forcer","game.feature.tutorial.tutorial-steps").K(J());ig.J=h;
ig.N("game.feature.trade.gui.trade-icon").O("impact.feature.gui.gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui","game.feature.interact.map-interact").K(function(){sc.spb=ig.Ue.extend({R:{DEFAULT:{state:{alpha:1,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:0.4,Va:0.5,alpha:0,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT}},gb:new ig.jc("media/gui/message.png",{width:4,height:4,left:6,top:6,right:6,bottom:6,Vb:{"default":{x:0,y:112}}}),Ls:new ig.ia("media/gui/menu.png"),
fdb:q,iva:q,RG:q,xb:[],f:function(a){this.parent(138,40);this.a.nd=0.6;this.a.g.y=7;this.fdb=sc.Fb.CY(a);this.mF();this.j("HIDDEN",h)},I7:function(a){if(a==sc.Eo.FOCUS){this.Atb();this.j("DEFAULT")}else this.j("HIDDEN")},wc:function(a){return a==sc.Eo.FOCUS},mF:function(){this.Uqb();for(var a=14,b=-1,c=this.fdb.options,d=q,f=q,i=q,d=q,j=sc.yb,k=0;k<c.length;k++)for(var f=c[k].get,l=0;l<f.length;l++){var d=j.getItem(f[l].id),i="\\i["+(d.icon+sc.yb.Er(d.rarity||0)||"item-default")+"]"+ig.Ra.ic(d.name),
m=0;d.type==sc.kh.EQUIP&&(m=d.level||1);d=new sc.ea(i);d.gdb=i;d.H(ig.k.Ia,ig.k.$);d.l(0,a);d.aa=m;d.Ls=this.Ls;m>0&&d.Ou(function(a,b){sc.KP.AJ(this.aa,a,b,this.Ls)}.bind(d));this.m(d);this.xb.push({X:d,kJb:c[k].require});a=a+(d.a.size.y-2);if(b<d.a.size.x)b=d.a.size.x}this.F(Math.min(b+21,138),a+6);this.Eb(this.a.size.x/2,this.a.size.y)},Uqb:function(){var a=new sc.ea(ig.lang.get("sc.gui.trade.tradeOffer"),{font:sc.Ea.Ib});a.H(ig.k.Ia,ig.k.$);a.l(0,4);this.m(a);this.RG=new ig.mf("#ccc",a.a.size.x+
10,1);this.RG.H(ig.k.Ia,ig.k.$);this.RG.l(0,12);this.m(this.RG)},Atb:function(){for(var a=this.xb.length;a--;){var b=this.xb[a].X;this.Nrb(this.xb[a].kJb)?b.ga("\\c[4]"+b.gdb+"\\c[0]"):b.ga(b.gdb)}},Nrb:function(a){for(var b=a.length;b--;)if(sc.q.T.OJ(a[b].id)<a[b].amount)return h},remove:function(){this.j("HIDDEN",y,h)}})});ig.J=h;
ig.N("game.feature.trade.trade-steps").O("impact.base.action","impact.base.event").K(function(){ig.oa.RESET_TRADER=ig.qa.extend({Fz:q,t:new ig.u({attributes:{Fz:{c:"TraderSelect",d:"The trader to reset."}}}),f:function(a){this.Fz=a.trader},start:function(){sc.Fb.AJb(this.Fz)}});ig.oa.START_NPC_TRADE_MENU=ig.qa.extend({t:new ig.u({attributes:{cV:{c:"Boolean",d:"If true, use branches to determine whether things where traded or not."}},NF:function(a){switch(a){case "traded":return"ON TRADE DONE";case "canceled":return"ON TRADE CANCELED";
case "_end":return"end trade"}return"???"}}),f:function(a){this.cV=a.withBranches||y},start:function(a,b){if(b.wma instanceof ig.wa.NPC){a.z2=sc.q.message.Npa();a.z2&&sc.q.message.BNa();b.wma.wNa()}},ya:function(a){var b=!sc.q.X4a();b&&a.z2&&sc.q.message.RMa();return b},eB:function(){return this.cV?["traded","canceled"]:q},Lv:function(){return!this.cV?this.Ok:sc.Fb.RLa>0?this.uf.traded||this.Ok:this.uf.canceled||this.Ok}})});ig.J=h;
ig.N("game.feature.trade.plug-in").O("game.feature.trade.gui.trade-menu","game.feature.trade.gui.trade-icon","game.feature.trade.trade-steps").K(function(){window.Ed&&wm.Ek.push("game.feature.trade.editors.trade-editor")});ig.J=h;
ig.N("game.feature.save-preset.save-preset").O("impact.base.loader","impact.base.game").K(function(){var a=["0-before-boss","1-rhombus-dng-start","2-continue-story","3-autumn-rise","4-apollo-duel","5-before-bergen","6-before-maroon","7-fajro-temple","8-autumns-fall"];sc.jnb=ig.XE.extend({Wi:"SavePresetData",title:q,sub:q,dha:q,Wo:J(),oG:function(){return ig.root+this.path.vm("data/save-presets/",".json")+ig.Kn()},onload:function(a){this.title=new ig.Ra(a.title);this.sub=new ig.Ra(a.sub);this.dha=
new ig.T1(a.savefile);sc.version.IOb(this.dha)}});sc.inb=ig.Uf.extend({kg:[],f:function(){if(!window.Ed)for(var b=0;b<a.length;++b)this.kg[b]=new sc.jnb(a[b])},load:function(a){a=ig.copy(this.kg[a].dha);ig.r.Pqa(a)}});sc.HLa=new sc.inb;ig.Vf(function(){return sc.HLa})});ig.J=h;ig.N("game.feature.save-preset.plug-in").O("game.feature.save-preset.save-preset").K(J());ig.J=h;
ig.N("game.feature.xeno-dialogs.entities.xeno-dialog").O("impact.base.entity","impact.feature.effect.effect-sheet").K(function(){var a=80,b=200,c=120,d=b,a=a*a,b=b*b,c=c*c,f=[];ig.YE.XenoDialog=function(a){return"XENO_DIALOG["+(a.yf.name||"")+"]"};ig.wa.XenoDialog=ig.Kc.extend({t:new ig.u({Dd:h,attributes:{Zg:{c:"VarCondition",d:"optional spawn condition, leave empty for true",xc:h},CR:{c:"XenoDialog",d:"The dialog"},WY:{c:"Boolean",d:"If true, ignore Z pos when checking range",I:h,ab:h},n0a:{c:"Boolean",
d:"if true, skip dialog wait after dialog has been completed resulting in an endless dialog loop"},A6:{c:"Boolean",d:"Only play this dialog once."}},Uk:h,nb:function(a,b){if(!wm.bIa.hSb.hidden){if(b.zk&&b.zk.length==0)b.zk=q;b.kWa();if(a)for(var c=b.zk.length;c--;)b.Ua.push(ig.oNa.get(y));else if(b.zk&&b.Ua.length!=1)for(var f=q,m=q,c=b.zk.length,n=2,o=b.b.g.x+b.b.size.x/2,t=b.b.g.y+b.b.size.y/2-b.b.g.z;c--;)if(b.zk[c]){f=b.zk[c].b;m=b.Ua[b.Ua.length-n];n++;if(m){m.l(f.g.x,f.g.y,f.g.z);m.F(16,16,
0);m.Bj(new ig.fQa("rgba(128,0,128, 0.5)","rgba(200, 200, 200, 0.1)",o,t,d))}}}},Sl:"rgba(128,0,128, 0.5)",label:N("")}),CR:q,zk:q,Ps:y,AA:0,uK:0,vJ:-1,T3:q,EX:"",XC:q,fx:{sheet:new ig.ud("npc"),handle:q},A6:y,Opa:y,WY:y,f:function(a,b,c,d){this.parent(a,b,c,d);this.b.F(16,16,0);this.b.type=ig.ca.IGNORE;this.n0a=d.endlessDialog;this.A6=d.once||y;this.WY=d.ignoreZ||y;if(this.A6&&ig.ma.get("map.xeno-dialog-once_"+this.zu))this.Opa=h;this.CR=[];a=d.dialog;for(b=0;b<a.length;b++)if(c=a[b]){c={Dca:c.entity,
text:new ig.Ra(c.text),event:c.event?new ig.Ja({steps:c.event}):q,Q:q};ig.Ae&&ig.Ae.Cz("Xeno MSG "+(c.Dca&&c.Dca.name),c.text);this.CR.push(c)}},po:function(){this.rba();this.hide()},Ge:function(a){this.rba();this.parent(a)},update:function(){this.parent();this.kWa();var d=!sc.q.oe()&&this.T3&&this.XC&&!sc.q.Qv();d&&!this.fx.handle?this.dtb():!d&&this.fx.handle&&this.Yka();if(!ig.r.CD()&&!sc.q.oe())if(this.AA>0)this.AA=this.AA-ig.i.ja;else if(!this.A6||!this.Opa)if(this.Ps)if(this.vJ==-1?this.Sza(c):
this.Sza(b)){if(this.uK>0)this.uK=this.uK-ig.i.ja;this.uK<=0&&this.uXa()}else this.rba();else this.Sza(a,!this.WY)&&this.$Mb()},$Mb:function(){for(var a=f.length;a--;)f[a].rba();this.Ps=h;f.push(this)},rba:function(){if(this.vJ>=this.CR.length&&this.A6){ig.ma.set("map.xeno-dialog-once_"+this.zu,h);this.Opa=h}this.Yka();this.Ps=y;this.gza();this.vJ=-1;this.uK=0;f.ye(this)},Fzb:function(){return this.EX||"Hello World"},wTb:M("XC"),Hfa:function(){this.Yka();this.Ps=y;this.gza();this.AA=1;this.vJ=-1;
this.uK=0},OZ:function(){this.AA=1;this.rba()},Yka:function(){if(this.fx.handle){this.fx.handle.stop();this.fx.handle=q}},dtb:function(){if(sc.options.get("xeno-pointer"))this.fx.handle=this.fx.sheet.va("xenoAlert",ig.r.cb,{duration:-1,target2:this.T3,offset:{x:0,y:0,z:12},target2Offset:{x:0,y:0,z:12}})},uXa:function(){this.gza();this.Yka();this.vJ++;if(this.vJ>=this.CR.length){if(this.A6){this.Ps=y;ig.ma.set("map.xeno-dialog-once_"+this.zu,h);this.Opa=h}if(this.n0a)this.vJ=0;else{this.vJ=-1;this.uK=
2;return h}}var a=this.CR[this.vJ];this.T3=a.Q;this.XC=a.event;this.EX=a.text;ig.Ae&&ig.Ae.yE("Xeno MSG "+(a.Dca&&a.Dca.name),a.text);this.T3.ULb(this);this.uK=Math.max(1.5,this.EX.toString().length/25*1.1+1.2);if(this.XC)this.uK=this.uK+2;return y},gza:function(){if(!(this.vJ<0)){this.T3.fvb();this.XC=this.EX=this.T3=q}},Sza:function(a,b){for(var c=ig.r.cb.b,d=this.zk.length,f=q,n=0,f=0;d--;){f=this.zk[d].b;if(!(b&&c.g.z!=f.pc)){n=c.g.x+c.size.x/2-(f.g.x+f.size.x/2);f=c.g.y+c.size.y/2-(f.g.y+f.size.y/
2);if(n*n+f*f<=a)return h}}return y},kWa:function(){if(!this.zk){this.zk=[];for(var a=this.CR.length,b=q,c=q;a--;){b=this.CR[a];(c=ig.Ja.rd(b.Dca))&&this.zk.indexOf(c)==-1&&this.zk.push(c);b.Q=c||q}}}})});ig.J=h;
ig.N("game.feature.xeno-dialogs.gui.xeno-icon").O("impact.feature.gui.gui","impact.feature.gui.base.box","impact.feature.gui.base.basic-gui","game.feature.interact.map-interact","game.feature.msg.gui.msg-skip-hud").K(function(){sc.fqb=ig.Ue.extend({R:{DEFAULT:{state:{alpha:1,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT},HIDDEN:{state:{Xa:0.4,Va:0.5,alpha:0,offsetY:8},time:0.1,p:KEY_SPLINES.EASE_OUT}},gb:new ig.jc("media/gui/message.png",{width:4,height:4,left:6,top:6,right:6,bottom:6,Vb:{"default":{x:0,
y:112},highlight:{x:16,y:112}}}),ob:q,Oq:q,rw:q,pua:q,f:function(){this.parent(40,40);this.a.nd=0.7;this.a.g.y=4;this.ob=new sc.ea("This is a sample text.",{font:sc.Ea.he,maxWidth:140,speed:ig.Rd.se.n$,linePadding:0,optimize:h,bestRatio:4});this.ob.H(ig.k.Ia,ig.k.vb);this.ob.gg.dH=this.nHb.bind(this);this.m(this.ob);this.F(this.ob.a.size.x+8,this.ob.a.size.y+4);this.Eb(this.a.size.x/2,this.a.size.y);this.j("HIDDEN",h);this.Oq=new sc.WRa;this.m(this.Oq);this.Oq.j("HIDDEN",h);this.Oq.H(ig.k.hb,ig.k.Cb);
this.pua=new sc.GTa(this,20)},nHb:function(){this.xva()},VDb:function(){return this.ob.gg.On()},xva:function(){this.ob.gg.On()&&this.pua.wc()?this.Oq.show():this.Oq.hide()},ga:function(a,b){this.rw=b;this.ob.ga(a||"This is an empty test");var c=this.rw.XC?3:2,d=Math.max(30,this.ob.a.size.x+(this.rw.XC?6:4)*2);this.F(d,this.ob.a.size.y+c*2);this.Eb(this.a.size.x/2,this.a.size.y);this.Oq.l(this.a.size.x+1,0);sc.IU.De(this.pua);this.ii=this.rw.XC?"highlight":"default";this.a.nd=this.rw.XC?0.85:0.7;this.xva()},
show:function(){this.ob.reset();this.j("DEFAULT")},hide:function(){sc.IU.$e(this.pua);this.xva();this.j("HIDDEN")},x6:function(a){a==sc.cW.dya&&(this.ob.gg.On()?this.rw.uXa():this.ob.finish());this.xva()},I7:J(),wc:function(a){return a!=sc.EP.HIDDEN},remove:function(){this.j("HIDDEN",y,h)}})});ig.J=h;ig.N("game.feature.xeno-dialogs.plug-in").O("game.feature.xeno-dialogs.entities.xeno-dialog","game.feature.xeno-dialogs.gui.xeno-icon").K(function(){window.Ed&&wm.Ek.push("game.feature.xeno-dialogs.editors.xeno-dialog-editor")});
ig.J=h;
ig.N("game.feature.quest.quest-types").K(function(){sc.g$=ig.Ca.extend({type:q,f:function(a){this.type=a.type||"THROWS_ERROR"}});sc.H1={};sc.H1.COLLECT=sc.g$.extend({t:new ig.u({attributes:{item:{c:"Item",d:"The item to collect."},zc:{c:"Number",d:"the amount you need to collect.",ab:1},vHa:{c:"Boolean",d:"True if the player can keep the items",ab:"false"},gGa:{c:"Boolean",I:h,ab:"true",d:"True if the name should be hidden until at least one of the item has been found or the sub task is finished"},fGa:{c:"Boolean",
I:h,ab:"true",d:"True if the max number should be hidden until the subtask is solved."}}}),item:0,zc:0,vHa:y,gGa:y,fGa:y,f:function(a){this.parent(a);this.item=a.item;this.zc=a.amount;this.vHa=a.keepItems;this.gGa=a.hideName||y;this.fGa=a.hideMax||y},WJ:function(a){a.collected=sc.q.T.Dr(this.item)},Jz:function(a,b,c,d){if(d||b.item==this.item)a.collected=sc.q.T.Dr(this.item)},gda:function(a,b){return b?this.zc-a.collected:a.collected},A4:function(){this.vHa||sc.q.T.removeItem(this.item,this.zc,y,
h)},IS:function(a){return a.collected>=this.zc},reset:J()});sc.H1.KILL=sc.g$.extend({t:new ig.u({attributes:{Fe:{c:"EnemyName",d:"The enemy you need to defeat"},zc:{c:"Number",d:"the amount you need to defeat.",ab:1}}}),Fe:0,zc:0,f:function(a){this.parent(a);this.Fe=a.enemy;this.zc=a.amount},WJ:function(a){a.killed=0},Jz:function(a,b){b.enemy==this.Fe&&(a.killed=a.killed+b.amount)},gda:function(a,b){return b?this.zc-a.killed:a.killed},IS:function(a){return a.killed>=this.zc},reset:function(a){ig.debug("RESTORE [KILL]: enemy:"+
this.Fe+", amount: "+this.zc);a.killed=0}});sc.H1.CONDITION=sc.g$.extend({t:new ig.u({attributes:{label:{c:"String",d:"The label inside the quest that will be set to true"},text:{c:"LangLabel",d:"The text that should be displayed as subtask",I:h},YLb:{c:"LangLabel",d:"short version for minified GUI",I:h}},label:function(){return"<b>CONDITION</b>  <code>label:"+this.label+(this.text?" text: <i style='color: orange'>"+wmPrint("LangLabel",this.text)+"</i>":"")}}),text:q,O_:q,label:q,f:function(a){this.parent(a);
this.text=a.text?new ig.Ra(a.text):"";this.O_=a.shortText?new ig.Ra(a.shortText):q;this.label=a.label||q},WJ:function(a){a.active=y},Jz:function(a,b,c){if(this.label==b.label){a.active=b.value;a.active&&(c[this.label]=h)}},gda:function(a,b){return b?y:a.active},IS:function(a){return a.active},reset:function(a,b){ig.debug("RESTORE [CONDITION]: label:"+this.label);a.active=y;b[this.label]=y}});sc.H1.QUEST=sc.g$.extend({t:new ig.u({attributes:{Jb:{c:"SubQuestSelect",d:"Quest to solve. Select parent quest first."},
text:{c:"LangLabel",d:"The text that should be displayed as subtask",I:h},YLb:{c:"LangLabel",d:"short version for minified GUI",I:h}},label:function(){return"<b>QUEST</b>  <code>quest:"+this.Jb+(this.text?" text: <i style='color: orange'>"+wmPrint("LangLabel",this.text)+"</i>":"")}}),Jb:q,text:q,O_:q,f:function(a){this.parent(a);this.Jb=a.quest||q;this.text=a.text?new ig.Ra(a.text):"";this.O_=a.shortText?new ig.Ra(a.shortText):q},WJ:function(a){a.active=y},Jz:function(a,b,c,d){if(d){a.active=sc.dc.Lr(this.Jb);
ig.debug("SubQuest done after prev task finished: "+this.Jb+" | state: "+a.active)}else this.Jb==b.quest&&(a.active=b.value)},gda:function(a,b){return b?y:a.active},IS:function(a){return a.active}});sc.H1.LANDMARK=sc.g$.extend({t:new ig.u({attributes:{Lb:{c:"Select",d:"The item to check",U:"areas"},zc:{c:"Number",d:"the amount you need to unlock.",ab:1}}}),Lb:0,zc:0,f:function(a){this.parent(a);this.Lb=a.area;this.zc=a.amount},WJ:function(a){a.unlocked=sc.map.xFa(this.Lb)},Jz:function(a,b,c,d){if(d||
b.area==this.Lb)a.unlocked=sc.map.xFa(this.Lb)},gda:function(a,b){return b?this.zc-a.unlocked:a.unlocked},IS:function(a){return a.unlocked>=this.zc}});sc.fmb=ig.Ca.extend({ik:"",xE:[],f_a:y,mw:q,pbb:y,f:function(a,b){this.ik=new ig.Ra(a.task);this.xE=[];this.pbb=a.skipNotify||y;for(var c=a.subtasks,d=0;d<c.length;d++){var f=new sc.H1[c[d].type](c[d]);if(f.type=="CONDITION")b.jEb.push(f.label);else if(f.type=="COLLECT"||f.type=="LANDMARK")this.f_a=h;else if(f.type=="QUEST"){if(!this.mw)this.mw=[];
this.mw.push(f.Jb)}this.xE.push(f)}}});sc.JSa=ig.Ca.extend({name:"",aa:1,Li:0,description:"",iu:"",ij:q,Qh:q,id:q,Oh:q,y8a:q,jEb:[],Tpa:y,Lb:q,b7a:y,ega:q,ho:y,j6a:y,CG:q,location:{Lb:"",map:""},timeStamp:0,Ad:q,f:function(a,b){this.aa=a.level||1;this.name=new ig.Ra(a.name);this.description=new ig.Ra(a.description);this.iu=new ig.Ra(a.briefing);this.Qh=a.rewards||{};this.id=b||q;this.b7a=a.noTrack||y;this.Li=a.order||-1;this.Oh=new ig.Ra(a.person||"???");this.Tpa=a.hideRewards||y;this.Lb=a.area||
q;this.ega=a.parent||q;this.ho=a.elite||q;this.j6a=a.mandatory||y;this.CG=a.hubSettings||q;if(a.hubSettings)this.CG={Ad:a.hubSettings.character||q,uCb:a.hubSettings.hideChar||y,location:new ig.Ra(a.hubSettings.location||"???"),fb:a.hubSettings.condition||""};if(a.personAfter)this.y8a=new ig.Ra(a.personAfter||"???");this.ij=[];for(var c=a.tasks,d=0;d<c.length;d++){this.ij.push(new sc.fmb(c[d],this));d>0&&this.ij[d].mw&&e(Error("Sub Quest found in"+d+" task. Can only be in first task!"))}}})});
ig.J=h;
ig.N("game.feature.quest.quest-model").O("impact.base.game","impact.base.loader","impact.feature.database.database","game.config","game.feature.quest.quest-types","game.feature.model.game-model","game.feature.combat.combat","game.feature.timers.timers-model").K(function(){var a={Jb:q,state:q},b={item:0,amount:0,enemy:q,quest:q};sc.VP={mPa:0,eya:1,fI:2};sc.Ml={ACCEPTED:0,ORDER:1,NAME:2,LEVEL:3};var c={"rookie-harbor":0,"autumn-area":1,"autumn-fall":2,"bergen-trails":3,bergen:4,"heat-area":5,"heat-village":6,
jungle:7,"jungle-city":8};sc.dmb=ig.Uf.extend({Uo:[],zi:{},pk:[],ax:{},Fi:-1,Qp:[],hq:{},hM:[],y2:0,iq:y,CRb:[],f:function(){this.parent("Quests");this.isb();if(window.Ed){ig.Yh.Lg("quests","QuestEnumEditor","Quests");ig.Yh.Lg("questHubs","QuestHubList","Quest Hubs")}ig.zd.Lg(this);ig.ma.Up("quest",this,"VarQuestEditor");ig.ma.Up("questHubs",this,"VarQuestHubEditor");sc.Ta.UAa(this);sc.P.Wa(sc.q.T,this)},V4:function(a,b,c,j){var k=0,l=0,m;for(m in this.zi)if(!(b&&this.zi[m].Lb!=b)&&(!c||this.zi[m].CG)&&
!this.zi[m].b7a){this.ax[m]&&k++;l++}return l?a?k/l:k:j?1:0},xBb:function(a,b){b=b||{total:0,Z7:0};b.total=0;b.Z7=0;for(var c in this.zi){var j=this.zi[c];if(a==j.Lb&&j.CG){this.ax[c]&&b.Z7++;b.total++}}},bCb:function(a){var b=this.zi,c;for(c in b)if(b[c].Lb==a)return h;return y},fH:function(){if(sc.q.Y4a())if(this.hM.length>=1)if(this.y2<=0){var a=this.hM.splice(0,1)[0];this.iq=h;a=this.cBb(this.zi[a]);sc.$r.TK(a);this.y2=0}else this.y2=this.y2-ig.i.Sa;else this.iq=y},sLa:-1,fj:function(){this.pk.length=
0;this.hq={};this.Fi=-1;this.y2=this.hM.length=0;this.ax={};this.Qp=[];sc.P.Ga(this,sc.Nk.yV)},QHb:function(){if(this.hM.length>=1){this.iq=h;ig.ma.set("tmp._questRewardsFinished",y);var a=this.hM.splice(0,1)[0];this.mAb(this.zi[a]);return h}return this.iq=y},mAb:function(a){a=ig.X.Wba(q,"QuestSolvedDialog",{quest:a});ig.X.Qha(a)},cBb:function(a){return new ig.Ja({steps:[{type:"WAIT",time:0.2,ignoreSlowDown:h},{type:"ADD_GUI",name:q,guiInfo:{type:"QuestSolvedDialog",settings:{quest:a}}},{type:"WAIT_UNTIL_TRUE",
condition:"tmp._questRewardsFinished"},{type:"WAIT",time:0.1,ignoreSlowDown:h}]})},u6a:function(a){if(this.Lr(a)){this.Qp.ye(a);this.Fi=-1;sc.P.Ga(this,sc.Nk.yV,-1E4)}else{this.Qp.indexOf(a)==-1?this.Qp.push(a):this.Qp.ye(a);this.Fi=-1;sc.P.Ga(this,sc.Nk.yV,-1E4);this.CMb(this.Qp)}},V4a:function(a){for(var b=this.Qp.length;b--;)if(a==this.Qp[b])return h;return y},CUb:M("iq"),E3a:function(){return this.hM.length>0},cXb:function(a){if(a<0)return y;a==this.Fi&&(a=-1);var b=this.Fi;this.Fi=a;sc.P.Ga(this,
sc.Nk.yV,b);return h},OCa:function(a,b){if(this.Qp.length!=0){var c=this.Fi,a=a||0;this.Fi=this.Fi+a;if(a>=0){if(this.Fi>=this.Qp.length)this.Fi=-1}else if(this.Fi==-2)this.Fi=this.Qp.length-1;else if(this.Fi<0)this.Fi=-1;if(this.Fi!=-1&&this.$Ga()){this.Qp.splice(this.Fi,1);this.OCa(a,b)}else b||sc.P.Ga(this,sc.Nk.yV,c)}},G_:function(b,c,i){b==sc.Nk.Aja&&this.nab(c.Jb,i);a.state=c||q;a.Jb=c.Jb||q;sc.P.Ga(this,b,a)},Fwb:function(b){b=new sc.JSa(b);this.jXa(b);var c=new sc.lka(b);a.Jb=b;a.state=c;
this.pk.push(c);sc.P.Ga(this,sc.Nk.V0,a);sc.Ep.Ws("QUEST_ACCEPTED",{});ig.r.Yj()},VXa:function(b,c,i){var j=this.zi[b];j||e(Error("Could not find quest with ID: "+b));this.Lrb(j)&&e(Error("Static quest is already finished! Quest ID: "+b));this.jXa(j,c,i);c=new sc.lka(j);if(!c.Jp){this.pk.push(c);this.hq[b]=this.pk.length-1;a.Jb=j;a.state=c;sc.pa.Uta("quests","active",this.pk.length);sc.e.xF({type:"QUEST",accept:h,quest:b});sc.P.Ga(this,sc.Nk.V0,a);sc.Ep.Ws("QUEST_ACCEPTED",{})}ig.r.Yj();return c},
AMb:function(a,c){for(var i=this.zi[a],j=this.pk.length;j--;){var k=this.pk[j];if(k.Jb==i){k.labels[c]=h;b.label=c;b.value=h;k.Jz("CONDITION",b);ig.r.Yj();return}}e(Error("Tried to solve condition of quest that is not active"))},FOb:function(a){if(this.vqa(a)){a=this.zi[a];a.location.Lb=sc.map.XEa();a.location.map=sc.map.Xoa(h)}},tLa:function(a,b){var c=this.hq[a];if(c!=g){this.pk[c].yJb(b);ig.r.Yj()}},L8:function(a,b){for(var c=this.pk.length;c--;)this.pk[c].Jz(a,b);ig.r.Yj()},vLa:function(a,b){for(var c=
this.pk.length;c--;)this.pk[c].Jz(a,b,h);ig.r.Yj()},nab:function(a,c){this.ax[a.id]&&e(Error("Static quest has already been finished! ID: "+a.id));if(!c){var i=this.hq[a.id];if(i==g){console.error("Quest with State %O is not an active quest and cannot be finished!",a.id);return}this.pk.splice(i,1);for(var j in this.hq)this.hq[j]>=i&&(this.hq[j]=this.hq[j]-1)}sc.pa.bc("quests","solved",1);sc.pa.Ni("quests","solvedTotal",this.V4(h));sc.e.xF({type:"QUEST",finish:h,quest:a.id});this.hM.push(a.id);if((i=
this.nFa())&&i.id==a.id)this.Fi=-1;this.V4a(a.id)&&this.u6a(a.id);if(a.id){this.ax[a.id]={solved:h};c||delete this.hq[a.id]}ig.r.Yj();b.quest=a.id;b.value=h;this.L8("QUEST",b)},Fyb:function(a){this.Eqb(a);sc.P.Ga(this,sc.Nk.mlb,a)},vqa:function(a){return this.hq[a]!=g},Lr:function(a){return this.ax[a]},b5a:function(a,b){var c=this.eBb(a);return c?c.labels[b]:this.Lr(a.id)?h:y},eBb:function(a){return this.pk[this.hq[a.id]]},sBb:function(a){if(a.ij[0]&&a.ij[0].mw)return a.ij[0].mw},fBb:function(a,b){if(this.zi[a])return this.zi[a].ij[b]},
sG:function(a){return this.zi[a]},lHa:function(a,b){var c=this.pk[this.hq[a.id]];return c?c.ef>b:this.ax[a.id]?h:y},YEa:function(a,b){var c=this.pk[this.hq[a.id]];if(c)return b?c.sS:c.ef;if(this.ax[a.id])return a.ij.length-1},B2a:function(a){return!this.zi[a]?"NO QUEST":this.zi[a].name},dBb:function(a,b){var c=[];if(a==sc.VP.mPa||a==sc.VP.fI)for(var j=this.pk.length;j--;)c.push(this.pk[j].Jb);if(a==sc.VP.eya||a==sc.VP.fI)for(var k in this.ax)c.push(this.zi[k]);b!=g&&this.DMb(c,b);return c},CMb:function(a){a.sort(function(a,
b){return this.zi[b].timeStamp-this.zi[a].timeStamp}.bind(this))},DMb:function(a,b){switch(b){case sc.Ml.ACCEPTED:a.sort(function(a,b){return b.timeStamp-a.timeStamp});break;case sc.Ml.ORDER:a.sort(function(a,b){var d=a.Li,f=b.Li,d=d+(c[a.Lb]||0)*1E5,f=f+(c[b.Lb]||0)*1E5;return d-f});break;case sc.Ml.NAME:a.sort(function(a,b){return a.name.toString().localeCompare(b.name.toString())});break;case sc.Ml.LEVEL:a.sort(function(a,b){return a.aa!=b.aa?a.aa-b.aa:b.timeStamp-a.timeStamp})}},p1a:function(a){return this.hq[a.id]},
Cla:function(a,b){return a.Li-b.Li},nFa:function(){return this.Fi<0?q:this.zi[this.Qp[this.Fi]]},I1a:function(){return this.Fi<0?q:this.pk[this.p1a(this.zi[this.Qp[this.Fi]])].ef},$Ga:function(){if(!this.Qp[this.Fi])return h;var a=this.pk[this.p1a(this.zi[this.Qp[this.Fi]])];return!a?h:a.ek()},dVb:function(a){return this.Fi<0?y:this.pk[this.Fi].ef>a},WTb:function(a){for(var b=this.pk[this.Fi].Jb,c=b.ij.length;c--;)if(b.ij[c]==a)return c},tBb:function(a,b,c){return this.pk[this.hq[a.id]]?this.pk[this.hq[a.id]].Xb[b][c]:
{}},SDb:function(a,b,c){return this.pk[this.hq[a.id]]?a.ij[b].xE[c].IS(this.pk[this.hq[a.id]].Xb[b][c]):y},bm:function(a,b){if(b[0]=="quest"){var c=this.hq[b[1]];if(c!=g&&c>=0){if(c=this.pk[c])switch(b[2]){case "started":return h;case "solved":return c.Jp;case "task":return c.ef==b[3]*1;case "currentTask":return c.ef;case "subtask":return c.TDb(b[3]*1);case "subvalue":return c.K1a(b[3]*1)+"";case "subrequire":return c.K1a(b[3]*1,h)+"";case "label":return c.labels[b[3]]}}else if(this.ax[b[1]]){c=this.zi[b[1]];
switch(b[2]){case "task":return c.ij.length==b[3]*1;case "currentTask":return c.ij.length;default:return h}}}},wJa:function(a,c){if(c==sc.gja.DEFEATED){b.enemy=a.Zm||q;b.amount=1;this.L8("KILL",b)}},AGb:function(a){if(a){b.area=a;this.L8("LANDMARK",b)}},Ab:function(a,c,i){if(a==sc.q.T)if(c==sc.dd.Pja){b.item=i.id;b.amount=i.zc;this.L8("COLLECT",b)}else if(c==sc.dd.Owa){b.item=i.id;b.amount=-i.zc;this.vLa("COLLECT",b)}else if(c==sc.dd.A9){b.item=i;b.amount=-1;this.vLa("COLLECT",b)}else if(c==sc.dd.uja)if(i.zc<
0){b.item=i.id;b.amount=-1;this.vLa("COLLECT",b)}else if(i.zc>0){b.item=i.id;b.amount=1;this.L8("COLLECT",b)}},Eqb:function(a){if(a.Qh){var b=sc.q.T,c=a.Qh;if(c.exp){a=b.MW(c.exp.exp,a.aa,c.exp.bonus,h,sc.IV.WV);sc.pa.bc("quests","exp",a)}if(c.money){b.Rla(c.money);sc.pa.bc("quests","money",c.money||0)}if(c.cp){a=c.cp.element;if(a=="ALL_ELEMENTS"){b.PW(c.cp.amount,sc.ha.HEAT,y,h);b.PW(c.cp.amount,sc.ha.COLD,y,h);b.PW(c.cp.amount,sc.ha.SHOCK,y,h);b.PW(c.cp.amount,sc.ha.WAVE,y,h);sc.pa.bc("quest","cp",
c.cp.amount)}else{b.PW(c.cp.amount,a=="ALL"?-1:sc.ha[a],a=="ALL",h);sc.pa.bc("quest","cp",c.cp.amount*(a=="ALL"?5:1))}}if(c.items)for(a=0;a<c.items.length;a++){b.sA(c.items[a].id,c.items[a].amount,h);sc.pa.bc("quests","rewards",1)}}},eeb:function(a,b){a.timeStamp=sc.pa.Qf("player","playtime")+b},jXa:function(a,b,c){a.location.Lb=sc.map.XEa();a.location.map=c?sc.map.lFa(c):sc.map.Xoa(h);a.timeStamp=sc.pa.Qf("player","playtime");a.Ad=b||q},Lrb:function(a){return this.ax[a.id]},isb:function(){this.zi=
{};var a=ig.Yh.get("quests"),b;for(b in a)this.zi[b]=new sc.JSa(a[b],b);ig.EV&&ig.log("%cDATABASE: %cLoaded Static Quests: \n%O","color:orange","",this.zi)},Fu:function(a){var b={};b.focusQuest=this.Fi;b.markedQuests=ig.copy(this.Qp);b.finished=ig.copy(this.ax);b.solvedQueue=ig.copy(this.hM);var c={},j=q,k;for(k in this.zi){j=this.zi[k];j.timeStamp>0&&(c[k]={time:j.timeStamp,location:{area:j.location.Lb.data,map:j.location.map.data},character:j.Ad})}b.locale=c;c=[];j=this.pk.length;for(k=q;j--;){k=
this.pk[j];c[j]=k.oD()}b.states=c;a.quests=b},Bt:function(a){(a=a.quests)||(a={});this.Fi=a.focusQuest==g?-1:a.focusQuest;this.Qp=a.markedQuests||[];if(this.Qp.length==0)this.Fi=-1;else for(var b=0;b<this.Qp.length;b++)if(!this.zi[this.Qp[b]]){this.Qp.length=0;this.Fi=-1}this.hM=a.solvedQueue||[];this.y2=0;var c=q,b=a.locale,j;for(j in b)if(this.zi[j]){c=this.zi[j];c.location.Lb=new ig.Ra(b[j].location.area||"???");c.location.map=new ig.Ra(b[j].location.map||"???");c.timeStamp=b[j].time;c.Ad=b[j].character?
b[j].character:q}this.ax=a.finished||{};j=a.states||[];this.hq={};this.pk.length=0;for(var k=q,l=y,m=[],b=0;b<j.length;++b){a=j[b];if(c=this.zi[j[b].id]){if(c.ij.length!=a.completed.length){l=h;k=new sc.lka(c);m.push(c)}else{k=new sc.lka(c,h);k.kMa(a)}if(!k.Jp){this.hq[c.id]=this.pk.length;this.pk.push(k)}}else l=h}if(!this.pk[this.Fi])this.Fi=-1;for(c in this.ax)this.zi[c]||delete this.ax[c];if(l){for(b=m.length;b--;)this.Evb(m[b]);ig.r.cBa(ig.lang.get("sc.gui.loading.questUpdate"))}sc.pa.Ni("quests",
"solvedTotal",this.V4(h));sc.P.Ga(this,sc.Nk.yV,-1E5)},Evb:function(a){if(a=a.ij[0].mw)for(var c=a.length;c--;)if(this.Lr(a[c])){b.quest=a[c];b.value=h;this.L8("QUEST",b)}}});sc.lka=ig.Ca.extend({Jb:q,Xb:[],ef:0,sS:0,Jp:y,labels:{},f:function(a,b){this.Jb=a;!b&&this.WJ()},B4:function(a){for(var a=a.xE,b=a.length;b--;){a[b].A4&&a[b].A4();sc.pa.bc("quests","subtasks",1);sc.pa.bc("quests","subtasks"+a[b].type,1)}},WJ:function(a){var b=this.Jb.ij,c;for(c in this.labels)this.labels[c]=y;this.Xb.length=
0;c=q;for(var j=h,k=y,l=0;l<b.length;l++){c=b[l].xE;this.Xb[l]=[];for(var j=h,m=c[n],n=0;n<c.length;n++){m=c[n];this.Xb[l][n]={};m.WJ(this.Xb[l][n],this.labels);m.IS(this.Xb[l][n])||(j=y)}if(j){if(!k){this.ef++;this.sS=this.ef;if(this.ef>=2){sc.pa.bc("quests","tasks",1);this.B4(b[this.ef-2])}}}else k=h}if(this.ef>this.Xb.length-1){this.sS=this.ef=this.Xb.length;this.B4(b[this.ef-1]);this.Xb.length>=2&&this.B4(b[this.ef-2]);this.Jp=h;sc.pa.bc("quests","tasks",1);!a&&sc.dc.G_(sc.Nk.Aja,this,h)}},Jz:function(a,
b,c){if(!(this.ef>=this.Xb.length)){this.Fma(a,b,this.ef)?this.e4a():sc.dc.G_(sc.Nk.Jya,this);if(c&&this.ef>0)if(this.Fma(a,b,this.ef-1))sc.dc.G_(sc.Nk.Jya,this);else{a=this.Jb.ij[this.ef];this.ef=this.ef-1;sc.pa.RH("quests","tasks",1);for(b=a.length;b--;){sc.pa.RH("quests","subtasks",1);sc.pa.RH("quests","subtasks"+a[b].type,1)}sc.dc.G_(sc.Nk.vya,this)}}},e4a:function(){if(this.ef>=this.Xb.length-1){this.sS=this.ef=this.Xb.length;this.B4(this.Jb.ij[this.ef-1]);this.Xb.length>=2&&this.B4(this.Jb.ij[this.ef-
2]);this.Jp=h;sc.pa.bc("quests","tasks",1);sc.dc.G_(sc.Nk.Aja,this)}else{var a=this.sS!=this.ef;this.ef++;this.sS=this.ef;this.ef>=2&&this.B4(this.Jb.ij[this.ef-2]);sc.pa.bc("quests","tasks",1);a||sc.e.xF({type:"QUEST",task:this.ef-1,quest:this.Jb.id});sc.dc.G_(sc.Nk.Jka,this);this.eCb(this.ef)&&(this.Fma("COLLECT",q,this.ef,h)||this.Fma("LANDMARK",q,this.ef,h))&&this.e4a()}ig.r.Yj()},yJb:function(a){if(!(a>=this.ef)){for(var b=this.ef;b>a;){b--;for(var c=this.Jb.ij[b].xE,j=c.length;j--;){var k=c[j];
k.reset&&k.reset(this.J2a(j,b),this.labels);sc.pa.RH("quests","subtasks",1);sc.pa.RH("quests","subtasks"+k.type,1)}sc.pa.RH("quests","tasks",1)}this.ef=b;sc.dc.G_(sc.Nk.vya,this)}},eCb:function(a){return this.Jb.ij[a].f_a},qbb:function(){return this.Jb.ij[Math.max(this.ef-1,0)].pbb},Fma:function(a,b,c,j){for(var c=Math.max(0,c),k=this.Jb.ij[c].xE,l=k.length,m=q,n=this.labels,o=q,t=h;l--;){m=k[l];o=this.J2a(l,c);m.type==a&&m.Jz(o,b,n,j);m.IS(o)||(t=y)}return t},TDb:function(a){var b=this.Jb.ij[this.ef].xE[a];
return b?b.IS(this.Xb[this.ef][a]):y},K1a:function(a,b){var c=this.Jb.ij[this.ef].xE[a];return c?c.gda(this.Xb[this.ef][a],b):0},YEa:function(){return this.Jb.ij[this.ef]},J2a:function(a,b){return this.Xb[b==g?this.ef:b][a]},ek:function(){return this.ef>=this.Xb.length},oD:function(){var a={};a.id=this.Jb.id;a.task=this.ef;a.highest=this.sS;a.finished=this.Jp;a.completed=ig.copy(this.Xb);a.labels=ig.copy(this.labels);return a},kMa:function(a){this.Jp=a.finished||y;this.ef=a.task||0;this.sS=a.highest;
this.Xb=a.completed;var a=a.labels,b;for(b in a)this.labels[b]=a[b]}});sc.Nk={};sc.Nk.V0=0;sc.Nk.Jya=1;sc.Nk.Jka=2;sc.Nk.vya=3;sc.Nk.KQb=4;sc.Nk.Aja=5;sc.Nk.mlb=6;sc.Nk.yV=7;ig.Vf(function(){return sc.dc=new sc.dmb})});ig.J=h;
ig.N("game.feature.quest.quest-steps").O("impact.base.action","impact.base.entity","impact.base.event","game.feature.quest.quest-model","game.feature.menu.gui.quests.quest-misc").K(function(){ig.oa.CREATE_QUEST=ig.qa.extend({yf:q,t:new ig.u({attributes:{name:{c:"LangLabel",d:"Name of the quest",Zka:h},aa:{c:"Number",d:"Level of the quest"},description:{c:"LangLabel",d:"Starting description text",gs:h,Zka:h,lla:70},iSb:{c:"LangLabel",d:"Ending description text",gs:h,Zka:h,lla:70},Qh:{c:"QuestRewards",
d:"The rewards the player gets for completing the quest.",xc:h},ij:{c:"QuestTaskList",d:"The tasks to complete"}},label:function(){return"<b style='color: limegreen'>CREATE QUEST</b> name: <i>"+new ig.Ra(this.name)+"</i>, description: <i>"+new ig.Ra(this.description)+"</i>, tasks: <i>"+(this.ij?this.ij.length:0)+"</i>"}}),f:L("yf"),start:function(){sc.dc.Fwb(this.yf)}});ig.oa.START_STATIC_QUEST=ig.qa.extend({Jb:q,t:new ig.u({attributes:{Jb:{c:"QuestNameSelect",d:"The quest to start"}},label:function(){return"<b style='color: limegreen'> START STATIC QUEST </b> <i>"+
this.Jb+"</i>"}}),f:function(a){this.Jb=a.quest||""},start:function(){sc.dc.VXa(this.Jb)}});ig.oa.SOLVE_QUEST_CONDITION=ig.qa.extend({g7:q,label:q,t:new ig.u({attributes:{Jb:{c:"QuestLabelSelect",d:"The label to set to active"}},label:function(){return"<b style='color: limegreen'> SOLVE QUEST CONDITION </b> <i>"+wmPrint("QuestLabelSelect",this.Jb)+"</i>"}}),f:function(a){this.g7=a.quest.quest;this.label=a.quest.label||q},start:function(){sc.dc.AMb(this.g7,this.label)}});ig.oa.UPDATE_QUEST_LOCATION=
ig.qa.extend({g7:q,t:new ig.u({attributes:{Jb:{c:"Quest",d:"the quest to update. ONLY WORKS IF QUEST IS ACTIVE!"}},label:function(){return"<b style='color: limegreen'> UPDATE QUEST LOCATION </b> <i>"+this.Jb+"</i>"}}),f:function(a){this.g7=a.quest},start:function(){console.log(this.g7);sc.dc.FOb(this.g7)}});ig.oa.RESET_QUEST_TASK=ig.qa.extend({Jb:q,index:-1,t:new ig.u({attributes:{Jb:{c:"Quest",d:"The quest on which the index should be reset",bh:"Quest"},ik:{c:"TaskIndex",d:"The quest task to reset to"}}}),
f:function(a){this.Jb=a.quest||q;this.index=a.task==g?-1:a.task},start:function(){this.index==g||this.index<0||sc.dc.tLa(this.Jb,this.index)}});ig.oa.OPEN_QUEST_DIALOG=ig.qa.extend({Jb:q,KRb:q,cj:q,t:new ig.u({attributes:{Jb:{c:"Quest",d:"The quest to open",oRb:h},cj:{c:"Character",d:"Character to use as quest giver, override default and can be used in event triggers.",I:h},map:{c:"Maps",d:"Map to show instead of the automated one",I:h}},NF:function(a){switch(a){case "accepted":return"on accept";
case "declined":return"on decline";case "_end":return"end quest dialog"}return"???"}}),h2:q,t2:q,f:function(a){this.Jb=sc.dc.zi[a.quest];this.cj=a.npc||q;this.map=a.map||q},eB:function(){return["accepted","declined"]},start:function(a,b){this.h2=this.cj||b.data.character||q;if(this.map)this.t2=this.map||b.data.mapName||q;a.Xb=y;a.z2=sc.q.message.Npa();a.Le=a.z2?0.2:0;a.z2&&sc.q.message.BNa()},ya:function(a){if(a.Le>=0){a.Le=a.Le-ig.i.Sa;if(a.Le<0){sc.q.YK();sc.q.Ss=h;var b=new sc.KSa(this.Jb,function(b){a.Ctb=
b;a.Xb=h}.bind(this),y,this.h2,this.t2);ig.X.vd(b)}}if(a.Xb){sc.q.Ss=y;a.z2&&sc.q.message.RMa()}return a.Xb},Lv:function(a){return a.Ctb?this.uf.accepted||this.Ok:this.uf.declined||this.Ok}});ig.oa.FINISH_STATIC_QUEST=ig.qa.extend({Jb:q,t:new ig.u({attributes:{Jb:{c:"QuestNameSelect",d:"The label to set to solve"}},label:function(){return"<b style='color: limegreen'> OPEN QUEST DIALOG </b> <i>"+this.Jb+"</i> "}}),f:function(a){this.Jb=sc.dc.zi[a.quest]},start:function(){sc.dc.nab(this.Jb)}});ig.oa.RESOLVE_FINISHED_QUESTS=
ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(a){a.n=0;sc.q.YK();sc.q.Ss=h},ya:function(a){if(!a.n||ig.ma.get("tmp._questRewardsFinished")){if(a.n){a.n=a.n-ig.i.ja;if(a.n<=0)a.n=0;return y}if(!sc.dc.QHb()){sc.q.Ss=y;return h}a.n=0.1}return y}})});ig.J=h;
ig.N("game.feature.quest.plug-in").O("game.feature.quest.quest-types","game.feature.quest.quest-steps","game.feature.quest.quest-model").K(function(){if(window.Ed){wm.Ek.push("game.feature.quest.editors.quest-editors");wm.Ek.push("game.feature.quest.editors.quest-hub-editors");wm.Um(/QUEST/,"limegreen")}});ig.J=h;
ig.N("game.feature.party.party-steps").O("impact.base.action","impact.base.event","game.feature.party.party").K(function(){ig.oa.SET_CONTACT_ONLINE=ig.qa.extend({Qj:q,bz:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},bz:{c:"Boolean",d:"True if online."}}}),f:function(a){this.Qj=a.member;this.bz=a.online},start:function(){sc.sa.dab(this.Qj,this.bz)}});ig.oa.SET_MEMBER_LOCKED=ig.qa.extend({Qj:q,NN:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to change",U:sc.Tt},
NN:{c:"Boolean",d:"True if locked."}}}),f:function(a){this.Qj=a.member;this.NN=a.locked},start:function(){sc.sa.cLb(this.Qj,this.NN)}});ig.oa.SET_CONTACT_TYPE=ig.qa.extend({Qj:q,status:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},status:{c:"String",d:"Status to set",U:sc.KL}}}),f:function(a){this.Qj=a.member;this.status=sc.KL[a.status]||0},start:function(){sc.sa.XLa(this.Qj,this.status)}});ig.oa.SET_CONTACT_TYPE_ALL=ig.qa.extend({status:q,t:new ig.u({attributes:{status:{c:"String",
d:"Status to set",U:sc.KL}}}),f:function(a){this.status=sc.KL[a.status]||0},start:function(){for(var a in sc.sa.Gn)sc.sa.XLa(a,this.status)}});ig.oa.ADD_PARTY_MEMBER=ig.qa.extend({Qj:q,cj:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},cj:{c:"NPC",d:"NPC that will turn into the party member",I:h},sz:{c:"Boolean",d:"If true: skip NPC show effect"}}}),f:function(a){this.Qj=a.member;this.cj=a.npc;this.sz=a.skipEffect||y},start:function(a,b){var f=ig.Ja.rd(this.cj,b);sc.sa.jYa(this.Qj,
f,y,this.sz)}});ig.oa.SET_PARTY_MEMBER_LEVEL=ig.qa.extend({Qj:q,aa:q,exp:q,Dia:y,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},aa:{c:"Integer",d:"Level to set"},exp:{c:"Integer",d:"Exp to set"},Dia:{c:"Boolean",d:"If true, also update equipment of party member"}}}),f:function(a){this.Qj=a.member;this.aa=a.level||1;this.exp=a.exp||0;this.Dia=a.updateEquipment||y},start:function(){sc.sa.gS(this.Qj).GH(this.aa,this.exp,this.Dia,h)}});ig.oa.SET_PARTY_MEMBER_SP_LEVEL=ig.qa.extend({t:new ig.u({attributes:{Qj:{c:"String",
d:"Party member to add",U:sc.Tt},aa:{c:"String",d:"Type of Core.",U:{"0":"0 SP",1:"4 SP",2:"8 SP",3:"12 SP",4:"16 SP"}}}}),f:function(a){this.Qj=a.member;this.aa=a.level},start:function(){sc.sa.gS(this.Qj).DO(this.aa)}});ig.oa.SET_PARTY_MEMBER_ALL_ELEMENTS=ig.qa.extend({t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},LQ:{c:"Boolean",d:"If true: has all elements. If false: has all elements player has"}}}),f:function(a){this.Qj=a.member;this.LQ=a.allElements},start:function(){sc.sa.gS(this.Qj).nKb(this.LQ)}});
ig.oa.REMOVE_PARTY_MEMBER=ig.qa.extend({Qj:q,cj:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to add",U:sc.Tt},cj:{c:"NPC",d:"NPC that will turn into the party member",I:h},sz:{c:"Boolean",d:"If true: skip NPC show effect"}}}),f:function(a){this.Qj=a.member;this.cj=a.npc;this.sz=a.skipEffect||y},start:function(a,b){var f=ig.Ja.rd(this.cj,b);sc.sa.eJb(this.Qj,f,this.sz)}});ig.oa.REVIVE_PARTY_MEMBER=ig.qa.extend({Qj:q,t:new ig.u({attributes:{Qj:{c:"String",d:"Party member to revive",U:sc.Tt}}}),
f:function(a){this.Qj=a.member},start:function(){sc.sa.gS(this.Qj).cZ()||sc.sa.yLa(this.Qj)}});ig.oa.SET_PARTY_AI=ig.qa.extend({t:new ig.u({attributes:{FF:{c:"Number",d:"Battie AI Factor: 0=default, 1=always the best possible decision.",I:h},N2:{c:"Number",d:"Aggressiveness Factor: 0=default, 1=attacks as often as possible",I:h},aP:{c:"Number",d:"Influence enemy targeting behavior: 0=default, 1=enemies will always target party members",I:h}}}),f:function(a){if(a.battle!==g)this.FF=a.battle;if(a.aggressive!==
g)this.N2=a.aggressive;if(a.targeting!==g)this.aP=a.targeting},start:function(){if(this.FF!==g)sc.sa.yF.FF=this.FF;if(this.FF!==g)sc.sa.yF.N2=this.N2;if(this.aP!==g)sc.sa.yF.aP=this.aP}});ig.oa.PARTY_KEEP_MAP_DUNGEON=ig.qa.extend({t:new ig.u({attributes:{}}),f:J(),start:function(){sc.sa.fEb()}});var a={RANDOM:function(a){return a[Math.floor(a.length*Math.random())]},LOWEST_HP:function(a){for(var b=a.length,f=q,i=0;b--;){var j=a[b];if(!f||i>j.W.Gy()){i=j.W.Gy();f=j}}return f},FIRST:function(a){return a[0]},
SECOND:function(a){return a[1]},HAS_NO_PROXY:function(a,b){for(var f=a.length;f--;){var i=a[f];if(!sc.iwa.kCb(i,b))return i}return q}},b=[];ig.la.SET_PARTY_TEMP_TARGET=ig.ta.extend({t:new ig.u({attributes:{Fea:{c:"String",d:"Kind of temp target",U:a},xGa:{c:"Boolean",d:"If true: also include self as possible target"},p0a:{c:"Array",d:"Only for enemy: filter for enemy type",I:h,Xt:{c:"EnemySearch"}},p$a:{c:"StringExpression",d:"Search Key used for some selection criteria of 'kind'"}}}),f:function(b){this.Fea=
a[b.kind]||a.PLAYER;this.xGa=b.includeSelf||y;this.p0a=b.enemyFilter||q;this.p$a=b.selectKey||q},start:function(a){var d=a.te();b.length=0;if(d.sa==sc.pd.PLAYER){var f=this.xGa;(f||!d.Ah)&&!ig.r.cb.Wf()&&b.push(ig.r.cb);var i=sc.sa.Xk(0);i&&((f||i!=d)&&!i.Wf())&&b.push(i);(i=sc.sa.Xk(1))&&((f||i!=d)&&!i.Wf())&&b.push(i)}else{f=this.p0a;this.xGa&&b.push(d);for(var i=sc.Ta.o1a(sc.pd.ENEMY),j=i.length;j--;){var k=i[j];k!=d&&!(f&&f.indexOf(k.Zm)==-1)&&b.push(k)}}if(b.length){d=this.Fea(b,this.p$a);a.Sq=
d}else a.Sq=q}});ig.la.CONSUME_PARTY_SANDWICH=ig.ta.extend({f:function(a){this.z_=a.sandwich},start:function(a){a.bna&&a.bna(this.z_)}})});ig.J=h;
ig.N("game.feature.party.party-member-model").O("game.feature.model.base-model","game.feature.combat.model.combat-params","game.feature.combat.entities.ball","game.feature.player.player-config","game.feature.achievements.stats-model").K(function(){sc.QP={wP:1,vV:3,DL:4,bs:5};var a=[{ex:0.25},{ex:0.5},{ex:0.7}],b=[{aa:1,count:[1,0,0]},{aa:10,count:[2,0,0]},{aa:20,count:[3,1,0]},{aa:30,count:[4,2,0]},{aa:40,count:[5,3,1]},{aa:50,count:[6,4,1]},{aa:60,count:[7,5,2]}];sc.tlb=ig.Ca.extend({Uo:[],Gp:{},
fd:q,mb:q,pa:q,W:q,name:q,nJ:q,Ad:q,YA:0,aa:1,exp:0,Xi:q,W_:0,LQ:y,sb:{head:-1,Bh:-1,Fh:-1,uh:-1,ph:-1},Ub:{elemFactor:[1,1,1,1]},xy:q,wy:q,tv:q,$i:{},v_:0,qe:[],gx:{z_:[0,0,0],tJ:0,GIa:h},sg:0,f:function(a){this.W=new sc.mja;this.fd=new sc.VV(a);this.fd.Yt(this)},Eq:function(){var a=this.fd;this.name=a.name;this.nJ=a.nJ;this.Xi=a.Xi;this.ad=a.ad;this.Ad=a.Ad;this.yna=new sc.lI(a.Ad.name,"DEFAULT");this.mb=a.mb;this.ro=a.ro;this.pa=a.pa;this.tv=a.tv;this.$i=a.$i;this.lua=a.lua;this.pw()},sY:function(){return this.fd.MY},
mz:function(a,b){sc.dF.sb(this.sb,a,b)},GZa:function(){for(var a in this.sb)this.sb[a]=-1},rdb:function(){if(this.OXa(this.aa)){this.pw();return h}return y},OXa:function(a){a=sc.dF.cma(this,this.fd.cma,this.YA,a,y,y);if(a>this.YA){this.YA=a;return h}return y},GK:function(a){this.sg=a;this.W.E7(this.$i[this.sg].Ub);this.W.xha(this.$i[this.sg].So);sc.P.Ga(this,sc.QP.bs)},pw:function(){sc.dF.YZa(this.Ub,this.pa,this.aa);this.xy=ig.copy(this.Ub);this.wy={};sc.dF.Idb(this.sb,this.xy,this.wy);for(var a in sc.ha)this.$i[sc.ha[a]].wKa();
this.qe.length=0;sc.xo.Mub(this.qe,this.aa,this.lua);for(var b=this.qe.length;b--;)this.qe[b].cX(this.$i);this.tv.update(this.xy,this.wy);for(a in sc.ha)this.$i[sc.ha[a]].update(this.xy,this.wy);this.W.E7(this.$i[this.sg].Ub);this.W.xha(this.$i[this.sg].So);sc.P.Ga(this,sc.QP.bs)},cZ:function(){return this.v_==0},Tra:function(){this.v_=30},tO:function(){this.W.tO();this.v_=0;this.xLa()},update:function(){if(this.gx.tJ){this.gx.tJ=this.gx.tJ-ig.i.ja;if(this.gx.tJ<=0||!sc.q.Es())this.gx.tJ=0}this.gx.GIa&&
!sc.q.Es()&&this.xLa();if(this.v_){this.v_=this.v_-ig.i.ja;if(this.v_<=0||!sc.q.Es()){sc.Ep.Ws("PARTY_MEMBER_EVENT",{member:[this.name],eventType:"REVIVED"});sc.sa.yLa(this.name)}}},kG:function(){return this.Ad?this.Ad.data&&this.Ad.data.name?ig.Ra.ic(this.Ad.data.name):q:q},BTb:function(){return this.Ad?this.Ad.data&&this.Ad.data.realname?ig.Ra.ic(this.Ad.data.realname):q:q},xs:function(a){return this.$i[this.sg].xs(a)||this.tv.xs(a)},KEa:function(a){return this.$i[this.sg].KEa(a)},TEa:function(a){return this.$i[this.sg].n1a(a)},
Soa:function(){return this.fd.ro},oD:function(){return{level:this.aa,equipLevel:this.YA,exp:this.exp,spLevel:this.W_,allElements:this.LQ}},kMa:function(a){a=a||{};this.aa=a.level||1;this.exp=a.exp||0;this.YA=0;this.LQ=a.allElements||y;this.DO(a.spLevel||1);this.GZa();this.OXa(a.equipLevel||1);this.pw();this.xLa()},reset:function(){this.aa=1;this.YA=this.exp=0;this.LQ=y;this.tO();this.DO(2);this.GZa();this.fd.loaded&&this.pw()},DO:function(a){if(!(a<0||a>=sc.q$.length)){this.W_=a;this.W.nMa(sc.q$[a])}},
nKb:L("LQ"),MW:function(a,b,f,i,j){a=sc.dF.Wma(a,this.aa,b,g,g,j);if(!(this.aa>=sc.HQa)){this.exp=this.exp+a;if(this.exp>=sc.yP){this.aa=this.aa+Math.floor(this.exp/sc.yP);this.exp=this.aa>=sc.HQa?0:this.exp%sc.yP;this.pw();sc.P.Ga(this,sc.QP.DL)}sc.P.Ga(this,sc.QP.vV)}},GH:function(a,b,f,i){if(!i||this.aa<a||this.aa==a&&this.exp<b){this.exp=b;this.aa=a}this.pw();f&&this.rdb();sc.P.Ga(this,sc.QP.DL);sc.P.Ga(this,sc.QP.vV)},mCb:function(){for(var a=this.gx.z_,b=a.length;b--;)if(a[b])return h;return y},
avb:function(){return this.mCb()&&!this.gx.tJ},xLa:function(){this.gx.GIa=y;for(var a=this.aa,d=b.length;d--;){var f=b[d];if(a>=f.aa){for(a=this.gx.z_.length;a--;)this.gx.z_[a]=f.count[a];break}}},lzb:function(b){var d=b,f=d?-1:1;do{if(this.gx.z_[d])return d;d=d+f;d<0&&(d=a.length-1);d>a.length-1&&(d=0)}while(d!=b);return y},bna:function(b,d){d.ex({value:a[b].ex});this.gx.z_[b]--;this.gx.tJ=10;this.gx.GIa=h},jBb:function(a){var b="SANDWICH";this.Xi.c1a&&(b=this.Xi.c1a[a]);return new ig.Xe("consumeItem",
[{type:"SET_FACE",face:"SOUTH"},{type:"WAIT",time:0.3},{type:"SHOW_FOOD_ICON",icon:b,offset:this.Xi.Myb},{type:"SHOW_ANIMATION",anim:"itemFetch",wait:h},{type:"SHOW_ANIMATION",anim:"itemHold"},{type:"WAIT",time:0.2},{type:"CHANGE_FOOD_ICON",state:"BUBBLE",offset:this.Xi.Lyb},{type:"PLAY_SOUND",sound:"media/sound/move/eat.ogg",volume:1},{type:"SHOW_ANIMATION",anim:"itemEatFast"},{type:"WAIT",time:0.8},{type:"CHANGE_FOOD_ICON",state:"DONE"},{type:"CONSUME_PARTY_SANDWICH",sandwich:a},{type:"SHOW_ANIMATION",
anim:"itemEffect"},{type:"WAIT",time:0.6}])}})});ig.J=h;
ig.N("game.feature.party.entities.party-member-entity").O("game.feature.player.entities.player-base").K(function(){function a(a){if(a>0){a=a-ig.i.ja;a<=0&&(a=0)}return a}var b={ATTACK:{hs:"ATTACK_SPECIAL",zq:0},THROW:{hs:"THROW_SPECIAL",zq:1,M_a:h},GUARD:{hs:"GUARD_SPECIAL",zq:2},DASH:{hs:"DASH_SPECIAL",zq:3,M_a:h}},c=["ATTACK","THROW","GUARD","DASH"],d=[],f=[0.2,0.25,0.3],i={IDLE:{start:function(a,b,c,d){a.Iz(y);d.$Da=Math.random()*0.2},update:function(a,b,c,d){Vec2.Oa(a.b.wb,0,0);if(sc.q.Qv()&&
sc.sa.tG("BEHAVIOUR").Una||sc.sa.PS){c.F6=0;d=sc.sa.PS?200:320;return c.eb<(sc.sa.PS?64:120)||c.eb>d?i.uTa:i.QSa}if(c.eb>48)return i.SQa;if(c.eb<4)return i.Ueb;if(!a.yfa){c=c.VM;if(b.Ah&&Vec2.Qb(c,b.face)<1*Math.PI)c=b.face;a=Vec2.Qb(c,a.face);d.$Da=a>Math.PI*0.05?d.$Da+ig.i.ja:Math.random()*0.2;if(a>Math.PI*0.5||d.$Da>0.25)return i.QSa}}},uTa:{start:function(a){a.yfa=y;a.Iz(y);a.oz(12);a.n.move=4},update:function(a,b,c){a.b.jf=1;c.F6=0;if(a.hf.path.nx()||a.n.move<=0)return i.IDLE;a.Jg||c.F6>3&&a.gw()}},
Ueb:{start:function(a){a.Iz(y);a.yfa=y;a.b.jf=0.5;a.oz(2)},update:function(a,b,c){a.lu=h;Vec2.assign(a.face,c.VM);if(c.eb>=16){Vec2.Oa(a.b.wb,0,0);return i.IDLE}if(a.hf.path.nx())return i.IDLE}},QSa:{start:function(a){a.Iz(y)},update:function(a,b,c){var d=c.VM;if(b.Ah&&Vec2.Qb(d,b.face)<1*Math.PI)d=b.face;Vec2.GB(a.face,d,Math.PI*2*ig.i.ja*2);Vec2.Oa(a.b.wb,0,0);if(!(sc.q.Qv()&&sc.sa.tG("BEHAVIOUR").Una||sc.sa.PS)&&c.eb>48)return i.SQa;if(Vec2.Qb(d,a.face)<Math.PI*0.05)return i.IDLE}},SQa:{start:function(a){a.yfa=
y;a.Iz(y);a.oz(1)},update:function(a,b,c){if(sc.q.Qv()&&sc.sa.tG("BEHAVIOUR").Una||sc.sa.PS)return i.uTa;b=a==sc.sa.Xk(1)?120:80;b=c.eb>b?1:Math.max(0.25,c.eb/b);a.Jg&&(b=1);a.b.jf=b;a.hf.path.wz=b;if(a.hf.path.nx())return i.IDLE;a.Jg||c.F6>3&&a.gw()}},iI:{start:function(a){a.DK();a.Hm.Aa=h},update:function(a,b,c){Vec2.Oa(a.b.wb,0,0);if(a.target&&!sc.q.oe()){var d=a.W.Gy(),f=0.5;sc.tn.Bea(b,a)&&(f=0.33);if(d<=f&&a.q.avb())return i.ufb;d=sc.sa.tG("TARGET").ZJa&&a.target==ig.r.cb.vCa.BHa;if((b=ig.navigation.j5a(a,
b,a.q.Xi.nK+40,h))&&!d&&!sc.sa.tG("BEHAVIOUR").mFb&&!a.n.Cn){if(sc.tn.ZLb(a.target,a)){a.n.Cn=0.2;return i.XPa}a.n.wfa=0;a.vva();if(a.W.rpa()){c=sc.tn.Bea(a.target,a)?1:a.W.iBb();c=c*sc.sa.tG("ARTS").yh;Math.random()<c&&a.eKb()}c=a.q.Xi.Kcb;a.KM?c=a.KM.M_a?1:0:sc.tn.meb(a.target)?c=0:sc.tn.oeb(a.target)&&(c=1);return Math.random()<c?i.vfb:i.Hjb}if(!b||c.eb<a.q.Xi.iK||c.eb>a.q.Xi.nK+40)return i.tfb;if(a.n.move<=0&&a.n.Cn>0.5){a.n.move=0.5+Math.random()*0.5;return i.XPa}}}},XPa:{start:function(a,b,
c,d){a.Iz(h);a.Hm.Aa=h;if(sc.tn.jCb(b,a))a.Hm.offset=0.5;a.b.jf=a.q.Xi.jbb||1;a.oz(5);a.n.move=1;d.jt=0},update:function(a){if(a.hf.path.nx()||a.n.move<=0)return i.iI}},ufb:{start:function(a,b,c,d){a.Iz(y);a.Hm.Aa=y;a.b.jf=1;a.oz(11);a.n.move=1;d.J3a=y},update:function(a,b,c,d){if(d.J3a){if(!a.ed)return i.iI}else(a.hf.path.nx()||a.n.move<=0)&&this.bNb(a,c,d)},bNb:function(a,b,c){var b=0,d=a.W.Gy();d<0.25?b=2:d<0.33&&(b=1);c.J3a=h;c=a.q.lzb(b);if(c!==y){c=a.q.jBb(c);a.Zf(c)}}},vfb:{start:function(a,
b,c,d){a.Iz(y);a.Hm.Aa=y;a.b.jf=1;if(sc.tn.q3a(a.target,a)){a.oz(9);a.n.move=2}else if(sc.tn.r3a(a.target,a)){a.oz(10);a.n.move=2}else{a.Iz(h);a.Hm.Aa=h;a.b.jf=0.7;a.oz(6);a.n.move=1}d.jt=0},update:function(a,b,c,d){if(d.jt==0){if(a.hf.path.nx()||a.n.move<=0){a.Hm.Aa=h;a.Iz(h);this.Wbb(a,c,d)}}else if(d.jt<a.q.Xi.eOa&&!a.n.action)this.Wbb(a,c,d);else if(d.jt==a.q.Xi.eOa&&!a.n.action)if(a.KM)a.Nbb();else{a.qLa();return i.iI}},Wbb:function(a,b,c){a.Ei();c.jt++;var d=a.q.xs(sc.hl.THROW_NORMAL_REV),c=
c.jt==1?"THROW_CHARGED":!d||c.jt%2==1?"THROW_NORMAL":"THROW_NORMAL_REV";Vec2.assign(a.face,b.VM);Vec2.assign(a.Uua,b.VM);a.setAttribute("dashDir",a.face);a.LR(c)}},tfb:{start:function(a,b,c,d){a.hf.path.nea();a.b.jf=1;a.oz(3);a.n.move=1;d.S_a=h;if(a.hf.path.ida()>0)a.Hm.Aa=y},update:function(a,b,c,d){if(a.hf.path.nx()||a.n.move<=0)if(c.eb>a.q.Xi.nK+40)a.oz(3);else return i.iI;else if(d.S_a){d.S_a=y;a.Iz(y)}}},uQb:{start:function(a,b,c,d){d.jt=0},update:function(a,b,c,d){a.n.action||this.zua(a,c,d)},
zua:function(a,b,c){a.Ei();c.jt++;c=c.jt%2==1?"ATTACK":"ATTACK_REV";a.b.vl(ig.ca.VIRTUAL);Vec2.assign(a.face,b.VM);a.setAttribute("dashDir",Vec2.create());a.LR(c)}},Hjb:{start:function(a,b,c,d){a.hf.path.nea();a.Iz(y);a.b.jf=1;d.Nna=y;if(sc.tn.q3a(a.target,a)){d.Nna=h;a.oz(7)}else if(sc.tn.r3a(a.target,a)){d.Nna=h;a.oz(8)}else a.oz(4);a.n.move=3;d.jt=0},update:function(a,b,c,d){if(d.Nna){if((b=a.hf.path.nx())||a.n.move<=0){a.oz(4);d.Nna=y}}else if(d.jt==0)(b=a.hf.path.nx())||c.eb<16?this.zua(a,c,
d):c.eb<32&&a.b.vl(ig.ca.VIRTUAL);else if(d.jt<a.q.Xi.Iba&&!a.n.action){if(c.eb>a.q.Xi.oIa*2){a.qLa();return i.iI}this.zua(a,c,d)}else if(d.jt==a.q.Xi.Iba&&!a.n.action){a.qLa();return i.iI}},zua:function(a,b,c){a.Ei();c.jt++;a.b.vl(ig.ca.VIRTUAL);Vec2.assign(a.face,b.VM);a.setAttribute("dashDir",a.face);c.jt==a.q.Xi.Iba&&a.KM?a.Nbb():a.LR(c.jt==a.q.Xi.Iba?"ATTACK_FINISHER":c.jt%2==1?"ATTACK":"ATTACK_REV")}},ngb:{start:function(a,b){a.hf.path.nea();a.Iz(y);var c=ig.z1.NEUTRAL;sc.tn.A5a(b)&&(c=ig.z1.GET_AWAY);
ig.navigation.T1a(j,a,a.v0,48,c);c=a.lc(ig.Pa.BOTTOM);Vec3.sub(c,j);Vec3.Lc(c);a.n.ji=0.25;a.Hm.Aa=h;a.setAttribute("dashDir",c);a.LR("DASH")},update:function(a){if(!a.ed)return a.q5?i.iI:i.IDLE}}};Vec2.create();var j=Vec3.create(),k=["normal","battle","aiming"];sc.F1=sc.G1.extend({sa:sc.pd.PLAYER,c6:sc.pP.ORGANIC,ti:{Jm:q,pv:q},og:{me:0,n:0,GEa:new ig.ud("guard"),Hg:q,nna:q},q:q,sH:Vec2.create(),FIa:q,state:q,q5:y,bL:{VM:Vec2.create(),eb:0,F6:0},CNa:{},n:{action:0,move:0,Cn:0,wfa:0,ji:0},Uua:Vec2.create(),
KM:q,Pc:{max:0,Qa:0,n:0},f:function(a,b,c,d){this.parent(a,b,c,d);this.ti.Jm.kH("collType",ig.ca.SEMI_IGNORE);this.ti.FF.kH("collType",ig.ca.SEMI_IGNORE);this.ti.pv.kH("collType",ig.ca.SEMI_IGNORE);this.ti.pv.kH("maxVel",180);this.ti.pv.kH("relativeVel",100/180);this.Mq(this.ti.Jm);this.q=sc.sa.gS(d.partyMemberName);sc.P.Wa(this.q,this);if(this.q.ad)for(a=k.length;a--;){b=k[a];this.q.ad[b]&&this.WO(b,this.q.ad[b])}this.mb=this.q.mb;this.ro=this.q.Soa();this.Bd();this.W=this.q.W;this.W.WLa(this);this.jP();
d.posOffset&&Vec2.assign(this.sH,d.posOffset);this.state=i.IDLE;this.state.start(this,ig.r.cb,this.bL,this.CNa);this.Pc.fx=new sc.hwa(this,y)},Iz:function(a){a?this.Mq(this.ti.pv):this.Mq(this.Z2a()?this.ti.FF:this.ti.Jm)},show:function(a){this.parent(a);if(!a){this.Ya.alpha=0;ig.r.G.Mf.va("showDefault",this,{align:"CENTER"});this.Zf(l)}},Ge:function(a){this.q&&sc.P.Hc(this.q,this);this.q&&this.W.Wf()&&sc.sa.JGb(this.q.name);this.parent(a)},oEb:function(a){if(!this.Ve){sc.P.Hc(this.q,this);this.q=
q;this.bY();a?this.ze():this.Zf(m)}},qLa:function(){var a;a=this.target&&sc.tn.Bea(this.target)?1:1.5+Math.random()*1.5;sc.sa.He.length==2&&(a=a*2);a=a*(1-sc.sa.yF.N2);this.n.Cn=a},pNa:function(){this.r$a();if(this.target){this.q5=h;this.n.Cn=1+Math.random()*1;this.LC(i.iI)}},bY:function(){this.Sn(q);this.q5=y;this.LC(i.IDLE)},Nbb:function(){this.Ma("charge",y,q,h);this.eo=h;this.n.action=-1;this.Pc.max=1;this.Pc.aa=0;var a=this.q.TEa(sc.hl[this.KM.hs+this.Pc.max]);if(a&&sc.options.get("party-combat-arts")!=
sc.dka.NONE){a=new sc.gW(this,a.toString(),1);a.gcb();ig.X.vd(a)}this.Q_a()},Q_a:function(){this.Pc.n=f[this.Pc.aa];this.Hm.Aa=h;this.Pc.aa++;this.Pc.fx.Ac(this.q.sg,this.Pc.aa,sc.options.get("party-combat-arts")!=sc.dka.VQa)},QBa:function(){if(this.KM){this.Pc.n=0;this.KM=q;this.Pc.fx.stop();this.eo=y}},ixb:function(){this.Pc.fx.stop();var a=this.KM.hs+this.Pc.max;this.W.cna(sc.RP[this.Pc.max-1]);this.QBa();this.LR(a);this.b.jf=1;this.Hm.Aa=y},Zf:function(a,b,c){if(!this.$w&&sc.q.oe()&&a&&a.sq){this.$w=
h;this.Iz(y)}this.parent(a,b,c)},SLa:function(a){this.n.action=a.action},XFa:function(){return this.target&&!this.target.Ve&&!this.target.Wf()&&this.target.target},r$a:function(){if(!this.XFa()){var a=sc.Ta.A2a(this);this.Sn(a)}},DK:function(){var a=sc.Ta.A2a(this);(a||!this.XFa())&&this.Sn(a)},kzb:function(){if(!this.target||!this.q||!sc.q.T.ki(sc.ng.ELEMENT_CHANGE))return sc.ha.NEUTRAL;var a=0,b=1,c=1;if(Math.random()<=sc.tn.DFa(this.target,this,1))for(var d=sc.tn.Gf(this.target),f=this.target.W&&
this.target.W.Td("elemFactor"),i=sc.Cgb+1;i--;)if(this.q.LQ||sc.q.T.xG(i)){if(i==d||this.target.o4&&this.target.o4==i)return i;if(i&&f&&f[i-1]>=b){if(f[i-1]==b){c++;if(Math.random()<1/c)continue}else c=1;a=i;b=f[i-1]}}return a},bna:function(a){this.q.bna(a,this)},vva:function(){if(this.q){var a=this.kzb();a!=this.q.sg&&this.q.GK(a)}},jP:function(){this.iU=this.W.Ag("HP_REGEN");this.QK.dJ=this.W.Ag("SPIKE_DMG");this.NNa=this.W.Ag("STUN_THRESHOLD");if(this.W)this.W.ICa=1.5+this.W.Ag("CRITICAL_DMG")},
Ab:function(a,b){a==this.q&&b==sc.QP.bs&&this.jP()},eKb:function(){for(var a=0;a<c.length;++a)d[a]=this.q.KEa(b[c[a]].hs);if(sc.tn.oeb(this.target)){d[b.ATTACK.zq]=0;d[b.DASH.zq]=0;d[b.GUARD.zq]=0}sc.tn.meb(this.target)&&(d[b.THROW.zq]=0);for(var f=[],a=d.length;a--;)d[a]>0&&f.push(a);if(f.length>0){a=f[Math.floor(Math.random()*f.length)];if(d[a])this.KM=b[c[a]]}},LC:function(a){this.state=a;this.Ei();a=this.target||ig.r.cb;this.state.start&&this.state.start(this,a,this.bL,this.CNa)},CD:function(){return!this.q||
this.su()||this.W.Wf()||this.ed&&this.ed.sq||this.ed==l},Kzb:function(a){var b=0.5;(a=a.tq())&&(b=sc.tn.DFa(a,this,1));a=sc.sa.tG("BEHAVIOUR");return(1-b)*a.kDa+b*a.jDa},Z2a:function(){return sc.q.Qv()&&!sc.sa.tG("BEHAVIOUR").Una},update:function(){if(!this.$w||!sc.q.oe()){if(this.$w){this.FIa=q;this.LC(i.IDLE);this.$w=y}this.bL.F6=ig.gl.ut(this,0)?0:this.bL.F6+ig.i.ja;this.n.Cn=a(this.n.Cn);this.n.move=a(this.n.move);this.n.action=a(this.n.action);this.n.ji=a(this.n.ji);var b=ig.r.cb;if(this.CD()){this.state=
q;this.QBa();this.n.action=0}else{if(this.Pc.n){this.Pc.n=this.Pc.n-ig.i.ja;this.Pc.n<=0&&(this.Pc.aa==this.Pc.max?this.ixb():this.Q_a())}else if(this.n.action&&!this.ed)this.n.action=0;this.state||this.LC(this.q5?i.iI:i.IDLE);if(sc.q.Qv()&&!this.Jg&&this.n.ji<=0){var c=sc.Ta.r2a(this,48,1);if(!c&&(this.target&&sc.tn.A5a(this.target,this))&&ig.qd.Fy(this.b,this.target.b)<240)c=this.target;if(c){this.n.ji=0.25;if(Math.random()<this.Kzb(c)){this.v0=c;this.LC(i.ngb)}}}if(!this.n.action&&!this.Jg)if(this.Z2a()){if(this.q5){if(!this.XFa()){this.r$a();
this.target?this.LC(i.iI):this.bY()}}else this.pNa();this.n.wfa=this.n.wfa+ig.i.ja;if(this.n.wfa>5){this.n.wfa=0;this.DK()}}else this.q5&&this.bY();b=this.target||b;ig.qd.Wk(this.b,b.b,this.bL.VM);this.bL.eb=Vec2.length(this.bL.VM);this.bL.eb=this.bL.eb-b.b.size.x/2;(b=this.state.update(this,b,this.bL,this.CNa))&&this.LC(b)}}else{this.yfa=h;this.QBa()}this.parent();this.q||this.ed||this.ze()},gw:function(a){sc.sa.tJb(this.q.name);a||ig.r.G.Mf.va("showFast",this);this.hf.path.gT=-1;this.target&&this.DK()},
oz:function(a){a==1?this.FIa!=a&&this.hf.path.C0(ig.r.cb,16,{posOffset:this.sH}):a==2?this.hf.path.ji(ig.r.cb,32):a==12?this.hf.path.tU(ig.r.cb,sc.sa.PS?100:240):this.target&&(a==3?this.hf.path.tU(this.target,this.q.Xi.nK,h):a==4?this.hf.path.C0(this.target,this.q.Xi.oIa):a==7?this.hf.path.Eta(this.target,0.5,32,80):a==8?this.hf.path.Eta(this.target,0,32,80):a==5?this.hf.path.kbb(this.target,80,16,h):a==6?this.hf.path.tU(this.target,this.q.Xi.nK-20,h):a==9?this.hf.path.Eta(this.target,0.5,this.q.Xi.nK-
20,this.q.Xi.nK+12,h):a==10?this.hf.path.Eta(this.target,0,this.q.Xi.nK-20,this.q.Xi.nK+12,h):a==11&&this.hf.path.tU(this.target,240));this.FIa=a},Nfa:function(a){if(a>5){this.hf.y4=0;this.gw()}}});var l=new ig.Xe("enemyStart",[{type:"WAIT",time:0.4}]),m=new ig.Xe("enemyStart",[{type:"SHOW_EFFECT",effect:{sheet:"teleport",name:"hideDefault"},wait:h,align:"CENTER",actionDetached:h}])});ig.J=h;
ig.N("game.feature.party.plug-in").O("game.feature.party.party","game.feature.party.party-steps","game.feature.party.party-member-model","game.feature.party.entities.party-member-entity").K(function(){window.Ed&&wm.Ek.push("game.feature.party.editors.party-editors")});ig.J=h;
ig.N("game.feature.common-event.common-event").O("impact.feature.storage.storage","game.feature.party.party").K(function(){function a(a,b){return a-b}var b=["D","E","C","B","A","S"],c=["ENTER","LEAVE"];sc.h1={CALL:{t:new ig.u({attributes:{}}),Nb:N(h)},ENEMY_ATTACKS:{t:new ig.u({attributes:{Rg:{c:"Array",d:"Types of enemy attacking",Xt:{c:"String",U:"enemies"},I:h},CVb:{c:"Integer",d:"LevelGap: Enemy Level - Player Level",I:h},DVb:{c:"Integer",d:"LevelGap: Enemy Level - Player Level",I:h},wWb:{c:"Boolean",
d:"If defined: only trigger when player started battle if true or if not player started if false",I:h},$Rb:{c:"Boolean",d:"If defined => true: only trigger when start of battle, false: only trigger when enemies join during battle",I:h}}}),FX:h,Nb:function(a,b){return a.enemies&&!b.enemies.AN(a.enemies)||a.levelGapAbove!==g&&b.levelGap<a.levelGapAbove||a.levelGapBelow!==g&&b.levelGap>a.levelGapBelow||a.playerStarted!==g&&a.playerStarted!=b.playerStarted||a.battleStarted!==g&&a.battleStarted!=b.battleStarted?
y:h}},ENEMY_DEFEATED:{t:new ig.u({attributes:{Fe:{c:"String",d:"Type of enemy defeated",U:"enemies",I:h}}}),FX:h,Nb:function(a,b){return!a.enemy||a.enemy==b.enemy}},BATTLE_OVER:{t:new ig.u({attributes:{K5:{c:"Integer",d:"Minimum amount of killed enemies"},rIb:{c:"String",d:"Minimum rank at cooldown",U:b,I:h}}}),FX:h,Nb:function(a,b){if(a.killCount>b.killCount)return y;if(a.rank){var c=sc.q.Voa(a.rank);return b.rank>=c}return h}},COOLDOWN_START:{t:new ig.u({attributes:{Rg:{c:"Array",d:"Type of enemy defeated",
Xt:{c:"String",U:"enemies"},I:h},K5:{c:"Integer",d:"Minimum amount of killed enemies"},rIb:{c:"String",d:"Minimum rank at cooldown",U:b,I:h},JWb:{c:"String",d:"Rank that was reached since last cooldown",U:b,I:h}}}),Nb:function(a,b){if(a.enemies&&!b.enemies.AN(a.enemies))return y;if(a.rankReached){var c=sc.q.Voa(a.rankReached);if(b.rank<c||b.prevRank>=c)return y}if(a.rank){c=sc.q.Voa(a.rank);return b.rank>=c}return h}},LEVEL_UP:{t:new ig.u({attributes:{aa:{c:"Integer",d:"Minimum Level reached"}}}),
FX:h,Nb:function(a,b){return a.level>=b.rank}},MENU_LEAVE:{t:new ig.u({attributes:{}}),Nb:N(h)},QUEST_ACCEPTED:{t:new ig.u({attributes:{}}),hdb:h,Nb:N(h)},PARTY_MEMBER_EVENT:{t:new ig.u({attributes:{Qj:{c:"String",d:"Party member that just DIED",U:sc.Tt},gD:{c:"String",d:"Type of party member event",U:["DIES","REVIVED","EQUIP_UPDATE"]}}}),FX:h,Nb:function(a,b){return b.member.indexOf(a.member)==-1?y:a.eventType==b.eventType}},DUNGEON_TRANSITION:{t:new ig.u({attributes:{MVb:{c:"String",d:"If defined: react on map dungeon change",
U:c,ok:h},VRb:{c:"String",d:"If defined: react on area dungeon change",U:c,ok:h}}}),FX:h,Nb:function(a,b){return(!a.mapTransition||a.mapTransition==b.mapTransition)&&(!a.areaTransition||a.areaTransition==b.areaTransition)}},SOCIAL_ACTION:{t:new ig.u({attributes:{member:{c:"String",d:"Party member that we do the social action with",U:sc.Tt,I:h},actionType:{c:"String",d:"Type of social action",U:sc.o$}}}),Nb:function(a,b){return a.member&&a.member!=b.member?y:sc.o$[a.actionType]==b.actionType},e0:function(a,
b){return sc.$r.fNb(a,b)}},MAP_ENTERED:{t:new ig.u({attributes:{}}),FX:h,Nb:N(h)},FORCE_UPDATE:{t:new ig.u({attributes:{}}),hdb:h,Nb:N(h)}};sc.xfb={ALWAYS:{},REGULAR:{ep:1},SOMETIMES:{ep:0.5},RARE:{ep:0.2}};sc.g1={REPEAT:1,ONCE:2};var d=["REGULAR","SOMETIMES","RARE"],f=[];sc.Wfb=ig.Uf.extend({vi:{},poa:{},jz:{},BR:[],NX:0,f:function(){ig.zd.Lg(this);window.Ed&&ig.Yh.Lg("commonEvents","CommonEnumEditor","Common Events");this.dsb()},fj:function(){this.jz={}},Fu:function(a){var b={},c;for(c in this.jz){var d=
this.jz[c];this.vi[c]&&this.vi[c].repeat==sc.g1.ONCE&&(b[c]=ig.copy(d))}a.commonEvents={runData:b}},Bt:function(a){a=a.commonEvents||{};this.jz=ig.copy(a.runData||{});for(var b in this.jz)if(this.jz[b].runCount){this.jz[b].trigger=this.jz[b].runCount;delete this.jz[b].runCount}},Eu:function(){if(this.NX){if(sc.q.oe()||sc.q.mHa()){this.NX=0;this.BR.length=0}this.NX=this.NX-ig.i.Sa;if(this.NX<=0){this.NX=0;for(var a=this.BR.length;a--;){var b=this.BR[a];this.DVa(b.type,b.hyb,sc.q.message.i5a())}this.BR.length=
0}}},dsb:function(){this.vi={};var a=ig.Yh.get("commonEvents");ig.Ra.fab("data/database.json");for(var b in a){var c=new sc.Vfb(b,a[b]);this.vi[b]=c;var d=c.type;this.poa[d]||(this.poa[d]=[]);this.poa[d].push(c)}ig.Ra.fab(q)},Ws:function(a,b){if(sc.jb.wc())return q;if(sc.h1[a].FX){this.NX=0.2;this.BR.push({type:a,hyb:ig.copy(b)})}else return this.DVa(a,b);return q},fZa:function(a){for(var b=y,c=this.BR.length;c--;)if(this.BR[c].type==a){this.BR.splice(c,1);b=h}return b},UMb:function(a){if((a=this.vi[a])&&
this.UUa(a,{},Math.random()))return this.BXa(a)},DVa:function(a,b,c){var d=sc.h1[a],f=q,n=[];do{var o=this.fKb(a,b,n,c);if(o){n.push(o);f=this.BXa(o)}}while(d.hdb&&o);return f},UUa:function(a,b,c){if(!a.Nb(b)||a.repeat==sc.g1.ONCE&&this.CFa(a)>=a.Xv||a.vs.ep&&a.vs.ep<c)return y;if(this.E2a(a)==0){this.f4a(a);return y}return h},BXa:function(a){var b=a.start(this.E2a(a));this.f4a(a);return b},fKb:function(a,b,c,l){a=this.poa[a];if(!a)return q;var m=d.length,n=Math.random();f.length=0;for(var o=-1,m=
0;m<a.length;++m){var t=a[m];if(c.indexOf(t)==-1&&(!l||t.IHb)&&this.UUa(t,b,n)){if(!t.vs.ep)return t;if(!(t.repeat!=sc.g1.ONCE&&o!=-1)){var p=this.CFa(t);if(t.repeat==sc.g1.ONCE&&(o==-1||p<o)){f.length=0;o=p}(o==-1||p==o)&&f.push(t)}}}return f[Math.floor(Math.random()*f.length)]},E2a:function(a){return!a.w7?1:a.w7.indexOf(this.CFa(a)+1)+1},CFa:function(a){return this.jz[a.name]&&this.jz[a.name].trigger||0},f4a:function(a){this.jz[a.name]||(this.jz[a.name]={trigger:0});var b=this.jz[a.name];b.trigger=
b.trigger+1||1;a.repeat!=sc.g1.ONCE&&(b.trigger=b.trigger%a.Xv)}});sc.Vfb=ig.Ca.extend({name:q,type:q,kdb:q,vs:q,repeat:q,w7:q,Xv:0,fb:q,event:q,f:function(b,c){this.name=b;if(c.type){this.type=c.type.type;this.kdb=c.type}this.vs=sc.xfb[c.frequency];this.repeat=sc.g1[c.repeat];this.fb=new ig.de(c.condition);this.gD=ig.Sz[c.eventType]||ig.Sz.PARALLEL;this.w7=c.runOnTrigger||q;this.IHb=c.overrideSideMessage||y;if(this.w7){this.w7.sort(a);this.Xv=this.w7.last()}else this.Xv=1;this.event=new ig.Ja({steps:c.event,
input:{runCount:{_type:"Number"}}});this.event.ySb=h},Nb:function(a){return!this.fb.evaluate()?y:sc.h1[this.type].Nb(this.kdb,a)},start:function(a){var a={runCount:a},b=sc.h1[this.type];return b.e0?b.e0(this.event,a):sc.$r.e0(this.gD,this.event,a)}});ig.Vf(function(){return sc.Ep=new sc.Wfb})});ig.J=h;
ig.N("game.feature.common-event.common-event-steps").O("game.feature.common-event.common-event","impact.base.action","impact.base.event").K(function(){ig.oa.TRIGGER_COMMON_EVENTS=ig.qa.extend({F3:q,t:new ig.u({attributes:{F3:{c:"String",d:"Type of Common Event",U:sc.h1}}}),f:function(a){this.F3=a.commonEventType},start:function(){sc.Ep.Ws(this.F3,{})}});ig.oa.CALL_EVENT=ig.qa.extend({Dp:q,t:new ig.u({attributes:{Dp:{c:"CallEvent",d:"Call event that will be called."}}}),f:function(a){this.Dp=a.callEvent},
start:function(){sc.Ep.UMb(this.Dp)}});ig.oa.CANCEL_COMMON_EVENTS=ig.qa.extend({t:new ig.u({attributes:{F3:{c:"String",d:"Type of Common Event to cancel",U:sc.h1}}}),f:function(a){this.F3=a.commonEventType},start:function(){sc.Ep.fZa(this.F3)}})});ig.J=h;ig.N("game.feature.common-event.plug-in").O("game.feature.common-event.common-event","game.feature.common-event.common-event-steps").K(function(){window.Ed&&wm.Ek.push("game.feature.common-event.editors.common-event-editors")});ig.J=h;
ig.N("game.feature.voice-acting.voice-acting").O("impact.base.game").K(function(){sc.jA={};sc.Wpb=ig.Uf.extend({Aa:y,loaded:y,seb:{},f:J(),toggle:function(){(this.Aa=!this.Aa)&&this.load()},load:function(){if(!this.loaded){for(var a in sc.jA){for(var b=sc.jA[a],c=[],d=0;d<b.length;++d)c[d]=this.uEb(b[d]);this.seb[a]=c}this.loaded=h}},uEb:function(a){for(var b={Na:[],filter:a.filter},c=0;c<a.Na.length;++c){var d=a.Na[c];b.Na[c]=new ig.ka("media/sound/va/"+d.src,(d.volume||1)*1.5,0,"voiceActing")}return b},
play:function(a,b){if(this.Aa){var c=a.Ad.name,d=a.IJ;b instanceof ig.Ra&&(b=b.data.en_US);b=b||"";if(c=this.seb[c]){for(var f=[],i=0,j=c.length;j--;){var k=c[j],l=0;if(k.filter&&k.filter.text&&b.toLowerCase().indexOf(k.filter.text.toLowerCase())!=-1){l=l+k.filter.text.length;k.filter.Hca&&k.filter.Hca.indexOf(d)!=-1&&(l=l+100)}if(l>i){f.length=0;i=l}if(l==i)for(l=k.Na.length;l--;)f.push(k.Na[l])}f.length>0&&f.random().play()}}}});ig.Vf(function(){return sc.$Oa=new sc.Wpb})});ig.J=h;
ig.N("game.feature.voice-acting.va-config").O("game.feature.voice-acting.voice-acting").K(function(){sc.jA["main.lea"]=[{Na:[{src:"lea/bye.ogg",volume:1}],filter:{text:"Bye"}},{Na:[{src:"lea/bye-question.ogg",volume:1}],filter:{text:"Bye?"}},{Na:[{src:"lea/haaaaii.ogg",volume:1},{src:"lea/haaaaii-2.ogg",volume:1}],filter:{text:"Hi",Hca:["EXCITED"]}},{Na:[{src:"lea/hi-dissapointed.ogg",volume:1}],filter:{text:"Hi",Hca:["EXHAUSTED","ANNOYED","MOPING"]}},{Na:[{src:"lea/hi-question.ogg",volume:1}],filter:{text:"Hi",
Hca:["SURPRISED_TOWARD","SURPRISED_AWAY","NERVOUS"]}},{Na:[{src:"lea/hi.ogg",volume:1},{src:"lea/hi-2.ogg",volume:1},{src:"lea/hi-3.ogg",volume:1}],filter:{text:"Hi"}},{Na:[{src:"lea/how.ogg",volume:1},{src:"lea/how-2.ogg",volume:1}],filter:{text:"How"}},{Na:[{src:"lea/lea.ogg",volume:1},{src:"lea/lea-2.ogg",volume:1},{src:"lea/lea-3.ogg",volume:1}],filter:{text:"Lea"}},{Na:[{src:"lea/lea-dissapointed.ogg",volume:1}],filter:{text:"Lea",Hca:["ANNOYED","MOPING"]}},{Na:[{src:"lea/hmmm.ogg",volume:1}],
filter:{text:"...!"}},{Na:[{src:"lea/seufz.ogg",volume:1},{src:"lea/seufz-2.ogg",volume:1}],filter:{text:"..."}},{Na:[{src:"lea/huh.ogg",volume:1}],filter:{text:"...?"}},{Na:[],filter:{text:"[nods]"}},{Na:[],filter:{text:"[shakes head]"}}];sc.jA["main.shizuka"]=[{Na:[{src:"shizuka/alligator.ogg",volume:1}]},{Na:[{src:"shizuka/bakka.ogg",volume:1},{src:"shizuka/bakka-2.ogg",volume:1},{src:"shizuka/bakka-3.ogg",volume:1}]},{Na:[{src:"shizuka/chikusho.ogg",volume:1}]},{Na:[{src:"shizuka/gomenasai.ogg",
volume:1}]},{Na:[{src:"shizuka/jameruuu.ogg",volume:1},{src:"shizuka/jameruuu-2.ogg",volume:1}]},{Na:[{src:"shizuka/jameruuu.ogg",volume:1},{src:"shizuka/jameruuu-2.ogg",volume:1}]},{Na:[{src:"shizuka/kawaiiii.ogg",volume:1}]}];sc.jA["main.sergey"]=[{Na:[{src:"sergey/binary.ogg",volume:1}]},{Na:[{src:"sergey/can-you-hear-me.ogg",volume:1}]},{Na:[{src:"sergey/customer-service.ogg",volume:1}]},{Na:[{src:"sergey/hotline.ogg",volume:1}]},{Na:[{src:"sergey/is-this-working.ogg",volume:1}]},{Na:[{src:"sergey/is-this-working-2.ogg",
volume:1}]},{Na:[{src:"sergey/turn-it-off-and-on.ogg",volume:1}]}];sc.jA["main.schneider"]=[{Na:[{src:"schneider/ah-hallo.ogg",volume:1}]},{Na:[{src:"schneider/bratwurst.ogg",volume:1}]},{Na:[{src:"schneider/fabelhaft.ogg",volume:1}]},{Na:[{src:"schneider/holeroe.ogg",volume:1},{src:"schneider/holeroe-2.ogg",volume:1},{src:"schneider/holeroe-3.ogg",volume:1}],filter:{text:"Holer\u00f6"}},{Na:[{src:"schneider/holla-the-woodfairy.ogg",volume:1}]},{Na:[{src:"schneider/i-think-i-spider.ogg",volume:1}]},
{Na:[{src:"schneider/ja.ogg",volume:1}]},{Na:[{src:"schneider/jaja-thats-how-it-is.ogg",volume:1}]},{Na:[{src:"schneider/my-akzent.ogg",volume:1}]},{Na:[{src:"schneider/my-lovely.mister-singing-club.ogg",volume:1}]},{Na:[{src:"schneider/my-pig-whistles.ogg",volume:1}]},{Na:[{src:"schneider/neineinein.ogg",volume:1}]},{Na:[{src:"schneider/noone-can-reach-me-the-water.ogg",volume:1}]},{Na:[{src:"schneider/sauerkraut.ogg",volume:1}]},{Na:[{src:"schneider/schifffahrtskapitaensmuetze.ogg",volume:1}]},
{Na:[{src:"schneider/that-makes-me-nobody-so-easy-after.ogg",volume:1}]}];sc.jA["main.emilie"]=[{Na:[{src:"emilie/au-reviour.ogg",volume:1}],filter:{text:"revoir"}},{Na:[{src:"emilie/bonjour.ogg",volume:1},{src:"emilie/bonjour-2.ogg",volume:1}],filter:{text:"Bonjour"}},{Na:[{src:"emilie/non.ogg",volume:1}],filter:{text:"non"}},{Na:[{src:"emilie/oui.ogg",volume:1},{src:"emilie/oui-2.ogg",volume:1}],filter:{text:"oui"}},{Na:[{src:"emilie/je-mapelle-emilie.ogg",volume:1}],filter:{text:"emilie"}},{Na:[{src:"emilie/sacre-bleu.ogg",
volume:1},{src:"emilie/sacre-bleu-2.ogg",volume:1}],filter:{text:"Sacrebleu"}},{Na:[{src:"emilie/oulala-2.ogg",volume:1},{src:"emilie/oulala-3.ogg",volume:1}]},{Na:[{src:"emilie/exquise-moir.ogg",volume:1}]}];sc.jA["main.carla"]=[{Na:[{src:"carla/atta-girl.ogg",volume:1}],filter:{text:"attagirl"}},{Na:[{src:"carla/come-on.ogg",volume:1}],filter:{text:"C'mon"}},{Na:[{src:"carla/good-job.ogg",volume:1}],filter:{text:"Good"}},{Na:[{src:"carla/gotcha.ogg",volume:1}],filter:{text:"gotcha"}},{Na:[{src:"carla/u-know.ogg",
volume:1}],filter:{text:"y'know"}}];sc.jA["main.captain"]=[{Na:[{src:"jet/aarrr.ogg",volume:1}]},{Na:[{src:"jet/ahoi.ogg",volume:1}]},{Na:[{src:"jet/aye.ogg",volume:1}]},{Na:[{src:"jet/aye-mate.ogg",volume:1}]},{Na:[{src:"jet/dead-men-tell-no-lies.ogg",volume:1}]},{Na:[{src:"jet/fire-in-the-hole.ogg",volume:1}]},{Na:[{src:"jet/hmpf.ogg",volume:1},{src:"jet/hmpf-2.ogg",volume:1}]},{Na:[{src:"jet/laugh.ogg",volume:1}]},{Na:[{src:"jet/scallywag.ogg",volume:1}]},{Na:[{src:"jet/time-for-some-grog.ogg",
volume:1}]},{Na:[{src:"jet/walk-the-plank.ogg",volume:1}]},{Na:[{src:"jet/yarrr.ogg",volume:1}]},{Na:[{src:"jet/ye-dobber.ogg",volume:1}],filter:{text:"Dobber"}},{Na:[{src:"jet/ye-hornswaggle.ogg",volume:1}]}];sc.jA["main.genius"]=[{Na:[{src:"satoshi/cough.ogg",volume:1},{src:"satoshi/cough-2.ogg",volume:1},{src:"satoshi/cough-3.ogg",volume:1}]},{Na:[{src:"satoshi/daijube.ogg",volume:1},{src:"satoshi/daijube.ogg",volume:1}]},{Na:[{src:"satoshi/yatta.ogg",volume:1},{src:"satoshi/yatta.ogg",volume:1}]}];
sc.jA["antagonists.designer"]=[{Na:[{src:"designer/amusing.ogg",volume:1.25},{src:"designer/amusing-2.ogg",volume:1.25}]},{Na:[{src:"designer/everything-by-design.ogg",volume:1.25}]},{Na:[{src:"designer/extraordinary.ogg",volume:1.25}]},{Na:[{src:"designer/laugh.ogg",volume:1.25},{src:"designer/laugh-2.ogg",volume:1.25}]},{Na:[{src:"designer/proposterous.ogg",volume:1.25}],filter:{text:"preposterous"}},{Na:[{src:"designer/tse.ogg",volume:1.25}]},{Na:[{src:"designer/we-are-pleased.ogg",volume:1.25}]}];
sc.jA["antagonists.gautham"]=[{Na:[{src:"shady-guy/baka.ogg",volume:1}]},{Na:[{src:"shady-guy/kuso.ogg",volume:1},{src:"shady-guy/kuso-2.ogg",volume:1}]},{Na:[{src:"shady-guy/madda-madda.ogg",volume:1},{src:"shady-guy/madda-madda-2.ogg",volume:1}]},{Na:[{src:"shady-guy/masaka.ogg",volume:1},{src:"shady-guy/masaka-2.ogg",volume:1},{src:"shady-guy/masaka-3.ogg",volume:1}]},{Na:[{src:"shady-guy/mate.ogg",volume:1},{src:"shady-guy/mate-2.ogg",volume:1}]},{Na:[{src:"shady-guy/nani.ogg",volume:1},{src:"shady-guy/nani-2.ogg",
volume:1},{src:"shady-guy/nani-3.ogg",volume:1}]},{Na:[{src:"shady-guy/nyehehe.ogg",volume:1}]}];sc.jA["antagonists.fancyguy"]=[{Na:[{src:"apollo/cop.ogg",volume:1},{src:"apollo/cop-2.ogg",volume:1}]},{Na:[{src:"apollo/hold-it.ogg",volume:1},{src:"apollo/hold-it-2.ogg",volume:1}]},{Na:[{src:"apollo/hold-on.ogg",volume:1}]},{Na:[{src:"apollo/objection.ogg",volume:1}]},{Na:[{src:"apollo/stay-there.ogg",volume:1}]},{Na:[{src:"apollo/wait-a-minute.ogg",volume:1},{src:"apollo/wait-a-minute-2.ogg",volume:1}]},
{Na:[{src:"apollo/you-are-cheating.ogg",volume:1},{src:"apollo/you-cheater.ogg",volume:1}],filter:{text:"cheat"}},{Na:[{src:"apollo/you-faker.ogg",volume:1}]},{Na:[{src:"apollo/youre-no-real-spheromancer.ogg",volume:1}]}]});ig.J=h;ig.N("game.feature.voice-acting.plug-in").O("game.feature.voice-acting.voice-acting","game.feature.voice-acting.va-config").K(J());ig.J=h;
ig.N("game.feature.credits.credit-loadable").O("impact.base.game","impact.base.loader").K(function(){sc.cgb=ig.LV.extend({Wi:"Credit",data:q,Yqa:0,f:function(a){this.parent(a)},wu:function(a){$.ajax({dataType:"json",url:ig.root+a.vm("data/credits/",".json")+ig.Kn(),context:this,success:this.onload.bind(this),error:this.onerror.bind(this)})},onerror:function(){this.data=q;this.Xl(y)},onload:function(a){this.data=a;this.Xl(h)}})});ig.J=h;
ig.N("game.feature.credits.gui.credits-gui").O("game.feature.gui.base.boxes","impact.feature.gui.gui","impact.feature.gui.base.basic-gui","impact.base.image","impact.base.lang","game.feature.gui.base.boxes","game.feature.credits.credit-loadable","game.feature.gui.base.text").K(function(){ig.lj.CreditSection=ig.da.extend({R:{DEFAULT:{state:{},time:0.2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}},pq:q,tGa:q,content:q,K3:0,Jp:y,W4a:y,idb:{},f:function(a){this.parent();
this.F(ig.i.width,ig.i.height);this.a.zIndex=99;this.a.clip=h;this.pq=a;this.K3=ig.i.width-(this.pq.data.border||64)*2;this.content=new ig.da;this.content.F(this.K3,ig.i.height);this.tGa=new ig.da;this.tGa.F(ig.i.width,ig.i.height);this.m(this.tGa);this.m(this.content);this.j("HIDDEN",h)},update:function(){var a=this.content.a.g.y,a=a+-30*ig.i.Sa;if(!this.Jp&&a<=-this.content.a.size.y+ig.i.height)this.Jp=h;if(this.Jp&&a<=-this.content.a.size.y){this.W4a=h;this.remove()}this.content.a.g.y=a},Vo:function(){this.Gwb();
this.j("DEFAULT",h)},pi:J(),ag:J(),remove:function(){this.j("HIDDEN",h,h)},Gwb:function(){var a=this.pq.data;this.content.l(this.fzb(a.align),ig.i.height);var a=a.entries,b=Vec2.vc(),c;for(c in a){var d=a[c];if(d.key=="BASE"){var f=d.names;d.hideHeader||this.wwb(d.header,b,f.length==0);if(f.length>0){var i=d.columns,j=this.rwb(i,b);this.Bwb(f,i,j,b);b.y=b.y+(d.bottomPad||60)}else b.y=b.y+(d.bottomPad||30)}else d.key=="IMAGE"?this.GCa(d,b):d.key=="TRIGGER"&&this.Jwb(d.name,b)}this.content.a.size.y=
b.y},GCa:function(a,b){var c=a.image,d=new ig.da;d.H(ig.Fja[a.alignX||"CENTER"],ig.k.$);d.l(0,b.y);if(c){var c=new ig.ec(new ig.ia(c.src),c.offX,c.offY,c.width,c.height),f=a.offset?a.offset.x:0,i=a.top!=g?a.top:0,i=i+(a.offset?a.offset.y:0);c.l(f,i);d.m(c);d.F(c.a.size.x,c.a.g.y+c.a.size.y+(a.bottom!=g?a.bottom:100))}else d.F(2,(a.top!=g?a.top:0)+(a.bottom!=g?a.bottom:100));this.content.m(d);b.y=b.y+d.a.size.y},wwb:function(a,b,c){var d=new sc.ea(ig.Ra.ic(a),{maxWidth:this.K3});d.a.R={DEFAULT:{state:{},
time:0.7,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{Va:1E-4},time:0.2,p:KEY_SPLINES.LINEAR}};d.JT=function(){d.a.lm?d.j("DEFAULT",y,y,q,1.2):d.j("HIDDEN",h)}.bind(this);d.H(ig.k.Ia,ig.k.$);d.l(0,b.y);d.j("HIDDEN",h);this.content.m(d);b.y=b.y+d.a.size.y;if(!c){var f=new sc.FL(d.a.size.x+10);f.H(ig.k.Ia,ig.k.$);f.l(0,b.y);f.a.R={HIDDEN:{state:{Xa:1E-5},time:0,p:KEY_SPLINES.LINEAR},DEFAULT:{state:{Xa:1},time:1,p:KEY_SPLINES.EASE_OUT}};f.JT=function(){f.a.lm?f.j("DEFAULT",y,y,q,1.2):f.j("HIDDEN",h)}.bind(this);
f.j("HIDDEN",h);this.content.m(f);b.y=b.y+(f.a.size.y+2)}},rwb:function(a,b){var c=0,d=Math.floor((this.K3-16*(a-1))/a),f=new ig.da;f.l(0,b.y);f.F(this.K3,20);var i=[];i.push(f);for(var j=0;j<a;j++){var k=new ig.da;k.JT=function(){if(this.a.lm)for(var a=this.a.children,b=0;b<a.length;b++){a[b].j("HIDDEN",h);a[b].j("DEFAULT",y,y,q,2+0.6*b)}};k.l(c,0);k.F(d,20);f.m(k);c=c+(d+16);i.push(k)}this.content.m(f);return i},Bwb:function(a,b,c,d){for(var f=1,i=Math.floor((this.K3-16*(b-1))/b),j=0,k=0,l=0;l<
a.length;l++){var m=new sc.ea(ig.Ra.ic(a[l]),{maxWidth:i,linePadding:-1});m.a.R={DEFAULT:{state:{},time:2,p:KEY_SPLINES.LINEAR},HIDDEN:{state:{alpha:0},time:0.2,p:KEY_SPLINES.LINEAR}};if(b>1)if(f==1){m.H(ig.k.ra,ig.k.$);m.Dha(ig.$g.zl.Pxa)}else if(f>=b){m.H(ig.k.hb,ig.k.$);m.Dha(ig.$g.zl.CL)}else{m.H(ig.k.Ia,ig.k.$);m.Dha(ig.$g.zl.at)}else m.H(ig.k.Ia,ig.k.$);m.Dha(ig.$g.zl.at);m.l(0,k);m.a.size.y+2>j&&(j=m.a.size.y+2);c[f].m(m);f++;if(f>b){f=1;k=k+j;j=0}else l==a.length-1&&(k=k+j)}for(a=c.length;a--;)c[a].a.size.y=
k;d.y=d.y+k},Jwb:function(a,b){var c=new ig.da;c.l(0,b.y);c.F(2,2);c.JT=function(){if(c.a.lm)c.uMb?this.idb[a]=h:c.uMb=h}.bind(this);this.content.m(c)},fzb:function(a){var b=0;a=="CENTER"?b=ig.i.width/2-this.content.a.size.x/2:a=="RIGHT"&&(b=128);return b}})});ig.J=h;
ig.N("game.feature.credits.credits-steps").O("impact.base.action","impact.base.event","game.feature.credits.credit-loadable").K(function(){ig.oa.SHOW_CREDIT_SECTION=ig.qa.extend({name:q,pq:q,mS:q,t:new ig.u({attributes:{name:{c:"String",d:"Name of the section. MUST BE GIVEN"},pq:{c:"Select",d:"Credit Section to show",U:"credits"}}}),f:function(a){(this.name=a.name)||e(Error("No name for credits entry!"));if(!window.Ed)this.pq=new sc.cgb(a.credits)},start:function(){if(this.name){var a=ig.X.ox[this.name];
a&&a.remove()}this.mS=ig.X.Wba(this.name,"CreditSection",this.pq);ig.X.Qha(this.mS)},Ka:function(){this.mS&&ig.X.AEa(this.mS);this.pq&&this.pq.Tc()}});ig.oa.WAIT_UNTIL_CREDIT_TRIGGER=ig.qa.extend({pq:q,trigger:q,t:new ig.u({attributes:{pq:{c:"String",d:"Name of the credit section gui which contains the trigger"},trigger:{c:"CreditsTriggerSelect",d:"Name of the trigger"}}}),f:function(a){assertContent(a,"trigger","credits");this.trigger=a.trigger.trigger;this.pq=a.credits},start:function(a){var b=
ig.X.ox[this.pq];if(b)a.sQ=b},ya:function(a){return!a.sQ?h:a.sQ&&!a.sQ.idb[this.trigger]?y:h}});ig.oa.WAIT_UNTIL_CREDIT_SECTION_DONE=ig.qa.extend({name:q,cJa:y,t:new ig.u({attributes:{name:{c:"String",d:"Name of the section. MUST BE GIVEN"},cJa:{c:"Boolean",d:"If true, waits until credits entry is really offscreen",ab:y}}}),f:function(a){assertContent(a,"name");this.name=a.name;this.cJa=a.offscreen||y},start:function(a){var b=ig.X.ox[this.name];if(b)a.sQ=b},ya:function(a){return!a.sQ?h:a.sQ&&(this.cJa?
!a.sQ.W4a:!a.sQ.Jp)?y:h}})});ig.J=h;ig.N("game.feature.credits.plug-in").O("game.feature.credits.credit-loadable","game.feature.credits.gui.credits-gui","game.feature.credits.credits-steps").K(function(){if(window.Ed){wm.Um(/CREDIT/,"pink");wm.Um(/CREDITS/,"pink");wm.Ek.push("game.feature.credits.editors.credits-editors")}});ig.J=h;
ig.N("game.features").O("game.loader","game.constants","impact.feature.database.plug-in","impact.feature.gamepad.plug-in","impact.feature.base.plug-in","impact.feature.bgm.plug-in","impact.feature.event-sheet.plug-in","impact.feature.camera.plug-in","impact.feature.rumble.plug-in","impact.feature.slow-motion.plug-in","impact.feature.effect.plug-in","impact.feature.gui.plug-in","impact.feature.light.plug-in","impact.feature.height-map.plug-in","impact.feature.navigation.plug-in","impact.feature.map-content.plug-in",
"impact.feature.map-image.plug-in","impact.feature.overlay.plug-in","impact.feature.dream-fx.plug-in","impact.feature.parallax.plug-in","impact.feature.screen-blur.plug-in","impact.feature.terrain.plug-in","impact.feature.interact.plug-in","impact.feature.env-particles.plug-in","impact.feature.storage.plug-in","impact.feature.weather.plug-in","impact.feature.map-sounds.plug-in","impact.feature.nwf.plug-in","impact.feature.video.plug-in","impact.feature.influencer.plug-in","game.feature.version.plug-in",
"game.feature.timers.plug-in","game.feature.achievements.plug-in","game.feature.auto-control.plug-in","game.feature.inventory.plug-in","game.feature.font.font-system","game.feature.ar.plug-in","game.feature.base.plug-in","game.feature.bgm.plug-in","game.feature.character.plug-in","game.feature.combat.plug-in","game.feature.game-code.plug-in","game.feature.gui.plug-in","game.feature.map-content.plug-in","game.feature.model.plug-in","game.feature.skills.plug-in","game.feature.msg.plug-in","game.feature.interact.plug-in",
"game.feature.npc.plug-in","game.feature.player.plug-in","game.feature.puzzle.plug-in","game.feature.control.control","game.feature.menu.plug-in","game.feature.quick-menu.plug-in","game.feature.tutorial.plug-in","game.feature.trade.plug-in","game.feature.save-preset.plug-in","game.feature.xeno-dialogs.plug-in","game.feature.quest.plug-in","game.feature.party.plug-in","game.feature.common-event.plug-in","game.feature.voice-acting.plug-in","game.feature.credits.plug-in").K(J());ig.J=h;
ig.N("game.feature.beta.beta-controls").O("impact.base.game").K(function(){sc.Zeb=ig.Uf.extend({f:function(){this.parent("BetaControls")},xK:9E3,az:function(){ig.input.Yc("langedit")&&ig.Ae&&ig.Ae.Yab();ig.input.Yc("savedialog")&&window.SHOW_SAVE_DIALOG(ig.zd.n2a())}});sc.submitSaveImport=function(a){a&&ig.zd.iIb(a)};ig.Vf(function(){return sc.bSb=new sc.Zeb})});ig.J=h;ig.N("game.feature.beta.plug-in").O("game.feature.beta.beta-controls").K(J());ig.J=h;
ig.N("impact.feature.lang-edit.lang-edit").O("impact.base.game").K(function(){ig.Sja="http://www.cross-code.com/page/api/";ig.djb=ig.Sja+"lang-edit-submit.php";ig.hQb=ig.Sja+"lang-edit-overview.php";ig.gQb=ig.Sja+"lang-edit-list.php";ig.iQb=ig.Sja+"lang-edit-resolve.php";ig.ljb=ig.Uf.extend({dIa:[],zK:[],hIa:y,VG:q,form:q,qo:{M0:q,map:q,lta:q},userName:q,fYb:q,cra:q,cha:q,PR:q,f:function(){this.parent("LangEdit")},VU:function(a,b,c,d){!b instanceof ig.Ra&&e(Error("You can only submit langLabels to lang-edit"));
if(!d||!this.aEb(a)){this.zK.push({Tia:a,content:b,file:c});this.zK.length>200&&this.zK.shift()}},Cz:function(a,b){!b instanceof ig.Ra&&e(Error("You can only submit langLabels to lang-edit"));this.dIa.push({Tia:a,content:b})},yE:function(a,b){!b instanceof ig.Ra&&e(Error("You can only submit langLabels to lang-edit"));this.zK.push({Tia:a,content:b});this.zK.length>200&&this.zK.shift()},aEb:function(a){for(var b=this.zK.length;b--;)if(a==this.zK[b].Tia)return h;return y},PXb:function(){this.hIa?this.Oma():
this.Yab()},Yab:function(){this.hIa=h;ig.i.setFocusLost();this.VG||this.Oqb();if(!this.cra)this.cra=this.gVa(this.dIa);this.VG.find(".map").empty().append(this.cra);this.VG.find(".recent").empty().append(this.gVa(this.zK));this.Psb(this.qo.map);if(localStorage.getItem("ccLangEditUser")){this.qo.M0.hide();this.userName.val(localStorage.getItem("ccLangEditUser"));this.Lia.val(localStorage.getItem("ccLangEditEmail"));this.TXa()}else this.qo.M0.show();this.qo.map.hide();this.qo.lta.show();this.VG.show();
this.qo.lta[0].scrollTop=this.qo.lta[0].scrollHeight},Oma:function(){this.hIa=y;ig.i.ai=y;this.VG.hide()},Oqb:function(){var a=$("<div>");a.addClass("langEdit");var b=$("<div>");b.addClass("container");a.append(b);var c=$('<div class="header"></div>');c.append($("<h2>"+ig.lang.get("sc.gui.lang-edit.title")+"</h2>"));var d=$("<button>"+ig.lang.get("sc.gui.lang-edit.map")+"</button>"),f=$("<button>"+ig.lang.get("sc.gui.lang-edit.recent")+"</button>"),i=$('<div class="userInfo" >'+ig.lang.get("sc.gui.lang-edit.user-prefix")+
' <span class="name" ></span> (<span class="email"></span>) <a>'+ig.lang.get("sc.gui.lang-edit.user-edit")+"</a></div>");c.append(d);c.append(f);c.append(i);var j=this.form=$("<form></form>"),k=this.qo.M0=$('<div class="user"></div>');this.qo.M0.append($("<h2>"+ig.lang.get("sc.gui.lang-edit.user-credentials")+"</h2>"));this.userName=$('<input type="text" name="userName" placeholder="'+ig.lang.get("sc.gui.lang-edit.user-name")+'"/>');this.Lia=$('<input type="text" name="userEmail" placeholder="'+ig.lang.get("sc.gui.lang-edit.user-email")+
'"/>');this.qo.M0.append(this.userName);this.qo.M0.append(this.Lia);var l=$('<button type="button">'+ig.lang.get("sc.gui.lang-edit.submit")+"</button>");k.append(l);l.click(this.Esb.bind(this));var m=this.qo.map=$('<div class="map"></div>'),n=this.qo.lta=$('<div class="recent"></div>');j.append(m);j.append(n);j.append(k);var l=$('<div class="footer" ></div>'),o=$('<button type="submit">'+ig.lang.get("sc.gui.lang-edit.send-report")+"</button>"),t=$('<button type="button">'+ig.lang.get("sc.gui.lang-edit.cancel")+
"</button>");l.append(o);l.append(t);d.click(function(){m.show();n.hide()});f.click(function(){n.show();m.hide()});i.find("a").click(function(){k.show()});this.cha=$('<div class="saving" >'+ig.lang.get("sc.gui.lang-edit.sending")+"</div>");this.cha.hide();this.PR=$('<div class="error" ><h2>'+ig.lang.get("sc.gui.lang-edit.error")+"</h2><div></div></div>");this.PR.hide();this.PR.click(function(){this.PR.hide()}.bind(this));b.append(c);b.append(l);b.append(j);b.append(this.cha);b.append(this.PR);b.click(function(a){a=
a.target;if(a.className=="original"){var b=$(a.parentNode),c=b.find(".modification"),d=b.find(".comment");if(b.hasClass("edit"))!d.val()&&c.val()==a.value&&b.removeClass("edit");else{b.addClass("edit");c.select()}}});t.click(this.Oma.bind(this));o.click(this.ntb.bind(this));this.VG=a;this.VG.hide();document.body.appendChild(this.VG[0])},gVa:function(a){for(var b=$("<ul>"),c=0;c<a.length;++c){var d=a[c],f=$("<li>"),i=$("<label>");i.text(d.Tia&&d.Tia.toString());var j=$('<input type="hidden" readonly name="id[]" class="id">');
j.val(Math.abs(d.content.K5a));var k=d.file;if(!k)k=d.content.n8a;var l=$('<input type="hidden" readonly name="file[]" class="file">');l.val(k);k=$('<textarea readonly name="original[]" class="original"></textarea>');k.val(d.content.toString());var m=$('<textarea name="modification[]" class="modification"></textarea>');m.val(d.content.toString());d=$('<textarea name="comment[]" class="comment" placeholder="'+ig.lang.get("sc.gui.lang-edit.comment")+'"></textarea>');f.append(j);f.append(l);f.append(i);
f.append(k);f.append(m);f.append(d);b.append(f)}return b},Psb:function(a){a.find("li.edit").each(function(){var a=$(this);a.find(".modification").val(a.find(".original").val());a.find(".comment").val("");a.removeClass("edit")})},Esb:function(){localStorage.setItem("ccLangEditUser",this.userName.val());localStorage.setItem("ccLangEditEmail",this.Lia.val());this.qo.M0.hide();this.TXa()},TXa:function(){this.VG.find(".userInfo .name").text(this.userName.val());this.VG.find(".userInfo .email").text(this.Lia.val())},
ntb:function(){var a={userName:this.userName.val(),userEmail:this.Lia.val(),map:ig.r.uZ.vm("data/maps/",".json"),lang:ig.dh,changes:[]};this.VG.find("li.edit").each(function(){var b=$(this),d=b.find(".id").val(),f=b.find(".original").val(),i=b.find(".modification").val(),j=b.find(".comment").val(),b=b.find(".file").val()||q;(f!=i||j)&&a.changes.push({id:d,original:f,modification:i,comment:j,file:b})});if(a.changes.length>0){var b=JSON.stringify(a),b="data="+encodeURIComponent(b);this.cha.show();$.ajax({url:ig.djb,
type:"POST",dataType:"json",async:h,data:b,success:this.waa.bind(this),error:this.waa.bind(this)})}else this.Oma()},waa:function(a){this.cha.hide();console.log(a);if(a.success!==h){a.responseText?this.PR.find("div").text(a.responseText):this.PR.find("div").text("No response?");this.PR.show()}else this.Oma()},PG:-100,Ms:function(){this.dIa.length=0;this.zK.length=0;this.cra=q}});ig.Vf(function(){return ig.Ae=new ig.ljb})});ig.J=h;ig.N("impact.feature.lang-edit.plug-in").O("impact.feature.lang-edit.lang-edit").K(J());
ig.J=h;ig.N("game.beta").O("game.feature.beta.plug-in","impact.feature.lang-edit.plug-in").K(J());ig.J=h;
ig.N("game.main").O("impact.base.game","game.config","game.features","game.beta").K(function(){sc.Ogb=ig.F9.extend({nb:J()});sc.r$={jya:0,Nhb:1,plb:2};sc.dgb=ig.aRa.extend({r6a:sc.Ogb,gB:800,eua:new ig.ia("media/entity/shadow.png"),H0:0,NM:{Fk:0,tk:0,qk:0},$p:{Fk:0,tk:0,qk:0,Pj:y,Zua:0.3,hOa:0.3},G:{YX:new ig.ud("dust"),Mf:new ig.ud("teleport"),cj:new ig.ud("npc"),PA:new ig.ud("combatant")},Na:{SHb:new ig.ka("media/sound/hud/popup.ogg",0.8)},wXa:0,zAa:sc.r$.jya,CAa:[],f:function(){this.parent();sc.version.sCb()&&
sc.version.UJb();sc.options.$J.h4a();ig.input.bind(ig.ub.exa,"aim");ig.input.bind(ig.ub.Zja,"dash");ig.input.bind(ig.ub.QRa,"scrollUp");ig.input.bind(ig.ub.PRa,"scrollDown");ig.input.bind(ig.ub.NQa,"snapshot");ig.input.bind(ig.ub.MQa,"langedit");ig.input.bind(ig.ub.KQa,"savedialog");ig.platform==ig.Mk.DESKTOP&&ig.input.bind(ig.ub.LQa,"fullscreen");window.Ri&&ig.EV&&ig.r.bIb();ig.X.vd(new sc.ckb);ig.X.vd(new sc.epb);ig.X.vd(new sc.yjb);ig.X.vd(new ig.Ux);ig.X.vd(new sc.tob);ig.X.vd(new sc.Pfb);ig.X.vd(new sc.Lgb);
ig.X.vd(new sc.Jgb);ig.X.vd(new sc.eob);ig.X.vd(new sc.Hnb);ig.X.vd(new sc.St);ig.X.vd(new sc.nmb);ig.X.vd(new sc.wlb);window.testGui=new sc.ipb;ig.X.vd(window.testGui);sc.X={};sc.X.FB=new sc.Emb;sc.X.ENb=new sc.Vob;sc.X.wIa=new sc.kkb;sc.X.bEb=new sc.Gib;sc.X.vyb=new sc.Ghb;sc.X.mIb=new sc.Ehb;sc.X.nIb=new sc.hmb;sc.X.kEb=new sc.jjb;sc.X.FEb=new sc.Fjb;sc.X.Axb=new sc.Bgb;sc.X.FB.wF(sc.X.ENb);sc.X.FB.wF(sc.X.mIb);sc.X.FB.wF(sc.X.nIb);sc.X.FB.wF(sc.X.kEb);sc.X.FB.wF(sc.X.FEb);sc.X.FB.wF(sc.X.Axb);
sc.X.FB.wF(sc.X.vyb);sc.X.FB.wF(sc.X.wIa);sc.X.FB.wF(sc.X.bEb);ig.X.vd(sc.X.FB);ig.Ud.pe(0,0,0,1,0);window.IG_LOAD_SLOT!=g?this.Pqa(window.IG_LOAD_SLOT):window.SC_SKIP_TITLE?this.start():sc.q.v0a();ig.zd.sKb(function(a){return a=="NEW"||a=="LOAD"?y:!sc.q.h5a()});ig.zd.xKb(function(){return!sc.q.qDb()});this.Ie.LFa=function(a){return ig.Pb.vea(ig.Pb.mFa(a.g.x+a.size.x/2,a.g.y+a.size.y/2,a.aa,0,0))?h:y};this.Ie.MFa=function(a){return ig.Pb.vea(a.Q.Pb)?h:y}},update:function(){if(this.H0>0){this.H0=this.H0-
ig.i.Sa;this.H0<=0&&this.XNb()}this.parent()},nb:function(){this.parent()},T2a:function(){return sc.version.toString()},cBa:function(a){this.CAa.push(a)},start:function(a,b){this.zAa=a!=g?a:sc.r$.jya;sc.q.Wxb();sc.q.dY();this.H0=b||0.3},Pqa:function(a){this.wXa=a||0;sc.q.Uxb();sc.q.dY();this.H0=0.3},a3a:function(){this.Bha(0,0,0,y);this.NM.Fk=0;this.NM.tk=0;this.NM.qk=0;this.H0=0.8;sc.q.$xb()},XNb:function(){switch(sc.q.om){case sc.Dg.lxa:sc.pL&&sc.pL.lWb();if(this.zAa==sc.r$.Nhb)this.Mf("rookie-harbor.west",
new ig.tC("start"),"NEW");else if(this.zAa==sc.r$.plb)this.Mf("rhombus-dng.entrance",new ig.tC("start"),"NEW");else if(window.LOAD_LEVEL_ON_GAME_START){var a=window.MARKER_ON_GAME_START,a=a?new ig.tC(a):q;this.Mf(window.LOAD_LEVEL_ON_GAME_START,a,"NEW")}else this.Mf("hideout.entrance",new ig.tC("start"),"NEW");break;case sc.Dg.Oxa:sc.q.Zw();ig.r.reset();sc.q.v0a();break;case sc.Dg.Tja:ig.zd.RHa(this.wXa)}},sUb:function(){sc.q.Zw();ig.r.reset()},MIb:function(){this.Cha(1,0.3);ig.zd.a6a()},af:function(){sc.Ta.G.Ta.Cg("playerDefeat",
0,0,0).IK();var a=new ig.Ja({steps:[{type:"ADD_SLOW_MOTION",factor:0.001,time:0,name:"playerRespawn"},{type:"SET_ZOOM_BLUR",zoomType:"MEDIUM",fadeIn:0.5,duration:1,fadeOut:1},{type:"SET_CAMERA_TARGET",entity:ig.r.cb,speed:0.1,transition:"EASE_OUT",zoom:1},{type:"WAIT",time:0.3,ignoreSlowDown:h},{type:"CLEAR_SLOW_MOTION",name:"playerRespawn",time:0.4},{type:"ADD_SLOW_MOTION",factor:0.05,time:0.8},{type:"SET_CAMERA_ZOOM",zoom:3,duration:2,transition:"EASE_IN"},{type:"WAIT",time:0.2,ignoreSlowDown:h},
{type:"WAIT",time:0.5,ignoreSlowDown:h},{type:"SET_OVERLAY_CORNER",alpha:0,time:0.5,color:"RED"},{type:"SET_OVERLAY",alpha:1,time:0.5,color:"white"},{type:"WAIT",time:1,ignoreSlowDown:h},{type:"ADD_SLOW_MOTION",factor:0,time:0},{type:"SET_OVERLAY",alpha:1,time:0.5,color:"black"},{type:"WAIT",time:1,ignoreSlowDown:h},{type:"LOAD"}]});this.vi.Dp(a,ig.Qm.BLOCKING)},RGa:function(){return this.cb&&this.cb.Wf()&&!this.cb.Yv?y:h},Bha:function(a,b,c,d){this.$p.Fk=a;this.$p.tk=b;this.$p.qk=c;this.$p.Pj=d},
Cha:function(a,b){this.$p.Zua=a;this.$p.hOa=b},b8a:function(){ig.Ud.pe(this.$p.Fk,this.$p.tk,this.$p.qk,1,this.$p.Zua,this.$p.Pj);this.NM.Fk=this.$p.Fk;this.NM.tk=this.$p.tk;this.NM.qk=this.$p.qk;this.$p.Fk=0;this.$p.tk=0;this.$p.qk=0;this.$p.Pj=y;sc.q.cyb();return this.$p.Zua},a8a:function(){sc.q.Vxb()},m_a:function(){var a=this.kda(ig.wa.Player)[0];a||(a=this.Pe(ig.wa.Player,0,0,0));this.cb=a},X1a:function(a){a.save=ig.zd.jzb()},iCa:function(){this.parent()},QHa:function(a){if(ig.zd.uta){sc.q.T.pta();
ig.zd.uta=y}sc.q.oe()&&sc.q.dY();this.parent(a)},d6a:function(){this.parent();this.h3a()},h3a:function(){if(this.CAa.length>0){ig.r.J_(h);var a=this.CAa.pop();this.Na.SHb.play();sc.aq.jMb(a,h,this.h3a.bind(this));this.H3a=h}else{this.H3a=y;sc.q.Zw();ig.Ud.ge(0,this.$p.hOa);this.$p.hOa=0.3;this.$p.Zua=0.3;if(!sc.Ep.Ws("FORCE_UPDATE",{})){if(!this.cb.PFa()){a=new ig.Ja({steps:[{type:"DO_ACTION",entity:this.cb,action:[{type:"WAIT",time:0.1},{type:"WAIT_UNTIL_ON_GROUND"}]}]});ig.r.vi.Dp(a,ig.Qm.BLOCKING)}sc.Ep.Ws("MAP_ENTERED",
{})}}}});window.startCrossCode=function(){window.Ri&&sc.pL.mTb();ig.bfa("#canvas","#game",sc.dgb,window.IG_GAME_FPS||60,window.IG_WIDTH,window.IG_HEIGHT,window.IG_GAME_SCALE,sc.mob)}});